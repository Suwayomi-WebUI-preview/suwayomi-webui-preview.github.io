import{f as x,j as l,af as Te,ae as xe,a4 as O,ah as fe,al as be,T as tt,B as pe,aW as st,I as vt,aX as qt,aY as Pt,aZ as Yt,a_ as $e,aA as Dt,a$ as Ue,b0 as It,b1 as Qt,b2 as Vt,b3 as o,ax as Xt,u as Ke,aQ as Ze,v as Je,b4 as Ee,o as ot,p as nt,q as rt,w as at,b as et,M as We,s as pt,A as ft,L as bt,Q as Zt,r as ye,b5 as gt,m as ce,i as Jt,g as Ve,k as es,aB as ts,b6 as ss,aC as Qe,av as ht}from"./index-XiA-10qq.js";import{f as kt}from"./file-selector-DlHkLoY8.js";import{P as os}from"./Progress-C-nWPdN4.js";import{N as Ct}from"./NumberSetting-C9MWA8tO.js";import{c as qe,s as ve,a as ns,u as ge,b as Ne,_ as v,d as rs,e as te,f as ue,g as as,P as is,h as ls,C as cs,i as us,j as ds,k as ms,l as it,m as Fe,n as Me,o as ps,p as fs,q as De,r as bs,S as gs,t as lt,v as ct,w as ut,x as ze,y as dt,z as hs,D as jt,A as Ge,M as ks,B as Ae,E as Nt,F as Ft,G as Lt,H as Cs,I as Ot,J as Ts,K as xs,L as ws,N as ys}from"./useMobilePicker-BbgQMKEC.js";import{E as Ss}from"./EmptyViewAbsoluteCentered-Btp1Boz9.js";import{u as Ms}from"./useAppTitle-D76NoM3_.js";import{C as vs}from"./CheckboxInput-CKl_LyfP.js";import{F as Ps}from"./FormGroup-vm0ewM1j.js";import{u as Tt}from"./use-window-event-DZNbOzzd.js";import{u as Ds}from"./use-merged-ref-RJi1rPpr.js";import{L as Is}from"./ListSubheader-BmRvV6fA.js";import"./Slider-Bt1x3Pjh.js";import"./Chip-BcLLYGJX.js";import"./Checkbox-CcYvfuKg.js";import"./SwitchBase-CwpjSxsg.js";function Vs(e,s,r){const t=x.useRef(null),a=x.useRef(null),i=x.useCallback(n=>{n&&(a.current&&t.current&&a.current.removeEventListener(e,t.current,r),n.addEventListener(e,s,r),a.current=n,t.current=s)},[e,s,r]);return x.useEffect(()=>()=>{a.current&&t.current&&a.current.removeEventListener(e,t.current,r)},[e,r]),i}const Ye=({adapter:e,value:s,timezone:r,props:t})=>{if(s===null)return null;const{minTime:a,maxTime:i,minutesStep:n,shouldDisableTime:c,disableIgnoringDatePartForTimeValidation:m=!1,disablePast:u,disableFuture:h}=t,d=e.date(void 0,r),g=qe(m,e);switch(!0){case!e.isValid(s):return"invalidDate";case!!(a&&g(a,s)):return"minTime";case!!(i&&g(s,i)):return"maxTime";case!!(h&&e.isAfter(s,d)):return"disableFuture";case!!(u&&e.isBefore(s,d)):return"disablePast";case!!(c&&c(s,"hours")):return"shouldDisableTime-hours";case!!(c&&c(s,"minutes")):return"shouldDisableTime-minutes";case!!(c&&c(s,"seconds")):return"shouldDisableTime-seconds";case!!(n&&e.getMinutes(s)%n!==0):return"minutesStep";default:return null}};Ye.valueManager=ve;function js(e={}){const{enableAccessibleFieldDOMStructure:s=!0,ampm:r}=e;return x.useMemo(()=>({valueType:"time",validator:Ye,internal_valueManager:ve,internal_fieldValueManager:ns,internal_enableAccessibleFieldDOMStructure:s,internal_useApplyDefaultValuesToFieldInternalProps:Fs,internal_useOpenPickerButtonAriaLabel:Ns(r)}),[r,s])}function Ns(e){return function(r){const t=ge(),a=Ne();return x.useMemo(()=>{const i=(e!=null?e:t.is12HourCycleInCurrentLocale())?"fullTime12h":"fullTime24h",n=t.isValid(r)?t.format(r,i):null;return a.openTimePickerDialogue(n)},[r,a,t])}}function Fs(e){const s=ge(),r=At(e),t=x.useMemo(()=>{var a;return(a=e.ampm)!=null?a:s.is12HourCycleInCurrentLocale()},[e.ampm,s]);return x.useMemo(()=>{var a;return v({},e,r,{format:(a=e.format)!=null?a:t?s.formats.fullTime12h:s.formats.fullTime24h})},[e,r,t,s])}function At(e){return x.useMemo(()=>{var s,r;return{disablePast:(s=e.disablePast)!=null?s:!1,disableFuture:(r=e.disableFuture)!=null?r:!1}},[e.disablePast,e.disableFuture])}const Ls=e=>{const s=js(e);return rs({manager:s,props:e})},Os=["slots","slotProps","InputProps","inputProps"],Bt=x.forwardRef(function(s,r){const t=te({props:s,name:"MuiTimeField"}),{slots:a,slotProps:i}=t,n=ue(t,Os),c=as({slotProps:i,ref:r,externalForwardedProps:n}),m=Ls(c);return l.jsx(is,{slots:a,slotProps:i,inputRef:n.inputRef,children:l.jsx(ls,{fieldResponse:m,defaultOpenPickerIcon:cs})})});function As(e){return Te("MuiPickersToolbarText",e)}xe("MuiPickersToolbarText",["root"]);const Bs=["className","classes","selected","value"],_s=e=>be({root:["root"]},As,e),Rs=O(tt,{name:"MuiPickersToolbarText",slot:"Root"})(({theme:e})=>({transition:e.transitions.create("color"),color:(e.vars||e).palette.text.secondary,"&[data-selected]":{color:(e.vars||e).palette.text.primary}})),_t=x.forwardRef(function(s,r){const t=te({props:s,name:"MuiPickersToolbarText"}),{className:a,classes:i,selected:n,value:c}=t,m=ue(t,Bs),u=_s(i);return l.jsx(Rs,v({ref:r,className:fe(u.root,a),component:"span",ownerState:t},n&&{"data-selected":!0},m,{children:c}))}),Es=["align","className","classes","selected","typographyClassName","value","variant","width"],Hs=e=>be({root:["root"]},us,e),$s=O(pe,{name:"MuiPickersToolbarButton",slot:"Root"})({padding:0,minWidth:16,textTransform:"none"}),Le=x.forwardRef(function(s,r){const t=te({props:s,name:"MuiPickersToolbarButton"}),{align:a,className:i,classes:n,selected:c,typographyClassName:m,value:u,variant:h,width:d}=t,g=ue(t,Es),b=Hs(n);return l.jsx($s,v({variant:"text",ref:r,className:fe(b.root,i),ownerState:t},d?{sx:{width:d}}:{},g,{children:l.jsx(_t,{align:a,className:m,variant:h,value:u,selected:c})}))});function Us(e){return Te("MuiTimePickerToolbar",e)}const Oe=xe("MuiTimePickerToolbar",["root","separator","hourMinuteLabel","hourMinuteLabelLandscape","hourMinuteLabelReverse","ampmSelection","ampmLandscape","ampmLabel"]),Ws=["ampm","ampmInClock","className","classes"],zs=(e,s)=>{const{pickerOrientation:r,toolbarDirection:t}=s;return be({root:["root"],separator:["separator"],hourMinuteLabel:["hourMinuteLabel",r==="landscape"&&"hourMinuteLabelLandscape",t==="rtl"&&"hourMinuteLabelReverse"],ampmSelection:["ampmSelection",r==="landscape"&&"ampmLandscape"],ampmLabel:["ampmLabel"]},Us,e)},Gs=O(ps,{name:"MuiTimePickerToolbar",slot:"Root"})({}),Ks=O(_t,{name:"MuiTimePickerToolbar",slot:"Separator"})({outline:0,margin:"0 4px 0 2px",cursor:"default"}),qs=O("div",{name:"MuiTimePickerToolbar",slot:"HourMinuteLabel",overridesResolver:(e,s)=>[{["&.".concat(Oe.hourMinuteLabelLandscape)]:s.hourMinuteLabelLandscape,["&.".concat(Oe.hourMinuteLabelReverse)]:s.hourMinuteLabelReverse},s.hourMinuteLabel]})({display:"flex",justifyContent:"flex-end",alignItems:"flex-end",variants:[{props:{toolbarDirection:"rtl"},style:{flexDirection:"row-reverse"}},{props:{pickerOrientation:"landscape"},style:{marginTop:"auto"}}]}),Ys=O("div",{name:"MuiTimePickerToolbar",slot:"AmPmSelection",overridesResolver:(e,s)=>[{[".".concat(Oe.ampmLabel)]:s.ampmLabel},{["&.".concat(Oe.ampmLandscape)]:s.ampmLandscape},s.ampmSelection]})({display:"flex",flexDirection:"column",marginRight:"auto",marginLeft:12,["& .".concat(Oe.ampmLabel)]:{fontSize:17},variants:[{props:{pickerOrientation:"landscape"},style:{margin:"4px 0 auto",flexDirection:"row",justifyContent:"space-around",flexBasis:"100%"}}]});function Qs(e){const s=te({props:e,name:"MuiTimePickerToolbar"}),{ampm:r,ampmInClock:t,className:a,classes:i}=s,n=ue(s,Ws),c=ge(),m=Ne(),u=ds(),h=zs(i,u),{value:d,setValue:g,disabled:b,readOnly:C,view:y,setView:D,views:I}=ms(),P=!!(r&&!t&&I.includes("hours")),{meridiemMode:N,handleMeridiemChange:p}=it(d,r,V=>g(V,{changeImportance:"set",source:"view"})),S=V=>c.isValid(d)?c.format(d,V):"--",j=l.jsx(Ks,{tabIndex:-1,value:":",variant:"h3",selected:!1,className:h.separator});return l.jsxs(Gs,v({landscapeDirection:"row",toolbarTitle:m.timePickerToolbarTitle,ownerState:u,className:fe(h.root,a)},n,{children:[l.jsxs(qs,{className:h.hourMinuteLabel,ownerState:u,children:[Fe(I,"hours")&&l.jsx(Le,{tabIndex:-1,variant:"h3",onClick:()=>D("hours"),selected:y==="hours",value:S(r?"hours12h":"hours24h")}),Fe(I,["hours","minutes"])&&j,Fe(I,"minutes")&&l.jsx(Le,{tabIndex:-1,variant:"h3",onClick:()=>D("minutes"),selected:y==="minutes",value:S("minutes")}),Fe(I,["minutes","seconds"])&&j,Fe(I,"seconds")&&l.jsx(Le,{variant:"h3",onClick:()=>D("seconds"),selected:y==="seconds",value:S("seconds")})]}),P&&l.jsxs(Ys,{className:h.ampmSelection,ownerState:u,children:[l.jsx(Le,{disableRipple:!0,variant:"subtitle2",selected:N==="am",typographyClassName:h.ampmLabel,value:Me(c,"am"),onClick:C?void 0:()=>p("am"),disabled:b}),l.jsx(Le,{disableRipple:!0,variant:"subtitle2",selected:N==="pm",typographyClassName:h.ampmLabel,value:Me(c,"pm"),onClick:C?void 0:()=>p("pm"),disabled:b})]})]}))}function Rt(e,s){var c,m;const r=ge(),t=te({props:e,name:s}),a=At(t),i=(c=t.ampm)!=null?c:r.is12HourCycleInCurrentLocale(),n=x.useMemo(()=>{var u;return((u=t.localeText)==null?void 0:u.toolbarTitle)==null?t.localeText:v({},t.localeText,{timePickerToolbarTitle:t.localeText.toolbarTitle})},[t.localeText]);return v({},t,a,{ampm:i,localeText:n},fs({views:t.views,openTo:t.openTo,defaultViews:["hours","minutes"],defaultOpenTo:"hours"}),{slots:v({toolbar:Qs},t.slots),slotProps:v({},t.slotProps,{toolbar:v({ampm:i,ampmInClock:t.ampmInClock},(m=t.slotProps)==null?void 0:m.toolbar)})})}function Xs(e){return Te("MuiTimeClock",e)}xe("MuiTimeClock",["root","arrowSwitcher"]);const je=220,Ce=36,Be={x:je/2,y:je/2},Et={x:Be.x,y:0},Zs=Et.x-Be.x,Js=Et.y-Be.y,eo=e=>e*(180/Math.PI),Ht=(e,s,r)=>{const t=s-Be.x,a=r-Be.y,i=Math.atan2(Zs,Js)-Math.atan2(t,a);let n=eo(i);n=Math.round(n/e)*e,n%=360;const c=Math.floor(n/e)||0,m=t**2+a**2,u=Math.sqrt(m);return{value:c,distance:u}},to=(e,s,r=1)=>{const t=r*6;let{value:a}=Ht(t,e,s);return a=a*r%60,a},so=(e,s,r)=>{const{value:t,distance:a}=Ht(30,e,s);let i=t||12;return r?i%=12:a<je/2-Ce&&(i+=12,i%=24),i};function oo(e){return Te("MuiClockPointer",e)}xe("MuiClockPointer",["root","thumb"]);const no=["className","classes","isBetweenTwoClockValues","isInner","type","viewValue"],ro=e=>be({root:["root"],thumb:["thumb"]},oo,e),ao=O("div",{name:"MuiClockPointer",slot:"Root"})(({theme:e})=>({width:2,backgroundColor:(e.vars||e).palette.primary.main,position:"absolute",left:"calc(50% - 1px)",bottom:"50%",transformOrigin:"center bottom 0px",variants:[{props:{isClockPointerAnimated:!0},style:{transition:e.transitions.create(["transform","height"])}}]})),io=O("div",{name:"MuiClockPointer",slot:"Thumb"})(({theme:e})=>({width:4,height:4,backgroundColor:(e.vars||e).palette.primary.contrastText,borderRadius:"50%",position:"absolute",top:-21,left:"calc(50% - ".concat(Ce/2,"px)"),border:"".concat((Ce-4)/2,"px solid ").concat((e.vars||e).palette.primary.main),boxSizing:"content-box",variants:[{props:{isClockPointerBetweenTwoValues:!1},style:{backgroundColor:(e.vars||e).palette.primary.main}}]}));function lo(e){const s=te({props:e,name:"MuiClockPointer"}),{className:r,classes:t,isBetweenTwoClockValues:a,isInner:i,type:n,viewValue:c}=s,m=ue(s,no),u=x.useRef(n);x.useEffect(()=>{u.current=n},[n]);const{ownerState:h}=De(),d=v({},h,{isClockPointerAnimated:u.current!==n,isClockPointerBetweenTwoValues:a}),g=ro(t),b=()=>{let y=360/(n==="hours"?12:60)*c;return n==="hours"&&c>12&&(y-=360),{height:Math.round((i?.26:.4)*je),transform:"rotateZ(".concat(y,"deg)")}};return l.jsx(ao,v({style:b(),className:fe(g.root,r),ownerState:d},m,{children:l.jsx(io,{ownerState:d,className:g.thumb})}))}function co(e){return Te("MuiClock",e)}xe("MuiClock",["root","clock","wrapper","squareMask","pin","amButton","pmButton","meridiemText","selected"]);const uo=(e,s)=>{const r={root:["root"],clock:["clock"],wrapper:["wrapper"],squareMask:["squareMask"],pin:["pin"],amButton:["amButton",s.clockMeridiemMode==="am"&&"selected"],pmButton:["pmButton",s.clockMeridiemMode==="pm"&&"selected"],meridiemText:["meridiemText"]};return be(r,co,e)},mo=O("div",{name:"MuiClock",slot:"Root"})(({theme:e})=>({display:"flex",justifyContent:"center",alignItems:"center",margin:e.spacing(2)})),po=O("div",{name:"MuiClock",slot:"Clock"})({backgroundColor:"rgba(0,0,0,.07)",borderRadius:"50%",height:220,width:220,flexShrink:0,position:"relative",pointerEvents:"none"}),fo=O("div",{name:"MuiClock",slot:"Wrapper"})({"&:focus":{outline:"none"}}),bo=O("div",{name:"MuiClock",slot:"SquareMask"})({width:"100%",height:"100%",position:"absolute",pointerEvents:"auto",outline:0,touchAction:"none",userSelect:"none",variants:[{props:{isClockDisabled:!1},style:{"@media (pointer: fine)":{cursor:"pointer",borderRadius:"50%"},"&:active":{cursor:"move"}}}]}),go=O("div",{name:"MuiClock",slot:"Pin"})(({theme:e})=>({width:6,height:6,borderRadius:"50%",backgroundColor:(e.vars||e).palette.primary.main,position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)"})),$t=(e,s)=>({zIndex:1,bottom:8,paddingLeft:4,paddingRight:4,width:Ce,variants:[{props:{clockMeridiemMode:s},style:{backgroundColor:(e.vars||e).palette.primary.main,color:(e.vars||e).palette.primary.contrastText,"&:hover":{backgroundColor:(e.vars||e).palette.primary.light}}}]}),ho=O(vt,{name:"MuiClock",slot:"AmButton"})(({theme:e})=>v({},$t(e,"am"),{position:"absolute",left:8})),ko=O(vt,{name:"MuiClock",slot:"PmButton"})(({theme:e})=>v({},$t(e,"pm"),{position:"absolute",right:8})),xt=O(tt,{name:"MuiClock",slot:"MeridiemText"})({overflow:"hidden",whiteSpace:"nowrap",textOverflow:"ellipsis"});function Co(e){const s=te({props:e,name:"MuiClock"}),{ampm:r,ampmInClock:t,autoFocus:a,children:i,value:n,handleMeridiemChange:c,isTimeDisabled:m,meridiemMode:u,minutesStep:h=1,onChange:d,selectedId:g,type:b,viewValue:C,viewRange:[y,D],disabled:I=!1,readOnly:P,className:N,classes:p}=s,S=ge(),j=Ne(),{ownerState:V}=De(),A=v({},V,{isClockDisabled:I,clockMeridiemMode:u}),_=x.useRef(!1),w=uo(p,A),R=m(C,b),q=!r&&b==="hours"&&(C<1||C>12),F=(k,ie)=>{I||P||m(k,b)||d(k,ie)},L=(k,ie)=>{let{offsetX:U,offsetY:oe}=k;if(U===void 0){const ne=k.target.getBoundingClientRect();U=k.changedTouches[0].clientX-ne.left,oe=k.changedTouches[0].clientY-ne.top}const ee=b==="seconds"||b==="minutes"?to(U,oe,h):so(U,oe,!!r);F(ee,ie)},se=k=>{_.current=!0,L(k,"shallow")},X=k=>{_.current&&(L(k,"finish"),_.current=!1),k.preventDefault()},he=k=>{k.buttons>0&&L(k.nativeEvent,"shallow")},de=k=>{_.current&&(_.current=!1),L(k.nativeEvent,"finish")},J=b==="hours"?!1:C%5!==0,ke=b==="minutes"?h:1,B=x.useRef(null);st(()=>{a&&B.current.focus()},[a]);const H=k=>Math.max(y,Math.min(D,k)),K=k=>(k+(D+1))%(D+1),Y=k=>{if(!_.current)switch(k.key){case"Home":F(y,"partial"),k.preventDefault();break;case"End":F(D,"partial"),k.preventDefault();break;case"ArrowUp":F(K(C+ke),"partial"),k.preventDefault();break;case"ArrowDown":F(K(C-ke),"partial"),k.preventDefault();break;case"PageUp":F(H(C+5),"partial"),k.preventDefault();break;case"PageDown":F(H(C-5),"partial"),k.preventDefault();break;case"Enter":case" ":F(C,"finish"),k.preventDefault();break}};return l.jsxs(mo,{className:fe(w.root,N),children:[l.jsxs(po,{className:w.clock,children:[l.jsx(bo,{onTouchMove:se,onTouchStart:se,onTouchEnd:X,onMouseUp:de,onMouseMove:he,ownerState:A,className:w.squareMask}),!R&&l.jsxs(x.Fragment,{children:[l.jsx(go,{className:w.pin}),n!=null&&l.jsx(lo,{type:b,viewValue:C,isInner:q,isBetweenTwoClockValues:J})]}),l.jsx(fo,{"aria-activedescendant":g,"aria-label":j.clockLabelText(b,n==null?null:S.format(n,r?"fullTime12h":"fullTime24h")),ref:B,role:"listbox",onKeyDown:Y,tabIndex:0,className:w.wrapper,children:i})]}),r&&t&&l.jsxs(x.Fragment,{children:[l.jsx(ho,{onClick:P?void 0:()=>c("am"),disabled:I||u===null,ownerState:A,className:w.amButton,title:Me(S,"am"),children:l.jsx(xt,{variant:"caption",className:w.meridiemText,children:Me(S,"am")})}),l.jsx(ko,{disabled:I||u===null,onClick:P?void 0:()=>c("pm"),ownerState:A,className:w.pmButton,title:Me(S,"pm"),children:l.jsx(xt,{variant:"caption",className:w.meridiemText,children:Me(S,"pm")})})]})]})}function To(e){return Te("MuiClockNumber",e)}const He=xe("MuiClockNumber",["root","selected","disabled"]),xo=["className","classes","disabled","index","inner","label","selected"],wo=(e,s)=>{const r={root:["root",s.isClockNumberSelected&&"selected",s.isClockNumberDisabled&&"disabled"]};return be(r,To,e)},yo=O("span",{name:"MuiClockNumber",slot:"Root",overridesResolver:(e,s)=>[s.root,{["&.".concat(He.disabled)]:s.disabled},{["&.".concat(He.selected)]:s.selected}]})(({theme:e})=>({height:Ce,width:Ce,position:"absolute",left:"calc((100% - ".concat(Ce,"px) / 2)"),display:"inline-flex",justifyContent:"center",alignItems:"center",borderRadius:"50%",color:(e.vars||e).palette.text.primary,fontFamily:e.typography.fontFamily,"&:focused":{backgroundColor:(e.vars||e).palette.background.paper},["&.".concat(He.selected)]:{color:(e.vars||e).palette.primary.contrastText},["&.".concat(He.disabled)]:{pointerEvents:"none",color:(e.vars||e).palette.text.disabled},variants:[{props:{isClockNumberInInnerRing:!0},style:v({},e.typography.body2,{color:(e.vars||e).palette.text.secondary})}]}));function Ut(e){const s=te({props:e,name:"MuiClockNumber"}),{className:r,classes:t,disabled:a,index:i,inner:n,label:c,selected:m}=s,u=ue(s,xo),{ownerState:h}=De(),d=v({},h,{isClockNumberInInnerRing:n,isClockNumberSelected:m,isClockNumberDisabled:a}),g=wo(t,d),b=i%12/12*Math.PI*2-Math.PI/2,C=(je-Ce-2)/2*(n?.65:1),y=Math.round(Math.cos(b)*C),D=Math.round(Math.sin(b)*C);return l.jsx(yo,v({className:fe(g.root,r),"aria-disabled":a?!0:void 0,"aria-selected":m?!0:void 0,role:"option",style:{transform:"translate(".concat(y,"px, ").concat(D+(je-Ce)/2,"px")},ownerState:d},u,{children:c}))}const So=({ampm:e,value:s,getClockNumberText:r,isDisabled:t,selectedId:a,adapter:i})=>{const n=s?i.getHours(s):null,c=[],m=e?1:0,u=e?12:23,h=d=>n===null?!1:e?d===12?n===12||n===0:n===d||n-12===d:n===d;for(let d=m;d<=u;d+=1){let g=d.toString();d===0&&(g="00");const b=!e&&(d===0||d>12);g=i.formatNumber(g);const C=h(d);c.push(l.jsx(Ut,{id:C?a:void 0,index:d,inner:b,selected:C,disabled:t(d),label:g,"aria-label":r(g)},d))}return c},wt=({adapter:e,value:s,isDisabled:r,getClockNumberText:t,selectedId:a})=>{const i=e.formatNumber;return[[5,i("05")],[10,i("10")],[15,i("15")],[20,i("20")],[25,i("25")],[30,i("30")],[35,i("35")],[40,i("40")],[45,i("45")],[50,i("50")],[55,i("55")],[0,i("00")]].map(([n,c],m)=>{const u=n===s;return l.jsx(Ut,{label:c,id:u?a:void 0,index:m+1,inner:!1,disabled:r(n),selected:u,"aria-label":t(c)},n)})},mt=({value:e,referenceDate:s,adapter:r,props:t,timezone:a})=>{const i=x.useMemo(()=>ve.getInitialReferenceValue({value:e,adapter:r,props:t,referenceDate:s,granularity:gs.day,timezone:a,getTodayDate:()=>bs(r,a,"date")}),[s,a]);return e!=null?e:i},Mo=["ampm","ampmInClock","autoFocus","slots","slotProps","value","defaultValue","referenceDate","disableIgnoringDatePartForTimeValidation","maxTime","minTime","disableFuture","disablePast","minutesStep","shouldDisableTime","showViewSwitcher","onChange","view","views","openTo","onViewChange","focusedView","onFocusedViewChange","className","classes","disabled","readOnly","timezone"],vo=e=>be({root:["root"],arrowSwitcher:["arrowSwitcher"]},Xs,e),Po=O(dt,{name:"MuiTimeClock",slot:"Root"})({display:"flex",flexDirection:"column",position:"relative"}),Do=O(hs,{name:"MuiTimeClock",slot:"ArrowSwitcher"})({position:"absolute",right:12,top:15}),Io=["hours","minutes"],Vo=x.forwardRef(function(s,r){const t=ge(),a=te({props:s,name:"MuiTimeClock"}),{ampm:i=t.is12HourCycleInCurrentLocale(),ampmInClock:n=!1,autoFocus:c,slots:m,slotProps:u,value:h,defaultValue:d,referenceDate:g,disableIgnoringDatePartForTimeValidation:b=!1,maxTime:C,minTime:y,disableFuture:D,disablePast:I,minutesStep:P=1,shouldDisableTime:N,showViewSwitcher:p,onChange:S,view:j,views:V=Io,openTo:A,onViewChange:_,focusedView:w,onFocusedViewChange:R,className:q,classes:F,disabled:L,readOnly:se,timezone:X}=a,he=ue(a,Mo),{value:de,handleValueChange:J,timezone:ke}=lt({name:"TimeClock",timezone:X,value:h,defaultValue:d,referenceDate:g,onChange:S,valueManager:ve}),B=mt({value:de,referenceDate:g,adapter:t,props:a,timezone:ke}),H=Ne(),K=ct(ke),Y=qt(),{ownerState:k}=De(),{view:ie,setView:U,previousView:oe,nextView:ee,setValueAndGoToNextView:ne}=ut({view:j,views:V,openTo:A,onViewChange:_,onChange:J,focusedView:w,onFocusedViewChange:R}),{meridiemMode:re,handleMeridiemChange:ae}=it(B,i,ne),me=x.useCallback((z,Q)=>{const $=qe(b,t),Z=Q==="hours"||Q==="minutes"&&V.includes("seconds"),f=({start:M,end:E})=>!(y&&$(y,E)||C&&$(M,C)||D&&$(M,K)||I&&$(K,Z?E:M)),T=(M,E=1)=>{if(M%E!==0)return!1;if(N)switch(Q){case"hours":return!N(t.setHours(B,M),"hours");case"minutes":return!N(t.setMinutes(B,M),"minutes");case"seconds":return!N(t.setSeconds(B,M),"seconds");default:return!1}return!0};switch(Q){case"hours":{const M=ze(z,re,i),E=t.setHours(B,M);if(t.getHours(E)!==M)return!0;const G=t.setSeconds(t.setMinutes(E,0),0),Ie=t.setSeconds(t.setMinutes(E,59),59);return!f({start:G,end:Ie})||!T(M)}case"minutes":{const M=t.setMinutes(B,z),E=t.setSeconds(M,0),G=t.setSeconds(M,59);return!f({start:E,end:G})||!T(z,P)}case"seconds":{const M=t.setSeconds(B,z);return!f({start:M,end:M})||!T(z)}default:throw new Error("not supported")}},[i,B,b,C,re,y,P,N,t,D,I,K,V]),we=x.useMemo(()=>{switch(ie){case"hours":{const z=(Z,f)=>{const T=ze(Z,re,i);ne(t.setHours(B,T),f,"hours")},Q=t.getHours(B);let $;return i?Q>12?$=[12,23]:$=[0,11]:$=[0,23],{onChange:z,viewValue:Q,children:So({value:de,adapter:t,ampm:i,getClockNumberText:H.hoursClockNumberText,isDisabled:Z=>L||me(Z,"hours"),selectedId:Y}),viewRange:$}}case"minutes":{const z=t.getMinutes(B);return{viewValue:z,onChange:($,Z)=>{ne(t.setMinutes(B,$),Z,"minutes")},children:wt({adapter:t,value:z,getClockNumberText:H.minutesClockNumberText,isDisabled:$=>L||me($,"minutes"),selectedId:Y}),viewRange:[0,59]}}case"seconds":{const z=t.getSeconds(B);return{viewValue:z,onChange:($,Z)=>{ne(t.setSeconds(B,$),Z,"seconds")},children:wt({adapter:t,value:z,getClockNumberText:H.secondsClockNumberText,isDisabled:$=>L||me($,"seconds"),selectedId:Y}),viewRange:[0,59]}}default:throw new Error("You must provide the type for ClockView")}},[ie,t,de,i,H.hoursClockNumberText,H.minutesClockNumberText,H.secondsClockNumberText,re,ne,B,me,Y,L]),Pe=vo(F);return l.jsxs(Po,v({ref:r,className:fe(Pe.root,q),ownerState:k},he,{children:[l.jsx(Co,v({autoFocus:c!=null?c:!!w,ampmInClock:n&&V.includes("hours"),value:de,type:ie,ampm:i,minutesStep:P,isTimeDisabled:me,meridiemMode:re,handleMeridiemChange:ae,selectedId:Y,disabled:L,readOnly:se},we)),p&&l.jsx(Do,{className:Pe.arrowSwitcher,slots:m,slotProps:u,onGoToPrevious:()=>U(oe),isPreviousDisabled:!oe,previousLabel:H.openPreviousView,onGoToNext:()=>U(ee),isNextDisabled:!ee,nextLabel:H.openNextView,ownerState:k})]}))});function jo(e){return Te("MuiDigitalClock",e)}xe("MuiDigitalClock",["root","list","item"]);const No=["ampm","timeStep","autoFocus","slots","slotProps","value","defaultValue","referenceDate","disableIgnoringDatePartForTimeValidation","maxTime","minTime","disableFuture","disablePast","minutesStep","shouldDisableTime","onChange","view","openTo","onViewChange","focusedView","onFocusedViewChange","className","classes","disabled","readOnly","views","skipDisabled","timezone"],Fo=e=>be({root:["root"],list:["list"],item:["item"]},jo,e),Lo=O(dt,{name:"MuiDigitalClock",slot:"Root"})({overflowY:"auto",width:"100%",scrollbarWidth:"thin","@media (prefers-reduced-motion: no-preference)":{scrollBehavior:"auto"},maxHeight:jt,variants:[{props:{hasDigitalClockAlreadyBeenRendered:!0},style:{"@media (prefers-reduced-motion: no-preference)":{scrollBehavior:"smooth"}}}]}),Oo=O(It,{name:"MuiDigitalClock",slot:"List"})({padding:0}),Ao=O(Dt,{name:"MuiDigitalClock",slot:"Item",shouldForwardProp:e=>e!=="itemValue"&&e!=="formattedValue"})(({theme:e})=>({padding:"8px 16px",margin:"2px 4px","&:first-of-type":{marginTop:4},"&:hover":{backgroundColor:e.vars?"rgba(".concat(e.vars.palette.primary.mainChannel," / ").concat(e.vars.palette.action.hoverOpacity,")"):Ue(e.palette.primary.main,e.palette.action.hoverOpacity)},"&.Mui-selected":{backgroundColor:(e.vars||e).palette.primary.main,color:(e.vars||e).palette.primary.contrastText,"&:focus-visible, &:hover":{backgroundColor:(e.vars||e).palette.primary.dark}},"&.Mui-focusVisible":{backgroundColor:e.vars?"rgba(".concat(e.vars.palette.primary.mainChannel," / ").concat(e.vars.palette.action.focusOpacity,")"):Ue(e.palette.primary.main,e.palette.action.focusOpacity)}})),Bo=x.forwardRef(function(s,r){var Z;const t=ge(),a=x.useRef(null),i=Pt(r,a),n=x.useRef(null),c=te({props:s,name:"MuiDigitalClock"}),{ampm:m=t.is12HourCycleInCurrentLocale(),timeStep:u=30,autoFocus:h,slots:d,slotProps:g,value:b,defaultValue:C,referenceDate:y,disableIgnoringDatePartForTimeValidation:D=!1,maxTime:I,minTime:P,disableFuture:N,disablePast:p,minutesStep:S=1,shouldDisableTime:j,onChange:V,view:A,openTo:_,onViewChange:w,focusedView:R,onFocusedViewChange:q,className:F,classes:L,disabled:se,readOnly:X,views:he=["hours"],skipDisabled:de=!1,timezone:J}=c,ke=ue(c,No),{value:B,handleValueChange:H,timezone:K}=lt({name:"DigitalClock",timezone:J,value:b,defaultValue:C,referenceDate:y,onChange:V,valueManager:ve}),Y=Ne(),k=ct(K),{ownerState:ie}=De(),U=v({},ie,{hasDigitalClockAlreadyBeenRendered:!!a.current}),oe=Fo(L),ee=(Z=d==null?void 0:d.digitalClockItem)!=null?Z:Ao,ne=Yt({elementType:ee,externalSlotProps:g==null?void 0:g.digitalClockItem,ownerState:U,className:oe.item}),re=mt({value:B,referenceDate:y,adapter:t,props:c,timezone:K}),ae=$e(f=>H(f,"finish","hours")),{setValueAndGoToNextView:me}=ut({view:A,views:he,openTo:_,onViewChange:w,onChange:ae,focusedView:R,onFocusedViewChange:q}),we=$e(f=>{me(f,"finish")});st(()=>{if(a.current===null)return;const f=a.current.querySelector('[role="listbox"] [role="option"][tabindex="0"], [role="listbox"] [role="option"][aria-selected="true"]');if(!f)return;const T=f.offsetTop;(h||R)&&f.focus(),a.current.scrollTop=T-4});const Pe=x.useCallback(f=>{const T=qe(D,t),M=()=>!(P&&T(P,f)||I&&T(f,I)||N&&T(f,k)||p&&T(k,f)),E=()=>t.getMinutes(f)%S!==0?!1:j?!j(f,"hours"):!0;return!M()||!E()},[D,t,P,I,N,k,p,S,j]),z=x.useMemo(()=>{const f=[];let M=t.startOfDay(re);for(;t.isSameDay(re,M);)f.push(M),M=t.addMinutes(M,u);return f},[re,u,t]),Q=z.findIndex(f=>t.isEqual(f,re)),$=f=>{switch(f.key){case"PageUp":{const T=Ge(n.current)-5,M=n.current.children,E=Math.max(0,T),G=M[E];G&&G.focus(),f.preventDefault();break}case"PageDown":{const T=Ge(n.current)+5,M=n.current.children,E=Math.min(M.length-1,T),G=M[E];G&&G.focus(),f.preventDefault();break}}};return l.jsx(Lo,v({ref:i,className:fe(oe.root,F),ownerState:U},ke,{children:l.jsx(Oo,{ref:n,role:"listbox","aria-label":Y.timePickerToolbarTitle,className:oe.list,onKeyDown:$,children:z.map((f,T)=>{const M=Pe(f);if(de&&M)return null;const E=t.isEqual(f,B),G=t.format(f,m?"fullTime12h":"fullTime24h"),W=Q===T||Q===-1&&T===0?0:-1;return l.jsx(ee,v({onClick:()=>!X&&we(f),selected:E,disabled:se||M,disableRipple:X,role:"option","aria-disabled":X,"aria-selected":E,tabIndex:W,itemValue:f,formattedValue:G},ne,{children:G}),"".concat(f.valueOf(),"-").concat(G))})})}))});function _o(e){return Te("MuiMultiSectionDigitalClock",e)}xe("MuiMultiSectionDigitalClock",["root"]);function Ro(e){return Te("MuiMultiSectionDigitalClockSection",e)}xe("MuiMultiSectionDigitalClockSection",["root","item"]);const Eo=["autoFocus","onChange","className","classes","disabled","readOnly","items","active","slots","slotProps","skipDisabled"],Ho=e=>be({root:["root"],item:["item"]},Ro,e),$o=O(It,{name:"MuiMultiSectionDigitalClockSection",slot:"Root"})(({theme:e})=>({maxHeight:jt,width:56,padding:0,overflow:"hidden",scrollbarWidth:"thin","@media (prefers-reduced-motion: no-preference)":{scrollBehavior:"auto"},"@media (pointer: fine)":{"&:hover":{overflowY:"auto"}},"@media (pointer: none), (pointer: coarse)":{overflowY:"auto"},"&:not(:first-of-type)":{borderLeft:"1px solid ".concat((e.vars||e).palette.divider)},variants:[{props:{hasDigitalClockAlreadyBeenRendered:!0},style:{"@media (prefers-reduced-motion: no-preference)":{scrollBehavior:"smooth"}}}]})),Uo=O(Dt,{name:"MuiMultiSectionDigitalClockSection",slot:"Item"})(({theme:e})=>({padding:8,margin:"2px 4px",width:ks,justifyContent:"center","&:first-of-type":{marginTop:4},"&:hover":{backgroundColor:e.vars?"rgba(".concat(e.vars.palette.primary.mainChannel," / ").concat(e.vars.palette.action.hoverOpacity,")"):Ue(e.palette.primary.main,e.palette.action.hoverOpacity)},"&.Mui-selected":{backgroundColor:(e.vars||e).palette.primary.main,color:(e.vars||e).palette.primary.contrastText,"&:focus-visible, &:hover":{backgroundColor:(e.vars||e).palette.primary.dark}},"&.Mui-focusVisible":{backgroundColor:e.vars?"rgba(".concat(e.vars.palette.primary.mainChannel," / ").concat(e.vars.palette.action.focusOpacity,")"):Ue(e.palette.primary.main,e.palette.action.focusOpacity)}})),Wo=x.forwardRef(function(s,r){var _;const t=x.useRef(null),a=Pt(r,t),i=x.useRef(null),n=te({props:s,name:"MuiMultiSectionDigitalClockSection"}),{autoFocus:c,onChange:m,className:u,classes:h,disabled:d,readOnly:g,items:b,active:C,slots:y,slotProps:D,skipDisabled:I}=n,P=ue(n,Eo),{ownerState:N}=De(),p=v({},N,{hasDigitalClockAlreadyBeenRendered:!!t.current}),S=Ho(h),j=(_=y==null?void 0:y.digitalClockSectionItem)!=null?_:Uo;st(()=>{if(t.current===null)return;const w=t.current.querySelector('[role="option"][tabindex="0"], [role="option"][aria-selected="true"]');if(C&&c&&w&&w.focus(),!w||i.current===w)return;i.current=w;const R=w.offsetTop,q=w.offsetHeight,F=t.current.clientHeight,L=t.current.scrollHeight,se=R-F/2+q/2,X=L-F,he=Math.min(se,X);t.current.scrollTop=Math.max(0,he)});const V=b.findIndex(w=>w.isFocused(w.value)),A=w=>{switch(w.key){case"PageUp":{const R=Ge(t.current)-5,q=t.current.children,F=Math.max(0,R),L=q[F];L&&L.focus(),w.preventDefault();break}case"PageDown":{const R=Ge(t.current)+5,q=t.current.children,F=Math.min(q.length-1,R),L=q[F];L&&L.focus(),w.preventDefault();break}}};return l.jsx($o,v({ref:a,className:fe(S.root,u),ownerState:p,autoFocusItem:c&&C,role:"listbox",onKeyDown:A},P,{children:b.map((w,R)=>{var X;const q=(X=w.isDisabled)==null?void 0:X.call(w,w.value),F=d||q;if(I&&F)return null;const L=w.isSelected(w.value),se=V===R||V===-1&&R===0?0:-1;return l.jsx(j,v({onClick:()=>!g&&m(w.value),selected:L,disabled:F,disableRipple:g,role:"option","aria-disabled":g||F||void 0,"aria-label":w.ariaLabel,"aria-selected":L,tabIndex:se,className:S.item},D==null?void 0:D.digitalClockSectionItem,{children:w.label}),w.label)})}))}),zo=({now:e,value:s,adapter:r,ampm:t,isDisabled:a,resolveAriaLabel:i,timeStep:n,valueOrReferenceDate:c})=>{const m=s?r.getHours(s):null,u=[],h=(b,C)=>{const y=C!=null?C:m;return y===null?!1:t?b===12?y===12||y===0:y===b||y-12===b:y===b},d=b=>h(b,r.getHours(c)),g=t?11:23;for(let b=0;b<=g;b+=n){let C=r.format(r.setHours(e,b),t?"hours12h":"hours24h");const y=i(parseInt(C,10).toString());C=r.formatNumber(C),u.push({value:b,label:C,isSelected:h,isDisabled:a,isFocused:d,ariaLabel:y})}return u},yt=({value:e,adapter:s,isDisabled:r,timeStep:t,resolveLabel:a,resolveAriaLabel:i,hasValue:n=!0})=>{const c=u=>e===null?!1:n&&e===u,m=u=>e===u;return[...Array.from({length:Math.ceil(60/t)},(u,h)=>{const d=t*h;return{value:d,label:s.formatNumber(a(d)),isDisabled:r,isSelected:c,isFocused:m,ariaLabel:i(d.toString())}})]},Go=["ampm","timeSteps","autoFocus","slots","slotProps","value","defaultValue","referenceDate","disableIgnoringDatePartForTimeValidation","maxTime","minTime","disableFuture","disablePast","minutesStep","shouldDisableTime","onChange","view","views","openTo","onViewChange","focusedView","onFocusedViewChange","className","classes","disabled","readOnly","skipDisabled","timezone"],Ko=e=>be({root:["root"]},_o,e),qo=O(dt,{name:"MuiMultiSectionDigitalClock",slot:"Root"})(({theme:e})=>({flexDirection:"row",width:"100%",borderBottom:"1px solid ".concat((e.vars||e).palette.divider)})),Yo=x.forwardRef(function(s,r){const t=ge(),a=Qt(),i=te({props:s,name:"MuiMultiSectionDigitalClock"}),{ampm:n=t.is12HourCycleInCurrentLocale(),timeSteps:c,autoFocus:m,slots:u,slotProps:h,value:d,defaultValue:g,referenceDate:b,disableIgnoringDatePartForTimeValidation:C=!1,maxTime:y,minTime:D,disableFuture:I,disablePast:P,minutesStep:N=1,shouldDisableTime:p,onChange:S,view:j,views:V=["hours","minutes"],openTo:A,onViewChange:_,focusedView:w,onFocusedViewChange:R,className:q,classes:F,disabled:L,readOnly:se,skipDisabled:X=!1,timezone:he}=i,de=ue(i,Go),{value:J,handleValueChange:ke,timezone:B}=lt({name:"MultiSectionDigitalClock",timezone:he,value:d,defaultValue:g,referenceDate:b,onChange:S,valueManager:ve}),H=Ne(),K=ct(B),Y=x.useMemo(()=>v({hours:1,minutes:5,seconds:5},c),[c]),k=mt({value:J,referenceDate:b,adapter:t,props:i,timezone:B}),ie=$e((f,T,M)=>ke(f,T,M)),U=x.useMemo(()=>!n||!V.includes("hours")||V.includes("meridiem")?V:[...V,"meridiem"],[n,V]),{view:oe,setValueAndGoToNextView:ee,focusedView:ne}=ut({view:j,views:U,openTo:A,onViewChange:_,onChange:ie,focusedView:w,onFocusedViewChange:R}),re=$e(f=>{ee(f,"finish","meridiem")}),{meridiemMode:ae,handleMeridiemChange:me}=it(k,n,re,"finish"),we=x.useCallback((f,T)=>{const M=qe(C,t),E=T==="hours"||T==="minutes"&&U.includes("seconds"),G=({start:W,end:le})=>!(D&&M(D,le)||y&&M(W,y)||I&&M(W,K)||P&&M(K,E?le:W)),Ie=(W,le=1)=>{if(W%le!==0)return!1;if(p)switch(T){case"hours":return!p(t.setHours(k,W),"hours");case"minutes":return!p(t.setMinutes(k,W),"minutes");case"seconds":return!p(t.setSeconds(k,W),"seconds");default:return!1}return!0};switch(T){case"hours":{const W=ze(f,ae,n),le=t.setHours(k,W);if(t.getHours(le)!==W)return!0;const Re=t.setSeconds(t.setMinutes(le,0),0),Kt=t.setSeconds(t.setMinutes(le,59),59);return!G({start:Re,end:Kt})||!Ie(W)}case"minutes":{const W=t.setMinutes(k,f),le=t.setSeconds(W,0),Re=t.setSeconds(W,59);return!G({start:le,end:Re})||!Ie(f,N)}case"seconds":{const W=t.setSeconds(k,f);return!G({start:W,end:W})||!Ie(f)}default:throw new Error("not supported")}},[n,k,C,y,ae,D,N,p,t,I,P,K,U]),Pe=x.useCallback(f=>{switch(f){case"hours":return{onChange:T=>{const M=ze(T,ae,n);ee(t.setHours(k,M),"finish","hours")},items:zo({now:K,value:J,ampm:n,adapter:t,isDisabled:T=>we(T,"hours"),timeStep:Y.hours,resolveAriaLabel:H.hoursClockNumberText,valueOrReferenceDate:k})};case"minutes":return{onChange:T=>{ee(t.setMinutes(k,T),"finish","minutes")},items:yt({value:t.getMinutes(k),adapter:t,isDisabled:T=>we(T,"minutes"),resolveLabel:T=>t.format(t.setMinutes(K,T),"minutes"),timeStep:Y.minutes,hasValue:!!J,resolveAriaLabel:H.minutesClockNumberText})};case"seconds":return{onChange:T=>{ee(t.setSeconds(k,T),"finish","seconds")},items:yt({value:t.getSeconds(k),adapter:t,isDisabled:T=>we(T,"seconds"),resolveLabel:T=>t.format(t.setSeconds(K,T),"seconds"),timeStep:Y.seconds,hasValue:!!J,resolveAriaLabel:H.secondsClockNumberText})};case"meridiem":{const T=Me(t,"am"),M=Me(t,"pm");return{onChange:me,items:[{value:"am",label:T,isSelected:()=>!!J&&ae==="am",isFocused:()=>!!k&&ae==="am",ariaLabel:T},{value:"pm",label:M,isSelected:()=>!!J&&ae==="pm",isFocused:()=>!!k&&ae==="pm",ariaLabel:M}]}}default:throw new Error("Unknown view: ".concat(f," found."))}},[K,J,n,t,Y.hours,Y.minutes,Y.seconds,H.hoursClockNumberText,H.minutesClockNumberText,H.secondsClockNumberText,ae,ee,k,we,me]),z=x.useMemo(()=>{if(!a)return U;const f=U.filter(T=>T!=="meridiem");return f.reverse(),U.includes("meridiem")&&f.push("meridiem"),f},[a,U]),Q=x.useMemo(()=>U.reduce((f,T)=>v({},f,{[T]:Pe(T)}),{}),[U,Pe]),{ownerState:$}=De(),Z=Ko(F);return l.jsx(qo,v({ref:r,className:fe(Z.root,q),ownerState:$,role:"group"},de,{children:z.map(f=>l.jsx(Wo,{items:Q[f].items,onChange:Q[f].onChange,active:oe===f,autoFocus:m||ne===f,disabled:L,readOnly:se,slots:u,slotProps:h,skipDisabled:X,"aria-label":H.selectViewText(f)},f))}))}),Xe=({view:e,onViewChange:s,focusedView:r,onFocusedViewChange:t,views:a,value:i,defaultValue:n,referenceDate:c,onChange:m,className:u,classes:h,disableFuture:d,disablePast:g,minTime:b,maxTime:C,shouldDisableTime:y,minutesStep:D,ampm:I,ampmInClock:P,slots:N,slotProps:p,readOnly:S,disabled:j,sx:V,autoFocus:A,showViewSwitcher:_,disableIgnoringDatePartForTimeValidation:w,timezone:R})=>l.jsx(Vo,{view:e,onViewChange:s,focusedView:r&&Ae(r)?r:null,onFocusedViewChange:t,views:a.filter(Ae),value:i,defaultValue:n,referenceDate:c,onChange:m,className:u,classes:h,disableFuture:d,disablePast:g,minTime:b,maxTime:C,shouldDisableTime:y,minutesStep:D,ampm:I,ampmInClock:P,slots:N,slotProps:p,readOnly:S,disabled:j,sx:V,autoFocus:A,showViewSwitcher:_,disableIgnoringDatePartForTimeValidation:w,timezone:R}),Qo=({view:e,onViewChange:s,focusedView:r,onFocusedViewChange:t,views:a,value:i,defaultValue:n,referenceDate:c,onChange:m,className:u,classes:h,disableFuture:d,disablePast:g,minTime:b,maxTime:C,shouldDisableTime:y,minutesStep:D,ampm:I,slots:P,slotProps:N,readOnly:p,disabled:S,sx:j,autoFocus:V,disableIgnoringDatePartForTimeValidation:A,timeSteps:_,skipDisabled:w,timezone:R})=>l.jsx(Bo,{view:e,onViewChange:s,focusedView:r&&Ae(r)?r:null,onFocusedViewChange:t,views:a.filter(Ae),value:i,defaultValue:n,referenceDate:c,onChange:m,className:u,classes:h,disableFuture:d,disablePast:g,minTime:b,maxTime:C,shouldDisableTime:y,minutesStep:D,ampm:I,slots:P,slotProps:N,readOnly:p,disabled:S,sx:j,autoFocus:V,disableIgnoringDatePartForTimeValidation:A,timeStep:_==null?void 0:_.minutes,skipDisabled:w,timezone:R}),St=({view:e,onViewChange:s,focusedView:r,onFocusedViewChange:t,views:a,value:i,defaultValue:n,referenceDate:c,onChange:m,className:u,classes:h,disableFuture:d,disablePast:g,minTime:b,maxTime:C,shouldDisableTime:y,minutesStep:D,ampm:I,slots:P,slotProps:N,readOnly:p,disabled:S,sx:j,autoFocus:V,disableIgnoringDatePartForTimeValidation:A,timeSteps:_,skipDisabled:w,timezone:R})=>l.jsx(Yo,{view:e,onViewChange:s,focusedView:r&&Nt(r)?r:null,onFocusedViewChange:t,views:a.filter(Ae),value:i,defaultValue:n,referenceDate:c,onChange:m,className:u,classes:h,disableFuture:d,disablePast:g,minTime:b,maxTime:C,shouldDisableTime:y,minutesStep:D,ampm:I,slots:P,slotProps:N,readOnly:p,disabled:S,sx:j,autoFocus:V,disableIgnoringDatePartForTimeValidation:A,timeSteps:_,skipDisabled:w,timezone:R}),Xo=(e,s,r)=>r?s.filter(t=>!Nt(t)||t==="hours"):e?[...s,"meridiem"]:s,Zo=(e,s)=>{var r,t;return 24*60/(((r=e.hours)!=null?r:1)*((t=e.minutes)!=null?t:5))<=s};function Jo({thresholdToRenderTimeInASingleColumn:e,ampm:s,timeSteps:r,views:t}){const a=e!=null?e:24,i=v({hours:1,minutes:5,seconds:5},r),n=Zo(i,a);return{thresholdToRenderTimeInASingleColumn:a,timeSteps:i,shouldRenderTimeInASingleColumn:n,views:Xo(s,t,n)}}const Wt=x.forwardRef(function(s,r){var y,D,I;const t=ge(),a=Rt(s,"MuiDesktopTimePicker"),{shouldRenderTimeInASingleColumn:i,views:n,timeSteps:c}=Jo(a),m=i?Qo:St,u=v({hours:m,minutes:m,seconds:m,meridiem:m},a.viewRenderers),h=(y=a.ampmInClock)!=null?y:!0,g=((D=u.hours)==null?void 0:D.name)===St.name?n:n.filter(P=>P!=="meridiem"),b=v({},a,{ampmInClock:h,timeSteps:c,viewRenderers:u,format:Ft(t,a),views:i?["hours"]:g,slots:v({field:Bt},a.slots),slotProps:v({},a.slotProps,{field:P=>{var N;return v({},Vt((N=a.slotProps)==null?void 0:N.field,P),Lt(a))},toolbar:v({hidden:!0,ampmInClock:h},(I=a.slotProps)==null?void 0:I.toolbar)})}),{renderPicker:C}=Cs({ref:r,props:b,valueManager:ve,valueType:"time",validator:Ye,steps:null});return C()});Wt.propTypes={ampm:o.bool,ampmInClock:o.bool,autoFocus:o.bool,className:o.string,closeOnSelect:o.bool,defaultValue:o.object,disabled:o.bool,disableFuture:o.bool,disableIgnoringDatePartForTimeValidation:o.bool,disableOpenPicker:o.bool,disablePast:o.bool,enableAccessibleFieldDOMStructure:o.any,format:o.string,formatDensity:o.oneOf(["dense","spacious"]),inputRef:Ot,label:o.node,localeText:o.object,maxTime:o.object,minTime:o.object,minutesStep:o.number,name:o.string,onAccept:o.func,onChange:o.func,onClose:o.func,onError:o.func,onOpen:o.func,onSelectedSectionsChange:o.func,onViewChange:o.func,open:o.bool,openTo:o.oneOf(["hours","meridiem","minutes","seconds"]),orientation:o.oneOf(["landscape","portrait"]),readOnly:o.bool,reduceAnimations:o.bool,referenceDate:o.object,selectedSections:o.oneOfType([o.oneOf(["all","day","empty","hours","meridiem","minutes","month","seconds","weekDay","year"]),o.number]),shouldDisableTime:o.func,skipDisabled:o.bool,slotProps:o.object,slots:o.object,sx:o.oneOfType([o.arrayOf(o.oneOfType([o.func,o.object,o.bool])),o.func,o.object]),thresholdToRenderTimeInASingleColumn:o.number,timeSteps:o.shape({hours:o.number,minutes:o.number,seconds:o.number}),timezone:o.string,value:o.object,view:o.oneOf(["hours","meridiem","minutes","seconds"]),viewRenderers:o.shape({hours:o.func,meridiem:o.func,minutes:o.func,seconds:o.func}),views:o.arrayOf(o.oneOf(["hours","minutes","seconds"]).isRequired)};const zt=x.forwardRef(function(s,r){var u,h;const t=ge(),a=Rt(s,"MuiMobileTimePicker"),i=v({hours:Xe,minutes:Xe,seconds:Xe},a.viewRenderers),n=(u=a.ampmInClock)!=null?u:!1,c=v({},a,{ampmInClock:n,viewRenderers:i,format:Ft(t,a),slots:v({field:Bt},a.slots),slotProps:v({},a.slotProps,{field:d=>{var g;return v({},Vt((g=a.slotProps)==null?void 0:g.field,d),Lt(a))},toolbar:v({hidden:!1,ampmInClock:n},(h=a.slotProps)==null?void 0:h.toolbar)})}),{renderPicker:m}=Ts({ref:r,props:c,valueManager:ve,valueType:"time",validator:Ye,steps:null});return m()});zt.propTypes={ampm:o.bool,ampmInClock:o.bool,autoFocus:o.bool,className:o.string,closeOnSelect:o.bool,defaultValue:o.object,disabled:o.bool,disableFuture:o.bool,disableIgnoringDatePartForTimeValidation:o.bool,disableOpenPicker:o.bool,disablePast:o.bool,enableAccessibleFieldDOMStructure:o.any,format:o.string,formatDensity:o.oneOf(["dense","spacious"]),inputRef:Ot,label:o.node,localeText:o.object,maxTime:o.object,minTime:o.object,minutesStep:o.number,name:o.string,onAccept:o.func,onChange:o.func,onClose:o.func,onError:o.func,onOpen:o.func,onSelectedSectionsChange:o.func,onViewChange:o.func,open:o.bool,openTo:o.oneOf(["hours","minutes","seconds"]),orientation:o.oneOf(["landscape","portrait"]),readOnly:o.bool,reduceAnimations:o.bool,referenceDate:o.object,selectedSections:o.oneOfType([o.oneOf(["all","day","empty","hours","meridiem","minutes","month","seconds","weekDay","year"]),o.number]),shouldDisableTime:o.func,slotProps:o.object,slots:o.object,sx:o.oneOfType([o.arrayOf(o.oneOfType([o.func,o.object,o.bool])),o.func,o.object]),timezone:o.string,value:o.object,view:o.oneOf(["hours","minutes","seconds"]),viewRenderers:o.shape({hours:o.func,minutes:o.func,seconds:o.func}),views:o.arrayOf(o.oneOf(["hours","minutes","seconds"]).isRequired)};const en=["desktopModeMediaQuery"],tn=x.forwardRef(function(s,r){const t=te({props:s,name:"MuiTimePicker"}),{desktopModeMediaQuery:a=xs}=t,i=ue(t,en);return Xt(a,{defaultMatches:!0})?l.jsx(Wt,v({ref:r},i)):l.jsx(zt,v({ref:r},i))}),sn=({settingName:e,value:s,defaultValue:r,handleChange:t})=>{const{t:a}=Ke(),[i,n]=x.useState(!1),[c,m]=x.useState(s);x.useEffect(()=>{s&&m(s)},[s]);const u=x.useCallback(g=>{n(!1),g&&m(s)},[s]),h=x.useCallback(()=>u(!0),[u]),d=x.useCallback((g,b=!0)=>{b&&u(!1),s!==g&&t(g)},[s,t,u]);return l.jsxs(l.Fragment,{children:[l.jsx(Ze,{onClick:()=>n(!0),children:l.jsx(Je,{primary:e,secondary:Ee(s,"HH:mm").format("LT"),secondaryTypographyProps:{style:{display:"flex",flexDirection:"column"}}})}),l.jsxs(ot,{open:i,onClose:u,children:[l.jsx(nt,{children:e}),l.jsx(rt,{children:l.jsx(ws,{dateAdapter:ys,adapterLocale:Ee.locale(),children:l.jsx(tn,{autoFocus:!0,value:Ee(c,"HH:mm"),defaultValue:Ee(r,"HH:mm"),format:"LT",onChange:g=>{var b;return m((b=g==null?void 0:g.format("HH:mm"))!=null?b:"00:00")}})})}),l.jsxs(at,{children:[r!==void 0?l.jsx(pe,{onClick:()=>{m(r),d(r,!1)},color:"primary",children:a("global.button.reset_to_default")}):null,l.jsx(pe,{onClick:h,color:"primary",children:a("global.button.cancel")}),l.jsx(pe,{onClick:()=>{d(c)},color:"primary",children:a("global.button.ok")})]})]})]})};var _e=(e=>(e.LIBRARY="library",e.SETTINGS="settings",e))(_e||{});const Gt={includeManga:"settings.backup.flag.manga",includeCategories:"settings.backup.flag.categories",includeChapters:"settings.backup.flag.chapters",includeClientData:"settings.backup.flag.client_data",includeHistory:"settings.backup.flag.history",includeServerSettings:"settings.backup.flag.server_settings",includeTracking:"settings.backup.flag.tracking"},on={[_e.LIBRARY]:"settings.backup.flag.group.library",[_e.SETTINGS]:"settings.backup.flag.group.settings"},nn=Object.keys(Gt),rn={[_e.LIBRARY]:["includeManga","includeChapters","includeTracking","includeHistory","includeCategories"],[_e.SETTINGS]:["includeClientData","includeServerSettings"]},Mt=({onDismiss:e,onSubmit:s,isVisible:r,onExitComplete:t,title:a})=>{const{t:i}=Ke(),[n,c]=x.useState(Object.fromEntries(nn.map(m=>[m,!0])));return l.jsxs(ot,{open:r,onTransitionExited:t,maxWidth:"xs",fullWidth:!0,onClose:e,children:[l.jsx(nt,{children:a}),l.jsx(rt,{children:l.jsx(Ps,{sx:{gap:2},children:Object.entries(rn).map(([m,u])=>l.jsxs(et,{children:[l.jsx(tt,{children:i(on[m])}),u.map(h=>l.jsx(vs,{label:i(Gt[h]),checked:n[h],onChange:(d,g)=>{c({...n,[h]:g})}},h))]},m))})}),l.jsxs(at,{children:[l.jsx(pe,{autoFocus:!0,onClick:e,color:"primary",children:i("global.button.cancel")}),l.jsx(pe,{onClick:()=>s(n),color:"primary",children:i("global.button.ok")})]})]})},an=({validationResult:e,onDismiss:s,onSubmit:r,isVisible:t,onExitComplete:a})=>{const{t:i}=Ke();return l.jsxs(ot,{open:t,onTransitionExited:a,onClose:s,children:[l.jsx(nt,{children:i("settings.backup.action.validate.dialog.title")}),l.jsxs(rt,{dividers:!0,children:[!!(e!=null&&e.missingSources.length)&&l.jsx(We,{sx:{listStyleType:"initial",listStylePosition:"inside"},subheader:i("settings.backup.action.validate.dialog.content.label.missing_sources"),children:e==null?void 0:e.missingSources.map(({id:n,name:c})=>l.jsx(pt,{sx:{display:"list-item"},children:"".concat(c," (").concat(n,")")},n))}),!!(e!=null&&e.missingTrackers.length)&&l.jsx(We,{sx:{listStyleType:"initial",listStylePosition:"inside"},subheader:i("settings.backup.action.validate.dialog.content.label.missing_trackers"),children:e==null?void 0:e.missingTrackers.map(({name:n})=>l.jsx(pt,{sx:{display:"list-item"},children:"".concat(n)},n))})]}),l.jsx(at,{children:l.jsxs(et,{direction:"row",sx:{justifyContent:"space-between",width:"100%"},children:[!!(e!=null&&e.missingSources.length)&&l.jsx(pe,{onClick:s,component:bt,to:ft.browse.path(Zt.EXTENSIONS),autoFocus:!!(e!=null&&e.missingSources.length),variant:e!=null&&e.missingSources.length?"contained":"text",children:i("extension.action.label.install")}),!!(e!=null&&e.missingTrackers.length)&&l.jsx(pe,{onClick:s,component:bt,to:ft.settings.childRoutes.tracking.path,autoFocus:!!(e!=null&&e.missingTrackers.length),variant:e!=null&&e.missingTrackers.length?"contained":"text",children:i("global.button.log_in")}),l.jsxs(et,{direction:"row",children:[l.jsx(pe,{onClick:s,children:i("global.button.cancel")}),l.jsx(pe,{onClick:r,autoFocus:!(e!=null&&e.missingSources.length)&&!(e!=null&&e.missingTrackers.length),variant:!(e!=null&&e.missingSources.length)&&!(e!=null&&e.missingTrackers.length)?"contained":"text",children:i("global.button.restore")})]})]})})]})},ln=e=>e===0?ht("global.label.never"):ht("settings.backup.automated.cleanup.label.value",{days:e,count:e});let Se;function Mn(){var N;const{t:e}=Ke();Ms(e("settings.backup.title"));const{data:s,loading:r,error:t,refetch:a}=ye.useGetServerSettings({notifyOnNetworkStatusChange:!0}),[i]=ye.useUpdateServerSettings(),{data:n}=ye.useGetBackupRestoreStatus(Se!=null?Se:"",{skip:!Se,pollInterval:1e3}),[,c]=x.useState(0),m=x.useRef(null),u=(()=>{if(!(n!=null&&n.restoreStatus))return 0;const p=100*(n.restoreStatus.mangaProgress/n.restoreStatus.totalManga);return Number.isNaN(p)?0:p})(),h=(p,S)=>{i({variables:{input:{settings:{[p]:S}}}}).catch(j=>ce(e("global.error.label.failed_to_save_changes"),"error",Ve(j)))};x.useEffect(()=>{if(!(n!=null&&n.restoreStatus))return;const p=n.restoreStatus.state===gt.Success,S=n.restoreStatus.state===gt.Failure;(p||S)&&(p&&ce(e("settings.backup.action.restore.label.success"),"success"),S&&ce(e("settings.backup.action.restore.error.label.failure"),"error"),ye.reset(),Se=void 0,c(Date.now()))},[(N=n==null?void 0:n.restoreStatus)==null?void 0:N.state]);const d=()=>{const p=document.getElementById("backup-file");p&&(p.value="")},g=async()=>{var S;const p=await Qe.show(Mt,{title:e("settings.backup.action.create.label.title")});ce(e("settings.backup.action.create.label.in_progress"),"info");try{const j=await ye.createBackupFile({flags:p}).response,V=(S=j.data)==null?void 0:S.createBackup.url;if(!V){ce(e("settings.backup.action.create.error.failure"),"error",Ve(j.errors));return}const A=document.createElement("a");A.href=ye.getValidUrlFor(V,""),A.download="",document.body.appendChild(A),A.click(),document.body.removeChild(A)}catch(j){ce(e("settings.backup.action.create.error.failure"),"error",Ve(j))}},b=async p=>{try{const{data:{validateBackup:S}}=await ye.validateBackupFile(p,{fetchPolicy:"network-only"}).response;if(S.missingSources.length||S.missingTrackers.length)try{await Qe.show(an,{validationResult:S},{id:"backup-validate-".concat(p.name)})}catch(j){return!1}return!0}catch(S){ce(e("settings.backup.action.validate.error.label.failure"),"error",Ve(S))}finally{d()}return!1},C=async p=>{var j;const S=await Qe.show(Mt,{title:e("settings.backup.action.restore.label.title")});try{ce(e("settings.backup.action.restore.label.in_progress"),"info"),Se=(j=(await ye.restoreBackupFile({backup:p,flags:S}).response).data)==null?void 0:j.restoreBackup.id,c(Date.now())}catch(V){ce(e("settings.backup.action.restore.error.label.failure"),"error",Ve(V))}finally{d()}},y=async p=>{if(p.name.toLowerCase().endsWith("json")){ce(e("settings.backup.action.restore.error.label.legacy_backup_unsupported"),"error");return}if(!p.name.toLowerCase().match(/proto\.gz$|tachibk$/g)){ce(e("global.error.label.invalid_file_type"),"error");return}await b(p)&&await C(p)};Tt("drop",async p=>{p.preventDefault();const S=await kt(p);y(S[0])}),Tt("dragover",p=>{p.preventDefault()});const D=Vs("change",async p=>{const S=await kt(p);y(S[0])}),I=Ds(m,D);if(r)return l.jsx(Jt,{});if(t)return l.jsx(Ss,{message:e("global.error.label.failed_to_load_data"),messageExtra:Ve(t),retry:()=>a().catch(es())});const P=s.settings;return l.jsxs(l.Fragment,{children:[l.jsxs(We,{sx:{padding:0},children:[l.jsx(Ze,{onClick:g,children:l.jsx(Je,{primary:e("settings.backup.action.create.label.title"),secondary:e("settings.backup.action.create.label.description")})}),l.jsxs(Ze,{onClick:()=>{var p;return(p=m.current)==null?void 0:p.click()},disabled:!!Se,children:[l.jsx(Je,{primary:e("settings.backup.action.restore.label.title"),secondary:e("settings.backup.action.restore.label.description")}),Se?l.jsx(ts,{children:l.jsx(os,{progress:u})}):null]}),l.jsxs(We,{subheader:l.jsx(Is,{component:"div",id:"backup-settings",children:"Automated backup"}),children:[l.jsx(ss,{settingName:e("settings.backup.automated.location.label.title"),dialogDescription:e("settings.backup.automated.location.label.description"),value:P.backupPath,settingDescription:P.backupPath.length?P.backupPath:e("global.label.default"),handleChange:p=>h("backupPath",p)}),l.jsx(sn,{settingName:e("settings.backup.automated.label.time"),value:P.backupTime,defaultValue:"00:00",handleChange:p=>h("backupTime",p)}),l.jsx(Ct,{settingTitle:e("settings.backup.automated.label.interval"),settingValue:e("global.date.value.label.day",{days:P.backupInterval,count:P.backupInterval}),value:P.backupInterval,defaultValue:1,minValue:1,maxValue:31,stepSize:1,valueUnit:e("global.date.label.day_one"),showSlider:!0,handleUpdate:p=>h("backupInterval",p)}),l.jsx(Ct,{settingTitle:e("settings.backup.automated.cleanup.label.title"),settingValue:ln(P.backupTTL),value:P.backupTTL,defaultValue:14,minValue:0,maxValue:1e3,stepSize:1,valueUnit:e("global.date.label.day_one"),showSlider:!0,handleUpdate:p=>h("backupTTL",p)})]})]}),l.jsx("input",{ref:I,type:"file",style:{display:"none"}})]})}export{Mn as Backup};
