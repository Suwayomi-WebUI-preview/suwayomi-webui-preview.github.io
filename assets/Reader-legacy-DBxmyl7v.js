!function(){function e(n){return e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e(n)}var n=["addEndListener","appear","children","easing","in","onEnter","onEntered","onEntering","onExit","onExited","onExiting","style","timeout","TransitionComponent"];function t(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function r(e){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{};n%2?t(Object(r),!0).forEach((function(n){i(e,n,r[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):t(Object(r)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))}))}return e}function i(n,t,r){return(t=function(n){var t=function(n,t){if("object"!=e(n)||!n)return n;var r=n[Symbol.toPrimitive];if(void 0!==r){var i=r.call(n,t||"default");if("object"!=e(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(n)}(n,"string");return"symbol"==e(t)?t:t+""}(t))in n?Object.defineProperty(n,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):n[t]=r,n}function a(e){return function(e){if(Array.isArray(e))return l(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||u(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){var t=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var r,i,a,o,u=[],l=!0,c=!1;try{if(a=(t=t.call(e)).next,0===n){if(Object(t)!==t)return;l=!1}else for(;!(l=(r=a.call(t)).done)&&(u.push(r.value),u.length!==n);l=!0);}catch(e){c=!0,i=e}finally{try{if(!l&&null!=t.return&&(o=t.return(),Object(o)!==o))return}finally{if(c)throw i}}return u}}(e,n)||u(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function u(e,n){if(e){if("string"==typeof e)return l(e,n);var t={}.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?l(e,n):void 0}}function l(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=Array(n);t<n;t++)r[t]=e[t];return r}System.register(["./index-legacy-b6OLlxQ4.js","./ReaderSettingsOptions-legacy-B4iE11gT.js","./Select-legacy-CCfhP8k8.js","./CustomIconButton-legacy-BbVC-kfg.js","./Chapters-legacy-C47qrSY8.js","./Collapse-legacy-XwqNMYou.js","./TextField-legacy-CHae1TTn.js","./useDebounce-legacy--EOWaTE8.js","./EmptyViewAbsoluteCentered-legacy-CnfarM5E.js","./NumberSetting-legacy-dokrhQ48.js","./Info-legacy-C9fBSVoD.js","./InputAdornment-legacy-Dhb7k_MN.js","./SpinnerImage-legacy-D5Y8G5QF.js","./Refresh-legacy-aGl7zSIy.js","./Switch-legacy-1296oUtl.js","./SwitchBase-legacy-CCCO31cU.js"],(function(e,t){"use strict";var u,l,c,s,d,f,p,g,v,h,m,x,y,w,b,C,j,E,R,k,P,S,L,O,T,D,I,N,_,A,W,M,z,H,V,X,B,G,F,Y,U,K,q,J,Z,$,Q,ee,ne,te,re,ie,ae;return{setters:[function(e){u=e.c,l=e.v,c=e.j,s=e.B,d=e.aq,f=e.r,p=e.i,g=e.J,v=e.ar,h=e.as,m=e.at,x=e.au,y=e.av,w=e.C,b=e.u,C=e.k,j=e.aw,E=e.e,R=e.ax,k=e.ay,P=e.az,S=e.f,L=e.I,O=e.T,T=e.aA,D=e.a5,I=e.aB,N=e.a3,_=e.aC,A=e.a6,W=e.a,M=e.aD,z=e.aE,H=e.l,V=e.N,X=e.m,B=e.M,G=e.a8,F=e.h,Y=e.aF,U=e.aG},function(e){K=e.P,q=e.R,J=e.u,Z=e.g},function(e){$=e.S},function(e){Q=e.C},function(e){ee=e.D,ne=e.C},function(e){te=e.C},function(e){re=e.a},function(e){ie=e.u},function(e){ae=e.E},null,null,null,null,null,null,null],execute:function(){e("Reader",(function(){var e,n,t,l,d,f,p,g,v=b().t,h=E(),m=R(),x=A(),y=x.chapterIndex,w=x.mangaId,C=u.useMemo((function(){return{id:+w,title:"",thumbnailUrl:"",genre:[],inLibraryAt:0,lastReadAt:0,chapters:{totalCount:0},trackRecords:{totalCount:0}}}),[w]),j=W.useGetManga(M,w),k=j.data,P=j.loading,S=j.error,L=j.refetch,O=u.useRef(null),T=Number(w)===(null===(e=O.current)||void 0===e?void 0:e.mangaId)&&Number(y)===(null===(n=O.current)||void 0===n?void 0:n.sourceOrder)&&-1!==(null===(t=O.current)||void 0===t?void 0:t.pageCount),D=null!==(l=null==k?void 0:k.manga)&&void 0!==l?l:C,I=W.useGetChapters(z,{condition:{mangaId:Number(w),sourceOrder:Number(y)}},{notifyOnNetworkStatusChange:!0}),N=I.data,_=I.loading,Y=I.error,K=I.refetch,q=null==N?void 0:N.chapters.nodes[0],$=u.useRef(!1),Q=H().settings.downloadAheadLimit,te=!!Q;O.current=O.current&&T?q&&(null===(re=O.current)||void 0===re?void 0:re.pageCount)!==q.pageCount?q:O.current:($.current=!1,q||null);var re;var ue=null!==(d=O.current)&&void 0!==d?d:Ue,le=u.useRef(Ue);le.current===Ue&&(le.current=ue);ue.mangaId!==(null===(f=le.current)||void 0===f?void 0:f.mangaId)&&(le.current=Ue);var ce=o(W.useGetChapterPagesFetch(ue.id),2),se=ce[0],de=ce[1],fe=de.loading,pe=de.error,ge=function(){_||se().then((function(){$.current=!0})).catch(F())};u.useEffect((function(){ge()}),[ue.id]);var ve=o(u.useState(!1),2),he=ve[0],me=ve[1],xe=o(u.useState(0),2),ye=xe[0],we=xe[1],be=ye===ue.pageCount-1,Ce=ie(ye,be?0:1e3),je=o(u.useState(void 0),2),Ee=je[0],Re=je[1],ke=u.useContext(V),Pe=ke.setOverride,Se=ke.setTitle,Le=ke.readerNavBarWidth,Oe=o(u.useState(!1),2),Te=Oe[0],De=Oe[1],Ie=W.useGetMangaChapters(z,w,{nextFetchPolicy:"standby"}),Ne=Ie.data,_e=Ie.loading,Ae=Ie.error,We=Ie.refetch,Me=null==Ne?void 0:Ne.chapters.nodes,ze=P||_||_e||fe||!$.current&&!Y&&!pe,He=null!==(p=null!==(g=null!=S?S:Y)&&void 0!==g?g:Ae)&&void 0!==p?p:pe,Ve=J(),Xe=Ve.settings,Ke=Ve.loading,qe=o(u.useState(Xe),2),Je=qe[0],Ze=qe[1],$e=H().settings,Qe=u.useMemo((function(){return Je.skipDupChapters?ne.removeDuplicates(le.current,null!=Me?Me:[]):null!=Me?Me:[]}),[le.current,Me,Je.skipDupChapters]),en=u.useMemo((function(){return ne.getNextChapters(ue,null!=Me?Me:[],{offset:ee.PREVIOUS,skipDupe:Je.skipDupChapters,skipDupeChapter:le.current})}),[ue,le.current,Me,Je.skipDupChapters]),nn=u.useMemo((function(){return ne.getNextChapters(ue,null!=Me?Me:[],{skipDupe:Je.skipDupChapters,skipDupeChapter:le.current})}),[ue,le.current,Me,Je.skipDupChapters]),tn=u.useMemo((function(){return ne.getNextChapter(ue,null!=Me?Me:[],{offset:ee.PREVIOUS,skipDupe:Je.skipDupChapters,skipDupeChapter:le.current})}),[ue,le.current,Me,Je.skipDupChapters]),rn=u.useMemo((function(){return ne.getNextChapter(ue,null!=Me?Me:[],{skipDupe:Je.skipDupChapters,skipDupeChapter:le.current})}),[ue,le.current,Me,Je.skipDupChapters]),an=function(e){if(ue!==Ue){!function(){var n,t=Ge(ue.id),r=(null!==(n=e.lastPageRead)&&void 0!==n?n:0)/ue.pageCount>.25;if(te&&D.inLibrary&&!(null==t||!t.isDownloaded)&&r){var i=rn?Ge(rn.id):null;if(null==i||!i.isDownloaded)return;var a=ne.getNonRead(nn).map((function(e){return Ge(e.id)})).slice(-Q).filter((function(e){return!e.isDownloaded})).map((function(e){return e.id})).filter((function(e){return!ne.isDownloading(e)}));if(!a.length)return;ne.download(a).catch(F())}}();var n=Je.skipDupChapters?ne.getIds(ne.addDuplicates([ue],null!=Me?Me:[ue])):[ue.id];W.updateChapters(n,r(r({},e),{},{chapterIdsToDelete:function(){if(!(!!e.isRead&&!!$e.deleteChaptersWhileReading)||!Me)return[];var n=[ue].concat(a(en))[$e.deleteChaptersWhileReading-1];if(!n)return[];var t=Ge(n.id);return t.isRead&&ne.isDeletable(t,$e.deleteChaptersWithBookmark)?Je.skipDupChapters?ne.getIds(ne.addDuplicates([n],Me)):ne.getIds([n]):[]}(),trackProgressMangaId:$e.updateProgressAfterReading&&e.isRead&&D.trackRecords.totalCount?D.id:void 0}),{errorPolicy:"all"}).response.catch(F())}},on=function(e,n){var t=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];Ze(r(r({},Je),{},i({},e,n))),t&&U(D,[[e,n]]).catch((function(){return X(v("reader.settings.error.label.failed_to_save_settings"),"warning")}))},un=u.useCallback((function(e){var n=e===ee.NEXT,t=n?rn:tn;t?(De(!0),we(0),h("/manga/".concat(D.id,"/chapter/").concat(t.sourceOrder),{replace:!0,state:m.state}),De(!1)):X(v(n?"reader.error.label.next_chapter_does_not_exist":"reader.error.label.prev_chapter_does_not_exist"),"error")}),[D.id,null==tn?void 0:tn.id,null==rn?void 0:rn.id]);u.useEffect((function(){!ze&&ue?(me(!0),ue.lastPageRead===ue.pageCount-1?we(0):we(ue.lastPageRead)):we(0)}),[ue,ze]),u.useLayoutEffect((function(){null!=D&&D.title&&ue.name!==v("global.label.loading")?Se("".concat(D.title,": ").concat(ue.name)):Se(v("reader.title"))}),[v,D,ue]),u.useEffect((function(){Ke||P||Ze(Z(D,Xe))}),[Ke,P]),u.useLayoutEffect((function(){return Pe({status:!0,value:c.jsx(Be,{settings:Je,setSettingValue:on,manga:D,chapter:ue,chapters:Qe,curPage:ye,scrollToPage:Re,openNextChapter:un,retrievingNextChapter:Te})}),function(){return Pe({status:!1,value:c.jsx("div",{})})}}),[D,ue,Je,ye,y,Te,un,Qe]),u.useEffect((function(){if(he&&ue!==Ue){var e=Ge(ue.id);if(Ce!==(null==e?void 0:e.lastPageRead)){var n=-1!==Ce,t=Ce===ue.pageCount-1;(n||t)&&an({lastPageRead:n?Ce:void 0,isRead:!!t||void 0})}}}),[Ce,te]);var ln=u.useCallback((function(){an({lastPageRead:ue.pageCount-1,isRead:!0}),un(ee.NEXT)}),[ue.pageCount,un,ue,D]),cn=u.useCallback((function(){un(ee.PREVIOUS)}),[un]),sn=B.useGetScrollbarSize("height");if(ze)return c.jsx(s,{sx:{height:"100vh",width:"100vw",display:"grid",placeItems:"center"},children:c.jsx(G,{thickness:5})});if(He)return c.jsx(ae,{message:v("global.error.label.failed_to_load_data"),messageExtra:He.message,retry:function(){S&&L().catch(F()),Y&&K().catch(F()),Ae&&We().catch(F()),pe&&ge()}});if(!ue.pageCount)return c.jsx(ae,{message:v("reader.error.label.no_pages_found"),retry:ge});var dn=Ye(ue.pageCount).map((function(e){return{index:e,src:W.getChapterPageUrl(w,y,e)}})),fn=Fe(Je.readerType),pn=null!=Ee?Ee:ue.lastPageRead===ue.pageCount-1?0:ue.lastPageRead,gn=Je.staticNav?Le:0;return c.jsxs(s,{sx:{display:"flex",flexDirection:"column",alignContent:"center",alignItems:"center",justifyContent:"center",minWidth:"calc((100vw - (100vw - 100%)) - ".concat(gn,"px)"),minHeight:"calc(100vh - ".concat(sn,"px)"),marginLeft:"".concat(gn,"px")},children:[c.jsx(oe,{settings:Je,curPage:ye,pageCount:ue.pageCount}),c.jsx(s,{sx:{alignSelf:"stretch"},children:c.jsx(fn,{pages:dn,pageCount:ue.pageCount,setCurPage:we,initialPage:pn,curPage:ye,settings:Je,manga:D,chapter:ue,nextChapter:ln,prevChapter:cn},ue.id)})]})}));function t(e){var n=e.pages,t=e.curPage,r=e.initialPage,i=e.settings,a=e.setCurPage,o=e.prevChapter,f=e.nextChapter,p=u.useRef(r),g=u.useRef(null),v=u.useRef([]);function h(){var e;t<n.length-1?(null===(e=v.current[t+1])||void 0===e||e.scrollIntoView({inline:"center"}),a((function(e){return e+1}))):i.loadNextOnEnding&&f()}function m(){var e;t>0?(null===(e=v.current[t-1])||void 0===e||e.scrollIntoView({inline:"center"}),a(t-1)):0===t&&o()}var x=u.useRef(0);function y(e){window.scrollBy(x.current-e.pageX,0)}function w(e){var n;x.current=e.pageX,null===(n=g.current)||void 0===n||n.addEventListener("mousemove",y)}function b(){var e;null===(e=g.current)||void 0===e||e.removeEventListener("mousemove",y)}var C=function(){"ContinuesHorizontalLTR"===i.readerType?window.scrollX+window.innerWidth>=document.body.scrollWidth&&f():"ContinuesHorizontalRTL"===i.readerType&&window.scrollX<=window.innerWidth&&f()};return l(v.current[r],u.useCallback((function(e,n){var t=v.current[r];null!=t&&t.offsetHeight&&(t.scrollIntoView({inline:"center"}),n.disconnect())}),[v.current[r],r])),u.useEffect((function(){var e,n;return null===(e=g.current)||void 0===e||e.addEventListener("mousedown",w),null===(n=g.current)||void 0===n||n.addEventListener("mouseup",b),function(){var e,n;null===(e=g.current)||void 0===e||e.removeEventListener("mousedown",w),null===(n=g.current)||void 0===n||n.removeEventListener("mouseup",b)}}),[g]),u.useEffect((function(){return i.loadNextOnEnding&&document.addEventListener("scroll",C),function(){document.removeEventListener("scroll",C)}}),[g,t,o,f]),u.useEffect((function(){var e=function(){if(g.current){var e=function(e){for(var n=0;n<e.children.length;n++){var t=e.children.item(n);if(t){var r=t.getBoundingClientRect(),i=r.left,a=r.right;if(i<=window.innerWidth/2&&a>window.innerWidth/2)return n}}return-1}(g.current);e!==p.current&&(p.current=e,a(e)),("ContinuesHorizontalLTR"===i.readerType?window.innerWidth+window.scrollX>=document.body.scrollWidth-5:window.scrollX<=0)&&(p.current=n.length-1,a(p.current))}};return window.addEventListener("scroll",e),function(){return window.removeEventListener("scroll",e)}}),[i.readerType]),c.jsx(s,{ref:g,sx:{display:"flex",flexDirection:"ContinuesHorizontalLTR"===i.readerType?"row":"row-reverse",justifyContent:"ContinuesHorizontalLTR"===i.readerType?"flex-start":"flex-end",width:"auto",height:"auto",overflowX:"visible",userSelect:"none"},onClick:function(e){e.clientX>=.85*window.innerWidth?"ContinuesHorizontalLTR"===i.readerType?h():m():e.clientX<=.15*window.innerWidth&&("ContinuesHorizontalLTR"===i.readerType?m():h())},onWheel:function(e){window.scrollBy({left:"ContinuesHorizontalLTR"===i.readerType?e.deltaY:-1*e.deltaY})},children:n.map((function(e){return c.jsx(K,{index:e.index,src:e.src,onImageLoad:function(){},settings:i,ref:function(n){v.current[e.index]=n},priority:e.index===t?d.HIGH:void 0},e.index)}))})}function oe(e){var n=e.settings,t=e.curPage,r=e.pageCount;return c.jsx(s,{sx:{display:n.showPageNumber?"block":"none",position:"fixed",bottom:"50px",padding:"2px",paddingLeft:"4px",paddingRight:"4px",textAlign:"center",backgroundColor:"rgba(0, 0, 0, 0.3)",borderRadius:"10px"},children:"".concat(t+1," / ").concat(r)})}function ue(e){var n=e.pages,t=e.settings,r=e.setCurPage,i=e.initialPage,a=e.curPage,o=e.nextChapter,l=e.prevChapter,f=u.useRef(null),p=function(e){r(e),window.scroll({top:0})};function g(){a<n.length-1?p(a+1):t.loadNextOnEnding&&o()}function v(){a>0?p(a-1):l()}function h(){"SingleLTR"===t.readerType?v():"SingleRTL"===t.readerType&&g()}function m(){"SingleLTR"===t.readerType?g():"SingleRTL"===t.readerType&&v()}function x(e){switch(e.key){case"Space":e.preventDefault(),g();break;case"ArrowRight":m();break;case"ArrowLeft":h()}}return u.useEffect((function(){return document.addEventListener("keydown",x),function(){document.removeEventListener("keydown",x)}}),[f,a,t.readerType,l,o]),u.useEffect((function(){setTimeout((function(){p(i)}),0)}),[i]),c.jsx(s,{ref:f,sx:{display:"flex",flexDirection:"column",justifyContent:"center",width:"auto",height:"auto"},onClick:function(e){e.clientX>window.innerWidth/2?m():h()},children:n.map((function(e){var n=e.index,r=e.src;return c.jsx(K,{index:n,onImageLoad:function(){},src:r,settings:t,display:n===a,priority:n===a?d.HIGH:void 0},r)}))})}function le(e){var n=e.pages,t=e.settings,r=e.setCurPage,i=e.initialPage,l=e.curPage,f=e.nextChapter,p=e.prevChapter,g=u.useRef(null),v=u.useRef([]),h=o(u.useState(Array(n.length).fill(!1)),2),m=h[0],x=h[1],y=o(u.useState(Array(n.length).fill(!1)),2),w=y[0],b=y[1],C=u.useMemo((function(){return m.map((function(e,n){return n+m.slice(0,n).filter(Boolean).length}))}),[m]);function j(){var e=function(e){return r(-1===e?n.length-1:e)};if(v.current[n.length-1]&&t.loadNextOnEnding)return l===n.length-1||e(n.length-1),void f();e(v.current.findIndex((function(e,n){return!e&&n>l})))}function E(){var e=function(e){return r(Math.max(e,0))};if(v.current[0])return!l||e(0),void p();e(a(v.current).slice(0,l).findLastIndex((function(e){return!e})))}function R(){"DoubleLTR"===t.readerType?E():j()}function k(){"DoubleLTR"===t.readerType?j():E()}function P(e){switch(e.key){case"Space":e.preventDefault(),j();break;case"ArrowRight":k();break;case"ArrowLeft":R()}}return u.useEffect((function(){return document.addEventListener("keydown",P),function(){document.removeEventListener("keydown",P)}}),[g,l,t.readerType,p,f,w,m]),u.useEffect((function(){r(i)}),[i]),c.jsx(s,{ref:g,onClick:function(e){e.clientX>window.innerWidth/2?k():R()},children:c.jsx(s,{id:"display",sx:{display:"flex",flexDirection:"DoubleLTR"===t.readerType?"row":"row-reverse",justifyContent:"center",width:"auto",height:"auto"},children:n.map((function(e){var n,r=e.index,i=e.src,a=!(C[l]%2),o=(n=t.offsetFirstPage?-1:1,(a?1:-1)*n),u=l+o,s=0===l,f=r===l,p=r===u,g=m[l],h=m[u],y=g||h,w=s&&t.offsetFirstPage,j=f||p&&!y&&!w;return v.current[r]=j,c.jsx(K,{index:r,src:i,onImageLoad:function(){var e=new Image;e.onload=function(){b((function(e){return e.toSpliced(r,1,!0)})),x((function(n){return n.toSpliced(r,1,(t=e).height/t.width<1);var t}))},e.src=i},settings:t,display:j,priority:j?d.HIGH:void 0},i)}))})})}var ce=function(){return window.innerHeight+window.scrollY>=document.body.offsetHeight-5};function se(e){var n=e.curPage,t=e.pages,r=e.settings,i=e.setCurPage,a=e.initialPage,o=e.nextChapter,f=e.prevChapter,p=u.useRef(a),g=u.useRef(null),v=u.useRef([]);u.useEffect((function(){var e=!1,n=function(){if(g.current)if(ce()){if(e)return;e=!0,p.current=t.length-1,i(p.current),r.loadNextOnEnding&&o()}else{e=!1;var n=function(e){for(var n=0;n<e.children.length;n++){var t=e.children.item(n);if(t){var r=t.getBoundingClientRect(),i=r.top,a=r.bottom;if(i<=window.innerHeight&&a>1)return n}}return-1}(g.current);n!==p.current&&(p.current=n,i(n))}};return window.addEventListener("scroll",n),function(){window.removeEventListener("scroll",n)}}),[r.loadNextOnEnding,o]);var h=u.useRef(0),m=u.useRef(!1);function x(e){m.current=!0,window.scrollBy(0,h.current-e.pageY)}function y(e){var n;h.current=e.pageY,null===(n=g.current)||void 0===n||n.addEventListener("mousemove",x)}function w(){var e;null===(e=g.current)||void 0===e||e.removeEventListener("mousemove",x)}u.useEffect((function(){var e,n;return null===(e=g.current)||void 0===e||e.addEventListener("mousedown",y),null===(n=g.current)||void 0===n||n.addEventListener("mouseup",w),function(){var e,n;null===(e=g.current)||void 0===e||e.removeEventListener("mousedown",y),null===(n=g.current)||void 0===n||n.removeEventListener("mouseup",w)}}),[g]);var b=u.useCallback((function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.95;"down"===e&&ce()?o():"up"===e&&window.scrollY<=0?f():window.scroll({top:window.scrollY+window.innerHeight*n*("up"===e?-1:1),behavior:"smooth"})}),[o,f]);return u.useEffect((function(){var e=function(e){switch(e.key){case"Space":case"ArrowRight":e.preventDefault(),b(e.shiftKey?"up":"down");break;case"ArrowDown":e.preventDefault(),b(e.shiftKey?"up":"down",.25);break;case"ArrowUp":e.preventDefault(),b(e.shiftKey?"down":"up",.25);break;case"ArrowLeft":e.preventDefault(),b(e.shiftKey?"down":"up")}};return document.addEventListener("keydown",e,!1),function(){document.removeEventListener("keydown",e)}}),[b]),l(v.current[a],u.useCallback((function(e,n){var t=v.current[a];null!=t&&t.offsetHeight&&(t.scrollIntoView(),n.disconnect())}),[v.current[a],a])),c.jsx(s,{ref:g,sx:{display:"flex",flexDirection:"column",justifyContent:"center",width:"auto",height:"auto",userSelect:"none"},onClick:function(e){m.current?m.current=!1:b(e.clientX>window.innerWidth/2?"down":"up")},children:t.map((function(e){return c.jsx(K,{index:e.index,src:e.src,onImageLoad:function(){},settings:r,ref:function(n){v.current[e.index]=n},priority:e.index===n?d.HIGH:void 0},e.index)}))})}var de={},fe=p;Object.defineProperty(de,"__esModule",{value:!0});var pe=de.default=void 0,ge=fe(f()),ve=c;pe=de.default=(0,ge.default)((0,ve.jsx)("path",{d:"M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"}),"Close");var he={},me=p;Object.defineProperty(he,"__esModule",{value:!0});var xe=he.default=void 0,ye=me(f()),we=c;xe=he.default=(0,ye.default)((0,we.jsx)("path",{d:"M15.41 16.59 10.83 12l4.58-4.59L14 6l-6 6 6 6z"}),"KeyboardArrowLeft");var be={},Ce=p;Object.defineProperty(be,"__esModule",{value:!0});var je=be.default=void 0,Ee=Ce(f()),Re=c;je=be.default=(0,Ee.default)((0,Re.jsx)("path",{d:"M8.59 16.59 13.17 12 8.59 7.41 10 6l6 6-6 6z"}),"KeyboardArrowRight");var ke={},Pe=p;Object.defineProperty(ke,"__esModule",{value:!0});var Se=ke.default=void 0,Le=Pe(f()),Oe=c;Se=ke.default=(0,Le.default)((0,Oe.jsx)("path",{d:"M7.41 8.59 12 13.17l4.59-4.58L18 10l-6 6-6-6z"}),"KeyboardArrowDown");var Te={},De=p;Object.defineProperty(Te,"__esModule",{value:!0});var Ie=Te.default=void 0,Ne=De(f()),_e=c;Ie=Te.default=(0,Ne.default)((0,_e.jsx)("path",{d:"M7.41 15.41 12 10.83l4.59 4.58L18 14l-6-6-6 6z"}),"KeyboardArrowUp");var Ae={entering:{transform:"none"},entered:{transform:"none"}},We=u.forwardRef((function(e,t){var i=g(),a={enter:i.transitions.duration.enteringScreen,exit:i.transitions.duration.leavingScreen},o=e.addEndListener,l=e.appear,s=void 0===l||l,d=e.children,f=e.easing,p=e.in,w=e.onEnter,b=e.onEntered,C=e.onEntering,j=e.onExit,E=e.onExited,R=e.onExiting,k=e.style,P=e.timeout,S=void 0===P?a:P,L=e.TransitionComponent,O=void 0===L?m:L,T=function(e,n){if(null==e)return{};var t,r,i=function(e,n){if(null==e)return{};var t={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(n.includes(r))continue;t[r]=e[r]}return t}(e,n);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)t=a[r],n.includes(t)||{}.propertyIsEnumerable.call(e,t)&&(i[t]=e[t])}return i}(e,n),D=u.useRef(null),I=v(D,h(d),t),N=function(e){return function(n){if(e){var t=D.current;void 0===n?e(t):e(t,n)}}},_=N(C),A=N((function(e,n){x(e);var t=y({style:k,timeout:S,easing:f},{mode:"enter"});e.style.webkitTransition=i.transitions.create("transform",t),e.style.transition=i.transitions.create("transform",t),w&&w(e,n)})),W=N(b),M=N(R),z=N((function(e){var n=y({style:k,timeout:S,easing:f},{mode:"exit"});e.style.webkitTransition=i.transitions.create("transform",n),e.style.transition=i.transitions.create("transform",n),j&&j(e)})),H=N(E);return c.jsx(O,r(r({appear:s,in:p,nodeRef:D,onEnter:A,onEntered:W,onEntering:_,onExit:z,onExited:H,onExiting:M,addEndListener:function(e){o&&o(D.current,e)},timeout:S},T),{},{children:function(e,n){return u.cloneElement(d,r({style:r(r(r({transform:"scale(0)",visibility:"exited"!==e||p?void 0:"hidden"},Ae[e]),k),d.props.style),ref:I},n))}}))})),Me=w("div")({zIndex:10}),ze=w("div")((function(e){var n=e.theme;return{position:"fixed",top:0,left:0,minWidth:"240px",maxWidth:"400px",height:"100vh",overflowY:"auto",backgroundColor:n.palette.background.default,"& header":{backgroundColor:n.palette.action.hover,display:"flex",alignItems:"center",padding:"".concat(n.spacing(1)," ").concat(n.spacing(3)),transition:"left 2s ease"}}})),He=w("div")((function(e){var n=e.theme;return{margin:"0 ".concat(n.spacing(2))}})),Ve=w("div")({display:"flex",flexWrap:"wrap",alignContent:"center",alignItems:"center",justifyContent:"center"}),Xe=w("div")((function(e){var n=e.theme;return{display:"grid",gridTemplateRows:"auto auto auto",gridTemplateColumns:"0fr 1fr 0fr",gridTemplateAreas:'"pre current next"',gridColumnGap:n.spacing(.5),margin:"".concat(n.spacing(1)," 0"),"& a":{textDecoration:"none",color:"inherit",display:"flex",flexWrap:"wrap",alignContent:"center"}}}));function Be(e){var n,t=b().t,i=C().setReaderNavBarWidth,a=g(),s=j(),d=E(),f=null!==(n=R().state)&&void 0!==n?n:{},p=f.prevDrawerOpen,v=f.prevSettingsCollapseOpen,h=u.useRef(null);l(h,u.useCallback((function(){var e;void 0!==(null===(e=h.current)||void 0===e?void 0:e.offsetWidth)&&i(h.current.offsetWidth)}),[h.current])),u.useLayoutEffect((function(){return function(){return i(0)}}),[h]);var m=e.settings,x=e.setSettingValue,y=e.manga,w=e.chapter,A=e.chapters,W=e.curPage,M=e.scrollToPage,z=e.openNextChapter,H=e.retrievingNextChapter,V=k(),X=u.useMemo((function(){return new Set(A.map((function(e){return e.scanlator}))).size>1}),[A]),B=o(u.useState(m.staticNav||p),2),G=B[0],F=B[1],Y=o(u.useState(!0),2),U=Y[0],K=Y[1],J=o(u.useState(m.staticNav||p),2),Z=J[0],ne=J[1],ie=o(u.useState(0),2),ae=ie[0],oe=ie[1],ue=o(u.useState(null==v||v),2),le=ue[0],ce=ue[1],se=H,de=function(e){F(e),ne(e)},fe=function(){var e=window.pageYOffset;Math.abs(e-ae)>20&&(ne(e>ae),oe(e))};return u.useEffect((function(){U&&de(m.staticNav)}),[m.staticNav]),u.useEffect((function(){window.addEventListener("scroll",fe);var e=document.querySelector("#root"),n=document.querySelector("#appMainContainer");return e.style.display="flex",e.style.flexDirection="column",n.style.display="none",function(){e.style.display="block",n.style.display="block",window.removeEventListener("scroll",fe)}}),[fe]),c.jsxs(Me,{children:[c.jsx(P,{direction:s("right","left"),in:G,timeout:200,appear:!1,mountOnEnter:!0,unmountOnExit:!0,children:c.jsxs(ze,{ref:h,children:[c.jsxs("header",{children:[!m.staticNav&&c.jsx(S,{title:t("reader.button.close_menu"),children:c.jsx(L,{edge:"start",color:"inherit","aria-label":"menu",onClick:function(){return de(!1)},size:"large",children:s(c.jsx(xe,{}),c.jsx(je,{}))})}),c.jsx(O,{variant:"h6",component:"h1",sx:{textOverflow:"ellipsis",overflow:"hidden",py:1,flexGrow:1},children:w.name}),c.jsx(S,{title:t("reader.button.exit"),children:c.jsx(L,{edge:"start",color:"inherit","aria-label":"menu",onClick:V,size:"large",sx:{mr:-1},children:c.jsx(pe,{})})})]}),c.jsxs(T,{ContainerComponent:"div",sx:{"& span":{fontWeight:"bold"}},children:[c.jsx(D,{primary:t("reader.settings.title.reader_settings")}),c.jsxs(L,{edge:"start",color:"inherit","aria-label":"menu",disableRipple:!0,disableFocusRipple:!0,onClick:function(){return ce(!le)},size:"large",children:[le&&c.jsx(Ie,{}),!le&&c.jsx(Se,{})]})]}),c.jsx(te,{in:le,timeout:"auto",unmountOnExit:!0,children:c.jsx(q,{setSettingValue:function(e,n,t){K("staticNav"!==e),x(e,n,t)},staticNav:m.staticNav,showPageNumber:m.showPageNumber,loadNextOnEnding:m.loadNextOnEnding,skipDupChapters:m.skipDupChapters,fitPageToWindow:m.fitPageToWindow,scalePage:m.scalePage,readerType:m.readerType,offsetFirstPage:m.offsetFirstPage,readerWidth:m.readerWidth})}),c.jsx(I,{sx:{my:1,mx:2}}),c.jsxs(He,{children:[c.jsxs(Ve,{children:[c.jsx("span",{children:t("reader.page_info.label.currently_on_page")}),c.jsx(re,{size:"small",sx:{mx:.5},disabled:se||-1===w.pageCount,children:c.jsx($,{value:w.pageCount>-1?"".concat(W):"",displayEmpty:!0,onChange:function(e){var n=e.target.value;M(Number(n))},children:Array(Math.max(0,w.pageCount)).fill(1).map((function(e,n){return c.jsx(N,{value:n,children:n+1},"Page#".concat(n))}))})}),c.jsx("span",{children:t("reader.page_info.label.of_max_pages",{maxPages:w.pageCount})})]}),c.jsxs(Xe,{children:[c.jsx(S,{title:t("reader.button.previous_chapter"),children:c.jsx(L,{sx:{gridArea:"pre"},disabled:se||w.sourceOrder<=1,onClick:function(){return z(ee.PREVIOUS)},children:s(c.jsx(xe,{}),c.jsx(je,{}))})}),c.jsx(re,{sx:{gridArea:"current"},size:"small",disabled:se||w.sourceOrder<1,children:c.jsx($,{value:w.sourceOrder>=1?"".concat(w.sourceOrder):"",displayEmpty:!0,onChange:function(e){var n=e.target.value;d("/manga/".concat(y.id,"/chapter/").concat(n),{replace:!0,state:{prevDrawerOpen:G,prevSettingsCollapseOpen:le}})},children:A.map((function(e){var n=e.id,t=e.sourceOrder,r=e.name,i=e.chapterNumber,a=e.scanlator;return c.jsx(N,{value:t,children:"#".concat(i).concat(X&&null!=a?" (".concat(a,")"):""," | ").concat(r)},n)}))})}),c.jsx(S,{title:t("reader.button.next_chapter"),children:c.jsx(L,{sx:{gridArea:"next"},disabled:se||w.sourceOrder<1||w.sourceOrder>=y.chapters.totalCount,onClick:function(){return z(ee.NEXT)},children:s(c.jsx(je,{}),c.jsx(xe,{}))})})]})]})]})}),c.jsx(We,{in:!G,children:c.jsx(_,{in:!Z,children:c.jsx(S,{title:t("reader.button.open_menu"),children:c.jsx(Q,{sx:r({position:"fixed",top:20,left:20,backgroundColor:"rgba(255, 255, 255, 0.75);",color:"black"},a.applyStyles("dark",{backgroundColor:"rgba(0, 0, 0, 0.75);",color:"white"})),size:"large",variant:"contained",onClick:function(){return de(!0)},children:s(c.jsx(je,{}),c.jsx(xe,{}))})})})})]})}var Ge=function(e){return ne.getFromCache(e,Y,"CHAPTER_READER_FIELDS")},Fe=function(e){switch(e){case"ContinuesVertical":case"Webtoon":default:return se;case"SingleVertical":case"SingleRTL":case"SingleLTR":return ue;case"DoubleVertical":case"DoubleRTL":case"DoubleLTR":return le;case"ContinuesHorizontalLTR":case"ContinuesHorizontalRTL":return t}},Ye=function(e){return Array.from({length:e},(function(e,n){return n}))},Ue={pageCount:-1,sourceOrder:-1,chapterCount:0,lastPageRead:0,name:"Loading...",manga:{id:-1}}}}}))}();
