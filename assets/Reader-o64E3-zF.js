var xs=Object.defineProperty;var ms=(e,t,s)=>t in e?xs(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s;var ve=(e,t,s)=>ms(e,typeof t!="symbol"?t+"":t,s);import{c_ as _r,f as l,c$ as wt,j as a,o as Jt,aw as S,q as Qt,d0 as vs,H as Ye,d1 as ct,d2 as er,b as k,G as $,T as et,aY as Ss,d3 as Cs,a_ as bs,cy as Yt,a4 as Ke,ac as nr,C as F,d4 as Hr,d5 as _,d6 as pt,d7 as dr,av as vt,d8 as Vr,d9 as Rs,da as Ae,k as bt,bj as Ps,db as Rt,dc as le,e as zr,dd as ot,aL as Vt,de as z,df as ue,c7 as K,P as Fe,cN as Es,dg as Ts,dh as ws,di as As,cO as Is,ap as st,dj as gr,a$ as tt,dk as hr,bA as Pt,A as ar,L as zt,c as Ie,u as G,cf as Ur,bd as Wr,be as Fr,aA as Et,a6 as kt,a7 as Nt,ch as Ms,as as Os,B as rt,dl as js,dm as pr,dn as Gr,dp as tr,dq as $r,dr as Ds,ds as fr,dt as Xr,b7 as ys,du as He,bh as Ls,dv as it,x as Yr,I as oe,r as At,cg as Bs,aJ as ks,bp as Ns,i as Ut,aV as _s,dw as or,a9 as Hs,aa as Vs,m as Kr,dx as St,ao as xr,dy as zs,br as Us,b9 as _e,dz as Ws,dA as Zr,dB as Fs,g as qr,aE as Jr,dC as mr,R as vr,dD as ft,dE as Q,bq as Gs,dF as rr,h as $s,aD as Xs,dG as Ys,dH as Ks}from"./index-XiA-10qq.js";import{b as J,R as Zs,a as L,w as ge,c as lt,d as Ze,e as Wt,g as Le,f as Ce,i as de,h as Ve,j as Qe,k as q,l as Sr,m as Cr,n as ce,o as qs,p as Tt,q as It,r as Js,s as Qs,t as en,v as tn,x as Qr,y as es,z as ts,S as rn,A as sn,B as Ft,C as Mt,D as Ue,E as ir,F as nn,G as an,H as on,I as cn,J as cr,K as ln,L as un,M as rs,N as dn,O as We,P as gn,Q as br,T as Dt,U as hn,V as pn,W as fn,X as xn,Y as ss,Z as ns,_ as mn,$ as vn,a0 as Sn,a1 as Cn,a2 as Lt,a3 as Rr,a4 as bn,a5 as Rn,a6 as Kt,a7 as Pn}from"./ReaderSettingsTabs-BHv0xeX9.js";import{r as En}from"./Strings-CAV0u705.js";import{C as ze,b as sr,F as Ct}from"./Chapters-CO1nKzin.js";import{P as Tn}from"./PushPin-DAd3h8A3.js";import{P as wn}from"./PushPinOutlined-Dge3ds77.js";import{L as Bt}from"./Link-CxDpGF46.js";import{S as as}from"./Select-Bw1Lc1xf.js";import{C as os,c as An,F as In,l as Mn,n as On,a as jn}from"./useManageMangaLibraryState-DPVWUyba.js";import{q as Dn}from"./index-DA4uIq_N.js";import{C as yn,B as Ln,I as Bn}from"./ChapterListCard-DFT20ROH.js";import{D as kn}from"./Download-Bww51_y2.js";import{D as Nn}from"./Delete-XOUzHwmD.js";import{D as _n}from"./ChapterCardMetadata-nW8VXxAM.js";import{F as Hn,I as Vn}from"./IconWebView-BfJlt--9.js";import{F as lr}from"./Mangas-YfP8tIGG.js";import{C as zn}from"./CheckboxInput-CKl_LyfP.js";import{E as _t}from"./EmptyViewAbsoluteCentered-Btp1Boz9.js";import{u as Un}from"./SpinnerImage-CsfjirXP.js";import{u as Wn}from"./use-window-event-DZNbOzzd.js";import{u as Fn}from"./use-merged-ref-RJi1rPpr.js";import{u as Gn}from"./useAppTitle-D76NoM3_.js";import"./TabsMenu-DX8hKcsu.js";import"./Tabs-BnanxBCD.js";import"./Trans-sfx9cyzn.js";import"./Slider-Bt1x3Pjh.js";import"./ListSubheader-BmRvV6fA.js";import"./Add-C1fScevZ.js";import"./DateHelper-BvX1Gc9c.js";import"./Asserts-C0wb_9Yq.js";import"./ThreeStateCheckboxInput-CYlXxqZ0.js";import"./Checkbox-CcYvfuKg.js";import"./SwitchBase-CwpjSxsg.js";import"./FormGroup-vm0ewM1j.js";import"./DoneAll-CMZCcO6e.js";import"./MUI.util-CEodEA2f.js";import"./ListCardContent-Bqsd0ieT.js";import"./Card-PyV0hA6L.js";import"./CardActionArea-D6aIBYHC.js";import"./Refresh-e8v0n4cN.js";const $n=e=>{const{activeScopes:t,enableScope:s,disableScope:r}=_r(),n=l.useRef([]);l.useEffect(()=>e?(n.current=[...t],s(wt.NONE),n.current.forEach(r),()=>{r(wt.NONE),n.current.forEach(s)}):()=>{},[e])},Xn=({isOpen:e,close:t})=>{const s=J(c=>c.settings);$n(e);const[r,n]=l.useState(0),[o,i]=l.useState(!1);return e?a.jsx(Jt,{open:e,maxWidth:"md",fullWidth:!0,onClose:t,hideBackdrop:r===vs.FILTER,sx:{...S(o,{opacity:.75})},children:a.jsx(Qt,{sx:{p:0},children:a.jsx(Zs,{activeTab:r,setActiveTab:n,settings:s,updateSetting:(...c)=>L.updateSetting(...c),deleteSetting:(...c)=>L.deleteSetting(...c),setTransparent:i})})}):null},Yn=({isDesktop:e,readerNavBarWidth:t})=>{const s=lt(g=>g.scrollbar),{currentPageIndex:r,pages:n,totalPages:o}=Ze(g=>({currentPageIndex:g.pages.currentPageIndex,pages:g.pages.pages,totalPages:g.pages.totalPages})),{readingDirection:i,shouldShowPageNumber:c,progressBarType:u}=J(g=>({readingDirection:g.settings.readingDirection.value,shouldShowPageNumber:g.settings.shouldShowPageNumber,progressBarType:g.settings.progressBarType})),f=Wt(g=>g.progressBar.isMaximized),h=l.useMemo(()=>{const g=Le(r,n).name,d="/",p="".concat(g).concat(d).concat(o);return i===ct.LTR?p:En(p,d)},[r,n,o,i]);return!c||f||e&&u===er.STANDARD||f&&u===er.HIDDEN?null:a.jsx(k,{sx:{position:"fixed",left:t,right:0,bottom:g=>"max(calc(".concat(g.spacing(1)," + ").concat(s.xSize,"px), env(safe-area-inset-bottom))"),alignItems:"center",transition:g=>"left 0.".concat(g.transitions.duration.shortest,"s")},children:a.jsx($,{sx:{p:.5,borderRadius:1,backgroundColor:"rgba(0, 0, 0, 0.3)"},children:a.jsx(et,{sx:{color:"white"},children:h})})})},Kn=ge(Yn,[L.useOverlayMode,Ye],["isDesktop","readerNavBarWidth"]);function Pr(e){return e.substring(2).toLowerCase()}function Zn(e,t){return t.documentElement.clientWidth<e.clientX||t.documentElement.clientHeight<e.clientY}function qn(e){const{children:t,disableReactTree:s=!1,mouseEvent:r="onClick",onClickAway:n,touchEvent:o="onTouchEnd"}=e,i=l.useRef(!1),c=l.useRef(null),u=l.useRef(!1),f=l.useRef(!1);l.useEffect(()=>(setTimeout(()=>{u.current=!0},0),()=>{u.current=!1}),[]);const h=Ss(Cs(t),c),g=bs(x=>{const P=f.current;f.current=!1;const C=Yt(c.current);if(!u.current||!c.current||"clientX"in x&&Zn(x,C))return;if(i.current){i.current=!1;return}let m;x.composedPath?m=x.composedPath().includes(c.current):m=!C.documentElement.contains(x.target)||c.current.contains(x.target),!m&&(s||!P)&&n(x)}),d=x=>P=>{f.current=!0;const C=t.props[x];C&&C(P)},p={ref:h};return o!==!1&&(p[o]=d(o)),l.useEffect(()=>{if(o!==!1){const x=Pr(o),P=Yt(c.current),C=()=>{i.current=!0};return P.addEventListener(x,g),P.addEventListener("touchmove",C),()=>{P.removeEventListener(x,g),P.removeEventListener("touchmove",C)}}},[g,o]),r!==!1&&(p[r]=d(r)),l.useEffect(()=>{if(r!==!1){const x=Pr(r),P=Yt(c.current);return P.addEventListener(x,g),()=>{P.removeEventListener(x,g)}}},[g,r]),l.cloneElement(t,p)}const Er=Ke(et)({boxSizing:"content-box",display:"flex",justifyContent:"center",alignItems:"center",overflow:"hidden",textAlign:"center",userSelect:"none",cursor:"pointer",WebkitTapHighlightColor:"transparent"}),Jn=Ke(k,{shouldForwardProp:nr(["progressBarPosition"])})(({theme:e,progressBarPosition:t})=>({position:"fixed",pointerEvents:"all",touchAction:"none",...S(Ce(t).isHorizontal,{justifyContent:"flex-end",bottom:0,right:0}),...S(Ce(t).isVertical,{top:0,bottom:0}),...S(Ce(t).isLeft,{alignItems:e.direction==="ltr"?"flex-start":"flex-end"}),...S(Ce(t).isRight,{alignItems:e.direction==="ltr"?"flex-end":"flex-start"}),WebkitTapHighlightColor:"transparent"})),Qn=Ke(k)(({theme:e})=>({flexDirection:"row",justifyContent:"center",alignItems:"center",gap:e.spacing(.5)})),ea=Ke(k)({flexDirection:"row",flexGrow:1,overflow:"hidden"}),ta=Ke($,{shouldForwardProp:nr(["currentPagesIndex","pagesLength","progressBarPosition"])})(({currentPagesIndex:e,pagesLength:t,progressBarPosition:s})=>({position:"absolute",pointerEvents:"none",...S(Ce(s).isHorizontal,{left:0,width:"".concat((e+1)/t*100,"%"),height:"100%"}),...S(Ce(s).isVertical,{top:0,width:"100%",height:"".concat((e+1)/t*100,"%")})})),ra=({pageName:e,currentPagesIndex:t,pagesLength:s,isDragging:r,boxProps:n,children:o,progressBarPosition:i})=>a.jsx(F,{title:e,slotProps:{tooltip:{sx:{backgroundColor:"primary.main",color:"primary.contrastText"}}},placement:Hr[i],disableTouchListener:!0,children:a.jsx($,{...n,sx:{position:"absolute",cursor:r?"grabbing":"grab",...S(Ce(i).isHorizontal,{left:"".concat(Math.max(0,t-1)/(s-1)*100,"%"),width:"calc(100% / ".concat(s-1,")"),height:"100%"}),...S(Ce(i).isVertical,{top:"".concat(Math.max(0,t-1)/(s-1)*100,"%"),width:"100%",height:"calc(100% / ".concat(s-1,")")}),...n==null?void 0:n.sx},children:o})}),sa=Ke(k)({position:"relative",flexDirection:"row",flexGrow:1}),na={[pt.EDGE]:[{rect:[0,0,100,33.33],type:_.NEXT},{rect:[0,33.33,33.33,66.66],type:_.NEXT},{rect:[66.66,33.33,33.33,66.66],type:_.NEXT},{rect:[33.33,33.33,33.33,33.33],type:_.MENU},{rect:[33.33,66.66,33.33,33.33],type:_.PREVIOUS}],[pt.KINDLE]:[{rect:[0,0,100,33.33],type:_.MENU},{rect:[0,33.33,33.33,66.66],type:_.PREVIOUS},{rect:[33.33,33.33,66.66,66.66],type:_.NEXT}],[pt.L_SHAPE]:[{rect:[0,0,100,33.33],type:_.PREVIOUS},{rect:[0,33.33,33.33,33.33],type:_.PREVIOUS},{rect:[33.33,33.33,33.33,33.33],type:_.MENU},{rect:[66.66,33.33,33.33,33.33],type:_.NEXT},{rect:[0,66.66,100,33.33],type:_.NEXT}],[pt.RIGHT_LEFT]:[{rect:[0,0,33.33,100],type:_.PREVIOUS},{rect:[33.33,0,33.33,100],type:_.MENU},{rect:[66.66,0,33.33,100],type:_.NEXT}],[pt.DISABLED]:[{rect:[0,0,100,100],type:_.MENU}]},aa={[_.PREVIOUS]:{text:"global.label.previous",color:"rgba(255, 114, 118, .5)"},[_.NEXT]:{text:"global.label.next",color:"rgba(144, 238, 144, .5)"},[_.MENU]:{text:"global.label.menu",color:"rgba(0, 0, 0, .5)"}};class Se{static invertRect(t,{vertical:s,horizontal:r,isRTL:n}){const o=s?this.invertVertical(t):t,i=r?this.invertHorizontal(o):o;return n?this.invertHorizontal(i):i}static getRegions(t,s){return na[t].map(({type:n,rect:o})=>({type:n,rect:this.invertRect(o,s)}))}static isCanvasReusable(t,s,r,n,o){var p;const i=this.layout===t,c=this.width===s,u=this.height===r,f=!!this.canvas,h=this.language===dr.language,g=((p=this.invertMode)==null?void 0:p.vertical)===o.vertical&&this.invertMode.horizontal===o.horizontal&&this.invertMode.isRTL===o.isRTL,d=this.fontStyle===n;return f&&c&&u&&i&&h&&g&&d}static drawCanvas(t,s,r,n,o){o.forEach(({type:i,rect:[c,u,f,h]})=>{const{text:g,color:d}=aa[i],p=vt(g),x=(E,w)=>E/100*w,P=x(c,s),C=x(u,r),m=x(f,s),v=x(h,r),A=(E,w)=>(E+w)*.5+E*.5,T=A(P,m),I=A(C,v);t.beginPath(),t.rect(P,C,m,v),t.fillStyle=d,t.strokeStyle=d,t.lineWidth=.1,t.stroke(),t.fill(),t.strokeStyle="black",t.textAlign="center",t.textBaseline="middle",t.font="".concat(n.fontSize," ").concat(n.fontFamily),t.strokeStyle="black",t.lineWidth=3,t.strokeText(p,T,I),t.lineWidth=1,t.fillStyle="white",t.fillText(p,T,I)})}static getOrCreateCanvas(t,s,r,n,o){if(this.isCanvasReusable(t,s,r,n,o))return this.canvas;const i=document.createElement("canvas"),c=i.getContext("2d");c.canvas.width=s,c.canvas.height=r;const u=this.getRegions(t,o);return this.drawCanvas(c,s,r,n,u),this.layout=t,this.canvas=i,this.width=s,this.height=r,this.language=dr.language,this.invertMode=o,this.regions=u,this.fontStyle=n,i}static doesRegionContainPos(t,s,r){const[n,o,i,c]=t.rect;return s>=n&&s<=n+i&&r>=o&&r<=o+c}static getAction(t,s){var i;const r=t/this.width*100,n=s/this.height*100,o=(i=this.regions)==null?void 0:i.find(c=>this.doesRegionContainPos(c,r,n));return o?o.type:_.MENU}}ve(Se,"layout",null),ve(Se,"canvas",null),ve(Se,"width",null),ve(Se,"height",null),ve(Se,"language",null),ve(Se,"invertMode",null),ve(Se,"regions",null),ve(Se,"fontStyle",null),ve(Se,"invertVertical",([t,s,r,n])=>[t,100-(s+n),r,n]),ve(Se,"invertHorizontal",([t,s,r,n])=>[100-(t+r),s,r,n]);const oa=(e,t,s)=>{if(e===Ae.X){if(t===ue.BACKWARD)return s==="ltr"?-1:1;if(t===ue.FORWARD)return s==="ltr"?1:-1}return t===ue.BACKWARD?-1:1},fe=class fe{static scroll(t,s,r,n,o,i,c=Vr.LARGE){if(!o)return;const u=Rt[n],f=Rs().direction===u,h=de(r),g=Math.abs(o.scrollTop)<=1,d=Math.floor(o.scrollTop)===o.scrollHeight-o.clientHeight||Math.ceil(o.scrollTop)===o.scrollHeight-o.clientHeight,p=Math.abs(o.scrollLeft)<=1,x=o.scrollWidth-o.clientWidth-Math.floor(Math.abs(o.scrollLeft))<=1||o.scrollWidth-o.clientWidth-Math.ceil(Math.abs(o.scrollLeft))<=1,P=f?p:x,C=f?x:p,m=c/100,v=oa(s,t,u),A=(I,E)=>I+E*m*v;Ve().setIsVisible(!1),i(!1);const T=(I,E,w)=>{if(I&&t===ue.BACKWARD&&h){fe.openChapter("previous");return}if(E&&t===ue.FORWARD&&h){fe.openChapter("next");return}o.scroll({...w,behavior:"smooth"})};switch(s){case Ae.X:T(P,C,{left:A(o.scrollLeft,o.clientWidth)});break;case Ae.Y:T(g,d,{top:A(o.scrollTop,o.clientHeight)});break;default:throw new Error('Unexpected "ScrollDirection" ('.concat(s,")"))}}static openChapter(t,s=!0,r=!0){const{currentChapter:n,previousChapter:o,nextChapter:i,chapters:c,visibleChapters:{lastLeadingChapterSourceOrder:u,lastTrailingChapterSourceOrder:f},setReaderStateChapters:h}=Qe(),{shouldInformAboutMissingChapter:g,shouldInformAboutScanlatorChange:d,shouldUseInfiniteScroll:p}=q();if(!n)return;const x=typeof t=="number",P=t==="previous";if(!(x||P&&!!o||!P&&!!i))return;(async()=>{const T=x?c.find(E=>E.id===t):P?o:i;if(!T)return;const I=T.sourceOrder<n.sourceOrder;try{s&&await fe.checkNextChapterConsistency(I?"previous":"next",n,T,g,d);const E=u<=T.sourceOrder&&f>=T.sourceOrder,w=p&&(!r||E);w&&h(b=>en(I,b,T.sourceOrder,r,I?!1:void 0,I?void 0:!1)),L.navigateToChapter(T,{resumeMode:tn(x||!w,I),updateInitialChapter:!w})}catch(E){}})().catch(bt())}static async checkNextChapterConsistency(t,s,r,n,o){if(!s||!r)return;const i=ze.getGap(s,r),c=!o||s.scanlator===r.scanlator,u=!n||!i;if(!(!c||!u))return;const h={previous:{scanlator:"reader.chapter_transition.warning.previous.scanlator",chapter_number:"reader.chapter_transition.warning.previous.chapter_number"},next:{scanlator:"reader.chapter_transition.warning.next.scanlator",chapter_number:"reader.chapter_transition.warning.next.chapter_number"}},g=c?"":vt(h[t].scanlator,{nextScanlator:r.scanlator,currentScanlator:s.scanlator}),d=u?"":vt(h[t].chapter_number,{count:i,nextChapter:"#".concat(r.chapterNumber," ").concat(r.name),currentChapter:"#".concat(s.chapterNumber," ").concat(s.name)}),p=!c&&!u?"\n\n":"",x="".concat(g).concat(p).concat(d);await Ps.show({title:vt("reader.chapter_transition.warning.title"),message:x,actions:{confirm:{title:vt("global.button.open")}}})}static openPage(t,s,r=!0){const{currentPageIndex:n,setPageToScrollToIndex:o,pages:i,transitionPageMode:c,setTransitionPageMode:u}=Sr(),{readingDirection:f,readingMode:h,shouldShowTransitionPage:g}=q(),d=Rt[f.value],p=K(t,t==="previous"?"next":"previous",s!=null?s:d),x=Le(n,i),P=Cr("previous",x.pagesIndex,i),C=Cr("next",x.pagesIndex,i),m=ce(i[0]),v=ce(i[i.length-1]),A=x.primary.index===0,T=n===v,I=qs(c,h.value),E=de(h.value);r&&(Ve().setIsVisible(!1),Tt().setShowPreview(!1));const w=()=>u(le.NONE);if(typeof t=="number"){o(t),w();return}const b=E&&I,O=!E&&c===le.PREVIOUS||b,j=!E&&c===le.NEXT||b;if(A&&(!g||O)&&p==="previous"&&!!Qe().previousChapter){fe.openChapter("previous");return}if(T&&(!g||j)&&p==="next"&&!!Qe().nextChapter){fe.openChapter("next");return}const M=p==="previous",U=p==="next";if(I&&!E&&(O&&U||j&&M)){w(),o(O?m:v);return}if((A&&M||T&&U)&&!E){u(M?le.PREVIOUS:le.NEXT);return}o(M?P:C)}static useUpdateCurrentPageIndex(){const t=L.useUpdateChapter(),{settings:{downloadAheadLimit:s}}=zr();return l.useCallback((r,n=!0,o=!1)=>{const{currentPageIndex:i,setCurrentPageIndex:c}=Sr(),{currentChapter:u,chapters:f,previousChapter:h,nextChapter:g,visibleChapters:d,setReaderStateChapters:p}=Qe();if(r===i&&!o||(c(r),!u))return;const x=ze.getNextChapters(u,f,{offset:ot.NEXT}),P=i>r?ot.PREVIOUS:ot.NEXT;L.downloadAhead(u,g,x,r,s),L.preloadChapter(r,u.pageCount,P===ot.NEXT?g:h,d.lastLeadingChapterSourceOrder,d.lastTrailingChapterSourceOrder,p,P);const C=()=>{const m=Qr(u.id);if(!m)return;const v=o?m.pageCount-1:r,A=v===m.pageCount-1;t({lastPageRead:v,isRead:A?!0:void 0})};if(clearTimeout(fe.updateCurrentPageTimeout),n){fe.updateCurrentPageTimeout=setTimeout(C,Vt(1).seconds.inWholeMilliseconds);return}C()},[s])}static updateCurrentPageOnScroll(t,s,r,n,o){var d,p,x,P;const i=Rt[o],c=(x=(p=(d=It().autoScroll.scrollRef)==null?void 0:d.current)==null?void 0:p.getBoundingClientRect().x)!=null?x:0,u=K(c+1,window.innerWidth+1,i),f=t.current.findIndex(C=>C&&Js(C,n,{truncateValues:!0,thresholds:{bottom:1,left:K(0,u,i),right:K(u,0,i)}})),h=(P=t.current)==null?void 0:P[t.current.length-1],g=h&&Qs(h,n,o);if(f!==-1){if(g){r(f,!1,!0);return}r(f,f!==s)}}static handleClick(t,s){if(!t)return;const{readingMode:r,readingDirection:n,isStaticNav:o,scrollAmount:i}=q(),c=s.currentTarget.getBoundingClientRect(),u=s.clientX-c.left,f=s.clientY-c.top,h=Se.getAction(u,f);Tt().setShowPreview(!1);const g=de(r.value),d=r.value===z.CONTINUOUS_HORIZONTAL?Ae.X:Ae.Y;switch(h){case _.MENU:Ve().setIsVisible(o||!Ve().isVisible);break;case _.PREVIOUS:case _.NEXT:g?fe.scroll(h===_.PREVIOUS?ue.BACKWARD:ue.FORWARD,d,r.value,n.value,t,Tt().setShowPreview,i):fe.openPage(h===_.PREVIOUS?"previous":"next","ltr");break;default:throw new Error('Unexpected "TapZoneRegionType" ('.concat(h,")"))}}static useHandleProgressDragging(t,s,r,n,o,i,c){l.useEffect(()=>{if(!s)return()=>{};const{isHorizontal:u}=Ce(o),f=d=>{if(!t.current)return;const p=ce(es(d,t.current,n,u,c,i));ce(r)!==p&&fe.openPage(p,void 0,!1)},h=d=>{f(d)},g=d=>{d.touches.length>0&&f(d.touches[0])};return document.addEventListener("mousemove",h,{passive:!0}),document.addEventListener("touchmove",g,{passive:!0}),()=>{document.removeEventListener("mousemove",h),document.removeEventListener("touchmove",g)}},[s,r,n,o])}};ve(fe,"updateCurrentPageTimeout");let H=fe;const ia=l.memo(Ke($,{shouldForwardProp:nr(["isFirstPage","isLastPage"])})(({isFirstPage:e,isLastPage:t})=>({flexGrow:1,height:"100%",cursor:"pointer",borderLeftWidth:e?0:void 0,borderRightWidth:t?0:void 0}))),ca=l.memo(({page:e,pagesIndex:t,isCurrentPage:s,isLeadingPage:r,isTrailingPage:n,totalPages:o,showDraggingStyle:i,primaryPageLoadState:c,secondaryPageLoadState:u,createProgressBarSlot:f,...h})=>{const g=l.useMemo(()=>f(e,t,c,u,s,r,n,o,i),[f,e,t,c,u,s,r,n,o,i]);return a.jsx(ia,{...h,isFirstPage:t===0,isLastPage:t===o-1,children:g})}),la=({slotProps:e,slots:t,createProgressBarSlot:s,progressBarPosition:r,direction:n,fullSegmentClicks:o})=>{var b,O,j,V,y,M,U,se,ne,he,Z,N,B,be,Me,Re,ae,Oe,Ge,Pe,Ee,Be,xe,$e,qe,nt,je,Te,X,De,ke,Ne;const{pages:i,pageLoadStates:c,totalPages:u,currentPageIndex:f}=Ze(R=>({pages:R.pages.pages,pageLoadStates:R.pages.pageLoadStates,totalPages:R.pages.totalPages,currentPageIndex:R.pages.currentPageIndex})),h=J(R=>R.settings.readingMode.value),{isDragging:g,setIsDragging:d}=Wt(R=>({isDragging:R.progressBar.isDragging,setIsDragging:R.progressBar.setIsDragging})),p=l.useRef(null),x=l.useRef(void 0),[P,C]=l.useState(0),m=l.useRef(null);Fe(m,l.useCallback(()=>{const R=m.current;if(!R)return;const{paddingLeft:Y,paddingRight:pe}=getComputedStyle(R),W=6,me=R.clientWidth-parseFloat(Y)-parseFloat(pe),Je=h===z.DOUBLE_PAGE?me*2+W:me;C(Je)},[h]));const v=l.useMemo(()=>Le(f,i).pagesIndex,[f,i]),A=Ce(r).isHorizontal,T=l.useMemo(()=>Le(f,i),[f,i]),I=l.useCallback((...R)=>K(R[0],R[1],n),[n]);H.useHandleProgressDragging(p,g,T,i,r,I,o);const E=R=>{if(!p.current)return;const Y="touches"in R;H.openPage(ce(es(Y?R.touches[0]:R,p.current,i,A,o,I)),void 0,!1),clearTimeout(x.current),x.current=setTimeout(()=>d(!0),250)},w=()=>{d(!1),clearTimeout(x.current)};return a.jsx(Jn,{...e==null?void 0:e.container,progressBarPosition:r,children:a.jsxs(Qn,{...e==null?void 0:e.progressBarRoot,children:[a.jsx(Er,{...(b=e==null?void 0:e.progressBarPageTexts)==null?void 0:b.base,...(O=e==null?void 0:e.progressBarPageTexts)==null?void 0:O.current,sx:[{width:"".concat(P,"px")},...Array.isArray((V=(j=e==null?void 0:e.progressBarPageTexts)==null?void 0:j.base)==null?void 0:V.sx)?(U=(M=(y=e==null?void 0:e.progressBarPageTexts)==null?void 0:y.base)==null?void 0:M.sx)!=null?U:[]:[(ne=(se=e==null?void 0:e.progressBarPageTexts)==null?void 0:se.base)==null?void 0:ne.sx],...Array.isArray((Z=(he=e==null?void 0:e.progressBarPageTexts)==null?void 0:he.current)==null?void 0:Z.sx)?(be=(B=(N=e==null?void 0:e.progressBarPageTexts)==null?void 0:N.current)==null?void 0:B.sx)!=null?be:[]:[(Re=(Me=e==null?void 0:e.progressBarPageTexts)==null?void 0:Me.current)==null?void 0:Re.sx]],onClick:()=>H.openPage("previous","ltr",!1),children:T.name}),a.jsx(qn,{onClickAway:()=>d(!1),children:a.jsxs(sa,{...e==null?void 0:e.progressBarSlotsActionArea,onMouseDown:E,onMouseUp:w,onTouchStart:E,onTouchEnd:w,children:[a.jsxs(ea,{ref:p,...e==null?void 0:e.progressBarSlotsContainer,children:[i.map((R,Y)=>l.createElement(ca,{...e==null?void 0:e.progressBarSlot,key:R.primary.index,page:R,pagesIndex:Y,isCurrentPage:Y===v,isLeadingPage:Y<v,isTrailingPage:Y>v,totalPages:i.length,primaryPageLoadState:c[R.primary.index].loaded,secondaryPageLoadState:R.secondary?c[R.secondary.index].loaded:void 0,createProgressBarSlot:s,showDraggingStyle:Y===v&&g})),a.jsx(ta,{...e==null?void 0:e.progressBarReadPages,currentPagesIndex:T.pagesIndex,pagesLength:i.length,progressBarPosition:r})]}),a.jsx(ra,{boxProps:e==null?void 0:e.progressBarCurrentPageSlot,pageName:T.name,currentPagesIndex:T.pagesIndex,pagesLength:i.length,isDragging:g,progressBarPosition:r,children:t==null?void 0:t.progressBarCurrentPage})]})}),a.jsx(Er,{ref:m,...(ae=e==null?void 0:e.progressBarPageTexts)==null?void 0:ae.base,...(Oe=e==null?void 0:e.progressBarPageTexts)==null?void 0:Oe.total,sx:[{minWidth:"unset"},...Array.isArray((Pe=(Ge=e==null?void 0:e.progressBarPageTexts)==null?void 0:Ge.base)==null?void 0:Pe.sx)?(xe=(Be=(Ee=e==null?void 0:e.progressBarPageTexts)==null?void 0:Ee.base)==null?void 0:Be.sx)!=null?xe:[]:[(qe=($e=e==null?void 0:e.progressBarPageTexts)==null?void 0:$e.base)==null?void 0:qe.sx],...Array.isArray((je=(nt=e==null?void 0:e.progressBarPageTexts)==null?void 0:nt.total)==null?void 0:je.sx)?(De=(X=(Te=e==null?void 0:e.progressBarPageTexts)==null?void 0:Te.total)==null?void 0:X.sx)!=null?De:[]:[(Ne=(ke=e==null?void 0:e.progressBarPageTexts)==null?void 0:ke.total)==null?void 0:Ne.sx]],onClick:()=>H.openPage("next","ltr",!1),children:u})]})})},is=l.memo(la),ua=({direction:e,...t})=>{const{settings:{customThemes:s,appTheme:r,themeMode:n,shouldUsePureBlackMode:o}}=zr(),i=l.useMemo(()=>Es(n,Ts(r,s),o,e),[n,r,s,o,e]);return a.jsx(ws,{value:As[e],children:a.jsx(Is,{theme:i,children:a.jsx($,{...t,dir:e})})})},cs=ge(ua,[()=>({direction:L.useGetThemeDirection()})],["direction"]),ls=l.memo(({pageName:e,progressBarPosition:t,slotProps:s,children:r})=>{var n;return a.jsx(F,{...s==null?void 0:s.tooltip,title:e,placement:Hr[t],disableTouchListener:!0,children:a.jsx($,{...s==null?void 0:s.box,sx:{width:"100%",height:"100%",...(n=s==null?void 0:s.box)==null?void 0:n.sx},children:r})})}),da=l.memo(({pageName:e,primaryPageLoadState:t,secondaryPageLoadState:s,progressBarPosition:r,isCurrentPage:n,isLeadingPage:o,showDraggingStyle:i})=>{const c=st();return a.jsx(ls,{pageName:e,progressBarPosition:r,slotProps:{box:{sx:{cursor:"pointer",backgroundColor:gr(c.palette.background.paper,.2),...c.applyStyles("dark",{backgroundColor:hr(c.palette.background.paper,.1)}),...S(t&&(s==null||s),{backgroundColor:gr(c.palette.background.paper,.35),...c.applyStyles("dark",{backgroundColor:hr(c.palette.background.paper,.25)})})}},tooltip:{slotProps:n?{tooltip:{sx:{backgroundColor:"primary.main",color:"primary.contrastText"}}}:void 0}},children:a.jsx($,{sx:{width:"100%",height:"100%",...S(o,{backgroundColor:tt(c.palette.primary.main,.5)}),...S(n,{cursor:i?"grabbing":"grab",pointer:"grabbing",borderRadius:2,backgroundColor:"primary.dark",...c.applyStyles("dark",{backgroundColor:"primary.light"})})}})})}),ga=({readerNavBarWidth:e,readerDirection:t})=>{const s=st(),r=lt(E=>E.scrollbar),n=Ze(E=>E.pages.totalPages),{progressBarType:o,progressBarSize:i,progressBarPosition:c,progressBarPositionAutoVertical:u}=J(E=>({progressBarType:E.settings.progressBarType,progressBarSize:E.settings.progressBarSize,progressBarPosition:E.settings.progressBarPosition,progressBarPositionAutoVertical:E.settings.progressBarPositionAutoVertical})),{isMaximized:f,setIsMaximized:h,isDragging:g}=Wt(E=>({isMaximized:E.progressBar.isMaximized,setIsMaximized:E.progressBar.setIsMaximized,isDragging:E.progressBar.isDragging})),[,d]=l.useState({});Fe(window.document.documentElement,l.useCallback(()=>d({}),[]));const p=ts(c,u,r.ySize,e+r.xSize),{isBottom:x,isLeft:P,isRight:C,isVertical:m,isHorizontal:v}=Ce(p),A=!!n,T=o===er.HIDDEN,I=!f&&!g;return a.jsx(cs,{children:a.jsx(is,{direction:v?t:"ltr",progressBarPosition:p,fullSegmentClicks:!0,createProgressBarSlot:l.useCallback((E,w,b,O,j,V,y,M,U)=>a.jsx(da,{pageName:E.name,primaryPageLoadState:b,secondaryPageLoadState:O,progressBarPosition:p,isCurrentPage:j,isLeadingPage:V,showDraggingStyle:U}),[p]),slotProps:{container:{sx:{overflow:"hidden",transition:"all 0.".concat(s.transitions.duration.shortest,"s"),...S(v,{minHeight:"100px",...S(s.direction==="ltr",{left:t==="ltr"?e:r.ySize,right:t==="rtl"?e:r.ySize}),...S(s.direction==="rtl",{left:t==="rtl"?e:r.ySize,right:t==="ltr"?e:r.ySize})}),...S(m,{minWidth:"100px",bottom:"".concat(r.xSize,"px")}),...S(x,{bottom:"".concat(r.xSize,"px")}),...S(P,{...S(s.direction==="ltr",{left:t==="ltr"?e:"unset",right:t==="rtl"?e:"unset"}),...S(s.direction==="rtl",{right:t==="rtl"?r.ySize:"unset",left:t==="ltr"?r.ySize:"unset"})}),...S(C,{...S(s.direction==="ltr",{right:t==="ltr"?r.ySize:"unset",left:t==="rtl"?r.ySize:"unset"}),...S(s.direction==="rtl",{left:t==="rtl"?e:"unset",right:t==="ltr"?e:"unset"})}),...S(I,{opacity:T?0:.85}),...S(!A,{pointerEvents:"none"})},onMouseEnter:()=>h(!0),onMouseLeave:()=>h(!1)},progressBarRoot:{sx:{gap:0,transition:"all 0.1s ease-in-out",backgroundColor:"background.paper",...S(m,{flexDirection:"column",height:"100%"}),...S(I,{backgroundColor:"unset",pointerEvents:"none",...S(v,{px:2}),...S(m,{py:2}),...S(x,{pb:.25}),...S(P,{...S(s.direction==="ltr",{pl:t==="ltr"?.25:0,pr:t==="rtl"?.25:0}),...S(s.direction==="rtl",{pr:t==="rtl"?.25:0,pl:t==="ltr"?.25:0})}),...S(C,{...S(s.direction==="ltr",{pr:t==="ltr"?.25:0,pl:t==="rtl"?.25:0}),...S(s.direction==="rtl",{pl:t==="rtl"?.25:0,pr:t==="ltr"?.25:0})})})}},progressBarSlotsContainer:{sx:{gap:.25,borderRadius:2,transition:"height 0.1s ease-in-out",...S(v,{height:"20px"}),...S(m,{flexDirection:"column",width:"20px"}),...S(I,{...S(v,{height:"".concat(i,"px")}),...S(m,{width:"".concat(i,"px")})})}},progressBarReadPages:{sx:{display:"none"}},progressBarCurrentPageSlot:{sx:{display:"none"}},progressBarPageTexts:{base:{sx:{px:1,py:1.5,transition:"all 0.1s ease-in-out",...S(I,{transform:"scale(0)",p:0,minWidth:0,maxWidth:0,minHeight:0,maxHeight:0})}}}}})})},ha=ge(l.memo(ga),[Ye,()=>({readerDirection:L.useGetThemeDirection()})],["readerNavBarWidth","readerDirection"]),pa=Ke(k)({width:"400px",minWidth:"400px",maxWidth:"400px",height:"100vh",overflowY:"auto"}),fa=l.memo(({mangaId:e,mangaTitle:t,chapterTitle:s,scanlator:r})=>a.jsxs(k,{children:[a.jsx(F,{title:t,placement:"right",children:a.jsx(Pt,{lines:3,variant:"h6",component:"h1",sx:{textAlign:"center"},children:a.jsx(Bt,{component:zt,to:ar.manga.path(e),sx:{textDecoration:"none",color:"inherit"},children:t})})}),a.jsx(F,{title:s,placement:"right",children:a.jsx(Pt,{lines:4,variant:"body1",component:"h2",sx:{textAlign:"center"},children:s})}),r&&a.jsx(F,{title:r,placement:"right",children:a.jsx(Pt,{lines:4,variant:"body2",component:"h3",color:"textDisabled",sx:{textAlign:"center"},children:r})})]})),xa=Ie(a.jsx("path",{d:"M15.41 16.59 10.83 12l4.58-4.59L14 6l-6 6 6 6z"})),ma=Ie(a.jsx("path",{d:"M8.59 16.59 13.17 12 8.59 7.41 10 6l6 6-6 6z"})),Ht=({title:e,type:t,disabled:s,...r})=>a.jsx(F,{title:e,disabled:s,children:a.jsx(os,{sx:{flexBasis:"15%"},variant:"contained",disabled:s,...r,children:t==="previous"?a.jsx(xa,{}):a.jsx(ma,{})})}),va=()=>{const{t:e}=G(),t=Ur(),{currentPageIndex:s,pages:r}=Ze(c=>({currentPageIndex:c.pages.currentPageIndex,pages:c.pages.pages})),n=J(c=>c.settings.readingDirection.value),o=l.useMemo(()=>Le(s,r),[s,r]),i=Rt[n];return a.jsxs(k,{sx:{flexDirection:"row",gap:1},dir:"ltr",children:[a.jsx(Ht,{type:"previous",title:e(t("reader.button.previous_page","reader.button.next_page",i)),disabled:t(!o.primary.index,ce(o)===ce(r.slice(-1)[0]),i),onClick:()=>H.openPage("previous",void 0,!1)}),a.jsxs(Wr,{sx:{flexBasis:"70%",flexGrow:0,flexShrink:0},children:[a.jsx(Fr,{id:"reader-nav-bar-desktop-page-select",children:e("reader.page_info.label.page")}),a.jsx(as,{labelId:"reader-nav-bar-desktop-page-select",label:e("reader.page_info.label.page"),value:ce(o),onChange:c=>H.openPage(c.target.value,void 0,!1),children:r.map(c=>a.jsx(Et,{value:ce(c),children:c.name},ce(c)))})]}),a.jsx(Ht,{type:"next",title:e(t("reader.button.next_page","reader.button.previous_page",i)),disabled:t(ce(o)===ce(r.slice(-1)[0]),!o.primary.index,i),onClick:()=>H.openPage("next",void 0,!1)})]})},Sa=l.memo(va),Ca=()=>{},us=({currentChapterId:e,chapters:t,style:s})=>{const r=l.useMemo(()=>e===void 0?0:t.findIndex(n=>n.id===e),[e,t]);return a.jsx(Dn,{style:{height:"calc(".concat(t.length," * 100px)"),...s},initialTopMostItemIndex:r,totalCount:t.length,computeItemKey:n=>t[n].id,itemContent:n=>a.jsx(yn,{index:n,chapters:t,isSortDesc:!0,mode:"reader",showChapterNumber:!1,selected:null,onSelect:Ca,selectable:!1,isActiveChapter:n===r}),increaseViewportBy:400})},ba=({currentChapterId:e,currentChapterName:t,currentChapterNumber:s,previousChapter:r,nextChapter:n,chapters:o=[],readerThemeDirection:i})=>{const{t:c}=G(),u=kt({variant:"popover",popupId:"reader-nav-bar-desktop-chapter-list"});return l.useLayoutEffect(()=>{u.close()},[e]),a.jsxs(k,{sx:{flexDirection:"row",gap:1},dir:"ltr",children:[a.jsx(Ht,{type:"previous",title:c(K("reader.button.previous_chapter","reader.button.next_chapter",i)),onClick:()=>{H.openChapter(K("previous","next",i))},disabled:K(!r,!n,i)}),a.jsxs(Wr,{sx:{flexBasis:"70%",flexGrow:0,flexShrink:0},children:[a.jsx(Fr,{id:"reader-nav-bar-desktop-chapter-select",children:c("chapter.title_one")}),a.jsx(as,{...Nt(u),open:u.isOpen,value:e!=null?e:0,MenuProps:{sx:{visibility:"hidden"}},label:c("chapter.title_one"),labelId:"reader-nav-bar-desktop-chapter-select",children:a.jsx(Et,{value:e!=null?e:0,children:s!==void 0?"#".concat(s," ").concat(t):""},e)})]}),a.jsx(Ht,{component:zt,type:"next",title:c(K("reader.button.next_chapter","reader.button.previous_chapter",i)),onClick:()=>{H.openChapter(K("next","previous",i))},disabled:K(!n,!r,i)}),a.jsx(Ms,{...Os(u),anchorOrigin:{vertical:"bottom",horizontal:"left"},children:a.jsx($,{sx:{mb:1},children:a.jsx(us,{style:{width:"500px",maxWidth:"90vw",minHeight:"150px",maxHeight:"300px"},currentChapterId:e,chapters:o})})})]})},Ra=ge(l.memo(ba),[()=>({readerThemeDirection:L.useGetThemeDirection()})],["readerThemeDirection"]),Pa=Ie(a.jsx("path",{d:"M17 4h3c1.1 0 2 .9 2 2v2h-2V6h-3zM4 8V6h3V4H4c-1.1 0-2 .9-2 2v2zm16 8v2h-3v2h3c1.1 0 2-.9 2-2v-2zM7 18H4v-2H2v2c0 1.1.9 2 2 2h3zM18 8H6v8h12z"})),ds=(e,t,s)=>{const n=(e+1)%t.length===0;if(!(s&&n))return t[(e+1)%t.length]},ur=({tooltip:e,value:t,defaultValue:s,values:r,setValue:n,valueToDisplayData:o,isDefaultable:i,onDefault:c,defaultIcon:u})=>{const{t:f}=G(),h=t===void 0,g=l.useMemo(()=>h?-1:r.indexOf(t),[t,r]);return a.jsx(F,{title:e,children:h?a.jsx(rt,{onClick:()=>n(r[0]),sx:{justifyContent:"start",textTransform:"unset",flexGrow:1},variant:"contained",startIcon:u,size:"large",children:s===void 0?f("global.label.default"):a.jsx(rn,{i18nKey:"settings.default_value",value:o[s].isTitleString?o[s].title:f(o[s].title)})}):a.jsx(rt,{onClick:()=>{const d=ds(g,r,i);if(d===void 0){c==null||c();return}n(d)},sx:{justifyContent:"start",textTransform:"unset",flexGrow:1},variant:"contained",startIcon:o[t].icon,size:"large",children:o[t].isTitleString?o[t].title:f(o[t].title)})})},Ea=({pageScaleMode:e,shouldStretchPage:t,updateSetting:s,...r})=>{const{t:n}=G();return a.jsxs(k,{sx:{flexDirection:"row",gap:1},children:[a.jsx(ur,{...r,tooltip:n("reader.settings.page_scale.title"),value:e.isDefault?void 0:e.value,defaultValue:e.isDefault?e.value:void 0,values:Gr,setValue:o=>s("pageScaleMode",o),valueToDisplayData:pr,defaultIcon:pr[e.value].icon}),js[e.value]&&a.jsx(F,{title:n("reader.settings.page_scale.stretch"),children:a.jsx(os,{onClick:()=>s("shouldStretchPage",!t.value),sx:{px:void 0},variant:"contained",color:t.value?"secondary":"primary",children:a.jsx(Pa,{})})})]})},Ta=({readingMode:e,setReadingMode:t,...s})=>{const{t:r}=G();return a.jsx(ur,{...s,tooltip:r("reader.settings.label.reading_mode"),value:e.isDefault?void 0:e.value,defaultValue:e.isDefault?e.value:void 0,values:$r,setValue:t,valueToDisplayData:tr,defaultIcon:tr[e.value].icon})},wa=()=>a.jsx(Ds,{children:a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",stroke:"currentColor",strokeWidth:"2",viewBox:"0 0 24 24",children:a.jsx("path",{d:"M2 4h6a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H2m20 0h-6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h6M2 12h20m-3-3 3 3-3 3M5 9l-3 3 3 3"})})}),Aa=({readingMode:e,shouldOffsetDoubleSpreads:t,setShouldOffsetDoubleSpreads:s})=>{const{t:r}=G();return sn(e)?a.jsx(rt,{sx:{justifyContent:"start",textTransform:"unset"},size:"large",onClick:()=>s(!t),color:t?"secondary":"primary",variant:"contained",startIcon:a.jsx(wa,{}),children:r("reader.settings.label.offset_double_spread")}):null},Ia=({readingDirection:e,setReadingDirection:t,...s})=>{const{t:r}=G();return a.jsx(ur,{...s,tooltip:r("reader.settings.label.reading_direction"),value:e.isDefault?void 0:e.value,defaultValue:e.isDefault?e.value:void 0,values:Xr,setValue:t,valueToDisplayData:fr,defaultIcon:fr[e.value].icon})},Ma=Ie(a.jsx("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2m-1 14H9V8h2zm4 0h-2V8h2z"})),Oa=Ie(a.jsx("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2m-2 14.5v-9l6 4.5z"})),ja=({autoScroll:e,setAutoScroll:t})=>{const{t:s}=G(),{isActive:r,toggleActive:n}=Ft(i=>({isActive:i.autoScroll.isActive,toggleActive:i.autoScroll.toggleActive})),o=l.useRef(void 0);return a.jsxs(k,{sx:{flexDirection:"row",gap:1},children:[a.jsx(rt,{sx:{justifyContent:"start",textTransform:"unset",flexGrow:1},size:"large",onClick:n,color:r?"secondary":"primary",variant:"contained",startIcon:r?a.jsx(Ma,{}):a.jsx(Oa,{}),children:s("reader.settings.auto_scroll.title")}),a.jsx(ys,{value:e.value,type:"number",size:"small",onBlur:i=>{const c=it(+i.target.value,He.min,He.max);c!==e.value&&(clearTimeout(o.current),t({...e,value:c},!0))},onChange:i=>{const c=it(+i.target.value,He.min,He.max);t({...e,value:c},!1),clearTimeout(o.current),o.current=setTimeout(()=>t({...e,value:c},!0),Vt(1).seconds.inWholeMilliseconds)},slotProps:{input:{inputProps:He,endAdornment:a.jsx(Ls,{position:"end",children:s("global.time.seconds.second",{count:e.value})})}}})]})},Da=({openSettings:e})=>{const{t}=G(),{readingMode:s,shouldOffsetDoubleSpreads:r,pageScaleMode:n,shouldStretchPage:o,readingDirection:i,autoScroll:c}=J(u=>({readingMode:u.settings.readingMode,shouldOffsetDoubleSpreads:u.settings.shouldOffsetDoubleSpreads,pageScaleMode:u.settings.pageScaleMode,shouldStretchPage:u.settings.shouldStretchPage,readingDirection:u.settings.readingDirection,autoScroll:u.settings.autoScroll}));return a.jsxs(k,{sx:{gap:1},children:[a.jsx(Ta,{readingMode:s,setReadingMode:u=>L.updateSetting("readingMode",u),isDefaultable:!0,onDefault:()=>L.deleteSetting("readingMode")}),a.jsx(Aa,{readingMode:s.value,shouldOffsetDoubleSpreads:r.value,setShouldOffsetDoubleSpreads:u=>L.updateSetting("shouldOffsetDoubleSpreads",u)}),a.jsx(Ea,{pageScaleMode:n,shouldStretchPage:o,updateSetting:L.updateSetting,isDefaultable:!0,onDefault:()=>L.deleteSetting("pageScaleMode")}),a.jsx(Ia,{readingDirection:i,setReadingDirection:u=>L.updateSetting("readingDirection",u),isDefaultable:!0,onDefault:()=>L.deleteSetting("readingDirection")}),a.jsx(ja,{autoScroll:c,setAutoScroll:(...u)=>L.updateSetting("autoScroll",...u)}),a.jsx(rt,{onClick:()=>e(),size:"large",sx:{justifyContent:"start",textTransform:"none"},variant:"contained",startIcon:a.jsx(Yr,{}),children:t("settings.title")})]})},ya=l.memo(Da),La=Ie(a.jsx("path",{d:"M12 5V1L7 6l5 5V7c3.31 0 6 2.69 6 6s-2.69 6-6 6-6-2.69-6-6H4c0 4.42 3.58 8 8 8s8-3.58 8-8-3.58-8-8-8"})),Tr={...lr,title:"Fallback",inLibrary:!1},gs=l.memo(()=>{const e=Mt(n=>n.manga),{inLibrary:t}=e!=null?e:Tr,{t:s}=G(),{updateLibraryState:r}=An(e!=null?e:Tr,!0);return a.jsx(F,{title:s(t?"manga.action.library.remove.label.action":"manga.button.add_to_library"),children:a.jsx(oe,{onClick:r,color:"inherit",children:t?a.jsx(Hn,{}):a.jsx(In,{})})})}),Ba=Ie(a.jsx("path",{d:"M17 3H7c-1.1 0-1.99.9-1.99 2L5 21l7-3 7 3V5c0-1.1-.9-2-2-2m0 15-5-2.18L7 18V5h10z"})),ka=({id:e,isBookmarked:t})=>{const{t:s}=G(),r=t?"unbookmark":"bookmark";return a.jsx(F,{title:s(sr[r].action.single),children:a.jsx(oe,{onClick:()=>ze.performAction(r,[e],{}),color:"inherit",children:t?a.jsx(Ln,{}):a.jsx(Ba,{})})})},hs=l.memo(ka),Na=({id:e=-1,isDownloaded:t})=>{const{t:s}=G(),r=ze.useDownloadStatusFromCache(e),n=e===void 0;return e!==void 0&&t?a.jsx(F,{title:s(sr.delete.action.single),children:a.jsx(oe,{onClick:()=>ze.performAction("delete",[e],{}),color:"inherit",children:a.jsx(Nn,{})})}):r?a.jsx(_n,{chapterId:r.chapter.id}):a.jsx(F,{title:s(sr.download.action.single),disabled:n,children:a.jsx(oe,{disabled:n,onClick:()=>ze.performAction("download",[e],{}),color:"inherit",children:a.jsx(kn,{})})})},_a=l.memo(()=>{const{id:e,isDownloaded:t,isBookmarked:s,realUrl:r}=Ue(h=>{var g,d,p,x,P,C,m,v;return{id:(d=(g=h.chapters.currentChapter)==null?void 0:g.id)!=null?d:Ct.id,isDownloaded:(x=(p=h.chapters.currentChapter)==null?void 0:p.isDownloaded)!=null?x:Ct.isDownloaded,isBookmarked:(C=(P=h.chapters.currentChapter)==null?void 0:P.isBookmarked)!=null?C:Ct.isBookmarked,realUrl:(v=(m=h.chapters.currentChapter)==null?void 0:m.realUrl)!=null?v:Ct.realUrl}}),{t:n}=G(),{pageLoadStates:o,setPageLoadStates:i,setRetryFailedPagesKeyPrefix:c}=Ze(h=>({pageLoadStates:h.pages.pageLoadStates,setPageLoadStates:h.pages.setPageLoadStates,setRetryFailedPagesKeyPrefix:h.pages.setRetryFailedPagesKeyPrefix})),u=l.useRef(0),f=l.useMemo(()=>o.some(h=>h.error),[o]);return a.jsxs(k,{sx:{flexDirection:"row",justifyContent:"center",gap:1},children:[a.jsx(gs,{}),a.jsx(hs,{id:e,isBookmarked:s}),a.jsx(F,{title:n("reader.button.retry_load_pages"),disabled:!f,children:a.jsx(oe,{onClick:()=>{i(h=>h.map(g=>({url:g.url,loaded:g.loaded}))),c("".concat(u.current)),u.current=(u.current+1)%1e3},disabled:!f,color:"inherit",children:a.jsx(La,{})})}),a.jsx(Na,{id:e,isDownloaded:t}),a.jsx(F,{title:n("global.button.open_browser"),disabled:!r,children:a.jsx(oe,{disabled:!r,href:r!=null?r:"",rel:"noreferrer",target:"_blank",color:"inherit",children:a.jsx(Bn,{})})}),a.jsx(F,{title:n("global.button.open_webview"),disabled:!r,children:a.jsx(oe,{disabled:!r,href:r?At.getWebviewUrl(r):"",rel:"noreferrer",target:"_blank",color:"inherit",children:a.jsx(Vn,{})})})]})}),Ha=({exit:e})=>{const{t}=G(),s=Ur();return a.jsx(F,{title:t("reader.button.exit"),children:a.jsx(oe,{sx:{marginRight:2},onClick:e,color:"inherit",children:s(a.jsx(Bs,{}),a.jsx(ks,{}))})})},ps=ge(l.memo(Ha),[()=>({exit:L.useExit()})],["exit"]),Va=(e,t)=>{const s=l.useRef(t),r=l.useRef(t);return r.current!==s.current&&!e&&(s.current=!1),r.current!==t&&(s.current=r.current,r.current=t),s.current},za=({isVisible:e,openSettings:t,setReaderNavBarWidth:s})=>{const{t:r}=G(),n=Mt(v=>v.manga),{chapters:o,currentChapterId:i,currentChapterName:c,currentChapterNumber:u,currentChapterScanlator:f,previousChapter:h,nextChapter:g}=Ue(v=>{var A,T,I,E;return{chapters:v.chapters.chapters,currentChapterId:(A=v.chapters.currentChapter)==null?void 0:A.id,currentChapterName:(T=v.chapters.currentChapter)==null?void 0:T.name,currentChapterNumber:(I=v.chapters.currentChapter)==null?void 0:I.chapterNumber,currentChapterScanlator:(E=v.chapters.currentChapter)==null?void 0:E.scanlator,previousChapter:v.chapters.previousChapter,nextChapter:v.chapters.nextChapter}}),d=J(v=>v.settings.isStaticNav),[p,x]=l.useState();Fe(p,l.useCallback(()=>{d&&s(p.offsetWidth)},[p,d])),l.useLayoutEffect(()=>()=>s(0),[]);const m=Va(e,d)&&e?0:void 0;return a.jsx(Ns,{variant:d?"permanent":"persistent",open:e||d,transitionDuration:m,SlideProps:{unmountOnExit:!0},PaperProps:{ref:v=>x(v)},children:a.jsxs(pa,{sx:{backgroundColor:"background.paper",pointerEvents:"all"},children:[a.jsxs(k,{sx:{p:2,gap:2,backgroundColor:"action.hover"},children:[a.jsxs(k,{sx:{flexDirection:"row",justifyContent:"space-between",alignItems:"center"},children:[a.jsx(ps,{}),a.jsx(F,{title:r("reader.settings.label.static_navigation"),children:a.jsx(oe,{onClick:()=>{s(0),L.updateSetting("isStaticNav",!d)},color:d?"primary":"inherit",children:d?a.jsx(Tn,{}):a.jsx(wn,{})})})]}),n&&i!==void 0?a.jsxs(a.Fragment,{children:[a.jsx(fa,{mangaId:n.id,mangaTitle:n.title,chapterTitle:c!=null?c:"",scanlator:f}),a.jsx(_a,{})]}):a.jsx(Ut,{})]}),a.jsxs(k,{sx:{p:2,gap:2},children:[a.jsxs(k,{sx:{gap:1},children:[a.jsx(Sa,{}),a.jsx(Ra,{chapters:o,currentChapterId:i,currentChapterName:c,currentChapterNumber:u,nextChapter:g,previousChapter:h})]}),a.jsx(_s,{}),a.jsx(ya,{openSettings:t})]})]})})},Ua=ge(l.memo(za),[Ye],["setReaderNavBarWidth"]),Wa={...lr,title:""},Fa=({isVisible:e,ref:t})=>{const{t:s}=G(),r=kt({popupId:"reader-overlay-more-menu",variant:"popover"}),n=Ue(p=>p.chapters.currentChapter),o=Mt(p=>p.manga),i=lt(p=>p.scrollbar),{id:c,title:u}=o!=null?o:Wa,{id:f,name:h,realUrl:g,isBookmarked:d}=n!=null?n:Ct;return a.jsx(or,{direction:"down",in:e,ref:t,children:a.jsxs(k,{sx:{flexDirection:"row",alignItems:"center",position:"fixed",top:0,left:0,right:"".concat(i.ySize,"px"),p:2,pt:p=>"max(env(safe-area-inset-top), ".concat(p.spacing(2),")"),backgroundColor:p=>tt(p.palette.background.paper,.95),pointerEvents:"all",boxShadow:2},children:[a.jsx(ps,{}),a.jsx(k,{sx:{flexGrow:1},children:o&&n?a.jsxs(a.Fragment,{children:[a.jsx(F,{title:u,children:a.jsx(Pt,{lines:1,component:"h1",variant:"h5",children:a.jsx(Bt,{component:zt,to:ar.manga.path(c),sx:{textDecoration:"none",color:"inherit"},children:u})})}),a.jsx(F,{title:h,children:a.jsx(Pt,{lines:1,children:h})})]}):a.jsx(Ut,{})}),a.jsx(gs,{}),a.jsx(hs,{id:f,isBookmarked:d}),a.jsx(oe,{...Nt(r),color:"inherit",children:a.jsx(Mn,{})}),a.jsxs(Hs,{...Vs(r),children:[a.jsx(Et,{component:Bt,disabled:!g,href:g!=null?g:"",rel:"noreferrer",target:"_blank",children:s("global.button.open_browser")}),a.jsx(Et,{component:Bt,disabled:!g,href:g?At.getWebviewUrl(g):"",rel:"noreferrer",target:"_blank",children:s("global.button.open_webview")}),a.jsx(Et,{disabled:!g,onClick:async()=>{await navigator.clipboard.writeText(u),Kr(s("global.label.copied_clipboard"),"info")},children:s("global.label.share")})]})]})})},Ga=l.memo(Fa),$a=Ie(a.jsx("path",{d:"m21.81 12.74-.82-.63v-.22l.8-.63c.16-.12.2-.34.1-.51l-.85-1.48c-.07-.13-.21-.2-.35-.2q-.075 0-.15.03l-.95.38c-.08-.05-.11-.07-.19-.11l-.15-1.01c-.03-.21-.2-.36-.4-.36h-1.71c-.2 0-.37.15-.4.34l-.14 1.01c-.03.02-.07.03-.1.05l-.09.06-.95-.38q-.075-.03-.15-.03c-.14 0-.27.07-.35.2l-.85 1.48c-.1.17-.06.39.1.51l.8.63v.23l-.8.63c-.16.12-.2.34-.1.51l.85 1.48c.07.13.21.2.35.2q.075 0 .15-.03l.95-.37c.08.05.12.07.2.11l.15 1.01c.03.2.2.34.4.34h1.71c.2 0 .37-.15.4-.34l.15-1.01c.03-.02.07-.03.1-.05l.09-.06.95.38q.075.03.15.03c.14 0 .27-.07.35-.2l.85-1.48c.1-.17.06-.39-.1-.51M18 13.5c-.83 0-1.5-.67-1.5-1.5s.67-1.5 1.5-1.5 1.5.67 1.5 1.5-.67 1.5-1.5 1.5M17 17h2v4c0 1.1-.9 2-2 2H7c-1.1 0-2-.9-2-2V3c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2v4h-2V6H7v12h10z"})),Xa=Ie(a.jsx("path",{d:"M4 10.5c-.83 0-1.5.67-1.5 1.5s.67 1.5 1.5 1.5 1.5-.67 1.5-1.5-.67-1.5-1.5-1.5m0-6c-.83 0-1.5.67-1.5 1.5S3.17 7.5 4 7.5 5.5 6.83 5.5 6 4.83 4.5 4 4.5m0 12c-.83 0-1.5.68-1.5 1.5s.68 1.5 1.5 1.5 1.5-.68 1.5-1.5-.67-1.5-1.5-1.5M7 19h14v-2H7zm0-6h14v-2H7zm0-8v2h14V5z"})),wr=Ie(a.jsx("path",{d:"M6 6h2v12H6zm3.5 6 8.5 6V6z"})),Ar=Ie(a.jsx("path",{d:"m6 18 8.5-6L6 6zM16 6v12h2V6z"})),Ya={display:"flex",alignItems:"center",justifyContent:"end",position:"relative",backgroundColor:"background.default"},Ir="3px",Ka=l.memo(({isTrailingPage:e,pagesIndex:t,totalPages:s,isVertical:r,isHorizontal:n})=>{const o="".concat(t/(s-1)*100,"%");return a.jsx($,{sx:{position:"absolute",...S(r,{top:o,left:"50%"}),...S(n,{top:"50%",left:o}),transform:"translate(-50%, -50%)",width:Ir,height:Ir,borderRadius:100,backgroundColor:"background.paper",...S(e,{backgroundColor:"primary.main"}),zIndex:1}})}),Za=l.memo(({pageName:e,isTrailingPage:t,isCurrentPage:s,pagesIndex:r,totalPages:n,isVertical:o,isHorizontal:i})=>a.jsx(ls,{pageName:e,progressBarPosition:St.BOTTOM,slotProps:{box:{sx:Ya}},children:!s&&a.jsx(Ka,{isTrailingPage:t,pagesIndex:r,totalPages:n,isVertical:o,isHorizontal:i})})),qa={[St.BOTTOM]:"up",[St.LEFT]:"right",[St.RIGHT]:"left",[St.AUTO]:"left"},Ja=({direction:e,topOffset:t=0,bottomOffset:s=0})=>{const r=lt(w=>w.scrollbar),n=ir(w=>w.overlay.isVisible),{currentPageIndex:o,pages:i}=Ze(w=>({currentPageIndex:w.pages.currentPageIndex,pages:w.pages.pages})),{previousChapter:c,nextChapter:u}=Ue(w=>({previousChapter:w.chapters.previousChapter,nextChapter:w.chapters.nextChapter})),{progressBarPosition:f,progressBarPositionAutoVertical:h}=J(w=>({progressBarPosition:w.settings.progressBarPosition,progressBarPositionAutoVertical:w.settings.progressBarPositionAutoVertical})),{setIsMaximized:g,isDragging:d}=Wt(w=>({setIsMaximized:w.progressBar.setIsMaximized,isDragging:w.progressBar.isDragging})),[,p]=l.useState({});Fe(window.document.documentElement,l.useCallback(()=>p({}),[]));const x=ts(f,h,t+s,r.xSize),{isLeft:P,isRight:C,isVertical:m,isHorizontal:v}=Ce(x),A=v?e:"ltr",T=l.useMemo(()=>Le(o,i).pagesIndex,[o,i]),I=l.useMemo(()=>({container:{sx:{flexGrow:1,position:"relative",display:"flex",justifyItems:"center",alignItems:"stretch",backgroundColor:w=>tt(w.palette.background.paper,.85),borderRadius:100,boxShadow:2}},progressBarRoot:{sx:{flexGrow:1,gap:0,...S(m,{flexDirection:"column"}),...S(v,{alignItems:"stretch"})}},progressBarSlotsActionArea:{sx:{alignItems:"center",cursor:"pointer",...S(m,{width:"100%",flexDirection:"column",px:2}),...S(v,{height:"100%",py:2})}},progressBarSlotsContainer:{sx:{borderRadius:100,backgroundColor:"background.default",...S(m,{flexDirection:"column",py:1}),...S(v,{px:1})}},progressBarSlot:{sx:{...S(m,{width:"20px"}),...S(v,{height:"20px"})}},progressBarCurrentPageSlot:{sx:{display:"flex",zIndex:1,cursor:"inherit",...S(m,{justifyContent:"center"}),...S(v,{alignItems:"center"})}},progressBarPageTexts:{base:{sx:{...S(m,{py:1}),...S(v,{px:1})}}}}),[m,v]),E=l.useMemo(()=>({progressBarCurrentPage:a.jsx($,{sx:{position:"absolute",...S(m,{top:"calc(100% - 6px)",...S(T===0,{top:"0"}),width:"75%",height:"6px"}),...S(v,{left:"calc(100% - 0px)",...S(T===0,{left:"0"}),width:"6px",height:"75%"}),backgroundColor:"primary.main",borderRadius:100,cursor:d?"grabbing":"grab"}})}),[T,i.length,d,m,v]);return l.useLayoutEffect(()=>(g(n),()=>g(!1)),[n]),a.jsx(or,{direction:qa[x],in:n,children:a.jsx(cs,{sx:{position:"relative",display:"flex",alignItems:"end",height:"100%",pointerEvents:"none",...S(P,{justifyContent:e==="ltr"?"start":"end"}),...S(C,{justifyContent:e==="ltr"?"end":"start"})},children:a.jsxs(k,{sx:{p:2,gap:1,pointerEvents:"all",alignItems:"center",...S(m,{height:"100%",flexDirection:"column"}),...S(v,{width:"100%",flexDirection:"row"})},children:[a.jsx(oe,{onClick:()=>H.openChapter("previous"),disabled:!c,sx:{backgroundColor:w=>tt(w.palette.background.paper,.85),boxShadow:2},children:K(a.jsx(wr,{sx:{...S(m,{transform:"rotate(90deg)"})}}),a.jsx(Ar,{sx:{...S(m,{transform:"rotate(90deg)"})}}),A)}),a.jsx(is,{direction:A,progressBarPosition:x,fullSegmentClicks:!1,createProgressBarSlot:l.useCallback((w,b,O,j,V,y,M,U)=>a.jsx(Za,{pageName:w.name,isTrailingPage:M,isCurrentPage:V,pagesIndex:b,totalPages:U,isVertical:m,isHorizontal:v}),[m,v]),slotProps:{...I,progressBarReadPages:{sx:{backgroundColor:"primary.main",...S(m,{width:"20px",height:"".concat(Math.max(0,Le(o,i).pagesIndex)/(i.length-1)*100,"%"),borderRadius:"400px 400px 0 0"}),...S(v,{width:"".concat(Math.max(0,Le(o,i).pagesIndex)/(i.length-1)*100,"%"),height:"20px",borderRadius:"400px 0 0 400px"})}}},slots:E}),a.jsx(oe,{onClick:()=>H.openChapter("next"),disabled:!u,sx:{backgroundColor:w=>tt(w.palette.background.paper,.85),boxShadow:2},children:K(a.jsx(Ar,{sx:{...S(m,{transform:"rotate(90deg)"})}}),a.jsx(wr,{sx:{...S(m,{transform:"rotate(90deg)"})}}),A)})]})})})},Qa=ge(l.memo(Ja),[()=>({direction:L.useGetThemeDirection()})],["direction"]),eo=()=>{const{t:e}=G(),{isActive:t,toggleActive:s}=Ft(i=>({isActive:i.autoScroll.isActive,toggleActive:i.autoScroll.toggleActive})),{readingMode:r,readingDirection:n,autoScroll:o}=J(i=>({readingMode:i.settings.readingMode,readingDirection:i.settings.readingDirection,autoScroll:i.settings.autoScroll}));return a.jsxs(k,{sx:{gap:2},children:[a.jsx(nn,{}),a.jsx(an,{readingMode:r,setReadingMode:i=>L.updateSetting("readingMode",i),isDefaultable:!0,onDefault:()=>L.deleteSetting("readingMode")}),a.jsx(on,{readingDirection:n,setReadingDirection:i=>L.updateSetting("readingDirection",i),isDefaultable:!0,onDefault:()=>L.deleteSetting("readingDirection")}),a.jsx(zn,{label:e("reader.settings.auto_scroll.title"),checked:t,onChange:()=>s()}),a.jsx(cn,{autoScroll:o,setAutoScroll:(...i)=>L.updateSetting("autoScroll",...i)})]})},to=l.memo(eo),ro=({openSettings:e,isVisible:t,topOffset:s=0})=>{const{t:r}=G(),{currentChapterId:n,chapters:o}=Ue(d=>{var p;return{currentChapterId:(p=d.chapters.currentChapter)==null?void 0:p.id,chapters:d.chapters.chapters}}),i=kt({variant:"dialog",popupId:"reader-chapter-list-dialog"}),c=kt({variant:"dialog",popupId:"reader-quick-settings-dialog"}),u=lt(d=>d.scrollbar),[f,h]=l.useState(0),g=l.useRef(null);return Fe(g,l.useCallback(()=>{var d,p;return h((p=(d=g.current)==null?void 0:d.clientHeight)!=null?p:0)},[f])),l.useLayoutEffect(()=>{i.close()},[n]),a.jsxs(a.Fragment,{children:[a.jsxs(k,{sx:{position:"fixed",right:"".concat(u.ySize,"px"),bottom:0,left:0,height:"calc(100% - ".concat(s,"px)")},children:[a.jsx(Qa,{topOffset:s,bottomOffset:f}),a.jsx(or,{direction:"up",in:t,children:a.jsx(k,{ref:g,sx:{alignItems:"center",backgroundColor:d=>tt(d.palette.background.paper,.95),pb:"max(".concat(u.xSize,"px, env(safe-area-inset-bottom))"),boxShadow:2,pointerEvents:"all"},children:a.jsxs(k,{sx:{width:"50%",flexDirection:"row",p:2,gap:1,justifyContent:"space-evenly",alignItems:"center"},children:[a.jsx(F,{title:r("reader.button.chapter_list"),children:a.jsx(oe,{...Nt(i),color:"inherit",children:a.jsx(Xa,{})})}),a.jsx(F,{title:r("reader.settings.title.quick_settings"),children:a.jsx(oe,{...Nt(c),color:"inherit",children:a.jsx($a,{})})}),a.jsx(F,{title:r("settings.title"),children:a.jsx(oe,{onClick:e,color:"inherit",children:a.jsx(Yr,{})})})]})})})]}),i.isOpen&&a.jsx(Jt,{...xr(i),fullWidth:!0,maxWidth:"md",scroll:"paper",children:a.jsx(Qt,{sx:{p:0,pb:1},children:a.jsx(us,{style:{minHeight:"15vh",maxHeight:"75vh"},currentChapterId:n,chapters:o})})}),c.isOpen&&a.jsx(Jt,{...xr(c),fullWidth:!0,maxWidth:"md",scroll:"paper",children:a.jsx(Qt,{children:a.jsx(to,{})})})]})},so=l.memo(ro),no=({isDesktop:e,isMobile:t})=>{const s=ir(u=>u.overlay.isVisible),[r,n]=l.useState(!1),[o,i]=l.useState(0),c=l.useRef(null);return Fe(c,l.useCallback(()=>{var u,f;return i((f=(u=c.current)==null?void 0:u.clientHeight)!=null?f:0)},[t])),a.jsxs($,{sx:{position:"absolute",width:"100%",height:"100%",pointerEvents:"none",zIndex:1},children:[e&&a.jsxs(a.Fragment,{children:[a.jsx(ha,{}),a.jsx(Ua,{isVisible:s,openSettings:()=>n(!0)})]}),t&&a.jsxs(a.Fragment,{children:[a.jsx(Ga,{ref:c,isVisible:s}),a.jsx(so,{openSettings:()=>n(!0),isVisible:s,topOffset:o})]}),a.jsx(Xn,{isOpen:r,close:()=>n(!1)}),a.jsx(Kn,{})]})},ao=ge(l.memo(no),[L.useOverlayMode],["isDesktop","isMobile"]),Mr="reader-tap-zone-layout-canvas",oo=({readerNavBarWidth:e})=>{const t=st(),{tapZoneLayout:s,tapZoneInvertMode:r,readingDirection:n}=J(p=>({tapZoneLayout:p.settings.tapZoneLayout.value,tapZoneInvertMode:p.settings.tapZoneInvertMode.value,readingDirection:p.settings.readingDirection.value})),o=cr(p=>p.tapZone.showPreview),[i,c]=l.useState(0),[u,f]=l.useState(0),[h,g]=l.useState(null);Fe(h,l.useCallback(()=>{var p,x;c((p=h==null?void 0:h.clientWidth)!=null?p:0),f((x=h==null?void 0:h.clientHeight)!=null?x:0)},[h]));const d=Se.getOrCreateCanvas(s,i,u,t.typography.h3,{vertical:r.vertical,horizontal:r.horizontal,isRTL:n===ct.RTL});return l.useLayoutEffect(()=>{const p=document.getElementById(Mr);p==null||p.replaceChildren(d)},[d,o]),a.jsx($,{ref:g,sx:{position:"fixed",top:0,left:e,right:0,bottom:0,pointerEvents:"none"},children:o&&a.jsx("div",{id:Mr})})},io=ge(oo,[Ye],["readerNavBarWidth"]),co=({readerNavBarWidth:e})=>{const{value:{red:t,green:s,blue:r,alpha:n,blendMode:o},enabled:i}=J(c=>c.settings.customFilter.rgba);return i?a.jsx($,{sx:{position:"fixed",top:0,left:e,right:0,bottom:0,pointerEvents:"none",background:"rgba(".concat(t," ").concat(s," ").concat(r," / ").concat(n,"%)"),mixBlendMode:"".concat(o)}}):null},lo=ge(co,[Ye],["readerNavBarWidth"]),Or=2,xt=0,ee=0,te=1,uo=(e,t=Ae.XY)=>{const[s,r]=l.useState(!1),n=l.useRef(void 0),o=l.useRef([0,0,0]),i=l.useRef([0,0,0]),c=l.useRef([0,0,0]),u=l.useRef([0,0]),f=l.useRef(void 0),h=l.useRef([0,0]),g=l.useRef([0,0]);return l.useEffect(()=>{const d=e==null?void 0:e.current;if(!d)return()=>{};const p=()=>{n.current||(n.current=getComputedStyle(d));const b=n.current.direction==="rtl",O=n.current.flexDirection==="row-reverse";return b||!b&&O},x=()=>(n.current||(n.current=getComputedStyle(d)),n.current.flexDirection==="column-reverse"),P=t!==Ae.Y,C=t!==Ae.X,m=()=>{f.current!==void 0&&(cancelAnimationFrame(f.current),f.current=void 0)},v=()=>{const b=(Re,ae,Oe)=>(Re[xt]-Re[Or])/(ae[xt]-ae[Or])*1e3/Oe,O=[P?b(o.current,c.current,d.clientWidth):0,C?b(i.current,c.current,d.clientHeight):0],j=P&&C?Math.sqrt(O[ee]**2+O[te]**2):Math.abs(C?O[te]:O[ee]),V=[O[ee]/j,O[te]/j],y=it(1.2*j,-12,12),M=(Date.now()-c.current[xt])/1e3,U=y-14.278*M+75.24*M**2/y-149.72*M**3/y/y;if(!(y!==0&&U>0&&!Number.isNaN(y))){m();return}const ne=(Re,ae)=>Re*ae*(y*M-7.1397*M**2+25.08*M**3/y-37.43*M**4/y/y),he=[ne(d.clientWidth,V[ee]),ne(d.clientHeight,V[te])],Z=[d.scrollWidth-d.clientWidth,d.scrollHeight-d.clientHeight],N=[it(u.current[ee]-he[ee],p()?-Z[ee]:0,Z[ee]),it(u.current[te]-he[te],x()?-Z[te]:0,Z[te])],B=N[ee]!==0||N[ee]!==Z[ee],be=N[te]!==0||N[te]!==Z[te];B||be||m(),P&&(d.scrollLeft=N[ee]),C&&(d.scrollTop=N[te])};let A=!1;const T=b=>{if(A)return!0;const O=[d.clientHeight<d.scrollHeight,d.clientWidth<d.scrollWidth],j=[Math.abs(o.current[xt]-b.pageX)>0,Math.abs(i.current[xt]-b.pageY)>0];return O[ee]&&j[ee]||O[te]&&j[te]},I=b=>{T(b)&&(A=!0,r(!0),o.current=[...o.current.slice(1),b.pageX],i.current=[...i.current.slice(1),b.pageY],c.current=[...c.current.slice(1),Date.now()],P&&(d.scrollLeft=g.current[ee]-(b.pageX-h.current[ee])),C&&(d.scrollTop=g.current[te]-(b.pageY-h.current[te])))},E=()=>{d.removeEventListener("mousemove",I),d.removeEventListener("mouseup",E),setTimeout(()=>{A=!1,r(!1)},0),u.current=[d.scrollLeft,d.scrollTop];const b=()=>{v(),f.current=requestAnimationFrame(b)};f.current=requestAnimationFrame(b)},w=b=>{b.button===0&&(b.preventDefault(),h.current=[b.pageX,b.pageY],g.current=[d.scrollLeft,d.scrollTop],o.current=[b.pageX,b.pageX,b.pageX],i.current=[b.pageY,b.pageY,b.pageY],c.current=[Date.now()-2,Date.now()-1,Date.now()],d.addEventListener("mousemove",I,{passive:!0}),d.addEventListener("mouseup",E),m())};return d.addEventListener("mousedown",w),d.addEventListener("wheel",m,{passive:!0}),()=>{d.removeEventListener("mousedown",w),d.removeEventListener("wheel",m),m()}},[e,t]),s},go=(e,t,s,r,n)=>{l.useEffect(()=>{if(e&&!n){s();return}r()},[e,t,n])},ho=(e,t,s,r)=>{l.useEffect(()=>{var o,i;const n=()=>{e&&Ve().setIsVisible(!1),t&&s(!1)};return(o=r.current)==null||o.addEventListener("wheel",n,{passive:!0}),(i=r.current)==null||i.addEventListener("touchmove",n,{passive:!0}),()=>{var c,u;(c=r.current)==null||c.removeEventListener("wheel",n),(u=r.current)==null||u.removeEventListener("touchmove",n)}},[e,t])},po=(e,t,s)=>{l.useEffect(()=>{const r=s.current;if(e!==z.CONTINUOUS_HORIZONTAL)return()=>{};if(!r)return()=>{};const n=o=>{if(!(Math.abs(o.deltaX)>Math.abs(o.deltaY)||zs.isTrackPadLike())){if(o.preventDefault(),o.shiftKey){r.scrollBy({top:o.deltaY});return}r.scrollBy({left:t===ct.LTR?o.deltaY:o.deltaY*-1})}};return r.addEventListener("wheel",n),()=>r.removeEventListener("wheel",n)},[e,t])},fo=e=>{const t=l.useRef(void 0);l.useEffect(()=>{const s=n=>{const o=e.current;o&&(o.style.cursor=n?"default":"none")},r=()=>{s(!0),clearTimeout(t.current),t.current=setTimeout(()=>{s(!1)},Vt(5).seconds.inWholeMilliseconds)};return r(),window.addEventListener("mousemove",r,{passive:!0}),()=>{s(!0),window.removeEventListener("mousemove",r),clearTimeout(t.current)}},[])},xo=(e,t,s,r,n)=>{l.useLayoutEffect(()=>{var o;t||(o=n.current)==null||o.scrollTo(ln(n.current,s,r),0)},[e])},mo=(e,t,s,r,n,o,i,c,u)=>{l.useLayoutEffect(()=>{if(e==null)return;const f=Le(e,t);if(o){const d=i.current[f.pagesIndex];d==null||d.scrollIntoView({block:"start",inline:un(c,u)})}const h=ce(f),g=h===s-1;r(null),n(h,!g,g)},[e])},vo=(e,t,s,r,n,o,i)=>{const[c,u]=l.useState(i===z.DOUBLE_PAGE);l.useLayoutEffect(()=>{if(c&&i!==z.DOUBLE_PAGE){u(!1);const g=rs(s);r(g),n(g.map(({primary:{url:d}})=>({url:d,isSpread:!1})));return}i===z.DOUBLE_PAGE&&(c||o(ce(Le(e,t))),r(t),u(i===z.DOUBLE_PAGE))},[t,i])},Zt=({title:e,name:t,scanlator:s,backgroundColor:r})=>{const n=st(),o=n.palette.getContrastText(Ws(n.palette,Zr[r])),i=tt(o,.5);return t?a.jsxs(k,{children:[a.jsx(et,{color:o,children:e}),a.jsx(et,{color:o,variant:"h6",component:"h1",children:t}),s&&a.jsx(et,{variant:"body2",color:i,children:s})]}):null},So=({type:e,currentChapterName:t,currentChapterScanlator:s,previousChapterName:r,previousChapterScanlator:n,nextChapterName:o,nextChapterScanlator:i,readerNavBarWidth:c,handleBack:u})=>{var w;const{t:f}=G(),h=Mt(b=>b.manga),g=lt(b=>b.scrollbar),d=Ze(b=>b.pages.transitionPageMode),{readingMode:p,backgroundColor:x,shouldShowTransitionPage:P}=J(b=>({readingMode:b.settings.readingMode.value,backgroundColor:b.settings.backgroundColor,shouldShowTransitionPage:b.settings.shouldShowTransitionPage})),C=e===le.PREVIOUS,m=e===le.NEXT,v=!!t&&!r,A=!!t&&!o,T=v&&e===le.PREVIOUS,I=A&&e===le.NEXT;return!P&&!(T||I)||!dn(e,d,p)?null:a.jsx(k,{sx:{justifyContent:"center",alignItems:"center",...S(!de(p),{width:"100%",height:"100%"}),...S(de(p),{position:"sticky",...S(We(p),{left:0,maxWidth:"calc(100vw - ".concat(g.ySize,"px - ").concat(c,"px)"),minHeight:"calc(100vh - ".concat(g.xSize,"px)")}),...S(p===z.CONTINUOUS_HORIZONTAL,{top:0,minWidth:"calc(100vw - ".concat(g.ySize,"px - ").concat(c,"px)"),maxHeight:"calc(100vh - ".concat(g.xSize,"px)")})})},children:a.jsxs(k,{sx:{gap:2,maxWidth:b=>"calc(100vw - ".concat(g.ySize,"px - ").concat(c,"px - ").concat(b.spacing(2),")"),maxHeight:"calc(100vh - ".concat(g.xSize,"px)"),width:"max-content",p:1},children:[C&&v&&a.jsx(et,{variant:"h6",children:f("reader.transition_page.first_chapter")}),a.jsxs(k,{sx:{gap:5},children:[C&&!v&&a.jsx(Zt,{title:f("reader.transition_page.previous"),name:r,scanlator:n,backgroundColor:x}),!!t&&a.jsx(Zt,{title:f(C?"reader.transition_page.current":"reader.transition_page.finished"),name:t,scanlator:s,backgroundColor:x}),m&&!A&&a.jsx(Zt,{title:f("reader.transition_page.next"),name:o,scanlator:i,backgroundColor:x})]}),m&&A&&a.jsx(et,{variant:"h6",children:f("reader.transition_page.last_chapter")}),(C&&v||m&&A)&&a.jsxs(k,{sx:{flexDirection:"row",flexWrap:"wrap",gap:1},children:[a.jsx(rt,{sx:{flexGrow:1},onClick:b=>{b.stopPropagation(),u()},variant:"contained",children:f("reader.transition_page.exit.previous_page")}),a.jsx(rt,{sx:{flexGrow:1},component:zt,onClick:b=>{b.stopPropagation()},variant:"contained",to:ar.manga.path((w=h==null?void 0:h.id)!=null?w:-1),children:f("reader.transition_page.exit.manga_page")})]})]})})},jr=ge(l.memo(So),[({chapterId:e})=>{const t=Ue(i=>i.chapters.chapters),s=l.useMemo(()=>t.findIndex(i=>i.id===e),[e,t]),r=t[s],n=l.useMemo(()=>t[s+1],[s,t]),o=l.useMemo(()=>t[s-1],[s,t]);return{currentChapterName:r==null?void 0:r.name,currentChapterScanlator:r==null?void 0:r.scanlator,previousChapterName:n==null?void 0:n.name,previousChapterScanlator:n==null?void 0:n.name,nextChapterName:o==null?void 0:o.name,nextChapterScanlator:o==null?void 0:o.scanlator}},Ye,({chapterId:e,type:t})=>{const s=Us(),r=Ue(h=>h.chapters.chapters),n=l.useMemo(()=>r.findIndex(h=>h.id===e),[e,r]),o=n===0,i=n===r.length-1,c=t===le.PREVIOUS&&i,u=t===le.NEXT&&o;return{handleBack:c||u?s:_e}}],["currentChapterName","currentChapterScanlator","previousChapterName","previousChapterScanlator","nextChapterName","nextChapterScanlator","readerNavBarWidth","handleBack"]),Co=(e,t,s,r,n,o,i,c,u,f,h,g,d,p,x,P,C,m)=>{var A,T;const v=l.useRef(void 0);l.useLayoutEffect(()=>{var V;const I=(V=t.data)==null?void 0:V.fetchChapterPages;if(!I)return;const{pages:E}=I,b=(E.length?E:[""]).map(y=>{var M;return Fs.addParams(y,{sourceId:(M=It().manga)==null?void 0:M.sourceId})}),O=gn(s,r!=null?r:0,b.length-1),j=v.current!==(I==null?void 0:I.pages);if(j){v.current=I.pages;const y=rs(b);u(!0),g(y),d(b),p(y.map(({primary:{url:M}})=>({url:M,loaded:!1}))),x(y.map(({primary:{url:M}})=>({url:M,isSpread:!1})))}else g(n),p(o),x(i);h(I.pages.length),d(b),P(O),C(O),f(y=>({...y,isCurrentChapterReady:c||j})),m(le.NONE)},[(T=(A=t.data)==null?void 0:A.fetchChapterPages)==null?void 0:T.pages,e])},Dr=0,yt="-10px",bo=(e,t,s)=>{if(!de(t))return;const r=Rt[s],n="0px ".concat(yt," 0px 0px"),o="0px 0px 0px ".concat(yt);return We(t)?e==="first"?"0px 0px ".concat(yt," 0px"):"".concat(yt," 0px 0px 0px"):e==="first"?K(n,o,r):K(o,n,r)},Ro=(e,t,s,r)=>e===ct.LTR?{start:s>=r,end:t<0}:{start:t<0,end:s>=r},Po=(e,{top:t,right:s,bottom:r,left:n},o,i)=>{const c=window.innerWidth-i,u=window.innerHeight-o;return{[z.CONTINUOUS_VERTICAL]:{start:r>=u,end:t<0},[z.CONTINUOUS_HORIZONTAL]:Ro(e,n,s,c)}},Eo=({[z.CONTINUOUS_VERTICAL]:e,[z.CONTINUOUS_HORIZONTAL]:t},s)=>We(s)?e.start||e.end:t.start||t.end,To=({[z.CONTINUOUS_VERTICAL]:e,[z.CONTINUOUS_HORIZONTAL]:t},s)=>We(s)?e:t,yr=(e,t,s,r,n,o,i)=>{const{readingMode:c,readingDirection:u,shouldUseInfiniteScroll:f,shouldShowTransitionPage:h}=J(g=>({readingMode:g.settings.readingMode.value,readingDirection:g.settings.readingDirection.value,shouldUseInfiniteScroll:g.settings.shouldUseInfiniteScroll,shouldShowTransitionPage:g.settings.shouldShowTransitionPage}));l.useEffect(()=>{const g=de(c),d=We(c);if(h||!i||!g||!f||!r||n||s===void 0)return()=>{};const p=()=>{const x=i.scrollLeft===0,P=i.scrollLeft===i.scrollWidth-i.clientWidth,C=i.scrollTop===0,m=i.scrollTop===i.scrollHeight-i.clientHeight;(e==="first"&&(d?C:x)||e==="last"&&(d?m:P))&&H.openChapter(s,void 0,!1)};return i.addEventListener("scroll",p,{passive:!0}),()=>i.removeEventListener("scroll",p)},[c,i,h,f,r,n,s]),Un(o,l.useCallback(g=>{if(!f||!de(c)||s===void 0||!h&&!n)return;const d=g[g.length-1],p=Po(u,d.target.getBoundingClientRect(),br().xSize,br().ySize),{start:x,end:P}=To(p,c),C=d.intersectionRatio<=Dr;if(!Eo(p,c))return;const m=e==="first"&&x&&!n,v=e==="last"&&!r&&P;if(m||e==="last"&&P&&C){H.openChapter(s,!n,!1);return}v&&H.openChapter(t,!1,!1)},[e,t,s,r,n,c,u,f,h]),l.useMemo(()=>({root:i,threshold:[Dr],rootMargin:bo(e,c,u),ignoreInitialObserve:!0}),[e,c,u]))},wo=({chapterId:e,previousChapterId:t,nextChapterId:s,isPreviousChapterVisible:r,isCurrentChapter:n,isNextChapterVisible:o,imageWrapper:i,scrollElement:c})=>(yr("first",e,t,n,r,i,c),yr("last",e,s,n,o,i,c),null),Ao=l.memo(wo),Io=({currentPageIndex:e,setPages:t,setPageLoadStates:s,setTotalPages:r,setCurrentPageIndex:n,updateCurrentPageIndex:o,setPageToScrollToIndex:i,transitionPageMode:c,retryFailedPagesKeyPrefix:u,setTransitionPageMode:f,readingMode:h,readerWidth:g,pageScaleMode:d,shouldOffsetDoubleSpreads:p,readingDirection:x,imagePreLoadAmount:P,pageGap:C,chapterId:m,previousChapterId:v,nextChapterId:A,isPreviousChapterVisible:T,isNextChapterVisible:I,lastPageRead:E,isInitialChapter:w,isCurrentChapter:b,isPreviousChapter:O,isNextChapter:j,isLeadingChapter:V,isTrailingChapter:y,isPreloadMode:M,imageRefs:U,scrollIntoView:se,resumeMode:ne,customFilter:he,shouldStretchPage:Z,readerNavBarWidth:N,onSizeChange:B,minWidth:be,minHeight:Me,scrollElement:Re})=>{const{t:ae}=G(),{direction:Oe}=st(),[Ge,Pe]=At.useGetChapterPagesFetch(m!=null?m:-1),[Ee,Be]=l.useState(!1),[xe,$e]=l.useState(Dt.totalPages),[qe,nt]=l.useState(Dt.pageUrls),[je,Te]=l.useState(Dt.pages),[X,De]=l.useState(Dt.pageLoadStates),[ke,Ne]=l.useState(X.map(({url:D})=>({url:D,isSpread:!1}))),R=l.useRef(null),Y=l.useRef(b),pe=l.useRef(je.map(()=>null)),W=l.useRef(null),me=l.useMemo(()=>!!!xe||!(xe===ke.length)?je:h===z.DOUBLE_PAGE?hn(qe,ke,p,x):je,[ke,h,p,x,xe]),Je=l.useMemo(()=>pn(h),[h]),ut=x===ct.LTR,we=de(h),Xe=!we&&!b||M,Ot=!we&&b,dt=!Xe&&(Ot||we&&(w||V)),gt=!Xe&&(Ot||we&&(w||y));Y.current=b,b&&(U.current=pe.current);const ht=l.useCallback(()=>{m&&(Be(!1),Ge({variables:{input:{chapterId:m}}}).catch(bt()))},[Ge,m]),Gt=l.useMemo(()=>fn(me,Ne,D=>{Y.current&&s(D),De(D)},h),[me,h]),$t=l.useMemo(()=>xn(D=>{Y.current&&s(D),De(D)}),[]);l.useEffect(()=>{ht()},[m]),Fe(R,l.useCallback(D=>{const{clientWidth:ye,clientHeight:at}=D[0].target;B(ye,at,m)},[B,R.current,m]));const ie=(D,ye,at,jt=!1)=>{(jt||!Ee)&&ye(D),b&&at(D)};return Co(b,Pe,ne,E,me,X,ke,Ee,Be,D=>ie(D,_e,Qe().setReaderStateChapters),D=>ie(D,$e,r),D=>ie(D,Te,t),D=>ie(D,nt,_e),D=>ie(D,De,s),D=>ie(D,Ne,_e),D=>ie(D,_e,n),D=>{(w&&!Ee||se)&&(i(D),Qe().setReaderStateChapters(ye=>({...ye,visibleChapters:{...ye.visibleChapters,scrollIntoView:!1,resumeMode:void 0}})))},D=>ie(D,_e,f)),vo(e,me,qe,D=>ie(D,Te,t,!0),D=>ie(D,Ne,_e,!0),D=>ie(D,_e,o),h),we||b||O||j?Pe.error?Xe?null:a.jsx($,{sx:{minHeight:"100%",minWidth:"100%",display:"grid",placeItems:"center",position:"relative"},children:a.jsx(_t,{message:ae("global.error.label.failed_to_load_data"),messageExtra:qr(Pe.error),retry:()=>{ht()}})}):Pe.loading||!Ee?Xe?null:a.jsx($,{sx:{minHeight:"100%",minWidth:"100%",display:"grid",placeItems:"center"},children:a.jsx(Ut,{})}):m!=null&&!xe?Xe?null:a.jsx($,{sx:{minWidth:"100%",minHeight:"100%",position:"relative"},children:a.jsx(_t,{message:ae("reader.error.label.no_pages_found"),retry:ht})}):a.jsxs(k,{ref:R,sx:{width:"fit-content",height:"fit-content",margin:"auto",flexWrap:"nowrap",...S(h===z.CONTINUOUS_HORIZONTAL,{minHeight:Me}),...S(We(h),{minWidth:be}),...S(Xe,{maxWidth:0,maxHeight:0,minWidth:"unset",minHeight:"unset",overflow:"hidden",margin:"unset"}),...S(We(h)&&ss(g,d),{alignItems:"center"}),...S(h===z.CONTINUOUS_HORIZONTAL,{...S(Oe==="ltr",{flexDirection:ut?"row":"row-reverse"}),...S(Oe==="rtl",{flexDirection:ut?"row-reverse":"row"})})},children:[!M&&a.jsx(Ao,{chapterId:m,previousChapterId:v,nextChapterId:A,isCurrentChapter:b,isPreviousChapterVisible:T,isNextChapterVisible:I,imageWrapper:W.current,scrollElement:Re}),dt&&a.jsx(jr,{chapterId:m,type:le.PREVIOUS}),a.jsx(Je,{ref:W,totalPages:xe,currentPageIndex:e,pages:me,transitionPageMode:c,pageLoadStates:X,retryFailedPagesKeyPrefix:u,imageRefs:pe,onLoad:Gt,onError:$t,isCurrentChapter:b,isPreviousChapter:O,isNextChapter:j,readingMode:h,imagePreLoadAmount:P,readingDirection:x,pageScaleMode:d,pageGap:C,customFilter:he,shouldStretchPage:Z,readerWidth:g,readerNavBarWidth:N,isPreloadMode:M,resumeMode:ne,handleAsInitialRender:se}),gt&&a.jsx(jr,{chapterId:m,type:le.NEXT})]}):null},Mo=l.memo(Io),Oo=(e,t,s,r)=>{if(!de(e))return!1;const n=mn(t),o=vn(t),i=s!==window.innerWidth,c=r!==window.innerHeight;return n&&i||o&&c},mt=(e,t,s)=>{l.useLayoutEffect(()=>{s(t)},[e])},jo=(e,t,s,r)=>{const n=l.useRef({width:window.innerWidth,height:window.innerHeight}),o=l.useRef(!1),i=l.useRef(void 0),c=l.useRef(null),u=l.useCallback(()=>{const{width:f,height:h}=n.current;n.current={width:window.innerWidth,height:window.innerHeight},o.current||(o.current=!0,c.current=r),Oo(e,t,f,h)&&(s(c.current),clearTimeout(i.current),i.current=setTimeout(()=>{o.current=!1,c.current=null},50))},[e,t,r]);Wn("resize",u)},fs=e=>{const t=l.useRef({left:0,top:0,visibleElement:void 0,visibleElementLeft:0,visibleElementTop:0});return l.useEffect(()=>{const s=e.current;if(!s)return()=>{};const r=()=>{var o,i;const{visibleElement:n}=t.current;t.current={...t.current,left:s.scrollLeft,top:s.scrollTop,visibleElementLeft:(o=n==null?void 0:n.offsetLeft)!=null?o:0,visibleElementTop:(i=n==null?void 0:n.offsetTop)!=null?i:0}};return s.addEventListener("scroll",r,{passive:!0}),()=>s.removeEventListener("scroll",r)},[]),l.useEffect(()=>{const s=e.current;if(!s)return()=>{};const r=(i,c)=>Array.from(i).filter(u=>u instanceof HTMLElement).flatMap(u=>u instanceof HTMLImageElement?[u]:Array.from(u.querySelectorAll("img"))).forEach(c),n=new IntersectionObserver(i=>{const c=i.find(u=>u.isIntersecting);(c==null?void 0:c.target)instanceof HTMLElement&&(t.current={...t.current,visibleElement:c.target,visibleElementLeft:c.target.offsetLeft,visibleElementTop:c.target.offsetTop})}),o=new MutationObserver(i=>{for(const c of i)r(c.addedNodes,u=>n.observe(u)),r(c.removedNodes,u=>n.unobserve(u))});return o.observe(s,{childList:!0,subtree:!0}),()=>{o.disconnect(),n.disconnect()}},[]),t},Do=(e,t)=>{const s=fs(e),r=de(t),n=We(t);l.useEffect(()=>{const o=e.current;if(!o||!r)return()=>{};const i=h=>{const{left:g,top:d,visibleElement:p,visibleElementLeft:x,visibleElementTop:P}=s.current;if(!p||!!!h.filter(T=>!(T.target instanceof HTMLElement)||!T.target.clientWidth&&!T.target.clientHeight?!1:n?T.target.offsetTop<d:Math.abs(T.target.offsetLeft)<Math.abs(g)).length)return;const v=g-x+p.offsetLeft,A=d-P+p.offsetTop;o.scrollTo(v,A)},c=(h,g)=>Array.from(h).filter(d=>d instanceof HTMLElement).flatMap(d=>d instanceof HTMLImageElement?[d]:Array.from(d.querySelectorAll("img"))).forEach(g),u=new ResizeObserver(i),f=new MutationObserver(h=>{for(const g of h)c(g.addedNodes,d=>u.observe(d)),c(g.removedNodes,d=>u.unobserve(d))});return f.observe(o,{childList:!0,subtree:!0}),()=>{f.disconnect(),u.disconnect()}},[r,n])},yo=(e,t,s,r,n,o,i)=>{const c=fs(e),u=()=>{const f=e.current,{left:h,top:g,visibleElementLeft:d,visibleElementTop:p,visibleElement:x}=c.current;if(!f||!i||!x)return!1;const P=ns(s,n,o),C=r===0;if(!(!P.previous&&C))return!1;const v=h-d+x.offsetLeft,A=g-p+x.offsetTop;return f.scrollTo(v,A),!0};l.useEffect(()=>{const f=e.current;if(!f||!i)return()=>{};let h=!1;const g=(x,P)=>{Array.from(x).filter(C=>C instanceof HTMLElement).flatMap(C=>C instanceof HTMLImageElement?[C]:Array.from(C.querySelectorAll("img"))).forEach(P)},d=new ResizeObserver(()=>{h||(h=u(),h&&d.disconnect())}),p=new MutationObserver(x=>{for(const P of x)g(P.addedNodes,C=>d.observe(C)),g(P.removedNodes,C=>d.unobserve(C))});return p.observe(f,{childList:!0,subtree:!0}),()=>{p.disconnect(),d.disconnect()}},[t]),l.useLayoutEffect(()=>{u()},[t])},Lo=(e,t,s,r,n,o,i,c,u,f,h,g)=>{yo(e,t,s,r,n,o,de(i)),Do(e,i),jo(i,f,u,r),mt(c,r,u),mt(i,r,u),mt(f,r,u),mt(h,r,u),mt("".concat(g.value,"_").concat(g.enabled),r,u)},Bo={[z.SINGLE_PAGE]:ft.X,[z.DOUBLE_PAGE]:ft.X,[z.CONTINUOUS_VERTICAL]:ft.Y,[z.CONTINUOUS_HORIZONTAL]:ft.X,[z.WEBTOON]:ft.Y},ko=({readerNavBarWidth:e,updateCurrentPageIndex:t,ref:s})=>{var Ne;const{direction:r}=st(),n=ir(R=>R.overlay.isVisible),{currentPageIndex:o,pageToScrollToIndex:i,setPageToScrollToIndex:c,pages:u,totalPages:f,setPages:h,setPageLoadStates:g,setTotalPages:d,setCurrentPageIndex:p,transitionPageMode:x,retryFailedPagesKeyPrefix:P,setTransitionPageMode:C}=Ze(R=>({currentPageIndex:R.pages.currentPageIndex,pageToScrollToIndex:R.pages.pageToScrollToIndex,setPageToScrollToIndex:R.pages.setPageToScrollToIndex,pages:R.pages.pages,totalPages:R.pages.totalPages,setPages:R.pages.setPages,setPageLoadStates:R.pages.setPageLoadStates,setTotalPages:R.pages.setTotalPages,setCurrentPageIndex:R.pages.setCurrentPageIndex,transitionPageMode:R.pages.transitionPageMode,retryFailedPagesKeyPrefix:R.pages.retryFailedPagesKeyPrefix,setTransitionPageMode:R.pages.setTransitionPageMode})),{initialChapter:m,currentChapter:v,chapters:A,visibleChapters:T,isCurrentChapterReady:I}=Ue(R=>({initialChapter:R.chapters.initialChapter,currentChapter:R.chapters.currentChapter,chapters:R.chapters.chapters,visibleChapters:R.chapters.visibleChapters,setReaderStateChapters:R.chapters.setReaderStateChapters,isCurrentChapterReady:R.chapters.isCurrentChapterReady})),{readingMode:E,readingDirection:w,readerWidth:b,pageScaleMode:O,shouldOffsetDoubleSpreads:j,imagePreLoadAmount:V,pageGap:y,customFilter:M,shouldStretchPage:U,isStaticNav:se}=J(R=>({readingMode:R.settings.readingMode.value,readingDirection:R.settings.readingDirection.value,readerWidth:R.settings.readerWidth.value,pageScaleMode:R.settings.pageScaleMode.value,shouldOffsetDoubleSpreads:R.settings.shouldOffsetDoubleSpreads.value,imagePreLoadAmount:R.settings.imagePreLoadAmount,pageGap:R.settings.pageGap.value,customFilter:R.settings.customFilter,shouldStretchPage:R.settings.shouldStretchPage.value,isStaticNav:R.settings.isStaticNav})),{showPreview:ne,setShowPreview:he}=cr(R=>({showPreview:R.tapZone.showPreview,setShowPreview:R.tapZone.setShowPreview})),{resumeMode:Z=mr.START}=(Ne=Jr().state)!=null?Ne:{resumeMode:mr.START},N=l.useRef(null),B=Fn(s,N),be=We(E),Me=de(E),Re=uo(N),ae=Ft(R=>({isPaused:R.autoScroll.isPaused,pause:R.autoScroll.pause,resume:R.autoScroll.resume,setScrollRef:R.autoScroll.setScrollRef}));l.useEffect(()=>ae.setScrollRef(N.current),[]);const Oe=vr.useGetScrollbarSize("width",N.current),Ge=vr.useGetScrollbarSize("height",N.current);l.useLayoutEffect(()=>{const{scrollbar:R}=It();R.setXSize(Oe),R.setYSize(Ge)},[Oe,Ge]);const Pe=l.useRef(u.map(()=>null)),[{minChapterViewWidth:Ee,minChapterViewHeight:Be,minChapterSizeSourceChapterId:xe},$e]=l.useState({minChapterViewWidth:0,minChapterViewHeight:0,minChapterSizeSourceChapterId:-1}),[,qe]=l.useState({}),nt=Bo[E],je=w===ct.LTR,Te=l.useMemo(()=>A.findIndex(R=>R.id===(m==null?void 0:m.id)),[A,m==null?void 0:m.id]),X=l.useMemo(()=>A.slice(Math.max(0,Te-T.trailing),Math.min(A.length,Te+T.leading+1)),[A,Te,T.trailing,T.leading]),De=l.useMemo(()=>X.findIndex(R=>R.id===(v==null?void 0:v.id)),[v,X]),ke=l.useCallback((R,Y,pe)=>{if(!Me)return;const W=pe===xe;if(be){if(!W&&Ee>=R)return;$e({minChapterViewWidth:R,minChapterViewHeight:0,minChapterSizeSourceChapterId:pe});return}(W||Be<Y)&&$e({minChapterViewWidth:0,minChapterViewHeight:Y,minChapterSizeSourceChapterId:pe})},[Me,be,Ee,Be,xe]);if(mo(i,u,f,c,t,Me,Pe,r,w),xo(o,Me,r,w,N),fo(N),po(E,w,N),ho(n,ne,he,N),go(n,ae.isPaused,ae.pause,ae.resume,se),Lo(N,v==null?void 0:v.id,De,o,X,T,E,w,c,O,U,b),l.useLayoutEffect(()=>{$e({minChapterViewWidth:0,minChapterViewHeight:0,minChapterSizeSourceChapterId:-1}),qe({})},[E]),!m||!v)throw new Error("ReaderViewer: illegal state - initialChapter and currentChapter should not be undefined");return a.jsx(k,{ref:B,sx:{width:"100%",height:"100%",overflow:"auto",flexWrap:"nowrap",...S(be&&ss(b,O),{alignItems:"center"}),...S(!be,{...S(r==="ltr",{flexDirection:je?"row":"row-reverse"}),...S(r==="rtl",{flexDirection:je?"row-reverse":"row"})})},onClick:R=>!Re&&H.handleClick(N.current,R),onScroll:()=>H.updateCurrentPageOnScroll(Pe,f-1,t,nt,w),children:X.map((R,Y)=>{var D,ye,at,jt;const pe=Math.max(0,X.length-Y-1),W=X[pe],me=(D=X[pe+1])!=null?D:A[Te+T.leading+1],Je=(ye=X[pe-1])!=null?ye:A[Te-T.trailing-1],ut=W.id===m.id,we=W.id===v.id,Xe=W.id===((at=X[De+1])==null?void 0:at.id),Ot=W.id===((jt=X[De-1])==null?void 0:jt.id),dt=m.sourceOrder>W.sourceOrder,gt=m.sourceOrder<W.sourceOrder,ht=T.lastLeadingChapterSourceOrder===W.sourceOrder,Gt=T.lastTrailingChapterSourceOrder===W.sourceOrder,$t=ht&&T.isLeadingChapterPreloadMode||Gt&&T.isTrailingChapterPreloadMode,ie=ns(pe,X,T),Xt=W.id===xe;return a.jsx(Mo,{chapterId:W.id,previousChapterId:me==null?void 0:me.id,nextChapterId:Je==null?void 0:Je.id,isPreviousChapterVisible:ie.previous,isNextChapterVisible:ie.next,lastPageRead:it(W.lastPageRead,0,W.pageCount-1),currentPageIndex:Cn(o,W,v,we,I,dt,gt,T),isInitialChapter:ut,isCurrentChapter:we,isPreviousChapter:Xe,isNextChapter:Ot,isLeadingChapter:dt,isTrailingChapter:gt,isPreloadMode:$t,imageRefs:Pe,setPages:h,setPageLoadStates:g,setTotalPages:d,setCurrentPageIndex:p,setPageToScrollToIndex:c,transitionPageMode:x,retryFailedPagesKeyPrefix:P,readingMode:E,readerWidth:b,pageScaleMode:O,shouldOffsetDoubleSpreads:j,readingDirection:w,updateCurrentPageIndex:we?t:_e,scrollIntoView:we&&T.scrollIntoView,resumeMode:Sn(we,ut,dt,gt,T.resumeMode,Z),setTransitionPageMode:C,pageGap:y,imagePreLoadAmount:V,customFilter:M,shouldStretchPage:U,readerNavBarWidth:e,onSizeChange:ke,minWidth:Xt?0:Ee,minHeight:Xt?0:Be,scrollElement:N.current},W.id)})})},No=ge(l.memo(ko),[()=>({updateCurrentPageIndex:H.useUpdateCurrentPageIndex()}),Ye],["readerNavBarWidth","updateCurrentPageIndex"]),_o=Object.fromEntries(Object.values(wt).map(e=>[e,{scopes:e}])),re=(...e)=>{const[t,s,r,n]=e;return Gs(t,s,{preventDefault:!0,...r,..._o.reader},n)},qt=(e,t,s,r,n)=>{if(r){L.updateSetting(e,s[0]);return}const o=ds(s.indexOf(t),s,n);if(o===void 0){L.deleteSetting(e);return}L.updateSetting(e,o)},Ho=({scrollElementRef:e})=>{const t=L.useGetThemeDirection(),{enableScope:s,disableScope:r}=_r(),{hotkeys:n}=J(i=>({hotkeys:i.settings.hotkeys})),o=L.useExit();return re(n[Q.PREVIOUS_PAGE],()=>H.openPage("previous")),re(n[Q.NEXT_PAGE],()=>H.openPage("next")),re(n[Q.SCROLL_BACKWARD],()=>{const i=Lt(),{readingMode:c,readingDirection:u,scrollAmount:f}=q();if(i.isActive){i.setDirection(ue.BACKWARD);return}e.current&&H.scroll(ue.BACKWARD,rr[c.value],c.value,u.value,e.current,Tt().setShowPreview,f)}),re(n[Q.SCROLL_FORWARD],()=>{const i=Lt(),{readingMode:c,readingDirection:u,scrollAmount:f}=q();if(i.isActive){i.setDirection(ue.FORWARD);return}e.current&&H.scroll(ue.FORWARD,rr[c.value],c.value,u.value,e.current,Tt().setShowPreview,f)}),re(n[Q.PREVIOUS_CHAPTER],()=>H.openChapter(K("previous","next",t)),[t]),re(n[Q.NEXT_CHAPTER],()=>H.openChapter(K("next","previous",t)),[t]),re(n[Q.TOGGLE_MENU],()=>Ve().setIsVisible(!Ve().isVisible)),re(n[Q.CYCLE_SCALE_TYPE],()=>{qt("pageScaleMode",q().pageScaleMode.value,Gr,q().pageScaleMode.isDefault,!0)},[]),re(n[Q.STRETCH_IMAGE],()=>L.updateSetting("shouldStretchPage",!q().shouldStretchPage.value)),re(n[Q.OFFSET_SPREAD_PAGES],()=>L.updateSetting("shouldOffsetDoubleSpreads",!q().shouldOffsetDoubleSpreads.value)),re(n[Q.CYCLE_READING_MODE],()=>{qt("readingMode",q().readingMode.value,$r,q().readingMode.isDefault,!0)}),re(n[Q.CYCLE_READING_DIRECTION],()=>{qt("readingDirection",q().readingDirection.value,Xr,q().readingDirection.isDefault,!0)}),re(n[Q.TOGGLE_AUTO_SCROLL],()=>Lt().toggleActive(),{}),re(n[Q.AUTO_SCROLL_SPEED_DECREASE],()=>L.updateSetting("autoScroll",{...q().autoScroll,value:Math.min(He.max,q().autoScroll.value+He.step)})),re(n[Q.AUTO_SCROLL_SPEED_INCREASE],()=>L.updateSetting("autoScroll",{...q().autoScroll,value:Math.max(He.min,q().autoScroll.value-He.step)})),re(n[Q.EXIT_READER],o,[o]),l.useEffect(()=>(s(wt.READER),()=>r(wt.READER)),[]),null},Vo=()=>{l.useEffect(()=>()=>{It().reset()},[])},zo=(e,t,s,r,n,o)=>{var i;l.useEffect(()=>{var x;const c=(x=e.data)==null?void 0:x.manga;if(!c||t.loading||t.error)return;const u=Rr(c,s),f=bn(c,u.shouldUseAutoWebtoonMode,u.readingMode),h={...s,readingMode:f?z.WEBTOON:s.readingMode},g=f?z.WEBTOON:u.readingMode.value,d=Rn("global",{meta:r},h,void 0,g),p=Rr(c,d);n(p),o(!0)},[(i=e.data)==null?void 0:i.manga,s])},Lr=Vt(5).seconds.inWholeMilliseconds,Uo=(e,t,s,r,n,o,i,c,u)=>{const{t:f}=G(),h=l.useRef(void 0),g=l.useRef(void 0),d=l.useRef(void 0),p=l.useRef(!0);l.useEffect(()=>{if(e||t||!s)return;const x=JSON.stringify(r)!==JSON.stringify(h.current);i&&x&&Kr(f(tr[r.value].title),{autoHideDuration:Lr}),h.current=r;const C=JSON.stringify(n)!==JSON.stringify(g.current)||JSON.stringify(o)!==JSON.stringify(d.current);c&&C&&(u(!0),p.current&&setTimeout(()=>u(!1),Lr)),g.current=n,d.current=o,p.current=!1},[e,t,s,r.value,r.isDefault,n.value,n.isDefault,o.value,o.isDefault])},Wo=(e,t,s,r,n,o,i,c)=>{var T;const u=$s(),f=Jr().state,{updateInitialChapter:h}=f!=null?f:{},g=h?void 0:r,d=(T=e.data)==null?void 0:T.chapters.nodes,p=l.useMemo(()=>{var I;return d?(I=d[d.length-t])!=null?I:null:void 0},[d,t]),x=g!=null?g:p,P=n!=null?n:p,C=l.useMemo(()=>d&&(i?On(s!=null?s:d,c):d),[d,i,s,c]),m=l.useMemo(()=>!C||!P?C:o?ze.removeDuplicates(P,C):C,[C,o,P]),v=l.useMemo(()=>m?m.map(I=>Qr(I.id)):[],[m]),A=l.useRef([]);l.useEffect(()=>{const I=v.length!==A.current.length||v.some((j,V)=>{var y;return j.id!==((y=A.current[V])==null?void 0:y.id)}),E=I?v:A.current;I&&(A.current=v);const w=p&&ze.getNextChapter(p,E,{offset:ot.NEXT}),b=p&&ze.getNextChapter(p,E,{offset:ot.PREVIOUS}),O=x!=null&&x.id!==(g==null?void 0:g.id);O&&u("",{replace:!0,state:{...f,updateInitialChapter:void 0}}),Qe().setReaderStateChapters(j=>{var y,M,U,se;const V=(p==null?void 0:p.id)!==((y=j.currentChapter)==null?void 0:y.id);return{...j,mangaChapters:(M=j.mangaChapters)!=null?M:d,chapters:E,initialChapter:x,chapterForDuplicatesHandling:P,currentChapter:p,nextChapter:w,previousChapter:b,isCurrentChapterReady:V?!1:j.isCurrentChapterReady,visibleChapters:O?{...Kt.chapters.visibleChapters,lastLeadingChapterSourceOrder:(U=x==null?void 0:x.sourceOrder)!=null?U:Kt.chapters.visibleChapters.lastLeadingChapterSourceOrder,lastTrailingChapterSourceOrder:(se=x==null?void 0:x.sourceOrder)!=null?se:Kt.chapters.visibleChapters.lastTrailingChapterSourceOrder,isLeadingChapterPreloadMode:!1,isTrailingChapterPreloadMode:!1,scrollIntoView:!!j.initialChapter}:j.visibleChapters}})},[v,p,x,g,d,P,f])},Fo=1,Br=(e,t,s=!1,r=!1)=>{const n=Math.max(e*t,Fo),o=s?-n:n;return r?o*-1:o},kr=(e,t,s)=>e*(t/100)/s;function Nr(e,t,s,r,n){if(n(),!e){s(setInterval(()=>{r(t)},t),"interval");return}let o;const i=c=>{const u=c-(o!=null?o:c);o=c,r(u),s(requestAnimationFrame(i),"animationFrame")};s(requestAnimationFrame(i),"animationFrame")}const Go=(e,t,s=Ae.Y,r=100,n=!1,o=!1)=>{const i=typeof e=="function",c=l.useRef(void 0),u=l.useRef(void 0),f=l.useRef(-1),[h,g]=l.useState(!1),[d,p]=l.useState(!1),[x,P]=l.useState({width:window.innerWidth,height:window.innerHeight});Fe(document.documentElement,l.useCallback(()=>{const E=window.innerWidth,w=window.innerHeight;(x.width!==E||x.height!==w)&&P({width:E,height:w})},[]));const C=l.useCallback(()=>{clearTimeout(u.current),cancelAnimationFrame(f.current)},[]),m=l.useCallback(()=>{g(!0)},[]),v=l.useCallback(()=>{g(!1),p(!1),C()},[]),A=l.useCallback(()=>{if(h){v();return}m()},[h]),T=l.useCallback(()=>{p(!0)},[]),I=l.useCallback(()=>{p(!1)},[]);return l.useEffect(()=>{if(!e||!h)return()=>{};if(d)return C(),()=>{};const E=t*1e3;if(i)return Nr(!1,E,M=>{u.current=M},e,C),()=>C();const w=e.current;if(!w)return()=>{};c.current||(c.current=getComputedStyle(w));const b=c.current.direction==="rtl",O=s!==Ae.Y,j=s!==Ae.X,V=kr(window.innerWidth,r,E),y=kr(window.innerHeight,r,E);return Nr(o,E,(M,U)=>{switch(U){case"interval":u.current=M;break;case"animationFrame":f.current=M;break;default:throw new Error('Unexpected "type" ('.concat(U,")"))}},M=>{w.scrollBy({top:Number(j)*Br(y,M,!1,n),left:Number(O)*Br(V,M,b,n),behavior:o?void 0:"smooth"})},C),()=>C()},[e,t,r,x,h,d,n,o]),l.useMemo(()=>({isActive:h,isPaused:d,start:m,cancel:v,toggleActive:A,pause:T,resume:I}),[h,d,m,v,A,T,I])},$o=({themeDirection:e,combinedDirection:t})=>{const{scrollRef:s,direction:r}=Ft(g=>({scrollRef:g.autoScroll.scrollRef,direction:g.autoScroll.direction})),{readingMode:n,autoScroll:o}=J(g=>({readingMode:g.settings.readingMode.value,autoScroll:g.settings.autoScroll})),c=n===z.CONTINUOUS_HORIZONTAL&&e!==t?K(r===ue.BACKWARD,r===ue.FORWARD,t):r===ue.BACKWARD,u=de(n),f=l.useCallback(()=>{H.openPage("next","ltr")},[]),h=Go(u?s:f,o.value,rr[n],Vr.MEDIUM,c,o.smooth);return l.useEffect(()=>{const g=Lt();g.setIsActive(h.isActive),g.setIsPaused(h.isPaused),g.setStart(h.start),g.setCancel(h.cancel),g.setToggleActive(h.toggleActive),g.setPause(h.pause),g.setResume(h.resume)},[h]),null},Xo=ge(l.memo($o),[()=>({themeDirection:st().direction}),()=>({combinedDirection:L.useGetThemeDirection()})],["themeDirection","combinedDirection"]),Yo=({setOverride:e,readerNavBarWidth:t})=>{var he,Z,N;const{t:s}=G(),r=Mt(B=>B.manga),{mangaChapters:n,initialChapter:o,chapterForDuplicatesHandling:i,currentChapter:c}=Ue(B=>({mangaChapters:B.chapters.mangaChapters,initialChapter:B.chapters.initialChapter,chapterForDuplicatesHandling:B.chapters.chapterForDuplicatesHandling,currentChapter:B.chapters.currentChapter})),{shouldSkipDupChapters:u,shouldSkipFilteredChapters:f,backgroundColor:h,readingMode:g,tapZoneLayout:d,tapZoneInvertMode:p,shouldShowReadingModePreview:x,shouldShowTapZoneLayoutPreview:P,setSettings:C}=J(B=>({shouldSkipDupChapters:B.settings.shouldSkipDupChapters,shouldSkipFilteredChapters:B.settings.shouldSkipFilteredChapters,backgroundColor:B.settings.backgroundColor,readingMode:B.settings.readingMode,tapZoneLayout:B.settings.tapZoneLayout,tapZoneInvertMode:B.settings.tapZoneInvertMode,shouldShowReadingModePreview:B.settings.shouldShowReadingModePreview,shouldShowTapZoneLayoutPreview:B.settings.shouldShowTapZoneLayoutPreview,setSettings:B.settings.setSettings})),m=cr(B=>B.tapZone.setShowPreview),v=l.useRef(null),[A,T]=l.useState(!1),{chapterSourceOrder:I,mangaId:E}=Xs(),w=Number(I),b=Number(E),O=At.useGetManga(Ys,b),j=At.useGetMangaChapters(Ks,b);Gn(!r||!c?s("reader.title",{mangaId:b,chapterIndex:w}):"".concat(r.title,": ").concat(c.name));const{metadata:V,settings:y,request:M}=Pn(),U=jn(r!=null?r:lr),se=c===void 0||!A||O.loading||j.loading||M.loading,ne=(Z=(he=O.error)!=null?he:j.error)!=null?Z:M.error;return l.useEffect(()=>{var B;It().setManga((B=O.data)==null?void 0:B.manga)},[(N=O.data)==null?void 0:N.manga]),Vo(),zo(O,M,y,V,C,T),Uo(se,ne,A,g,d,p,x,P,m),Wo(j,w,n,o,i,u,f,U),l.useLayoutEffect(()=>(e({status:!0,value:a.jsxs($,{sx:{position:"absolute"},children:[a.jsx(Ho,{scrollElementRef:v}),a.jsx(ao,{}),!v.current&&a.jsx($,{onClick:()=>Ve().setIsVisible(!Ve().isVisible),sx:{position:"fixed",top:0,left:0,width:"100vw",height:"100vh",background:"transparent"}})]})}),()=>e({status:!1,value:null})),[v.current]),ne?a.jsx(_t,{message:s("global.error.label.failed_to_load_data"),messageExtra:qr(ne),retry:()=>{O.error&&O.refetch().catch(bt()),M.error&&M.refetch().catch(bt()),j.error&&j.refetch().catch(bt())}}):se?a.jsx($,{sx:{height:"100vh",width:"100vw",display:"grid",placeItems:"center"},children:a.jsx(Ut,{})}):c===null?a.jsx(_t,{message:s("reader.error.label.chapter_not_found")}):!r||!c?null:a.jsxs($,{sx:{position:"relative",display:"flex",flexDirection:"column",minWidth:"calc(100vw - ".concat(t,"px)"),maxWidth:"calc(100vw - ".concat(t,"px)"),width:"calc(100vw - ".concat(t,"px)"),height:"100vh",marginLeft:"".concat(t,"px"),transition:B=>"width 0.".concat(B.transitions.duration.shortest,"s, margin-left 0.").concat(B.transitions.duration.shortest,"s"),overflow:"auto",backgroundColor:Zr[h]},children:[a.jsx(No,{ref:v}),a.jsx(io,{}),a.jsx(lo,{}),a.jsx(Xo,{})]})},ki=ge(l.memo(Yo),[Ye],["setOverride","readerNavBarWidth"]);export{ki as Reader};
