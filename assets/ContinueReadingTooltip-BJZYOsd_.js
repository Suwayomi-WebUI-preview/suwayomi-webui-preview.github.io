var St=Object.freeze,ja=Object.defineProperty;var jt=(e,t)=>St(ja(e,"raw",{value:St(t||e.slice())}));import{cq as Aa,cr as Oa,cs as Ia,ay as At,ct as Ea,cu as Fa,c as ft,j as n,b9 as Na,bj as Ut,I as Ye,u as ce,b as le,r as fe,B as ve,af as ye,ae as Ce,f as h,ag as Ra,a4 as Y,ah as ue,al as he,R as _a,G as mt,C as tt,bO as Gt,au as La,T as Fe,cv as Va,p as gt,cw as $a,aL as Ba,a8 as bt,a7 as yt,cb as Ya,cx as Ha,as as Wa,q as at,aw as Ua,i as zt,g as Pe,k as He,M as Ga,cy as Kt,m as Te,aW as x,a$ as X,ap as qt,cz as Qt,cA as Xt,aZ as Zt,aX as Ct,cB as za,b0 as Re,b2 as xt,a_ as _e,cC as Jt,cD as ea,aY as Ka,b3 as ta,b4 as l,ax as qa,b5 as aa,v as Qa,b6 as ht,o as sa,w as na,aV as qe,cE as Xa,aa as Za,aA as st,ao as Ja,h as es,cF as ts,cG as as,A as ss,aM as ns,e as os,cH as rs,cI as is,ab as ls,b$ as cs,cJ as ds}from"./index-CmeAoKHp.js";import{C as oa,P as us,T as we,a as hs,D as Ze,b as ps,U as Ot}from"./Trackers-Bgo8y--2.js";import{A as ra}from"./AvatarSpinner-DlCJPZeg.js";import{C as Je}from"./Card-QfV3nrTg.js";import{C as et}from"./ListCardContent-B3rL_d5_.js";import{E as It}from"./EmptyViewAbsoluteCentered-BY6999ne.js";import{C as fs}from"./CheckCircle-YluZXBLX.js";import{S as ms}from"./SpinnerImage-BAvmCqzU.js";import{M as Ve}from"./Metadata-DEECNVLz.js";import{b as gs,a as Et}from"./Mangas-BKTn44oo.js";import{M as ia}from"./MUI.util-CEodEA2f.js";import{C as bs}from"./CardActionArea-CKNchM5K.js";import{L as la}from"./Link-B2iSjP9_.js";import{C as ys,l as Cs,M as xs,m as Ds,n as ws}from"./useManageMangaLibraryState-CgFg5vb5.js";import{L as vs}from"./ListPreference-HtfszVhU.js";import{N as Ms}from"./NumberSetting-DeWaTKpa.js";import{e as pe,_ as se,u as te,j as ks,b as nt,i as Ps,N as Dt,n as Ts,s as be,O as Ss,Q as Ft,a as js,o as As,d as Os,f as Is,P as Es,g as Fs,R as Ns,S as wt,T as We,p as Se,U as ot,V as Ue,t as rt,W as Rs,r as vt,X as _s,Y as ca,Z as Ls,$ as Vs,a0 as $s,y as Bs,a1 as Ys,v as Hs,a2 as Ws,a3 as Us,x as Gs,a4 as zs,a5 as Nt,F as da,G as Ks,H as ua,I as qs,J as Qs,L as Xs,K as Zs}from"./useMobilePicker-DLj_YKTL.js";import{S as Js}from"./SelectSetting-Xf415lqR.js";import{C as en}from"./CheckboxInput-DWcU9fom.js";import{F as tn}from"./FormGroup-coMjMGj6.js";import{b as an,C as Ie}from"./Chapters-B88pHWHV.js";function sn(e,t){return e.classList?!!t&&e.classList.contains(t):(" "+(e.className.baseVal||e.className)+" ").indexOf(" "+t+" ")!==-1}function nn(e,t){e.classList?e.classList.add(t):sn(e,t)||(typeof e.className=="string"?e.className=e.className+" "+t:e.setAttribute("class",(e.className&&e.className.baseVal||"")+" "+t))}function Rt(e,t){return e.replace(new RegExp("(^|\\s)"+t+"(?:\\s|$)","g"),"$1").replace(/\s+/g," ").replace(/^\s*|\s*$/g,"")}function on(e,t){e.classList?e.classList.remove(t):typeof e.className=="string"?e.className=Rt(e.className,t):e.setAttribute("class",Rt(e.className&&e.className.baseVal||"",t))}var rn=function(t,a){return t&&a&&a.split(" ").forEach(function(s){return nn(t,s)})},pt=function(t,a){return t&&a&&a.split(" ").forEach(function(s){return on(t,s)})},Mt=function(e){Aa(t,e);function t(){for(var s,o=arguments.length,i=new Array(o),c=0;c<o;c++)i[c]=arguments[c];return s=e.call.apply(e,[this].concat(i))||this,s.appliedClasses={appear:{},enter:{},exit:{}},s.onEnter=function(d,r){var u=s.resolveArguments(d,r),p=u[0],m=u[1];s.removeClasses(p,"exit"),s.addClass(p,m?"appear":"enter","base"),s.props.onEnter&&s.props.onEnter(d,r)},s.onEntering=function(d,r){var u=s.resolveArguments(d,r),p=u[0],m=u[1],b=m?"appear":"enter";s.addClass(p,b,"active"),s.props.onEntering&&s.props.onEntering(d,r)},s.onEntered=function(d,r){var u=s.resolveArguments(d,r),p=u[0],m=u[1],b=m?"appear":"enter";s.removeClasses(p,b),s.addClass(p,b,"done"),s.props.onEntered&&s.props.onEntered(d,r)},s.onExit=function(d){var r=s.resolveArguments(d),u=r[0];s.removeClasses(u,"appear"),s.removeClasses(u,"enter"),s.addClass(u,"exit","base"),s.props.onExit&&s.props.onExit(d)},s.onExiting=function(d){var r=s.resolveArguments(d),u=r[0];s.addClass(u,"exit","active"),s.props.onExiting&&s.props.onExiting(d)},s.onExited=function(d){var r=s.resolveArguments(d),u=r[0];s.removeClasses(u,"exit"),s.addClass(u,"exit","done"),s.props.onExited&&s.props.onExited(d)},s.resolveArguments=function(d,r){return s.props.nodeRef?[s.props.nodeRef.current,d]:[d,r]},s.getClassNames=function(d){var r=s.props.classNames,u=typeof r=="string",p=u&&r?r+"-":"",m=u?""+p+d:r[d],b=u?m+"-active":r[d+"Active"],f=u?m+"-done":r[d+"Done"];return{baseClassName:m,activeClassName:b,doneClassName:f}},s}var a=t.prototype;return a.addClass=function(o,i,c){var d=this.getClassNames(i)[c+"ClassName"],r=this.getClassNames("enter"),u=r.doneClassName;i==="appear"&&c==="done"&&u&&(d+=" "+u),c==="active"&&o&&Oa(o),d&&(this.appliedClasses[i][c]=d,rn(o,d))},a.removeClasses=function(o,i){var c=this.appliedClasses[i],d=c.base,r=c.active,u=c.done;this.appliedClasses[i]={},d&&pt(o,d),r&&pt(o,r),u&&pt(o,u)},a.render=function(){var o=this.props;o.classNames;var i=Ia(o,["classNames"]);return At.createElement(Ea,Fa({},i,{onEnter:this.onEnter,onEntered:this.onEntered,onEntering:this.onEntering,onExit:this.onExit,onExiting:this.onExiting,onExited:this.onExited}))},t}(At.Component);Mt.defaultProps={classNames:""};Mt.propTypes={};const ln=ft(n.jsx("path",{d:"M12 2C6.47 2 2 6.47 2 12s4.47 10 10 10 10-4.47 10-10S17.53 2 12 2m5 13.59L15.59 17 12 13.41 8.41 17 7 15.59 10.59 12 7 8.41 8.41 7 12 10.59 15.59 7 17 8.41 13.41 12z"})),cn=({onCancel:e,cancelButtonProps:t,...a})=>{var s,o;return n.jsx(Na,{...a,slotProps:{input:{...a.InputProps,sx:{color:"inherit"},endAdornment:(o=(s=a.InputProps)==null?void 0:s.endAdornment)!=null?o:n.jsx(Ut,{position:"end",children:n.jsx(Ye,{...t,onClick:()=>e(),children:n.jsx(ln,{})})})}}})},Sr=ft(n.jsx("path",{d:"M17.63 5.84C17.27 5.33 16.67 5 16 5L5 5.01C3.9 5.01 3 5.9 3 7v10c0 1.1.9 1.99 2 1.99L16 19c.67 0 1.27-.33 1.63-.84L22 12z"})),jr=ft(n.jsx("path",{d:"m18 12 4-4-4-4v3H3v2h15zM6 12l-4 4 4 4v-3h15v-2H6z"})),dn=({tracker:e,onClick:t})=>{const{t:a}=ce();return n.jsx(Je,{sx:oa,children:n.jsx(et,{sx:{padding:"0"},children:n.jsxs(le,{direction:"row",sx:{gap:3},children:[n.jsx(ra,{alt:"".concat(e.name),iconUrl:fe.getValidImgUrlFor(e.icon),slots:{avatarProps:{variant:"rounded",sx:{width:64,height:64}},spinnerImageProps:{ignoreQueue:!0}}}),n.jsx(ve,{sx:{flexGrow:"1"},onClick:t,children:a("tracking.action.button.add_tracking")})]})})})};function un(e){return ye("MuiCardMedia",e)}Ce("MuiCardMedia",["root","media","img"]);const hn=e=>{const{classes:t,isMediaComponent:a,isImageComponent:s}=e;return he({root:["root",a&&"media",s&&"img"]},un,t)},pn=Y("div",{name:"MuiCardMedia",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:a}=e,{isMediaComponent:s,isImageComponent:o}=a;return[t.root,s&&t.media,o&&t.img]}})({display:"block",backgroundSize:"cover",backgroundRepeat:"no-repeat",backgroundPosition:"center",variants:[{props:{isMediaComponent:!0},style:{width:"100%"}},{props:{isImageComponent:!0},style:{objectFit:"cover"}}]}),fn=["video","audio","picture","iframe","img"],mn=["picture","img"],gn=h.forwardRef(function(t,a){const s=Ra({props:t,name:"MuiCardMedia"}),{children:o,className:i,component:c="div",image:d,src:r,style:u,...p}=s,m=fn.includes(c),b=!m&&d?{backgroundImage:'url("'.concat(d,'")'),...u}:u,f={...s,component:c,isMediaComponent:m,isImageComponent:mn.includes(c)},D=hn(f);return n.jsx(pn,{className:ue(D.root,i),as:c,role:!m&&d?"img":void 0,ref:a,style:b,ownerState:f,src:m?d||r:void 0,...p,children:o})}),bn=({title:e,selected:t})=>n.jsxs(le,{direction:"row",sx:{gap:"5px",justifyContent:"space-between"},children:[n.jsx(tt,{title:e,children:n.jsx(Gt,{variant:"h5",component:"h1",children:e})}),n.jsx(fs,{sx:{visibility:t?"visible":"hidden"},color:"primary"})]}),_t=50,yn=({summary:e})=>{const{t}=ce(),a=h.useRef(null),[s,o]=h.useState(!1),[i,c]=h.useState(!1),d=i?_t:0;return h.useLayoutEffect(()=>{var u,p;const r=((p=(u=a.current)==null?void 0:u.clientHeight)!=null?p:0)>_t;c(r),o(!r)},[]),n.jsxs(n.Fragment,{children:[e.length&&n.jsx(La,{collapsedSize:d,in:s,children:n.jsx(Fe,{ref:a,variant:"body1",component:"p",sx:{whiteSpace:"pre-line"},children:e})}),e.length&&i&&n.jsx(ve,{component:"div",...ia.preventRippleProp(),onClick:r=>{r.stopPropagation(),o(!s)},children:t(s?"global.button.show_less":"global.button.show_more")})]})},Lt=({children:e,url:t})=>n.jsx(la,{...ia.preventRippleProp(),href:t,rel:"noreferrer",target:"_blank",underline:"none",color:"inherit",onClick:a=>a.stopPropagation(),children:e}),Cn=({manga:e,selected:t,onSelect:a})=>{const{t:s}=ce(),o=_a.useIsMobileWidth();return n.jsx(Je,{sx:{backgroundColor:"background.default",marginBottom:2,"&:last-child":{marginBottom:8}},children:n.jsx(bs,{onClick:a,children:n.jsx(et,{sx:{padding:"0",borderRadius:"inherit"},children:n.jsxs(mt,{sx:{padding:1,border:"3px solid",borderRadius:"inherit",borderColor:t?"primary.main":"transparent"},children:[n.jsxs(le,{direction:"row",sx:{gap:2,marginBottom:2},children:[n.jsx(gn,{sx:{aspectRatio:gs,minWidth:"100px",width:"150px",borderRadius:1,overflow:"hidden"},children:n.jsx(Lt,{url:e.trackingUrl,children:n.jsx(ms,{useFetchApi:!1,disableCors:!0,ignoreQueue:!0,alt:e.title,src:e.coverUrl,spinnerStyle:{width:"100%",height:"100%"},imgStyle:{width:"100%",height:o?void 0:"100%",maxHeight:"100%",objectFit:"cover"}})})}),n.jsxs(le,{direction:"column",sx:{width:"100%"},children:[n.jsx(Lt,{url:e.trackingUrl,children:n.jsx(bn,{title:e.title,selected:t})}),e.publishingType&&n.jsx(Ve,{title:s("global.label.type"),value:s(us[we.getPublishingType(e)])}),e.startDate&&n.jsx(Ve,{title:s("global.label.started"),value:e.startDate}),e.publishingStatus&&n.jsx(Ve,{title:s("manga.label.status"),value:s(hs[we.getPublishingStatus(e)])}),e.score>0&&n.jsx(Ve,{title:s("tracking.track_record.label.score"),value:e.score}),e.totalChapters>0&&n.jsx(Ve,{title:s("chapter.title_other"),value:e.totalChapters})]})]}),n.jsx(yn,{summary:e.summary})]})})})})},xn=({mangaId:e,selectedTrackerRemoteId:t,trackerId:a,closeSearchMode:s,supportsPrivateTracking:o})=>{const{t:i}=ce(),[c,d]=fe.useBindTracker(),r=u=>{t!==void 0&&c({variables:{input:{mangaId:e,remoteId:t,trackerId:a,private:u}}}).then(()=>{Te(i("manga.action.track.add.label.success"),"success"),s()}).catch(p=>Te(i("manga.action.track.add.label.error"),"error",Pe(p)))};return n.jsxs(le,{direction:"row",sx:{justifyContent:"center",position:"absolute",left:0,right:0,bottom:0,paddingBottom:Ze,gap:2,px:Ze},children:[n.jsx(ve,{disabled:d.loading,size:"large",variant:"contained",onClick:()=>r(!1),sx:{flexBasis:"65%"},children:i("manga.action.track.add.label.action")}),o&&n.jsx(tt,{title:i("tracking.action.button.track_privately"),disabled:d.loading,children:n.jsx(ys,{disabled:d.loading,sx:{flexBasis:"10%",maxWidth:"100px"},variant:"contained",onClick:()=>r(!0),children:n.jsx(Kt,{})})})]})},Dn=({manga:e,tracker:t,closeSearchMode:a,trackedId:s})=>{var k,L;const{t:o}=ce(),i=Va(),[c,d]=h.useState(e.title),[r,u]=h.useState(c),[p,m]=h.useState(s),b=fe.useTrackerSearch(t.id,c,{notifyOnNetworkStatusChange:!0}),f=(L=(k=b.data)==null?void 0:k.searchTracker.trackSearches)!=null?L:[],D=!!f.length,v=!b.loading&&!b.error&&!D,g=!!b.error&&!b.loading;h.useEffect(()=>(m(s),()=>b.abortRequest(new Error("MangaTrackerSearchCard(".concat(t.id,", ").concat(e.id,"): search changed")))),[c]);const A=h.useMemo(()=>!!p&&!!f.find(w=>w.remoteId===p),[p,f])&&!g;return n.jsxs(n.Fragment,{children:[n.jsx(gt,{sx:{padding:Ze},children:n.jsxs(le,{direction:"row",sx:{gap:"10px",alignItems:"center"},children:[n.jsx(Ye,{onClick:a,children:i(n.jsx($a,{}),n.jsx(Ba,{}))}),n.jsx(cn,{sx:{width:"100%"},variant:"standard",value:r,onChange:w=>u(w.target.value),onKeyDown:w=>{w.key==="Enter"&&d(r)},onCancel:()=>u(""),InputProps:{startAdornment:t.id===ps.MYANIMELIST&&n.jsx(Ut,{position:"start",children:n.jsx(bt,{variant:"popover",popupId:"tracker-search-info",children:w=>n.jsxs(n.Fragment,{children:[n.jsx(Ye,{...yt(w),color:"inherit",children:n.jsx(Ya,{})}),n.jsx(Ha,{...Wa(w),anchorOrigin:{vertical:"bottom",horizontal:"left"},children:n.jsx(Fe,{sx:{padding:1,whiteSpace:"pre-line"},children:o("tracking.my_anime_list.search.label.hint")})})]})})})}})]})}),n.jsxs(at,{dividers:!0,sx:{padding:Ze,height:"100vh",...Ua(v||g,{position:"relative"})},children:[v&&n.jsx(It,{message:o("manga.error.label.no_mangas_found")}),b.loading&&n.jsx(zt,{}),g&&n.jsx(It,{message:o("global.error.label.failed_to_load_data"),messageExtra:Pe(b.error),retry:()=>b.refetch().catch(He())}),n.jsx(Ga,{sx:{padding:0},children:D&&f.map(w=>n.jsx(Cn,{manga:w,selected:w.remoteId===p,onSelect:()=>m(w.remoteId)},w.id))}),A&&n.jsx(xn,{mangaId:e.id,trackerId:t.id,closeSearchMode:a,selectedTrackerRemoteId:p,supportsPrivateTracking:t.supportsPrivateTracking})]})]})};function wn(e){return ye("MuiDatePickerToolbar",e)}Ce("MuiDatePickerToolbar",["root","title"]);const vn=["toolbarFormat","toolbarPlaceholder","className","classes"],Mn=e=>he({root:["root"],title:["title"]},wn,e),kn=Y(Ts,{name:"MuiDatePickerToolbar",slot:"Root"})({}),Pn=Y(Fe,{name:"MuiDatePickerToolbar",slot:"Title"})({variants:[{props:{pickerOrientation:"landscape"},style:{margin:"auto 16px auto auto"}}]}),Tn=h.forwardRef(function(t,a){const s=pe({props:t,name:"MuiDatePickerToolbar"}),{toolbarFormat:o,toolbarPlaceholder:i="––",className:c,classes:d}=s,r=se(s,vn),u=te(),{value:p,views:m,orientation:b}=ks(),f=nt(),D=Ps(),v=Mn(d),g=h.useMemo(()=>{if(!u.isValid(p))return i;const A=Dt(u,{format:o,views:m},!0);return u.formatByString(p,A)},[p,o,i,u,m]);return n.jsx(kn,x({ref:a,toolbarTitle:f.datePickerToolbarTitle,className:ue(v.root,c)},r,{children:n.jsx(Pn,{variant:"h4",align:b==="landscape"?"left":"center",ownerState:D,className:v.title,children:g})}))}),Ge=({props:e,value:t,timezone:a,adapter:s})=>{if(t===null)return null;const{shouldDisableDate:o,shouldDisableMonth:i,shouldDisableYear:c,disablePast:d,disableFuture:r,minDate:u,maxDate:p}=e,m=s.date(void 0,a);switch(!0){case!s.isValid(t):return"invalidDate";case!!(o&&o(t)):return"shouldDisableDate";case!!(i&&i(t)):return"shouldDisableMonth";case!!(c&&c(t)):return"shouldDisableYear";case!!(r&&s.isAfterDay(t,m)):return"disableFuture";case!!(d&&s.isBeforeDay(t,m)):return"disablePast";case!!(u&&s.isBeforeDay(t,u)):return"minDate";case!!(p&&s.isAfterDay(t,p)):return"maxDate";default:return null}};Ge.valueManager=be;function Sn(e={}){const{enableAccessibleFieldDOMStructure:t=!0}=e;return h.useMemo(()=>({valueType:"date",validator:Ge,internal_valueManager:be,internal_fieldValueManager:js,internal_enableAccessibleFieldDOMStructure:t,internal_useApplyDefaultValuesToFieldInternalProps:An,internal_useOpenPickerButtonAriaLabel:jn}),[t])}function jn(e){const t=te(),a=nt();return h.useMemo(()=>{const s=t.isValid(e)?t.format(e,"fullDate"):null;return a.openDatePickerDialogue(s)},[e,a,t])}function An(e){const t=te(),a=ze(e);return h.useMemo(()=>{var s;return x({},e,a,{format:(s=e.format)!=null?s:t.formats.keyboardDate})},[e,a,t])}function ze(e){const t=te(),a=Ss();return h.useMemo(()=>{var s,o;return{disablePast:(s=e.disablePast)!=null?s:!1,disableFuture:(o=e.disableFuture)!=null?o:!1,minDate:Ft(t,e.minDate,a.minDate),maxDate:Ft(t,e.maxDate,a.maxDate)}},[e.minDate,e.maxDate,e.disableFuture,e.disablePast,t,a])}function ha(e,t){const a=pe({props:e,name:t}),s=ze(a),o=h.useMemo(()=>{var i;return((i=a.localeText)==null?void 0:i.toolbarTitle)==null?a.localeText:x({},a.localeText,{datePickerToolbarTitle:a.localeText.toolbarTitle})},[a.localeText]);return x({},a,s,{localeText:o},As({views:a.views,openTo:a.openTo,defaultViews:["year","day"],defaultOpenTo:"day"}),{slots:x({toolbar:Tn},a.slots)})}const On=e=>{const t=Sn(e);return Os({manager:t,props:e})},In=["slots","slotProps"],pa=h.forwardRef(function(t,a){const s=pe({props:t,name:"MuiDateField"}),{slots:o,slotProps:i}=s,c=se(s,In),d=Is({slotProps:i,ref:a,externalForwardedProps:c}),r=On(d);return n.jsx(Es,{slots:o,slotProps:i,inputRef:c.inputRef,children:n.jsx(Fs,{fieldResponse:r,defaultOpenPickerIcon:Ns})})}),fa=({shouldDisableDate:e,shouldDisableMonth:t,shouldDisableYear:a,minDate:s,maxDate:o,disableFuture:i,disablePast:c,timezone:d})=>{const r=te();return h.useCallback(u=>Ge({adapter:r,value:u,timezone:d,props:{shouldDisableDate:e,shouldDisableMonth:t,shouldDisableYear:a,minDate:s,maxDate:o,disableFuture:i,disablePast:c}})!==null,[r,e,t,a,s,o,i,c,d])},En=(e,t)=>(a,s)=>{switch(s.type){case"setVisibleDate":return x({},a,{slideDirection:s.direction,currentMonth:s.month,isMonthSwitchingAnimating:!t.isSameMonth(s.month,a.currentMonth)&&!e&&!s.skipAnimation,focusedDay:s.focusedDay});case"changeMonthTimezone":{const o=s.newTimezone;if(t.getTimezone(a.currentMonth)===o)return a;let i=t.setTimezone(a.currentMonth,o);return t.getMonth(i)!==t.getMonth(a.currentMonth)&&(i=t.setMonth(i,t.getMonth(a.currentMonth))),x({},a,{currentMonth:i})}case"finishMonthSwitchingAnimation":return x({},a,{isMonthSwitchingAnimating:!1});default:throw new Error("missing support")}},Fn=e=>{const{value:t,referenceDate:a,disableFuture:s,disablePast:o,maxDate:i,minDate:c,onMonthChange:d,onYearChange:r,reduceAnimations:u,shouldDisableDate:p,timezone:m,getCurrentMonthFromVisibleDate:b}=e,f=te(),D=h.useRef(En(!!u,f)).current,v=h.useMemo(()=>be.getInitialReferenceValue({value:t,adapter:f,timezone:m,props:e,referenceDate:a,granularity:wt.day}),[a,m]),[g,A]=h.useReducer(D,{isMonthSwitchingAnimating:!1,focusedDay:v,currentMonth:f.startOfMonth(v),slideDirection:"left"}),k=fa({shouldDisableDate:p,minDate:c,maxDate:i,disableFuture:s,disablePast:o,timezone:m});h.useEffect(()=>{A({type:"changeMonthTimezone",newTimezone:f.getTimezone(v)})},[v,f]);const L=X(({target:C,reason:R})=>{if(R==="cell-interaction"&&g.focusedDay!=null&&f.isSameDay(C,g.focusedDay))return;const E=R==="cell-interaction";let $,O;if(R==="cell-interaction")$=b(C,g.currentMonth),O=C;else if($=f.isSameMonth(C,g.currentMonth)?g.currentMonth:f.startOfMonth(C),O=C,k(O)){const P=f.startOfMonth(C),U=f.endOfMonth(C);O=We({adapter:f,date:O,minDate:f.isBefore(c,P)?P:c,maxDate:f.isAfter(i,U)?U:i,disablePast:o,disableFuture:s,isDateDisabled:k,timezone:m})}const _=!f.isSameMonth(g.currentMonth,$),H=!f.isSameYear(g.currentMonth,$);_&&(d==null||d($)),H&&(r==null||r(f.startOfYear($))),A({type:"setVisibleDate",month:$,direction:f.isAfterDay($,g.currentMonth)?"left":"right",focusedDay:g.focusedDay!=null&&O!=null&&f.isSameDay(O,g.focusedDay)?g.focusedDay:O,skipAnimation:E})}),w=h.useCallback(()=>{A({type:"finishMonthSwitchingAnimation"})},[]);return{referenceDate:v,calendarState:g,setVisibleDate:L,isDateDisabled:k,onMonthSwitchingAnimationEnd:w}},Nn=e=>ye("MuiPickersFadeTransitionGroup",e);Ce("MuiPickersFadeTransitionGroup",["root"]);const Rn=["children"],_n=e=>he({root:["root"]},Nn,e),Ln=Y(Xt,{name:"MuiPickersFadeTransitionGroup",slot:"Root"})({display:"block",position:"relative"});function ma(e){const t=pe({props:e,name:"MuiPickersFadeTransitionGroup"}),{className:a,reduceAnimations:s,transKey:o,classes:i}=t,{children:c}=t,d=se(t,Rn),r=_n(i),u=qt();return s?c:n.jsx(Ln,{className:ue(r.root,a),ownerState:d,children:n.jsx(Qt,{appear:!1,mountOnEnter:!0,unmountOnExit:!0,timeout:{appear:u.transitions.duration.enteringScreen,enter:u.transitions.duration.enteringScreen,exit:0},children:c},o)})}function Vn(e){return ye("MuiPickersDay",e)}const Ee=Ce("MuiPickersDay",["root","dayWithMargin","dayOutsideMonth","hiddenDaySpacingFiller","today","selected","disabled"]);function ga(e){const{disabled:t,selected:a,today:s,outsideCurrentMonth:o,day:i,disableMargin:c,disableHighlightToday:d,showDaysOutsideCurrentMonth:r}=e,u=te(),{ownerState:p}=Se();return h.useMemo(()=>x({},p,{day:i,isDaySelected:a!=null?a:!1,isDayDisabled:t!=null?t:!1,isDayCurrent:s!=null?s:!1,isDayOutsideMonth:o!=null?o:!1,isDayStartOfWeek:u.isSameDay(i,u.startOfWeek(i)),isDayEndOfWeek:u.isSameDay(i,u.endOfWeek(i)),disableMargin:c!=null?c:!1,disableHighlightToday:d!=null?d:!1,showDaysOutsideCurrentMonth:r!=null?r:!1}),[u,p,i,a,t,s,o,c,d,r])}const $n=["autoFocus","className","classes","hidden","isAnimating","onClick","onDaySelect","onFocus","onBlur","onKeyDown","onMouseDown","onMouseEnter","children","isFirstVisibleCell","isLastVisibleCell","day","selected","disabled","today","outsideCurrentMonth","disableMargin","disableHighlightToday","showDaysOutsideCurrentMonth"],Bn=(e,t)=>{const{isDaySelected:a,isDayDisabled:s,isDayCurrent:o,isDayOutsideMonth:i,disableMargin:c,disableHighlightToday:d,showDaysOutsideCurrentMonth:r}=t,u=i&&!r;return he({root:["root",a&&!u&&"selected",s&&"disabled",!c&&"dayWithMargin",!d&&o&&"today",i&&r&&"dayOutsideMonth",u&&"hiddenDaySpacingFiller"],hiddenDaySpacingFiller:["hiddenDaySpacingFiller"]},Vn,e)},ba=({theme:e})=>x({},e.typography.caption,{width:Ue,height:Ue,borderRadius:"50%",padding:0,backgroundColor:"transparent",transition:e.transitions.create("background-color",{duration:e.transitions.duration.short}),color:(e.vars||e).palette.text.primary,"@media (pointer: fine)":{"&:hover":{backgroundColor:e.vars?"rgba(".concat(e.vars.palette.primary.mainChannel," / ").concat(e.vars.palette.action.hoverOpacity,")"):Re(e.palette.primary.main,e.palette.action.hoverOpacity)}},"&:focus":{backgroundColor:e.vars?"rgba(".concat(e.vars.palette.primary.mainChannel," / ").concat(e.vars.palette.action.focusOpacity,")"):Re(e.palette.primary.main,e.palette.action.focusOpacity),["&.".concat(Ee.selected)]:{willChange:"background-color",backgroundColor:(e.vars||e).palette.primary.dark}},["&.".concat(Ee.selected)]:{color:(e.vars||e).palette.primary.contrastText,backgroundColor:(e.vars||e).palette.primary.main,fontWeight:e.typography.fontWeightMedium,"&:hover":{willChange:"background-color",backgroundColor:(e.vars||e).palette.primary.dark}},["&.".concat(Ee.disabled,":not(.").concat(Ee.selected,")")]:{color:(e.vars||e).palette.text.disabled},["&.".concat(Ee.disabled,"&.").concat(Ee.selected)]:{opacity:.6},variants:[{props:{disableMargin:!1},style:{margin:"0 ".concat(ot,"px")}},{props:{isDayOutsideMonth:!0,showDaysOutsideCurrentMonth:!0},style:{color:(e.vars||e).palette.text.secondary}},{props:{disableHighlightToday:!1,isDayCurrent:!0},style:{["&:not(.".concat(Ee.selected,")")]:{border:"1px solid ".concat((e.vars||e).palette.text.secondary)}}}]}),ya=(e,t)=>{const{ownerState:a}=e;return[t.root,!a.disableMargin&&t.dayWithMargin,!a.disableHighlightToday&&a.isDayCurrent&&t.today,!a.isDayOutsideMonth&&a.showDaysOutsideCurrentMonth&&t.dayOutsideMonth,a.isDayOutsideMonth&&!a.showDaysOutsideCurrentMonth&&t.hiddenDaySpacingFiller]},Yn=Y(za,{name:"MuiPickersDay",slot:"Root",overridesResolver:ya})(ba),Hn=Y("div",{name:"MuiPickersDay",slot:"Root",overridesResolver:ya})(({theme:e})=>x({},ba({theme:e}),{opacity:0,pointerEvents:"none"})),$e=()=>{},Wn=h.forwardRef(function(t,a){const s=pe({props:t,name:"MuiPickersDay"}),{autoFocus:o=!1,className:i,classes:c,isAnimating:d,onClick:r,onDaySelect:u,onFocus:p=$e,onBlur:m=$e,onKeyDown:b=$e,onMouseDown:f=$e,onMouseEnter:D=$e,children:v,day:g,selected:A,disabled:k,today:L,outsideCurrentMonth:w,disableMargin:C,disableHighlightToday:R,showDaysOutsideCurrentMonth:E}=s,$=se(s,$n),O=ga({day:g,selected:A,disabled:k,today:L,outsideCurrentMonth:w,disableMargin:C,disableHighlightToday:R,showDaysOutsideCurrentMonth:E}),_=Bn(c,O),H=te(),P=h.useRef(null),U=Zt(P,a);Ct(()=>{o&&!k&&!d&&!w&&P.current.focus()},[o,k,d,w]);const G=I=>{f(I),w&&I.preventDefault()},F=I=>{I.defaultMuiPrevented=!0,k||u(g),w&&I.currentTarget.focus(),r&&r(I)};return w&&!E?n.jsx(Hn,{className:ue(_.root,_.hiddenDaySpacingFiller,i),ownerState:O,role:$.role}):n.jsx(Yn,x({className:ue(_.root,i),ref:U,centerRipple:!0,disabled:k,tabIndex:A?0:-1,onKeyDown:I=>b(I,g),onFocus:I=>p(I,g),onBlur:I=>m(I,g),onMouseEnter:I=>D(I,g),onClick:F,onMouseDown:G},$,{ownerState:O,children:v!=null?v:H.format(g,"dayOfMonth")}))}),Un=h.memo(Wn),Gn=e=>ye("MuiPickersSlideTransition",e),de=Ce("MuiPickersSlideTransition",["root","slideEnter-left","slideEnter-right","slideEnterActive","slideExit","slideExitActiveLeft-left","slideExitActiveLeft-right"]),zn=["children","className","reduceAnimations","slideDirection","transKey","classes"],Kn=(e,t)=>{const{slideDirection:a}=t,s={root:["root"],exit:["slideExit"],enterActive:["slideEnterActive"],enter:["slideEnter-".concat(a)],exitActive:["slideExitActiveLeft-".concat(a)]};return he(s,Gn,e)},qn=Y(Xt,{name:"MuiPickersSlideTransition",slot:"Root",overridesResolver:(e,t)=>[t.root,{[".".concat(de["slideEnter-left"])]:t["slideEnter-left"]},{[".".concat(de["slideEnter-right"])]:t["slideEnter-right"]},{[".".concat(de.slideEnterActive)]:t.slideEnterActive},{[".".concat(de.slideExit)]:t.slideExit},{[".".concat(de["slideExitActiveLeft-left"])]:t["slideExitActiveLeft-left"]},{[".".concat(de["slideExitActiveLeft-right"])]:t["slideExitActiveLeft-right"]}]})(({theme:e})=>{const t=e.transitions.create("transform",{duration:e.transitions.duration.complex,easing:"cubic-bezier(0.35, 0.8, 0.4, 1)"});return{display:"block",position:"relative",overflowX:"hidden","& > *":{position:"absolute",top:0,right:0,left:0},["& .".concat(de["slideEnter-left"])]:{willChange:"transform",transform:"translate(100%)",zIndex:1},["& .".concat(de["slideEnter-right"])]:{willChange:"transform",transform:"translate(-100%)",zIndex:1},["& .".concat(de.slideEnterActive)]:{transform:"translate(0%)",transition:t},["& .".concat(de.slideExit)]:{transform:"translate(0%)"},["& .".concat(de["slideExitActiveLeft-left"])]:{willChange:"transform",transform:"translate(-100%)",transition:t,zIndex:0},["& .".concat(de["slideExitActiveLeft-right"])]:{willChange:"transform",transform:"translate(100%)",transition:t,zIndex:0}}});function Qn(e){const t=pe({props:e,name:"MuiPickersSlideTransition"}),{children:a,className:s,reduceAnimations:o,slideDirection:i,transKey:c,classes:d}=t,r=se(t,zn),{ownerState:u}=Se(),p=x({},u,{slideDirection:i}),m=Kn(d,p),b=qt();if(o)return n.jsx("div",{className:ue(m.root,s),children:a});const f={exit:m.exit,enterActive:m.enterActive,enter:m.enter,exitActive:m.exitActive};return n.jsx(qn,{className:ue(m.root,s),childFactory:D=>h.cloneElement(D,{classNames:f}),role:"presentation",ownerState:p,children:n.jsx(Mt,x({mountOnEnter:!0,unmountOnExit:!0,timeout:b.transitions.duration.complex,classNames:f},r,{children:a}),c)})}const Xn=e=>ye("MuiDayCalendar",e);Ce("MuiDayCalendar",["root","header","weekDayLabel","loadingContainer","slideTransition","monthContainer","weekContainer","weekNumberLabel","weekNumber"]);const Zn=["parentProps","day","focusedDay","selectedDays","isDateDisabled","currentMonthNumber","isViewFocused"],Jn=["ownerState"],eo=e=>he({root:["root"],header:["header"],weekDayLabel:["weekDayLabel"],loadingContainer:["loadingContainer"],slideTransition:["slideTransition"],monthContainer:["monthContainer"],weekContainer:["weekContainer"],weekNumberLabel:["weekNumberLabel"],weekNumber:["weekNumber"]},Xn,e),Ca=(Ue+ot*2)*6,to=Y("div",{name:"MuiDayCalendar",slot:"Root"})({}),ao=Y("div",{name:"MuiDayCalendar",slot:"Header"})({display:"flex",justifyContent:"center",alignItems:"center"}),so=Y(Fe,{name:"MuiDayCalendar",slot:"WeekDayLabel"})(({theme:e})=>({width:36,height:40,margin:"0 2px",textAlign:"center",display:"flex",justifyContent:"center",alignItems:"center",color:(e.vars||e).palette.text.secondary})),no=Y(Fe,{name:"MuiDayCalendar",slot:"WeekNumberLabel"})(({theme:e})=>({width:36,height:40,margin:"0 2px",textAlign:"center",display:"flex",justifyContent:"center",alignItems:"center",color:(e.vars||e).palette.text.disabled})),oo=Y(Fe,{name:"MuiDayCalendar",slot:"WeekNumber"})(({theme:e})=>x({},e.typography.caption,{width:Ue,height:Ue,padding:0,margin:"0 ".concat(ot,"px"),color:(e.vars||e).palette.text.disabled,fontSize:"0.75rem",alignItems:"center",justifyContent:"center",display:"inline-flex"})),ro=Y("div",{name:"MuiDayCalendar",slot:"LoadingContainer"})({display:"flex",justifyContent:"center",alignItems:"center",minHeight:Ca}),io=Y(Qn,{name:"MuiDayCalendar",slot:"SlideTransition"})({minHeight:Ca}),lo=Y("div",{name:"MuiDayCalendar",slot:"MonthContainer"})({overflow:"hidden"}),co=Y("div",{name:"MuiDayCalendar",slot:"WeekContainer"})({margin:"".concat(ot,"px 0"),display:"flex",justifyContent:"center"});function uo(e){var G;let{parentProps:t,day:a,focusedDay:s,selectedDays:o,isDateDisabled:i,currentMonthNumber:c,isViewFocused:d}=e,r=se(e,Zn);const{disabled:u,disableHighlightToday:p,isMonthSwitchingAnimating:m,showDaysOutsideCurrentMonth:b,slots:f,slotProps:D,timezone:v}=t,g=te(),A=rt(v),k=s!=null&&g.isSameDay(a,s),L=d&&k,w=o.some(F=>g.isSameDay(F,a)),C=g.isSameDay(a,A),R=h.useMemo(()=>u||i(a),[u,i,a]),E=h.useMemo(()=>g.getMonth(a)!==c,[g,a,c]),$=ga({day:a,selected:w,disabled:R,today:C,outsideCurrentMonth:E,disableMargin:void 0,disableHighlightToday:p,showDaysOutsideCurrentMonth:b}),O=(G=f==null?void 0:f.day)!=null?G:Un,_=_e({elementType:O,externalSlotProps:D==null?void 0:D.day,additionalProps:x({disableHighlightToday:p,showDaysOutsideCurrentMonth:b,role:"gridcell",isAnimating:m,"data-timestamp":g.toJsDate(a).valueOf()},r),ownerState:x({},$,{day:a,isDayDisabled:R,isDaySelected:w})}),H=se(_,Jn),P=h.useMemo(()=>{const F=g.startOfMonth(g.setMonth(a,c));return b?g.isSameDay(a,g.startOfWeek(F)):g.isSameDay(a,F)},[c,a,b,g]),U=h.useMemo(()=>{const F=g.endOfMonth(g.setMonth(a,c));return b?g.isSameDay(a,g.endOfWeek(F)):g.isSameDay(a,F)},[c,a,b,g]);return n.jsx(O,x({},H,{day:a,disabled:R,autoFocus:!E&&L,today:C,outsideCurrentMonth:E,isFirstVisibleCell:P,isLastVisibleCell:U,selected:w,tabIndex:k?0:-1,"aria-selected":w,"aria-current":C?"date":void 0}))}function ho(e){const t=pe({props:e,name:"MuiDayCalendar"}),a=te(),{onFocusedDayChange:s,className:o,classes:i,currentMonth:c,selectedDays:d,focusedDay:r,loading:u,onSelectedDaysChange:p,onMonthSwitchingAnimationEnd:m,readOnly:b,reduceAnimations:f,renderLoading:D=()=>n.jsx("span",{children:"..."}),slideDirection:v,TransitionProps:g,disablePast:A,disableFuture:k,minDate:L,maxDate:w,shouldDisableDate:C,shouldDisableMonth:R,shouldDisableYear:E,dayOfWeekFormatter:$=M=>a.format(M,"weekdayShort").charAt(0).toUpperCase(),hasFocus:O,onFocusedViewChange:_,gridLabelId:H,displayWeekNumber:P,fixedWeekNumber:U,timezone:G}=t,F=rt(G),I=eo(i),y=xt(),ne=fa({shouldDisableDate:C,shouldDisableMonth:R,shouldDisableYear:E,minDate:L,maxDate:w,disablePast:A,disableFuture:k,timezone:G}),W=nt(),ae=X(M=>{b||p(M)}),K=M=>{ne(M)||(s(M),_==null||_(!0))},q=X((M,j)=>{switch(M.key){case"ArrowUp":K(a.addDays(j,-7)),M.preventDefault();break;case"ArrowDown":K(a.addDays(j,7)),M.preventDefault();break;case"ArrowLeft":{const z=a.addDays(j,y?1:-1),Z=a.addMonths(j,y?1:-1),S=We({adapter:a,date:z,minDate:y?z:a.startOfMonth(Z),maxDate:y?a.endOfMonth(Z):z,isDateDisabled:ne,timezone:G});K(S||z),M.preventDefault();break}case"ArrowRight":{const z=a.addDays(j,y?-1:1),Z=a.addMonths(j,y?-1:1),S=We({adapter:a,date:z,minDate:y?a.startOfMonth(Z):z,maxDate:y?z:a.endOfMonth(Z),isDateDisabled:ne,timezone:G});K(S||z),M.preventDefault();break}case"Home":K(a.startOfWeek(j)),M.preventDefault();break;case"End":K(a.endOfWeek(j)),M.preventDefault();break;case"PageUp":K(a.addMonths(j,1)),M.preventDefault();break;case"PageDown":K(a.addMonths(j,-1)),M.preventDefault();break}}),oe=X((M,j)=>K(j)),ie=X((M,j)=>{r!=null&&a.isSameDay(r,j)&&(_==null||_(!1))}),Me=a.getMonth(c),je=a.getYear(c),xe=h.useMemo(()=>d.filter(M=>!!M).map(M=>a.startOfDay(M)),[a,d]),me="".concat(je,"-").concat(Me),Q=h.useMemo(()=>h.createRef(),[me]),J=h.useMemo(()=>{const M=a.getWeekArray(c);let j=a.addMonths(c,1);for(;U&&M.length<U;){const z=a.getWeekArray(j),Z=a.isSameDay(M[M.length-1][0],z[0][0]);z.slice(Z?1:0).forEach(S=>{M.length<U&&M.push(S)}),j=a.addMonths(j,1)}return M},[c,U,a]);return n.jsxs(to,{role:"grid","aria-labelledby":H,className:I.root,children:[n.jsxs(ao,{role:"row",className:I.header,children:[P&&n.jsx(no,{variant:"caption",role:"columnheader","aria-label":W.calendarWeekNumberHeaderLabel,className:I.weekNumberLabel,children:W.calendarWeekNumberHeaderText}),Rs(a,F).map((M,j)=>n.jsx(so,{variant:"caption",role:"columnheader","aria-label":a.format(M,"weekday"),className:I.weekDayLabel,children:$(M)},j.toString()))]}),u?n.jsx(ro,{className:I.loadingContainer,children:D()}):n.jsx(io,x({transKey:me,onExited:m,reduceAnimations:f,slideDirection:v,className:ue(o,I.slideTransition)},g,{nodeRef:Q,children:n.jsx(lo,{ref:Q,role:"rowgroup",className:I.monthContainer,children:J.map((M,j)=>n.jsxs(co,{role:"row",className:I.weekContainer,"aria-rowindex":j+1,children:[P&&n.jsx(oo,{className:I.weekNumber,role:"rowheader","aria-label":W.calendarWeekNumberAriaLabelText(a.getWeekNumber(M[0])),children:W.calendarWeekNumberText(a.getWeekNumber(M[0]))}),M.map((z,Z)=>n.jsx(uo,{parentProps:t,day:z,selectedDays:xe,isViewFocused:O,focusedDay:r,onKeyDown:q,onFocus:oe,onBlur:ie,onDaySelect:ae,isDateDisabled:ne,currentMonthNumber:Me,"aria-colindex":Z+1},z.toString()))]},"week-".concat(M[0])))})}))]})}function xa(e){return ye("MuiMonthCalendar",e)}const Qe=Ce("MuiMonthCalendar",["root","button","disabled","selected"]),po=["autoFocus","classes","disabled","selected","value","onClick","onKeyDown","onFocus","onBlur","slots","slotProps"],fo=(e,t)=>{const a={button:["button",t.isMonthDisabled&&"disabled",t.isMonthSelected&&"selected"]};return he(a,xa,e)},mo=Y("button",{name:"MuiMonthCalendar",slot:"Button",overridesResolver:(e,t)=>[t.button,{["&.".concat(Qe.disabled)]:t.disabled},{["&.".concat(Qe.selected)]:t.selected}]})(({theme:e})=>x({color:"unset",backgroundColor:"transparent",border:0,outline:0},e.typography.subtitle1,{height:36,width:72,borderRadius:18,cursor:"pointer","&:focus":{backgroundColor:e.vars?"rgba(".concat(e.vars.palette.action.activeChannel," / ").concat(e.vars.palette.action.hoverOpacity,")"):Re(e.palette.action.active,e.palette.action.hoverOpacity)},"&:hover":{backgroundColor:e.vars?"rgba(".concat(e.vars.palette.action.activeChannel," / ").concat(e.vars.palette.action.hoverOpacity,")"):Re(e.palette.action.active,e.palette.action.hoverOpacity)},"&:disabled":{cursor:"auto",pointerEvents:"none"},["&.".concat(Qe.disabled)]:{color:(e.vars||e).palette.text.secondary},["&.".concat(Qe.selected)]:{color:(e.vars||e).palette.primary.contrastText,backgroundColor:(e.vars||e).palette.primary.main,"&:focus, &:hover":{backgroundColor:(e.vars||e).palette.primary.dark}}})),go=h.memo(function(t){var w;const{autoFocus:a,classes:s,disabled:o,selected:i,value:c,onClick:d,onKeyDown:r,onFocus:u,onBlur:p,slots:m,slotProps:b}=t,f=se(t,po),D=h.useRef(null),{ownerState:v}=Se(),g=x({},v,{isMonthDisabled:o,isMonthSelected:i}),A=fo(s,g);Ct(()=>{var C;a&&((C=D.current)==null||C.focus())},[a]);const k=(w=m==null?void 0:m.monthButton)!=null?w:mo,L=_e({elementType:k,externalSlotProps:b==null?void 0:b.monthButton,externalForwardedProps:f,additionalProps:{disabled:o,ref:D,type:"button",role:"radio","aria-checked":i,onClick:C=>d(C,c),onKeyDown:C=>r(C,c),onFocus:C=>u(C,c),onBlur:C=>p(C,c)},ownerState:g,className:A.button});return n.jsx(k,x({},L))}),bo=["autoFocus","className","currentMonth","classes","value","defaultValue","referenceDate","disabled","disableFuture","disablePast","maxDate","minDate","onChange","shouldDisableMonth","readOnly","disableHighlightToday","onMonthFocus","hasFocus","onFocusedViewChange","monthsPerRow","timezone","gridLabelId","slots","slotProps"],yo=e=>he({root:["root"]},xa,e);function Co(e,t){var o;const a=pe({props:e,name:t}),s=ze(a);return x({},a,s,{monthsPerRow:(o=a.monthsPerRow)!=null?o:3})}const Vt=(e,t,a,s,o)=>!!(e===t&&s&&o.isSameYear(a,s)),xo=Y("div",{name:"MuiMonthCalendar",slot:"Root",shouldForwardProp:e=>ea(e)&&e!=="monthsPerRow"})({display:"flex",flexWrap:"wrap",justifyContent:"space-evenly",rowGap:16,padding:"8px 0",width:ca,boxSizing:"border-box",variants:[{props:{monthsPerRow:3},style:{columnGap:24}},{props:{monthsPerRow:4},style:{columnGap:0}}]}),Do=h.forwardRef(function(t,a){var Z;const s=Co(t,"MuiMonthCalendar"),{autoFocus:o,className:i,currentMonth:c,classes:d,value:r,defaultValue:u,referenceDate:p,disabled:m,disableFuture:b,disablePast:f,maxDate:D,minDate:v,onChange:g,shouldDisableMonth:A,readOnly:k,onMonthFocus:L,hasFocus:w,onFocusedViewChange:C,monthsPerRow:R,timezone:E,gridLabelId:$,slots:O,slotProps:_}=s,H=se(s,bo),{value:P,handleValueChange:U,timezone:G}=vt({name:"MonthCalendar",timezone:E,value:r,defaultValue:u,referenceDate:p,onChange:g,valueManager:be}),F=rt(G),I=xt(),y=te(),{ownerState:ne}=Se(),W=h.useMemo(()=>be.getInitialReferenceValue({value:P,adapter:y,props:s,timezone:G,referenceDate:p,granularity:wt.month}),[]),ae=yo(d),K=h.useMemo(()=>y.getMonth(F),[y,F]),q=h.useMemo(()=>P!=null?y.getMonth(P):null,[P,y]),[oe,ie]=h.useState(()=>q||y.getMonth(W)),[Me,je]=Jt({name:"MonthCalendar",state:"hasFocus",controlled:w,default:o!=null?o:!1}),xe=X(S=>{je(S),C&&C(S)}),me=h.useCallback(S=>{const N=y.startOfMonth(f&&y.isAfter(F,v)?F:v),re=y.startOfMonth(b&&y.isBefore(F,D)?F:D),ee=y.startOfMonth(S);return y.isBefore(ee,N)||y.isAfter(ee,re)?!0:A?A(ee):!1},[b,f,D,v,F,A,y]),Q=X((S,N)=>{if(k)return;const re=P&&c&&!y.isSameYear(P,c)?y.setYear(P,y.getYear(c)):P,ee=y.setMonth(re!=null?re:W,N);U(ee)}),J=X(S=>{var N;me(y.setMonth((N=P!=null?P:c)!=null?N:W,S))||(ie(S),xe(!0),L&&L(S))});h.useEffect(()=>{ie(S=>q!==null&&S!==q?q:S)},[q]);const M=X((S,N)=>{switch(S.key){case"ArrowUp":J((12+N-3)%12),S.preventDefault();break;case"ArrowDown":J((12+N+3)%12),S.preventDefault();break;case"ArrowLeft":J((12+N+(I?1:-1))%12),S.preventDefault();break;case"ArrowRight":J((12+N+(I?-1:1))%12),S.preventDefault();break}}),j=X((S,N)=>{J(N)}),z=X((S,N)=>{oe===N&&xe(!1)});return n.jsx(xo,x({ref:a,className:ue(ae.root,i),ownerState:ne,role:"radiogroup","aria-labelledby":$,monthsPerRow:R},H,{children:_s(y,(Z=c!=null?c:P)!=null?Z:W).map(S=>{const N=y.getMonth(S),re=y.format(S,"monthShort"),ee=y.format(S,"month"),De=Vt(N,q,S,P,y),T=m||me(S);return n.jsx(go,{selected:De,value:N,onClick:Q,onKeyDown:M,autoFocus:Me&&N===oe,disabled:T,tabIndex:N===oe&&!T?0:-1,onFocus:j,onBlur:z,"aria-current":Vt(N,K,S,F,y)?"date":void 0,"aria-label":ee,slots:O,slotProps:_,classes:d,children:re},re)})}))});function Da(e){return ye("MuiYearCalendar",e)}const Xe=Ce("MuiYearCalendar",["root","button","disabled","selected"]),wo=["autoFocus","classes","disabled","selected","value","onClick","onKeyDown","onFocus","onBlur","slots","slotProps"],vo=(e,t)=>{const a={button:["button",t.isYearDisabled&&"disabled",t.isYearSelected&&"selected"]};return he(a,Da,e)},Mo=Y("button",{name:"MuiYearCalendar",slot:"Button",overridesResolver:(e,t)=>[t.button,{["&.".concat(Xe.disabled)]:t.disabled},{["&.".concat(Xe.selected)]:t.selected}]})(({theme:e})=>x({color:"unset",backgroundColor:"transparent",border:0,outline:0},e.typography.subtitle1,{height:36,width:72,borderRadius:18,cursor:"pointer","&:focus":{backgroundColor:e.vars?"rgba(".concat(e.vars.palette.action.activeChannel," / ").concat(e.vars.palette.action.focusOpacity,")"):Re(e.palette.action.active,e.palette.action.focusOpacity)},"&:hover":{backgroundColor:e.vars?"rgba(".concat(e.vars.palette.action.activeChannel," / ").concat(e.vars.palette.action.hoverOpacity,")"):Re(e.palette.action.active,e.palette.action.hoverOpacity)},"&:disabled":{cursor:"auto",pointerEvents:"none"},["&.".concat(Xe.disabled)]:{color:(e.vars||e).palette.text.secondary},["&.".concat(Xe.selected)]:{color:(e.vars||e).palette.primary.contrastText,backgroundColor:(e.vars||e).palette.primary.main,"&:focus, &:hover":{backgroundColor:(e.vars||e).palette.primary.dark}}})),ko=h.memo(function(t){var w;const{autoFocus:a,classes:s,disabled:o,selected:i,value:c,onClick:d,onKeyDown:r,onFocus:u,onBlur:p,slots:m,slotProps:b}=t,f=se(t,wo),D=h.useRef(null),{ownerState:v}=Se(),g=x({},v,{isYearDisabled:o,isYearSelected:i}),A=vo(s,g);Ct(()=>{var C;a&&((C=D.current)==null||C.focus())},[a]);const k=(w=m==null?void 0:m.yearButton)!=null?w:Mo,L=_e({elementType:k,externalSlotProps:b==null?void 0:b.yearButton,externalForwardedProps:f,additionalProps:{disabled:o,ref:D,type:"button",role:"radio","aria-checked":i,onClick:C=>d(C,c),onKeyDown:C=>r(C,c),onFocus:C=>u(C,c),onBlur:C=>p(C,c)},ownerState:g,className:A.button});return n.jsx(k,x({},L))}),Po=["autoFocus","className","classes","value","defaultValue","referenceDate","disabled","disableFuture","disablePast","maxDate","minDate","onChange","readOnly","shouldDisableYear","disableHighlightToday","onYearFocus","hasFocus","onFocusedViewChange","yearsOrder","yearsPerRow","timezone","gridLabelId","slots","slotProps"],To=e=>he({root:["root"]},Da,e);function So(e,t){var o,i;const a=pe({props:e,name:t}),s=ze(a);return x({},a,s,{yearsPerRow:(o=a.yearsPerRow)!=null?o:3,yearsOrder:(i=a.yearsOrder)!=null?i:"asc"})}const jo=Y("div",{name:"MuiYearCalendar",slot:"Root",shouldForwardProp:e=>ea(e)&&e!=="yearsPerRow"})({display:"flex",flexWrap:"wrap",justifyContent:"space-evenly",rowGap:12,padding:"6px 0",overflowY:"auto",height:"100%",width:ca,maxHeight:Ls,boxSizing:"border-box",position:"relative",variants:[{props:{yearsPerRow:3},style:{columnGap:24}},{props:{yearsPerRow:4},style:{columnGap:0,padding:"0 2px"}}]}),Ao=Y("div",{name:"MuiYearCalendar",slot:"ButtonFiller"})({height:36,width:72}),Oo=h.forwardRef(function(t,a){const s=So(t,"MuiYearCalendar"),{autoFocus:o,className:i,classes:c,value:d,defaultValue:r,referenceDate:u,disabled:p,disableFuture:m,disablePast:b,maxDate:f,minDate:D,onChange:v,readOnly:g,shouldDisableYear:A,onYearFocus:k,hasFocus:L,onFocusedViewChange:w,yearsOrder:C,yearsPerRow:R,timezone:E,gridLabelId:$,slots:O,slotProps:_}=s,H=se(s,Po),{value:P,handleValueChange:U,timezone:G}=vt({name:"YearCalendar",timezone:E,value:d,defaultValue:r,referenceDate:u,onChange:v,valueManager:be}),F=rt(G),I=xt(),y=te(),{ownerState:ne}=Se(),W=h.useMemo(()=>be.getInitialReferenceValue({value:P,adapter:y,props:s,timezone:G,referenceDate:u,granularity:wt.year}),[]),ae=To(c),K=h.useMemo(()=>y.getYear(F),[y,F]),q=h.useMemo(()=>P!=null?y.getYear(P):null,[P,y]),[oe,ie]=h.useState(()=>q||y.getYear(W)),[Me,je]=Jt({name:"YearCalendar",state:"hasFocus",controlled:L,default:o!=null?o:!1}),xe=X(T=>{je(T),w&&w(T)}),me=h.useCallback(T=>{if(b&&y.isBeforeYear(T,F)||m&&y.isAfterYear(T,F)||D&&y.isBeforeYear(T,D)||f&&y.isAfterYear(T,f))return!0;if(!A)return!1;const V=y.startOfYear(T);return A(V)},[m,b,f,D,F,A,y]),Q=X((T,V)=>{if(g)return;const ke=y.setYear(P!=null?P:W,V);U(ke)}),J=X(T=>{me(y.setYear(P!=null?P:W,T))||(ie(T),xe(!0),k==null||k(T))});h.useEffect(()=>{ie(T=>q!==null&&T!==q?q:T)},[q]);const M=C!=="desc"?R*1:R*-1,j=I&&C==="asc"||!I&&C==="desc"?-1:1,z=X((T,V)=>{switch(T.key){case"ArrowUp":J(V-M),T.preventDefault();break;case"ArrowDown":J(V+M),T.preventDefault();break;case"ArrowLeft":J(V-j),T.preventDefault();break;case"ArrowRight":J(V+j),T.preventDefault();break}}),Z=X((T,V)=>{J(V)}),S=X((T,V)=>{oe===V&&xe(!1)}),N=h.useRef(null),re=Zt(a,N);h.useEffect(()=>{if(o||N.current===null)return;const T=N.current.querySelector('[tabindex="0"]');if(!T)return;const V=T.offsetHeight,ke=T.offsetTop,Ae=N.current.clientHeight,it=N.current.scrollTop,Ke=ke+V;V>Ae||ke<it||(N.current.scrollTop=Ke-Ae/2-V/2)},[o]);const ee=y.getYearRange([D,f]);C==="desc"&&ee.reverse();let De=R-ee.length%R;return De===R&&(De=0),n.jsxs(jo,x({ref:re,className:ue(ae.root,i),ownerState:ne,role:"radiogroup","aria-labelledby":$,yearsPerRow:R},H,{children:[ee.map(T=>{const V=y.getYear(T),ke=V===q,Ae=p||me(T);return n.jsx(ko,{selected:ke,value:V,onClick:Q,onKeyDown:z,autoFocus:Me&&V===oe,disabled:Ae,tabIndex:V===oe&&!Ae?0:-1,onFocus:Z,onBlur:S,"aria-current":K===V?"date":void 0,slots:O,slotProps:_,classes:c,children:y.format(T,"year")},y.format(T,"year"))}),Array.from({length:De},(T,V)=>n.jsx(Ao,{},V))]}))}),Io=e=>ye("MuiPickersCalendarHeader",e),Eo=Ce("MuiPickersCalendarHeader",["root","labelContainer","label","switchViewButton","switchViewIcon"]),Fo=["slots","slotProps","currentMonth","disabled","disableFuture","disablePast","maxDate","minDate","onMonthChange","onViewChange","view","reduceAnimations","views","labelId","className","classes","timezone","format"],No=["ownerState"],Ro=e=>he({root:["root"],labelContainer:["labelContainer"],label:["label"],switchViewButton:["switchViewButton"],switchViewIcon:["switchViewIcon"]},Io,e),_o=Y("div",{name:"MuiPickersCalendarHeader",slot:"Root"})({display:"flex",alignItems:"center",marginTop:12,marginBottom:4,paddingLeft:24,paddingRight:12,maxHeight:40,minHeight:40}),Lo=Y("div",{name:"MuiPickersCalendarHeader",slot:"LabelContainer"})(({theme:e})=>x({display:"flex",overflow:"hidden",alignItems:"center",cursor:"pointer",marginRight:"auto"},e.typography.body1,{fontWeight:e.typography.fontWeightMedium})),Vo=Y("div",{name:"MuiPickersCalendarHeader",slot:"Label"})({marginRight:6}),$o=Y(Ye,{name:"MuiPickersCalendarHeader",slot:"SwitchViewButton"})({marginRight:"auto",variants:[{props:{view:"year"},style:{[".".concat(Eo.switchViewIcon)]:{transform:"rotate(180deg)"}}}]}),Bo=Y(Ys,{name:"MuiPickersCalendarHeader",slot:"SwitchViewIcon"})(({theme:e})=>({willChange:"transform",transition:e.transitions.create("transform"),transform:"rotate(0deg)"})),Yo=h.forwardRef(function(t,a){var q,oe;const s=nt(),o=te(),i=pe({props:t,name:"MuiPickersCalendarHeader"}),{slots:c,slotProps:d,currentMonth:r,disabled:u,disableFuture:p,disablePast:m,maxDate:b,minDate:f,onMonthChange:D,onViewChange:v,view:g,reduceAnimations:A,views:k,labelId:L,className:w,classes:C,timezone:R,format:E="".concat(o.formats.month," ").concat(o.formats.year)}=i,$=se(i,Fo),{ownerState:O}=Se(),_=Ro(C),H=(q=c==null?void 0:c.switchViewButton)!=null?q:$o,P=_e({elementType:H,externalSlotProps:d==null?void 0:d.switchViewButton,additionalProps:{size:"small","aria-label":s.calendarViewSwitchingButtonAriaLabel(g)},ownerState:x({},O,{view:g}),className:_.switchViewButton}),U=(oe=c==null?void 0:c.switchViewIcon)!=null?oe:Bo,G=_e({elementType:U,externalSlotProps:d==null?void 0:d.switchViewIcon,ownerState:O,className:_.switchViewIcon}),F=se(G,No),I=()=>D(o.addMonths(r,1)),y=()=>D(o.addMonths(r,-1)),ne=Vs(r,{disableFuture:p,maxDate:b,timezone:R}),W=$s(r,{disablePast:m,minDate:f,timezone:R}),ae=()=>{if(!(k.length===1||!v||u))if(k.length===2)v(k.find(ie=>ie!==g)||k[0]);else{const ie=k.indexOf(g)!==0?0:1;v(k[ie])}};if(k.length===1&&k[0]==="year")return null;const K=o.formatByString(r,E);return n.jsxs(_o,x({},$,{ownerState:O,className:ue(_.root,w),ref:a,children:[n.jsxs(Lo,{role:"presentation",onClick:ae,ownerState:O,"aria-live":"polite",className:_.labelContainer,children:[n.jsx(ma,{reduceAnimations:A,transKey:K,children:n.jsx(Vo,{id:L,ownerState:O,className:_.label,children:K})}),k.length>1&&!u&&n.jsx(H,x({},P,{children:n.jsx(U,x({},F))}))]}),n.jsx(Qt,{in:g==="day",appear:!A,enter:!A,children:n.jsx(Bs,{slots:c,slotProps:d,onGoToPrevious:y,isPreviousDisabled:W,previousLabel:s.previousMonth,onGoToNext:I,isNextDisabled:ne,nextLabel:s.nextMonth})})]}))}),Ho=e=>ye("MuiDateCalendar",e);Ce("MuiDateCalendar",["root","viewTransitionContainer"]);const Wo=["autoFocus","onViewChange","value","defaultValue","referenceDate","disableFuture","disablePast","onChange","onYearChange","onMonthChange","reduceAnimations","shouldDisableDate","shouldDisableMonth","shouldDisableYear","view","views","openTo","className","classes","disabled","readOnly","minDate","maxDate","disableHighlightToday","focusedView","onFocusedViewChange","showDaysOutsideCurrentMonth","fixedWeekNumber","dayOfWeekFormatter","slots","slotProps","loading","renderLoading","displayWeekNumber","yearsOrder","yearsPerRow","monthsPerRow","timezone"],Uo=e=>he({root:["root"],viewTransitionContainer:["viewTransitionContainer"]},Ho,e);function Go(e,t){var i,c,d,r;const a=pe({props:e,name:t}),s=Us(a.reduceAnimations),o=ze(a);return x({},a,o,{loading:(i=a.loading)!=null?i:!1,openTo:(c=a.openTo)!=null?c:"day",views:(d=a.views)!=null?d:["year","day"],reduceAnimations:s,renderLoading:(r=a.renderLoading)!=null?r:()=>n.jsx("span",{children:"..."})})}const zo=Y(Gs,{name:"MuiDateCalendar",slot:"Root"})({display:"flex",flexDirection:"column",height:zs}),Ko=Y(ma,{name:"MuiDateCalendar",slot:"ViewTransitionContainer"})({}),qo=h.forwardRef(function(t,a){var Tt;const s=te(),{ownerState:o}=Se(),i=Ka(),c=Go(t,"MuiDateCalendar"),{autoFocus:d,onViewChange:r,value:u,defaultValue:p,referenceDate:m,disableFuture:b,disablePast:f,onChange:D,onMonthChange:v,reduceAnimations:g,shouldDisableDate:A,shouldDisableMonth:k,shouldDisableYear:L,view:w,views:C,openTo:R,className:E,classes:$,disabled:O,readOnly:_,minDate:H,maxDate:P,disableHighlightToday:U,focusedView:G,onFocusedViewChange:F,showDaysOutsideCurrentMonth:I,fixedWeekNumber:y,dayOfWeekFormatter:ne,slots:W,slotProps:ae,loading:K,renderLoading:q,displayWeekNumber:oe,yearsOrder:ie,yearsPerRow:Me,monthsPerRow:je,timezone:xe}=c,me=se(c,Wo),{value:Q,handleValueChange:J,timezone:M}=vt({name:"DateCalendar",timezone:xe,value:u,defaultValue:p,referenceDate:m,onChange:D,valueManager:be}),{view:j,setView:z,focusedView:Z,setFocusedView:S,goToNextView:N,setValueAndGoToNextView:re}=Hs({view:w,views:C,openTo:R,onChange:J,onViewChange:r,autoFocus:d,focusedView:G,onFocusedViewChange:F}),{referenceDate:ee,calendarState:De,setVisibleDate:T,isDateDisabled:V,onMonthSwitchingAnimationEnd:ke}=Fn({value:Q,referenceDate:m,reduceAnimations:g,onMonthChange:v,minDate:H,maxDate:P,shouldDisableDate:A,disablePast:f,disableFuture:b,timezone:M,getCurrentMonthFromVisibleDate:(B,ge)=>s.isSameMonth(B,ge)?ge:s.startOfMonth(B)}),Ae=O&&Q||H,it=O&&Q||P,Ke="".concat(i,"-grid-label"),lt=Z!==null,kt=(Tt=W==null?void 0:W.calendarHeader)!=null?Tt:Yo,Ma=_e({elementType:kt,externalSlotProps:ae==null?void 0:ae.calendarHeader,additionalProps:{views:C,view:j,currentMonth:De.currentMonth,onViewChange:z,onMonthChange:B=>T({target:B,reason:"header-navigation"}),minDate:Ae,maxDate:it,disabled:O,disablePast:f,disableFuture:b,reduceAnimations:g,timezone:M,labelId:Ke},ownerState:o}),ka=X(B=>{const ge=s.startOfMonth(B),Le=s.endOfMonth(B),Oe=V(B)?We({adapter:s,date:B,minDate:s.isBefore(H,ge)?ge:H,maxDate:s.isAfter(P,Le)?Le:P,disablePast:f,disableFuture:b,isDateDisabled:V,timezone:M}):B;Oe?(re(Oe,"finish"),T({target:Oe,reason:"cell-interaction"})):(N(),T({target:ge,reason:"cell-interaction"}))}),Pa=X(B=>{const ge=s.startOfYear(B),Le=s.endOfYear(B),Oe=V(B)?We({adapter:s,date:B,minDate:s.isBefore(H,ge)?ge:H,maxDate:s.isAfter(P,Le)?Le:P,disablePast:f,disableFuture:b,isDateDisabled:V,timezone:M}):B;Oe?(re(Oe,"finish"),T({target:Oe,reason:"cell-interaction"})):(N(),T({target:ge,reason:"cell-interaction"}))}),Ta=X(B=>J(B&&Ws(s,B,Q!=null?Q:ee),"finish",j));h.useEffect(()=>{s.isValid(Q)&&T({target:Q,reason:"controlled-value-change"})},[Q]);const Pt=Uo($),ct={disablePast:f,disableFuture:b,maxDate:P,minDate:H},dt={disableHighlightToday:U,readOnly:_,disabled:O,timezone:M,gridLabelId:Ke,slots:W,slotProps:ae},ut=h.useRef(j);h.useEffect(()=>{ut.current!==j&&(Z===ut.current&&S(j,!0),ut.current=j)},[Z,S,j]);const Sa=h.useMemo(()=>[Q],[Q]);return n.jsxs(zo,x({ref:a,className:ue(Pt.root,E),ownerState:o},me,{children:[n.jsx(kt,x({},Ma,{slots:W,slotProps:ae})),n.jsx(Ko,{reduceAnimations:g,className:Pt.viewTransitionContainer,transKey:j,ownerState:o,children:n.jsxs("div",{children:[j==="year"&&n.jsx(Oo,x({},ct,dt,{value:Q,onChange:Pa,shouldDisableYear:L,hasFocus:lt,onFocusedViewChange:B=>S("year",B),yearsOrder:ie,yearsPerRow:Me,referenceDate:ee})),j==="month"&&n.jsx(Do,x({},ct,dt,{currentMonth:De.currentMonth,hasFocus:lt,className:E,value:Q,onChange:ka,shouldDisableMonth:k,onFocusedViewChange:B=>S("month",B),monthsPerRow:je,referenceDate:ee})),j==="day"&&n.jsx(ho,x({},De,ct,dt,{onMonthSwitchingAnimationEnd:ke,hasFocus:lt,onFocusedDayChange:B=>T({target:B,reason:"cell-interaction"}),reduceAnimations:g,selectedDays:Sa,onSelectedDaysChange:Ta,shouldDisableDate:A,shouldDisableMonth:k,shouldDisableYear:L,onFocusedViewChange:B=>S("day",B),showDaysOutsideCurrentMonth:I,fixedWeekNumber:y,dayOfWeekFormatter:ne,displayWeekNumber:oe,loading:K,renderLoading:q}))]})})]}))}),Ne=({view:e,onViewChange:t,views:a,focusedView:s,onFocusedViewChange:o,value:i,defaultValue:c,referenceDate:d,onChange:r,className:u,classes:p,disableFuture:m,disablePast:b,minDate:f,maxDate:D,shouldDisableDate:v,shouldDisableMonth:g,shouldDisableYear:A,reduceAnimations:k,onMonthChange:L,monthsPerRow:w,onYearChange:C,yearsOrder:R,yearsPerRow:E,slots:$,slotProps:O,loading:_,renderLoading:H,disableHighlightToday:P,readOnly:U,disabled:G,showDaysOutsideCurrentMonth:F,dayOfWeekFormatter:I,sx:y,autoFocus:ne,fixedWeekNumber:W,displayWeekNumber:ae,timezone:K})=>n.jsx(qo,{view:e,onViewChange:t,views:a.filter(Nt),focusedView:s&&Nt(s)?s:null,onFocusedViewChange:o,value:i,defaultValue:c,referenceDate:d,onChange:r,className:u,classes:p,disableFuture:m,disablePast:b,minDate:f,maxDate:D,shouldDisableDate:v,shouldDisableMonth:g,shouldDisableYear:A,reduceAnimations:k,onMonthChange:L,monthsPerRow:w,onYearChange:C,yearsOrder:R,yearsPerRow:E,slots:$,slotProps:O,loading:_,renderLoading:H,disableHighlightToday:P,readOnly:U,disabled:G,showDaysOutsideCurrentMonth:F,dayOfWeekFormatter:I,sx:y,autoFocus:ne,fixedWeekNumber:W,displayWeekNumber:ae,timezone:K}),wa=h.forwardRef(function(t,a){var r,u,p;const s=te(),o=ha(t,"MuiDesktopDatePicker"),i=x({day:Ne,month:Ne,year:Ne},o.viewRenderers),c=x({},o,{closeOnSelect:(r=o.closeOnSelect)!=null?r:!0,viewRenderers:i,format:Dt(s,o,!1),yearsPerRow:(u=o.yearsPerRow)!=null?u:4,slots:x({field:pa},o.slots),slotProps:x({},o.slotProps,{field:m=>{var b;return x({},ta((b=o.slotProps)==null?void 0:b.field,m),da(o))},toolbar:x({hidden:!0},(p=o.slotProps)==null?void 0:p.toolbar)})}),{renderPicker:d}=Ks({ref:a,props:c,valueManager:be,valueType:"date",validator:Ge,steps:null});return d()});wa.propTypes={autoFocus:l.bool,className:l.string,closeOnSelect:l.bool,dayOfWeekFormatter:l.func,defaultValue:l.object,disabled:l.bool,disableFuture:l.bool,disableHighlightToday:l.bool,disableOpenPicker:l.bool,disablePast:l.bool,displayWeekNumber:l.bool,enableAccessibleFieldDOMStructure:l.any,fixedWeekNumber:l.number,format:l.string,formatDensity:l.oneOf(["dense","spacious"]),inputRef:ua,label:l.node,loading:l.bool,localeText:l.object,maxDate:l.object,minDate:l.object,monthsPerRow:l.oneOf([3,4]),name:l.string,onAccept:l.func,onChange:l.func,onClose:l.func,onError:l.func,onMonthChange:l.func,onOpen:l.func,onSelectedSectionsChange:l.func,onViewChange:l.func,onYearChange:l.func,open:l.bool,openTo:l.oneOf(["day","month","year"]),orientation:l.oneOf(["landscape","portrait"]),readOnly:l.bool,reduceAnimations:l.bool,referenceDate:l.object,renderLoading:l.func,selectedSections:l.oneOfType([l.oneOf(["all","day","empty","hours","meridiem","minutes","month","seconds","weekDay","year"]),l.number]),shouldDisableDate:l.func,shouldDisableMonth:l.func,shouldDisableYear:l.func,showDaysOutsideCurrentMonth:l.bool,slotProps:l.object,slots:l.object,sx:l.oneOfType([l.arrayOf(l.oneOfType([l.func,l.object,l.bool])),l.func,l.object]),timezone:l.string,value:l.object,view:l.oneOf(["day","month","year"]),viewRenderers:l.shape({day:l.func,month:l.func,year:l.func}),views:l.arrayOf(l.oneOf(["day","month","year"]).isRequired),yearsOrder:l.oneOf(["asc","desc"]),yearsPerRow:l.oneOf([3,4])};const va=h.forwardRef(function(t,a){var r;const s=te(),o=ha(t,"MuiMobileDatePicker"),i=x({day:Ne,month:Ne,year:Ne},o.viewRenderers),c=x({},o,{viewRenderers:i,format:Dt(s,o,!1),slots:x({field:pa},o.slots),slotProps:x({},o.slotProps,{field:u=>{var p;return x({},ta((p=o.slotProps)==null?void 0:p.field,u),da(o))},toolbar:x({hidden:!1},(r=o.slotProps)==null?void 0:r.toolbar)})}),{renderPicker:d}=qs({ref:a,props:c,valueManager:be,valueType:"date",validator:Ge,steps:null});return d()});va.propTypes={autoFocus:l.bool,className:l.string,closeOnSelect:l.bool,dayOfWeekFormatter:l.func,defaultValue:l.object,disabled:l.bool,disableFuture:l.bool,disableHighlightToday:l.bool,disableOpenPicker:l.bool,disablePast:l.bool,displayWeekNumber:l.bool,enableAccessibleFieldDOMStructure:l.any,fixedWeekNumber:l.number,format:l.string,formatDensity:l.oneOf(["dense","spacious"]),inputRef:ua,label:l.node,loading:l.bool,localeText:l.object,maxDate:l.object,minDate:l.object,monthsPerRow:l.oneOf([3,4]),name:l.string,onAccept:l.func,onChange:l.func,onClose:l.func,onError:l.func,onMonthChange:l.func,onOpen:l.func,onSelectedSectionsChange:l.func,onViewChange:l.func,onYearChange:l.func,open:l.bool,openTo:l.oneOf(["day","month","year"]),orientation:l.oneOf(["landscape","portrait"]),readOnly:l.bool,reduceAnimations:l.bool,referenceDate:l.object,renderLoading:l.func,selectedSections:l.oneOfType([l.oneOf(["all","day","empty","hours","meridiem","minutes","month","seconds","weekDay","year"]),l.number]),shouldDisableDate:l.func,shouldDisableMonth:l.func,shouldDisableYear:l.func,showDaysOutsideCurrentMonth:l.bool,slotProps:l.object,slots:l.object,sx:l.oneOfType([l.arrayOf(l.oneOfType([l.func,l.object,l.bool])),l.func,l.object]),timezone:l.string,value:l.object,view:l.oneOf(["day","month","year"]),viewRenderers:l.shape({day:l.func,month:l.func,year:l.func}),views:l.arrayOf(l.oneOf(["day","month","year"]).isRequired),yearsOrder:l.oneOf(["asc","desc"]),yearsPerRow:l.oneOf([3,4])};const Qo=["desktopModeMediaQuery"],Xo=h.forwardRef(function(t,a){const s=pe({props:t,name:"MuiDatePicker"}),{desktopModeMediaQuery:o=Qs}=s,i=se(s,Qo);return qa(o,{defaultMatches:!0})?n.jsx(wa,x({ref:a},i)):n.jsx(va,x({ref:a},i))}),$t=({settingName:e,value:t,defaultValue:a,handleChange:s,remove:o})=>{const{t:i}=ce(),[c,d]=h.useState(!1),[r,u]=h.useState(t!=null?t:a);h.useEffect(()=>{t&&u(t)},[t]);const p=h.useCallback(f=>{d(!1),f&&u(t!=null?t:a)},[t]),m=h.useCallback(()=>p(!0),[p]),b=h.useCallback((f,D=!0)=>{D&&p(!1),t!==f&&s(f)},[t,s,p]);return n.jsxs(n.Fragment,{children:[n.jsx(aa,{onClick:()=>d(!0),children:n.jsx(Qa,{primary:e,secondary:t?ht(Number(t)).format("L"):"-",secondaryTypographyProps:{style:{display:"flex",flexDirection:"column"}}})}),n.jsxs(sa,{open:c,onClose:p,children:[n.jsx(gt,{children:e}),n.jsx(at,{children:n.jsx(Xs,{dateAdapter:Zs,adapterLocale:ht.locale(),children:n.jsx(Xo,{value:r?ht(Number(r)):null,onChange:f=>{f&&u(f.valueOf().toString())}})})}),n.jsx(na,{children:n.jsxs(le,{direction:"row",sx:{justifyContent:"space-between",alignItems:"end",width:"100%"},children:[n.jsxs(le,{children:[a!==void 0&&n.jsx(ve,{onClick:()=>{u(a),b(a,!1)},color:"primary",children:i("global.button.reset_to_default")}),o&&n.jsx(ve,{onClick:()=>{u(void 0),b(void 0,!1)},color:"primary",children:i("global.button.remove")})]}),n.jsxs(le,{direction:"row",children:[n.jsx(ve,{onClick:m,color:"primary",children:i("global.button.cancel")}),n.jsx(ve,{onClick:()=>{b(r)},color:"primary",children:i("global.button.ok")})]})]})})]})]})},Bt=({children:e,url:t})=>n.jsx(la,{href:t,rel:"noreferrer",target:"_blank",underline:"none",color:"inherit",children:e}),Zo=({trackerRecordId:e,tracker:t,onClick:a,onClose:s})=>{const{t:o}=ce(),[i,c]=h.useState(!1),d=()=>{s(),fe.unbindTracker(e,i).response.then(()=>Te(o("manga.action.track.remove.label.success"),"success")).catch(r=>Te(o("manga.action.track.remove.label.error"),"error",Pe(r)))};return n.jsx(bt,{variant:"dialog",popupId:"tracker-active-menu-remove-button-".concat(t.id),children:r=>n.jsxs(n.Fragment,{children:[n.jsx(st,{...yt(r),onClick:()=>{a(),r.open()},children:o("global.button.remove")}),n.jsxs(sa,{...Ja(r),onClose:()=>{s(),r.close()},children:[n.jsx(gt,{children:o("manga.action.track.remove.dialog.label.title",{tracker:t.name})}),n.jsxs(at,{dividers:!0,children:[n.jsx(Fe,{children:o("manga.action.track.remove.dialog.label.description")}),t.supportsTrackDeletion&&n.jsx(tn,{children:n.jsx(en,{disabled:!1,label:o("manga.action.track.remove.dialog.label.delete_remote_track",{tracker:t.name}),checked:i,onChange:(u,p)=>c(p)})})]}),n.jsxs(na,{children:[n.jsx(ve,{autoFocus:!0,onClick:()=>{r.close(),s()},children:o("global.button.cancel")}),n.jsx(ve,{onClick:()=>{r.close(),s(),d()},children:o("global.button.ok")})]})]})]})})},Jo=({trackRecordId:e,isPrivate:t,closeMenu:a,supportsPrivateTracking:s})=>{const{t:o}=ce();return s?n.jsx(st,{onClick:()=>{fe.updateTrackerBind(e,{private:!t}).response.catch(i=>Te(o("global.error.label.failed_to_save_changes"),"error",Pe(i))),a()},children:o(t?"tracking.action.button.track_publicly":"tracking.action.button.track_privately")}):null},er=({trackRecord:e,tracker:t,openSearch:a})=>{const{t:s}=ce();return n.jsxs(le,{direction:"row",sx:{alignItems:"stretch",paddingBottom:2},children:[n.jsx(Xa,{badgeContent:e.private?n.jsx(le,{sx:{p:"2px 6px",backgroundColor:"primary.main",borderRadius:100},children:n.jsx(Kt,{fontSize:"small",sx:{color:"primary.contrastText"}})}):null,children:n.jsx(Bt,{url:e.remoteUrl,children:n.jsx(ra,{alt:"".concat(t.name),iconUrl:fe.getValidImgUrlFor(t.icon),slots:{avatarProps:{variant:"rounded",sx:{width:64,height:64}},spinnerImageProps:{ignoreQueue:!0}}})})}),n.jsx(aa,{sx:{flexGrow:1},onClick:a,children:n.jsx(tt,{title:e.title,children:n.jsx(Gt,{flexGrow:1,lines:1,children:e.title})})}),n.jsx(le,{sx:{justifyContent:"center"},children:n.jsx(bt,{variant:"popover",popupId:"tracker-active-menu-popup-".concat(t.id),children:o=>n.jsxs(n.Fragment,{children:[n.jsx(Ye,{...yt(o),children:n.jsx(Cs,{})}),n.jsx(xs,{...Za(o),id:"tracker-active-menu-".concat(t.id),children:(i,c)=>[n.jsx(Bt,{url:e.remoteUrl,children:n.jsx(st,{onClick:()=>i(),children:s("global.label.open_in_browser")})},"tracker-active-menu-item-browser-".concat(t.id)),n.jsx(Zo,{trackerRecordId:e.id,tracker:t,onClick:()=>c(!0),onClose:i},"tracker-active-menu-item-remove-".concat(t.id)),n.jsx(Jo,{trackRecordId:e.id,isPrivate:e.private,closeMenu:i,supportsPrivateTracking:t.supportsPrivateTracking})]})]})})})]})},Yt=({children:e})=>n.jsx(le,{direction:"row",sx:{textAlignLast:"center"},children:e}),Ht=e=>!Math.trunc(Number(e)),tr=({trackRecord:e,tracker:t,onClick:a})=>{const{t:s}=ce(),i=Ht(e.displayScore)?t.scores[0]:e.displayScore,c=h.useMemo(()=>t.scores.map(r=>[r,{text:Ht(r)?"-":r}]),[t.scores]),d=r=>{fe.updateTrackerBind(e.id,r).response.catch(u=>Te(s("global.error.label.failed_to_save_changes"),"error",Pe(u)))};return n.jsx(Je,{sx:oa,children:n.jsxs(et,{sx:{padding:0},children:[n.jsx(er,{trackRecord:e,tracker:t,openSearch:a}),n.jsx(Je,{sx:{backgroundColor:"background.default"},children:n.jsx(et,{sx:{padding:"0"},children:n.jsxs(mt,{sx:{padding:1},children:[n.jsxs(Yt,{children:[n.jsx(vs,{ListPreferenceTitle:s("manga.label.status"),entries:t.statuses.map(r=>r.name),type:"ListPreference",entryValues:t.statuses.map(r=>"".concat(r.value)),ListPreferenceCurrentValue:"".concat(e.status),updateValue:(r,u)=>d({status:Number(u)}),summary:"%s"},"status"),n.jsx(qe,{orientation:"vertical",flexItem:!0}),n.jsx(Ms,{settingTitle:s("chapter.title_other"),dialogTitle:s("chapter.title_other"),settingValue:"".concat(e.lastChapterRead,"/").concat(e.totalChapters),value:e.lastChapterRead,minValue:0,maxValue:Number.MAX_SAFE_INTEGER,valueUnit:"",handleUpdate:r=>d({lastChapterRead:r})}),n.jsx(qe,{orientation:"vertical",flexItem:!0}),n.jsx(Js,{settingName:s("tracking.track_record.label.score"),value:i,values:c,handleChange:r=>d({scoreString:r})})]}),n.jsx(qe,{}),n.jsxs(Yt,{children:[n.jsx($t,{settingName:s("tracking.track_record.label.start_date"),value:we.getDateString(e.startDate),remove:!0,handleChange:r=>d({startDate:r!=null?r:Ot})}),n.jsx(qe,{orientation:"vertical",flexItem:!0}),n.jsx($t,{settingName:s("tracking.track_record.label.finish_date"),value:we.getDateString(e.finishDate),remove:!0,handleChange:r=>d({finishDate:r!=null?r:Ot})})]})]})})})]})})};var Be=(e=>(e[e.UNTRACKED=0]="UNTRACKED",e[e.SEARCH=1]="SEARCH",e[e.INFO=2]="INFO",e))(Be||{});const ar=({tracker:e,manga:t,trackRecord:a,mode:s,setSearchMode:o})=>{if(s===0)return n.jsx(dn,{tracker:e,onClick:()=>o(e.id)});if(s===1)return n.jsx(Dn,{manga:t,tracker:e,trackedId:a==null?void 0:a.remoteId,closeSearchMode:()=>o(void 0)});if(s===2&&!a)throw new Error('TrackerCard: unable to find track record for tracker "'.concat(e.id,'" of manga "').concat(t.id,'"}'));return n.jsx(tr,{tracker:e,trackRecord:a,onClick:()=>{o(e.id)}})},sr=(e,t,a)=>e===a?Be.SEARCH:t.includes(e)?Be.INFO:Be.UNTRACKED,Ar=({manga:e})=>{var k,L,w,C,R;const{t}=ce(),a=es(),[s,o]=h.useState(),i=fe.useGetTrackerList(ts,{notifyOnNetworkStatusChange:!0}),c=(L=(k=i.data)==null?void 0:k.trackers.nodes)!=null?L:[],d=fe.useGetManga(as,e.id),r=(C=(w=d.data)==null?void 0:w.manga.trackRecords.nodes)!=null?C:[],u=we.getLoggedIn(c),p=we.getLoggedIn(we.getTrackers(r,c)),m=we.getIds(p),b=s!==void 0,f=h.useMemo(()=>b?mt:at,[b]),D=i.loading||d.loading,v=(R=i.error)!=null?R:d.error;h.useEffect(()=>{!D&&!v&&!p.length&&!u.length&&a(ss.settings.childRoutes.tracking.path)},[D]);const g=h.useRef(!1);h.useEffect(()=>{!r.length||g.current||(g.current=!0,Promise.all(r.filter(E=>m.includes(E.trackerId)).map(E=>fe.fetchTrackBind(E.id).response)).catch(E=>Te(t("tracking.error.label.could_not_fetch_track_info"),"error",Pe(E))))},[r]);const A=h.useMemo(()=>u.map(E=>{const $=sr(E.id,m,s),O=we.getTrackRecordFor(E,r),_=$===Be.SEARCH;return b&&!_?null:n.jsx(ar,{tracker:E,manga:e,trackRecord:O,mode:$,setSearchMode:H=>o(H)},E.id)}),[m,s,r]);return v?n.jsx(ns,{message:t("global.error.label.failed_to_load_data"),messageExtra:Pe(v),retry:()=>{i.error&&i.refetch().catch(He()),d.error&&d.refetch().catch(He())}}):D?n.jsx(zt,{}):b?A:n.jsx(f,{sx:{padding:0,".MuiPaper-root .MuiCardContent-root":{paddingBottom:"0"}},children:A})},nr=[{title:"chapter.action.download.add.label.next",getCount:()=>1},{title:"chapter.action.download.add.label.next",getCount:()=>5},{title:"chapter.action.download.add.label.next",getCount:()=>10},{title:"chapter.action.download.add.label.next",getCount:()=>25},{title:"chapter.action.download.add.label.ahead",getCount:e=>e,onlyUnread:!0,isDownloadAhead:!0},{title:"chapter.action.download.add.label.unread",getCount:()=>{},onlyUnread:!0},{title:"chapter.action.download.add.label.all",getCount:()=>{},onlyUnread:!1}];var Wt;const or=async(e,t,a,s)=>{if(e.length>1){Et.performAction("download",e,{downloadAhead:s,onlyUnread:t,size:a}).catch(He());return}const i=e[0],c=Et.getFromCache(i,is(Wt||(Wt=jt(["\n            ","\n            fragment MangaInLibraryState on MangaType {\n                id\n                meta {\n                    ...MANGA_META_FIELDS\n                }\n            }\n        "])),rs),"MangaInLibraryState"),d=Ds(c),r=await fe.getChapters(ls,{condition:{mangaId:Number(i)},order:[{by:ds.SourceOrder,byType:cs.Desc}]}).response,u=ws(r.data.chapters.nodes,d);if(s&&Ie.removeDuplicates(u.slice(-1)[0],u).slice(-(a!=null?a:0)).every(v=>!Ie.isRead(v)&&Ie.isDownloaded(v)))return;const m=u.filter(v=>t&&v.isRead?!1:!v.isDownloaded),f=Ie.removeDuplicates(m.slice(-1)[0],m).slice(-(a!=null?a:0)),D=Ie.addDuplicates(f,m);D.length&&Ie.performAction("download",Ie.getIds(D),{}).catch(He())},Or=({mangaIds:e,closeMenu:t})=>{const{t:a}=ce(),{settings:{downloadAheadLimit:s}}=os(),o=(i,c=!0,d=!1)=>{or(e,c,i,d).catch(r=>Te(a(an.download.error,{count:i}),"error",Pe(r))),t==null||t()};return n.jsx(n.Fragment,{children:nr.map(({title:i,getCount:c,onlyUnread:d,isDownloadAhead:r})=>n.jsx(st,{onClick:()=>o(c(s),d,r),children:a(i,{count:c(s)})},a(i,{count:c(s)})))})},Ir=({children:e,chapterNumber:t,name:a,sourceOrder:s,scanlator:o})=>{const{t:i}=ce(),c=s===1;return n.jsx(tt,{slotProps:{tooltip:{sx:{whiteSpace:"pre-line"}}},title:i(c?"chapter.action.read.start":"chapter.action.read.resume",{chapterNumber:t,title:a,scanlator:o}),children:e})};export{Ir as C,Sr as L,jr as S,Ar as T,Or as a,cn as b};
