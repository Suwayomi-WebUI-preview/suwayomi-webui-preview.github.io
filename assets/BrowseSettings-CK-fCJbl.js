import{u as w,r as o,a as _,j as t,e as j,g as i,f as y,F as P,o as m,p,w as I,m as d}from"./index-DmaLT3zm.js";import{N as E}from"./NumberSetting-472tAVLs.js";import{M as T}from"./MutableListSetting-jYyKLFfN.js";import{T as C}from"./TextSetting-ByhbWSep.js";import{E as M}from"./EmptyViewAbsoluteCentered-E7t4qCWU.js";import{u as N}from"./useAppTitle-ueV_qAGT.js";import{S as g}from"./Switch-C6RipbWW.js";import{T as L}from"./Trans-Bid9iLa-.js";import"./TextField-CvYDf2E6.js";import"./useFormControl-DXRCHqlg.js";import"./formControlState-Dq1zat_P.js";import"./InputAdornment-BEdHJyeU.js";import"./Slider-CKvhHwhz.js";import"./Delete-DUmnrtJ2.js";import"./PasswordTextField-DZQtHa9h.js";import"./VisibilityOff-Bp0UA4ZT.js";import"./SwitchBase-DCqZiClE.js";const R=e=>({maxSourcesInParallel:e.maxSourcesInParallel,localSourcePath:e.localSourcePath,extensionRepos:e.extensionRepos}),X=()=>{const{t:e}=w();N(e("global.label.browse"));const{data:h,loading:x,error:n,refetch:b}=o.useGetServerSettings({notifyOnNetworkStatusChange:!0}),[S]=o.useUpdateServerSettings(),a=(s,f)=>{S({variables:{input:{settings:{[s]:f}}}}).catch(v=>d(e("global.error.label.failed_to_save_changes"),"error",i(v)))},{settings:{hideLibraryEntries:l,showNsfw:c}}=_(),u=I(s=>d(e("global.error.label.failed_to_save_changes"),"error",i(s)));if(x)return t.jsx(j,{});if(n)return t.jsx(M,{message:e("global.error.label.failed_to_load_data"),messageExtra:i(n),retry:()=>b().catch(y())});const r=R(h.settings);return t.jsxs(P,{sx:{pt:0},children:[t.jsxs(m,{children:[t.jsx(p,{primary:e("settings.label.hide_library_entries")}),t.jsx(g,{edge:"end",checked:l,onChange:()=>u("hideLibraryEntries",!l)})]}),t.jsxs(m,{children:[t.jsx(p,{primary:e("settings.label.show_nsfw"),secondary:e("settings.label.show_nsfw_description")}),t.jsx(g,{edge:"end",checked:c,onChange:()=>u("showNsfw",!c)})]}),t.jsx(E,{settingTitle:e("settings.server.requests.sources.parallel.label.title"),settingValue:e("settings.server.requests.sources.parallel.label.value",{value:r.maxSourcesInParallel,count:r.maxSourcesInParallel}),valueUnit:e("source.title_one"),value:r.maxSourcesInParallel,defaultValue:6,minValue:1,maxValue:20,showSlider:!0,stepSize:1,handleUpdate:s=>a("maxSourcesInParallel",s)}),t.jsx(T,{settingName:e("extension.settings.repositories.custom.label.title"),description:e("extension.settings.repositories.custom.label.description"),dialogDisclaimer:t.jsxs(L,{i18nKey:"extension.settings.repositories.custom.label.disclaimer",children:[t.jsx("strong",{children:"Suwayomi does not provide any support for 3rd party repositories or extensions!"}),t.jsx("br",{}),"Use with caution as there could be malicious actors making those repositories.",t.jsx("br",{}),"You as the user need to verify the security and that you trust any repository or extension."]}),handleChange:s=>{a("extensionRepos",s),o.clearExtensionCache()},valueInfos:r.extensionRepos.map(s=>[s]),addItemButtonTitle:e("extension.settings.repositories.custom.dialog.action.button.add"),placeholder:"https://github.com/MY_ACCOUNT/MY_REPO/tree/repo",validateItem:s=>!!s.match(/https:\/\/(www\.|raw\.)?(github|githubusercontent)\.com\/([^/]+)\/([^/]+)((\/tree|\/blob)?\/([^/\n]*))?(\/([^/\n]*\.json)?)?/g),invalidItemError:e("extension.settings.repositories.custom.error.label.invalid_url")}),t.jsx(C,{settingName:e("settings.server.local_source.path.label.title"),dialogDescription:e("settings.server.local_source.path.label.description"),value:r.localSourcePath,settingDescription:r.localSourcePath.length?r.localSourcePath:e("global.label.default"),handleChange:s=>a("localSourcePath",s)})]})};export{X as BrowseSettings};
