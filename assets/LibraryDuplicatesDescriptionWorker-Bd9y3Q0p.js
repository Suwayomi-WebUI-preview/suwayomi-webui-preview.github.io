(function(){"use strict";const T=t=>t.toLowerCase().trim(),p=t=>T(t).replace(/[^a-zA-Z0-9\\s]+/g," ").trim(),A=(t,u)=>{const s=p(t.title),n={byTitle:[t],byAlternativeTitle:[t]};return u.forEach(i=>{var l;if(!(t.id!==i.id))return;const e=p(i.title)===s,o=p((l=i==null?void 0:i.description)!=null?l:"").includes(s);(e||o)&&(e&&n.byTitle.push(i),o&&n.byAlternativeTitle.push(i))}),n},h=(t,u=t)=>{const s={},n={};t.forEach(c=>{var l,f;const e=p(c.title);(l=s[e])!=null||(s[e]=[]),(f=n[e])!=null||(n[e]=[]);const{byTitle:o,byAlternativeTitle:r}=A(c,u);s[e].push(...o),n[e].push(...r)});const i=Object.entries(s).map(([c,e])=>{var D;const o=new Set(e),r=new Set((D=n[c])!=null?D:[]),l=[...o][0].title,f=[...o,...r],d=[...new Set([...f])];return d.length===1?null:[l,d]}).filter(c=>!!c);return Object.fromEntries(i)};self.onmessage=t=>{const{mangasToCheck:u,mangas:s}=t.data;postMessage(h(u,s))}})();
