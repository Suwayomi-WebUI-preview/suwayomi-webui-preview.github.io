import{u as Se,e as Te,cw as je,f as v,j as o,o as Ne,p as ke,q as ye,i as ve,ac as Ee,g as te,k as _e,b as x,T as Ae,cC as $e,aE as ae,cD as Oe,cE as De,w as Ve,B as oe,m as ee,F as Ie}from"./index-BeKqgGKZ.js";import{C as Je}from"./CheckboxInput-uieK81Oi.js";import{L as ne}from"./Link-BQmOKeEU.js";class E extends Error{constructor(e,r){super("".concat(e," at position ").concat(r)),this.position=r}}const pe=32,Re=10,we=9,be=13,Ue=160,We=8192,ze=8202,Be=8239,Fe=8287,Le=12288;function Me(n){return/^[0-9A-Fa-f]$/.test(n)}function T(n){return n>="0"&&n<="9"}function Pe(n){return n>=" "}function Q(n){return",:[]/{}()\n+".includes(n)}function ue(n){return n>="a"&&n<="z"||n>="A"&&n<="Z"||n==="_"||n==="$"}function ce(n){return n>="a"&&n<="z"||n>="A"&&n<="Z"||n==="_"||n==="$"||n>="0"&&n<="9"}const le=/^(http|https|ftp|mailto|file|data|irc):\/\/$/,fe=/^[A-Za-z0-9-._~:/?#@!$&'()*+;=]$/;function de(n){return",[]/{}\n+".includes(n)}function he(n){return q(n)||Qe.test(n)}const Qe=/^[[{\w-]$/;function qe(n){return n==="\n"||n==="\r"||n==="	"||n==="\b"||n==="\f"}function j(n,e){const r=n.charCodeAt(e);return r===pe||r===Re||r===we||r===be}function Ke(n,e){const r=n.charCodeAt(e);return r===pe||r===we||r===be}function Ze(n,e){const r=n.charCodeAt(e);return r===Ue||r>=We&&r<=ze||r===Be||r===Fe||r===Le}function q(n){return Ce(n)||re(n)}function Ce(n){return n==='"'||n==="“"||n==="”"}function ge(n){return n==='"'}function re(n){return n==="'"||n==="‘"||n==="’"||n==="`"||n==="´"}function me(n){return n==="'"}function D(n,e){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;const N=n.lastIndexOf(e);return N!==-1?n.substring(0,N)+(r?"":n.substring(N+1)):n}function h(n,e){let r=n.length;if(!j(n,r-1))return n+e;for(;j(n,r-1);)r--;return n.substring(0,r)+e+n.substring(r)}function He(n,e,r){return n.substring(0,e)+n.substring(e+r)}function Xe(n){return/[,\n][ \t\r]*$/.test(n)}const Ye={"\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","	":"\\t"},Ge={'"':'"',"\\":"\\","/":"/",b:"\b",f:"\f",n:"\n",r:"\r",t:"	"};function xe(n){let e=0,r="";R(["```","[```","{```"]),b()||M(),R(["```","```]","```}"]);const _=C(",");for(_&&a(),he(n[e])&&Xe(r)?(_||(r=h(r,",")),Z()):_&&(r=D(r,","));n[e]==="}"||n[e]==="]";)e++,a();if(e>=n.length)return r;p();function b(){a();const i=U()||$()||g()||H()||z()||B(!1)||F();return a(),i}function a(){let i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;const s=e;let t=I(i);do t=J(),t&&(t=I(i));while(t);return e>s}function I(i){const s=i?j:Ke;let t="";for(;;)if(s(n,e))t+=n[e],e++;else if(Ze(n,e))t+=" ",e++;else break;return t.length>0?(r+=t,!0):!1}function J(){if(n[e]==="/"&&n[e+1]==="*"){for(;e<n.length&&!en(n,e);)e++;return e+=2,!0}if(n[e]==="/"&&n[e+1]==="/"){for(;e<n.length&&n[e]!=="\n";)e++;return!0}return!1}function R(i){if(A(i)){if(ue(n[e]))for(;e<n.length&&ce(n[e]);)e++;return a(),!0}return!1}function A(i){I(!0);for(const s of i){const t=e+s.length;if(n.slice(e,t)===s)return e=t,!0}return!1}function C(i){return n[e]===i?(r+=n[e],e++,!0):!1}function k(i){return n[e]===i?(e++,!0):!1}function K(){return k("\\")}function f(){return a(),n[e]==="."&&n[e+1]==="."&&n[e+2]==="."?(e+=3,a(),k(","),!0):!1}function U(){if(n[e]==="{"){r+="{",e++,a(),k(",")&&a();let i=!0;for(;e<n.length&&n[e]!=="}";){let s;if(i?(s=!0,i=!1):(s=C(","),s||(r=h(r,",")),a()),f(),!(g()||B(!0))){n[e]==="}"||n[e]==="{"||n[e]==="]"||n[e]==="["||n[e]===void 0?r=D(r,","):X();break}a();const P=C(":"),S=e>=n.length;P||(he(n[e])||S?r=h(r,":"):Y()),b()||(P||S?r+="null":Y())}return n[e]==="}"?(r+="}",e++):r=h(r,"}"),!0}return!1}function $(){if(n[e]==="["){r+="[",e++,a(),k(",")&&a();let i=!0;for(;e<n.length&&n[e]!=="]";)if(i?i=!1:C(",")||(r=h(r,",")),f(),!b()){r=D(r,",");break}return n[e]==="]"?(r+="]",e++):r=h(r,"]"),!0}return!1}function Z(){let i=!0,s=!0;for(;s;)i?i=!1:C(",")||(r=h(r,",")),s=b();s||(r=D(r,",")),r="[\n".concat(r,"\n]")}function g(){let i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:-1,t=n[e]==="\\";if(t&&(e++,t=!0),q(n[e])){const P=ge(n[e])?ge:me(n[e])?me:re(n[e])?re:Ce,S=e,O=r.length;let u='"';for(e++;;){if(e>=n.length){const c=L(e-1);return!i&&Q(n.charAt(c))?(e=S,r=r.substring(0,O),g(!0)):(u=h(u,'"'),r+=u,!0)}if(e===s)return u=h(u,'"'),r+=u,!0;if(P(n[e])){const c=e,G=u.length;if(u+='"',e++,r+=u,a(!1),i||e>=n.length||Q(n[e])||q(n[e])||T(n[e]))return W(),!0;const w=L(c-1),se=n.charAt(w);if(se===",")return e=S,r=r.substring(0,O),g(!1,w);if(Q(se))return e=S,r=r.substring(0,O),g(!0);r=r.substring(0,O),e=c+1,u="".concat(u.substring(0,G),"\\").concat(u.substring(G))}else if(i&&de(n[e])){if(n[e-1]===":"&&le.test(n.substring(S+1,e+2)))for(;e<n.length&&fe.test(n[e]);)u+=n[e],e++;return u=h(u,'"'),r+=u,W(),!0}else if(n[e]==="\\"){const c=n.charAt(e+1);if(Ge[c]!==void 0)u+=n.slice(e,e+2),e+=2;else if(c==="u"){let w=2;for(;w<6&&Me(n[e+w]);)w++;w===6?(u+=n.slice(e,e+6),e+=6):e+w>=n.length?e=n.length:ie()}else u+=c,e+=2}else{const c=n.charAt(e);c==='"'&&n[e-1]!=="\\"?(u+="\\".concat(c),e++):qe(c)?(u+=Ye[c],e++):(Pe(c)||y(c),u+=c,e++)}t&&K()}}return!1}function W(){let i=!1;for(a();n[e]==="+";){i=!0,e++,a(),r=D(r,'"',!0);const s=r.length;g()?r=He(r,s,1):r=h(r,'"')}return i}function H(){const i=e;if(n[e]==="-"){if(e++,l())return d(i),!0;if(!T(n[e]))return e=i,!1}for(;T(n[e]);)e++;if(n[e]==="."){if(e++,l())return d(i),!0;if(!T(n[e]))return e=i,!1;for(;T(n[e]);)e++}if(n[e]==="e"||n[e]==="E"){if(e++,(n[e]==="-"||n[e]==="+")&&e++,l())return d(i),!0;if(!T(n[e]))return e=i,!1;for(;T(n[e]);)e++}if(!l())return e=i,!1;if(e>i){const s=n.slice(i,e),t=/^0\d/.test(s);return r+=t?'"'.concat(s,'"'):s,!0}return!1}function z(){return m("true","true")||m("false","false")||m("null","null")||m("True","true")||m("False","false")||m("None","null")}function m(i,s){return n.slice(e,e+i.length)===i?(r+=s,e+=i.length,!0):!1}function B(i){const s=e;if(ue(n[e])){for(;e<n.length&&ce(n[e]);)e++;let t=e;for(;j(n,t);)t++;if(n[t]==="(")return e=t+1,b(),n[e]===")"&&(e++,n[e]===";"&&e++),!0}for(;e<n.length&&!de(n[e])&&!q(n[e])&&(!i||n[e]!==":");)e++;if(n[e-1]===":"&&le.test(n.substring(s,e+2)))for(;e<n.length&&fe.test(n[e]);)e++;if(e>s){for(;j(n,e-1)&&e>0;)e--;const t=n.slice(s,e);return r+=t==="undefined"?"null":JSON.stringify(t),n[e]==='"'&&e++,!0}}function F(){if(n[e]==="/"){const i=e;for(e++;e<n.length&&(n[e]!=="/"||n[e-1]==="\\");)e++;return e++,r+='"'.concat(n.substring(i,e),'"'),!0}}function L(i){let s=i;for(;s>0&&j(n,s);)s--;return s}function l(){return e>=n.length||Q(n[e])||j(n,e)}function d(i){r+="".concat(n.slice(i,e),"0")}function y(i){throw new E("Invalid character ".concat(JSON.stringify(i)),e)}function p(){throw new E("Unexpected character ".concat(JSON.stringify(n[e])),e)}function M(){throw new E("Unexpected end of json string",n.length)}function X(){throw new E("Object key expected",e)}function Y(){throw new E("Colon expected",e)}function ie(){const i=n.slice(e,e+6);throw new E('Invalid unicode character "'.concat(i,'"'),e)}}function en(n,e){return n[e]==="*"&&n[e+1]==="/"}const nn={id:"",isCustom:!0,getName:()=>"",muiTheme:{colorSchemes:{light:{palette:{primary:{main:"#1976d2"},secondary:{main:"#9c27b0"}}},dark:{palette:{primary:{main:"#1976d2"},secondary:{main:"#9c27b0"}}}}}},V={create:{title:{id:"VKRRxU"},button:{id:"aP3N/0"},action:{id:"oZj+FS"},success:{id:"RNJWgy"},failure:{id:"RVEnxc"}},edit:{title:{id:"JkEyR8"},button:{id:"tfDRzk"},action:{id:"u4BJ9a"},success:{id:"rSftVe"},failure:{id:"+b+yzq"}},save_dynamic:{title:{id:"Bs1P1+"},button:{id:"tfDRzk"},action:{id:"oZj+FS"},success:{id:"RNJWgy"},failure:{id:"RVEnxc"}}},an=({mode:n,appTheme:e=nn,isVisible:r,onExitComplete:N,onSubmit:_,onDismiss:b})=>{const{i18n:a,_:I}=Se(),{settings:{customThemes:J},request:{loading:R,error:A,refetch:C}}=Te(),{setAppTheme:k}=je(),K=Ie(l=>{throw l}),[f,U]=v.useState(e),[$,Z]=v.useState(!1),[g,W]=v.useState(!1),[H,z]=v.useState(!1),[m,B]=v.useState(["create","save_dynamic"].includes(n)),[F,L]=v.useState(!1);return o.jsxs(Ne,{open:r,onTransitionExited:N,fullWidth:!0,maxWidth:"md",children:[o.jsx(ke,{children:a._(V[n].title)}),o.jsxs(ye,{children:[R&&o.jsx(ve,{}),A&&o.jsx(Ee,{message:a._({id:"6m5aox"}),messageExtra:te(A),retry:()=>C().catch(_e("ThemeCreationDialog::refetch"))}),!A&&o.jsxs(x,{sx:{gap:2,whiteSpace:"pre-line"},children:[o.jsx(Ae,{children:o.jsx($e,{id:"HbJDke",components:{0:o.jsx(ne,{href:"https://mui.com/material-ui/customization/how-to-customize/",target:"_blank",rel:"noreferrer"}),1:o.jsx("br",{}),2:o.jsx(ne,{href:"https://mui.com/material-ui/customization/palette/#color-schemes",target:"_blank",rel:"noreferrer"}),3:o.jsx("br",{}),4:o.jsx("br",{}),5:o.jsx(ne,{href:"https://zenoo.github.io/mui-theme-creator/",target:"_blank",rel:"noreferrer"}),6:o.jsx("br",{}),7:o.jsx("br",{})}})}),o.jsx(ae,{disabled:n==="edit",label:a._({id:"6YtxFj"}),value:f.getName(),error:$,helperText:$&&a._({id:"sXKEIt"}),onChange:l=>{const d=l.target.value.trim(),y=d.length<=32,p=Oe(d,J);Z(!y||!p),U({...f,id:l.target.value,getName:()=>l.target.value})}}),o.jsx(ae,{label:a._({id:"FEr96N"}),multiline:!0,error:g,helperText:g&&a._({id:"NyvzvH"}),defaultValue:JSON.stringify(f.muiTheme,null,2),onChange:l=>{const d="invalid",y=(()=>{try{return xe(l.target.value)}catch(ie){return d}})(),p=De(y),M=y===d||!p,X=JSON.stringify(p)!==JSON.stringify(e.muiTheme);B(n==="create"?!0:X),W(M),!M&&JSON.stringify(p)!==JSON.stringify(f.muiTheme)&&U({...f,muiTheme:p})}})]})]}),o.jsx(Ve,{children:o.jsxs(x,{sx:{width:"100%"},children:[o.jsx(Je,{sx:{margin:0},size:"small",label:a._({id:"nUQ3m/"}),checked:F,onChange:(l,d)=>L(d)}),o.jsxs(x,{sx:{flexDirection:"row",justifyContent:"end"},children:[o.jsx(oe,{autoFocus:!0,onClick:()=>b(),color:"primary",children:a._({id:"dEgA5A"})}),o.jsx(oe,{disabled:g||$||H||!m||!f.id.length,onClick:()=>{ee(a._(V[n].action),"info"),z(!0),K("customThemes",{...J,[f.id]:f}).then(()=>{ee(a._(V[n].success),"success"),F&&k(f.getName()),_()}).catch(l=>ee(a._(V[n].failure),"error",te(l))).finally(()=>z(!1))},color:"primary",children:a._(V[n].button)})]})]})})]})};export{an as T};
