import{r as S,i as _,j as e,c as r,u as B,a as z,cf as D,B as L,S as v,a3 as T,b as A,Z as y}from"./index-iYBf07xu.js";var d={},F=_;Object.defineProperty(d,"__esModule",{value:!0});var b=d.default=void 0,V=F(S()),K=e;b=d.default=(0,V.default)((0,K.jsx)("path",{d:"M21 5v6.59l-3-3.01-4 4.01-4-4-4 4-3-3.01V5c0-1.1.9-2 2-2h14c1.1 0 2 .9 2 2m-3 6.42 3 3.01V19c0 1.1-.9 2-2 2H5c-1.1 0-2-.9-2-2v-6.58l3 2.99 4-4 4 4z"}),"BrokenImage");var f={},O=_;Object.defineProperty(f,"__esModule",{value:!0});var w=f.default=void 0,U=O(S()),G=e;w=f.default=(0,U.default)((0,G.jsx)("path",{d:"M21 19V5c0-1.1-.9-2-2-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2M8.5 13.5l2.5 3.01L14.5 12l4.5 6H5z"}),"Image");const Q=r.forwardRef((C,R)=>{const{useFetchApi:k,src:n,alt:E,onImageLoad:i,spinnerStyle:{small:u,...h}={},imgStyle:o}=C,{t:q}=B(),p=!n.length,[x,M]=r.useState(""),[I,P]=r.useState(0),[c,$]=r.useState(void 0),[l,H]=r.useState(!1),g=(t,a=!1)=>{$(t),H(a),!t&&!a&&(i==null||i())};return r.useEffect(()=>{if(p)return()=>{};const t=z.requestImage(n,D.HIGH,k);let a;return(async()=>{try{const s=async()=>{const m=await t.response;g(!1),M(m)};if(!!await Promise.race([t.response,new Promise(m=>{a=setTimeout(m,50)})])){await s();return}g(!0),await s()}catch(s){const j=s instanceof Error&&(s.name==="AbortError"||s.message==="Component was unmounted");g(!1,!j)}})().catch(()=>{}),()=>{t.cleanup(),clearTimeout(a),t.abortRequest(new Error("Component was unmounted"))}},[n,I]),e.jsxs(e.Fragment,{children:[(c||l)&&e.jsx(L,{sx:h,children:e.jsxs(v,{sx:{height:"100%",alignItems:"center",justifyContent:"center"},children:[c&&e.jsx(T,{thickness:5}),l&&c===!1&&e.jsxs(e.Fragment,{children:[e.jsx(b,{}),e.jsx(A,{startIcon:!u&&e.jsx(y,{}),onClick:t=>{t.stopPropagation(),t.preventDefault(),P(a=>(a+1)%100)},size:u?"small":"large",children:u?e.jsx(y,{}):q("global.button.retry")})]})]})}),p?e.jsx(v,{sx:{height:"100%",alignItems:"center",justifyContent:"center",background:t=>t.palette.background.default,...h},children:e.jsx(w,{fontSize:"large"})}):e.jsx("img",{style:{...o,display:!x||c||l?"none":o==null?void 0:o.display},ref:R,src:x,alt:E,draggable:!1},"".concat(n,"_").concat(I))]})});export{Q as S};
