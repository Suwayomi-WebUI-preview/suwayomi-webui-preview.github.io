import{a as y,c as _,o as w,p as T,j as e,B as k,u as R,v as C,am as h,U as u,O as p}from"./index-B5aGC8by.js";import{b as f,r as S,a as P,g as L}from"./metadata-Bm3ZnyOZ.js";import{N as D}from"./NumberSetting-CUaeV-og.js";import{S as M}from"./SpinnerImage-DY7PfT9m.js";import{S as W}from"./Select-BmQhRII8.js";import{S as m}from"./Switch-BPPAyCDb.js";const N=()=>({staticNav:!1,showPageNumber:!0,loadNextOnEnding:!1,skipDupChapters:!0,fitPageToWindow:!0,scalePage:!1,readerType:"ContinuesVertical",offsetFirstPage:!1,readerWidth:50}),b=(t,i=N(),s=!0)=>L({meta:t},i,s),z=(t,i,s)=>b(t,i,s),F=({meta:t}={},i,s)=>z(f(t),i,s),B=()=>{const t=y.useGetGlobalMeta({notifyOnNetworkStatusChange:!0}),{data:i,loading:s}=t,o=f(i==null?void 0:i.metas.nodes),d=b(o);return{metadata:o,settings:d,loading:s,request:t}},G=async(t,i,s)=>{const o=()=>Array.isArray(t)?t:t.meta,d=f(o()),n=b(d,{staticNav:void 0,showPageNumber:void 0,loadNextOnEnding:void 0,skipDupChapters:void 0,fitPageToWindow:void 0,scalePage:void 0,readerType:void 0,offsetFirstPage:void 0,readerWidth:void 0},!1),l=F({meta:o()},s),x=Object.entries(n).filter(g=>g[1]===void 0),c=[];if(x.forEach(g=>{const a=g[0];c.push([a,l[a]])}),!!x.length){if(i==="manga"){await S(t,c);return}await P(c)}},j=t=>["ContinuesHorizontalLTR","ContinuesHorizontalRTL"].includes(t);function H(t){const i=t.readerType==="ContinuesVertical",s=j(t.readerType),o={margin:0,width:"".concat(t.readerWidth,"%"),objectFit:"contain"},d={marginBottom:"15px"},n={width:void 0,minHeight:"100vh",maxHeight:"100vh",marginLeft:"7px",marginRight:"7px"},l={width:void 0,height:void 0,minWidth:t.scalePage?"calc(100vw - (100vw - 100%))":void 0,maxWidth:"calc(100vw - (100vw - 100%))",minHeight:t.scalePage?"100vh":void 0,maxHeight:"100vh"};return{...o,...s?n:void 0,...i?d:void 0,...t.fitPageToWindow&&!s?l:void 0}}const $=_.forwardRef((t,i)=>{const{src:s,index:o,onImageLoad:d,settings:n}=t,l=w(),x=T(l.breakpoints.down("md")),c=H(n),g=["DoubleRTL","DoubleLTR"].includes(n.readerType);return e.jsx(k,{ref:i,sx:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",minWidth:g?"100%":void 0},children:e.jsx(M,{src:s,onImageLoad:d,alt:"Page #".concat(o),spinnerStyle:{...c,height:"100vh",width:x?"100vw":j(n.readerType)?"50vw":"calc(100% * 0.5)",backgroundColor:"#525252"},imgStyle:c})})});function Q({staticNav:t,loadNextOnEnding:i,readerType:s,showPageNumber:o,skipDupChapters:d,setSettingValue:n,fitPageToWindow:l,scalePage:x,offsetFirstPage:c,readerWidth:g}){const{t:a}=R(),v=!j(s);return e.jsxs(C,{children:[e.jsxs(h,{children:[e.jsx(u,{primary:a("reader.settings.label.static_navigation")}),e.jsx(m,{edge:"end",checked:t,onChange:r=>n("staticNav",r.target.checked)})]}),e.jsxs(h,{children:[e.jsx(u,{primary:a("reader.settings.label.show_page_number")}),e.jsx(m,{edge:"end",checked:o,onChange:r=>n("showPageNumber",r.target.checked)})]}),e.jsxs(h,{children:[e.jsx(u,{primary:a("reader.settings.label.load_next_chapter")}),e.jsx(m,{edge:"end",checked:i,onChange:r=>n("loadNextOnEnding",r.target.checked)})]}),e.jsxs(h,{children:[e.jsx(u,{primary:a("reader.settings.label.skip_dup_chapters")}),e.jsx(m,{edge:"end",checked:d,onChange:r=>n("skipDupChapters",r.target.checked)})]}),v&&e.jsxs(h,{children:[e.jsx(u,{primary:a("reader.settings.label.fit_page_to_window")}),e.jsx(m,{edge:"end",checked:l,onChange:r=>n("fitPageToWindow",r.target.checked)})]}),v&&l&&e.jsxs(h,{children:[e.jsx(u,{primary:a("reader.settings.label.scale_page")}),e.jsx(m,{edge:"end",checked:x,onChange:r=>n("scalePage",r.target.checked)})]}),(s==="DoubleLTR"||s==="DoubleRTL")&&e.jsxs(h,{children:[e.jsx(u,{primary:a("reader.settings.label.offset_first_page")}),e.jsx(m,{edge:"end",checked:c,onChange:r=>n("offsetFirstPage",r.target.checked)})]}),v&&!l&&e.jsx(D,{settingTitle:a("reader.settings.label.reader_width"),settingValue:"".concat(g,"%"),value:g,minValue:10,maxValue:100,defaultValue:50,valueUnit:"%",showSlider:!0,handleUpdate:r=>n("readerWidth",r),handleLiveUpdate:r=>n("readerWidth",r,!1),listItemTextSx:{display:"flex",alignItems:"center",justifyContent:"space-between"}}),e.jsxs(h,{children:[e.jsx(u,{primary:a("reader.settings.label.reader_type")}),e.jsxs(W,{variant:"standard",value:s,onChange:r=>n("readerType",r.target.value),sx:{p:0},children:[e.jsx(p,{value:"SingleLTR",children:a("reader.settings.reader_type.label.single_page_ltr")}),e.jsx(p,{value:"SingleRTL",children:a("reader.settings.reader_type.label.single_page_rtl")}),e.jsx(p,{value:"DoubleLTR",children:a("reader.settings.reader_type.label.double_page_ltr")}),e.jsx(p,{value:"DoubleRTL",children:a("reader.settings.reader_type.label.double_page_rtl")}),e.jsx(p,{value:"Webtoon",children:a("reader.settings.reader_type.label.webtoon")}),e.jsx(p,{value:"ContinuesVertical",children:a("reader.settings.reader_type.label.continuous_vertical")}),e.jsx(p,{value:"ContinuesHorizontalLTR",children:a("reader.settings.reader_type.label.continuous_horizontal_ltr")}),e.jsx(p,{value:"ContinuesHorizontalRTL",children:a("reader.settings.reader_type.label.continuous_horizontal_rtl")})]})]})]})}export{$ as P,Q as R,N as a,G as c,F as g,H as i,B as u};
