!function(){function e(t){return e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e(t)}var t=["index","isSortDesc","chapters"];function r(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function n(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach(function(t){o(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function o(t,r,n){return(r=function(t){var r=function(t,r){if("object"!=e(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var o=n.call(t,r||"default");if("object"!=e(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(t)}(t,"string");return"symbol"==e(r)?r:r+""}(r))in t?Object.defineProperty(t,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[r]=n,t}System.register(["./index-legacy-zpNLLEyO.js","./useManageMangaLibraryState-legacy-Crh2Xhi4.js","./ChapterCardMetadata-legacy-qp5eH_CE.js","./Delete-legacy-O7gM_wbt.js","./Download-legacy-C72OOrjv.js","./DoneAll-legacy-BtjyUima.js","./IconWebView-legacy-dWggobbN.js","./MUI.util-legacy-D9xMlHDR.js","./ListCardContent-legacy-DBUkv7B5.js","./Card-legacy-CbtA3t9U.js","./CardActionArea-legacy-BtlxSjeY.js","./Checkbox-legacy-Db2FMqIM.js"],function(e,r){"use strict";var o,a,l,i,c,s,d,u,p,h,f,b,x,g,m,y,j,v,k,C,w,D,O,I,S,_,P,M,R,V,T,B,N,z,L,U,A,G,H,E,K,W,F,q;return{setters:[function(e){o=e.c,a=e.j,l=e.u,i=e.r,c=e.ad,s=e.a,d=e.b,u=e.a6,p=e.cr,h=e.f,f=e.as,b=e.O,x=e.aa,g=e.S,m=e.aB,y=e.L,j=e.eu,v=e.C,k=e.I,C=e.a8,w=e.ac,D=e.z,O=e.T},function(e){I=e.e,S=e.g,_=e.h,P=e.j,M=e.k,R=e.D,V=e.R,T=e.V,B=e.l,N=e.M},function(e){z=e.C,L=e.D},function(e){U=e.D},function(e){A=e.D},function(e){G=e.D},function(e){H=e.I},function(e){E=e.M},function(e){K=e.L},function(e){W=e.C},function(e){F=e.C},function(e){q=e.C}],execute:function(){var r=o(a.jsx("path",{d:"M21 7h-6V5h6zm-2 3.9c-.32.07-.66.1-1 .1-2.76 0-5-2.24-5-5 0-1.13.37-2.16 1-3H7c-1.1 0-2 .9-2 2v16l7-3 7 3z"})),Q=o(a.jsx("path",{d:"M21 7h-2v2h-2V7h-2V5h2V3h2v2h2zm-2 14-7-3-7 3V5c0-1.1.9-2 2-2h7c-.63.84-1 1.87-1 3 0 2.76 2.24 5 5 5 .34 0 .68-.03 1-.1z"})),J=o(a.jsx("path",{d:"M19 19H5V5h7V3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2v-7h-2zM14 3v2h3.59l-9.83 9.83 1.41 1.41L19 6.41V10h2V3z"})),X=e("I",J),Y=e("a",function(e){var t,n,o,f=e.chapter,b=e.handleSelection,x=e.canBeDownloaded,g=void 0!==x&&x,m=e.selectedChapters,y=void 0===m?[]:m,j=e.onClose,v=e.selectable,k=void 0===v||v,C=l().t,w=!!f,D=null!=f?f:{},O=D.isDownloaded,T=D.isRead,B=D.isBookmarked,N=null!==(n=null===(o=i.useGetMangaChapters(c,null!==(t=null==f?void 0:f.mangaId)&&void 0!==t?t:-1,{skip:!f,fetchPolicy:"cache-only"}).data)||void 0===o?void 0:o.chapters.nodes)&&void 0!==n?n:[],z=s().settings.deleteChaptersWithBookmark,L=P(w,p),E=I(w),K=M(w),W=d.useMemo(function(){return{downloadableChapters:u.getDownloadable(y),downloadedChapters:u.getDownloaded(y),unbookmarkedChapters:u.getNonBookmarked(y),bookmarkedChapters:u.getBookmarked(y),unreadChapters:u.getNonRead(y),readChapters:u.getRead(y)}},[y]),F=W.downloadableChapters,q=W.downloadedChapters,J=W.unbookmarkedChapters,Y=W.bookmarkedChapters,Z=W.unreadChapters,$=W.readChapters,ee=function(e,t){var r,n="mark_prev_as_read"===e,o=n?"mark_as_read":e;if("delete"===o&&f&&!u.isDeletable(f,z))return void j();var a=function(){if(!f)return t;if(!n)return[f];var e=N.findIndex(function(e){return e.id===f.id});if(e+1>N.length-1)return[];var r=N.slice(e+1);return u.getNonRead(r)}();a.length?(u.performAction(o,u.getIds(a),{chapters:a,wasManuallyMarkedAsRead:!0,trackProgressMangaId:null===(r=a[0])||void 0===r?void 0:r.mangaId}).catch(h()),j()):j()};return a.jsxs(a.Fragment,{children:[w&&k&&a.jsx(S,{onClick:function(){null==b||b(f.id,!0),j()},Icon:_,title:C("chapter.action.label.select")}),w&&a.jsxs(a.Fragment,{children:[a.jsx(S,{Icon:X,disabled:!f.realUrl,onClick:function(){window.open(f.realUrl,"_blank","noopener,noreferrer"),j()},title:C("global.button.open_browser")}),a.jsx(S,{Icon:H,disabled:!f.realUrl,onClick:function(){window.open(i.getWebviewUrl(f.realUrl),"_blank","noopener,noreferrer"),j()},title:C("global.button.open_webview")})]}),E(g)&&a.jsx(S,{Icon:A,disabled:K(!F.length),onClick:function(){return ee("download",F)},title:L("download",F.length)}),E(O)&&a.jsx(S,{Icon:U,disabled:K(!q.length),onClick:function(){return ee("delete",u.getDeletable(q,z))},title:L("delete",q.length)}),E(!B)&&a.jsx(S,{Icon:Q,disabled:K(!J.length),onClick:function(){return ee("bookmark",J)},title:L("bookmark",J.length)}),E(B)&&a.jsx(S,{Icon:r,disabled:K(!Y.length),onClick:function(){return ee("unbookmark",Y)},title:L("unbookmark",Y.length)}),E(!T)&&a.jsx(S,{Icon:R,disabled:K(!Z.length),onClick:function(){return ee("mark_as_read",Z)},title:L("mark_as_read",Z.length)}),E(T)&&a.jsx(S,{Icon:V,disabled:K(!$.length),onClick:function(){return ee("mark_as_unread",$)},title:L("mark_as_unread",$.length)}),w&&a.jsx(S,{onClick:function(){return ee("mark_prev_as_read",[])},Icon:G,title:C("chapter.action.mark_as_read.add.label.action.previous")})]})}),Z=e("B",o(a.jsx("path",{d:"M17 3H7c-1.1 0-1.99.9-1.99 2L5 21l7-3 7 3V5c0-1.1-.9-2-2-2"}))),$=d.memo(function(e){var t=l().t,r=f(),o=b.usePreventMobileContextMenu(),i=d.useRef(null),c=e.mode,s=void 0===c?"manga.page":c,p=e.chapter,h=e.showChapterNumber,D=e.onSelect,O=e.selected,I=e.selectable,S=void 0===I||I,_=e.isActiveChapter,P=void 0!==_&&_,M=null!==O,R=p.isDownloaded,V=function(e){M&&(e.preventDefault(),e.stopPropagation(),D(p.id,!O,e.shiftKey))},U=function(e,t){e.stopPropagation(),e.preventDefault(),null==t||t(e)},A=T(function(e,t){var r=t.context;M||!i.current?(e.shiftKey=!0,V(e)):U(e,function(){return null==r?void 0:r(i.current)})});return a.jsx(x,{variant:"popover",popupId:"chapter-card-action-menu",children:function(e){var l;return a.jsxs(g,{sx:{pt:1,px:1},children:[a.jsx(W,{sx:n({},m("reader"===s&&P,{backgroundColor:"primary.main"})),children:a.jsx(F,n(n({component:y,to:u.getReaderUrl(p),onContextMenu:o,sx:b.preventMobileContextMenuSx(),style:{color:r.palette.text[p.isRead?"disabled":"primary"]},state:u.getReaderOpenChapterLocationState(p,!0),replace:"reader"===s,onClick:function(e){return V(e)}},A(e.open)),{},{children:a.jsxs(K,{children:[a.jsx(z,{title:h?"".concat(t("chapter.title_one")," ").concat(p.chapterNumber):p.name,secondaryText:p.scanlator,ternaryText:"".concat(j(Number(null!==(l=p.uploadDate)&&void 0!==l?l:0),!0)).concat(R?" â€¢ ".concat(t("chapter.status.label.downloaded")):""),infoIcons:p.isBookmarked&&a.jsx(Z,{color:"reader"===s&&P?"secondary":"primary"}),slotProps:{title:{variant:"h6",component:"h3",sx:m("reader"===s&&P,{color:r.palette.primary.contrastText})},secondaryText:{sx:m("reader"===s&&P,{color:r.palette.primary.contrastText})},ternaryText:{sx:m("reader"===s&&P,{color:r.palette.primary.contrastText})}}}),a.jsx(L,{chapterId:p.id,color:"reader"===s&&P?r.palette.primary.contrastText:void 0}),a.jsx(g,{sx:{minHeight:"48px"},children:null===O?a.jsx(v,{title:t("global.button.options"),children:a.jsx(k,n(n({ref:i},E.preventRippleProp(C(e),{onClick:function(e){return U(e)}})),{},{"aria-label":"more",sx:n({color:"inherit"},m("reader"===s&&P,{color:"primary.contrastText"})),children:a.jsx(B,{})}))}):a.jsx(v,{title:t(O?"global.button.deselect":"global.button.select"),children:a.jsx(q,{checked:O})})})]})}))}),!M&&e.isOpen&&a.jsx(N,n(n({},w(e)),{},{children:function(e){return a.jsx(Y,{onClose:e,chapter:p,handleSelection:function(){return D(p.id,!0)},canBeDownloaded:u.isDownloadable(p),selectable:S})}}))]})}})}),ee=function(e){var t=e.missingChaptersGap,r=l().t;return a.jsxs(g,{sx:{width:"100%",flexDirection:"row",justifyContent:"center",alignItems:"center",p:2,pt:3.5,pb:2.5},children:[a.jsx(D,{sx:{flexGrow:1,border:"1px solid",borderColor:function(e){return e.palette.text.secondary}}}),a.jsx(O,{sx:{px:2},variant:"body2",color:"textSecondary",children:r("chapter.missing",{count:t})}),a.jsx(D,{sx:{flexGrow:1,border:"1px solid",borderColor:function(e){return e.palette.text.secondary}}})]})};e("C",function(e){var r,o=e.index,l=e.isSortDesc,i=e.chapters,c=function(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(-1!==t.indexOf(n))continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],-1===t.indexOf(r)&&{}.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}(e,t),s=l?o+1:o-1,d=i[o],p=null!==(r=i[s])&&void 0!==r?r:{chapterNumber:0},h=u.getGap(d,p),f=h>0;return a.jsxs(g,{sx:m(!l,{flexDirection:"column-reverse"}),children:[a.jsx($,n(n({},c),{},{chapter:i[o]})),f&&a.jsx(ee,{missingChaptersGap:h})]})})}}})}();
