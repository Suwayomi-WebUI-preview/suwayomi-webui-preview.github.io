import{u as v,r as i,e as w,j as t,i as b,g as n,k as C,N as M,s as u,v as g,F as P,cC as E,cO as N,m}from"./index-C-R-YL45.js";import{N as y}from"./NumberSetting-C6tB4ymP.js";import{M as I}from"./MutableListSetting-cUk5JUzG.js";import{E as T}from"./EmptyViewAbsoluteCentered-COFR2M2Y.js";import{u as L}from"./useAppTitle-B2JGZY0n.js";import{S as h}from"./Switch-BrMuZ2K0.js";import"./Slider-mW1YVHK7.js";import"./Delete-DzNZWZHe.js";import"./SwitchBase-CTSE5RWO.js";const z=()=>{const{i18n:e,_:B}=v();L(e._({id:"O2UpM1"}));const{data:p,loading:x,error:o,refetch:S}=i.useGetServerSettings({notifyOnNetworkStatusChange:!0}),[_]=i.useUpdateServerSettings(),r=(s,j)=>{_({variables:{input:{settings:{[s]:j}}}}).catch(f=>m(e._({id:"cBoXe4"}),"error",n(f)))},{settings:{hideLibraryEntries:d,showNsfw:l}}=w(),c=P(s=>m(e._({id:"cBoXe4"}),"error",n(s)));if(x)return t.jsx(b,{});if(o)return t.jsx(T,{message:e._({id:"6m5aox"}),messageExtra:n(o),retry:()=>S().catch(C("BrowseSettings::refetch"))});const a=p.settings;return t.jsxs(M,{sx:{pt:0},children:[t.jsxs(u,{children:[t.jsx(g,{primary:e._({id:"3By4oP"})}),t.jsx(h,{edge:"end",checked:d,onChange:()=>c("hideLibraryEntries",!d)})]}),t.jsxs(u,{children:[t.jsx(g,{primary:e._({id:"fYduub"}),secondary:e._({id:"ZewkXf"})}),t.jsx(h,{edge:"end",checked:l,onChange:()=>c("showNsfw",!l)})]}),t.jsx(y,{settingTitle:e._({id:"M7Ng1Z"}),settingValue:e._({id:"JugSWF",values:{0:a.maxSourcesInParallel}}),valueUnit:e._({id:"wdxz7K"}),value:a.maxSourcesInParallel,defaultValue:6,minValue:1,maxValue:20,showSlider:!0,stepSize:1,handleUpdate:s=>r("maxSourcesInParallel",s)}),t.jsx(I,{settingName:e._({id:"/rNyKQ"}),description:e._({id:"AnR8qm"}),dialogDisclaimer:t.jsx(E,{id:"93RvKx",components:{0:t.jsx("strong",{}),1:t.jsx("br",{}),2:t.jsx("br",{})}}),handleChange:s=>{r("extensionRepos",s),i.clearExtensionCache()},valueInfos:a.extensionRepos.map(s=>[s]),addItemButtonTitle:e._({id:"Czn04i"}),placeholder:"https://github.com/MY_ACCOUNT/MY_REPO/tree/repo",validateItem:s=>!!s.match(/https:\/\/(www\.|raw\.)?(github|githubusercontent)\.com\/([^/]+)\/([^/]+)((\/tree|\/blob)?\/([^/\n]*))?(\/([^/\n]*\.json)?)?/g),invalidItemError:e._({id:"YM8bCx"})}),t.jsx(N,{settingName:e._({id:"mnnWFu"}),dialogDescription:e._({id:"36FDeT"}),value:a.localSourcePath,settingDescription:a.localSourcePath.length?a.localSourcePath:e._({id:"ovBPCi"}),handleChange:s=>r("localSourcePath",s)})]})};export{z as BrowseSettings};
