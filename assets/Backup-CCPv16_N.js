import{f as x,aW as v,j as l,af as Te,ae as xe,a4 as B,ah as fe,al as be,T as nt,B as pe,aX as at,I as It,aY as Xt,aZ as jt,a_ as Zt,a$ as Ge,aA as Vt,b0 as Ke,b1 as Nt,b2 as Jt,b3 as Ft,b4 as a,ax as es,u as Ze,b5 as We,v as ze,b6 as He,o as rt,p as it,q as lt,w as ct,b as ot,M as qe,s as gt,A as ht,L as kt,Q as ts,av as Ve,r as ye,b7 as Ct,m as ie,i as ss,g as De,k as os,aB as ns,b8 as as,aC as $e}from"./index-lvqKmwz9.js";import{f as Tt}from"./file-selector-DlHkLoY8.js";import{P as rs}from"./Progress-CxuTbZAg.js";import{N as xt}from"./NumberSetting-CPnPthdS.js";import{c as Je,s as ve,a as is,u as ge,b as Fe,d as ls,e as te,_ as ue,f as cs,P as us,g as ds,C as ms,h as ps,i as fs,j as bs,k as ut,l as Oe,m as Me,n as gs,o as hs,p as Ie,q as ks,S as Cs,r as dt,t as mt,v as pt,w as Ye,x as ft,y as Ts,D as Ot,z as Qe,M as xs,A as Ae,B as Lt,E as Bt,F as At,G as ws,H as _t,I as ys,J as Ss,L as Ms,K as vs}from"./useMobilePicker-DcCDBqUh.js";import{E as Ps}from"./EmptyViewAbsoluteCentered-D8omcQaL.js";import{u as Ds}from"./useAppTitle-YubyQBZL.js";import{C as Is}from"./CheckboxInput-C87bTpzJ.js";import{F as js}from"./FormGroup-CfFdIdVB.js";import{u as wt}from"./use-window-event-ChxNyUmu.js";import{u as Vs}from"./use-merged-ref-B5pGa7g7.js";import{L as Ns}from"./ListSubheader-COjSTbtV.js";import"./Slider-B8TVAqGI.js";import"./Chip-B9VQHaLQ.js";import"./Checkbox-DQLqhxnA.js";import"./SwitchBase-DIBIAXOv.js";function Fs(e,s,o){const t=x.useRef(null),r=x.useRef(null),i=x.useCallback(n=>{n&&(r.current&&t.current&&r.current.removeEventListener(e,t.current,o),n.addEventListener(e,s,o),r.current=n,t.current=s)},[e,s,o]);return x.useEffect(()=>()=>{r.current&&t.current&&r.current.removeEventListener(e,t.current,o)},[e,o]),i}const et=({adapter:e,value:s,timezone:o,props:t})=>{if(s===null)return null;const{minTime:r,maxTime:i,minutesStep:n,shouldDisableTime:c,disableIgnoringDatePartForTimeValidation:p=!1,disablePast:u,disableFuture:h}=t,d=e.date(void 0,o),g=Je(p,e);switch(!0){case!e.isValid(s):return"invalidDate";case!!(r&&g(r,s)):return"minTime";case!!(i&&g(s,i)):return"maxTime";case!!(h&&e.isAfter(s,d)):return"disableFuture";case!!(u&&e.isBefore(s,d)):return"disablePast";case!!(c&&c(s,"hours")):return"shouldDisableTime-hours";case!!(c&&c(s,"minutes")):return"shouldDisableTime-minutes";case!!(c&&c(s,"seconds")):return"shouldDisableTime-seconds";case!!(n&&e.getMinutes(s)%n!==0):return"minutesStep";default:return null}};et.valueManager=ve;function Os(e={}){const{enableAccessibleFieldDOMStructure:s=!0,ampm:o}=e;return x.useMemo(()=>({valueType:"time",validator:et,internal_valueManager:ve,internal_fieldValueManager:is,internal_enableAccessibleFieldDOMStructure:s,internal_useApplyDefaultValuesToFieldInternalProps:Bs,internal_useOpenPickerButtonAriaLabel:Ls(o)}),[o,s])}function Ls(e){return function(o){const t=ge(),r=Fe();return x.useMemo(()=>{const i=(e!=null?e:t.is12HourCycleInCurrentLocale())?"fullTime12h":"fullTime24h",n=t.isValid(o)?t.format(o,i):null;return r.openTimePickerDialogue(n)},[o,r,t])}}function Bs(e){const s=ge(),o=Rt(e),t=x.useMemo(()=>{var r;return(r=e.ampm)!=null?r:s.is12HourCycleInCurrentLocale()},[e.ampm,s]);return x.useMemo(()=>{var r;return v({},e,o,{format:(r=e.format)!=null?r:t?s.formats.fullTime12h:s.formats.fullTime24h})},[e,o,t,s])}function Rt(e){return x.useMemo(()=>{var s,o;return{disablePast:(s=e.disablePast)!=null?s:!1,disableFuture:(o=e.disableFuture)!=null?o:!1}},[e.disablePast,e.disableFuture])}const As=e=>{const s=Os(e);return ls({manager:s,props:e})},_s=["slots","slotProps","InputProps","inputProps"],Et=x.forwardRef(function(s,o){const t=te({props:s,name:"MuiTimeField"}),{slots:r,slotProps:i}=t,n=ue(t,_s),c=cs({slotProps:i,ref:o,externalForwardedProps:n}),p=As(c);return l.jsx(us,{slots:r,slotProps:i,inputRef:n.inputRef,children:l.jsx(ds,{fieldResponse:p,defaultOpenPickerIcon:ms})})});function Rs(e){return Te("MuiPickersToolbarText",e)}xe("MuiPickersToolbarText",["root"]);const Es=["className","classes","selected","value"],Hs=e=>be({root:["root"]},Rs,e),$s=B(nt,{name:"MuiPickersToolbarText",slot:"Root"})(({theme:e})=>({transition:e.transitions.create("color"),color:(e.vars||e).palette.text.secondary,"&[data-selected]":{color:(e.vars||e).palette.text.primary}})),Ht=x.forwardRef(function(s,o){const t=te({props:s,name:"MuiPickersToolbarText"}),{className:r,classes:i,selected:n,value:c}=t,p=ue(t,Es),u=Hs(i);return l.jsx($s,v({ref:o,className:fe(u.root,r),component:"span",ownerState:t},n&&{"data-selected":!0},p,{children:c}))}),Us=["align","className","classes","selected","typographyClassName","value","variant","width"],Ws=e=>be({root:["root"]},ps,e),zs=B(pe,{name:"MuiPickersToolbarButton",slot:"Root"})({padding:0,minWidth:16,textTransform:"none"}),Le=x.forwardRef(function(s,o){const t=te({props:s,name:"MuiPickersToolbarButton"}),{align:r,className:i,classes:n,selected:c,typographyClassName:p,value:u,variant:h,width:d}=t,g=ue(t,Us),f=Ws(n);return l.jsx(zs,v({variant:"text",ref:o,className:fe(f.root,i),ownerState:t},d?{sx:{width:d}}:{},g,{children:l.jsx(Ht,{align:r,className:p,variant:h,value:u,selected:c})}))});function Gs(e){return Te("MuiTimePickerToolbar",e)}const Be=xe("MuiTimePickerToolbar",["root","separator","hourMinuteLabel","hourMinuteLabelLandscape","hourMinuteLabelReverse","ampmSelection","ampmLandscape","ampmLabel"]),Ks=["ampm","ampmInClock","className","classes"],qs=(e,s)=>{const{pickerOrientation:o,toolbarDirection:t}=s;return be({root:["root"],separator:["separator"],hourMinuteLabel:["hourMinuteLabel",o==="landscape"&&"hourMinuteLabelLandscape",t==="rtl"&&"hourMinuteLabelReverse"],ampmSelection:["ampmSelection",o==="landscape"&&"ampmLandscape"],ampmLabel:["ampmLabel"]},Gs,e)},Ys=B(gs,{name:"MuiTimePickerToolbar",slot:"Root"})({}),Qs=B(Ht,{name:"MuiTimePickerToolbar",slot:"Separator"})({outline:0,margin:"0 4px 0 2px",cursor:"default"}),Xs=B("div",{name:"MuiTimePickerToolbar",slot:"HourMinuteLabel",overridesResolver:(e,s)=>[{["&.".concat(Be.hourMinuteLabelLandscape)]:s.hourMinuteLabelLandscape,["&.".concat(Be.hourMinuteLabelReverse)]:s.hourMinuteLabelReverse},s.hourMinuteLabel]})({display:"flex",justifyContent:"flex-end",alignItems:"flex-end",variants:[{props:{toolbarDirection:"rtl"},style:{flexDirection:"row-reverse"}},{props:{pickerOrientation:"landscape"},style:{marginTop:"auto"}}]}),Zs=B("div",{name:"MuiTimePickerToolbar",slot:"AmPmSelection",overridesResolver:(e,s)=>[{[".".concat(Be.ampmLabel)]:s.ampmLabel},{["&.".concat(Be.ampmLandscape)]:s.ampmLandscape},s.ampmSelection]})({display:"flex",flexDirection:"column",marginRight:"auto",marginLeft:12,["& .".concat(Be.ampmLabel)]:{fontSize:17},variants:[{props:{pickerOrientation:"landscape"},style:{margin:"4px 0 auto",flexDirection:"row",justifyContent:"space-around",flexBasis:"100%"}}]});function Js(e){const s=te({props:e,name:"MuiTimePickerToolbar"}),{ampm:o,ampmInClock:t,className:r,classes:i}=s,n=ue(s,Ks),c=ge(),p=Fe(),u=fs(),h=qs(i,u),{value:d,setValue:g,disabled:f,readOnly:k,view:y,setView:I,views:j}=bs(),V=!!(o&&!t&&j.includes("hours")),{meridiemMode:D,handleMeridiemChange:F}=ut(d,o,P=>g(P,{changeImportance:"set",source:"view"})),m=P=>c.isValid(d)?c.format(d,P):"--",M=l.jsx(Qs,{tabIndex:-1,value:":",variant:"h3",selected:!1,className:h.separator});return l.jsxs(Ys,v({landscapeDirection:"row",toolbarTitle:p.timePickerToolbarTitle,ownerState:u,className:fe(h.root,r)},n,{children:[l.jsxs(Xs,{className:h.hourMinuteLabel,ownerState:u,children:[Oe(j,"hours")&&l.jsx(Le,{tabIndex:-1,variant:"h3",onClick:()=>I("hours"),selected:y==="hours",value:m(o?"hours12h":"hours24h")}),Oe(j,["hours","minutes"])&&M,Oe(j,"minutes")&&l.jsx(Le,{tabIndex:-1,variant:"h3",onClick:()=>I("minutes"),selected:y==="minutes",value:m("minutes")}),Oe(j,["minutes","seconds"])&&M,Oe(j,"seconds")&&l.jsx(Le,{variant:"h3",onClick:()=>I("seconds"),selected:y==="seconds",value:m("seconds")})]}),V&&l.jsxs(Zs,{className:h.ampmSelection,ownerState:u,children:[l.jsx(Le,{disableRipple:!0,variant:"subtitle2",selected:D==="am",typographyClassName:h.ampmLabel,value:Me(c,"am"),onClick:k?void 0:()=>F("am"),disabled:f}),l.jsx(Le,{disableRipple:!0,variant:"subtitle2",selected:D==="pm",typographyClassName:h.ampmLabel,value:Me(c,"pm"),onClick:k?void 0:()=>F("pm"),disabled:f})]})]}))}function $t(e,s){var c,p;const o=ge(),t=te({props:e,name:s}),r=Rt(t),i=(c=t.ampm)!=null?c:o.is12HourCycleInCurrentLocale(),n=x.useMemo(()=>{var u;return((u=t.localeText)==null?void 0:u.toolbarTitle)==null?t.localeText:v({},t.localeText,{timePickerToolbarTitle:t.localeText.toolbarTitle})},[t.localeText]);return v({},t,r,{ampm:i,localeText:n},hs({views:t.views,openTo:t.openTo,defaultViews:["hours","minutes"],defaultOpenTo:"hours"}),{slots:v({toolbar:Js},t.slots),slotProps:v({},t.slotProps,{toolbar:v({ampm:i,ampmInClock:t.ampmInClock},(p=t.slotProps)==null?void 0:p.toolbar)})})}function eo(e){return Te("MuiTimeClock",e)}xe("MuiTimeClock",["root","arrowSwitcher"]);const Ne=220,Ce=36,_e={x:Ne/2,y:Ne/2},Ut={x:_e.x,y:0},to=Ut.x-_e.x,so=Ut.y-_e.y,oo=e=>e*(180/Math.PI),Wt=(e,s,o)=>{const t=s-_e.x,r=o-_e.y,i=Math.atan2(to,so)-Math.atan2(t,r);let n=oo(i);n=Math.round(n/e)*e,n%=360;const c=Math.floor(n/e)||0,p=t**2+r**2,u=Math.sqrt(p);return{value:c,distance:u}},no=(e,s,o=1)=>{const t=o*6;let{value:r}=Wt(t,e,s);return r=r*o%60,r},ao=(e,s,o)=>{const{value:t,distance:r}=Wt(30,e,s);let i=t||12;return o?i%=12:r<Ne/2-Ce&&(i+=12,i%=24),i};function ro(e){return Te("MuiClockPointer",e)}xe("MuiClockPointer",["root","thumb"]);const io=["className","classes","isBetweenTwoClockValues","isInner","type","viewValue"],lo=e=>be({root:["root"],thumb:["thumb"]},ro,e),co=B("div",{name:"MuiClockPointer",slot:"Root"})(({theme:e})=>({width:2,backgroundColor:(e.vars||e).palette.primary.main,position:"absolute",left:"calc(50% - 1px)",bottom:"50%",transformOrigin:"center bottom 0px",variants:[{props:{isClockPointerAnimated:!0},style:{transition:e.transitions.create(["transform","height"])}}]})),uo=B("div",{name:"MuiClockPointer",slot:"Thumb"})(({theme:e})=>({width:4,height:4,backgroundColor:(e.vars||e).palette.primary.contrastText,borderRadius:"50%",position:"absolute",top:-21,left:"calc(50% - ".concat(Ce/2,"px)"),border:"".concat((Ce-4)/2,"px solid ").concat((e.vars||e).palette.primary.main),boxSizing:"content-box",variants:[{props:{isClockPointerBetweenTwoValues:!1},style:{backgroundColor:(e.vars||e).palette.primary.main}}]}));function mo(e){const s=te({props:e,name:"MuiClockPointer"}),{className:o,classes:t,isBetweenTwoClockValues:r,isInner:i,type:n,viewValue:c}=s,p=ue(s,io),u=x.useRef(n);x.useEffect(()=>{u.current=n},[n]);const{ownerState:h}=Ie(),d=v({},h,{isClockPointerAnimated:u.current!==n,isClockPointerBetweenTwoValues:r}),g=lo(t),f=()=>{let y=360/(n==="hours"?12:60)*c;return n==="hours"&&c>12&&(y-=360),{height:Math.round((i?.26:.4)*Ne),transform:"rotateZ(".concat(y,"deg)")}};return l.jsx(co,v({style:f(),className:fe(g.root,o),ownerState:d},p,{children:l.jsx(uo,{ownerState:d,className:g.thumb})}))}function po(e){return Te("MuiClock",e)}xe("MuiClock",["root","clock","wrapper","squareMask","pin","amButton","pmButton","meridiemText","selected"]);const fo=(e,s)=>{const o={root:["root"],clock:["clock"],wrapper:["wrapper"],squareMask:["squareMask"],pin:["pin"],amButton:["amButton",s.clockMeridiemMode==="am"&&"selected"],pmButton:["pmButton",s.clockMeridiemMode==="pm"&&"selected"],meridiemText:["meridiemText"]};return be(o,po,e)},bo=B("div",{name:"MuiClock",slot:"Root"})(({theme:e})=>({display:"flex",justifyContent:"center",alignItems:"center",margin:e.spacing(2)})),go=B("div",{name:"MuiClock",slot:"Clock"})({backgroundColor:"rgba(0,0,0,.07)",borderRadius:"50%",height:220,width:220,flexShrink:0,position:"relative",pointerEvents:"none"}),ho=B("div",{name:"MuiClock",slot:"Wrapper"})({"&:focus":{outline:"none"}}),ko=B("div",{name:"MuiClock",slot:"SquareMask"})({width:"100%",height:"100%",position:"absolute",pointerEvents:"auto",outline:0,touchAction:"none",userSelect:"none",variants:[{props:{isClockDisabled:!1},style:{"@media (pointer: fine)":{cursor:"pointer",borderRadius:"50%"},"&:active":{cursor:"move"}}}]}),Co=B("div",{name:"MuiClock",slot:"Pin"})(({theme:e})=>({width:6,height:6,borderRadius:"50%",backgroundColor:(e.vars||e).palette.primary.main,position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)"})),zt=(e,s)=>({zIndex:1,bottom:8,paddingLeft:4,paddingRight:4,width:Ce,variants:[{props:{clockMeridiemMode:s},style:{backgroundColor:(e.vars||e).palette.primary.main,color:(e.vars||e).palette.primary.contrastText,"&:hover":{backgroundColor:(e.vars||e).palette.primary.light}}}]}),To=B(It,{name:"MuiClock",slot:"AmButton"})(({theme:e})=>v({},zt(e,"am"),{position:"absolute",left:8})),xo=B(It,{name:"MuiClock",slot:"PmButton"})(({theme:e})=>v({},zt(e,"pm"),{position:"absolute",right:8})),yt=B(nt,{name:"MuiClock",slot:"MeridiemText"})({overflow:"hidden",whiteSpace:"nowrap",textOverflow:"ellipsis"});function wo(e){const s=te({props:e,name:"MuiClock"}),{ampm:o,ampmInClock:t,autoFocus:r,children:i,value:n,handleMeridiemChange:c,isTimeDisabled:p,meridiemMode:u,minutesStep:h=1,onChange:d,selectedId:g,type:f,viewValue:k,viewRange:[y,I],disabled:j=!1,readOnly:V,className:D,classes:F}=s,m=ge(),M=Fe(),{ownerState:P}=Ie(),A=v({},P,{isClockDisabled:j,clockMeridiemMode:u}),N=x.useRef(!1),w=fo(F,A),R=p(k,f),q=!o&&f==="hours"&&(k<1||k>12),O=(C,le)=>{j||V||p(C,f)||d(C,le)},L=(C,le)=>{let{offsetX:U,offsetY:oe}=C;if(U===void 0){const ne=C.target.getBoundingClientRect();U=C.changedTouches[0].clientX-ne.left,oe=C.changedTouches[0].clientY-ne.top}const ee=f==="seconds"||f==="minutes"?no(U,oe,h):ao(U,oe,!!o);O(ee,le)},se=C=>{N.current=!0,L(C,"shallow")},X=C=>{N.current&&(L(C,"finish"),N.current=!1),C.preventDefault()},he=C=>{C.buttons>0&&L(C.nativeEvent,"shallow")},de=C=>{N.current&&(N.current=!1),L(C.nativeEvent,"finish")},J=f==="hours"?!1:k%5!==0,ke=f==="minutes"?h:1,_=x.useRef(null);at(()=>{r&&_.current.focus()},[r]);const H=C=>Math.max(y,Math.min(I,C)),K=C=>(C+(I+1))%(I+1),Y=C=>{if(!N.current)switch(C.key){case"Home":O(y,"partial"),C.preventDefault();break;case"End":O(I,"partial"),C.preventDefault();break;case"ArrowUp":O(K(k+ke),"partial"),C.preventDefault();break;case"ArrowDown":O(K(k-ke),"partial"),C.preventDefault();break;case"PageUp":O(H(k+5),"partial"),C.preventDefault();break;case"PageDown":O(H(k-5),"partial"),C.preventDefault();break;case"Enter":case" ":O(k,"finish"),C.preventDefault();break}};return l.jsxs(bo,{className:fe(w.root,D),children:[l.jsxs(go,{className:w.clock,children:[l.jsx(ko,{onTouchMove:se,onTouchStart:se,onTouchEnd:X,onMouseUp:de,onMouseMove:he,ownerState:A,className:w.squareMask}),!R&&l.jsxs(x.Fragment,{children:[l.jsx(Co,{className:w.pin}),n!=null&&l.jsx(mo,{type:f,viewValue:k,isInner:q,isBetweenTwoClockValues:J})]}),l.jsx(ho,{"aria-activedescendant":g,"aria-label":M.clockLabelText(f,n==null?null:m.format(n,o?"fullTime12h":"fullTime24h")),ref:_,role:"listbox",onKeyDown:Y,tabIndex:0,className:w.wrapper,children:i})]}),o&&t&&l.jsxs(x.Fragment,{children:[l.jsx(To,{onClick:V?void 0:()=>c("am"),disabled:j||u===null,ownerState:A,className:w.amButton,title:Me(m,"am"),children:l.jsx(yt,{variant:"caption",className:w.meridiemText,children:Me(m,"am")})}),l.jsx(xo,{disabled:j||u===null,onClick:V?void 0:()=>c("pm"),ownerState:A,className:w.pmButton,title:Me(m,"pm"),children:l.jsx(yt,{variant:"caption",className:w.meridiemText,children:Me(m,"pm")})})]})]})}function yo(e){return Te("MuiClockNumber",e)}const Ue=xe("MuiClockNumber",["root","selected","disabled"]),So=["className","classes","disabled","index","inner","label","selected"],Mo=(e,s)=>{const o={root:["root",s.isClockNumberSelected&&"selected",s.isClockNumberDisabled&&"disabled"]};return be(o,yo,e)},vo=B("span",{name:"MuiClockNumber",slot:"Root",overridesResolver:(e,s)=>[s.root,{["&.".concat(Ue.disabled)]:s.disabled},{["&.".concat(Ue.selected)]:s.selected}]})(({theme:e})=>({height:Ce,width:Ce,position:"absolute",left:"calc((100% - ".concat(Ce,"px) / 2)"),display:"inline-flex",justifyContent:"center",alignItems:"center",borderRadius:"50%",color:(e.vars||e).palette.text.primary,fontFamily:e.typography.fontFamily,"&:focused":{backgroundColor:(e.vars||e).palette.background.paper},["&.".concat(Ue.selected)]:{color:(e.vars||e).palette.primary.contrastText},["&.".concat(Ue.disabled)]:{pointerEvents:"none",color:(e.vars||e).palette.text.disabled},variants:[{props:{isClockNumberInInnerRing:!0},style:v({},e.typography.body2,{color:(e.vars||e).palette.text.secondary})}]}));function Gt(e){const s=te({props:e,name:"MuiClockNumber"}),{className:o,classes:t,disabled:r,index:i,inner:n,label:c,selected:p}=s,u=ue(s,So),{ownerState:h}=Ie(),d=v({},h,{isClockNumberInInnerRing:n,isClockNumberSelected:p,isClockNumberDisabled:r}),g=Mo(t,d),f=i%12/12*Math.PI*2-Math.PI/2,k=(Ne-Ce-2)/2*(n?.65:1),y=Math.round(Math.cos(f)*k),I=Math.round(Math.sin(f)*k);return l.jsx(vo,v({className:fe(g.root,o),"aria-disabled":r?!0:void 0,"aria-selected":p?!0:void 0,role:"option",style:{transform:"translate(".concat(y,"px, ").concat(I+(Ne-Ce)/2,"px")},ownerState:d},u,{children:c}))}const Po=({ampm:e,value:s,getClockNumberText:o,isDisabled:t,selectedId:r,adapter:i})=>{const n=s?i.getHours(s):null,c=[],p=e?1:0,u=e?12:23,h=d=>n===null?!1:e?d===12?n===12||n===0:n===d||n-12===d:n===d;for(let d=p;d<=u;d+=1){let g=d.toString();d===0&&(g="00");const f=!e&&(d===0||d>12);g=i.formatNumber(g);const k=h(d);c.push(l.jsx(Gt,{id:k?r:void 0,index:d,inner:f,selected:k,disabled:t(d),label:g,"aria-label":o(g)},d))}return c},St=({adapter:e,value:s,isDisabled:o,getClockNumberText:t,selectedId:r})=>{const i=e.formatNumber;return[[5,i("05")],[10,i("10")],[15,i("15")],[20,i("20")],[25,i("25")],[30,i("30")],[35,i("35")],[40,i("40")],[45,i("45")],[50,i("50")],[55,i("55")],[0,i("00")]].map(([n,c],p)=>{const u=n===s;return l.jsx(Gt,{label:c,id:u?r:void 0,index:p+1,inner:!1,disabled:o(n),selected:u,"aria-label":t(c)},n)})},bt=({value:e,referenceDate:s,adapter:o,props:t,timezone:r})=>{const i=x.useMemo(()=>ve.getInitialReferenceValue({value:e,adapter:o,props:t,referenceDate:s,granularity:Cs.day,timezone:r,getTodayDate:()=>ks(o,r,"date")}),[s,r]);return e!=null?e:i},Do=["ampm","ampmInClock","autoFocus","slots","slotProps","value","defaultValue","referenceDate","disableIgnoringDatePartForTimeValidation","maxTime","minTime","disableFuture","disablePast","minutesStep","shouldDisableTime","showViewSwitcher","onChange","view","views","openTo","onViewChange","focusedView","onFocusedViewChange","className","classes","disabled","readOnly","timezone"],Io=e=>be({root:["root"],arrowSwitcher:["arrowSwitcher"]},eo,e),jo=B(ft,{name:"MuiTimeClock",slot:"Root"})({display:"flex",flexDirection:"column",position:"relative"}),Vo=B(Ts,{name:"MuiTimeClock",slot:"ArrowSwitcher"})({position:"absolute",right:12,top:15}),No=["hours","minutes"],Fo=x.forwardRef(function(s,o){const t=ge(),r=te({props:s,name:"MuiTimeClock"}),{ampm:i=t.is12HourCycleInCurrentLocale(),ampmInClock:n=!1,autoFocus:c,slots:p,slotProps:u,value:h,defaultValue:d,referenceDate:g,disableIgnoringDatePartForTimeValidation:f=!1,maxTime:k,minTime:y,disableFuture:I,disablePast:j,minutesStep:V=1,shouldDisableTime:D,showViewSwitcher:F,onChange:m,view:M,views:P=No,openTo:A,onViewChange:N,focusedView:w,onFocusedViewChange:R,className:q,classes:O,disabled:L,readOnly:se,timezone:X}=r,he=ue(r,Do),{value:de,handleValueChange:J,timezone:ke}=dt({name:"TimeClock",timezone:X,value:h,defaultValue:d,referenceDate:g,onChange:m,valueManager:ve}),_=bt({value:de,referenceDate:g,adapter:t,props:r,timezone:ke}),H=Fe(),K=mt(ke),Y=Xt(),{ownerState:C}=Ie(),{view:le,setView:U,previousView:oe,nextView:ee,setValueAndGoToNextView:ne}=pt({view:M,views:P,openTo:A,onViewChange:N,onChange:J,focusedView:w,onFocusedViewChange:R}),{meridiemMode:ae,handleMeridiemChange:re}=ut(_,i,ne),me=x.useCallback((z,Q)=>{const $=Je(f,t),Z=Q==="hours"||Q==="minutes"&&P.includes("seconds"),b=({start:S,end:E})=>!(y&&$(y,E)||k&&$(S,k)||I&&$(S,K)||j&&$(K,Z?E:S)),T=(S,E=1)=>{if(S%E!==0)return!1;if(D)switch(Q){case"hours":return!D(t.setHours(_,S),"hours");case"minutes":return!D(t.setMinutes(_,S),"minutes");case"seconds":return!D(t.setSeconds(_,S),"seconds");default:return!1}return!0};switch(Q){case"hours":{const S=Ye(z,ae,i),E=t.setHours(_,S);if(t.getHours(E)!==S)return!0;const G=t.setSeconds(t.setMinutes(E,0),0),je=t.setSeconds(t.setMinutes(E,59),59);return!b({start:G,end:je})||!T(S)}case"minutes":{const S=t.setMinutes(_,z),E=t.setSeconds(S,0),G=t.setSeconds(S,59);return!b({start:E,end:G})||!T(z,V)}case"seconds":{const S=t.setSeconds(_,z);return!b({start:S,end:S})||!T(z)}default:throw new Error("not supported")}},[i,_,f,k,ae,y,V,D,t,I,j,K,P]),we=x.useMemo(()=>{switch(le){case"hours":{const z=(Z,b)=>{const T=Ye(Z,ae,i);ne(t.setHours(_,T),b,"hours")},Q=t.getHours(_);let $;return i?Q>12?$=[12,23]:$=[0,11]:$=[0,23],{onChange:z,viewValue:Q,children:Po({value:de,adapter:t,ampm:i,getClockNumberText:H.hoursClockNumberText,isDisabled:Z=>L||me(Z,"hours"),selectedId:Y}),viewRange:$}}case"minutes":{const z=t.getMinutes(_);return{viewValue:z,onChange:($,Z)=>{ne(t.setMinutes(_,$),Z,"minutes")},children:St({adapter:t,value:z,getClockNumberText:H.minutesClockNumberText,isDisabled:$=>L||me($,"minutes"),selectedId:Y}),viewRange:[0,59]}}case"seconds":{const z=t.getSeconds(_);return{viewValue:z,onChange:($,Z)=>{ne(t.setSeconds(_,$),Z,"seconds")},children:St({adapter:t,value:z,getClockNumberText:H.secondsClockNumberText,isDisabled:$=>L||me($,"seconds"),selectedId:Y}),viewRange:[0,59]}}default:throw new Error("You must provide the type for ClockView")}},[le,t,de,i,H.hoursClockNumberText,H.minutesClockNumberText,H.secondsClockNumberText,ae,ne,_,me,Y,L]),Pe=Io(O);return l.jsxs(jo,v({ref:o,className:fe(Pe.root,q),ownerState:C},he,{children:[l.jsx(wo,v({autoFocus:c!=null?c:!!w,ampmInClock:n&&P.includes("hours"),value:de,type:le,ampm:i,minutesStep:V,isTimeDisabled:me,meridiemMode:ae,handleMeridiemChange:re,selectedId:Y,disabled:L,readOnly:se},we)),F&&l.jsx(Vo,{className:Pe.arrowSwitcher,slots:p,slotProps:u,onGoToPrevious:()=>U(oe),isPreviousDisabled:!oe,previousLabel:H.openPreviousView,onGoToNext:()=>U(ee),isNextDisabled:!ee,nextLabel:H.openNextView,ownerState:C})]}))});function Oo(e){return Te("MuiDigitalClock",e)}xe("MuiDigitalClock",["root","list","item"]);const Lo=["ampm","timeStep","autoFocus","slots","slotProps","value","defaultValue","referenceDate","disableIgnoringDatePartForTimeValidation","maxTime","minTime","disableFuture","disablePast","minutesStep","shouldDisableTime","onChange","view","openTo","onViewChange","focusedView","onFocusedViewChange","className","classes","disabled","readOnly","views","skipDisabled","timezone"],Bo=e=>be({root:["root"],list:["list"],item:["item"]},Oo,e),Ao=B(ft,{name:"MuiDigitalClock",slot:"Root"})({overflowY:"auto",width:"100%",scrollbarWidth:"thin","@media (prefers-reduced-motion: no-preference)":{scrollBehavior:"auto"},maxHeight:Ot,variants:[{props:{hasDigitalClockAlreadyBeenRendered:!0},style:{"@media (prefers-reduced-motion: no-preference)":{scrollBehavior:"smooth"}}}]}),_o=B(Nt,{name:"MuiDigitalClock",slot:"List"})({padding:0}),Ro=B(Vt,{name:"MuiDigitalClock",slot:"Item",shouldForwardProp:e=>e!=="itemValue"&&e!=="formattedValue"})(({theme:e})=>({padding:"8px 16px",margin:"2px 4px","&:first-of-type":{marginTop:4},"&:hover":{backgroundColor:e.vars?"rgba(".concat(e.vars.palette.primary.mainChannel," / ").concat(e.vars.palette.action.hoverOpacity,")"):Ke(e.palette.primary.main,e.palette.action.hoverOpacity)},"&.Mui-selected":{backgroundColor:(e.vars||e).palette.primary.main,color:(e.vars||e).palette.primary.contrastText,"&:focus-visible, &:hover":{backgroundColor:(e.vars||e).palette.primary.dark}},"&.Mui-focusVisible":{backgroundColor:e.vars?"rgba(".concat(e.vars.palette.primary.mainChannel," / ").concat(e.vars.palette.action.focusOpacity,")"):Ke(e.palette.primary.main,e.palette.action.focusOpacity)}})),Eo=x.forwardRef(function(s,o){var Z;const t=ge(),r=x.useRef(null),i=jt(o,r),n=x.useRef(null),c=te({props:s,name:"MuiDigitalClock"}),{ampm:p=t.is12HourCycleInCurrentLocale(),timeStep:u=30,autoFocus:h,slots:d,slotProps:g,value:f,defaultValue:k,referenceDate:y,disableIgnoringDatePartForTimeValidation:I=!1,maxTime:j,minTime:V,disableFuture:D,disablePast:F,minutesStep:m=1,shouldDisableTime:M,onChange:P,view:A,openTo:N,onViewChange:w,focusedView:R,onFocusedViewChange:q,className:O,classes:L,disabled:se,readOnly:X,views:he=["hours"],skipDisabled:de=!1,timezone:J}=c,ke=ue(c,Lo),{value:_,handleValueChange:H,timezone:K}=dt({name:"DigitalClock",timezone:J,value:f,defaultValue:k,referenceDate:y,onChange:P,valueManager:ve}),Y=Fe(),C=mt(K),{ownerState:le}=Ie(),U=v({},le,{hasDigitalClockAlreadyBeenRendered:!!r.current}),oe=Bo(L),ee=(Z=d==null?void 0:d.digitalClockItem)!=null?Z:Ro,ne=Zt({elementType:ee,externalSlotProps:g==null?void 0:g.digitalClockItem,ownerState:U,className:oe.item}),ae=bt({value:_,referenceDate:y,adapter:t,props:c,timezone:K}),re=Ge(b=>H(b,"finish","hours")),{setValueAndGoToNextView:me}=pt({view:A,views:he,openTo:N,onViewChange:w,onChange:re,focusedView:R,onFocusedViewChange:q}),we=Ge(b=>{me(b,"finish")});at(()=>{if(r.current===null)return;const b=r.current.querySelector('[role="listbox"] [role="option"][tabindex="0"], [role="listbox"] [role="option"][aria-selected="true"]');if(!b)return;const T=b.offsetTop;(h||R)&&b.focus(),r.current.scrollTop=T-4});const Pe=x.useCallback(b=>{const T=Je(I,t),S=()=>!(V&&T(V,b)||j&&T(b,j)||D&&T(b,C)||F&&T(C,b)),E=()=>t.getMinutes(b)%m!==0?!1:M?!M(b,"hours"):!0;return!S()||!E()},[I,t,V,j,D,C,F,m,M]),z=x.useMemo(()=>{const b=[];let S=t.startOfDay(ae);for(;t.isSameDay(ae,S);)b.push(S),S=t.addMinutes(S,u);return b},[ae,u,t]),Q=z.findIndex(b=>t.isEqual(b,ae)),$=b=>{switch(b.key){case"PageUp":{const T=Qe(n.current)-5,S=n.current.children,E=Math.max(0,T),G=S[E];G&&G.focus(),b.preventDefault();break}case"PageDown":{const T=Qe(n.current)+5,S=n.current.children,E=Math.min(S.length-1,T),G=S[E];G&&G.focus(),b.preventDefault();break}}};return l.jsx(Ao,v({ref:i,className:fe(oe.root,O),ownerState:U},ke,{children:l.jsx(_o,{ref:n,role:"listbox","aria-label":Y.timePickerToolbarTitle,className:oe.list,onKeyDown:$,children:z.map((b,T)=>{const S=Pe(b);if(de&&S)return null;const E=t.isEqual(b,_),G=t.format(b,p?"fullTime12h":"fullTime24h"),W=Q===T||Q===-1&&T===0?0:-1;return l.jsx(ee,v({onClick:()=>!X&&we(b),selected:E,disabled:se||S,disableRipple:X,role:"option","aria-disabled":X,"aria-selected":E,tabIndex:W,itemValue:b,formattedValue:G},ne,{children:G}),"".concat(b.valueOf(),"-").concat(G))})})}))});function Ho(e){return Te("MuiMultiSectionDigitalClock",e)}xe("MuiMultiSectionDigitalClock",["root"]);function $o(e){return Te("MuiMultiSectionDigitalClockSection",e)}xe("MuiMultiSectionDigitalClockSection",["root","item"]);const Uo=["autoFocus","onChange","className","classes","disabled","readOnly","items","active","slots","slotProps","skipDisabled"],Wo=e=>be({root:["root"],item:["item"]},$o,e),zo=B(Nt,{name:"MuiMultiSectionDigitalClockSection",slot:"Root"})(({theme:e})=>({maxHeight:Ot,width:56,padding:0,overflow:"hidden",scrollbarWidth:"thin","@media (prefers-reduced-motion: no-preference)":{scrollBehavior:"auto"},"@media (pointer: fine)":{"&:hover":{overflowY:"auto"}},"@media (pointer: none), (pointer: coarse)":{overflowY:"auto"},"&:not(:first-of-type)":{borderLeft:"1px solid ".concat((e.vars||e).palette.divider)},variants:[{props:{hasDigitalClockAlreadyBeenRendered:!0},style:{"@media (prefers-reduced-motion: no-preference)":{scrollBehavior:"smooth"}}}]})),Go=B(Vt,{name:"MuiMultiSectionDigitalClockSection",slot:"Item"})(({theme:e})=>({padding:8,margin:"2px 4px",width:xs,justifyContent:"center","&:first-of-type":{marginTop:4},"&:hover":{backgroundColor:e.vars?"rgba(".concat(e.vars.palette.primary.mainChannel," / ").concat(e.vars.palette.action.hoverOpacity,")"):Ke(e.palette.primary.main,e.palette.action.hoverOpacity)},"&.Mui-selected":{backgroundColor:(e.vars||e).palette.primary.main,color:(e.vars||e).palette.primary.contrastText,"&:focus-visible, &:hover":{backgroundColor:(e.vars||e).palette.primary.dark}},"&.Mui-focusVisible":{backgroundColor:e.vars?"rgba(".concat(e.vars.palette.primary.mainChannel," / ").concat(e.vars.palette.action.focusOpacity,")"):Ke(e.palette.primary.main,e.palette.action.focusOpacity)}})),Ko=x.forwardRef(function(s,o){var N;const t=x.useRef(null),r=jt(o,t),i=x.useRef(null),n=te({props:s,name:"MuiMultiSectionDigitalClockSection"}),{autoFocus:c,onChange:p,className:u,classes:h,disabled:d,readOnly:g,items:f,active:k,slots:y,slotProps:I,skipDisabled:j}=n,V=ue(n,Uo),{ownerState:D}=Ie(),F=v({},D,{hasDigitalClockAlreadyBeenRendered:!!t.current}),m=Wo(h),M=(N=y==null?void 0:y.digitalClockSectionItem)!=null?N:Go;at(()=>{if(t.current===null)return;const w=t.current.querySelector('[role="option"][tabindex="0"], [role="option"][aria-selected="true"]');if(k&&c&&w&&w.focus(),!w||i.current===w)return;i.current=w;const R=w.offsetTop,q=w.offsetHeight,O=t.current.clientHeight,L=t.current.scrollHeight,se=R-O/2+q/2,X=L-O,he=Math.min(se,X);t.current.scrollTop=Math.max(0,he)});const P=f.findIndex(w=>w.isFocused(w.value)),A=w=>{switch(w.key){case"PageUp":{const R=Qe(t.current)-5,q=t.current.children,O=Math.max(0,R),L=q[O];L&&L.focus(),w.preventDefault();break}case"PageDown":{const R=Qe(t.current)+5,q=t.current.children,O=Math.min(q.length-1,R),L=q[O];L&&L.focus(),w.preventDefault();break}}};return l.jsx(zo,v({ref:r,className:fe(m.root,u),ownerState:F,autoFocusItem:c&&k,role:"listbox",onKeyDown:A},V,{children:f.map((w,R)=>{var X;const q=(X=w.isDisabled)==null?void 0:X.call(w,w.value),O=d||q;if(j&&O)return null;const L=w.isSelected(w.value),se=P===R||P===-1&&R===0?0:-1;return l.jsx(M,v({onClick:()=>!g&&p(w.value),selected:L,disabled:O,disableRipple:g,role:"option","aria-disabled":g||O||void 0,"aria-label":w.ariaLabel,"aria-selected":L,tabIndex:se,className:m.item},I==null?void 0:I.digitalClockSectionItem,{children:w.label}),w.label)})}))}),qo=({now:e,value:s,adapter:o,ampm:t,isDisabled:r,resolveAriaLabel:i,timeStep:n,valueOrReferenceDate:c})=>{const p=s?o.getHours(s):null,u=[],h=(f,k)=>{const y=k!=null?k:p;return y===null?!1:t?f===12?y===12||y===0:y===f||y-12===f:y===f},d=f=>h(f,o.getHours(c)),g=t?11:23;for(let f=0;f<=g;f+=n){let k=o.format(o.setHours(e,f),t?"hours12h":"hours24h");const y=i(parseInt(k,10).toString());k=o.formatNumber(k),u.push({value:f,label:k,isSelected:h,isDisabled:r,isFocused:d,ariaLabel:y})}return u},Mt=({value:e,adapter:s,isDisabled:o,timeStep:t,resolveLabel:r,resolveAriaLabel:i,hasValue:n=!0})=>{const c=u=>e===null?!1:n&&e===u,p=u=>e===u;return[...Array.from({length:Math.ceil(60/t)},(u,h)=>{const d=t*h;return{value:d,label:s.formatNumber(r(d)),isDisabled:o,isSelected:c,isFocused:p,ariaLabel:i(d.toString())}})]},Yo=["ampm","timeSteps","autoFocus","slots","slotProps","value","defaultValue","referenceDate","disableIgnoringDatePartForTimeValidation","maxTime","minTime","disableFuture","disablePast","minutesStep","shouldDisableTime","onChange","view","views","openTo","onViewChange","focusedView","onFocusedViewChange","className","classes","disabled","readOnly","skipDisabled","timezone"],Qo=e=>be({root:["root"]},Ho,e),Xo=B(ft,{name:"MuiMultiSectionDigitalClock",slot:"Root"})(({theme:e})=>({flexDirection:"row",width:"100%",borderBottom:"1px solid ".concat((e.vars||e).palette.divider)})),Zo=x.forwardRef(function(s,o){const t=ge(),r=Jt(),i=te({props:s,name:"MuiMultiSectionDigitalClock"}),{ampm:n=t.is12HourCycleInCurrentLocale(),timeSteps:c,autoFocus:p,slots:u,slotProps:h,value:d,defaultValue:g,referenceDate:f,disableIgnoringDatePartForTimeValidation:k=!1,maxTime:y,minTime:I,disableFuture:j,disablePast:V,minutesStep:D=1,shouldDisableTime:F,onChange:m,view:M,views:P=["hours","minutes"],openTo:A,onViewChange:N,focusedView:w,onFocusedViewChange:R,className:q,classes:O,disabled:L,readOnly:se,skipDisabled:X=!1,timezone:he}=i,de=ue(i,Yo),{value:J,handleValueChange:ke,timezone:_}=dt({name:"MultiSectionDigitalClock",timezone:he,value:d,defaultValue:g,referenceDate:f,onChange:m,valueManager:ve}),H=Fe(),K=mt(_),Y=x.useMemo(()=>v({hours:1,minutes:5,seconds:5},c),[c]),C=bt({value:J,referenceDate:f,adapter:t,props:i,timezone:_}),le=Ge((b,T,S)=>ke(b,T,S)),U=x.useMemo(()=>!n||!P.includes("hours")||P.includes("meridiem")?P:[...P,"meridiem"],[n,P]),{view:oe,setValueAndGoToNextView:ee,focusedView:ne}=pt({view:M,views:U,openTo:A,onViewChange:N,onChange:le,focusedView:w,onFocusedViewChange:R}),ae=Ge(b=>{ee(b,"finish","meridiem")}),{meridiemMode:re,handleMeridiemChange:me}=ut(C,n,ae,"finish"),we=x.useCallback((b,T)=>{const S=Je(k,t),E=T==="hours"||T==="minutes"&&U.includes("seconds"),G=({start:W,end:ce})=>!(I&&S(I,ce)||y&&S(W,y)||j&&S(W,K)||V&&S(K,E?ce:W)),je=(W,ce=1)=>{if(W%ce!==0)return!1;if(F)switch(T){case"hours":return!F(t.setHours(C,W),"hours");case"minutes":return!F(t.setMinutes(C,W),"minutes");case"seconds":return!F(t.setSeconds(C,W),"seconds");default:return!1}return!0};switch(T){case"hours":{const W=Ye(b,re,n),ce=t.setHours(C,W);if(t.getHours(ce)!==W)return!0;const Ee=t.setSeconds(t.setMinutes(ce,0),0),Qt=t.setSeconds(t.setMinutes(ce,59),59);return!G({start:Ee,end:Qt})||!je(W)}case"minutes":{const W=t.setMinutes(C,b),ce=t.setSeconds(W,0),Ee=t.setSeconds(W,59);return!G({start:ce,end:Ee})||!je(b,D)}case"seconds":{const W=t.setSeconds(C,b);return!G({start:W,end:W})||!je(b)}default:throw new Error("not supported")}},[n,C,k,y,re,I,D,F,t,j,V,K,U]),Pe=x.useCallback(b=>{switch(b){case"hours":return{onChange:T=>{const S=Ye(T,re,n);ee(t.setHours(C,S),"finish","hours")},items:qo({now:K,value:J,ampm:n,adapter:t,isDisabled:T=>we(T,"hours"),timeStep:Y.hours,resolveAriaLabel:H.hoursClockNumberText,valueOrReferenceDate:C})};case"minutes":return{onChange:T=>{ee(t.setMinutes(C,T),"finish","minutes")},items:Mt({value:t.getMinutes(C),adapter:t,isDisabled:T=>we(T,"minutes"),resolveLabel:T=>t.format(t.setMinutes(K,T),"minutes"),timeStep:Y.minutes,hasValue:!!J,resolveAriaLabel:H.minutesClockNumberText})};case"seconds":return{onChange:T=>{ee(t.setSeconds(C,T),"finish","seconds")},items:Mt({value:t.getSeconds(C),adapter:t,isDisabled:T=>we(T,"seconds"),resolveLabel:T=>t.format(t.setSeconds(K,T),"seconds"),timeStep:Y.seconds,hasValue:!!J,resolveAriaLabel:H.secondsClockNumberText})};case"meridiem":{const T=Me(t,"am"),S=Me(t,"pm");return{onChange:me,items:[{value:"am",label:T,isSelected:()=>!!J&&re==="am",isFocused:()=>!!C&&re==="am",ariaLabel:T},{value:"pm",label:S,isSelected:()=>!!J&&re==="pm",isFocused:()=>!!C&&re==="pm",ariaLabel:S}]}}default:throw new Error("Unknown view: ".concat(b," found."))}},[K,J,n,t,Y.hours,Y.minutes,Y.seconds,H.hoursClockNumberText,H.minutesClockNumberText,H.secondsClockNumberText,re,ee,C,we,me]),z=x.useMemo(()=>{if(!r)return U;const b=U.filter(T=>T!=="meridiem");return b.reverse(),U.includes("meridiem")&&b.push("meridiem"),b},[r,U]),Q=x.useMemo(()=>U.reduce((b,T)=>v({},b,{[T]:Pe(T)}),{}),[U,Pe]),{ownerState:$}=Ie(),Z=Qo(O);return l.jsx(Xo,v({ref:o,className:fe(Z.root,q),ownerState:$,role:"group"},de,{children:z.map(b=>l.jsx(Ko,{items:Q[b].items,onChange:Q[b].onChange,active:oe===b,autoFocus:p||ne===b,disabled:L,readOnly:se,slots:u,slotProps:h,skipDisabled:X,"aria-label":H.selectViewText(b)},b))}))}),tt=({view:e,onViewChange:s,focusedView:o,onFocusedViewChange:t,views:r,value:i,defaultValue:n,referenceDate:c,onChange:p,className:u,classes:h,disableFuture:d,disablePast:g,minTime:f,maxTime:k,shouldDisableTime:y,minutesStep:I,ampm:j,ampmInClock:V,slots:D,slotProps:F,readOnly:m,disabled:M,sx:P,autoFocus:A,showViewSwitcher:N,disableIgnoringDatePartForTimeValidation:w,timezone:R})=>l.jsx(Fo,{view:e,onViewChange:s,focusedView:o&&Ae(o)?o:null,onFocusedViewChange:t,views:r.filter(Ae),value:i,defaultValue:n,referenceDate:c,onChange:p,className:u,classes:h,disableFuture:d,disablePast:g,minTime:f,maxTime:k,shouldDisableTime:y,minutesStep:I,ampm:j,ampmInClock:V,slots:D,slotProps:F,readOnly:m,disabled:M,sx:P,autoFocus:A,showViewSwitcher:N,disableIgnoringDatePartForTimeValidation:w,timezone:R}),Jo=({view:e,onViewChange:s,focusedView:o,onFocusedViewChange:t,views:r,value:i,defaultValue:n,referenceDate:c,onChange:p,className:u,classes:h,disableFuture:d,disablePast:g,minTime:f,maxTime:k,shouldDisableTime:y,minutesStep:I,ampm:j,slots:V,slotProps:D,readOnly:F,disabled:m,sx:M,autoFocus:P,disableIgnoringDatePartForTimeValidation:A,timeSteps:N,skipDisabled:w,timezone:R})=>l.jsx(Eo,{view:e,onViewChange:s,focusedView:o&&Ae(o)?o:null,onFocusedViewChange:t,views:r.filter(Ae),value:i,defaultValue:n,referenceDate:c,onChange:p,className:u,classes:h,disableFuture:d,disablePast:g,minTime:f,maxTime:k,shouldDisableTime:y,minutesStep:I,ampm:j,slots:V,slotProps:D,readOnly:F,disabled:m,sx:M,autoFocus:P,disableIgnoringDatePartForTimeValidation:A,timeStep:N==null?void 0:N.minutes,skipDisabled:w,timezone:R}),vt=({view:e,onViewChange:s,focusedView:o,onFocusedViewChange:t,views:r,value:i,defaultValue:n,referenceDate:c,onChange:p,className:u,classes:h,disableFuture:d,disablePast:g,minTime:f,maxTime:k,shouldDisableTime:y,minutesStep:I,ampm:j,slots:V,slotProps:D,readOnly:F,disabled:m,sx:M,autoFocus:P,disableIgnoringDatePartForTimeValidation:A,timeSteps:N,skipDisabled:w,timezone:R})=>l.jsx(Zo,{view:e,onViewChange:s,focusedView:o&&Lt(o)?o:null,onFocusedViewChange:t,views:r.filter(Ae),value:i,defaultValue:n,referenceDate:c,onChange:p,className:u,classes:h,disableFuture:d,disablePast:g,minTime:f,maxTime:k,shouldDisableTime:y,minutesStep:I,ampm:j,slots:V,slotProps:D,readOnly:F,disabled:m,sx:M,autoFocus:P,disableIgnoringDatePartForTimeValidation:A,timeSteps:N,skipDisabled:w,timezone:R}),en=(e,s,o)=>o?s.filter(t=>!Lt(t)||t==="hours"):e?[...s,"meridiem"]:s,tn=(e,s)=>{var o,t;return 24*60/(((o=e.hours)!=null?o:1)*((t=e.minutes)!=null?t:5))<=s};function sn({thresholdToRenderTimeInASingleColumn:e,ampm:s,timeSteps:o,views:t}){const r=e!=null?e:24,i=v({hours:1,minutes:5,seconds:5},o),n=tn(i,r);return{thresholdToRenderTimeInASingleColumn:r,timeSteps:i,shouldRenderTimeInASingleColumn:n,views:en(s,t,n)}}const Kt=x.forwardRef(function(s,o){var y,I,j;const t=ge(),r=$t(s,"MuiDesktopTimePicker"),{shouldRenderTimeInASingleColumn:i,views:n,timeSteps:c}=sn(r),p=i?Jo:vt,u=v({hours:p,minutes:p,seconds:p,meridiem:p},r.viewRenderers),h=(y=r.ampmInClock)!=null?y:!0,g=((I=u.hours)==null?void 0:I.name)===vt.name?n:n.filter(V=>V!=="meridiem"),f=v({},r,{ampmInClock:h,timeSteps:c,viewRenderers:u,format:Bt(t,r),views:i?["hours"]:g,slots:v({field:Et},r.slots),slotProps:v({},r.slotProps,{field:V=>{var D;return v({},Ft((D=r.slotProps)==null?void 0:D.field,V),At(r))},toolbar:v({hidden:!0,ampmInClock:h},(j=r.slotProps)==null?void 0:j.toolbar)})}),{renderPicker:k}=ws({ref:o,props:f,valueManager:ve,valueType:"time",validator:et,steps:null});return k()});Kt.propTypes={ampm:a.bool,ampmInClock:a.bool,autoFocus:a.bool,className:a.string,closeOnSelect:a.bool,defaultValue:a.object,disabled:a.bool,disableFuture:a.bool,disableIgnoringDatePartForTimeValidation:a.bool,disableOpenPicker:a.bool,disablePast:a.bool,enableAccessibleFieldDOMStructure:a.any,format:a.string,formatDensity:a.oneOf(["dense","spacious"]),inputRef:_t,label:a.node,localeText:a.object,maxTime:a.object,minTime:a.object,minutesStep:a.number,name:a.string,onAccept:a.func,onChange:a.func,onClose:a.func,onError:a.func,onOpen:a.func,onSelectedSectionsChange:a.func,onViewChange:a.func,open:a.bool,openTo:a.oneOf(["hours","meridiem","minutes","seconds"]),orientation:a.oneOf(["landscape","portrait"]),readOnly:a.bool,reduceAnimations:a.bool,referenceDate:a.object,selectedSections:a.oneOfType([a.oneOf(["all","day","empty","hours","meridiem","minutes","month","seconds","weekDay","year"]),a.number]),shouldDisableTime:a.func,skipDisabled:a.bool,slotProps:a.object,slots:a.object,sx:a.oneOfType([a.arrayOf(a.oneOfType([a.func,a.object,a.bool])),a.func,a.object]),thresholdToRenderTimeInASingleColumn:a.number,timeSteps:a.shape({hours:a.number,minutes:a.number,seconds:a.number}),timezone:a.string,value:a.object,view:a.oneOf(["hours","meridiem","minutes","seconds"]),viewRenderers:a.shape({hours:a.func,meridiem:a.func,minutes:a.func,seconds:a.func}),views:a.arrayOf(a.oneOf(["hours","minutes","seconds"]).isRequired)};const qt=x.forwardRef(function(s,o){var u,h;const t=ge(),r=$t(s,"MuiMobileTimePicker"),i=v({hours:tt,minutes:tt,seconds:tt},r.viewRenderers),n=(u=r.ampmInClock)!=null?u:!1,c=v({},r,{ampmInClock:n,viewRenderers:i,format:Bt(t,r),slots:v({field:Et},r.slots),slotProps:v({},r.slotProps,{field:d=>{var g;return v({},Ft((g=r.slotProps)==null?void 0:g.field,d),At(r))},toolbar:v({hidden:!1,ampmInClock:n},(h=r.slotProps)==null?void 0:h.toolbar)})}),{renderPicker:p}=ys({ref:o,props:c,valueManager:ve,valueType:"time",validator:et,steps:null});return p()});qt.propTypes={ampm:a.bool,ampmInClock:a.bool,autoFocus:a.bool,className:a.string,closeOnSelect:a.bool,defaultValue:a.object,disabled:a.bool,disableFuture:a.bool,disableIgnoringDatePartForTimeValidation:a.bool,disableOpenPicker:a.bool,disablePast:a.bool,enableAccessibleFieldDOMStructure:a.any,format:a.string,formatDensity:a.oneOf(["dense","spacious"]),inputRef:_t,label:a.node,localeText:a.object,maxTime:a.object,minTime:a.object,minutesStep:a.number,name:a.string,onAccept:a.func,onChange:a.func,onClose:a.func,onError:a.func,onOpen:a.func,onSelectedSectionsChange:a.func,onViewChange:a.func,open:a.bool,openTo:a.oneOf(["hours","minutes","seconds"]),orientation:a.oneOf(["landscape","portrait"]),readOnly:a.bool,reduceAnimations:a.bool,referenceDate:a.object,selectedSections:a.oneOfType([a.oneOf(["all","day","empty","hours","meridiem","minutes","month","seconds","weekDay","year"]),a.number]),shouldDisableTime:a.func,slotProps:a.object,slots:a.object,sx:a.oneOfType([a.arrayOf(a.oneOfType([a.func,a.object,a.bool])),a.func,a.object]),timezone:a.string,value:a.object,view:a.oneOf(["hours","minutes","seconds"]),viewRenderers:a.shape({hours:a.func,minutes:a.func,seconds:a.func}),views:a.arrayOf(a.oneOf(["hours","minutes","seconds"]).isRequired)};const on=["desktopModeMediaQuery"],nn=x.forwardRef(function(s,o){const t=te({props:s,name:"MuiTimePicker"}),{desktopModeMediaQuery:r=Ss}=t,i=ue(t,on);return es(r,{defaultMatches:!0})?l.jsx(Kt,v({ref:o},i)):l.jsx(qt,v({ref:o},i))}),an=({settingName:e,value:s,defaultValue:o,handleChange:t})=>{const{t:r}=Ze(),[i,n]=x.useState(!1),[c,p]=x.useState(s);x.useEffect(()=>{s&&p(s)},[s]);const u=x.useCallback(g=>{n(!1),g&&p(s)},[s]),h=x.useCallback(()=>u(!0),[u]),d=x.useCallback((g,f=!0)=>{f&&u(!1),s!==g&&t(g)},[s,t,u]);return l.jsxs(l.Fragment,{children:[l.jsx(We,{onClick:()=>n(!0),children:l.jsx(ze,{primary:e,secondary:He(s,"HH:mm").format("LT"),secondaryTypographyProps:{style:{display:"flex",flexDirection:"column"}}})}),l.jsxs(rt,{open:i,onClose:u,children:[l.jsx(it,{children:e}),l.jsx(lt,{children:l.jsx(Ms,{dateAdapter:vs,adapterLocale:He.locale(),children:l.jsx(nn,{autoFocus:!0,value:He(c,"HH:mm"),defaultValue:He(o,"HH:mm"),format:"LT",onChange:g=>{var f;return p((f=g==null?void 0:g.format("HH:mm"))!=null?f:"00:00")}})})}),l.jsxs(ct,{children:[o!==void 0?l.jsx(pe,{onClick:()=>{p(o),d(o,!1)},color:"primary",children:r("global.button.reset_to_default")}):null,l.jsx(pe,{onClick:h,color:"primary",children:r("global.button.cancel")}),l.jsx(pe,{onClick:()=>{d(c)},color:"primary",children:r("global.button.ok")})]})]})]})};var Re=(e=>(e.LIBRARY="library",e.SETTINGS="settings",e))(Re||{});const Xe={includeManga:"settings.backup.flag.manga",includeCategories:"settings.backup.flag.categories",includeChapters:"settings.backup.flag.chapters",includeClientData:"settings.backup.flag.client_data",includeHistory:"settings.backup.flag.history",includeServerSettings:"settings.backup.flag.server_settings",includeTracking:"settings.backup.flag.tracking"},rn={[Re.LIBRARY]:"settings.backup.flag.group.library",[Re.SETTINGS]:"settings.backup.flag.group.settings"},ln=Object.keys(Xe),cn={[Re.LIBRARY]:["includeManga","includeChapters","includeTracking","includeHistory","includeCategories"],[Re.SETTINGS]:["includeClientData","includeServerSettings"]},st=({onDismiss:e,onSubmit:s,isVisible:o,onExitComplete:t,title:r,flags:i})=>{const{t:n}=Ze(),[c,p]=x.useState(Object.fromEntries(ln.map(u=>{var h;return[u,(h=i==null?void 0:i[u])!=null?h:!0]})));return l.jsxs(rt,{open:o,onTransitionExited:t,maxWidth:"xs",fullWidth:!0,onClose:e,children:[l.jsx(it,{children:r}),l.jsx(lt,{children:l.jsx(js,{sx:{gap:2},children:Object.entries(cn).map(([u,h])=>l.jsxs(ot,{children:[l.jsx(nt,{children:n(rn[u])}),h.map(d=>l.jsx(Is,{label:n(Xe[d]),checked:c[d],onChange:(g,f)=>{p({...c,[d]:f})}},d))]},u))})}),l.jsxs(ct,{children:[l.jsx(pe,{autoFocus:!0,onClick:e,color:"primary",children:n("global.button.cancel")}),l.jsx(pe,{onClick:()=>s(c),color:"primary",children:n("global.button.ok")})]})]})},un=({validationResult:e,onDismiss:s,onSubmit:o,isVisible:t,onExitComplete:r})=>{const{t:i}=Ze();return l.jsxs(rt,{open:t,onTransitionExited:r,onClose:s,children:[l.jsx(it,{children:i("settings.backup.action.validate.dialog.title")}),l.jsxs(lt,{dividers:!0,children:[!!(e!=null&&e.missingSources.length)&&l.jsx(qe,{sx:{listStyleType:"initial",listStylePosition:"inside"},subheader:i("settings.backup.action.validate.dialog.content.label.missing_sources"),children:e==null?void 0:e.missingSources.map(({id:n,name:c})=>l.jsx(gt,{sx:{display:"list-item"},children:"".concat(c," (").concat(n,")")},n))}),!!(e!=null&&e.missingTrackers.length)&&l.jsx(qe,{sx:{listStyleType:"initial",listStylePosition:"inside"},subheader:i("settings.backup.action.validate.dialog.content.label.missing_trackers"),children:e==null?void 0:e.missingTrackers.map(({name:n})=>l.jsx(gt,{sx:{display:"list-item"},children:"".concat(n)},n))})]}),l.jsx(ct,{children:l.jsxs(ot,{direction:"row",sx:{justifyContent:"space-between",width:"100%"},children:[!!(e!=null&&e.missingSources.length)&&l.jsx(pe,{onClick:s,component:kt,to:ht.browse.path(ts.EXTENSIONS),autoFocus:!!(e!=null&&e.missingSources.length),variant:e!=null&&e.missingSources.length?"contained":"text",children:i("extension.action.label.install")}),!!(e!=null&&e.missingTrackers.length)&&l.jsx(pe,{onClick:s,component:kt,to:ht.settings.childRoutes.tracking.path,autoFocus:!!(e!=null&&e.missingTrackers.length),variant:e!=null&&e.missingTrackers.length?"contained":"text",children:i("global.button.log_in")}),l.jsxs(ot,{direction:"row",children:[l.jsx(pe,{onClick:s,children:i("global.button.cancel")}),l.jsx(pe,{onClick:o,autoFocus:!(e!=null&&e.missingSources.length)&&!(e!=null&&e.missingTrackers.length),variant:!(e!=null&&e.missingSources.length)&&!(e!=null&&e.missingTrackers.length)?"contained":"text",children:i("global.button.restore")})]})]})})]})},dn=e=>({autoBackupIncludeCategories:e.includeCategories,autoBackupIncludeChapters:e.includeChapters,autoBackupIncludeClientData:e.includeClientData,autoBackupIncludeHistory:e.includeHistory,autoBackupIncludeManga:e.includeManga,autoBackupIncludeServerSettings:e.includeServerSettings,autoBackupIncludeTracking:e.includeTracking}),Yt=e=>({includeCategories:e.autoBackupIncludeCategories,includeChapters:e.autoBackupIncludeChapters,includeClientData:e.autoBackupIncludeClientData,includeHistory:e.autoBackupIncludeHistory,includeManga:e.autoBackupIncludeManga,includeServerSettings:e.autoBackupIncludeServerSettings,includeTracking:e.autoBackupIncludeTracking}),Pt=(e,s,o)=>e===0?Ve("global.label.none"):e===s?Ve("extension.language.all"):o,Dt=e=>{var n,c,p,u,h,d,g,f;const s=Yt(e),o=Object.keys(s).length,t=Object.groupBy(Object.entries(s),([,k])=>k.toString()),r=(c=(n=t.true)==null?void 0:n.map(([k])=>Ve(Xe[k])).join(", "))!=null?c:"",i=(u=(p=t.false)==null?void 0:p.map(([k])=>Ve(Xe[k])).join(", "))!=null?u:"";return{false:Pt((d=(h=t.false)==null?void 0:h.length)!=null?d:0,o,i),true:Pt((f=(g=t.true)==null?void 0:g.length)!=null?f:0,o,r)}},mn=e=>e===0?Ve("global.label.never"):Ve("settings.backup.automated.cleanup.label.value",{days:e,count:e});let Se;function In(){var F;const{t:e}=Ze();Ds(e("settings.backup.title"));const{data:s,loading:o,error:t,refetch:r}=ye.useGetServerSettings({notifyOnNetworkStatusChange:!0}),[i]=ye.useUpdateServerSettings(),{data:n}=ye.useGetBackupRestoreStatus(Se!=null?Se:"",{skip:!Se,pollInterval:1e3}),[,c]=x.useState(0),p=x.useRef(null),u=(()=>{if(!(n!=null&&n.restoreStatus))return 0;const m=100*(n.restoreStatus.mangaProgress/n.restoreStatus.totalManga);return Number.isNaN(m)?0:m})(),h=(m,M)=>{i({variables:{input:{settings:{[m]:M}}}}).catch(P=>ie(e("global.error.label.failed_to_save_changes"),"error",De(P)))},d=m=>{i({variables:{input:{settings:m}}}).catch(M=>ie(e("global.error.label.failed_to_save_changes"),"error",De(M)))};x.useEffect(()=>{if(!(n!=null&&n.restoreStatus))return;const m=n.restoreStatus.state===Ct.Success,M=n.restoreStatus.state===Ct.Failure;(m||M)&&(m&&ie(e("settings.backup.action.restore.label.success"),"success"),M&&ie(e("settings.backup.action.restore.error.label.failure"),"error"),ye.reset(),Se=void 0,c(Date.now()))},[(F=n==null?void 0:n.restoreStatus)==null?void 0:F.state]);const g=()=>{const m=document.getElementById("backup-file");m&&(m.value="")},f=async()=>{var M;const m=await $e.show(st,{title:e("settings.backup.action.create.label.title")});ie(e("settings.backup.action.create.label.in_progress"),"info");try{const P=await ye.createBackupFile({flags:m}).response,A=(M=P.data)==null?void 0:M.createBackup.url;if(!A){ie(e("settings.backup.action.create.error.failure"),"error",De(P.errors));return}const N=document.createElement("a");N.href=ye.getValidUrlFor(A,""),N.download="",document.body.appendChild(N),N.click(),document.body.removeChild(N)}catch(P){ie(e("settings.backup.action.create.error.failure"),"error",De(P))}},k=async m=>{try{const{data:{validateBackup:M}}=await ye.validateBackupFile(m,{fetchPolicy:"network-only"}).response;if(M.missingSources.length||M.missingTrackers.length)try{await $e.show(un,{validationResult:M},{id:"backup-validate-".concat(m.name)})}catch(P){return!1}return!0}catch(M){ie(e("settings.backup.action.validate.error.label.failure"),"error",De(M))}finally{g()}return!1},y=async m=>{var P;const M=await $e.show(st,{title:e("settings.backup.action.restore.label.title")});try{ie(e("settings.backup.action.restore.label.in_progress"),"info"),Se=(P=(await ye.restoreBackupFile({backup:m,flags:M}).response).data)==null?void 0:P.restoreBackup.id,c(Date.now())}catch(A){ie(e("settings.backup.action.restore.error.label.failure"),"error",De(A))}finally{g()}},I=async m=>{if(m.name.toLowerCase().endsWith("json")){ie(e("settings.backup.action.restore.error.label.legacy_backup_unsupported"),"error");return}if(!m.name.toLowerCase().match(/proto\.gz$|tachibk$/g)){ie(e("global.error.label.invalid_file_type"),"error");return}await k(m)&&await y(m)};wt("drop",async m=>{m.preventDefault();const M=await Tt(m);I(M[0])}),wt("dragover",m=>{m.preventDefault()});const j=Fs("change",async m=>{const M=await Tt(m);I(M[0])}),V=Vs(p,j);if(o)return l.jsx(ss,{});if(t)return l.jsx(Ps,{message:e("global.error.label.failed_to_load_data"),messageExtra:De(t),retry:()=>r().catch(os())});const D=s.settings;return l.jsxs(l.Fragment,{children:[l.jsxs(qe,{sx:{padding:0},children:[l.jsx(We,{onClick:f,children:l.jsx(ze,{primary:e("settings.backup.action.create.label.title"),secondary:e("settings.backup.action.create.label.description")})}),l.jsxs(We,{onClick:()=>{var m;return(m=p.current)==null?void 0:m.click()},disabled:!!Se,children:[l.jsx(ze,{primary:e("settings.backup.action.restore.label.title"),secondary:e("settings.backup.action.restore.label.description")}),Se?l.jsx(ns,{children:l.jsx(rs,{progress:u})}):null]}),l.jsxs(qe,{subheader:l.jsx(Ns,{component:"div",id:"backup-settings",children:"Automated backup"}),children:[l.jsx(as,{settingName:e("settings.backup.automated.location.label.title"),dialogDescription:e("settings.backup.automated.location.label.description"),value:D.backupPath,settingDescription:D.backupPath.length?D.backupPath:e("global.label.default"),handleChange:m=>h("backupPath",m)}),l.jsx(We,{onClick:async()=>{try{const m=await $e.show(st,{title:e("settings.backup.automated.flags.title"),flags:Yt(D)});d(dn(m))}catch(m){}},children:l.jsx(ze,{primary:e("settings.backup.automated.flags.title"),secondary:l.jsxs(l.Fragment,{children:[l.jsx("span",{children:e("category.settings.inclusion.label.include",{includedCategoriesText:Dt(D).true})}),l.jsx("span",{children:e("category.settings.inclusion.label.exclude",{excludedCategoriesText:Dt(D).false})})]}),secondaryTypographyProps:{style:{display:"flex",flexDirection:"column"}}})}),l.jsx(an,{settingName:e("settings.backup.automated.label.time"),value:D.backupTime,defaultValue:"00:00",handleChange:m=>h("backupTime",m)}),l.jsx(xt,{settingTitle:e("settings.backup.automated.label.interval"),settingValue:e("global.date.value.label.day",{days:D.backupInterval,count:D.backupInterval}),value:D.backupInterval,defaultValue:1,minValue:1,maxValue:31,stepSize:1,valueUnit:e("global.date.label.day_one"),showSlider:!0,handleUpdate:m=>h("backupInterval",m)}),l.jsx(xt,{settingTitle:e("settings.backup.automated.cleanup.label.title"),settingValue:mn(D.backupTTL),value:D.backupTTL,defaultValue:14,minValue:0,maxValue:1e3,stepSize:1,valueUnit:e("global.date.label.day_one"),showSlider:!0,handleUpdate:m=>h("backupTTL",m)})]})]}),l.jsx("input",{ref:V,type:"file",style:{display:"none"}})]})}export{In as Backup};
