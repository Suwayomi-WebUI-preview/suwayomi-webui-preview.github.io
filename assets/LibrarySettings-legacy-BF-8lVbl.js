!function(){function e(t){return e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e(t)}function t(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function r(e){for(var r=1;r<arguments.length;r++){var i=null!=arguments[r]?arguments[r]:{};r%2?t(Object(i),!0).forEach(function(t){n(e,t,i[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):t(Object(i)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))})}return e}function n(t,r,n){return(r=function(t){var r=function(t,r){if("object"!=e(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var i=n.call(t,r||"default");if("object"!=e(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(t)}(t,"string");return"symbol"==e(r)?r:r+""}(r))in t?Object.defineProperty(t,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[r]=n,t}function i(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */var e,t,r="function"==typeof Symbol?Symbol:{},n=r.iterator||"@@iterator",a=r.toStringTag||"@@toStringTag";function c(r,n,i,a){var c=n&&n.prototype instanceof s?n:s,l=Object.create(c.prototype);return o(l,"_invoke",function(r,n,i){var o,a,c,s=0,l=i||[],d=!1,f={p:0,n:0,v:e,a:g,f:g.bind(e,4),d:function(t,r){return o=t,a=0,c=e,f.n=r,u}};function g(r,n){for(a=r,c=n,t=0;!d&&s&&!i&&t<l.length;t++){var i,o=l[t],g=f.p,p=o[2];r>3?(i=p===n)&&(c=o[(a=o[4])?5:(a=3,3)],o[4]=o[5]=e):o[0]<=g&&((i=r<2&&g<o[1])?(a=0,f.v=n,f.n=o[1]):g<p&&(i=r<3||o[0]>n||n>p)&&(o[4]=r,o[5]=n,f.n=p,a=0))}if(i||r>1)return u;throw d=!0,n}return function(i,l,p){if(s>1)throw TypeError("Generator is already running");for(d&&1===l&&g(l,p),a=l,c=p;(t=a<2?e:c)||!d;){o||(a?a<3?(a>1&&(f.n=-1),g(a,c)):f.n=c:f.v=c);try{if(s=2,o){if(a||(i="next"),t=o[i]){if(!(t=t.call(o,c)))throw TypeError("iterator result is not an object");if(!t.done)return t;c=t.value,a<2&&(a=0)}else 1===a&&(t=o.return)&&t.call(o),a<2&&(c=TypeError("The iterator does not provide a '"+i+"' method"),a=1);o=e}else if((t=(d=f.n<0)?c:r.call(n,f))!==u)break}catch(t){o=e,a=1,c=t}finally{s=1}}return{value:t,done:d}}}(r,i,a),!0),l}var u={};function s(){}function l(){}function d(){}t=Object.getPrototypeOf;var f=[][n]?t(t([][n]())):(o(t={},n,function(){return this}),t),g=d.prototype=s.prototype=Object.create(f);function p(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,d):(e.__proto__=d,o(e,a,"GeneratorFunction")),e.prototype=Object.create(g),e}return l.prototype=d,o(g,"constructor",d),o(d,"constructor",l),l.displayName="GeneratorFunction",o(d,a,"GeneratorFunction"),o(g),o(g,a,"Generator"),o(g,n,function(){return this}),o(g,"toString",function(){return"[object Generator]"}),(i=function(){return{w:c,m:p}})()}function o(e,t,r,n){var i=Object.defineProperty;try{i({},"",{})}catch(e){i=0}o=function(e,t,r,n){function a(t,r){o(e,t,function(e){return this._invoke(t,r,e)})}t?i?i(e,t,{value:r,enumerable:!n,configurable:!n,writable:!n}):e[t]=r:(a("next",0),a("throw",1),a("return",2))},o(e,t,r,n)}function a(e,t,r,n,i,o,a){try{var c=e[o](a),u=c.value}catch(e){return void r(e)}c.done?t(u):Promise.resolve(u).then(n,i)}function c(e){return function(){var t=this,r=arguments;return new Promise(function(n,i){var o=e.apply(t,r);function c(e){a(o,n,i,c,u,"next",e)}function u(e){a(o,n,i,c,u,"throw",e)}c(void 0)})}}function u(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,i,o,a,c=[],u=!0,s=!1;try{if(o=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=o.call(r)).done)&&(c.push(n.value),c.length!==t);u=!0);}catch(e){s=!0,i=e}finally{try{if(!u&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(s)throw i}}return c}}(e,t)||function(e,t){if(e){if("string"==typeof e)return s(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?s(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}System.register(["./index-legacy-Ba2A8zU1.js","./CategoriesInclusionSetting-legacy-A0M27XWE.js","./CheckboxInput-legacy-DYOrS_8Z.js","./NumberSetting-legacy-DUtS0fpU.js","./usePersistedValue-legacy-ugzM-wkq.js","./Switch-legacy-B0iDfyuA.js","./ListSubheader-legacy-Dx_N8HhF.js","./Mangas-legacy-4KUuJQQr.js","./EmptyViewAbsoluteCentered-legacy-B6JL2Qew.js","./useAppTitle-legacy-C7XnyuRq.js","./ThreeStateCheckboxInput-legacy-CB7xIA1H.js","./Checkbox-legacy-ByAE9xMP.js","./SwitchBase-legacy-yy5UtrwG.js","./Slider-legacy-C39yAV8c.js","./Chapters-legacy-HULoUMlk.js","./DateHelper-legacy-DBEtGbUk.js","./Asserts-legacy-CWE3_MKu.js"],function(e,t){"use strict";var o,a,s,l,d,f,g,p,y,h,v,b,j,x,m,S,_,C,w,k,O,U,P,E,N,I,A,T,D,F,G,L,M,X,q,V,H;return{setters:[function(e){o=e.u,a=e.r,s=e.f,l=e.j,d=e.av,f=e.v,g=e.o,p=e.p,y=e.q,h=e.cS,v=e.w,b=e.B,j=e.G,x=e.m,m=e.g,S=e.N,_=e.s,C=e.cT,w=e.cP,k=e.e,O=e.i,U=e.k,P=e.cG,E=e.A,N=e.F,I=e.bR},function(e){A=e.C,T=e.a},function(e){D=e.C},function(e){F=e.N},function(e){G=e.u,L=e.g},function(e){M=e.S},function(e){X=e.L},function(e){q=e.a},function(e){V=e.E},function(e){H=e.u},null,null,null,null,null,null,null],execute:function(){e("LibrarySettings",function(){var e,t,r,n,i=o(),c=i.i18n;i._;H(c._({id:"exYcTF"}));var u=a.useGetCategories(w),s=a.useGetServerSettings({notifyOnNetworkStatusChange:!0}),g=k(),p=g.settings,y=g.loading,h=g.request,v=h.error,b=h.refetch,j=N(function(e){return x(c._({id:"p43DY9"}),"error",m(e))}),C=(null!==(e=null===(t=u.data)||void 0===t?void 0:t.categories.nodes.length)&&void 0!==e?e:1)-1;if(s.loading||y||u.loading)return l.jsx(O,{});var I=null!==(r=null!==(n=s.error)&&void 0!==n?n:v)&&void 0!==r?r:u.error;if(I)return l.jsx(V,{message:c._({id:"6m5aox"}),messageExtra:m(I),retry:function(){s.error&&(null==s||s.refetch().catch(U("LibrarySettings::refetchServerSettings"))),v&&b().catch(U("LibrarySettings::refetchMetadataServerSettings")),u.error&&u.refetch().catch(U("LibrarySettings::refetchCategories"))}});return l.jsxs(S,{sx:{pt:0},children:[l.jsxs(S,{subheader:l.jsx(X,{component:"div",id:"library-category-settings",children:c._({id:"NUrY9o"})}),children:[l.jsx(P,{to:E.settings.childRoutes.categories.path,children:l.jsx(f,{primary:c._({id:"EDmovq"}),secondary:c._({id:"QzLd18",values:{categoryCount:C}})})}),l.jsxs(_,{children:[l.jsx(f,{primary:c._({id:"GKnPQk"}),secondary:c._({id:"9LI3Ed"})}),l.jsx(M,{edge:"end",checked:p.showAddToLibraryCategorySelectDialog,onChange:function(e){return j("showAddToLibraryCategorySelectDialog",e.target.checked)}})]}),l.jsxs(_,{children:[l.jsx(f,{primary:c._({id:"XHdo+g"}),secondary:c._({id:"92wSoc"})}),l.jsx(M,{edge:"end",checked:p.removeMangaFromCategories,onChange:function(e){return j("removeMangaFromCategories",e.target.checked)}})]})]}),l.jsx(S,{subheader:l.jsx(X,{component:"div",id:"library-general-settings",children:c._({id:"Weq9zb"})}),children:l.jsxs(_,{children:[l.jsx(f,{primary:c._({id:"C14a3W"}),secondary:c._({id:"EnhxZq"})}),l.jsx(M,{edge:"end",checked:p.ignoreFilters,onChange:function(e){return j("ignoreFilters",e.target.checked)}})]})}),l.jsx(Y,{serverSettings:s.data.settings,categories:u.data.categories.nodes}),l.jsxs(S,{subheader:l.jsx(X,{component:"div",id:"library-advanced",children:c._({id:"sxkWRg"})}),children:[l.jsx(d,{onClick:function(){return B()},children:l.jsx(f,{primary:c._({id:"XOw+Zq"}),secondary:c._({id:"FPEAIW"})})}),l.jsx(P,{to:E.settings.childRoutes.library.childRoutes.duplicates.path,children:l.jsx(f,{primary:c._({id:"Sf1t6g"}),secondary:c._({id:"7+xuNh"})})})]})]})});var t=function(e){var t,S,_=e.serverSettings,C=o(),w=C.i18n,k=(C._,function(e){return{excludeCompleted:e.excludeCompleted,excludeNotStarted:e.excludeNotStarted,excludeUnreadChapters:e.excludeUnreadChapters}}(_)),O=u(a.useUpdateServerSettings(),1)[0],U=u(s.useState(null!=k?k:{}),2),P=U[0],E=U[1],N=u(s.useState(!1),2),I=N[0],T=N[1],F=(S=[],(t=k).excludeUnreadChapters&&S.push(j._(h.excludeUnreadChapters)),t.excludeNotStarted&&S.push(j._(h.excludeNotStarted)),t.excludeCompleted&&S.push(j._(h.excludeCompleted)),!S.length&&S.push(j._({id:"EdQY6l"})),S.join(", ")),G=function(){var e=c(i().m(function e(){var t,r;return i().w(function(e){for(;;)switch(e.p=e.n){case 0:if(t=(null==k?void 0:k.excludeCompleted)!==P.excludeCompleted||k.excludeNotStarted!==P.excludeNotStarted||k.excludeUnreadChapters!==P.excludeUnreadChapters,T(!1),t){e.n=1;break}return e.a(2);case 1:return e.p=1,e.n=2,O({variables:{input:{settings:P}}});case 2:e.n=4;break;case 3:e.p=3,r=e.v,x(w._({id:"cBoXe4"}),"error",m(r));case 4:return e.a(2)}},e,null,[[1,3]])}));return function(){return e.apply(this,arguments)}}(),L=function(){E(null!=k?k:{}),T(!1)};return s.useEffect(function(){k&&E(k)},[null==k?void 0:k.excludeCompleted,null==k?void 0:k.excludeNotStarted,null==k?void 0:k.excludeUnreadChapters]),l.jsxs(l.Fragment,{children:[l.jsx(d,{onClick:function(){return T(!0)},children:l.jsx(f,{primary:w._({id:"1y0E5U"}),secondary:F,onClick:function(){return T(!0)}})}),l.jsxs(g,{open:I,onClose:L,children:[l.jsx(p,{children:w._({id:"1y0E5U"})}),l.jsx(y,{children:l.jsx(A,{children:Object.entries(P).map(function(e){var t=u(e,2),i=t[0],o=t[1];return l.jsx(D,{label:w._(h[i]),checked:o,onChange:function(e,t){E(r(r({},P),{},n({},i,t)))}},i)})})}),l.jsxs(v,{children:[l.jsx(b,{onClick:L,color:"primary",children:w._({id:"dEgA5A"})}),l.jsx(b,{onClick:G,color:"primary",children:w._({id:"aP3N/0"})})]})]})]})},R=function(e){var t=e.globalUpdateInterval,r=o(),n=r.i18n,i=(r._,t),c=!!i,d=u(a.useUpdateServerSettings(),1)[0],g=u(G("lastGlobalUpdateInterval",C.default,i,L),2),p=g[0],y=g[1],h=s.useCallback(function(e){y(0===e?p:e),d({variables:{input:{settings:{globalUpdateInterval:e}}}})},[p]);return l.jsxs(S,{children:[l.jsxs(_,{children:[l.jsx(f,{primary:n._({id:"XN/sSd"})}),l.jsx(M,{edge:"end",checked:c,onChange:function(e){return t=e.target.checked,void h(t?p:0);var t}})]}),l.jsx(F,{settingTitle:n._({id:"D1wDG2"}),settingValue:n._({id:"uDXDiN",values:{currentAutoUpdateIntervalHours:p}}),value:p,minValue:C.min,maxValue:C.max,defaultValue:C.default,showSlider:!0,valueUnit:n._({id:"3S9JH+"}),handleUpdate:h,disabled:!c})]})},Y=function(e){var r=e.serverSettings,s=e.categories,d=o(),g=d.i18n,p=(d._,r.updateMangas),y=u(a.useUpdateServerSettings(),1)[0],h=function(){var e=c(i().m(function e(t,r){var o;return i().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,e.n=1,y({variables:{input:{settings:n({},t,r)}}});case 1:e.n=3;break;case 2:e.p=2,o=e.v,x(g._({id:"cBoXe4"}),"error",m(o));case 3:return e.a(2)}},e,null,[[0,2]])}));return function(t,r){return e.apply(this,arguments)}}();return l.jsxs(S,{subheader:l.jsx(X,{component:"div",id:"global-update-settings",children:g._({id:"sUw6wj"})}),children:[l.jsx(R,{globalUpdateInterval:r.globalUpdateInterval}),l.jsx(t,{serverSettings:r}),l.jsx(T,{categories:s,includeField:"includeInUpdate",dialogText:g._({id:"FFwm9b"})}),l.jsxs(_,{children:[l.jsx(f,{primary:g._({id:"wfvRo2"}),secondary:g._({id:"Yy4XAu"})}),l.jsx(M,{edge:"end",checked:p,onChange:function(e){return h("updateMangas",e.target.checked)}})]})]})},B=function(){var e=c(i().m(function e(){var t,r,n;return i().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,e.n=1,a.getMangas(I,{filter:{inLibrary:{equalTo:!1},categoryId:{isNull:!1}}},{fetchPolicy:"no-cache"}).response;case 1:if(t=e.v,!(r=q.getIds(t.data.mangas.nodes)).length){e.n=2;break}return e.n=2,a.updateMangasCategories(r,{clearCategories:!0}).response;case 2:x(j._({id:"BLMYEZ"}),"success"),e.n=4;break;case 3:e.p=3,n=e.v,x(j._({id:"Uub3H3"}),"error",m(n));case 4:return e.a(2)}},e,null,[[0,3]])}));return function(){return e.apply(this,arguments)}}()}}})}();
