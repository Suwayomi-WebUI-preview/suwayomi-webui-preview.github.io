import{Y as k,u as B,f as p,cU as o,j as t,at as v,v as O,o as b,p as A,q as $,c3 as L,w as P,B as C,G as m,r as q,m as G,g as H}from"./index-ChwTeEsl.js";import{T as K}from"./ThreeStateCheckboxInput-CWRS5pCy.js";const M=k("div")({display:"flex",flexDirection:"column",maxHeight:"170px",overflow:"auto"}),N=e=>{switch(e){case!1:return o.Exclude;case!0:return o.Include;case null:case void 0:return o.Unset;default:throw new Error('booleanToIncludeInStatus: unexpected IncludeOrExclude status "'.concat(e,'"'))}},Y=e=>{switch(e){case o.Exclude:return!1;case o.Include:return!0;case o.Unset:return null;default:throw new Error('includeInUpdateStatusToBoolean: unexpected IncludeOrExclude status "'.concat(e,'"'))}},I=(e,s,i,a)=>{const h=s&&!e.length&&i,r=e.length===a;return h||r?m._({id:"N40H+G"}):e.length?e.map(c=>c.name).join(", "):m._({id:"EdQY6l"})},X=({categories:e,includeField:s,dialogText:i})=>{const{i18n:a,_:h}=B(),[r,c]=p.useState(e),[j,x]=p.useState(!1);p.useEffect(()=>{e&&c(e)},[e]);const f=e.filter(n=>n[s]===o.Unset),E=e.filter(n=>n[s]===o.Exclude),_=e.filter(n=>n[s]===o.Include),y=I(E,!1,f.length,e.length),T=I(_,!0,f.length,e.length),D=n=>q.updateCategory(n.id,{[s]:n[s]}).response,w=async()=>{const n=r.filter(l=>{const d=e==null?void 0:e.find(u=>u.id===l.id);return d?d[s]!==l[s]:!1});x(!1);try{await Promise.all(n.map(l=>D(l)))}catch(l){G(a._({id:"cBoXe4"}),"error",H(l))}},g=()=>{c(e),x(!1)};return t.jsxs(t.Fragment,{children:[t.jsx(v,{onClick:()=>x(!0),children:t.jsx(O,{primary:a._({id:"K7tIrx"}),secondary:t.jsxs(t.Fragment,{children:[t.jsx("span",{children:a._({id:"Iaalur",values:{includedCategoriesText:T}})}),t.jsx("span",{children:a._({id:"+/+7ol",values:{excludedCategoriesText:y}})})]}),secondaryTypographyProps:{style:{display:"flex",flexDirection:"column"}}})}),t.jsxs(b,{open:j,onClose:g,children:[t.jsx(A,{children:a._({id:"K7tIrx"})}),t.jsxs($,{children:[i&&t.jsx(L,{sx:{paddingBottom:"10px"},children:i}),t.jsx(M,{children:r.map(n=>t.jsx(K,{label:n.name,checked:Y(n[s]),onChange:l=>{const d=N(l),u=r.findIndex(U=>U===n),S=[...r.slice(0,u),{...n,[s]:d},...r.slice(u+1,r.length)];c(S)}},n.id))})]}),t.jsxs(P,{children:[t.jsx(C,{onClick:g,color:"primary",children:a._({id:"dEgA5A"})}),t.jsx(C,{onClick:w,color:"primary",children:a._({id:"aP3N/0"})})]})]})]})};export{M as C,X as a};
