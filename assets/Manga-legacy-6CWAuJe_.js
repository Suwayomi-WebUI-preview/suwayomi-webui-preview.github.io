!function(){var t=["children"];function e(t){return e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},e(t)}function n(t,n,a){return n=i(n),function(t,n){if(n&&("object"==e(n)||"function"==typeof n))return n;if(void 0!==n)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,r()?Reflect.construct(n,a||[],i(t).constructor):n.apply(t,a))}function r(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return(r=function(){return!!t})()}function i(t){return i=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},i(t)}function a(t,e){return a=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},a(t,e)}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function s(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,b(r.key),r)}}function u(t,e,n){return e&&s(t.prototype,e),n&&s(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function l(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */var t,e,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",i=n.toStringTag||"@@toStringTag";function a(n,r,i,a){var u=r&&r.prototype instanceof s?r:s,l=Object.create(u.prototype);return c(l,"_invoke",function(n,r,i){var a,s,u,l=0,c=i||[],h=!1,d={p:0,n:0,v:t,a:f,f:f.bind(t,4),d:function(e,n){return a=e,s=0,u=t,d.n=n,o}};function f(n,r){for(s=n,u=r,e=0;!h&&l&&!i&&e<c.length;e++){var i,a=c[e],f=d.p,g=a[2];n>3?(i=g===r)&&(u=a[(s=a[4])?5:(s=3,3)],a[4]=a[5]=t):a[0]<=f&&((i=n<2&&f<a[1])?(s=0,d.v=r,d.n=a[1]):f<g&&(i=n<3||a[0]>r||r>g)&&(a[4]=n,a[5]=r,d.n=g,s=0))}if(i||n>1)return o;throw h=!0,r}return function(i,c,g){if(l>1)throw TypeError("Generator is already running");for(h&&1===c&&f(c,g),s=c,u=g;(e=s<2?t:u)||!h;){a||(s?s<3?(s>1&&(d.n=-1),f(s,u)):d.n=u:d.v=u);try{if(l=2,a){if(s||(i="next"),e=a[i]){if(!(e=e.call(a,u)))throw TypeError("iterator result is not an object");if(!e.done)return e;u=e.value,s<2&&(s=0)}else 1===s&&(e=a.return)&&e.call(a),s<2&&(u=TypeError("The iterator does not provide a '"+i+"' method"),s=1);a=t}else if((e=(h=d.n<0)?u:n.call(r,d))!==o)break}catch(e){a=t,s=1,u=e}finally{l=1}}return{value:e,done:h}}}(n,i,a),!0),l}var o={};function s(){}function u(){}function h(){}e=Object.getPrototypeOf;var d=[][r]?e(e([][r]())):(c(e={},r,function(){return this}),e),f=h.prototype=s.prototype=Object.create(d);function g(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,h):(t.__proto__=h,c(t,i,"GeneratorFunction")),t.prototype=Object.create(f),t}return u.prototype=h,c(f,"constructor",h),c(h,"constructor",u),u.displayName="GeneratorFunction",c(h,i,"GeneratorFunction"),c(f),c(f,i,"Generator"),c(f,r,function(){return this}),c(f,"toString",function(){return"[object Generator]"}),(l=function(){return{w:a,m:g}})()}function c(t,e,n,r){var i=Object.defineProperty;try{i({},"",{})}catch(t){i=0}c=function(t,e,n,r){if(e)i?i(t,e,{value:n,enumerable:!r,configurable:!r,writable:!r}):t[e]=n;else{function a(e,n){c(t,e,function(t){return this._invoke(e,n,t)})}a("next",0),a("throw",1),a("return",2)}},c(t,e,n,r)}function h(t,e,n,r,i,a,o){try{var s=t[a](o),u=s.value}catch(t){return void n(t)}s.done?e(u):Promise.resolve(u).then(r,i)}function d(t){return function(){var e=this,n=arguments;return new Promise(function(r,i){var a=t.apply(e,n);function o(t){h(a,r,i,o,s,"next",t)}function s(t){h(a,r,i,o,s,"throw",t)}o(void 0)})}}function f(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,i,a,o,s=[],u=!0,l=!1;try{if(a=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=a.call(n)).done)&&(s.push(r.value),s.length!==e);u=!0);}catch(t){l=!0,i=t}finally{try{if(!u&&null!=n.return&&(o=n.return(),Object(o)!==o))return}finally{if(l)throw i}}return s}}(t,e)||function(t,e){if(t){if("string"==typeof t)return g(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?g(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function g(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function p(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)}return n}function m(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?p(Object(n),!0).forEach(function(e){v(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):p(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}function v(t,e,n){return(e=b(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function b(t){var n=function(t,n){if("object"!=e(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var i=r.call(t,n||"default");if("object"!=e(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===n?String:Number)(t)}(t,"string");return"symbol"==e(n)?n:n+""}System.register(["./index-legacy-7oZR41XK.js","./PlayArrow-legacy-DiZPq7gW.js","./StyledFab-legacy-S3p4IvCh.js","./useManageMangaLibraryState-legacy-4gRe5NAs.js","./EmptyViewAbsoluteCentered-legacy-DyUB6z_Q.js","./FilterList-legacy-CTDnGlFl.js","./Download-legacy-BvOcRpKo.js","./DoneAll-legacy-vdngACKh.js","./SortRadioInput-legacy-D0Rsdf8O.js","./ThreeStateCheckboxInput-legacy-CKbLMmeO.js","./SelectionFAB-legacy-Dm_SQYxj.js","./CheckboxInput-legacy-BJpn_Wrp.js","./FormGroup-legacy-Bky7Y7HI.js","./ListPreference-legacy-Dmteahhp.js","./ChaptersDownloadActionMenuItems-legacy-Dbx29q-Z.js","./CustomButtonIcon-legacy-ChXs89Np.js","./VirtuosoPersisted-legacy-BNdl7ZKY.js","./Favorite-legacy-Cd5I4Bxo.js","./Sync-legacy-DVMCpO6v.js","./Trackers-legacy-NfvtnWAC.js","./Metadata-legacy-CIS8oDhM.js","./Sources-legacy-VgAQ0FpV.js","./ExpandMore-legacy-CVln1bcz.js","./Link-legacy-DNblrQPi.js","./Chip-legacy-DXQVC8dH.js","./useAppTitleAndAction-legacy-DZvWJybg.js","./Checkbox-legacy-D5TWSvzL.js","./formControlState-legacy-eu0RN9F_.js","./useFormControl-legacy-BTo4r-pe.js","./SwitchBase-legacy-Bj4lapIR.js","./Tabs-legacy-_I3JmK4i.js","./Card-legacy-Dxi1NmCz.js","./ListCardContent-legacy-mXS3liXZ.js","./Avatar-legacy-CKO0vO1s.js","./TextField-legacy-BZ9zP_F1.js","./InputAdornment-legacy-DAok3uwJ.js","./CheckCircle-legacy-B5o3DINv.js","./MUI.util-legacy-CLydSXc2.js","./CardActionArea-legacy-po70Yn97.js","./NumberSetting-legacy-D5EWXwLI.js","./Slider-legacy-DBzOSIo5.js","./useMobilePicker-legacy-BtQVTAwA.js","./SelectSetting-legacy-D7l9LaeA.js","./Select-legacy-DilvjbTP.js","./ChapterCardMetadata-legacy-0FJwn_PR.js","./Delete-legacy-BZiMMAYy.js","./index-legacy-Czkl_Iqj.js","./Virtuoso.util-legacy-A4XABKUl.js","./use-merged-ref-legacy-CRhKkrWR.js","./useAppTitle-legacy-CESHQ5UX.js","./useAppAction-legacy-C0Cmc5wi.js"],function(r,i){"use strict";var s,c,h,g,p,b,y,x,j,w,k,C,_,S,M,L,O,I,D,P,V,T,E,F,A,z,R,H,q,W,B,N,U,G,Q,Y,K,J,X,$,Z,tt,et,nt,rt,it,at,ot,st,ut,lt,ct,ht,dt,ft,gt,pt,mt,vt,bt,yt,xt,jt,wt,kt,Ct,_t,St,Mt,Lt,Ot,It,Dt,Pt,Vt,Tt,Et,Ft,At,zt,Rt,Ht,qt,Wt,Bt,Nt,Ut,Gt,Qt,Yt,Kt,Jt,Xt,$t,Zt,te,ee,ne,re,ie,ae,oe,se,ue,le,ce,he;return{setters:[function(t){s=t.c,c=t.j,h=t.u,g=t.a1,p=t.L,b=t.b,y=t.i,x=t.k,j=t.n,w=t.q,k=t.S,C=t.B,_=t.a2,S=t.a3,M=t.a4,L=t.C,O=t.I,I=t.a5,D=t.a6,P=t.a7,V=t.x,T=t.M,E=t.H,F=t.r,A=t.a8,z=t.e,R=t.g,H=t.f,q=t.a0,W=t.T,B=t.w,N=t.a9,U=t.m,G=t.aa,Q=t.ab,Y=t.d,K=t.Q,J=t.ac,X=t.A,$=t.ad,Z=t.ae,tt=t._,et=t.af,nt=t.ag,rt=t.ah,it=t.ai,at=t.aj,ot=t.ak,st=t.a,ut=t.al,lt=t.U,ct=t.am,ht=t.an,dt=t.ao,ft=t.ap,gt=t.aq,pt=t.ar,mt=t.as,vt=t.p,bt=t.at,yt=t.au,xt=t.av,jt=t.aw,wt=t.ax},function(t){kt=t.P},function(t){Ct=t.S,_t=t.D},function(t){St=t.u,Mt=t.i,Lt=t.a,Ot=t.f,It=t.b,Dt=t.c,Pt=t.F,Vt=t.d},function(t){Tt=t.E},function(t){Et=t.F},function(t){Ft=t.D},function(t){At=t.D},function(t){zt=t.S,Rt=t.R},function(t){Ht=t.T},function(t){qt=t.O,Wt=t.S,Bt=t.a},function(t){Nt=t.C},function(t){Ut=t.F},function(t){Gt=t.R},function(t){Qt=t.C,Yt=t.T,Kt=t.S,Jt=t.L},function(t){Xt=t.C,$t=t.a,Zt=t.b,te=t.L},function(t){ee=t.V},function(t){ne=t.F},function(t){re=t.S},function(t){ie=t.T},function(t){ae=t.M},function(t){oe=t.S},function(t){se=t.E,ue=t.a},function(t){le=t.L},function(t){ce=t.C},function(t){he=t.u},null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null],execute:function(){var i=s(c.jsx("path",{d:"M1 21h22L12 2zm12-3h-2v-2h2zm0-4h-2v-4h2z"}));function de(t){var e=t.chapter,n=h().t,r=e.sourceOrder;return c.jsxs(Ct,{component:p,variant:"extended",color:"primary",to:g.getReaderUrl(e),state:g.getReaderOpenChapterLocationState(e),children:[c.jsx(kt,{}),n(1===r?"global.button.start":"global.button.resume")]})}var fe=s(c.jsx("path",{d:"M16.67 13.13C18.04 14.06 19 15.32 19 17v3h4v-3c0-2.18-3.57-3.47-6.33-3.87M15 12c2.21 0 4-1.79 4-4s-1.79-4-4-4c-.47 0-.91.1-1.33.24C14.5 5.27 15 6.58 15 8s-.5 2.73-1.33 3.76c.42.14.86.24 1.33.24m-6 0c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4m0-6c1.1 0 2 .9 2 2s-.9 2-2 2-2-.9-2-2 .9-2 2-2m0 7c-2.67 0-8 1.34-8 4v3h16v-3c0-2.66-5.33-4-8-4m6 5H3v-.99C3.2 16.29 6.3 15 9 15s5.8 1.29 6 2z"}));function ge(t){var e=t.title,n=t.emptyMessage,r=t.items,i=t.getId,a=t.getLabel,o=t.isChecked,s=t.open,u=t.onClose,l=h().t,d=b.useMemo(function(){return r.map(i)},[r]),f=b.useMemo(function(){return r.filter(o).map(i)},[r]),g=St(r.length,{currentKey:"default",itemIds:d,initialState:{default:f}}),p=g.selectedItemIds,m=g.handleSelection,v=g.handleSelectAll,_=g.reset,S=function(){u(),_()},M=b.useCallback(function(){var t=p.length!==f.length||p.some(function(t){return!f.includes(t)}),e=r.filter(function(t){return p.includes(i(t))});u(t?e:void 0)},[p]);return c.jsxs(y,{sx:{".MuiDialog-paper":{maxHeight:435,width:"80%"}},maxWidth:"xs",open:s,onClose:S,children:[c.jsx(x,{children:e}),c.jsx(j,{dividers:!0,children:c.jsxs(Ut,{children:[0===r.length&&c.jsx("span",{children:n}),r.map(function(t){return c.jsx(Nt,{checked:p.includes(i(t)),onChange:function(e,n){return m(i(t),n)},label:a(t)},i(t))})]})}),c.jsx(w,{children:c.jsx(k,{sx:{width:"100%"},children:c.jsxs(k,{direction:"row",sx:{justifyContent:"space-between",alignItems:"end",width:"100%"},children:[c.jsx(C,{onClick:function(){return v(!p.length,r.map(i))},children:l(p.length?"global.button.reset":"global.button.select_all")}),c.jsxs(k,{direction:"row",children:[c.jsx(C,{autoFocus:!0,onClick:S,color:"primary",children:l("global.button.cancel")}),!!r.length&&c.jsx(C,{onClick:M,color:"primary",children:l("global.button.ok")})]})]})})})]})}var pe=function(t){var e=t.updateOption,n=t.scanlators,r=t.excludedScanlators,i=h().t,a=_({variant:"dialog",popupId:"chapter-list-options-scanlator-filter-dialog"});return n.length?c.jsxs(c.Fragment,{children:[c.jsx(Nt,m(m({},S(a)),{},{label:i("global.label.scanlator"),icon:c.jsx(fe,{}),checkedIcon:c.jsx(fe,{color:"warning"}),checked:!!r.length})),c.jsx(ge,{title:i("chapter.option.exclude_scanlators"),open:a.isOpen,onClose:function(t){t&&e("excludedScanlators",t),a.close()},items:n,getId:function(t){return t},getLabel:function(t){return t},isChecked:function(t){return r.includes(t)}})]}):null},me={filter:"global.label.filter",sort:"global.label.sort",display:"global.label.display"},ve=function(t){var e=t.open,n=t.onClose,r=t.options,i=t.updateOption,a=t.scanlators,o=t.excludedScanlators,s=h().t;return c.jsx(qt,{open:e,onClose:n,minHeight:150,tabs:["filter","sort","display"],tabTitle:function(t){return s(me[t])},tabContent:function(t){return"filter"===t?c.jsxs(c.Fragment,{children:[c.jsx(Ht,{label:s("global.filter.label.unread"),checked:r.unread,onChange:function(t){return i("unread",t)}}),c.jsx(Ht,{label:s("global.filter.label.downloaded"),checked:r.downloaded,onChange:function(t){return i("downloaded",t)}}),c.jsx(Ht,{label:s("global.filter.label.bookmarked"),checked:r.bookmarked,onChange:function(t){return i("bookmarked",t)}}),c.jsx(pe,{scanlators:a,excludedScanlators:o,updateOption:i})]}):"sort"===t?Object.entries(M).map(function(t){var e=f(t,2),n=e[0],a=e[1];return c.jsx(zt,{label:s(a),checked:r.sortBy===n,sortDescending:r.reverse,onClick:function(){return n!==r.sortBy?i("sortBy",n):i("reverse",!r.reverse)}},n)}):"display"===t?c.jsxs(Gt,{onChange:function(){return i("showChapterNumber",!r.showChapterNumber)},value:r.showChapterNumber,children:[c.jsx(Rt,{label:s("chapter.option.display.label.source_title"),value:!1}),c.jsx(Rt,{label:s("chapter.option.display.label.chapter_number"),value:!0})]}):null}})},be=function(t){var e=t.mangaId,n=t.options,r=t.updateOption,i=t.chapters,a=t.scanlators,o=t.excludeScanlators,s=h().t,u=f(b.useState(!1),2),l=u[0],d=u[1],p=Mt(n),v=b.useMemo(function(){return i.every(g.isRead)},[i]),y=b.useMemo(function(){return i.every(g.isDownloaded)},[i]);return c.jsxs(c.Fragment,{children:[c.jsx(L,{title:s("chapter.action.mark_as_read.add.label.action.current"),disabled:v,children:c.jsx(O,{disabled:v,onClick:function(){return g.markAsRead(g.getNonRead(i),!0,e)},color:"inherit",children:c.jsx(At,{})})}),c.jsx(I,{variant:"popover",popupId:"chapterlist-download-button",children:function(t){return c.jsxs(c.Fragment,{children:[c.jsx(L,{title:s("chapter.action.download.add.label.action"),disabled:v,children:c.jsx(O,m(m({disabled:y},S(t)),{},{color:"inherit",children:c.jsx(Ft,{})}))}),t.isOpen&&c.jsx(D,m(m({},P(t)),{},{children:c.jsx(Qt,{mangaIds:[e],closeMenu:t.close})}))]})}}),c.jsx(L,{title:s("settings.title"),children:c.jsx(O,{onClick:function(){return d(!0)},color:"inherit",children:c.jsx(Et,{color:p?"warning":void 0})})}),c.jsx(ve,{open:l,onClose:function(){return d(!1)},options:n,updateOption:r,scanlators:a,excludedScanlators:o})]})},ye=q(k,{shouldForwardProp:N(["scrollbarWidth"])})(function(t){var e=t.theme,n=t.scrollbarWidth;return v({padding:e.spacing(1),paddingRight:"calc(".concat(n,"px + ").concat(e.spacing(1),")"),paddingBottom:0},e.breakpoints.down("md"),{paddingRight:e.spacing(1)})}),xe=q(ee,{shouldForwardProp:N(["topOffset"])})(function(t){var e=t.theme,n=t.topOffset;return v({listStyle:"none",padding:0},e.breakpoints.up("md"),{height:"calc(100vh - ".concat(n,"px)"),margin:0})}),je=function(t){var e=t.selectedChapters,n=t.firstUnreadChapter,r=t.onFABMenuClose;return e.length?c.jsx(Bt,{selectedItemsCount:e.length,title:"chapter.title_one",children:function(t){return c.jsx($t,{selectedChapters:e,onClose:function(){null==r||r(),t()}})}}):n?c.jsx(de,{chapter:n}):null},we=function(t){var e=t.manga,n=t.isRefreshing,r=h().t,i=V().appBarHeight,a=T.useIsBelowWidth("md"),o=f(b.useState(50),2),s=o[0],u=o[1],l=f(b.useState(null),2),d=l[0],p=l[1];E(d,b.useCallback(function(){var t;return u(null!==(t=null==d?void 0:d.offsetHeight)&&void 0!==t?t:0)},[d]));var m=T.useGetScrollbarSize("width"),v=Lt(e),y=It(e,function(t){return U(r("global.error.label.failed_to_save_changes"),"error",R(t))}),x=F.useGetMangaChapters(A,e.id,{notifyOnNetworkStatusChange:!0}),j=x.data,w=x.loading,C=x.error,_=x.refetch,S=b.useMemo(function(){var t;return null!==(t=null==j?void 0:j.chapters.nodes)&&void 0!==t?t:[]},[null==j?void 0:j.chapters.nodes]),M=b.useMemo(function(){return Ot(S,v)},[S,v]),L=b.useMemo(function(){return g.getIds(M)},[M]),O=b.useMemo(function(){return g.getMissingCount(M)},[M]),I=0===S.length,D=!I&&0===M.length,P=St(L.length,{itemIds:L,currentKey:"default"}),q=P.areNoItemsSelected,N=P.areAllItemsSelected,G=P.selectedItemIds,Q=P.handleSelectAll,Y=P.handleSelection,K=P.clearSelection,J=b.useCallback(function(t,e,n){return Y(t,e,{selectRange:n})},[Y]);return w||I&&n?c.jsx(k,{sx:{justifyContent:"center",alignItems:"center",position:"relative",flexGrow:1},children:c.jsx(z,{})}):C?c.jsx(k,{sx:{justifyContent:"center",position:"relative",flexGrow:1},children:c.jsx(Tt,{message:r("global.error.label.failed_to_load_data"),messageExtra:R(C),retry:function(){return _().catch(H())}})}):c.jsxs(c.Fragment,{children:[c.jsxs(k,{direction:"column",sx:{position:"relative",flexBasis:"60%"},children:[c.jsxs(ye,{ref:p,direction:"row",alignItems:"center",justifyContent:"space-between",scrollbarWidth:m,children:[c.jsxs(k,{children:[c.jsx(W,{variant:"h5",component:"h3",children:r("chapter.value",{count:M.length})}),!!O&&c.jsx(W,{variant:"body2",color:"warning",children:"".concat(r("chapter.missing",{count:O}))})]}),c.jsxs(k,{direction:"row",children:[q&&c.jsx(be,{mangaId:e.id,options:v,updateOption:y,chapters:M,scanlators:g.getScanlators(S),excludeScanlators:v.excludedScanlators}),!!L.length&&c.jsx(Wt,{areAllItemsSelected:N,areNoItemsSelected:q,onChange:function(t){return Q(t,t?L:[])}})]})]}),I&&c.jsx(Tt,{message:r("chapter.error.label.no_chapter_found")}),D&&c.jsx(Tt,{message:r("chapter.error.label.no_matches")}),c.jsx(xe,{persistKey:"manga-".concat(e.id,"-chapter-list"),topOffset:i+s,style:{height:"undefined"},components:{Footer:function(){return c.jsx(B,{sx:{paddingBottom:_t}})}},totalCount:M.length,computeItemKey:function(t){return M[t].id},itemContent:function(t){return c.jsx(Xt,{index:t,isSortDesc:v.reverse,chapters:M,selected:q?null:G.includes(M[t].id),showChapterNumber:v.showChapterNumber,onSelect:J})},useWindowScroll:a,overscan:.5*window.innerHeight})]}),c.jsx(je,{selectedChapters:G.map(function(t){return S.find(function(e){return e.id===t})}).filter(function(t){return null!=t}),firstUnreadChapter:e.firstUnreadChapter,onFABMenuClose:K})]})},ke=s(c.jsx("path",{d:"M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12zm3 4H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2m0 16H8V7h11z"})),Ce=b.forwardRef(function(e,n){var r=e.children,i=function(t,e){if(null==t)return{};var n,r,i=function(t,e){if(null==t)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(-1!==e.indexOf(r))continue;n[r]=t[r]}return n}(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],-1===e.indexOf(n)&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}(e,t);return c.jsx(C,m(m({ref:n},i),{},{children:c.jsx(k,{direction:"row",sx:{alignItems:"center",justifyContent:"center",gap:1,flexWrap:"wrap"},children:r})}))}),_e=s(c.jsx("path",{d:"M9 16.17 4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z"})),Se=function(t){var e,n,r=t.manga,i=h().t,a=Y(),o=F.useGetTrackerList(K),s=null!==(e=null===(n=o.data)||void 0===n?void 0:n.trackers.nodes)&&void 0!==e?e:[],u=r.trackRecords.nodes,l=ie.getLoggedIn(s),d=ie.getLoggedIn(ie.getTrackers(u,s));return c.jsx(I,{variant:"dialog",popupId:"manga-track-modal",children:function(t){return c.jsxs(c.Fragment,{children:[c.jsxs(Ce,m(m({},S(t)),{},{size:"medium",disabled:o.loading||!!o.error,onClick:function(){return e=t.open,void(o.error?U(i("tracking.error.label.could_not_load_track_info"),"error",null===(n=o.error)||void 0===n?void 0:n.toString()):l.length?e():a(X.tracker.path));var e,n},variant:d.length?"contained":"outlined",children:[d.length?c.jsx(_e,{}):c.jsx(re,{}),d.length?i("manga.button.track.active",{count:d.length}):i("manga.button.track.start")]})),t.isOpen&&c.jsx(y,m(m({},J(t)),{},{maxWidth:"md",fullWidth:!0,scroll:"paper",children:c.jsx(Yt,{manga:r})}))]})}})},Me=s(c.jsx("path",{d:"M21 11V3h-8l3.29 3.29-10 10L3 13v8h8l-3.29-3.29 10-10z"})),Le=function(){return u(function t(e,n){o(this,t),this.pixels=e,this.opts=n;var r=n.sigBits,i=function(t,e,n){return(t<<2*r)+(e<<r)+n};this.getColorIndex=i;var a,s,u,l,c,h,d,f,g,p=8-r,m=new Uint32Array(1<<3*r);a=u=c=0,s=l=h=Number.MAX_VALUE;for(var v=e.length/4,b=0;b<v;){var y=4*b;if(b++,d=e[y+0],f=e[y+1],g=e[y+2],0!==e[y+3]){var x=i(d>>=p,f>>=p,g>>=p);void 0===m[x]&&(m[x]=0),m[x]+=1,d>a&&(a=d),d<s&&(s=d),f>u&&(u=f),f<l&&(l=f),g>c&&(c=g),g<h&&(h=g)}}this._colorCount=m.reduce(function(t,e){return e>0?t+1:t},0),this.hist=m,this.rmax=a,this.rmin=s,this.gmax=u,this.gmin=l,this.bmax=c,this.bmin=h},[{key:"colorCount",get:function(){return this._colorCount}}])}();var Oe=function(t){function e(){return o(this,e),n(this,e,arguments)}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&a(t,e)}(e,t),u(e,[{key:"_getCanvas",value:function(){if(!this._canvas)throw new Error("Canvas is not initialized");return this._canvas}},{key:"_getContext",value:function(){if(!this._context)throw new Error("Context is not initialized");return this._context}},{key:"_getWidth",value:function(){if(!this._width)throw new Error("Width is not initialized");return this._width}},{key:"_getHeight",value:function(){if(!this._height)throw new Error("Height is not initialized");return this._height}},{key:"_initCanvas",value:function(){var t=this.image;if(!t)throw new Error("Image is not initialized");var e=this._canvas=document.createElement("canvas"),n=e.getContext("2d");if(!n)throw new ReferenceError("Failed to create canvas context");this._context=n,e.className="@vibrant/canvas",e.style.display="none",this._width=e.width=t.width,this._height=e.height=t.height,n.drawImage(t,0,0),document.body.appendChild(e)}},{key:"load",value:function(t){var e,n,r,i,a,o,s,u=this;if("string"==typeof t)e=document.createElement("img"),n=t,(s=new URL(n,location.href)).protocol===location.protocol&&s.host===location.host&&s.port===location.port||(r=window.location.href,i=n,a=new URL(r),o=new URL(i),a.protocol===o.protocol&&a.hostname===o.hostname&&a.port===o.port)||(e.crossOrigin="anonymous"),e.src=n;else{if(!(t instanceof HTMLImageElement))return Promise.reject(new Error("Cannot load buffer as an image in browser"));e=t,n=t.src}return this.image=e,new Promise(function(t,r){var i=function(){u._initCanvas(),t(u)};e.complete?i():(e.onload=i,e.onerror=function(t){return r(new Error("Fail to load image: ".concat(n)))})})}},{key:"clear",value:function(){this._getContext().clearRect(0,0,this._getWidth(),this._getHeight())}},{key:"update",value:function(t){this._getContext().putImageData(t,0,0)}},{key:"getWidth",value:function(){return this._getWidth()}},{key:"getHeight",value:function(){return this._getHeight()}},{key:"resize",value:function(t,e,n){if(!this.image)throw new Error("Image is not initialized");this._width=this._getCanvas().width=t,this._height=this._getCanvas().height=e,this._getContext().scale(n,n),this._getContext().drawImage(this.image,0,0)}},{key:"getPixelCount",value:function(){return this._getWidth()*this._getHeight()}},{key:"getImageData",value:function(){return this._getContext().getImageData(0,0,this._getWidth(),this._getHeight())}},{key:"remove",value:function(){this._canvas&&this._canvas.parentNode&&this._canvas.parentNode.removeChild(this._canvas)}}])}(function(){return u(function t(){o(this,t)},[{key:"scaleDown",value:function(t){var e=this.getWidth(),n=this.getHeight(),r=1;if(t.maxDimension>0){var i=Math.max(e,n);i>t.maxDimension&&(r=t.maxDimension/i)}else r=1/t.quality;r<1&&this.resize(e*r,n*r,r)}}])}());function Ie(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return r.forEach(function(n){if(n)for(var r in n)if(n.hasOwnProperty(r)){var i=n[r];Array.isArray(i)?t[r]=i.slice(0):"object"===e(i)?(t[r]||(t[r]={}),Ie(t[r],i)):t[r]=i}}),t}var De=function(){return u(function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};o(this,t),this._src=e,this._opts=Ie({},Ae.DefaultOpts,n)},[{key:"maxColorCount",value:function(t){return this._opts.colorCount=t,this}},{key:"maxDimension",value:function(t){return this._opts.maxDimension=t,this}},{key:"addFilter",value:function(t){return this._opts.filters?this._opts.filters.push(t):this._opts.filters=[t],this}},{key:"removeFilter",value:function(t){if(this._opts.filters){var e=this._opts.filters.indexOf(t);e>0&&this._opts.filters.splice(e)}return this}},{key:"clearFilters",value:function(){return this._opts.filters=[],this}},{key:"quality",value:function(t){return this._opts.quality=t,this}},{key:"useImageClass",value:function(t){return this._opts.ImageClass=t,this}},{key:"useGenerator",value:function(t,e){return this._opts.generators||(this._opts.generators=[]),this._opts.generators.push(e?{name:t,options:e}:t),this}},{key:"useQuantizer",value:function(t,e){return this._opts.quantizer=e?{name:t,options:e}:t,this}},{key:"build",value:function(){return new Ae(this._src,this._opts)}},{key:"getPalette",value:function(){return this.build().getPalette()}}])}(),Pe=function(){return u(function t(e){o(this,t),this.pipeline=e,this._map={}},[{key:"names",value:function(){return Object.keys(this._map)}},{key:"has",value:function(t){return!!this._map[t]}},{key:"get",value:function(t){return this._map[t]}},{key:"register",value:function(t,e){return this._map[t]=e,this.pipeline}}])}(),Ve=function(){return u(function t(){o(this,t),this.filter=new Pe(this),this.quantizer=new Pe(this),this.generator=new Pe(this)},[{key:"_buildProcessTasks",value:function(t){var e=this,n=t.filters,r=t.quantizer,i=t.generators;return 1===i.length&&"*"===i[0]&&(i=this.generator.names()),{filters:n.map(function(t){return a(e.filter,t)}),quantizer:a(this.quantizer,r),generators:i.map(function(t){return a(e.generator,t)})};function a(t,e){var n,r;return"string"==typeof e?n=e:(n=e.name,r=e.options),{name:n,fn:t.get(n),options:r}}}},{key:"process",value:(e=d(l().m(function t(e,n){var r,i,a,o,s,u,c;return l().w(function(t){for(;;)switch(t.n){case 0:return r=this._buildProcessTasks(n),i=r.filters,a=r.quantizer,o=r.generators,t.n=1,this._filterColors(i,e);case 1:return s=t.v,t.n=2,this._generateColors(a,s);case 2:return u=t.v,t.n=3,this._generatePalettes(o,u);case 3:return c=t.v,t.a(2,{colors:u,palettes:c})}},t,this)})),function(t,n){return e.apply(this,arguments)})},{key:"_filterColors",value:function(t,e){return Promise.resolve(function(t,e){var n;if(e.length>0)for(var r,i,a,o,s,u=t.data,l=u.length/4,c=0;c<l;c++){i=u[0+(r=4*c)],a=u[r+1],o=u[r+2],s=u[r+3];for(var h=0;h<e.length;h++)if(!(null==(n=e[h])?void 0:n.call(e,i,a,o,s))){u[r+3]=0;break}}return t}(e,t.map(function(t){return t.fn})))}},{key:"_generateColors",value:function(t,e){return Promise.resolve(t.fn(e.data,t.options))}},{key:"_generatePalettes",value:(t=d(l().m(function t(e,n){var r;return l().w(function(t){for(;;)switch(t.n){case 0:return t.n=1,Promise.all(e.map(function(t){var e=t.fn,r=t.options;return Promise.resolve(e(n,r))}));case 1:return r=t.v,t.a(2,Promise.resolve(r.reduce(function(t,n,r){return t[e[r].name]=n,t},{})))}},t)})),function(e,n){return t.apply(this,arguments)})}]);var t,e}();function Te(t,e,n){var r,i,a;function o(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+6*(e-t)*n:n<.5?e:n<2/3?t+(e-t)*(2/3-n)*6:t}if(0===e)r=i=a=n;else{var s=n<.5?n*(1+e):n+e-n*e,u=2*n-s;r=o(u,s,t+1/3),i=o(u,s,t),a=o(u,s,t-1/3)}return[255*r,255*i,255*a]}var Ee=function(){function t(e,n){o(this,t),this._rgb=e,this._population=n}return u(t,[{key:"r",get:function(){return this._rgb[0]}},{key:"g",get:function(){return this._rgb[1]}},{key:"b",get:function(){return this._rgb[2]}},{key:"rgb",get:function(){return this._rgb}},{key:"hsl",get:function(){if(!this._hsl){var t=f(this._rgb,3),e=t[0],n=t[1],r=t[2];this._hsl=function(t,e,n){t/=255,e/=255,n/=255;var r=Math.max(t,e,n),i=Math.min(t,e,n),a=0,o=0,s=(r+i)/2;if(r!==i){var u=r-i;switch(o=s>.5?u/(2-r-i):u/(r+i),r){case t:a=(e-n)/u+(e<n?6:0);break;case e:a=(n-t)/u+2;break;case n:a=(t-e)/u+4}a/=6}return[a,o,s]}(e,n,r)}return this._hsl}},{key:"hex",get:function(){if(!this._hex){var t=f(this._rgb,3),e=t[0],n=t[1],r=t[2];this._hex=function(t,e,n){return"#"+((1<<24)+(t<<16)+(e<<8)+n).toString(16).slice(1,7)}(e,n,r)}return this._hex}},{key:"population",get:function(){return this._population}},{key:"toJSON",value:function(){return{rgb:this.rgb,population:this.population}}},{key:"getYiq",value:function(){if(!this._yiq){var t=this._rgb;this._yiq=(299*t[0]+587*t[1]+114*t[2])/1e3}return this._yiq}},{key:"titleTextColor",get:function(){return this._titleTextColor||(this._titleTextColor=this.getYiq()<200?"#fff":"#000"),this._titleTextColor}},{key:"bodyTextColor",get:function(){return this._bodyTextColor||(this._bodyTextColor=this.getYiq()<150?"#fff":"#000"),this._bodyTextColor}}],[{key:"applyFilters",value:function(t,e){return e.length>0?t.filter(function(t){for(var n,r=t.r,i=t.g,a=t.b,o=0;o<e.length;o++)if(!(null==(n=e[o])?void 0:n.call(e,r,i,a,255)))return!1;return!0}):t}},{key:"clone",value:function(e){return new t(e._rgb,e._population)}}])}(),Fe=function(){function t(e,n){o(this,t),this._src=e,this.opts=Ie({},t.DefaultOpts,n)}return u(t,[{key:"result",get:function(){return this._result}},{key:"_process",value:function(e,n){e.scaleDown(this.opts);var r=function(t,e){var n=t.colorCount,r=t.quantizer,i=t.generators,a=t.filters,o={colorCount:n},s="string"==typeof r?{name:r,options:{}}:r;return s.options=Ie({},o,s.options),Ie({},{quantizer:s,generators:i,filters:a},e)}(this.opts,n);return t._pipeline.process(e.getImageData(),r)}},{key:"getPalette",value:(n=d(l().m(function t(){var e,n,r,i,a;return l().w(function(t){for(;;)switch(t.p=t.n){case 0:return e=new this.opts.ImageClass,t.p=1,t.n=2,e.load(this._src);case 2:return n=t.v,t.n=3,this._process(n,{generators:["default"]});case 3:if(r=t.v,this._result=r,i=r.palettes.default){t.n=4;break}throw new Error("Something went wrong and a palette was not found, please file a bug against our GitHub repo: https://github.com/vibrant-Colors/node-vibrant/");case 4:return e.remove(),t.a(2,i);case 5:return t.p=5,a=t.v,e.remove(),t.a(2,Promise.reject(a))}},t,this,[[1,5]])})),function(){return n.apply(this,arguments)})},{key:"getPalettes",value:(e=d(l().m(function t(){var e,n,r,i,a;return l().w(function(t){for(;;)switch(t.p=t.n){case 0:return e=new this.opts.ImageClass,t.p=1,t.n=2,e.load(this._src);case 2:return n=t.v,t.n=3,this._process(n,{generators:["*"]});case 3:return r=t.v,this._result=r,i=r.palettes,e.remove(),t.a(2,i);case 4:return t.p=4,a=t.v,e.remove(),t.a(2,Promise.reject(a))}},t,this,[[1,4]])})),function(){return e.apply(this,arguments)})}],[{key:"use",value:function(t){this._pipeline=t}},{key:"from",value:function(t){return new De(t)}}]);var e,n}();Fe.DefaultOpts={colorCount:64,quality:5,filters:[]};var Ae=Fe;Ae.DefaultOpts.quantizer="mmcq",Ae.DefaultOpts.generators=["default"],Ae.DefaultOpts.filters=["default"],Ae.DefaultOpts.ImageClass=Oe;var ze=function(){function t(e,n,r,i,a,s,u){o(this,t),this.histogram=u,this._volume=-1,this._avg=null,this._count=-1,this.dimension={r1:e,r2:n,g1:r,g2:i,b1:a,b2:s}}return u(t,[{key:"invalidate",value:function(){this._volume=this._count=-1,this._avg=null}},{key:"volume",value:function(){if(this._volume<0){var t=this.dimension,e=t.r1,n=t.r2,r=t.g1,i=t.g2,a=t.b1,o=t.b2;this._volume=(n-e+1)*(i-r+1)*(o-a+1)}return this._volume}},{key:"count",value:function(){if(this._count<0){for(var t=this.histogram,e=t.hist,n=t.getColorIndex,r=this.dimension,i=r.r1,a=r.r2,o=r.g1,s=r.g2,u=r.b1,l=r.b2,c=0,h=i;h<=a;h++)for(var d=o;d<=s;d++)for(var f=u;f<=l;f++){var g=n(h,d,f);e[g]&&(c+=e[g])}this._count=c}return this._count}},{key:"clone",value:function(){var e=this.histogram,n=this.dimension;return new t(n.r1,n.r2,n.g1,n.g2,n.b1,n.b2,e)}},{key:"avg",value:function(){if(!this._avg){var t,e,n,r=this.histogram,i=r.hist,a=r.getColorIndex,o=this.dimension,s=o.r1,u=o.r2,l=o.g1,c=o.g2,h=o.b1,d=o.b2,f=0;t=e=n=0;for(var g=s;g<=u;g++)for(var p=l;p<=c;p++)for(var m=h;m<=d;m++){var v=i[a(g,p,m)];v&&(f+=v,t+=v*(g+.5)*8,e+=v*(p+.5)*8,n+=v*(m+.5)*8)}this._avg=f?[~~(t/f),~~(e/f),~~(n/f)]:[~~(8*(s+u+1)/2),~~(8*(l+c+1)/2),~~(8*(h+d+1)/2)]}return this._avg}},{key:"contains",value:function(t){var e=f(t,3),n=e[0],r=e[1],i=e[2],a=this.dimension,o=a.r1,s=a.r2,u=a.g1,l=a.g2,c=a.b1,h=a.b2;return r>>=3,i>>=3,(n>>=3)>=o&&n<=s&&r>=u&&r<=l&&i>=c&&i<=h}},{key:"split",value:function(){var t=this.histogram,e=t.hist,n=t.getColorIndex,r=this.dimension,i=r.r1,a=r.r2,o=r.g1,s=r.g2,u=r.b1,l=r.b2,c=this.count();if(!c)return[];if(1===c)return[this.clone()];var h,d,f=a-i+1,g=s-o+1,p=l-u+1,m=Math.max(f,g,p),v=null;h=d=0;var b=null;if(m===f){b="r",v=new Uint32Array(a+1);for(var y=i;y<=a;y++){h=0;for(var x=o;x<=s;x++)for(var j=u;j<=l;j++){var w=n(y,x,j);e[w]&&(h+=e[w])}d+=h,v[y]=d}}else if(m===g){b="g",v=new Uint32Array(s+1);for(var k=o;k<=s;k++){h=0;for(var C=i;C<=a;C++)for(var _=u;_<=l;_++){var S=n(C,k,_);e[S]&&(h+=e[S])}d+=h,v[k]=d}}else{b="b",v=new Uint32Array(l+1);for(var M=u;M<=l;M++){h=0;for(var L=i;L<=a;L++)for(var O=o;O<=s;O++){var I=n(L,O,M);e[I]&&(h+=e[I])}d+=h,v[M]=d}}for(var D=-1,P=new Uint32Array(v.length),V=0;V<v.length;V++){var T=v[V];T&&(D<0&&T>d/2&&(D=V),P[V]=d-T)}var E=this;return function(t){var e=t+"1",n=t+"2",r=E.dimension[e],i=E.dimension[n],a=E.clone(),o=E.clone(),s=D-r,u=i-D;for(s<=u?(i=Math.min(i-1,~~(D+u/2)),i=Math.max(0,i)):(i=Math.max(r,~~(D-1-s/2)),i=Math.min(E.dimension[n],i));!v[i];)i++;for(var l=P[i];!l&&v[i-1];)l=P[--i];return a.dimension[n]=i,o.dimension[e]=i+1,[a,o]}(b)}}],[{key:"build",value:function(e){var n=new Le(e,{sigBits:5});return new t(n.rmin,n.rmax,n.gmin,n.gmax,n.bmin,n.bmax,n)}}])}(),Re=function(){return u(function t(e){o(this,t),this._comparator=e,this.contents=[],this._sorted=!1},[{key:"_sort",value:function(){this._sorted||(this.contents.sort(this._comparator),this._sorted=!0)}},{key:"push",value:function(t){this.contents.push(t),this._sorted=!1}},{key:"peek",value:function(t){return this._sort(),t="number"==typeof t?t:this.contents.length-1,this.contents[t]}},{key:"pop",value:function(){return this._sort(),this.contents.pop()}},{key:"size",value:function(){return this.contents.length}},{key:"map",value:function(t){return this._sort(),this.contents.map(t)}}])}();function He(t,e){for(var n=t.size();t.size()<e;){var r=t.pop();if(!(r&&r.count()>0))break;var i=f(r.split(),2),a=i[0],o=i[1];if(!a)break;if(t.push(a),o&&o.count()>0&&t.push(o),t.size()===n)break;n=t.size()}}var qe={targetDarkLuma:.26,maxDarkLuma:.45,minLightLuma:.55,targetLightLuma:.74,minNormalLuma:.3,targetNormalLuma:.5,maxNormalLuma:.7,targetMutesSaturation:.3,maxMutesSaturation:.4,targetVibrantSaturation:1,minVibrantSaturation:.35,weightSaturation:3,weightLuma:6.5,weightPopulation:.5};function We(t,e,n,r,i,a,o,s,u,l){var c=null,h=0;return e.forEach(function(e){var d=f(e.hsl,3),g=d[1],p=d[2];if(g>=s&&g<=u&&p>=i&&p<=a&&!function(t,e){return t.Vibrant===e||t.DarkVibrant===e||t.LightVibrant===e||t.Muted===e||t.DarkMuted===e||t.LightMuted===e}(t,e)){var m=function(t,e,n,r,i,a,o){function s(t,e){return 1-Math.abs(t-e)}return function(){for(var t=0,e=0,n=0;n<arguments.length;n+=2){var r=n<0||arguments.length<=n?void 0:arguments[n],i=n+1<0||arguments.length<=n+1?void 0:arguments[n+1];r&&i&&(t+=r*i,e+=i)}return t/e}(s(t,e),o.weightSaturation,s(n,r),o.weightLuma,i/a,o.weightPopulation)}(g,o,p,r,e.population,n,l);(null===c||m>h)&&(c=e,h=m)}}),c}var Be=(new Ve).filter.register("default",function(t,e,n,r){return r>=125&&!(t>250&&e>250&&n>250)}).quantizer.register("mmcq",function(t,e){if(0===t.length||e.colorCount<2||e.colorCount>256)throw new Error("Wrong MMCQ parameters");var n=ze.build(t);n.histogram.colorCount;var r=new Re(function(t,e){return t.count()-e.count()});r.push(n),He(r,.75*e.colorCount);var i=new Re(function(t,e){return t.count()*t.volume()-e.count()*e.volume()});return i.contents=r.contents,He(i,e.colorCount-i.size()),function(t){var e=[];for(;t.size();){var n=t.pop(),r=n.avg();e.push(new Ee(r,n.count()))}return e}(i)}).generator.register("default",function(t,e){e=Object.assign({},qe,e);var n=function(t){var e=0;return t.forEach(function(t){e=Math.max(e,t.population)}),e}(t),r=function(t,e,n){var r={Vibrant:null,DarkVibrant:null,LightVibrant:null,Muted:null,DarkMuted:null,LightMuted:null};return r.Vibrant=We(r,t,e,n.targetNormalLuma,n.minNormalLuma,n.maxNormalLuma,n.targetVibrantSaturation,n.minVibrantSaturation,1,n),r.LightVibrant=We(r,t,e,n.targetLightLuma,n.minLightLuma,1,n.targetVibrantSaturation,n.minVibrantSaturation,1,n),r.DarkVibrant=We(r,t,e,n.targetDarkLuma,0,n.maxDarkLuma,n.targetVibrantSaturation,n.minVibrantSaturation,1,n),r.Muted=We(r,t,e,n.targetNormalLuma,n.minNormalLuma,n.maxNormalLuma,n.targetMutesSaturation,0,n.maxMutesSaturation,n),r.LightMuted=We(r,t,e,n.targetLightLuma,n.minLightLuma,1,n.targetMutesSaturation,0,n.maxMutesSaturation,n),r.DarkMuted=We(r,t,e,n.targetDarkLuma,0,n.maxDarkLuma,n.targetMutesSaturation,0,n.maxMutesSaturation,n),r}(t,n,e);return function(t,e,n){if(!t.Vibrant&&!t.DarkVibrant&&!t.LightVibrant){if(!t.DarkVibrant&&t.DarkMuted){var r=f(t.DarkMuted.hsl,3),i=r[0],a=r[1],o=r[2];o=n.targetDarkLuma,t.DarkVibrant=new Ee(Te(i,a,o),0)}if(!t.LightVibrant&&t.LightMuted){var s=f(t.LightMuted.hsl,3),u=s[0],l=s[1],c=s[2];c=n.targetDarkLuma,t.DarkVibrant=new Ee(Te(u,l,c),0)}}if(!t.Vibrant&&t.DarkVibrant){var h=f(t.DarkVibrant.hsl,3),d=h[0],g=h[1],p=h[2];p=n.targetNormalLuma,t.Vibrant=new Ee(Te(d,g,p),0)}else if(!t.Vibrant&&t.LightVibrant){var m=f(t.LightVibrant.hsl,3),v=m[0],b=m[1],y=m[2];y=n.targetNormalLuma,t.Vibrant=new Ee(Te(v,b,y),0)}if(!t.DarkVibrant&&t.Vibrant){var x=f(t.Vibrant.hsl,3),j=x[0],w=x[1],k=x[2];k=n.targetDarkLuma,t.DarkVibrant=new Ee(Te(j,w,k),0)}if(!t.LightVibrant&&t.Vibrant){var C=f(t.Vibrant.hsl,3),_=C[0],S=C[1],M=C[2];M=n.targetLightLuma,t.LightVibrant=new Ee(Te(_,S,M),0)}if(!t.Muted&&t.Vibrant){var L=f(t.Vibrant.hsl,3),O=L[0],I=L[1],D=L[2];D=n.targetMutesSaturation,t.Muted=new Ee(Te(O,I,D),0)}if(!t.DarkMuted&&t.DarkVibrant){var P=f(t.DarkVibrant.hsl,3),V=P[0],T=P[1],E=P[2];E=n.targetMutesSaturation,t.DarkMuted=new Ee(Te(V,T,E),0)}if(!t.LightMuted&&t.LightVibrant){var F=f(t.LightVibrant.hsl,3),A=F[0],z=F[1],R=F[2];R=n.targetMutesSaturation,t.LightMuted=new Ee(Te(A,z,R),0)}}(r,0,e),r});/*! Fast Average Color | Â© 2025 Denis Seleznev | MIT License | https://github.com/fast-average-color/fast-average-color */function Ne(t){var e=t.toString(16);return 1===e.length?"0"+e:e}function Ue(t){return"#"+t.map(Ne).join("")}function Ge(t){return t?(e=t,Array.isArray(e[0])?t:[t]):[];var e}function Qe(t,e,n){for(var r=0;r<n.length;r++)if(Ye(t,e,n[r]))return!0;return!1}function Ye(t,e,n){switch(n.length){case 3:if(function(t,e,n){if(255!==t[e+3])return!0;if(t[e]===n[0]&&t[e+1]===n[1]&&t[e+2]===n[2])return!0;return!1}(t,e,n))return!0;break;case 4:if(function(t,e,n){if(t[e+3]&&n[3])return t[e]===n[0]&&t[e+1]===n[1]&&t[e+2]===n[2]&&t[e+3]===n[3];return t[e+3]===n[3]}(t,e,n))return!0;break;case 5:if(function(t,e,n){var r=n[0],i=n[1],a=n[2],o=n[3],s=n[4],u=t[e+3],l=Ke(u,o,s);if(!o)return l;if(!u&&l)return!0;if(Ke(t[e],r,s)&&Ke(t[e+1],i,s)&&Ke(t[e+2],a,s)&&l)return!0;return!1}(t,e,n))return!0;break;default:return!1}}function Ke(t,e,n){return t>=e-n&&t<=e+n}Ae.use(Be);function Je(t,e,n){for(var r={},i=n.dominantDivider||24,a=n.ignoredColor,o=n.step,s=[0,0,0,0,0],u=0;u<e;u+=o){var l=t[u],c=t[u+1],h=t[u+2],d=t[u+3];if(!a||!Qe(t,u,a)){var f=Math.round(l/i)+","+Math.round(c/i)+","+Math.round(h/i);r[f]?r[f]=[r[f][0]+l*d,r[f][1]+c*d,r[f][2]+h*d,r[f][3]+d,r[f][4]+1]:r[f]=[l*d,c*d,h*d,d,1],s[4]<r[f][4]&&(s=r[f])}}var g=s[0],p=s[1],m=s[2],v=s[3],b=s[4];return v?[Math.round(g/v),Math.round(p/v),Math.round(m/v),Math.round(v/b)]:n.defaultColor}function Xe(t,e,n){for(var r=0,i=0,a=0,o=0,s=0,u=n.ignoredColor,l=n.step,c=0;c<e;c+=l){var h=t[c+3],d=t[c]*h,f=t[c+1]*h,g=t[c+2]*h;u&&Qe(t,c,u)||(r+=d,i+=f,a+=g,o+=h,s++)}return o?[Math.round(r/o),Math.round(i/o),Math.round(a/o),Math.round(o/s)]:n.defaultColor}function $e(t,e,n){for(var r=0,i=0,a=0,o=0,s=0,u=n.ignoredColor,l=n.step,c=0;c<e;c+=l){var h=t[c],d=t[c+1],f=t[c+2],g=t[c+3];u&&Qe(t,c,u)||(r+=h*h*g,i+=d*d*g,a+=f*f*g,o+=g,s++)}return o?[Math.round(Math.sqrt(r/o)),Math.round(Math.sqrt(i/o)),Math.round(Math.sqrt(a/o)),Math.round(o/s)]:n.defaultColor}function Ze(t){return tn(t,"defaultColor",[0,0,0,0])}function tn(t,e,n){return void 0===t[e]?n:t[e]}function en(t){if(rn(t)){var e=t.naturalWidth,n=t.naturalHeight;return t.naturalWidth||-1===t.src.search(/\.svg(\?|$)/i)||(e=n=100),{width:e,height:n}}return function(t){return"undefined"!=typeof HTMLVideoElement&&t instanceof HTMLVideoElement}(t)?{width:t.videoWidth,height:t.videoHeight}:on(t)?{width:t.codedWidth,height:t.codedHeight}:{width:t.width,height:t.height}}function nn(t){return function(t){return"undefined"!=typeof HTMLCanvasElement&&t instanceof HTMLCanvasElement}(t)?"canvas":function(t){return an&&t instanceof OffscreenCanvas}(t)?"offscreencanvas":on(t)?"videoframe":function(t){return"undefined"!=typeof ImageBitmap&&t instanceof ImageBitmap}(t)?"imagebitmap":t.src}function rn(t){return"undefined"!=typeof HTMLImageElement&&t instanceof HTMLImageElement}var an="undefined"!=typeof OffscreenCanvas;function on(t){return"undefined"!=typeof VideoFrame&&t instanceof VideoFrame}var sn="undefined"==typeof window;function un(t){return Error("FastAverageColor: "+t)}function ln(t,e){e||console.error(t)}var cn=function(){function t(){this.canvas=null,this.ctx=null}return t.prototype.getColorAsync=function(t,e){if(!t)return Promise.reject(un("call .getColorAsync() without resource"));if("string"==typeof t){if("undefined"==typeof Image)return Promise.reject(un("resource as string is not supported in this environment"));var n=new Image;return n.crossOrigin=e&&e.crossOrigin||"",n.src=t,this.bindImageEvents(n,e)}if(rn(t)&&!t.complete)return this.bindImageEvents(t,e);var r=this.getColor(t,e);return r.error?Promise.reject(r.error):Promise.resolve(r)},t.prototype.getColor=function(t,e){var n=Ze(e=e||{});if(!t)return ln(a=un("call .getColor() without resource"),e.silent),this.prepareResult(n,a);var r=function(t,e){var n,r=tn(e,"left",0),i=tn(e,"top",0),a=tn(e,"width",t.width),o=tn(e,"height",t.height),s=a,u=o;return"precision"===e.mode||(a>o?(n=a/o,s=100,u=Math.round(s/n)):(n=o/a,u=100,s=Math.round(u/n)),(s>a||u>o||s<10||u<10)&&(s=a,u=o)),{srcLeft:r,srcTop:i,srcWidth:a,srcHeight:o,destWidth:s,destHeight:u}}(en(t),e);if(!(r.srcWidth&&r.srcHeight&&r.destWidth&&r.destHeight))return ln(a=un('incorrect sizes for resource "'.concat(nn(t),'"')),e.silent),this.prepareResult(n,a);if(!this.canvas&&(this.canvas=sn?an?new OffscreenCanvas(1,1):null:document.createElement("canvas"),!this.canvas))return ln(a=un("OffscreenCanvas is not supported in this browser"),e.silent),this.prepareResult(n,a);if(!this.ctx){if(this.ctx=this.canvas.getContext("2d",{willReadFrequently:!0}),!this.ctx)return ln(a=un("Canvas Context 2D is not supported in this browser"),e.silent),this.prepareResult(n);this.ctx.imageSmoothingEnabled=!1}this.canvas.width=r.destWidth,this.canvas.height=r.destHeight;try{this.ctx.clearRect(0,0,r.destWidth,r.destHeight),this.ctx.drawImage(t,r.srcLeft,r.srcTop,r.srcWidth,r.srcHeight,0,0,r.destWidth,r.destHeight);var i=this.ctx.getImageData(0,0,r.destWidth,r.destHeight).data;return this.prepareResult(this.getColorFromArray4(i,e))}catch(o){var a;return ln(a=un("security error (CORS) for resource ".concat(nn(t),".\nDetails: https://developer.mozilla.org/en/docs/Web/HTML/CORS_enabled_image")),e.silent),e.silent||console.error(o),this.prepareResult(n,a)}},t.prototype.getColorFromArray4=function(t,e){e=e||{};var n=t.length,r=Ze(e);if(n<4)return r;var i,a=n-n%4,o=4*(e.step||1);switch(e.algorithm||"sqrt"){case"simple":i=Xe;break;case"sqrt":i=$e;break;case"dominant":i=Je;break;default:throw un("".concat(e.algorithm," is unknown algorithm"))}return i(t,a,{defaultColor:r,ignoredColor:Ge(e.ignoredColor),step:o,dominantDivider:e.dominantDivider})},t.prototype.prepareResult=function(t,e){var n,r=t.slice(0,3),i=[t[0],t[1],t[2],t[3]/255],a=(299*(n=t)[0]+587*n[1]+114*n[2])/1e3<128;return{value:[t[0],t[1],t[2],t[3]],rgb:"rgb("+r.join(",")+")",rgba:"rgba("+i.join(",")+")",hex:Ue(r),hexa:Ue(t),isDark:a,isLight:!a,error:e}},t.prototype.destroy=function(){this.canvas&&(this.canvas.width=1,this.canvas.height=1,this.canvas=null),this.ctx=null},t.prototype.bindImageEvents=function(t,e){var n=this;return new Promise(function(r,i){var a=function(){u();var a=n.getColor(t,e);a.error?i(a.error):r(a)},o=function(){u(),i(un('Error loading image "'.concat(t.src,'"')))},s=function(){u(),i(un('Image "'.concat(t.src,'" loading aborted')))},u=function(){t.removeEventListener("load",a),t.removeEventListener("error",o),t.removeEventListener("abort",s)};t.addEventListener("load",a),t.addEventListener("error",o),t.addEventListener("abort",s)})},t}(),hn=function(t){var e=t.manga,n=t.mangaDynamicColorSchemes,r=$(),i=Z().setDynamicColor,a=_({variant:"popover",popupId:"manga-thumbnail-fullscreen"}),o=f(b.useState(!1),2),s=o[0],u=o[1];return b.useLayoutEffect(function(){if(!n)return function(){};var t=new Image;return t.crossOrigin="anonymous",t.src=tt.getThumbnailUrl(e),t.onload=function(){var e=t.width>600&&t.height>600;Promise.all([Ae.from(t).getPalette(),(new cn).getColor(t,{algorithm:"dominant",mode:e?"speed":"precision",ignoredColor:[[255,255,255,255,75],[0,0,0,255,75]]})]).then(function(t){var e=f(t,2),n=e[0],r=e[1];n.Vibrant&&n.DarkVibrant&&n.LightVibrant&&n.LightMuted&&n.Muted&&n.DarkMuted&&i(m(m({},n),{},{average:r}))})},function(){i(null)}},[]),c.jsxs(c.Fragment,{children:[c.jsxs(k,{sx:v(v({position:"relative",borderRadius:1,overflow:"hidden",backgroundColor:"background.paper",width:"150px",maxHeight:"fit-content",aspectRatio:et,flexShrink:0,flexGrow:0},r.breakpoints.up("lg"),{width:"200px"}),r.breakpoints.up("xl"),{width:"300px"}),children:[c.jsx(nt,{src:tt.getThumbnailUrl(e),alt:"Manga Thumbnail",onLoad:function(){return u(!0)},imgStyle:{width:"100%",height:"100%",objectFit:"cover"}}),s&&c.jsx(k,m(m({},S(a)),{},{sx:{position:"absolute",top:0,bottom:0,width:"100%",justifyContent:"center",alignItems:"center",opacity:0,"&:hover":{background:"rgba(0, 0, 0, 0.4)",cursor:"pointer",opacity:1}},children:c.jsx(Me,{fontSize:"large",color:"primary"})}))]}),c.jsx(rt,m(m({},it(a)),{},{sx:{outline:0},children:c.jsx(k,{onClick:function(){return a.close()},sx:{height:"100vh",p:2,outline:0,justifyContent:"center",alignItems:"center"},children:c.jsx(nt,{src:tt.getThumbnailUrl(e),alt:"Manga Thumbnail",imgStyle:{height:"100%",width:"100%",objectFit:"contain"}})})}))]})},dn=function(t){var e=t.query,n=t.sourceId,r=t.mode,i=t.children,a="source"===r&&void 0!==n?X.sources.childRoutes.browse.path(n,e):"source.global-search"===r?X.sources.childRoutes.searchAll.path(e):X.library.path(void 0,e);return c.jsx(le,{component:p,to:a,sx:{textDecoration:"none",color:"inherit"},children:null!=i?i:e})},fn="35px",gn=function(t){var e=t.manga,n=e.description,r=e.genre,i=e.sourceId,a=t.mode,o=f(b.useState(null),2),s=o[0],u=o[1],l=f(b.useState(),2),h=l[0],d=l[1];E(s,b.useCallback(function(){return d(null==s?void 0:s.clientHeight)},[s]));var g=f(at("isDescriptionGenreCollapsed",!0),2),p=g[0],m=g[1],v=n?Math.min(75,null!=h?h:75):0,y=b.useMemo(function(){return r.filter(Boolean)},[r]);return c.jsxs(c.Fragment,{children:[n&&c.jsxs(k,{sx:{position:"relative"},children:[c.jsx(ot,{collapsedSize:v,in:!p,children:c.jsx(W,{ref:u,sx:{whiteSpace:"pre-line",textAlign:"justify",textJustify:"inter-word",mb:fn},children:n})}),c.jsx(k,{onClick:function(){return m(!p)},sx:{justifyContent:"flex-start",alignItems:"center",cursor:"pointer",position:"absolute",width:"100%",height:fn,bottom:0,background:function(t){return"linear-gradient(transparent -15px, ".concat(t.palette.background.default,")")}},children:c.jsx(O,{sx:{color:function(t){return"light"===t.palette.mode?"black":"text"}},children:p?c.jsx(se,{}):c.jsx(ue,{})})})]}),c.jsx(k,{sx:{flexDirection:"row",flexWrap:p?"no-wrap":"wrap",gap:1,overflowX:p?"auto":null},children:y.map(function(t){return c.jsx(dn,{query:t,sourceId:i,mode:a,children:c.jsx(ce,{label:t,variant:"outlined",onClick:function(){}})},t)})})]})},pn=q("div")(function(t){var e=t.theme;return v({display:"flex",flexDirection:"column",gap:e.spacing(2),padding:e.spacing(1)},e.breakpoints.up("md"),{flexBasis:"40%",height:"calc(100vh - 64px)",overflowY:"auto"})}),mn=function(t){var e=t.url,n=t.mangaThumbnailBackdrop,r=t.children;return c.jsxs(k,{sx:{position:"relative"},children:[n&&c.jsxs(c.Fragment,{children:[c.jsx(nt,{spinnerStyle:{display:"none"},imgStyle:{position:"absolute",top:0,left:0,width:"100%",height:"100%",objectFit:"cover"},src:e,alt:"Manga Thumbnail"}),c.jsx(k,{sx:{"&::before":function(t){return ct(n,{position:"absolute",display:"inline-block",content:'""',top:0,left:0,width:"100%",height:"100%",background:"linear-gradient(to top, ".concat(t.palette.background.default,", transparent 100%, transparent 1px),linear-gradient(to right, ").concat(t.palette.background.default,", transparent 50%, transparent 1px),linear-gradient(to bottom, ").concat(t.palette.background.default,", transparent 50%, transparent 1px),linear-gradient(to left, ").concat(t.palette.background.default,", transparent 50%, transparent 1px)"),backdropFilter:"blur(4.5px) brightness(0.75)"})}}})]}),r]})},vn=q("div")(function(t){return{display:"flex",paddingBottom:t.theme.spacing(1)}}),bn=q("div")(function(t){return{zIndex:1,marginLeft:t.theme.spacing(1)}}),yn=function(t){return c.jsx(ae,m({},t))},xn=q("div")(function(t){return{display:"flex",gap:t.theme.spacing(1)}}),jn=function(t){var e=t.url,n=h().t;return c.jsx(L,{title:n("global.button.open_site"),disabled:!e,children:c.jsx(Zt,{size:"medium",disabled:!e,component:le,href:null!=e?e:void 0,target:"_blank",rel:"noreferrer",variant:"outlined",children:c.jsx(te,{})})})};var wn=function(t,e,n){return null==t?void 0:t.map(function(t){return c.jsx(dn,{query:t,sourceId:e,mode:n},t)}).reduce(function(t,e){return c.jsxs(c.Fragment,{children:[t,", ",e]})})},kn=function(t){var e,n,r=t.manga,i=t.mode,a=h().t,o=st().settings,s=o.mangaThumbnailBackdrop,u=o.mangaDynamicColorSchemes;b.useEffect(function(){r.source||U(ut("source.error.label.source_not_found"),"error")},[r.source]);var f,g,p=Dt(r),m=p.CategorySelectComponent,v=p.updateLibraryState,y=function(){var t=d(l().m(function t(){return l().w(function(t){for(;;)switch(t.p=t.n){case 0:return t.p=0,t.n=1,navigator.clipboard.writeText(r.title);case 1:U(a("global.label.copied_clipboard"),"info"),t.n=3;break;case 2:t.p=2,t.v;case 3:return t.a(2)}},t,null,[[0,2]])}));return function(){return t.apply(this,arguments)}}();return c.jsxs(c.Fragment,{children:[c.jsxs(pn,{children:[c.jsxs(mn,{url:tt.getThumbnailUrl(r),mangaThumbnailBackdrop:s,children:[c.jsxs(vn,{children:[c.jsx(hn,{manga:r,mangaDynamicColorSchemes:u}),c.jsxs(bn,{children:[c.jsxs(k,{sx:{flexDirection:"row",gap:1,alignItems:"flex-start",mb:1},children:[c.jsx(dn,{query:r.title,sourceId:r.sourceId,mode:"source.global-search",children:c.jsx(W,{variant:"h5",component:"h2",sx:{wordBreak:"break-word"},children:r.title})}),c.jsx(L,{title:a("global.button.copy"),children:c.jsx(O,{onClick:y,color:"inherit",children:c.jsx(ke,{fontSize:"small"})})})]}),r.author&&c.jsx(yn,{title:a("manga.label.author"),value:wn(tt.getAuthors(r),null===(e=r.source)||void 0===e?void 0:e.id,i)}),r.artist&&c.jsx(yn,{title:a("manga.label.artist"),value:wn(tt.getArtists(r),null===(n=r.source)||void 0===n?void 0:n.id,i)}),c.jsx(yn,{title:a("manga.label.status"),value:a(lt[r.status])}),c.jsx(yn,{title:a("source.title_one"),value:(f=r.source,f?oe.isLocalSource(f)?ut("source.local_source.title"):null!==(g=f.displayName)&&void 0!==g?g:f.id:ut("global.label.unknown"))})]})]}),c.jsxs(xn,{children:[c.jsxs(Ce,{size:"medium",onClick:v,variant:r.inLibrary?"contained":"outlined",children:[r.inLibrary?c.jsx(ne,{}):c.jsx(Pt,{}),r.inLibrary?a("manga.button.in_library"):a("manga.button.add_to_library")]}),c.jsx(Se,{manga:r}),c.jsx(jn,{url:r.realUrl})]})]}),c.jsx(gn,{manga:r,mode:i})]}),m]})},Cn=function(t){var e=t.manga,n=t.onRefresh,r=t.refreshing,i=h().t,a=$(),o=ht(a.breakpoints.up("sm")),s=f(dt.useState(null),2),u=s[0],l=s[1],d=Boolean(u),g=function(){l(null)},m=Vt({mangaId:e.id}),v=m.openCategorySelect,b=m.CategorySelectComponent;return c.jsxs(c.Fragment,{children:[o&&c.jsxs(c.Fragment,{children:[c.jsx(L,{title:i("manga.label.reload_from_source"),disabled:r,children:c.jsx(O,{onClick:function(){n()},disabled:r,color:"inherit",children:c.jsx(ft,{})})}),e.inLibrary&&c.jsxs(c.Fragment,{children:[c.jsx(L,{title:i("global.button.migrate"),children:c.jsx(p,{to:X.migrate.childRoutes.search.path(e.sourceId,e.id,e.title),state:{mangaTitle:e.title},style:{textDecoration:"none",color:"inherit"},children:c.jsx(O,{color:"inherit",children:c.jsx(Kt,{})})})}),c.jsx(L,{title:i("manga.label.edit_categories"),children:c.jsx(O,{onClick:function(){v(!0)},color:"inherit",children:c.jsx(Jt,{})})})]})]}),!o&&c.jsxs(c.Fragment,{children:[c.jsx(O,{id:"chaptersMenuButton","aria-controls":d?"chaptersMenu":void 0,"aria-haspopup":"true","aria-expanded":d?"true":void 0,onClick:function(t){return l(t.currentTarget)},color:"inherit",children:c.jsx(gt,{})}),c.jsxs(D,{id:"chaptersMenu",anchorEl:u,open:d,onClose:g,MenuListProps:{"aria-labelledby":"chaptersMenuButton"},children:[c.jsxs(pt,{onClick:function(){n(),g()},disabled:r,children:[c.jsx(mt,{children:c.jsx(ft,{fontSize:"small"})}),c.jsx(vt,{children:i("manga.label.reload_from_source")})]}),e.inLibrary&&[c.jsxs(pt,{component:p,to:X.migrate.childRoutes.search.path(e.sourceId,e.id,e.title),state:{mangaTitle:e.title},style:{textDecoration:"none",color:"inherit"},children:[c.jsx(mt,{children:c.jsx(Kt,{fontSize:"small"})}),c.jsx(vt,{children:i("migrate.title")})]},"migrate"),c.jsxs(pt,{onClick:function(){v(!0),g()},children:[c.jsx(mt,{children:c.jsx(Jt,{fontSize:"small"})}),c.jsx(vt,{children:i("manga.label.edit_categories")})]},"categories")]]})]}),b]})};r("Manga",function(){var t,e,n=h().t,r=bt().id,a=(null!==(t=yt().state)&&void 0!==t?t:{}).mode,o=b.useRef(!1),s=F.useGetManga(xt,r),u=s.data,g=s.error,p=s.loading,m=s.networkStatus,v=s.refetch,y=jt(m),x=null==u?void 0:u.manga,j=function(t){var e=f(b.useState(!1),2),n=e[0],r=e[1],i=f(b.useState(null),2),a=i[0],o=i[1];return[b.useCallback(d(l().m(function e(){return l().w(function(e){for(;;)switch(e.n){case 0:return r(!0),o(null),e.n=1,Promise.all([F.getMangaFetch(t,{awaitRefetchQueries:!0}).response,F.getMangaChaptersFetch(t,{awaitRefetchQueries:!0}).response]).catch(function(t){t instanceof G&&"no chapters found"===Q(t.message)||o(t)}).finally(function(){return r(!1)});case 1:return e.a(2)}},e)})),[t]),{loading:n,error:a}]}(r),w=f(j,2),C=w[0],_=w[1],S=_.loading,M=_.error,I=null!=g?g:M;return b.useEffect(function(){null!=x&&(!o.current&&!x.initialized&&(o.current=!0,C()))},[x]),he(null!==(e=null==x?void 0:x.title)&&void 0!==e?e:n("manga.title_one"),c.jsxs(k,{direction:"row",sx:{alignItems:"center"},children:[I&&!y&&!S&&c.jsx(L,{title:c.jsxs(c.Fragment,{children:[n("manga.error.label.request_failure"),c.jsx("br",{}),R(I)]}),children:c.jsx(O,{onClick:function(){return v()},children:c.jsx(i,{color:"error"})})}),x&&(S||y)&&c.jsx(O,{disabled:!0,children:c.jsx(wt,{size:16})}),x&&c.jsx(Cn,{manga:x,onRefresh:C,refreshing:S})]}),[n,I,y,S,x,C]),I&&!x?c.jsx(Tt,{message:n("manga.error.label.request_failure"),messageExtra:R(I)}):c.jsxs(B,{sx:{display:{md:"flex"},overflow:"hidden"},children:[p&&c.jsx(z,{}),x&&c.jsx(kn,{manga:x,mode:a}),x&&c.jsx(we,{manga:x,isRefreshing:S})]})})}}})}();
