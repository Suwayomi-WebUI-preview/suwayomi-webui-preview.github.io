import{D as T,G as U,l as D,ad as P,t as _,ae as p,af as g,r as S,m as B,g as G}from"./index-BuwiQmwH.js";import{e as O}from"./Strings-CAV0u705.js";var a=function(t){return t.UPDATE="UPDATE",t.UNINSTALL="UNINSTALL",t.INSTALL="INSTALL",t}({}),o=function(t){return t.OBSOLETE="OBSOLETE",t.UPDATING="UPDATING",t.UNINSTALLING="UNINSTALLING",t.INSTALLING="INSTALLING",t}({});const N={...a,...o};var L=function(t){return t.INSTALLED="INSTALLED",t.UPDATE_PENDING="UPDATE_PENDING",t.OBSOLETE="OBSOLETE",t}({});const X={[a.UPDATE]:o.UPDATING,[a.UNINSTALL]:o.UNINSTALLING,[a.INSTALL]:o.INSTALLING},h={[a.UPDATE]:a.UNINSTALL,[a.UNINSTALL]:a.INSTALL,[a.INSTALL]:a.UNINSTALL},k={[N.UNINSTALL]:{id:"fo0VXg"},[N.INSTALL]:{id:"TKQ7K+"},[N.UPDATE]:{id:"EkH9pt"},[N.OBSOLETE]:{id:"l4sJpX"},[N.UPDATING]:{id:"JL3si7"},[N.UNINSTALLING]:{id:"ApzjxN"},[N.INSTALLING]:{id:"Wtw22s"}},f={[a.UPDATE]:{id:"iM9yOn"},[a.INSTALL]:{id:"mWouW/"},[a.UNINSTALL]:{id:"hkyq0q"}},m={[L.INSTALLED]:{id:"eQkgKV"},[L.UPDATE_PENDING]:{id:"ardOlT"},[L.OBSOLETE]:{id:"l4sJpX"},[T.ALL]:{id:"N40H+G"},[T.OTHER]:{id:"/IX/7x"},[T.LOCAL_SOURCE]:{id:"/IX/7x"},[T.PINNED]:{id:"kNiQp6"},[T.LAST_USED_SOURCE]:{id:"JGvwnU"}},v=(t,n,r)=>n?N.OBSOLETE:r?N.UPDATE:t?N.UNINSTALL:N.INSTALL,C=t=>[L.INSTALLED,L.UPDATE_PENDING,L.OBSOLETE].includes(t),b=t=>[T.PINNED,T.LAST_USED_SOURCE].includes(t),y=t=>C(t)||b(t)||[T.ALL,T.OTHER,T.LOCAL_SOURCE].includes(t),x=t=>y(t)?U._(m[t]):D(t);function M(t){const n=Object.groupBy(t,s=>s.isInstalled?s.hasUpdate&&!s.isObsolete?L.UPDATE_PENDING:s.isObsolete?L.OBSOLETE:L.INSTALLED:s.lang);return Object.entries(n).toSorted(([s],[e])=>{const A=Object.values(L),i=A.includes(s),c=L.OBSOLETE===s,I=L.UPDATE_PENDING===s,u=A.includes(e),d=L.OBSOLETE===e,l=L.UPDATE_PENDING===e;return c||i&&!u||I&&!d?-1:d||!i&&u||!I&&l?1:g(s,e)}).map(([s,e])=>[s,(e!=null?e:[]).toSorted((A,i)=>A.name.localeCompare(i.name))]).filter(([,s])=>!!s.length)}const j=t=>[...new Set(t.map(n=>n.lang))],H=(t,{selectedLanguages:n,showNsfw:r,query:E}={})=>{const s=P(_(n!=null?n:[]));return t.filter(e=>!n||s.includes(p(e.lang))||e.isInstalled).filter(e=>r===void 0||r||!e.isNsfw).filter(e=>E==null||O(e.name).includes(O(E)))},J=async(t,n,r)=>{try{switch(r){case a.INSTALL:await S.updateExtension(t,{install:!0,isObsolete:n}).response;break;case a.UNINSTALL:await S.updateExtension(t,{uninstall:!0,isObsolete:n}).response;break;case a.UPDATE:await S.updateExtension(t,{update:!0,isObsolete:n}).response;break;default:throw new Error('Unexpected ExtensionAction "'.concat(r,'"'))}}catch(E){throw B(U.t({...f[r],values:{count:1}}),"error",G(E)),E}};export{o as E,k as I,N as a,a as b,X as c,h as d,j as e,H as f,v as g,M as h,b as i,L as j,f as k,x as t,J as u};
