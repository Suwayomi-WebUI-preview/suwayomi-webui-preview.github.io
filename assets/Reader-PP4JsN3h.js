import{cz as Rr,e as i,cA as ht,cB as Pe,cu as O,j as t,D as Vt,ac as m,n as Ft,cC as Yr,cD as V,cE as Je,a as Ue,cF as Ot,cG as Ie,cH as ye,cI as Kr,cJ as nt,cK as Wt,S as A,o as X,T as Ye,aT as Zr,cL as qr,aV as Jr,c7 as kt,Y as Ge,a6 as Xt,cM as Te,C as $,cN as br,cO as he,z as $e,cP as N,bG as ge,cQ as De,cR as Qr,b as Pt,d as es,ck as ts,cS as rs,cT as ss,cU as ns,cl as os,cq as as,ad as Qe,cV as qt,aW as Ke,cW as Jt,cX as Er,c as xe,bK as gt,A as Yt,L as Dt,u as F,bT as Tr,cY as jr,ao as bt,af as Et,a3 as Tt,bW as is,ai as cs,B as Ze,cZ as ls,c_ as Qt,c$ as Cr,d0 as Ut,d1 as wr,d2 as ds,d3 as us,d4 as er,d5 as Or,d6 as xt,d7 as Be,cs as rt,d8 as Fe,k as Dr,I as ae,Z as Ve,d9 as Gt,da as ke,bU as gs,bV as hs,bg as xs,g as It,aM as fs,db as Kt,a4 as ps,a5 as ms,m as Ir,dc as ut,dd as Lt,a9 as tr,de as At,df as vs,dg as Nt,dh as Ss,di as jt,dj as Rs,dk as Lr,dl as bs,dm as We,b2 as _e,dn as Es,dp as qe,dq as st,dr as Ts,ds as Ar,dt as js,du as Cs,r as $t,dv as mt,dw as ws,dx as Os,i as St,dy as Ds,dz as Is,h as _r,dA as Br,dB as Ls,p as yr,dC as rr,M as sr,dD as As,dE as _s,dF as Bs,dG as dt,dH as q,dI as nr,dJ as or,dK as ys,dL as Rt,dM as ks,dN as Ps,dO as ar,dP as Ns,dQ as Ms,f as Hs,dR as Vs,ar as Fs,dS as Ws,dT as Us,dU as Gs}from"./index-CYOaxZB1.js";import{R as $s,S as zs,D as Xs,a as Ys,b as Ks,c as Zs}from"./ReaderSettingsTabs-CPAGWQWX.js";import{L as zt}from"./Link-BLPGNatt.js";import{S as kr}from"./Select-D7J5i2zf.js";import{d as Pr,b as qs,B as Js,F as Nr}from"./CustomButtonIcon-nYt07uzv.js";import{a as Mr,I as Hr,T as Qs}from"./TextField-CYDwjkWd.js";import{K as en}from"./MUI.util-BIqMDmnP.js";import{I as tn}from"./InputAdornment-Bi-fftNR.js";import{O as rn}from"./OpenInNew-D3Ku2Ne8.js";import{D as sn}from"./Download-BmNUuGUd.js";import{D as nn}from"./Delete-ChT_9CwD.js";import{D as on}from"./ChapterCardMetadata-C_7VEOYI.js";import{F as an}from"./Favorite-DKoEYQ9i.js";import{a as cn,F as ln,g as dn}from"./useManageMangaLibraryState-BuxVX7j2.js";import{C as un}from"./CheckboxInput-BmnFaywZ.js";import{E as Ct}from"./EmptyViewAbsoluteCentered-BmMNAYoe.js";import"./TabsMenu-DzEUZvT7.js";import"./Tabs-D17e3o3h.js";import"./Trans-CCX80MA4.js";import"./Slider-sRD6VKTp.js";import"./ListSubheader-DlGh4cQf.js";import"./Add-CiU4wlDK.js";import"./Card-8NKR3lrK.js";import"./CardActionArea-Ber97Kga.js";import"./CardContent-B8Mv1t_q.js";import"./Checkbox-Crrfg5B9.js";import"./formControlState-Dq1zat_P.js";import"./useFormControl-5b4-eLM3.js";import"./SwitchBase-DVyqG6ME.js";import"./ThreeStateCheckboxInput-DCHYeC-s.js";import"./FormGroup-CWjziMXz.js";const gn=e=>{const{activeScopes:s,enableScope:n,disableScope:o}=Rr(),r=i.useRef([]);i.useEffect(()=>e?(r.current=[...s],n(ht.NONE),r.current.forEach(o),()=>{o(ht.NONE),r.current.forEach(n)}):()=>{},[e])},hn=({isOpen:e,close:s})=>{const{manga:n}=Pe(),o=O.useSettings();gn(e);const[r,a]=i.useState(0),[l,d]=i.useState(!1);return!n||!e?null:t.jsx(Vt,{open:e,maxWidth:"md",fullWidth:!0,onClose:s,hideBackdrop:r===Yr.FILTER,sx:{...m(l,{opacity:.75})},children:t.jsx(Ft,{sx:{p:0},children:t.jsx($s,{activeTab:r,setActiveTab:a,settings:o,updateSetting:(...c)=>O.updateSetting(n,...c),deleteSetting:(...c)=>O.deleteSetting(n,...c),setTransparent:d})})})},xn=({isDesktop:e,scrollbarXSize:s,readerNavBarWidth:n,isMaximized:o,currentPageIndex:r,pages:a,totalPages:l,progressBarType:d,shouldShowPageNumber:c,readingDirection:x})=>{const u=i.useMemo(()=>{const g=ye(r,a).name,h="/",f="".concat(g).concat(h).concat(l);return x===nt.LTR?f:Kr(f,h)},[r,a,l,x]);return!c||o||e&&d===Wt.STANDARD||o&&d===Wt.HIDDEN?null:t.jsx(A,{sx:{position:"fixed",left:n,right:0,bottom:g=>"max(calc(".concat(g.spacing(1)," + ").concat(s,"px), env(safe-area-inset-bottom))"),alignItems:"center",transition:g=>"left 0.".concat(g.transitions.duration.shortest,"s")},children:t.jsx(X,{sx:{p:.5,borderRadius:1,backgroundColor:"rgba(0, 0, 0, 0.3)"},children:t.jsx(Ye,{sx:{color:"white"},children:u})})})},fn=V(xn,[O.useOverlayMode,Je,Ue,Ot,Ie,O.useSettingsWithoutDefaultFlag],["isDesktop","scrollbarXSize","readerNavBarWidth","isMaximized","currentPageIndex","pages","totalPages","progressBarType","shouldShowPageNumber","readingDirection"]);function ir(e){return e.substring(2).toLowerCase()}function pn(e,s){return s.documentElement.clientWidth<e.clientX||s.documentElement.clientHeight<e.clientY}function mn(e){const{children:s,disableReactTree:n=!1,mouseEvent:o="onClick",onClickAway:r,touchEvent:a="onTouchEnd"}=e,l=i.useRef(!1),d=i.useRef(null),c=i.useRef(!1),x=i.useRef(!1);i.useEffect(()=>(setTimeout(()=>{c.current=!0},0),()=>{c.current=!1}),[]);const u=Zr(qr(s),d),g=Jr(p=>{const S=x.current;x.current=!1;const E=kt(d.current);if(!c.current||!d.current||"clientX"in p&&pn(p,E))return;if(l.current){l.current=!1;return}let j;p.composedPath?j=p.composedPath().includes(d.current):j=!E.documentElement.contains(p.target)||d.current.contains(p.target),!j&&(n||!S)&&r(p)}),h=p=>S=>{x.current=!0;const E=s.props[p];E&&E(S)},f={ref:u};return a!==!1&&(f[a]=h(a)),i.useEffect(()=>{if(a!==!1){const p=ir(a),S=kt(d.current),E=()=>{l.current=!0};return S.addEventListener(p,g),S.addEventListener("touchmove",E),()=>{S.removeEventListener(p,g),S.removeEventListener("touchmove",E)}}},[g,a]),o!==!1&&(f[o]=h(o)),i.useEffect(()=>{if(o!==!1){const p=ir(o),S=kt(d.current);return S.addEventListener(p,g),()=>{S.removeEventListener(p,g)}}},[g,o]),i.cloneElement(s,f)}const cr=Ge(Ye)({boxSizing:"content-box",display:"flex",justifyContent:"center",alignItems:"center",overflow:"hidden",textAlign:"center",userSelect:"none",cursor:"pointer"}),vn=Ge(A,{shouldForwardProp:Xt(["progressBarPosition"])})(({theme:e,progressBarPosition:s})=>({position:"fixed",pointerEvents:"all",touchAction:"none",...m(Te(s).isHorizontal,{justifyContent:"flex-end",bottom:0,right:0}),...m(Te(s).isVertical,{top:0,bottom:0}),...m(Te(s).isLeft,{alignItems:e.direction==="ltr"?"flex-start":"flex-end"}),...m(Te(s).isRight,{alignItems:e.direction==="ltr"?"flex-end":"flex-start"})})),Sn=Ge(A)(({theme:e})=>({flexDirection:"row",justifyContent:"center",alignItems:"center",gap:e.spacing(.5)})),Rn=Ge(A)({flexDirection:"row",flexGrow:1,overflow:"hidden"}),bn=Ge(X,{shouldForwardProp:Xt(["currentPagesIndex","pagesLength","progressBarPosition"])})(({currentPagesIndex:e,pagesLength:s,progressBarPosition:n})=>({position:"absolute",pointerEvents:"none",...m(Te(n).isHorizontal,{left:0,width:"".concat((e+1)/s*100,"%"),height:"100%"}),...m(Te(n).isVertical,{top:0,width:"100%",height:"".concat((e+1)/s*100,"%")})})),En=({pageName:e,currentPagesIndex:s,pagesLength:n,isDragging:o,boxProps:r,children:a,progressBarPosition:l})=>t.jsx($,{title:e,slotProps:{tooltip:{sx:{backgroundColor:"primary.main",color:"primary.contrastText"}}},placement:br[l],children:t.jsx(X,{...r,sx:{position:"absolute",cursor:o?"grabbing":"grab",...m(Te(l).isHorizontal,{left:"".concat(Math.max(0,s-1)/(n-1)*100,"%"),width:"calc(100% / ".concat(n-1,")"),height:"100%"}),...m(Te(l).isVertical,{top:"".concat(Math.max(0,s-1)/(n-1)*100,"%"),width:"100%",height:"calc(100% / ".concat(n-1,")")}),...r==null?void 0:r.sx},children:a})}),Tn=Ge(A)({position:"relative",flexDirection:"row",flexGrow:1}),jn=i.memo(Ge(X,{shouldForwardProp:Xt(["isFirstPage","isLastPage"])})(({isFirstPage:e,isLastPage:s})=>({flexGrow:1,height:"100%",cursor:"pointer",borderLeftWidth:e?0:void 0,borderRightWidth:s?0:void 0}))),Cn=i.memo(({page:e,pagesIndex:s,isCurrentPage:n,isLeadingPage:o,isTrailingPage:r,totalPages:a,showDraggingStyle:l,primaryPageLoadState:d,secondaryPageLoadState:c,createProgressBarSlot:x,...u})=>{const g=i.useMemo(()=>x(e,s,d,c,n,o,r,a,l),[x,e,s,d,c,n,o,r,a,l]);return t.jsx(jn,{...u,isFirstPage:s===0,isLastPage:s===a-1,children:g})}),wn=({totalPages:e,pages:s,pageLoadStates:n,currentPageIndex:o,slotProps:r,slots:a,createProgressBarSlot:l,progressBarPosition:d,readingMode:c,isDragging:x,setIsDragging:u,openPage:g,direction:h,fullSegmentClicks:f})=>{var L,y,B,W,te,k,U,M,_,ie,ce,Q,G,re,H,Z,le,je,Ce,fe,pe,de,ve,Se,Le,me,Ne,ze,et,we,Re,Y;const p=i.useRef(null),S=i.useRef(void 0),[E,j]=i.useState(0),v=i.useRef(null);$e(v,i.useCallback(()=>{const P=v.current;if(!P)return;const{paddingLeft:K,paddingRight:Me}=getComputedStyle(P),ee=6,be=P.clientWidth-parseFloat(K)-parseFloat(Me),ue=c===N.DOUBLE_PAGE?be*2+ee:be;j(ue)},[c]));const R=i.useMemo(()=>ye(o,s).pagesIndex,[o,s]),w=Te(d).isHorizontal,b=i.useMemo(()=>ye(o,s),[o,s]),T=i.useCallback((...P)=>ge(P[0],P[1],h),[h]);he.useHandleProgressDragging(g,p,x,b,s,d,T,f);const D=P=>{if(!p.current)return;const K="touches"in P;g(De(Qr(K?P.touches[0]:P,p.current,s,w,f,T)),void 0,!1),clearTimeout(S.current),S.current=setTimeout(()=>u(!0),250)},I=()=>{u(!1),clearTimeout(S.current)};return t.jsx(vn,{...r==null?void 0:r.container,progressBarPosition:d,children:t.jsxs(Sn,{...r==null?void 0:r.progressBarRoot,children:[t.jsx(cr,{...(L=r==null?void 0:r.progressBarPageTexts)==null?void 0:L.base,...(y=r==null?void 0:r.progressBarPageTexts)==null?void 0:y.current,sx:[{width:"".concat(E,"px")},...Array.isArray((W=(B=r==null?void 0:r.progressBarPageTexts)==null?void 0:B.base)==null?void 0:W.sx)?(U=(k=(te=r==null?void 0:r.progressBarPageTexts)==null?void 0:te.base)==null?void 0:k.sx)!=null?U:[]:[(_=(M=r==null?void 0:r.progressBarPageTexts)==null?void 0:M.base)==null?void 0:_.sx],...Array.isArray((ce=(ie=r==null?void 0:r.progressBarPageTexts)==null?void 0:ie.current)==null?void 0:ce.sx)?(re=(G=(Q=r==null?void 0:r.progressBarPageTexts)==null?void 0:Q.current)==null?void 0:G.sx)!=null?re:[]:[(Z=(H=r==null?void 0:r.progressBarPageTexts)==null?void 0:H.current)==null?void 0:Z.sx]],onClick:()=>g("previous","ltr",!1),children:b.name}),t.jsx(mn,{onClickAway:()=>u(!1),children:t.jsxs(Tn,{...r==null?void 0:r.progressBarSlotsActionArea,onMouseDown:D,onMouseUp:I,onTouchStart:D,onTouchEnd:I,children:[t.jsxs(Rn,{ref:p,...r==null?void 0:r.progressBarSlotsContainer,children:[s.map((P,K)=>i.createElement(Cn,{...r==null?void 0:r.progressBarSlot,key:P.primary.index,page:P,pagesIndex:K,isCurrentPage:K===R,isLeadingPage:K<R,isTrailingPage:K>R,totalPages:s.length,primaryPageLoadState:n[P.primary.index].loaded,secondaryPageLoadState:P.secondary?n[P.secondary.index].loaded:void 0,createProgressBarSlot:l,showDraggingStyle:K===R&&x})),t.jsx(bn,{...r==null?void 0:r.progressBarReadPages,currentPagesIndex:b.pagesIndex,pagesLength:s.length,progressBarPosition:d})]}),t.jsx(En,{boxProps:r==null?void 0:r.progressBarCurrentPageSlot,pageName:b.name,currentPagesIndex:b.pagesIndex,pagesLength:s.length,isDragging:x,progressBarPosition:d,children:a==null?void 0:a.progressBarCurrentPage})]})}),t.jsx(cr,{ref:v,...(le=r==null?void 0:r.progressBarPageTexts)==null?void 0:le.base,...(je=r==null?void 0:r.progressBarPageTexts)==null?void 0:je.total,sx:[{minWidth:"unset"},...Array.isArray((fe=(Ce=r==null?void 0:r.progressBarPageTexts)==null?void 0:Ce.base)==null?void 0:fe.sx)?(ve=(de=(pe=r==null?void 0:r.progressBarPageTexts)==null?void 0:pe.base)==null?void 0:de.sx)!=null?ve:[]:[(Le=(Se=r==null?void 0:r.progressBarPageTexts)==null?void 0:Se.base)==null?void 0:Le.sx],...Array.isArray((Ne=(me=r==null?void 0:r.progressBarPageTexts)==null?void 0:me.total)==null?void 0:Ne.sx)?(we=(et=(ze=r==null?void 0:r.progressBarPageTexts)==null?void 0:ze.total)==null?void 0:et.sx)!=null?we:[]:[(Y=(Re=r==null?void 0:r.progressBarPageTexts)==null?void 0:Re.total)==null?void 0:Y.sx]],onClick:()=>g("next","ltr",!1),children:e})]})})},Vr=V(i.memo(wn),[Ot,()=>({openPage:he.useOpenPage()}),Ie,O.useSettingsWithoutDefaultFlag],["isDragging","setIsDragging","openPage","pages","pageLoadStates","totalPages","currentPageIndex","readingMode"]),On=i.forwardRef(({direction:e,...s},n)=>{const[o]=Pt("appTheme","default"),[r]=Pt("themeMode",as.SYSTEM),[a]=Pt("pureBlackMode",!1),{settings:{customThemes:l}}=es(),d=i.useMemo(()=>ts(r,rs(o,l),a,e),[r,o,l,a,e]);return t.jsx(ss,{value:ns[e],children:t.jsx(os,{theme:d,children:t.jsx(X,{...s,ref:n,dir:e})})})}),Fr=V(On,[()=>({direction:O.useGetThemeDirection()})],["direction"]),Wr=i.memo(({pageName:e,progressBarPosition:s,slotProps:n,children:o})=>{var r;return t.jsx($,{...n==null?void 0:n.tooltip,title:e,placement:br[s],children:t.jsx(X,{...n==null?void 0:n.box,sx:{width:"100%",height:"100%",...(r=n==null?void 0:n.box)==null?void 0:r.sx},children:o})})}),Dn=i.memo(({pageName:e,primaryPageLoadState:s,secondaryPageLoadState:n,progressBarPosition:o,isCurrentPage:r,isLeadingPage:a,showDraggingStyle:l})=>{const d=Qe();return t.jsx(Wr,{pageName:e,progressBarPosition:o,slotProps:{box:{sx:{cursor:"pointer",backgroundColor:qt(d.palette.background.paper,.2),...d.applyStyles("dark",{backgroundColor:Jt(d.palette.background.paper,.1)}),...m(s&&(n==null||n),{backgroundColor:qt(d.palette.background.paper,.35),...d.applyStyles("dark",{backgroundColor:Jt(d.palette.background.paper,.25)})})}},tooltip:{slotProps:r?{tooltip:{sx:{backgroundColor:"primary.main",color:"primary.contrastText"}}}:void 0}},children:t.jsx(X,{sx:{width:"100%",height:"100%",...m(a,{backgroundColor:Ke(d.palette.primary.main,.5)}),...m(r,{cursor:l?"grabbing":"grab",pointer:"grabbing",borderRadius:2,backgroundColor:"primary.dark",...d.applyStyles("dark",{backgroundColor:"primary.light"})})}})})}),In=({readerNavBarWidth:e,isMaximized:s,setIsMaximized:n,isDragging:o,progressBarType:r,progressBarSize:a,progressBarPosition:l,progressBarPositionAutoVertical:d,readerDirection:c,scrollbarXSize:x,scrollbarYSize:u,totalPages:g})=>{const h=Qe(),[,f]=i.useState({});$e(window.document.documentElement,i.useCallback(()=>f({}),[]));const p=Er(l,d,u,e+x),{isBottom:S,isLeft:E,isRight:j,isVertical:v,isHorizontal:R}=Te(p),w=!!g,b=r===Wt.HIDDEN,T=!s&&!o;return t.jsx(Fr,{children:t.jsx(Vr,{direction:R?c:"ltr",progressBarPosition:p,fullSegmentClicks:!0,createProgressBarSlot:i.useCallback((D,I,L,y,B,W,te,k,U)=>t.jsx(Dn,{pageName:D.name,primaryPageLoadState:L,secondaryPageLoadState:y,progressBarPosition:p,isCurrentPage:B,isLeadingPage:W,showDraggingStyle:U}),[p]),slotProps:{container:{sx:{overflow:"hidden",transition:"all 0.".concat(h.transitions.duration.shortest,"s"),...m(R,{minHeight:"100px",...m(h.direction==="ltr",{left:c==="ltr"?e:u,right:c==="rtl"?e:u}),...m(h.direction==="rtl",{left:c==="rtl"?e:u,right:c==="ltr"?e:u})}),...m(v,{minWidth:"100px",bottom:"".concat(x,"px")}),...m(S,{bottom:"".concat(x,"px")}),...m(E,{...m(h.direction==="ltr",{left:c==="ltr"?e:"unset",right:c==="rtl"?e:"unset"}),...m(h.direction==="rtl",{right:c==="rtl"?u:"unset",left:c==="ltr"?u:"unset"})}),...m(j,{...m(h.direction==="ltr",{right:c==="ltr"?u:"unset",left:c==="rtl"?u:"unset"}),...m(h.direction==="rtl",{left:c==="rtl"?e:"unset",right:c==="ltr"?e:"unset"})}),...m(T,{opacity:b?0:.85}),...m(!w,{pointerEvents:"none"})},onMouseEnter:()=>n(!0),onMouseLeave:()=>n(!1)},progressBarRoot:{sx:{gap:0,transition:"all 0.1s ease-in-out",backgroundColor:"background.paper",...m(v,{flexDirection:"column",height:"100%"}),...m(T,{backgroundColor:"unset",pointerEvents:"none",...m(R,{px:2}),...m(v,{py:2}),...m(S,{pb:.25}),...m(E,{...m(h.direction==="ltr",{pl:c==="ltr"?.25:0,pr:c==="rtl"?.25:0}),...m(h.direction==="rtl",{pr:c==="rtl"?.25:0,pl:c==="ltr"?.25:0})}),...m(j,{...m(h.direction==="ltr",{pr:c==="ltr"?.25:0,pl:c==="rtl"?.25:0}),...m(h.direction==="rtl",{pl:c==="rtl"?.25:0,pr:c==="ltr"?.25:0})})})}},progressBarSlotsContainer:{sx:{gap:.25,borderRadius:2,transition:"height 0.1s ease-in-out",...m(R,{height:"20px"}),...m(v,{flexDirection:"column",width:"20px"}),...m(T,{...m(R,{height:"".concat(a,"px")}),...m(v,{width:"".concat(a,"px")})})}},progressBarReadPages:{sx:{display:"none"}},progressBarCurrentPageSlot:{sx:{display:"none"}},progressBarPageTexts:{base:{sx:{px:1,py:1.5,transition:"all 0.1s ease-in-out",...m(T,{transform:"scale(0)",p:0,minWidth:0,maxWidth:0,minHeight:0,maxHeight:0})}}}}})})},Ln=V(i.memo(In),[Ue,Ot,O.useSettingsWithoutDefaultFlag,()=>({readerDirection:O.useGetThemeDirection()}),Je,Ie],["readerNavBarWidth","isMaximized","setIsMaximized","isDragging","progressBarType","progressBarSize","progressBarPosition","progressBarPositionAutoVertical","readerDirection","scrollbarXSize","scrollbarYSize","totalPages"]),An=xe(t.jsx("path",{fillRule:"evenodd",d:"M16 9V4h1c.55 0 1-.45 1-1s-.45-1-1-1H7c-.55 0-1 .45-1 1s.45 1 1 1h1v5c0 1.66-1.34 3-3 3v2h5.97v7l1 1 1-1v-7H19v-2c-1.66 0-3-1.34-3-3"})),_n=xe(t.jsx("path",{d:"M14 4v5c0 1.12.37 2.16 1 3H9c.65-.86 1-1.9 1-3V4zm3-2H7c-.55 0-1 .45-1 1s.45 1 1 1h1v5c0 1.66-1.34 3-3 3v2h5.97v7l1 1 1-1v-7H19v-2c-1.66 0-3-1.34-3-3V4h1c.55 0 1-.45 1-1s-.45-1-1-1"})),Bn=Ge(A)({width:"400px",minWidth:"400px",maxWidth:"400px",height:"100vh",overflowY:"auto"}),yn=i.memo(({mangaId:e,mangaTitle:s,chapterTitle:n,scanlator:o})=>t.jsxs(A,{children:[t.jsx($,{title:s,placement:"right",children:t.jsx(gt,{lines:3,variant:"h6",component:"h1",sx:{textAlign:"center"},children:t.jsx(zt,{component:Dt,to:Yt.manga.path(e),sx:{textDecoration:"none",color:"inherit"},children:s})})}),t.jsx($,{title:n,placement:"right",children:t.jsx(gt,{lines:4,variant:"body1",component:"h2",sx:{textAlign:"center"},children:n})}),o&&t.jsx($,{title:o,placement:"right",children:t.jsx(gt,{lines:4,variant:"body2",component:"h3",color:"textDisabled",sx:{textAlign:"center"},children:o})})]})),kn=xe(t.jsx("path",{d:"M15.41 16.59 10.83 12l4.58-4.59L14 6l-6 6 6 6z"})),Pn=xe(t.jsx("path",{d:"M8.59 16.59 13.17 12 8.59 7.41 10 6l6 6-6 6z"})),wt=({title:e,type:s,disabled:n,...o})=>t.jsx($,{title:e,disabled:n,children:t.jsx(Pr,{sx:{flexBasis:"15%"},variant:"contained",disabled:n,...o,children:s==="previous"?t.jsx(kn,{}):t.jsx(Pn,{})})}),Nn=({currentPageIndex:e,pages:s,readingDirection:n,openPage:o})=>{const{t:r}=F(),a=Tr(),l=i.useMemo(()=>ye(e,s),[e,s]),d=jr[n];return t.jsxs(A,{sx:{flexDirection:"row",gap:1},dir:"ltr",children:[t.jsx(wt,{type:"previous",title:r(a("reader.button.previous_page","reader.button.next_page",d)),disabled:a(!l.primary.index,De(l)===De(s.slice(-1)[0]),d),onClick:()=>o("previous",void 0,!1)}),t.jsxs(Mr,{sx:{flexBasis:"70%",flexGrow:0,flexShrink:0},children:[t.jsx(Hr,{id:"reader-nav-bar-desktop-page-select",children:r("reader.page_info.label.page")}),t.jsx(kr,{labelId:"reader-nav-bar-desktop-page-select",label:r("reader.page_info.label.page"),value:De(l),onChange:c=>o(c.target.value,void 0,!1),children:s.map(c=>t.jsx(bt,{value:De(c),children:c.name},De(c)))})]}),t.jsx(wt,{type:"next",title:r(a("reader.button.next_page","reader.button.previous_page",d)),disabled:a(De(l)===De(s.slice(-1)[0]),!l.primary.index,d),onClick:()=>o("next",void 0,!1)})]})},Mn=V(i.memo(Nn),[Ie,()=>({openPage:he.useOpenPage()}),O.useSettingsWithoutDefaultFlag],["currentPageIndex","pages","readingDirection","openPage"]),Hn=()=>{},Ur=({currentChapter:e,chapters:s,style:n})=>{const o=i.useMemo(()=>e&&s.findIndex(r=>r.id===e.id),[e,s]);return t.jsx(en,{style:{height:"calc(".concat(s.length," * 100px)"),...n},initialTopMostItemIndex:o!=null?o:0,totalCount:s.length,computeItemKey:r=>s[r].id,itemContent:r=>t.jsx(qs,{mode:"reader",chapter:s[r],showChapterNumber:!1,selected:null,onSelect:Hn,selectable:!1,isActiveChapter:r===o},s[r].id),increaseViewportBy:400})},Vn=({currentChapter:e,previousChapter:s,nextChapter:n,chapters:o=[],readerThemeDirection:r,openChapter:a})=>{var c,x;const{t:l}=F(),d=Et({variant:"popover",popupId:"reader-nav-bar-desktop-chapter-list"});return i.useLayoutEffect(()=>{d.close()},[e==null?void 0:e.id]),t.jsxs(A,{sx:{flexDirection:"row",gap:1},dir:"ltr",children:[t.jsx(wt,{type:"previous",title:l(ge("reader.button.previous_chapter","reader.button.next_chapter",r)),onClick:()=>{a(ge("previous","next",r))},disabled:ge(!s,!n,r)}),t.jsxs(Mr,{sx:{flexBasis:"70%",flexGrow:0,flexShrink:0},children:[t.jsx(Hr,{id:"reader-nav-bar-desktop-chapter-select",children:l("chapter.title_one")}),t.jsx(kr,{...Tt(d),open:d.isOpen,value:(c=e==null?void 0:e.id)!=null?c:0,MenuProps:{sx:{visibility:"hidden"}},label:l("chapter.title_one"),labelId:"reader-nav-bar-desktop-chapter-select",children:t.jsx(bt,{value:(x=e==null?void 0:e.id)!=null?x:0,children:e?"#".concat(e.chapterNumber," ").concat(e.name):""},e==null?void 0:e.id)})]}),t.jsx(wt,{component:Dt,type:"next",title:l(ge("reader.button.next_chapter","reader.button.previous_chapter",r)),onClick:()=>{a(ge("next","previous",r))},disabled:ge(!n,!s,r)}),t.jsx(is,{...cs(d),anchorOrigin:{vertical:"bottom",horizontal:"left"},children:t.jsx(X,{sx:{mb:1},children:t.jsx(Ur,{style:{width:"500px",maxWidth:"90vw",minHeight:"150px",maxHeight:"300px"},currentChapter:e,chapters:o})})})]})},Fn=V(i.memo(Vn),[()=>({readerThemeDirection:O.useGetThemeDirection()}),()=>({openChapter:he.useOpenChapter()})],["readerThemeDirection","openChapter"]),Wn=xe(t.jsx("path",{d:"M17 4h3c1.1 0 2 .9 2 2v2h-2V6h-3zM4 8V6h3V4H4c-1.1 0-2 .9-2 2v2zm16 8v2h-3v2h3c1.1 0 2-.9 2-2v-2zM7 18H4v-2H2v2c0 1.1.9 2 2 2h3zM18 8H6v8h12z"})),Gr=(e,s,n)=>{const r=(e+1)%s.length===0;if(!(n&&r))return s[(e+1)%s.length]},Zt=({tooltip:e,value:s,defaultValue:n,values:o,setValue:r,valueToDisplayData:a,isDefaultable:l,onDefault:d,defaultIcon:c})=>{const{t:x}=F(),u=s===void 0,g=i.useMemo(()=>u?-1:o.indexOf(s),[s,o]);return t.jsx($,{title:e,children:u?t.jsx(Ze,{onClick:()=>r(o[0]),sx:{justifyContent:"start",textTransform:"unset",flexGrow:1},variant:"contained",startIcon:c,size:"large",children:n===void 0?x("global.label.default"):t.jsx(zs,{i18nKey:"settings.default_value",value:a[n].isTitleString?a[n].title:x(a[n].title)})}):t.jsx(Ze,{onClick:()=>{const h=Gr(g,o,l);if(h===void 0){d==null||d();return}r(h)},sx:{justifyContent:"start",textTransform:"unset",flexGrow:1},variant:"contained",startIcon:a[s].icon,size:"large",children:a[s].isTitleString?a[s].title:x(a[s].title)})})},Un=({pageScaleMode:e,shouldStretchPage:s,updateSetting:n,...o})=>{const{t:r}=F();return t.jsxs(A,{sx:{flexDirection:"row",gap:1},children:[t.jsx(Zt,{...o,tooltip:r("reader.settings.page_scale.title"),value:e.isDefault?void 0:e.value,defaultValue:e.isDefault?e.value:void 0,values:Cr,setValue:a=>n("pageScaleMode",a),valueToDisplayData:Qt,defaultIcon:Qt[e.value].icon}),ls[e.value]&&t.jsx($,{title:r("reader.settings.page_scale.stretch"),children:t.jsx(Pr,{onClick:()=>n("shouldStretchPage",!s.value),sx:{px:void 0},variant:"contained",color:s.value?"secondary":"primary",children:t.jsx(Wn,{})})})]})},Gn=({readingMode:e,setReadingMode:s,...n})=>{const{t:o}=F();return t.jsx(Zt,{...n,tooltip:o("reader.settings.label.reading_mode"),value:e.isDefault?void 0:e.value,defaultValue:e.isDefault?e.value:void 0,values:wr,setValue:s,valueToDisplayData:Ut,defaultIcon:Ut[e.value].icon})},$n=()=>t.jsx(ds,{children:t.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",stroke:"currentColor",strokeWidth:"2",viewBox:"0 0 24 24",children:t.jsx("path",{d:"M2 4h6a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H2m20 0h-6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h6M2 12h20m-3-3 3 3-3 3M5 9l-3 3 3 3"})})}),zn=({readingMode:e,shouldOffsetDoubleSpreads:s,setShouldOffsetDoubleSpreads:n})=>{const{t:o}=F();return us(e)?t.jsx(Ze,{sx:{justifyContent:"start",textTransform:"unset"},size:"large",onClick:()=>n(!s),color:s?"secondary":"primary",variant:"contained",startIcon:t.jsx($n,{}),children:o("reader.settings.label.offset_double_spread")}):null},Xn=({readingDirection:e,setReadingDirection:s,...n})=>{const{t:o}=F();return t.jsx(Zt,{...n,tooltip:o("reader.settings.label.reading_direction"),value:e.isDefault?void 0:e.value,defaultValue:e.isDefault?e.value:void 0,values:Or,setValue:s,valueToDisplayData:er,defaultIcon:er[e.value].icon})},Yn=xe(t.jsx("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2m-1 14H9V8h2zm4 0h-2V8h2z"})),Kn=xe(t.jsx("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2m-2 14.5v-9l6 4.5z"})),Zn=({autoScroll:e,setAutoScroll:s})=>{const{t:n}=F(),{isActive:o,toggleActive:r}=xt(),a=i.useRef(void 0);return t.jsxs(A,{sx:{flexDirection:"row",gap:1},children:[t.jsx(Ze,{sx:{justifyContent:"start",textTransform:"unset",flexGrow:1},size:"large",onClick:r,color:o?"secondary":"primary",variant:"contained",startIcon:o?t.jsx(Yn,{}):t.jsx(Kn,{}),children:n("reader.settings.auto_scroll.title")}),t.jsx(Qs,{value:e.value,type:"number",size:"small",onBlur:l=>{const d=rt(+l.target.value,Be.min,Be.max);d!==e.value&&(clearTimeout(a.current),s({...e,value:d},!0))},onChange:l=>{const d=rt(+l.target.value,Be.min,Be.max);s({...e,value:d},!1),clearTimeout(a.current),a.current=setTimeout(()=>s({...e,value:d},!0),1e3)},slotProps:{input:{inputProps:Be,endAdornment:t.jsx(tn,{position:"end",children:n("global.time.seconds.second",{count:e.value})})}}})]})},qn=({manga:e,readingMode:s,shouldOffsetDoubleSpreads:n,pageScaleMode:o,shouldStretchPage:r,readingDirection:a,autoScroll:l,openSettings:d})=>{const{t:c}=F(),x=O.useCreateUpdateSetting(e!=null?e:Fe),u=O.useCreateDeleteSetting(e!=null?e:Fe);return t.jsxs(A,{sx:{gap:1},children:[t.jsx(Gn,{readingMode:s,setReadingMode:g=>x("readingMode",g),isDefaultable:!0,onDefault:()=>u("readingMode")}),t.jsx(zn,{readingMode:s.value,shouldOffsetDoubleSpreads:n.value,setShouldOffsetDoubleSpreads:g=>x("shouldOffsetDoubleSpreads",g)}),t.jsx(Un,{pageScaleMode:o,shouldStretchPage:r,updateSetting:x,isDefaultable:!0,onDefault:()=>u("pageScaleMode")}),t.jsx(Xn,{readingDirection:a,setReadingDirection:g=>x("readingDirection",g),isDefaultable:!0,onDefault:()=>u("readingDirection")}),t.jsx(Zn,{autoScroll:l,setAutoScroll:(...g)=>x("autoScroll",...g)}),t.jsx(Ze,{onClick:()=>d(),size:"large",sx:{justifyContent:"start",textTransform:"none"},variant:"contained",startIcon:t.jsx(Dr,{}),children:c("reader.settings.title.reader")})]})},Jn=V(qn,[Pe,O.useSettings],["manga","readingMode","shouldOffsetDoubleSpreads","pageScaleMode","shouldStretchPage","readingDirection","autoScroll"]),Qn=xe(t.jsx("path",{d:"M12 5V1L7 6l5 5V7c3.31 0 6 2.69 6 6s-2.69 6-6 6-6-2.69-6-6H4c0 4.42 3.58 8 8 8s8-3.58 8-8-3.58-8-8-8"})),lr={...Fe,title:"Fallback",inLibrary:!1},eo=({manga:e})=>{const{inLibrary:s}=e!=null?e:lr,{t:n}=F(),{CategorySelectComponent:o,updateLibraryState:r}=cn(e!=null?e:lr,!0);return t.jsxs(t.Fragment,{children:[t.jsx($,{title:n(s?"manga.action.library.remove.label.action":"manga.button.add_to_library"),children:t.jsx(ae,{onClick:r,color:"inherit",children:s?t.jsx(an,{}):t.jsx(ln,{})})}),o]})},$r=V(i.memo(eo),[Pe],["manga"]),to=xe(t.jsx("path",{d:"M17 3H7c-1.1 0-1.99.9-1.99 2L5 21l7-3 7 3V5c0-1.1-.9-2-2-2m0 15-5-2.18L7 18V5h10z"})),ro=({id:e,isBookmarked:s})=>{const{t:n}=F(),o=s?"unbookmark":"bookmark";return t.jsx($,{title:n(Gt[o].action.single),children:t.jsx(ae,{onClick:()=>Ve.performAction(o,[e],{}),color:"inherit",children:s?t.jsx(Js,{}):t.jsx(to,{})})})},zr=i.memo(ro),so=({currentChapter:e})=>{var o;const{t:s}=F(),n=Ve.useDownloadStatusFromCache((o=e==null?void 0:e.id)!=null?o:-1);return e&&Ve.isDownloaded(e)?t.jsx($,{title:s(Gt.delete.action.single),children:t.jsx(ae,{onClick:()=>Ve.performAction("delete",[e.id],{}),color:"inherit",children:t.jsx(nn,{})})}):n?t.jsx(on,{chapterId:n.chapter.id}):t.jsx($,{title:s(Gt.download.action.single),disabled:!e,children:t.jsx(ae,{disabled:!e,onClick:()=>{var r;return Ve.performAction("download",[(r=e==null?void 0:e.id)!=null?r:-1],{})},color:"inherit",children:t.jsx(sn,{})})})},no=i.memo(({currentChapter:e,pageLoadStates:s,setPageLoadStates:n,setRetryFailedPagesKeyPrefix:o})=>{const{id:r,isBookmarked:a,realUrl:l}=e!=null?e:Nr,{t:d}=F(),c=i.useRef(0),x=i.useMemo(()=>s.some(u=>u.error),[s]);return t.jsxs(A,{sx:{flexDirection:"row",justifyContent:"center",gap:1},children:[t.jsx($r,{}),t.jsx(zr,{id:r,isBookmarked:a}),t.jsx($,{title:d("reader.button.retry_load_pages"),disabled:!x,children:t.jsx(ae,{onClick:()=>{n(u=>u.map(g=>({url:g.url,loaded:g.loaded}))),o("".concat(c.current)),c.current=(c.current+1)%1e3},disabled:!x,color:"inherit",children:t.jsx(Qn,{})})}),t.jsx(so,{currentChapter:e}),t.jsx($,{title:d("chapter.action.label.open_on_source"),disabled:!l,children:t.jsx(ae,{disabled:!l,href:l!=null?l:"",rel:"noreferrer",target:"_blank",color:"inherit",children:t.jsx(rn,{})})})]})}),oo=V(no,[ke,Ie],["currentChapter","pageLoadStates","setPageLoadStates","setRetryFailedPagesKeyPrefix"]),ao=({exit:e})=>{const{t:s}=F(),n=Tr();return t.jsx($,{title:s("reader.button.exit"),children:t.jsx(ae,{sx:{marginRight:2},onClick:e,color:"inherit",children:n(t.jsx(gs,{}),t.jsx(hs,{}))})})},Xr=V(i.memo(ao),[()=>({exit:O.useExit()})],["exit"]),io=(e,s)=>{const n=i.useRef(s),o=i.useRef(s);return o.current!==n.current&&!e&&(n.current=!1),o.current!==s&&(n.current=o.current,o.current=s),n.current},co=({isVisible:e,openSettings:s,setReaderNavBarWidth:n,manga:o,chapters:r,currentChapter:a,previousChapter:l,nextChapter:d,isStaticNav:c})=>{const{t:x}=F(),u=O.useCreateUpdateSetting(o!=null?o:Fe),[g,h]=i.useState();$e(g,i.useCallback(()=>{c&&n(g.offsetWidth)},[g,c])),i.useLayoutEffect(()=>()=>n(0),[]);const S=io(e,c)&&e?0:void 0;return t.jsx(xs,{variant:c?"permanent":"persistent",open:e||c,transitionDuration:S,SlideProps:{unmountOnExit:!0},PaperProps:{ref:E=>h(E)},children:t.jsxs(Bn,{sx:{backgroundColor:"background.paper",pointerEvents:"all"},children:[t.jsxs(A,{sx:{p:2,gap:2,backgroundColor:"action.hover"},children:[t.jsxs(A,{sx:{flexDirection:"row",justifyContent:"space-between",alignItems:"center"},children:[t.jsx(Xr,{}),t.jsx($,{title:x("reader.settings.label.static_navigation"),children:t.jsx(ae,{onClick:()=>{n(0),u("isStaticNav",!c)},color:c?"primary":"inherit",children:c?t.jsx(An,{}):t.jsx(_n,{})})})]}),o&&a?t.jsxs(t.Fragment,{children:[t.jsx(yn,{mangaId:o.id,mangaTitle:o.title,chapterTitle:a.name,scanlator:a.scanlator}),t.jsx(oo,{})]}):t.jsx(It,{})]}),t.jsxs(A,{sx:{p:2,gap:2},children:[t.jsxs(A,{sx:{gap:1},children:[t.jsx(Mn,{}),t.jsx(Fn,{chapters:r,currentChapter:a,nextChapter:d,previousChapter:l})]}),t.jsx(fs,{}),t.jsx(Jn,{openSettings:s})]})]})})},lo=V(i.memo(co),[Ue,Pe,ke,Ie,O.useSettingsWithoutDefaultFlag],["setReaderNavBarWidth","manga","chapters","currentChapter","previousChapter","nextChapter","isStaticNav"]),uo={...Fe,title:""},go=i.forwardRef(({isVisible:e,manga:s,currentChapter:n,scrollbarYSize:o},r)=>{const{t:a}=F(),l=Et({popupId:"reader-overlay-more-menu",variant:"popover"}),{id:d,title:c}=s!=null?s:uo,{id:x,name:u,realUrl:g,isBookmarked:h}=n!=null?n:Nr;return t.jsx(Kt,{direction:"down",in:e,ref:r,children:t.jsxs(A,{sx:{flexDirection:"row",alignItems:"center",position:"fixed",top:0,left:0,right:"".concat(o,"px"),p:2,pt:f=>"max(env(safe-area-inset-top), ".concat(f.spacing(2),")"),backgroundColor:f=>Ke(f.palette.background.paper,.95),pointerEvents:"all",boxShadow:2},children:[t.jsx(Xr,{}),t.jsx(A,{sx:{flexGrow:1},children:s&&n?t.jsxs(t.Fragment,{children:[t.jsx($,{title:c,children:t.jsx(gt,{lines:1,component:"h1",variant:"h5",children:t.jsx(zt,{component:Dt,to:Yt.manga.path(d),sx:{textDecoration:"none",color:"inherit"},children:c})})}),t.jsx($,{title:u,children:t.jsx(gt,{lines:1,children:u})})]}):t.jsx(It,{})}),t.jsx($r,{}),t.jsx(zr,{id:x,isBookmarked:h}),t.jsx(ae,{...Tt(l),color:"inherit",children:t.jsx(dn,{})}),t.jsxs(ps,{...ms(l),children:[t.jsx(bt,{component:zt,disabled:!g,href:g!=null?g:"",rel:"noreferrer",target:"_blank",children:a("chapter.action.label.open_on_source")}),t.jsx(bt,{disabled:!g,onClick:async()=>{await navigator.clipboard.writeText(c),Ir(a("global.label.copied_clipboard"),"info")},children:a("global.label.share")})]})]})})}),ho=V(i.memo(go),[Pe,ke,Je],["manga","currentChapter","scrollbarYSize"]),xo=xe(t.jsx("path",{d:"m21.81 12.74-.82-.63v-.22l.8-.63c.16-.12.2-.34.1-.51l-.85-1.48c-.07-.13-.21-.2-.35-.2q-.075 0-.15.03l-.95.38c-.08-.05-.11-.07-.19-.11l-.15-1.01c-.03-.21-.2-.36-.4-.36h-1.71c-.2 0-.37.15-.4.34l-.14 1.01c-.03.02-.07.03-.1.05l-.09.06-.95-.38q-.075-.03-.15-.03c-.14 0-.27.07-.35.2l-.85 1.48c-.1.17-.06.39.1.51l.8.63v.23l-.8.63c-.16.12-.2.34-.1.51l.85 1.48c.07.13.21.2.35.2q.075 0 .15-.03l.95-.37c.08.05.12.07.2.11l.15 1.01c.03.2.2.34.4.34h1.71c.2 0 .37-.15.4-.34l.15-1.01c.03-.02.07-.03.1-.05l.09-.06.95.38q.075.03.15.03c.14 0 .27-.07.35-.2l.85-1.48c.1-.17.06-.39-.1-.51M18 13.5c-.83 0-1.5-.67-1.5-1.5s.67-1.5 1.5-1.5 1.5.67 1.5 1.5-.67 1.5-1.5 1.5M17 17h2v4c0 1.1-.9 2-2 2H7c-1.1 0-2-.9-2-2V3c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2v4h-2V6H7v12h10z"})),fo=xe(t.jsx("path",{d:"M4 10.5c-.83 0-1.5.67-1.5 1.5s.67 1.5 1.5 1.5 1.5-.67 1.5-1.5-.67-1.5-1.5-1.5m0-6c-.83 0-1.5.67-1.5 1.5S3.17 7.5 4 7.5 5.5 6.83 5.5 6 4.83 4.5 4 4.5m0 12c-.83 0-1.5.68-1.5 1.5s.68 1.5 1.5 1.5 1.5-.68 1.5-1.5-.67-1.5-1.5-1.5M7 19h14v-2H7zm0-6h14v-2H7zm0-8v2h14V5z"})),dr=xe(t.jsx("path",{d:"M6 6h2v12H6zm3.5 6 8.5 6V6z"})),ur=xe(t.jsx("path",{d:"m6 18 8.5-6L6 6zM16 6v12h2V6z"})),po={display:"flex",alignItems:"center",justifyContent:"end",position:"relative",backgroundColor:"background.default"},gr="3px",mo=i.memo(({isTrailingPage:e,pagesIndex:s,totalPages:n,isVertical:o,isHorizontal:r})=>{const a="".concat(s/(n-1)*100,"%");return t.jsx(X,{sx:{position:"absolute",...m(o,{top:a,left:"50%"}),...m(r,{top:"50%",left:a}),transform:"translate(-50%, -50%)",width:gr,height:gr,borderRadius:100,backgroundColor:"background.paper",...m(e,{backgroundColor:"primary.main"}),zIndex:1}})}),vo=i.memo(({pageName:e,isTrailingPage:s,isCurrentPage:n,pagesIndex:o,totalPages:r,isVertical:a,isHorizontal:l})=>t.jsx(Wr,{pageName:e,progressBarPosition:ut.BOTTOM,slotProps:{box:{sx:po}},children:!n&&t.jsx(mo,{isTrailingPage:s,pagesIndex:o,totalPages:r,isVertical:a,isHorizontal:l})})),So={[ut.BOTTOM]:"up",[ut.LEFT]:"right",[ut.RIGHT]:"left",[ut.AUTO]:"left"},Ro=({previousChapter:e,nextChapter:s,isVisible:n,setIsMaximized:o,isDragging:r,currentPageIndex:a,pages:l,direction:d,progressBarPosition:c,progressBarPositionAutoVertical:x,topOffset:u=0,bottomOffset:g=0,scrollbarXSize:h})=>{const f=he.useOpenChapter(),[,p]=i.useState({});$e(window.document.documentElement,i.useCallback(()=>p({}),[]));const S=Er(c,x,u+g,h),{isLeft:E,isRight:j,isVertical:v,isHorizontal:R}=Te(S),w=R?d:"ltr",b=i.useMemo(()=>ye(a,l).pagesIndex,[a,l]),T=i.useMemo(()=>({container:{sx:{flexGrow:1,position:"relative",display:"flex",justifyItems:"center",alignItems:"stretch",backgroundColor:I=>Ke(I.palette.background.paper,.85),borderRadius:100,boxShadow:2}},progressBarRoot:{sx:{flexGrow:1,gap:0,...m(v,{flexDirection:"column"}),...m(R,{alignItems:"stretch"})}},progressBarSlotsActionArea:{sx:{alignItems:"center",cursor:"pointer",...m(v,{width:"100%",flexDirection:"column",px:2}),...m(R,{height:"100%",py:2})}},progressBarSlotsContainer:{sx:{borderRadius:100,backgroundColor:"background.default",...m(v,{flexDirection:"column",py:1}),...m(R,{px:1})}},progressBarSlot:{sx:{...m(v,{width:"20px"}),...m(R,{height:"20px"})}},progressBarCurrentPageSlot:{sx:{display:"flex",zIndex:1,cursor:"inherit",...m(v,{justifyContent:"center"}),...m(R,{alignItems:"center"})}},progressBarPageTexts:{base:{sx:{...m(v,{py:1}),...m(R,{px:1})}}}}),[v,R]),D=i.useMemo(()=>({progressBarCurrentPage:t.jsx(X,{sx:{position:"absolute",...m(v,{top:"calc(100% - 6px)",...m(b===0,{top:"0"}),width:"75%",height:"6px"}),...m(R,{left:"calc(100% - 0px)",...m(b===0,{left:"0"}),width:"6px",height:"75%"}),backgroundColor:"primary.main",borderRadius:100,cursor:r?"grabbing":"grab"}})}),[b,l.length,r,v,R]);return i.useLayoutEffect(()=>(o(n),()=>o(!1)),[n]),t.jsx(Kt,{direction:So[S],in:n,children:t.jsx(Fr,{sx:{position:"relative",display:"flex",alignItems:"end",height:"100%",pointerEvents:"none",...m(E,{justifyContent:d==="ltr"?"start":"end"}),...m(j,{justifyContent:d==="ltr"?"end":"start"})},children:t.jsxs(A,{sx:{p:2,gap:1,pointerEvents:"all",alignItems:"center",...m(v,{height:"100%",flexDirection:"column"}),...m(R,{width:"100%",flexDirection:"row"})},children:[t.jsx(ae,{onClick:()=>f("previous"),disabled:!e,sx:{backgroundColor:I=>Ke(I.palette.background.paper,.85),boxShadow:2},children:ge(t.jsx(dr,{sx:{...m(v,{transform:"rotate(90deg)"})}}),t.jsx(ur,{sx:{...m(v,{transform:"rotate(90deg)"})}}),w)}),t.jsx(Vr,{direction:w,progressBarPosition:S,fullSegmentClicks:!1,createProgressBarSlot:i.useCallback((I,L,y,B,W,te,k,U)=>t.jsx(vo,{pageName:I.name,isTrailingPage:k,isCurrentPage:W,pagesIndex:L,totalPages:U,isVertical:v,isHorizontal:R}),[v,R]),slotProps:{...T,progressBarReadPages:{sx:{backgroundColor:"primary.main",...m(v,{width:"20px",height:"".concat(Math.max(0,ye(a,l).pagesIndex)/(l.length-1)*100,"%"),borderRadius:"400px 400px 0 0"}),...m(R,{width:"".concat(Math.max(0,ye(a,l).pagesIndex)/(l.length-1)*100,"%"),height:"20px",borderRadius:"400px 0 0 400px"})}}},slots:D}),t.jsx(ae,{onClick:()=>f("next"),disabled:!s,sx:{backgroundColor:I=>Ke(I.palette.background.paper,.85),boxShadow:2},children:ge(t.jsx(ur,{sx:{...m(v,{transform:"rotate(90deg)"})}}),t.jsx(dr,{sx:{...m(v,{transform:"rotate(90deg)"})}}),w)})]})})})},bo=V(i.memo(Ro),[ke,Lt,Ot,Ie,()=>({direction:O.useGetThemeDirection()}),O.useSettingsWithoutDefaultFlag,Je],["previousChapter","nextChapter","isVisible","setIsMaximized","isDragging","currentPageIndex","pages","direction","progressBarPosition","progressBarPositionAutoVertical","scrollbarXSize"]),Eo=({manga:e,readingMode:s,readingDirection:n,autoScroll:o,isActive:r,toggleActive:a})=>{const{t:l}=F(),d=O.useCreateDeleteSetting(e!=null?e:Fe);return e?t.jsxs(A,{sx:{gap:2},children:[t.jsx(Xs,{}),t.jsx(Ys,{readingMode:s,setReadingMode:c=>O.updateSetting(e,"readingMode",c),isDefaultable:!0,onDefault:()=>d("readingMode")}),t.jsx(Ks,{readingDirection:n,setReadingDirection:c=>O.updateSetting(e,"readingDirection",c),isDefaultable:!0,onDefault:()=>d("readingDirection")}),t.jsx(un,{label:l("reader.settings.auto_scroll.title"),checked:r,onChange:()=>a()}),t.jsx(Zs,{autoScroll:o,setAutoScroll:(...c)=>O.updateSetting(e,"autoScroll",...c)})]}):null},To=V(i.memo(Eo),[Pe,O.useSettings,xt],["manga","readingMode","readingDirection","autoScroll","isActive","toggleActive"]),jo=({openSettings:e,isVisible:s,currentChapter:n,chapters:o,scrollbarXSize:r,scrollbarYSize:a,topOffset:l=0})=>{const{t:d}=F(),c=Et({variant:"dialog",popupId:"reader-chapter-list-dialog"}),x=Et({variant:"dialog",popupId:"reader-quick-settings-dialog"}),[u,g]=i.useState(0),h=i.useRef(null);return $e(h,i.useCallback(()=>{var f,p;return g((p=(f=h.current)==null?void 0:f.clientHeight)!=null?p:0)},[u])),i.useLayoutEffect(()=>{c.close()},[n==null?void 0:n.id]),t.jsxs(t.Fragment,{children:[t.jsxs(A,{sx:{position:"fixed",right:"".concat(a,"px"),bottom:0,left:0,height:"calc(100% - ".concat(l,"px)")},children:[t.jsx(bo,{topOffset:l,bottomOffset:u}),t.jsx(Kt,{direction:"up",in:s,children:t.jsx(A,{ref:h,sx:{alignItems:"center",backgroundColor:f=>Ke(f.palette.background.paper,.95),pb:"max(".concat(r,"px, env(safe-area-inset-bottom))"),boxShadow:2,pointerEvents:"all"},children:t.jsxs(A,{sx:{width:"50%",flexDirection:"row",p:2,gap:1,justifyContent:"space-evenly",alignItems:"center"},children:[t.jsx($,{title:d("reader.button.chapter_list"),children:t.jsx(ae,{...Tt(c),color:"inherit",children:t.jsx(fo,{})})}),t.jsx($,{title:d("reader.settings.title.quick_settings"),children:t.jsx(ae,{...Tt(x),color:"inherit",children:t.jsx(xo,{})})}),t.jsx($,{title:d("settings.title"),children:t.jsx(ae,{onClick:e,color:"inherit",children:t.jsx(Dr,{})})})]})})})]}),c.isOpen&&t.jsx(Vt,{...tr(c),fullWidth:!0,maxWidth:"md",scroll:"paper",children:t.jsx(Ft,{sx:{p:0,pb:1},children:t.jsx(Ur,{style:{minHeight:"15vh",maxHeight:"75vh"},currentChapter:n,chapters:o})})}),x.isOpen&&t.jsx(Vt,{...tr(x),fullWidth:!0,maxWidth:"md",scroll:"paper",children:t.jsx(Ft,{children:t.jsx(To,{})})})]})},Co=V(i.memo(jo),[ke,Je],["currentChapter","chapters","scrollbarXSize","scrollbarYSize"]),wo=({isVisible:e,isDesktop:s,isMobile:n})=>{const[o,r]=i.useState(!1),[a,l]=i.useState(0),d=i.useRef(null);return $e(d,i.useCallback(()=>{var c,x;return l((x=(c=d.current)==null?void 0:c.clientHeight)!=null?x:0)},[n])),t.jsxs(X,{sx:{position:"absolute",width:"100%",height:"100%",pointerEvents:"none",zIndex:1},children:[s&&t.jsxs(t.Fragment,{children:[t.jsx(Ln,{}),t.jsx(lo,{isVisible:e,openSettings:()=>r(!0)})]}),n&&t.jsxs(t.Fragment,{children:[t.jsx(ho,{ref:d,isVisible:e}),t.jsx(Co,{openSettings:()=>r(!0),isVisible:e,topOffset:a})]}),t.jsx(hn,{isOpen:o,close:()=>r(!1)}),t.jsx(fn,{})]})},Oo=V(i.memo(wo),[O.useOverlayMode],["isDesktop","isMobile"]),hr="reader-tap-zone-layout-canvas",Do=({readerNavBarWidth:e,showPreview:s,tapZoneLayout:n,tapZoneInvertMode:o,readingDirection:r})=>{const a=Qe(),[l,d]=i.useState(0),[c,x]=i.useState(0),[u,g]=i.useState(null);$e(u,i.useCallback(()=>{var f,p;d((f=u==null?void 0:u.clientWidth)!=null?f:0),x((p=u==null?void 0:u.clientHeight)!=null?p:0)},[u]));const h=vs.getOrCreateCanvas(n,l,c,a.typography.h3,{vertical:o.vertical,horizontal:o.horizontal,isRTL:r===nt.RTL});return i.useLayoutEffect(()=>{const f=document.getElementById(hr);f==null||f.replaceChildren(h)},[h,s]),t.jsx(X,{ref:g,sx:{position:"fixed",top:0,left:e,right:0,bottom:0,pointerEvents:"none"},children:s&&t.jsx("div",{id:hr})})},Io=V(Do,[Ue,At,O.useSettingsWithoutDefaultFlag],["readerNavBarWidth","showPreview","tapZoneLayout","tapZoneInvertMode","readingDirection"]),Lo=({readerNavBarWidth:e,customFilter:{rgba:{value:{red:s,green:n,blue:o,alpha:r,blendMode:a},enabled:l}}})=>l?t.jsx(X,{sx:{position:"fixed",top:0,left:e,right:0,bottom:0,pointerEvents:"none",background:"rgba(".concat(s," ").concat(n," ").concat(o," / ").concat(r,"%)"),mixBlendMode:"".concat(a)}}):null,Ao=V(Lo,[Ue,O.useSettingsWithoutDefaultFlag],["readerNavBarWidth","customFilter"]),xr=2,fr=1,Xe=0,ne=0,oe=1,_o=(e,s=Nt.XY)=>{const[n,o]=i.useState(!1),r=i.useRef(void 0),a=i.useRef([0,0,0]),l=i.useRef([0,0,0]),d=i.useRef([0,0,0]),c=i.useRef([0,0]),x=i.useRef(void 0);return i.useEffect(()=>{const u=e==null?void 0:e.current;if(!u)return()=>{};const g=()=>{r.current||(r.current=getComputedStyle(u));const T=r.current.direction==="rtl",D=r.current.flexDirection==="row-reverse";return T||!T&&D},h=()=>(r.current||(r.current=getComputedStyle(u)),r.current.flexDirection==="column-reverse"),f=s!==Nt.Y,p=s!==Nt.X,S=()=>clearInterval(x.current),E=()=>{const T=(G,re,H)=>(G[Xe]-G[xr])/(re[Xe]-re[xr])*1e3/H,D=[f?T(a.current,d.current,u.clientWidth):0,p?T(l.current,d.current,u.clientHeight):0],I=f&&p?Math.sqrt(D[ne]**2+D[oe]**2):Math.abs(p?D[oe]:D[ne]),L=[D[ne]/I,D[oe]/I],y=rt(1.2*I,-12,12),B=(Date.now()-d.current[Xe])/1e3,W=y-14.278*B+75.24*B**2/y-149.72*B**3/y/y;if(!(y!==0&&W>0&&!Number.isNaN(y))){S();return}const k=(G,re)=>G*re*(y*B-7.1397*B**2+25.08*B**3/y-37.43*B**4/y/y),U=[k(u.clientWidth,L[ne]),k(u.clientHeight,L[oe])],M=[u.scrollWidth-u.clientWidth,u.scrollHeight-u.clientHeight],_=[rt(c.current[ne]-U[ne],g()?-M[ne]:0,M[ne]),rt(c.current[oe]-U[oe],h()?-M[oe]:0,M[oe])],ie=_[ne]!==0||_[ne]!==M[ne],ce=_[oe]!==0||_[oe]!==M[oe];ie||ce||S(),f&&(u.scrollLeft=_[ne]),p&&(u.scrollTop=_[oe])};let j=!1;const v=T=>{if(j)return!0;const D=[u.clientHeight<u.scrollHeight,u.clientWidth<u.scrollWidth],I=[Math.abs(a.current[Xe]-T.pageX)>0,Math.abs(l.current[Xe]-T.pageY)>0];return D[ne]&&I[ne]||D[oe]&&I[oe]},R=T=>{v(T)&&(j=!0,o(!0),a.current=[...a.current.slice(1),T.pageX],l.current=[...l.current.slice(1),T.pageY],d.current=[...d.current.slice(1),Date.now()],f&&(u.scrollLeft+=a.current[Xe]-a.current[fr]),p&&(u.scrollTop+=l.current[Xe]-l.current[fr]))},w=()=>{u.removeEventListener("mousemove",R),u.removeEventListener("mouseup",w),setTimeout(()=>{j=!1,o(!1)},0),c.current=[u.scrollLeft,u.scrollTop],x.current=setInterval(E,16)},b=T=>{T.button===0&&(T.preventDefault(),a.current=[T.pageX,T.pageX,T.pageX],l.current=[T.pageY,T.pageY,T.pageY],d.current=[Date.now()-2,Date.now()-1,Date.now()],u.addEventListener("mousemove",R),u.addEventListener("mouseup",w),S())};return u.addEventListener("mousedown",b),u.addEventListener("wheel",S),()=>{u.removeEventListener("mousedown",b),u.removeEventListener("wheel",S),S()}},[e,s]),n},Bo=(e,s)=>{i.useEffect(()=>{if(e){s.pause();return}s.resume()},[e,s.isPaused])},yo=(e,s,n,o,r)=>{i.useEffect(()=>{var l,d;const a=()=>{e&&s(!1),n&&o(!1)};return(l=r.current)==null||l.addEventListener("wheel",a),(d=r.current)==null||d.addEventListener("touchmove",a),()=>{var c,x;(c=r.current)==null||c.removeEventListener("wheel",a),(x=r.current)==null||x.removeEventListener("touchmove",a)}},[e,n])},ko=(e,s,n)=>{i.useEffect(()=>{if(e!==N.CONTINUOUS_HORIZONTAL)return()=>{};if(!n.current)return()=>{};const o=r=>{var a,l;if(r.preventDefault(),r.shiftKey){(a=n.current)==null||a.scrollBy({top:r.deltaY});return}(l=n.current)==null||l.scrollBy({left:s===nt.LTR?r.deltaY:r.deltaY*-1})};return n.current.addEventListener("wheel",o),()=>{var r;return(r=n.current)==null?void 0:r.removeEventListener("wheel",o)}},[e,s])},Po=e=>{const s=i.useRef(void 0);i.useEffect(()=>{const n=r=>{const a=e.current;a&&(a.style.cursor=r?"default":"none")},o=()=>{n(!0),clearTimeout(s.current),s.current=setTimeout(()=>{n(!1)},5e3)};return o(),window.addEventListener("mousemove",o),()=>{n(!0),window.removeEventListener("mousemove",o),clearTimeout(s.current)}},[])},No=(e,s,n,o,r)=>{i.useLayoutEffect(()=>{var a;s||(a=r.current)==null||a.scrollTo(Ss(r.current,n,o),0)},[e])},Mo=(e,s,n,o,r,a,l,d,c,x)=>{i.useLayoutEffect(()=>{if(e==null)return;const u=ye(e,n);if(l){const f=e>s?jt.PREVIOUS:jt.NEXT,p=d.current[u.pagesIndex];p==null||p.scrollIntoView({block:"start",inline:Rs(f,c,x)})}const g=De(u),h=g===o-1;r(null),a(g,!h,h)},[e])},Ho=(e,s,n,o,r,a,l)=>{const[d,c]=i.useState(l===N.DOUBLE_PAGE);i.useLayoutEffect(()=>{if(d&&l!==N.DOUBLE_PAGE){c(!1);const g=Lr(n);o(g),r(g.map(({primary:{url:h}})=>({url:h,isSpread:!1})));return}l===N.DOUBLE_PAGE&&(d||a(De(ye(e,s))),o(s),c(l===N.DOUBLE_PAGE))},[s,l])},Mt=({title:e,name:s,scanlator:n,backgroundColor:o})=>{const r=Qe(),a=r.palette.getContrastText(Ts(r.palette,Ar[o])),l=Ke(a,.5);return s?t.jsxs(A,{children:[t.jsx(Ye,{color:a,children:e}),t.jsx(Ye,{color:a,variant:"h6",component:"h1",children:s}),n&&t.jsx(Ye,{variant:"body2",color:l,children:n})]}):null},Vo=({type:e,transitionPageMode:s,readingMode:n,backgroundColor:o,manga:r,currentChapterName:a,currentChapterScanlator:l,previousChapterName:d,previousChapterScanlator:c,nextChapterName:x,nextChapterScanlator:u,scrollbarXSize:g,scrollbarYSize:h,readerNavBarWidth:f,handleBack:p})=>{var w;const{t:S}=F(),E=e===We.PREVIOUS,j=e===We.NEXT,v=!!a&&!d,R=!!a&&!x;return Es(e,s,n)?t.jsx(A,{sx:{justifyContent:"center",alignItems:"center",...m(!st(n),{width:"100%",height:"100%"}),...m(st(n),{position:"sticky",...m(qe(n),{left:0,maxWidth:"calc(100vw - ".concat(h,"px - ").concat(f,"px)"),minHeight:"calc(100vh - ".concat(g,"px)")}),...m(n===N.CONTINUOUS_HORIZONTAL,{top:0,minWidth:"calc(100vw - ".concat(h,"px - ").concat(f,"px)"),maxHeight:"calc(100vh - ".concat(g,"px)")})})},children:t.jsxs(A,{sx:{gap:2,maxWidth:b=>"calc(100vw - ".concat(h,"px - ").concat(f,"px - ").concat(b.spacing(2),")"),maxHeight:"calc(100vh - ".concat(g,"px)"),width:"max-content",p:1},children:[E&&v&&t.jsx(Ye,{variant:"h6",children:S("reader.transition_page.first_chapter")}),t.jsxs(A,{sx:{gap:5},children:[E&&!v&&t.jsx(Mt,{title:S("reader.transition_page.previous"),name:d,scanlator:c,backgroundColor:o}),!!a&&t.jsx(Mt,{title:S(E?"reader.transition_page.current":"reader.transition_page.finished"),name:a,scanlator:l,backgroundColor:o}),j&&!R&&t.jsx(Mt,{title:S("reader.transition_page.next"),name:x,scanlator:u,backgroundColor:o})]}),j&&R&&t.jsx(Ye,{variant:"h6",children:S("reader.transition_page.last_chapter")}),(E&&v||j&&R)&&t.jsxs(A,{sx:{flexDirection:"row",flexWrap:"wrap",gap:1},children:[t.jsx(Ze,{sx:{flexGrow:1},onClick:b=>{b.stopPropagation(),p()},variant:"contained",children:S("reader.transition_page.exit.previous_page")}),t.jsx(Ze,{sx:{flexGrow:1},component:Dt,onClick:b=>{b.stopPropagation()},variant:"contained",to:Yt.manga.path((w=r==null?void 0:r.id)!=null?w:-1),children:S("reader.transition_page.exit.manga_page")})]})]})}):null},pr=V(i.memo(Vo),[Pe,({chapterId:e})=>{const{chapters:s}=ke(),n=i.useMemo(()=>s.findIndex(l=>l.id===e),[e,s]),o=s[n],r=i.useMemo(()=>s[n+1],[n,s]),a=i.useMemo(()=>s[n-1],[n,s]);return{currentChapterName:o==null?void 0:o.name,currentChapterScanlator:o==null?void 0:o.scanlator,previousChapterName:r==null?void 0:r.name,previousChapterScanlator:r==null?void 0:r.name,nextChapterName:a==null?void 0:a.name,nextChapterScanlator:a==null?void 0:a.scanlator}},Je,Ue,Ie,O.useSettingsWithoutDefaultFlag,({chapterId:e,type:s})=>{const n=bs(),{chapters:o}=ke(),r=i.useMemo(()=>o.findIndex(u=>u.id===e),[e,o]),a=r===0,l=r===o.length-1,d=s===We.PREVIOUS&&l,c=s===We.NEXT&&a;return{handleBack:d||c?n:_e}}],["manga","currentChapterName","currentChapterScanlator","previousChapterName","previousChapterScanlator","nextChapterName","nextChapterScanlator","scrollbarXSize","scrollbarYSize","readerNavBarWidth","backgroundColor","transitionPageMode","readingMode","handleBack"]),Fo=(e,s,n,o,r,a,l,d,c,x,u,g,h,f,p,S,E,j)=>{var R,w;const v=i.useRef(void 0);i.useLayoutEffect(()=>{var y;const b=(y=s.data)==null?void 0:y.fetchChapterPages;if(!b)return;const{pages:T}=b,D=T.length?T:[""],I=js(n,o!=null?o:0,D.length-1),L=v.current!==(b==null?void 0:b.pages);if(L){v.current=b.pages;const B=Lr(D);c(!0),g(B),h(D),f(B.map(({primary:{url:W}})=>({url:W,loaded:!1}))),p(B.map(({primary:{url:W}})=>({url:W,isSpread:!1})))}else g(r),f(a),p(l);u(b.pages.length),h(D),S(I),E(I),x(B=>({...B,isCurrentChapterReady:d||L})),j(We.NONE)},[(w=(R=s.data)==null?void 0:R.fetchChapterPages)==null?void 0:w.pages,e])},mr=0,vt="-10px",Wo=(e,s,n)=>{if(!st(s))return;const o=jr[n],r="0px ".concat(vt," 0px 0px"),a="0px 0px 0px ".concat(vt);return qe(s)?e==="first"?"0px 0px ".concat(vt," 0px"):"".concat(vt," 0px 0px 0px"):e==="first"?ge(r,a,o):ge(a,r,o)},Uo=(e,s,n,o)=>e===nt.LTR?{start:n>=o,end:s<0}:{start:s<0,end:n>=o},Go=(e,{top:s,right:n,bottom:o,left:r},a,l)=>{const d=window.innerWidth-l,c=window.innerHeight-a;return{[N.CONTINUOUS_VERTICAL]:{start:o>=c,end:s<0},[N.CONTINUOUS_HORIZONTAL]:Uo(e,r,n,d)}},$o=({[N.CONTINUOUS_VERTICAL]:e,[N.CONTINUOUS_HORIZONTAL]:s},n)=>qe(n)?e.start||e.end:s.start||s.end,zo=({[N.CONTINUOUS_VERTICAL]:e,[N.CONTINUOUS_HORIZONTAL]:s},n)=>qe(n)?e:s,vr=(e,s,n,o,r,a,l,d,c,x,u,g,h)=>{Cs(x,i.useCallback(f=>{if(!d||!st(a)||n===void 0)return;const p=f[f.length-1],S=Go(l,p.target.getBoundingClientRect(),u,g),{start:E,end:j}=zo(S,a),v=p.intersectionRatio<=mr;if(!$o(S,a))return;const R=e==="first"&&E&&!r,w=e==="last"&&!o&&j;if(R||e==="last"&&j&&v){c(n,!r,!1);return}w&&c(s,!1,!1)},[e,s,n,o,r,a,l,d,c,u,g]),i.useMemo(()=>({root:h,threshold:[mr],rootMargin:Wo(e,a,l),ignoreInitialObserve:!0}),[e,a,l]))},Xo=({readingMode:e,readingDirection:s,shouldUseInfiniteScroll:n,chapterId:o,previousChapterId:r,nextChapterId:a,isPreviousChapterVisible:l,isCurrentChapter:d,isNextChapterVisible:c,imageWrapper:x,openChapter:u,scrollbarXSize:g,scrollbarYSize:h,scrollElement:f})=>(vr("first",o,r,d,l,e,s,n,u,x,g,h,f),vr("last",o,a,d,c,e,s,n,u,x,g,h,f),null),Yo=V(i.memo(Xo),[()=>({openChapter:he.useOpenChapter()})],["openChapter"]),Ko=({currentPageIndex:e,setPages:s,setPageLoadStates:n,setTotalPages:o,setCurrentPageIndex:r,updateCurrentPageIndex:a,setPageToScrollToIndex:l,transitionPageMode:d,retryFailedPagesKeyPrefix:c,setTransitionPageMode:x,readingMode:u,readerWidth:g,pageScaleMode:h,shouldOffsetDoubleSpreads:f,readingDirection:p,shouldUseInfiniteScroll:S,imagePreLoadAmount:E,pageGap:j,chapterId:v,previousChapterId:R,nextChapterId:w,isPreviousChapterVisible:b,isNextChapterVisible:T,lastPageRead:D,isInitialChapter:I,isCurrentChapter:L,isPreviousChapter:y,isNextChapter:B,isLeadingChapter:W,isTrailingChapter:te,isPreloadMode:k,imageRefs:U,scrollIntoView:M,setReaderStateChapters:_,resumeMode:ie,customFilter:ce,shouldStretchPage:Q,scrollbarXSize:G,scrollbarYSize:re,readerNavBarWidth:H,onSizeChange:Z,minWidth:le,minHeight:je,scrollElement:Ce})=>{const{t:fe}=F(),{direction:pe}=Qe(),[de,ve]=$t.useGetChapterPagesFetch(v!=null?v:-1),[Se,Le]=i.useState(!1),[me,Ne]=i.useState(mt.totalPages),[ze,et]=i.useState(mt.pageUrls),[we,Re]=i.useState(mt.pages),[Y,P]=i.useState(mt.pageLoadStates),[K,Me]=i.useState(Y.map(({url:C})=>({url:C,isSpread:!1}))),ee=i.useRef(null),be=i.useRef(L),ue=i.useRef(we.map(()=>null)),z=i.useRef(null),Ae=i.useMemo(()=>!!!me||!(me===K.length)?we:u===N.DOUBLE_PAGE?ws(ze,K,f,p):we,[K,u,f,p,me]),ot=i.useMemo(()=>Os(u),[u]),at=p===nt.LTR,Ee=st(u),He=!Ee&&!L||k,ft=!Ee&&L,it=!He&&(ft||Ee&&(I||W)),ct=!He&&(ft||Ee&&(I||te));be.current=L,L&&(U.current=ue.current);const lt=i.useCallback(()=>{v&&(Le(!1),de({variables:{input:{chapterId:v}}}).catch(St()))},[de,v]),_t=i.useMemo(()=>Ds(Ae,K,Me,Y,C=>{be.current&&n(C),P(C)},u),[Ae,u]),Bt=i.useMemo(()=>Is(C=>{be.current&&n(C),P(C)}),[]);i.useEffect(()=>{lt()},[v]),$e(ee,i.useCallback(C=>{const{clientWidth:Oe,clientHeight:tt}=C[0].target;Z(Oe,tt,v)},[Z,ee.current,v]));const se=(C,Oe,tt,pt=!1)=>{(pt||!Se)&&Oe(C),L&&tt(C)};return Fo(L,ve,ie,D,Ae,Y,K,Se,Le,C=>se(C,_e,_),C=>se(C,Ne,o),C=>se(C,Re,s),C=>se(C,et,_e),C=>se(C,P,n),C=>se(C,Me,_e),C=>se(C,_e,r),C=>{(I&&!Se||M)&&(l(C),_(Oe=>({...Oe,visibleChapters:{...Oe.visibleChapters,scrollIntoView:!1,resumeMode:void 0}})))},C=>se(C,_e,x)),Ho(e,Ae,ze,C=>se(C,Re,s,!0),C=>se(C,Me,_e,!0),C=>se(C,_e,a),u),Ee||L||y||B?ve.error?He?null:t.jsx(X,{sx:{minHeight:"100%",minWidth:"100%",display:"grid",placeItems:"center",position:"relative"},children:t.jsx(Ct,{message:fe("global.error.label.failed_to_load_data"),messageExtra:_r(ve.error),retry:()=>{lt()}})}):ve.loading||!Se?He?null:t.jsx(X,{sx:{minHeight:"100%",minWidth:"100%",display:"grid",placeItems:"center"},children:t.jsx(It,{})}):v!=null&&!me?He?null:t.jsx(X,{sx:{minWidth:"100%",minHeight:"100%",position:"relative"},children:t.jsx(Ct,{message:fe("reader.error.label.no_pages_found"),retry:lt})}):t.jsxs(A,{ref:ee,sx:{width:"fit-content",height:"fit-content",margin:"auto",flexWrap:"nowrap",...m(u===N.CONTINUOUS_HORIZONTAL,{minHeight:je}),...m(qe(u),{minWidth:le}),...m(He,{maxWidth:0,maxHeight:0,minWidth:"unset",minHeight:"unset",overflow:"hidden",margin:"unset"}),...m(qe(u)&&Br(g,h),{alignItems:"center"}),...m(u===N.CONTINUOUS_HORIZONTAL,{...m(pe==="ltr",{flexDirection:at?"row":"row-reverse"}),...m(pe==="rtl",{flexDirection:at?"row-reverse":"row"})})},children:[!k&&t.jsx(Yo,{readingMode:u,readingDirection:p,shouldUseInfiniteScroll:S,chapterId:v,previousChapterId:R,nextChapterId:w,isCurrentChapter:L,isPreviousChapterVisible:b,isNextChapterVisible:T,imageWrapper:z.current,scrollbarXSize:G,scrollbarYSize:re,scrollElement:Ce}),it&&t.jsx(pr,{chapterId:v,type:We.PREVIOUS}),t.jsx(ot,{ref:z,totalPages:me,currentPageIndex:e,pages:Ae,transitionPageMode:d,pageLoadStates:Y,retryFailedPagesKeyPrefix:c,imageRefs:ue,onLoad:_t,onError:Bt,isCurrentChapter:L,isPreviousChapter:y,isNextChapter:B,readingMode:u,imagePreLoadAmount:E,readingDirection:p,pageScaleMode:h,pageGap:j,customFilter:ce,shouldStretchPage:Q,readerWidth:g,scrollbarXSize:G,scrollbarYSize:re,readerNavBarWidth:H,isPreloadMode:k,resumeMode:ie,handleAsInitialRender:M}),ct&&t.jsx(pr,{chapterId:v,type:We.NEXT})]}):null},Zo=i.memo(Ko),qo=(e,s,n,o,r,a,l,d)=>{const c=i.useRef({left:0,top:0,visibleElement:void 0,visibleElementLeft:0,visibleElementTop:0}),x=i.useRef(a);i.useEffect(()=>{const h=e.current;if(!h)return()=>{};const f=()=>{var S,E;const{visibleElement:p}=c.current;c.current={...c.current,left:h.scrollLeft,top:h.scrollTop,visibleElementLeft:(S=p==null?void 0:p.offsetLeft)!=null?S:0,visibleElementTop:(E=p==null?void 0:p.offsetTop)!=null?E:0}};return h.addEventListener("scroll",f),()=>h.removeEventListener("scroll",f)},[]);const u=i.useCallback(()=>{const h=e.current,{left:f,top:p,visibleElement:S,visibleElementLeft:E,visibleElementTop:j}=c.current;if(!h||!r||!S)return;const v=f-E+S.offsetLeft,R=p-j+S.offsetTop;h.scrollTo(v,R)},[r]);i.useLayoutEffect(()=>{const h=e.current;if(!h)return()=>{};const f=(j,v,R)=>Array.from(j).filter(w=>w instanceof HTMLElement).flatMap(w=>(v(w),Array.from(w.querySelectorAll("img")))).forEach(R),p=new ResizeObserver(u),S=new IntersectionObserver(j=>{const v=j.filter(R=>R.isIntersecting).shift();!v||!(v.target instanceof HTMLElement)||(c.current={...c.current,visibleElement:v.target,visibleElementLeft:v.target.offsetLeft,visibleElementTop:v.target.offsetTop})}),E=new MutationObserver(j=>{for(const v of j)f(v.addedNodes,R=>p.observe(R),R=>S.observe(R)),f(v.removedNodes,R=>p.unobserve(R),R=>S.unobserve(R))});return E.observe(h,{childList:!0}),()=>{E.disconnect(),p.disconnect(),S.disconnect()}},[u]);const g=i.useCallback(()=>{r&&Ls(d)&&l(s)},[r,s,d]);i.useEffect(()=>(window.addEventListener("resize",g),()=>window.removeEventListener("resize",g)),[g]),i.useEffect(()=>{x.current!==a&&(x.current=a,g())},[g,a]),i.useLayoutEffect(()=>{l(s)},[n,o])},Jo={[N.SINGLE_PAGE]:dt.X,[N.DOUBLE_PAGE]:dt.X,[N.CONTINUOUS_VERTICAL]:dt.Y,[N.CONTINUOUS_HORIZONTAL]:dt.X,[N.WEBTOON]:dt.Y},Qo=i.forwardRef(({currentPageIndex:e,pageToScrollToIndex:s,setPageToScrollToIndex:n,pages:o,totalPages:r,setPages:a,setPageLoadStates:l,setTotalPages:d,setCurrentPageIndex:c,transitionPageMode:x,retryFailedPagesKeyPrefix:u,setTransitionPageMode:g,readingMode:h,readingDirection:f,shouldUseInfiniteScroll:p,readerWidth:S,pageScaleMode:E,shouldOffsetDoubleSpreads:j,imagePreLoadAmount:v,pageGap:R,customFilter:w,shouldStretchPage:b,readerNavBarWidth:T,setScrollbarXSize:D,setScrollbarYSize:I,isVisible:L,setIsVisible:y,updateCurrentPageIndex:B,showPreview:W,setShowPreview:te,initialChapter:k,currentChapter:U,chapters:M,visibleChapters:_,setReaderStateChapters:ie,isCurrentChapterReady:ce},Q)=>{var Me;const{direction:G}=Qe(),{resumeMode:re=rr.START}=(Me=yr().state)!=null?Me:{resumeMode:rr.START},H=i.useRef(null);i.useImperativeHandle(Q,()=>H.current);const Z=qe(h),le=st(h),je=_o(H),Ce=xt();i.useEffect(()=>Ce.setScrollRef(H),[]);const fe=sr.useGetScrollbarSize("width",H.current),pe=sr.useGetScrollbarSize("height",H.current);i.useLayoutEffect(()=>{D(fe),I(pe)},[fe,pe]);const de=he.useHandleClick(H.current),ve=i.useRef(o.map(()=>null)),[{minChapterViewWidth:Se,minChapterViewHeight:Le,minChapterSizeSourceChapterId:me},Ne]=i.useState({minChapterViewWidth:0,minChapterViewHeight:0,minChapterSizeSourceChapterId:-1}),[,ze]=i.useState({}),et=Jo[h],we=f===nt.LTR,Re=i.useMemo(()=>M.findIndex(ee=>ee.id===(k==null?void 0:k.id)),[M,k==null?void 0:k.id]),Y=i.useMemo(()=>M.slice(Math.max(0,Re-_.trailing),Math.min(M.length,Re+_.leading+1)),[M,Re,_.trailing,_.leading]),P=i.useMemo(()=>Y.findIndex(ee=>ee.id===(U==null?void 0:U.id)),[U,Y]),K=i.useCallback((ee,be,ue)=>{if(!le)return;const z=ue===me;if(Z){if(!z&&Se>=ee)return;Ne({minChapterViewWidth:ee,minChapterViewHeight:0,minChapterSizeSourceChapterId:ue});return}(z||Le<be)&&Ne({minChapterViewWidth:0,minChapterViewHeight:be,minChapterSizeSourceChapterId:ue})},[le,Z,Se,Le,me]);if(Mo(s,e,o,r,n,B,le,ve,G,f),No(e,le,G,f,H),Po(H),ko(h,f,H),yo(L,y,W,te,H),Bo(L,Ce),qo(H,e,h,f,le,T,n,E),i.useLayoutEffect(()=>{Ne({minChapterViewWidth:0,minChapterViewHeight:0,minChapterSizeSourceChapterId:-1}),ze({})},[h]),!k||!U)throw new Error("ReaderViewer: illegal state - initialChapter and currentChapter should not be undefined");return t.jsx(A,{ref:H,sx:{width:"100%",height:"100%",overflow:"auto",flexWrap:"nowrap",...m(Z&&Br(S,E),{alignItems:"center"}),...m(!Z,{...m(G==="ltr",{flexDirection:we?"row":"row-reverse"}),...m(G==="rtl",{flexDirection:we?"row-reverse":"row"})})},onClick:ee=>!je&&de(ee),onScroll:()=>he.updateCurrentPageOnScroll(ve,r-1,B,et,f),children:Y.map((ee,be)=>{var C,Oe,tt,pt;const ue=Math.max(0,Y.length-be-1),z=Y[ue],Ae=(C=Y[ue+1])!=null?C:M[Re+_.leading+1],ot=(Oe=Y[ue-1])!=null?Oe:M[Re-_.trailing-1],at=z.id===k.id,Ee=z.id===U.id,He=z.id===((tt=Y[P+1])==null?void 0:tt.id),ft=z.id===((pt=Y[P-1])==null?void 0:pt.id),it=k.sourceOrder>z.sourceOrder,ct=k.sourceOrder<z.sourceOrder,lt=_.lastLeadingChapterSourceOrder===z.sourceOrder,_t=_.lastTrailingChapterSourceOrder===z.sourceOrder,Bt=lt&&_.isLeadingChapterPreloadMode||_t&&_.isTrailingChapterPreloadMode,se=As(ue,Y,_),yt=z.id===me;return t.jsx(Zo,{chapterId:z.id,previousChapterId:Ae==null?void 0:Ae.id,nextChapterId:ot==null?void 0:ot.id,isPreviousChapterVisible:se.previous,isNextChapterVisible:se.next,lastPageRead:rt(z.lastPageRead,0,z.pageCount-1),currentPageIndex:Bs(e,z,U,Ee,ce,it,ct,_),isInitialChapter:at,isCurrentChapter:Ee,isPreviousChapter:He,isNextChapter:ft,isLeadingChapter:it,isTrailingChapter:ct,isPreloadMode:Bt,imageRefs:ve,setPages:a,setPageLoadStates:l,setTotalPages:d,setCurrentPageIndex:c,setPageToScrollToIndex:n,transitionPageMode:x,retryFailedPagesKeyPrefix:u,readingMode:h,readerWidth:S,pageScaleMode:E,shouldOffsetDoubleSpreads:j,readingDirection:f,shouldUseInfiniteScroll:p,updateCurrentPageIndex:Ee?B:_e,scrollIntoView:Ee&&_.scrollIntoView,resumeMode:_s(Ee,at,it,ct,_.resumeMode,re),setReaderStateChapters:ie,setTransitionPageMode:g,pageGap:R,imagePreLoadAmount:v,customFilter:w,shouldStretchPage:b,scrollbarXSize:fe,scrollbarYSize:pe,readerNavBarWidth:T,onSizeChange:K,minWidth:yt?0:Se,minHeight:yt?0:Le,scrollElement:H.current},z.id)})})}),ea=V(i.memo(Qo),[Ie,O.useSettingsWithoutDefaultFlag,Je,Lt,()=>({updateCurrentPageIndex:he.useUpdateCurrentPageIndex()}),At,ke,Ue],["currentPageIndex","pageToScrollToIndex","setPageToScrollToIndex","pages","totalPages","setPages","setPageLoadStates","setTotalPages","setCurrentPageIndex","retryFailedPagesKeyPrefix","setTransitionPageMode","readingMode","readingDirection","shouldUseInfiniteScroll","readerWidth","pageScaleMode","shouldOffsetDoubleSpreads","imagePreLoadAmount","pageGap","customFilter","shouldStretchPage","readerNavBarWidth","transitionPageMode","setScrollbarXSize","setScrollbarYSize","isVisible","setIsVisible","updateCurrentPageIndex","showPreview","setShowPreview","initialChapter","currentChapter","chapters","visibleChapters","setReaderStateChapters","isCurrentChapterReady"]),ta=Object.fromEntries(Object.values(ht).map(e=>[e,{scopes:e}])),J=(...e)=>{const[s,n,o,r]=e;return ys(s,n,{...o,...ta.reader},r)},Ht=(e,s,n,o,r,a,l)=>{if(a){e(n,r[0]);return}const d=Gr(r.indexOf(o),r,l);if(d===void 0){s(n);return}e(n,d)},ra=({scrollElementRef:e})=>{const{direction:s}=Qe(),n=O.useGetThemeDirection(),{enableScope:o,disableScope:r}=Rr(),{manga:a}=Pe(),{isVisible:l,setIsVisible:d}=Lt(),{hotkeys:c,pageScaleMode:x,shouldStretchPage:u,shouldOffsetDoubleSpreads:g,readingMode:h,readingDirection:f,autoScroll:p,scrollAmount:S}=O.useSettings(),E=xt(),{setShowPreview:j}=At(),v=O.useExit(),R=he.useOpenChapter(),w=he.useOpenPage(),b=O.useCreateUpdateSetting(a!=null?a:Fe),T=O.useCreateDeleteSetting(a!=null?a:Fe);return J(c[q.PREVIOUS_PAGE],()=>w("previous"),[w]),J(c[q.NEXT_PAGE],()=>w("next"),[w]),J(c[q.SCROLL_BACKWARD],()=>e.current&&he.scroll(nr.BACKWARD,or[h.value],h.value,f.value,s,e.current,R,d,j,S),{preventDefault:!0},[h.value,f.value,s,R,S]),J(c[q.SCROLL_FORWARD],()=>e.current&&he.scroll(nr.FORWARD,or[h.value],h.value,f.value,s,e.current,R,d,j,S),{preventDefault:!0},[h.value,f.value,s,R,S]),J(c[q.PREVIOUS_CHAPTER],()=>R(ge("previous","next",n)),[R,n]),J(c[q.NEXT_CHAPTER],()=>R(ge("next","previous",n)),[R,n]),J(c[q.TOGGLE_MENU],()=>d(!l),[l]),J(c[q.CYCLE_SCALE_TYPE],()=>{Ht(b,T,"pageScaleMode",x.value,Cr,x.isDefault,!0)},[b,T,x.value,x.isDefault]),J(c[q.STRETCH_IMAGE],()=>b("shouldStretchPage",!u.value),[b,u.value]),J(c[q.OFFSET_SPREAD_PAGES],()=>b("shouldOffsetDoubleSpreads",!g.value),[b,g.value]),J(c[q.CYCLE_READING_MODE],()=>{Ht(b,T,"readingMode",h.value,wr,h.isDefault,!0)},[b,T,h.value,h.isDefault]),J(c[q.CYCLE_READING_DIRECTION],()=>{Ht(b,T,"readingDirection",f.value,Or,f.isDefault,!0)},[b,T,f.value,f.isDefault]),J(c[q.TOGGLE_AUTO_SCROLL],E.toggleActive,{preventDefault:!0},[E.toggleActive]),J(c[q.AUTO_SCROLL_SPEED_DECREASE],()=>b("autoScroll",{...p,value:Math.min(Be.max,p.value+Be.step)}),[b,p.value]),J(c[q.AUTO_SCROLL_SPEED_INCREASE],()=>b("autoScroll",{...p,value:Math.max(Be.min,p.value-Be.step)}),[b,p.value]),J(c[q.EXIT_READER],v,[v]),i.useEffect(()=>(o(ht.READER),()=>r(ht.READER)),[]),null},sa=(e,s,n,o,r,a,l,d,c,x,u,g)=>{i.useEffect(()=>()=>{e(void 0),s(Rt),n(0),o(null),r(0),a([ks("",0)]),l([]),d([{url:"",loaded:!1}]),c(We.NONE),x(!1),u(Ps),g()},[])},na=(e,s,n,o,r,a)=>{var l;i.useEffect(()=>{var p;const d=(p=e.data)==null?void 0:p.manga;if(!d||s.loading||s.error)return;const c=ar(d,n),x=Ns(d,c.shouldUseAutoWebtoonMode,c.readingMode),u={...n,readingMode:x?N.WEBTOON:n.readingMode},g=x?N.WEBTOON:c.readingMode.value,h=Ms("global",{meta:o},u,void 0,g),f=ar(d,h);r(f),a(!0)},[(l=e.data)==null?void 0:l.manga,n])},Sr=5e3,oa=(e,s,n,o,r,a,l,d,c)=>{const{t:x}=F(),u=i.useRef(void 0),g=i.useRef(void 0),h=i.useRef(void 0),f=i.useRef(!0);i.useEffect(()=>{if(e||s||!n)return;const p=JSON.stringify(o)!==JSON.stringify(u.current);l&&p&&Ir(x(Ut[o.value].title),{autoHideDuration:Sr}),u.current=o;const E=JSON.stringify(r)!==JSON.stringify(g.current)||JSON.stringify(a)!==JSON.stringify(h.current);d&&E&&(c(!0),f.current&&setTimeout(()=>c(!1),Sr)),g.current=r,h.current=a,f.current=!1},[e,s,n,o.value,o.isDefault,r.value,r.isDefault,a.value,a.isDefault])},aa=(e,s,n,o,r,a)=>{var u;const l=Hs(),d=yr().state,{updateInitialChapter:c}=d!=null?d:{},x=c?void 0:n;i.useEffect(()=>{var R,w;const g=(R=e.data)==null?void 0:R.chapters.nodes,h=g?(w=g[g.length-s])!=null?w:null:void 0,f=x!=null?x:h,p=o!=null?o:h,S=g&&h&&Ve.getNextChapter(h,g,{offset:jt.NEXT,skipDupe:a,skipDupeChapter:p}),E=g&&h&&Ve.getNextChapter(h,g,{offset:jt.PREVIOUS,skipDupe:a,skipDupeChapter:p}),j=!g||!p?[]:a?Ve.removeDuplicates(p,g):g,v=f!=null&&f.id!==(x==null?void 0:x.id);v&&l("",{replace:!0,state:{...d,updateInitialChapter:void 0}}),r(b=>{var D,I,L;const T=(h==null?void 0:h.id)!==((D=b.currentChapter)==null?void 0:D.id);return{...b,mangaChapters:g!=null?g:[],chapters:j,initialChapter:f,chapterForDuplicatesHandling:p,currentChapter:h,nextChapter:S,previousChapter:E,isCurrentChapterReady:T?!1:b.isCurrentChapterReady,visibleChapters:v?{...Rt.visibleChapters,lastLeadingChapterSourceOrder:(I=f==null?void 0:f.sourceOrder)!=null?I:Rt.visibleChapters.lastLeadingChapterSourceOrder,lastTrailingChapterSourceOrder:(L=f==null?void 0:f.sourceOrder)!=null?L:Rt.visibleChapters.lastTrailingChapterSourceOrder,isLeadingChapterPreloadMode:!1,isTrailingChapterPreloadMode:!1,scrollIntoView:!!b.initialChapter}:b.visibleChapters}})},[(u=e.data)==null?void 0:u.chapters.nodes,s,a,x])},ia=({setTitle:e,setOverride:s,readerNavBarWidth:n,isVisible:o,setIsVisible:r,manga:a,setManga:l,shouldSkipDupChapters:d,backgroundColor:c,readingMode:x,tapZoneLayout:u,tapZoneInvertMode:g,shouldShowReadingModePreview:h,shouldShowTapZoneLayoutPreview:f,setSettings:p,initialChapter:S,chapterForDuplicatesHandling:E,currentChapter:j,setReaderStateChapters:v,setTotalPages:R,setCurrentPageIndex:w,setPageToScrollToIndex:b,setPages:T,setPageUrls:D,setPageLoadStates:I,setTransitionPageMode:L,cancelAutoScroll:y,setShowPreview:B})=>{var Ce,fe,pe;const{t:W}=F(),te=i.useRef(null),[k,U]=i.useState(!1),{chapterSourceOrder:M,mangaId:_}=Fs(),ie=Number(M),ce=Number(_),Q=$t.useGetManga(Ws,ce),G=$t.useGetMangaChapters(Us,ce),{metadata:re,settings:H,request:Z}=Gs(),le=j===void 0||!k||Q.loading||G.loading||Z.loading,je=(fe=(Ce=Q.error)!=null?Ce:G.error)!=null?fe:Z.error;return i.useLayoutEffect(()=>{if(!a||!j){e(W("reader.title",{mangaId:ce,chapterIndex:ie}));return}e("".concat(a.title,": ").concat(j.name))},[W,ce,ie,a,j]),i.useEffect(()=>{var de;l((de=Q.data)==null?void 0:de.manga)},[(pe=Q.data)==null?void 0:pe.manga]),sa(l,v,w,b,R,T,D,I,L,r,p,y),na(Q,Z,H,re,p,U),oa(le,je,k,x,u,g,h,f,B),aa(G,ie,S,E,v,d),i.useLayoutEffect(()=>(s({status:!0,value:t.jsxs(X,{sx:{position:"absolute"},children:[t.jsx(ra,{scrollElementRef:te}),t.jsx(Oo,{isVisible:o}),!te.current&&t.jsx(X,{onClick:()=>r(!o),sx:{position:"fixed",top:0,left:0,width:"100vw",height:"100vh",background:"transparent"}})]})}),()=>s({status:!1,value:null})),[o,r,te.current]),je?t.jsx(Ct,{message:W("global.error.label.failed_to_load_data"),messageExtra:_r(je),retry:()=>{Q.error&&Q.refetch().catch(St()),Z.error&&Z.refetch().catch(St()),G.error&&G.refetch().catch(St())}}):le?t.jsx(X,{sx:{height:"100vh",width:"100vw",display:"grid",placeItems:"center"},children:t.jsx(It,{})}):j===null?t.jsx(Ct,{message:W("reader.error.label.chapter_not_found")}):!a||!j?null:t.jsxs(X,{sx:{position:"relative",display:"flex",flexDirection:"column",width:"calc(100vw - ".concat(n,"px)"),height:"100vh",marginLeft:"".concat(n,"px"),transition:de=>"width 0.".concat(de.transitions.duration.shortest,"s, margin-left 0.").concat(de.transitions.duration.shortest,"s"),overflow:"auto",backgroundColor:Ar[c]},children:[t.jsx(ea,{ref:te}),t.jsx(Io,{}),t.jsx(Ao,{})]})},Ha=V(i.memo(ia),[Ue,Lt,Pe,ke,Vs,()=>{const{shouldSkipDupChapters:e,backgroundColor:s,shouldShowReadingModePreview:n,shouldShowTapZoneLayoutPreview:o}=O.useSettingsWithoutDefaultFlag();return{shouldSkipDupChapters:e,backgroundColor:s,shouldShowReadingModePreview:n,shouldShowTapZoneLayoutPreview:o}},()=>{const{readingMode:e,tapZoneLayout:s,tapZoneInvertMode:n}=O.useSettings();return{readingMode:e,tapZoneLayout:s,tapZoneInvertMode:n}},Ie,()=>({cancelAutoScroll:xt().cancel}),At],["setTitle","setOverride","readerNavBarWidth","isVisible","setIsVisible","manga","setManga","shouldSkipDupChapters","backgroundColor","readingMode","tapZoneLayout","tapZoneInvertMode","shouldShowReadingModePreview","shouldShowTapZoneLayoutPreview","setSettings","initialChapter","chapterForDuplicatesHandling","currentChapter","setReaderStateChapters","setTotalPages","setCurrentPageIndex","setPageToScrollToIndex","setPages","setPageUrls","setPageLoadStates","setTransitionPageMode","cancelAutoScroll","setShowPreview"]);export{Ha as Reader};
