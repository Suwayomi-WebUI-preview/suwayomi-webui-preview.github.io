import{c as S,j as e,b as R,T as H,B as N,G as l,bE as O,cL as p,u as q,r as g,i as B,g as $,k as w,N as b,s as x,v as a,ay as E,cG as y}from"./index-gg3CxQH1.js";import{E as D}from"./EmptyViewAbsoluteCentered-CeK1oO0h.js";import{R as J}from"./Refresh-Ipw3GTPE.js";import{D as X}from"./Download-Bv5T1Rfi.js";import{e as Z}from"./DateHelper-DbYbl93-.js";import{u as Q}from"./useAppTitle-Cr_Dwl9M.js";import{L as v}from"./ListSubheader-CUoGjaMH.js";const Y=S(e.jsx("path",{d:"M19 19H5V5h7V3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2v-7h-2zM14 3v2h3.59l-9.83 9.83 1.41 1.41L19 6.41V10h2V3z"})),K=S(e.jsx("path",{d:"M18.32 4.26C16.84 3.05 15.01 2.25 13 2.05v2.02c1.46.18 2.79.76 3.9 1.62zM19.93 11h2.02c-.2-2.01-1-3.84-2.21-5.32L18.31 7.1c.86 1.11 1.44 2.44 1.62 3.9m-1.62 5.9 1.43 1.43c1.21-1.48 2.01-3.32 2.21-5.32h-2.02c-.18 1.45-.76 2.78-1.62 3.89M13 19.93v2.02c2.01-.2 3.84-1 5.32-2.21l-1.43-1.43c-1.1.86-2.43 1.44-3.89 1.62M13 12V7h-2v5H7l5 5 5-5zm-2 7.93v2.02c-5.05-.5-9-4.76-9-9.95s3.95-9.45 9-9.95v2.02C7.05 4.56 4 7.92 4 12s3.05 7.44 7 7.93"})),ee=(r,d,s,o=!1)=>s===p.Downloading?e.jsx(K,{}):r?e.jsx(O,{size:15}):!d||s===p.Error?e.jsx(J,{}):o?e.jsx(Y,{}):e.jsx(X,{}),re=(r,d,s,o,c=0)=>o===p.Downloading?l._({id:"t5uylT",values:{progress:c}}):o===p.Error?l._({id:"iGma9e"}):r?l._({id:"r8g+z0"}):s?l._({id:"1Zzehe"}):d?l._({id:"CifUuG"}):l._({id:"dvXZGf"}),L=({version:r,isCheckingForUpdate:d,isUpdateAvailable:s,updateCheckError:o,checkForUpdate:c,triggerUpdate:u,updateState:i,progress:j,downloadAsLink:f,url:m})=>{const n=i===p.Downloading,U=()=>{if(n)return;if(!s||o||i===p.Error){c();return}s&&(u==null||u())};return e.jsxs(R,{sx:{alignItems:"start"},children:[e.jsx(H,{component:"span",variant:"body2",children:r}),e.jsx(N,{sx:{marginTop:"5px",backgroundColor:"transparent",pointerEvents:n?"none":"unset"},size:"small",variant:"outlined",startIcon:ee(d,s,i,f),onClick:U,...m&&s?{href:m,target:"_blank"}:void 0,children:re(d,s,o,i,j)})]})};function ce(){var C,F,W;const{i18n:r,_:d}=q();Q(r._({id:"uyJsf6"}));const{data:s,loading:o,error:c,refetch:u}=g.useGetAbout({notifyOnNetworkStatusChange:!0}),{data:i,loading:j,refetch:f,error:m}=g.useCheckForServerUpdate({notifyOnNetworkStatusChange:!0}),{data:n,loading:U,refetch:I,error:T}=g.useCheckForWebUIUpdate({notifyOnNetworkStatusChange:!0}),z=T||(n==null?void 0:n.checkForWebUIUpdate.tag)==="",{data:k}=g.useGetWebUIUpdateStatus(),{state:G,progress:V}=(C=k==null?void 0:k.getWebUIUpdateStatus)!=null?C:{state:p.Idle,progress:0};if(o)return e.jsx(B,{});if(c)return e.jsx(D,{message:r._({id:"6m5aox"}),messageExtra:$(c),retry:()=>u().catch(w("About::refetch"))});const{aboutServer:t,aboutWebUI:_}=s,h=(F=i==null?void 0:i.checkForServerUpdates)==null?void 0:F.find(P=>P.channel===t.buildType),A=!!(h!=null&&h.tag)&&h.tag!==t.version,M=!!(n!=null&&n.checkForWebUIUpdate.updateAvailable);return e.jsxs(b,{sx:{pt:0},children:[e.jsxs(b,{sx:{padding:0},subheader:e.jsx(v,{component:"div",id:"about-server-info",children:r._({id:"sGH11W"})}),children:[e.jsx(x,{children:e.jsx(a,{primary:r._({id:"sGH11W"}),secondary:"".concat(t.name," (").concat(t.buildType,")")})}),e.jsx(x,{children:e.jsx(a,{primary:r._({id:"81pXhi"}),secondary:e.jsx(L,{version:t.version,isCheckingForUpdate:j,isUpdateAvailable:A,updateCheckError:m,checkForUpdate:f,downloadAsLink:!0,url:(W=h==null?void 0:h.url)!=null?W:""})})}),e.jsx(x,{children:e.jsx(a,{primary:r._({id:"b+4nBk"}),secondary:Z(Number(t.buildTime)).toString()})})]}),e.jsx(E,{}),e.jsxs(b,{sx:{padding:0},subheader:e.jsx(v,{component:"div",id:"about-webui-info",children:r._({id:"GYkIV+"})}),children:[e.jsx(x,{children:e.jsx(a,{primary:r._({id:"QeIN2J"}),secondary:_.channel.toLocaleUpperCase()})}),e.jsx(x,{children:e.jsx(a,{primary:r._({id:"LgH3Vq"}),secondary:e.jsx(L,{version:_.tag,isCheckingForUpdate:U,isUpdateAvailable:M,updateCheckError:z,checkForUpdate:I,triggerUpdate:()=>g.updateWebUI().response.catch(w("About::updateWebUI")),progress:V,updateState:G})})})]}),e.jsx(E,{}),e.jsxs(b,{subheader:e.jsx(v,{component:"div",id:"about-links",children:r._({id:"Rj01Fz"})}),children:[e.jsx(y,{to:t.github,target:"_blank",rel:"noreferrer",children:e.jsx(a,{primary:r._({id:"Sg0T47"}),secondary:t.github})}),e.jsx(y,{to:"https://github.com/Suwayomi/Suwayomi-WebUI",target:"_blank",rel:"noreferrer",children:e.jsx(a,{primary:r._({id:"jJ1qzF"}),secondary:"https://github.com/Suwayomi/Suwayomi-WebUI"})}),e.jsx(y,{to:t.discord,target:"_blank",rel:"noreferrer",children:e.jsx(a,{primary:r._({id:"OdPOhy"}),secondary:t.discord})})]})]})}export{ce as About};
