!function(){function e(t){return e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e(t)}var t=["children"];function n(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function r(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?n(Object(r),!0).forEach((function(t){o(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):n(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function o(t,n,r){return(n=function(t){var n=function(t,n){if("object"!=e(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var o=r.call(t,n||"default");if("object"!=e(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===n?String:Number)(t)}(t,"string");return"symbol"==e(n)?n:n+""}(n))in t?Object.defineProperty(t,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[n]=r,t}System.register(["./index-legacy-BNM2tkvc.js","./useManageMangaLibraryState-legacy-D7X1HWXt.js","./ChapterCardMetadata-legacy-DZ8I43Wh.js","./Delete-legacy-BHbC10Av.js","./Download-legacy-D4_Fg5Ke.js","./DoneAll-legacy-DZyGGR34.js","./MUI.util-legacy-Cqo-eR8d.js","./ListCardContent-legacy-CzZ_8FpY.js","./Card-legacy-BJOtjBYC.js","./CardActionArea-legacy-BWFgjrV0.js","./Checkbox-legacy-jWVJl3V2.js"],(function(e,n){"use strict";var o,a,l,i,c,s,d,u,p,h,f,b,m,g,y,v,x,j,k,C,w,O,D,_,I,P,S,M,R,T,V,B,L,z,A,N,H,E,U,G,K;return{setters:[function(e){o=e.c,a=e.j,l=e.u,i=e.r,c=e.a7,s=e.d,d=e.e,u=e._,p=e.db,h=e.i,f=e.af,b=e.a2,m=e.S,g=e.ae,y=e.L,v=e.dY,x=e.C,j=e.I,k=e.a3,C=e.a5,w=e.B},function(e){O=e.c,D=e.d,_=e.C,I=e.e,P=e.f,S=e.D,M=e.R,R=e.V,T=e.g,V=e.M},function(e){B=e.C,L=e.D},function(e){z=e.D},function(e){A=e.D},function(e){N=e.D},function(e){H=e.M},function(e){E=e.L},function(e){U=e.C},function(e){G=e.C},function(e){K=e.C}],execute:function(){var n=e("B",o(a.jsx("path",{d:"M17 3H7c-1.1 0-1.99.9-1.99 2L5 21l7-3 7 3V5c0-1.1-.9-2-2-2"}))),W=o(a.jsx("path",{d:"M21 7h-6V5h6zm-2 3.9c-.32.07-.66.1-1 .1-2.76 0-5-2.24-5-5 0-1.13.37-2.16 1-3H7c-1.1 0-2 .9-2 2v16l7-3 7 3z"})),F=o(a.jsx("path",{d:"M21 7h-2v2h-2V7h-2V5h2V3h2v2h2zm-2 14-7-3-7 3V5c0-1.1.9-2 2-2h7c-.63.84-1 1.87-1 3 0 2.76 2.24 5 5 5 .34 0 .68-.03 1-.1z"})),Y=e("L",o(a.jsx("path",{d:"M19 19H5V5h7V3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2v-7h-2zM14 3v2h3.59l-9.83 9.83 1.41 1.41L19 6.41V10h2V3z"}))),q=e("a",(function(e){var t,n,r,o=e.chapter,f=e.handleSelection,b=e.canBeDownloaded,m=void 0!==b&&b,g=e.selectedChapters,y=void 0===g?[]:g,v=e.onClose,x=e.selectable,j=void 0===x||x,k=l().t,C=!!o,w=null!=o?o:{},R=w.isDownloaded,T=w.isRead,V=w.isBookmarked,B=null!==(n=null===(r=i.useGetMangaChapters(c,null!==(t=null==o?void 0:o.mangaId)&&void 0!==t?t:-1,{skip:!o,fetchPolicy:"cache-only"}).data)||void 0===r?void 0:r.chapters.nodes)&&void 0!==n?n:[],L=s().settings.deleteChaptersWithBookmark,H=I(C,p),E=O(C),U=P(C),G=d.useMemo((function(){return{downloadableChapters:u.getDownloadable(y),downloadedChapters:u.getDownloaded(y),unbookmarkedChapters:u.getNonBookmarked(y),bookmarkedChapters:u.getBookmarked(y),unreadChapters:u.getNonRead(y),readChapters:u.getRead(y)}}),[y]),K=G.downloadableChapters,q=G.downloadedChapters,J=G.unbookmarkedChapters,Q=G.bookmarkedChapters,X=G.unreadChapters,Z=G.readChapters,$=function(e,t){var n,r="mark_prev_as_read"===e,a=r?"mark_as_read":e;if("delete"===a&&o&&!u.isDeletable(o,L))return void v();var l=function(){if(!o)return t;if(!r)return[o];var e=B.findIndex((function(e){return e.id===o.id}));return e+1>B.length-1?[]:B.slice(e+1)}();l.length?(u.performAction(a,u.getIds(l),{chapters:l,wasManuallyMarkedAsRead:!0,trackProgressMangaId:null===(n=l[0])||void 0===n?void 0:n.mangaId}).catch(h()),v()):v()};return a.jsxs(a.Fragment,{children:[C&&j&&a.jsx(D,{onClick:function(){null==f||f(o.id,!0),v()},Icon:_,title:k("chapter.action.label.select")}),C&&a.jsx(D,{Icon:Y,disabled:!o.realUrl,onClick:function(){window.open(o.realUrl,"_blank","noopener,noreferrer"),v()},title:k("chapter.action.label.open_on_source")}),E(m)&&a.jsx(D,{Icon:A,disabled:U(!K.length),onClick:function(){return $("download",K)},title:H("download",K.length)}),E(R)&&a.jsx(D,{Icon:z,disabled:U(!q.length),onClick:function(){return $("delete",u.getDeletable(q,L))},title:H("delete",q.length)}),E(!V)&&a.jsx(D,{Icon:F,disabled:U(!J.length),onClick:function(){return $("bookmark",J)},title:H("bookmark",J.length)}),E(V)&&a.jsx(D,{Icon:W,disabled:U(!Q.length),onClick:function(){return $("unbookmark",Q)},title:H("unbookmark",Q.length)}),E(!T)&&a.jsx(D,{Icon:S,disabled:U(!X.length),onClick:function(){return $("mark_as_read",X)},title:H("mark_as_read",X.length)}),E(T)&&a.jsx(D,{Icon:M,disabled:U(!Z.length),onClick:function(){return $("mark_as_unread",Z)},title:H("mark_as_unread",Z.length)}),C&&a.jsx(D,{onClick:function(){return $("mark_prev_as_read",[])},Icon:N,title:k("chapter.action.mark_as_read.add.label.action.previous")})]})}));e("C",d.memo((function(e){var t=l().t,o=f(),i=d.useRef(null),c=e.mode,s=void 0===c?"manga.page":c,p=e.chapter,h=e.showChapterNumber,w=e.onSelect,O=e.selected,D=e.selectable,_=void 0===D||D,I=e.isActiveChapter,P=void 0!==I&&I,S=null!==O,M=p.isDownloaded,z=function(e){S&&(e.preventDefault(),e.stopPropagation(),w(p.id,!O,e.shiftKey))},A=function(e,t){e.stopPropagation(),e.preventDefault(),null==t||t(e)},N=R((function(e,t){var n=t.context;S||!i.current?(e.shiftKey=!0,z(e)):A(e,(function(){return null==n?void 0:n(i.current)}))}));return a.jsx(b,{variant:"popover",popupId:"chapter-card-action-menu",children:function(e){var l;return a.jsxs(m,{sx:{pt:1,px:1},children:[a.jsx(U,{sx:r({touchCallout:"none"},g("reader"===s&&P,{backgroundColor:"primary.main"})),children:a.jsx(G,r(r({component:y,to:u.getReaderUrl(p),style:{color:o.palette.text[p.isRead?"disabled":"primary"]},state:u.getReaderOpenChapterLocationState(p,!0),replace:"reader"===s,onClick:function(e){return z(e)}},N(e.open)),{},{children:a.jsxs(E,{children:[a.jsx(B,{title:h?"".concat(t("chapter.title_one")," ").concat(p.chapterNumber):p.name,secondaryText:p.scanlator,ternaryText:"".concat(v(Number(null!==(l=p.uploadDate)&&void 0!==l?l:0),!0)).concat(M?" â€¢ ".concat(t("chapter.status.label.downloaded")):""),infoIcons:p.isBookmarked&&a.jsx(n,{color:"reader"===s&&P?"secondary":"primary"}),slotProps:{title:{variant:"h6",component:"h3",sx:g("reader"===s&&P,{color:o.palette.primary.contrastText})},secondaryText:{sx:g("reader"===s&&P,{color:o.palette.primary.contrastText})},ternaryText:{sx:g("reader"===s&&P,{color:o.palette.primary.contrastText})}}}),a.jsx(L,{chapterId:p.id,color:"reader"===s&&P?o.palette.primary.contrastText:void 0}),a.jsx(m,{sx:{minHeight:"48px"},children:null===O?a.jsx(x,{title:t("global.button.options"),children:a.jsx(j,r(r({ref:i},H.preventRippleProp(k(e),{onClick:function(e){return A(e)}})),{},{"aria-label":"more",sx:r({color:"inherit"},g("reader"===s&&P,{color:"primary.contrastText"})),children:a.jsx(T,{})}))}):a.jsx(x,{title:t(O?"global.button.deselect":"global.button.select"),children:a.jsx(K,{checked:O})})})]})}))}),!S&&e.isOpen&&a.jsx(V,r(r({},C(e)),{},{children:function(e){return a.jsx(q,{onClose:e,chapter:p,handleSelection:function(){return w(p.id,!0)},canBeDownloaded:u.isDownloadable(p),selectable:_})}}))]})}})}))),e("b",d.forwardRef((function(e,n){var o=e.children,l=function(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}(e,t);return a.jsx(w,r(r({ref:n},l),{},{sx:r({minWidth:"unset",px:"10px"},l.sx),children:o}))})))}}}))}();
