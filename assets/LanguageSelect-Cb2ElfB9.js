import{ax as c,ab as h,ay as b,az as P,aA as d,aB as B,U as m,aC as f,u as C,d as x,aD as U,j as s,C as j,I as G,D as y,l as v,n as R,aE as k,ar as F,aF as K,B as D}from"./index-D2_dCMBF.js";import{F as M}from"./FilterList-BU23g8va.js";import{K as H}from"./MUI.util-DDPpK_AC.js";import{S as X}from"./Switch-DZXnjGvA.js";var o=(e=>(e.UPDATE="UPDATE",e.UNINSTALL="UNINSTALL",e.INSTALL="INSTALL",e))(o||{}),g=(e=>(e.OBSOLETE="OBSOLETE",e.UPDATING="UPDATING",e.UNINSTALLING="UNINSTALLING",e.INSTALLING="INSTALLING",e))(g||{});const i={...o,...g};var l=(e=>(e.INSTALLED="INSTALLED",e.UPDATE_PENDING="UPDATE_PENDING",e.OBSOLETE="OBSOLETE",e))(l||{});const Z={[o.UPDATE]:g.UPDATING,[o.UNINSTALL]:g.UNINSTALLING,[o.INSTALL]:g.INSTALLING},$={[o.UPDATE]:o.UNINSTALL,[o.UNINSTALL]:o.INSTALL,[o.INSTALL]:o.UNINSTALL},ee={[i.UNINSTALL]:"extension.action.label.uninstall",[i.INSTALL]:"extension.action.label.install",[i.UPDATE]:"extension.action.label.update",[i.OBSOLETE]:"extension.state.label.obsolete",[i.UPDATING]:"extension.state.label.updating",[i.UNINSTALLING]:"extension.state.label.uninstalling",[i.INSTALLING]:"extension.state.label.installing"},te={[o.UPDATE]:"extension.label.update_failed",[o.INSTALL]:"extension.label.installation_failed",[o.UNINSTALL]:"extension.label.uninstallation_failed"},w={[l.INSTALLED]:"extension.state.label.installed",[l.UPDATE_PENDING]:"extension.state.label.update_pending",[l.OBSOLETE]:"extension.state.label.obsolete",[c.ALL]:"extension.language.all",[c.OTHER]:"extension.language.other",[c.LOCAL_SOURCE]:"extension.language.other"},ae=(e,n,r)=>n?i.OBSOLETE:r?i.UPDATE:e?i.UNINSTALL:i.INSTALL,z=e=>[l.INSTALLED,l.UPDATE_PENDING,l.OBSOLETE].includes(e),W=e=>z(e)||[c.ALL,c.OTHER,c.LOCAL_SOURCE].includes(e),Y=e=>W(e)?h(w[e]):b(e);function ne(e){const n=Object.groupBy(e,a=>a.isInstalled?a.hasUpdate?l.UPDATE_PENDING:a.isObsolete?l.OBSOLETE:l.INSTALLED:a.lang);return Object.entries(n).toSorted(([a],[t])=>{const L=Object.values(l),T=L.includes(a),u=l.OBSOLETE===a,N=l.UPDATE_PENDING===a,A=L.includes(t),O=l.OBSOLETE===t,p=l.UPDATE_PENDING===t;return u||T&&!A||N&&!O?-1:O||!T&&A||!N&&p?1:f(a,t)}).map(([a,t])=>[a,(t!=null?t:[]).toSorted((L,T)=>L.name.localeCompare(T.name))]).filter(([,a])=>!!a.length)}const se=e=>[...new Set(e.map(n=>n.lang))],le=(e,{selectedLanguages:n,showNsfw:r,query:S}={})=>{const a=P(d(n!=null?n:[]));return e.filter(t=>!n||a.includes(B(t.lang))||t.isInstalled).filter(t=>r===void 0||r||!t.isNsfw).filter(t=>S==null||m(t.name).includes(m(S)))};function oe(e){const{t:n}=C(),{selectedLanguages:r,setSelectedLanguages:S,languages:a}=e,[t,L]=x.useState(d(r)),[T,u]=x.useState(!1),N=x.useMemo(()=>d([...t.toSorted(U),...a.toSorted(U)]),[a,t]),A=()=>{u(!1),L(d(r))},O=()=>{u(!1),S(d(t))},p=(E,I)=>{L(I?[...t,E]:t.toSpliced(t.indexOf(E),1))};return s.jsxs(s.Fragment,{children:[s.jsx(j,{title:n("settings.title"),children:s.jsx(G,{onClick:()=>u(!0),"aria-label":"display more actions",edge:"end",color:"inherit",children:s.jsx(M,{})})}),s.jsxs(y,{fullWidth:!0,maxWidth:"xs",open:T,onClose:A,children:[s.jsx(v,{children:n("global.language.title.enabled_languages")}),s.jsx(R,{dividers:!0,sx:{padding:0},children:s.jsx(H,{style:{height:N.length*54,minHeight:"25vh",maxHeight:"50vh"},data:N,increaseViewportBy:400,computeItemKey:E=>N[E],itemContent:(E,I)=>s.jsxs(k,{children:[s.jsx(F,{primary:Y(I)}),s.jsx(X,{checked:t.includes(I),onChange:_=>p(I,_.target.checked)})]})})}),s.jsxs(K,{children:[s.jsx(D,{autoFocus:!0,onClick:A,color:"primary",children:n("global.button.cancel")}),s.jsx(D,{onClick:O,color:"primary",children:n("global.button.ok")})]})]})]})}export{g as E,ee as I,oe as L,i as a,o as b,Z as c,$ as d,te as e,se as f,ae as g,le as h,ne as i,l as j,Y as t};
