import{a as y,c as x,b7 as f,b8 as T,J as w,a1 as R,j as e,B as k,M as C,u as S,o as L,az as c,a5 as g,a3 as h}from"./index-bzZBvN07.js";import{N as P}from"./NumberSetting-Cu8QmNKC.js";import{S as D}from"./SpinnerImage-BX3EiImH.js";import{S as M}from"./Select-CUJbL-F7.js";import{S as p}from"./Switch-V-JMeDM4.js";const H={staticNav:!1,showPageNumber:!0,loadNextOnEnding:!1,skipDupChapters:!0,fitPageToWindow:!0,scalePage:!1,readerType:"ContinuesVertical",offsetFirstPage:!1,readerWidth:50};function _(t,r,i=H,o){return T(t,r,i,!0,o)}const z=(t,r,i)=>_("manga",{...t,meta:f(t.meta)},r,i),G=(t,r)=>z(t,r),O=()=>{const t=y.useGetGlobalMeta({notifyOnNetworkStatusChange:!0}),{data:r,loading:i}=t,o=x.useMemo(()=>f(r==null?void 0:r.metas.nodes),[r==null?void 0:r.metas.nodes]),l=x.useMemo(()=>({meta:o}),[o]),s=_("global",l,void 0,x.useEffect),d=x.useMemo(()=>s,[l]);return x.useMemo(()=>({metadata:o,settings:d,loading:i,request:t}),[o,d,i,t])},v=t=>["ContinuesHorizontalLTR","ContinuesHorizontalRTL"].includes(t);function E(t){const r=["DoubleRTL","DoubleLTR"].includes(t.readerType),i=t.readerType==="ContinuesVertical",o=v(t.readerType),l=C.useGetScrollbarSize("height"),s={margin:0,width:"".concat(t.readerWidth,"%"),objectFit:"contain"},d={},m={marginBottom:"15px"},b={width:void 0,minHeight:"calc(100vh - ".concat(l,"px)"),maxHeight:"calc(100vh - ".concat(l,"px)"),marginLeft:"7px",marginRight:"7px"},u={width:void 0,height:void 0,minWidth:t.scalePage?"calc(100vw - (100vw - 100%))":void 0,maxWidth:"calc(100vw - (100vw - 100%))",minHeight:t.scalePage?"calc(100vh - ".concat(l,"px)"):void 0,maxHeight:"calc(100vh - ".concat(l,"px)")};return{...s,...r?d:void 0,...o?b:void 0,...i?m:void 0,...t.fitPageToWindow&&!o?u:void 0}}const U=x.forwardRef((t,r)=>{const{src:i,index:o,onImageLoad:l,settings:s,display:d=!0}=t,m=w(),b=R(m.breakpoints.down("md")),u=E(s);return e.jsx(k,{ref:r,sx:{display:d?"flex":"none",flexDirection:"column",alignItems:"center",justifyContent:"center"},children:e.jsx(D,{src:i,onImageLoad:l,alt:"Page #".concat(o),spinnerStyle:{...u,height:"100vh",width:b?"100vw":v(s.readerType)?"50vw":"calc(100% * 0.5)",backgroundColor:"background.paper"},imgStyle:u})})});function q({staticNav:t,loadNextOnEnding:r,readerType:i,showPageNumber:o,skipDupChapters:l,setSettingValue:s,fitPageToWindow:d,scalePage:m,offsetFirstPage:b,readerWidth:u}){const{t:n}=S(),j=!v(i);return e.jsxs(L,{sx:{pt:0},children:[e.jsxs(c,{children:[e.jsx(g,{primary:n("reader.settings.label.static_navigation")}),e.jsx(p,{edge:"end",checked:t,onChange:a=>s("staticNav",a.target.checked)})]}),e.jsxs(c,{children:[e.jsx(g,{primary:n("reader.settings.label.show_page_number")}),e.jsx(p,{edge:"end",checked:o,onChange:a=>s("showPageNumber",a.target.checked)})]}),e.jsxs(c,{children:[e.jsx(g,{primary:n("reader.settings.label.load_next_chapter")}),e.jsx(p,{edge:"end",checked:r,onChange:a=>s("loadNextOnEnding",a.target.checked)})]}),e.jsxs(c,{children:[e.jsx(g,{primary:n("reader.settings.label.skip_dup_chapters")}),e.jsx(p,{edge:"end",checked:l,onChange:a=>s("skipDupChapters",a.target.checked)})]}),j&&e.jsxs(c,{children:[e.jsx(g,{primary:n("reader.settings.label.fit_page_to_window")}),e.jsx(p,{edge:"end",checked:d,onChange:a=>s("fitPageToWindow",a.target.checked)})]}),j&&d&&e.jsxs(c,{children:[e.jsx(g,{primary:n("reader.settings.label.scale_page")}),e.jsx(p,{edge:"end",checked:m,onChange:a=>s("scalePage",a.target.checked)})]}),(i==="DoubleLTR"||i==="DoubleRTL")&&e.jsxs(c,{children:[e.jsx(g,{primary:n("reader.settings.label.offset_first_page")}),e.jsx(p,{edge:"end",checked:b,onChange:a=>s("offsetFirstPage",a.target.checked)})]}),j&&!d&&e.jsx(P,{settingTitle:n("reader.settings.label.reader_width"),settingValue:"".concat(u,"%"),value:u,minValue:10,maxValue:100,defaultValue:50,valueUnit:"%",showSlider:!0,handleUpdate:a=>s("readerWidth",a),handleLiveUpdate:a=>s("readerWidth",a,!1),listItemTextSx:{display:"flex",alignItems:"center",justifyContent:"space-between"}}),e.jsxs(c,{children:[e.jsx(g,{primary:n("reader.settings.label.reader_type")}),e.jsxs(M,{variant:"standard",value:i,onChange:a=>s("readerType",a.target.value),sx:{p:0},children:[e.jsx(h,{value:"SingleLTR",children:n("reader.settings.reader_type.label.single_page_ltr")}),e.jsx(h,{value:"SingleRTL",children:n("reader.settings.reader_type.label.single_page_rtl")}),e.jsx(h,{value:"DoubleLTR",children:n("reader.settings.reader_type.label.double_page_ltr")}),e.jsx(h,{value:"DoubleRTL",children:n("reader.settings.reader_type.label.double_page_rtl")}),e.jsx(h,{value:"Webtoon",children:n("reader.settings.reader_type.label.webtoon")}),e.jsx(h,{value:"ContinuesVertical",children:n("reader.settings.reader_type.label.continuous_vertical")}),e.jsx(h,{value:"ContinuesHorizontalLTR",children:n("reader.settings.reader_type.label.continuous_horizontal_ltr")}),e.jsx(h,{value:"ContinuesHorizontalRTL",children:n("reader.settings.reader_type.label.continuous_horizontal_rtl")})]})]})]})}export{U as P,q as R,G as g,O as u};
