!function(){function e(t){return e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e(t)}var t=["page","pagesIndex","isCurrentPage","isLeadingPage","isTrailingPage","totalPages","showDraggingStyle","primaryPageLoadState","secondaryPageLoadState","createProgressBarSlot"],r=["direction"],n=["title","type","disabled"],i=["pageScaleMode","shouldStretchPage","updateSetting"],o=["readingMode","setReadingMode"],a=["readingDirection","setReadingDirection"];function s(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=y(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,i=function(){};return{s:i,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==r.return||r.return()}finally{if(s)throw o}}}}function u(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(-1!==t.indexOf(n))continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],-1===t.indexOf(r)&&{}.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function l(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */var e,t,r="function"==typeof Symbol?Symbol:{},n=r.iterator||"@@iterator",i=r.toStringTag||"@@toStringTag";function o(r,n,i,o){var u=n&&n.prototype instanceof s?n:s,l=Object.create(u.prototype);return c(l,"_invoke",function(r,n,i){var o,s,u,l=0,c=i||[],d=!1,p={p:0,n:0,v:e,a:f,f:f.bind(e,4),d:function(t,r){return o=t,s=0,u=e,p.n=r,a}};function f(r,n){for(s=r,u=n,t=0;!d&&l&&!i&&t<c.length;t++){var i,o=c[t],f=p.p,h=o[2];r>3?(i=h===n)&&(u=o[(s=o[4])?5:(s=3,3)],o[4]=o[5]=e):o[0]<=f&&((i=r<2&&f<o[1])?(s=0,p.v=n,p.n=o[1]):f<h&&(i=r<3||o[0]>n||n>h)&&(o[4]=r,o[5]=n,p.n=h,s=0))}if(i||r>1)return a;throw d=!0,n}return function(i,c,h){if(l>1)throw TypeError("Generator is already running");for(d&&1===c&&f(c,h),s=c,u=h;(t=s<2?e:u)||!d;){o||(s?s<3?(s>1&&(p.n=-1),f(s,u)):p.n=u:p.v=u);try{if(l=2,o){if(s||(i="next"),t=o[i]){if(!(t=t.call(o,u)))throw TypeError("iterator result is not an object");if(!t.done)return t;u=t.value,s<2&&(s=0)}else 1===s&&(t=o.return)&&t.call(o),s<2&&(u=TypeError("The iterator does not provide a '"+i+"' method"),s=1);o=e}else if((t=(d=p.n<0)?u:r.call(n,p))!==a)break}catch(t){o=e,s=1,u=t}finally{l=1}}return{value:t,done:d}}}(r,i,o),!0),l}var a={};function s(){}function u(){}function d(){}t=Object.getPrototypeOf;var p=[][n]?t(t([][n]())):(c(t={},n,function(){return this}),t),f=d.prototype=s.prototype=Object.create(p);function h(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,d):(e.__proto__=d,c(e,i,"GeneratorFunction")),e.prototype=Object.create(f),e}return u.prototype=d,c(f,"constructor",d),c(d,"constructor",u),u.displayName="GeneratorFunction",c(d,i,"GeneratorFunction"),c(f),c(f,i,"Generator"),c(f,n,function(){return this}),c(f,"toString",function(){return"[object Generator]"}),(l=function(){return{w:o,m:h}})()}function c(e,t,r,n){var i=Object.defineProperty;try{i({},"",{})}catch(e){i=0}c=function(e,t,r,n){function o(t,r){c(e,t,function(e){return this._invoke(t,r,e)})}t?i?i(e,t,{value:r,enumerable:!n,configurable:!n,writable:!n}):e[t]=r:(o("next",0),o("throw",1),o("return",2))},c(e,t,r,n)}function d(e,t,r,n,i,o,a){try{var s=e[o](a),u=s.value}catch(e){return void r(e)}s.done?t(u):Promise.resolve(u).then(n,i)}function p(e){return function(){var t=this,r=arguments;return new Promise(function(n,i){var o=e.apply(t,r);function a(e){d(o,n,i,a,s,"next",e)}function s(e){d(o,n,i,a,s,"throw",e)}a(void 0)})}}function f(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function h(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,C(n.key),n)}}function g(e,t,r){return t&&h(e.prototype,t),r&&h(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function v(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function x(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?v(Object(r),!0).forEach(function(t){m(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):v(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function m(e,t,r){return(t=C(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function C(t){var r=function(t,r){if("object"!=e(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var i=n.call(t,r||"default");if("object"!=e(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(t)}(t,"string");return"symbol"==e(r)?r:r+""}function b(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,i,o,a,s=[],u=!0,l=!1;try{if(o=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=o.call(r)).done)&&(s.push(n.value),s.length!==t);u=!0);}catch(e){l=!0,i=e}finally{try{if(!u&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(l)throw i}}return s}}(e,t)||y(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function S(e){return function(e){if(Array.isArray(e))return P(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||y(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function y(e,t){if(e){if("string"==typeof e)return P(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?P(e,t):void 0}}function P(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}System.register(["./index-legacy-Dwi21jkJ.js","./ReaderSettingsTabs-legacy-VqgEltYC.js","./Strings-legacy-CzJ32ydF.js","./Chapters-legacy-B4DAthnw.js","./PushPin-legacy-DHXiwHHh.js","./PushPinOutlined-legacy-lelLnRmX.js","./Link-legacy-DfE6A12g.js","./Select-legacy-yMf1yNjv.js","./useManageMangaLibraryState-legacy-Yn9lkTQh.js","./index-legacy-DvPAgFEW.js","./ChapterListCard-legacy-Bw3Qo9V-.js","./Download-legacy-US48yok7.js","./Delete-legacy-CngZPbnb.js","./ChapterCardMetadata-legacy-BH7ZasmN.js","./IconWebView-legacy-CU0Lh1dB.js","./Mangas-legacy-BnDPZHJM.js","./CheckboxInput-legacy-BdaCkZJz.js","./EmptyViewAbsoluteCentered-legacy-BG9A-Ezr.js","./SpinnerImage-legacy-BkuygVgL.js","./use-window-event-legacy-COXpLWUr.js","./use-merged-ref-legacy-w_DeAfjV.js","./useAppTitle-legacy-Bp10ECk-.js","./TabsMenu-legacy-DVZDzeTz.js","./Tabs-legacy-AjSLQU9Q.js","./Slider-legacy-WkJFIUD7.js","./ListSubheader-legacy-CevTSjh4.js","./Add-legacy-Dda_PNBd.js","./DateHelper-legacy-Cg6J_ucF.js","./Asserts-legacy-CWE3_MKu.js","./ThreeStateCheckboxInput-legacy-BY18RMov.js","./Checkbox-legacy-C_VJg--M.js","./SwitchBase-legacy-DuTc-SNB.js","./FormGroup-legacy-CDtEsSfE.js","./DoneAll-legacy-CnXbRwhs.js","./MUI.util-legacy-D9xMlHDR.js","./ListCardContent-legacy-DybELF4d.js","./Card-legacy-BHU0Y-W3.js","./CardActionArea-legacy-t-CLy5Tw.js","./Refresh-legacy-D988t_t3.js","./Image-legacy-DmKVBvsQ.js"],function(e,c){"use strict";var d,h,v,C,y,P,j,w,T,I,E,M,D,O,R,k,L,A,N,B,_,W,H,V,z,U,F,G,X,Y,Z,q,K,J,Q,$,ee,te,re,ne,ie,oe,ae,se,ue,le,ce,de,pe,fe,he,ge,ve,xe,me,Ce,be,Se,ye,Pe,je,we,Te,Ie,Ee,Me,De,Oe,Re,ke,Le,Ae,Ne,Be,_e,We,He,Ve,ze,Ue,Fe,Ge,Xe,Ye,Ze,qe,Ke,Je,Qe,$e,et,tt,rt,nt,it,ot,at,st,ut,lt,ct,dt,pt,ft,ht,gt,vt,xt,mt,Ct,bt,St,yt,Pt,jt,wt,Tt,It,Et,Mt,Dt,Ot,Rt,kt,Lt,At,Nt,Bt,_t,Wt,Ht,Vt,zt,Ut,Ft,Gt,Xt,Yt,Zt,qt,Kt,Jt,Qt,$t,er,tr,rr,nr,ir,or,ar,sr,ur,lr,cr,dr,pr,fr,hr,gr,vr,xr,mr,Cr,br,Sr,yr,Pr,jr,wr,Tr,Ir,Er,Mr,Dr,Or,Rr,kr,Lr,Ar,Nr,Br,_r,Wr,Hr,Vr,zr,Ur,Fr,Gr,Xr,Yr,Zr,qr,Kr,Jr,Qr,$r;return{setters:[function(e){d=e.eu,h=e.f,v=e.ev,C=e.j,y=e.o,P=e.b3,j=e.q,w=e.eq,T=e.J,I=e.dP,E=e.eb,M=e.b,D=e.H,O=e.T,R=e.b8,k=e.ew,L=e.a7,A=e.a9,N=e.Y,B=e.ae,_=e.C,W=e.ex,H=e.e5,V=e.ey,z=e.G,U=e.ek,F=e.ez,G=e.eA,X=e.k,Y=e.aD,Z=e.dU,q=e.bx,K=e.dM,J=e.e,Q=e.c1,$=e.cF,ee=e.dR,te=e.dS,re=e.Q,ne=e.dv,ie=e.cB,oe=e.eB,ae=e.eC,se=e.dw,ue=e.a6,le=e.eD,ce=e.b9,de=e.eE,pe=e.aY,fe=e.A,he=e.L,ge=e.c,ve=e.u,xe=e.aZ,me=e.aq,Ce=e.ar,be=e.ap,Se=e.cs,ye=e.aA,Pe=e.b1,je=e.b2,we=e.B,Te=e.e8,Ie=e.e6,Ee=e.e7,Me=e.e1,De=e.e2,Oe=e.ea,Re=e.eF,ke=e.eG,Le=e.aC,Ae=e.ei,Ne=e.aw,Be=e.dN,_e=e.x,We=e.I,He=e.r,Ve=e.a_,ze=e.a$,Ue=e.am,Fe=e.i,Ge=e.ay,Xe=e.eH,Ye=e.bA,Ze=e.bi,qe=e.m,Ke=e.dO,Je=e.aB,Qe=e.eI,$e=e.cR,et=e.bF,tt=e.eJ,rt=e.eK,nt=e.bP,it=e.g,ot=e.dT,at=e.af,st=e.c2,ut=e.aX,lt=e.en,ct=e.al,dt=e.eL,pt=e.h,ft=e.aE,ht=e.eM,gt=e.eN},function(e){vt=e.b,xt=e.R,mt=e.a,Ct=e.w,bt=e.c,St=e.d,yt=e.e,Pt=e.g,jt=e.f,wt=e.i,Tt=e.h,It=e.j,Et=e.k,Mt=e.l,Dt=e.m,Ot=e.n,Rt=e.o,kt=e.p,Lt=e.q,At=e.r,Nt=e.s,Bt=e.t,_t=e.v,Wt=e.x,Ht=e.y,Vt=e.z,zt=e.A,Ut=e.S,Ft=e.B,Gt=e.C,Xt=e.D,Yt=e.E,Zt=e.F,qt=e.G,Kt=e.H,Jt=e.I,Qt=e.J,$t=e.K,er=e.L,tr=e.M,rr=e.N,nr=e.O,ir=e.P,or=e.Q,ar=e.T,sr=e.U,ur=e.V,lr=e.W,cr=e.X,dr=e.Y,pr=e.Z,fr=e._,hr=e.$,gr=e.a0,vr=e.a1,xr=e.a2,mr=e.a3,Cr=e.a4,br=e.a5,Sr=e.a6,yr=e.a7,Pr=e.a8},function(e){jr=e.r},function(e){wr=e.a,Tr=e.C,Ir=e.F},function(e){Er=e.P},function(e){Mr=e.P},function(e){Dr=e.L},function(e){Or=e.S},function(e){Rr=e.C,kr=e.u,Lr=e.F,Ar=e.M,Nr=e.f,Br=e.l},function(e){_r=e.q},function(e){Wr=e.C,Hr=e.B,Vr=e.I},function(e){zr=e.D},function(e){Ur=e.D},function(e){Fr=e.D},function(e){Gr=e.F,Xr=e.I},function(e){Yr=e.F},function(e){Zr=e.C},function(e){qr=e.E},function(e){Kr=e.u},function(e){Jr=e.u},function(e){Qr=e.u},function(e){$r=e.u},null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null],execute:function(){var c=function(e){var t,r,n,i,o,a,s=e.isOpen,u=e.close,l=vt(function(e){return e});t=s,r=d(),n=r.activeScopes,i=r.enableScope,o=r.disableScope,a=h.useRef([]),h.useEffect(function(){return t?(a.current=S(n),i(v.NONE),a.current.forEach(o),function(){o(v.NONE),a.current.forEach(i)}):function(){}},[t]);var c=b(h.useState(0),2),p=c[0],f=c[1],g=b(h.useState(!1),2),m=g[0],T=g[1];return s?C.jsx(y,{open:s,maxWidth:"md",fullWidth:!0,onClose:u,hideBackdrop:p===w.FILTER,sx:x({},P(m,{opacity:.75})),children:C.jsx(j,{sx:{p:0},children:C.jsx(xt,{activeTab:p,setActiveTab:f,settings:l,updateSetting:function(){var e;return(e=mt).updateSetting.apply(e,arguments)},deleteSetting:function(){var e;return(e=mt).deleteSetting.apply(e,arguments)},setTransparent:T})})}):null},en=Ct(function(e){var t=e.isDesktop,r=e.readerNavBarWidth,n=bt(function(e){return e}),i=St(function(e){return{currentPageIndex:e.currentPageIndex,pages:e.pages,totalPages:e.totalPages}}),o=i.currentPageIndex,a=i.pages,s=i.totalPages,u=vt(function(e){return{readingDirection:e.readingDirection.value,shouldShowPageNumber:e.shouldShowPageNumber,progressBarType:e.progressBarType}}),l=u.readingDirection,c=u.shouldShowPageNumber,d=u.progressBarType,p=yt(function(e){return e.isMaximized}),f=h.useMemo(function(){var e=Pt(o,a).name,t="".concat(e).concat("/").concat(s);return l===I.LTR?t:jr(t,"/")},[o,a,s,l]);return c?p||t&&d===E.STANDARD||p&&d===E.HIDDEN?null:C.jsx(M,{sx:{position:"fixed",left:r,right:0,bottom:function(e){return"max(calc(".concat(e.spacing(1)," + ").concat(n.xSize,"px), env(safe-area-inset-bottom))")},alignItems:"center",transition:function(e){return"left 0.".concat(e.transitions.duration.shortest,"s")}},children:C.jsx(D,{sx:{p:.5,borderRadius:1,backgroundColor:"rgba(0, 0, 0, 0.3)"},children:C.jsx(O,{sx:{color:"white"},children:f})})}):null},[mt.useOverlayMode,T],["isDesktop","readerNavBarWidth"]);function tn(e){return e.substring(2).toLowerCase()}function rn(e){var t=e.children,r=e.disableReactTree,n=void 0!==r&&r,i=e.mouseEvent,o=void 0===i?"onClick":i,a=e.onClickAway,s=e.touchEvent,u=void 0===s?"onTouchEnd":s,l=h.useRef(!1),c=h.useRef(null),d=h.useRef(!1),p=h.useRef(!1);h.useEffect(function(){return setTimeout(function(){d.current=!0},0),function(){d.current=!1}},[]);var f=R(k(t),c),g=L(function(e){var t=p.current;p.current=!1;var r=A(c.current);!d.current||!c.current||"clientX"in e&&function(e,t){return t.documentElement.clientWidth<e.clientX||t.documentElement.clientHeight<e.clientY}(e,r)||(l.current?l.current=!1:(e.composedPath?e.composedPath().includes(c.current):!r.documentElement.contains(e.target)||c.current.contains(e.target))||!n&&t||a(e))}),v=function(e){return function(r){p.current=!0;var n=t.props[e];n&&n(r)}},x={ref:f};return!1!==u&&(x[u]=v(u)),h.useEffect(function(){if(!1!==u){var e=tn(u),t=A(c.current),r=function(){l.current=!0};return t.addEventListener(e,g),t.addEventListener("touchmove",r),function(){t.removeEventListener(e,g),t.removeEventListener("touchmove",r)}}},[g,u]),!1!==o&&(x[o]=v(o)),h.useEffect(function(){if(!1!==o){var e=tn(o),t=A(c.current);return t.addEventListener(e,g),function(){t.removeEventListener(e,g)}}},[g,o]),h.cloneElement(t,x)}var nn=N(O)({boxSizing:"content-box",display:"flex",justifyContent:"center",alignItems:"center",overflow:"hidden",textAlign:"center",userSelect:"none",cursor:"pointer",WebkitTapHighlightColor:"transparent"}),on=N(M,{shouldForwardProp:B(["progressBarPosition"])})(function(e){var t=e.theme,r=e.progressBarPosition;return x(x(x(x(x({position:"fixed",pointerEvents:"all",touchAction:"none"},P(jt(r).isHorizontal,{justifyContent:"flex-end",bottom:0,right:0})),P(jt(r).isVertical,{top:0,bottom:0})),P(jt(r).isLeft,{alignItems:"ltr"===t.direction?"flex-start":"flex-end"})),P(jt(r).isRight,{alignItems:"ltr"===t.direction?"flex-end":"flex-start"})),{},{WebkitTapHighlightColor:"transparent"})}),an=N(M)(function(e){return{flexDirection:"row",justifyContent:"center",alignItems:"center",gap:e.theme.spacing(.5)}}),sn=N(M)({flexDirection:"row",flexGrow:1,overflow:"hidden"}),un=N(D,{shouldForwardProp:B(["currentPagesIndex","pagesLength","progressBarPosition"])})(function(e){var t=e.currentPagesIndex,r=e.pagesLength,n=e.progressBarPosition;return x(x({position:"absolute",pointerEvents:"none"},P(jt(n).isHorizontal,{left:0,width:"".concat((t+1)/r*100,"%"),height:"100%"})),P(jt(n).isVertical,{top:0,width:"100%",height:"".concat((t+1)/r*100,"%")}))}),ln=function(e){var t=e.pageName,r=e.currentPagesIndex,n=e.pagesLength,i=e.isDragging,o=e.boxProps,a=e.children,s=e.progressBarPosition;return C.jsx(_,{title:t,slotProps:{tooltip:{sx:{backgroundColor:"primary.main",color:"primary.contrastText"}}},placement:W[s],disableTouchListener:!0,children:C.jsx(D,x(x({},o),{},{sx:x(x(x({position:"absolute",cursor:i?"grabbing":"grab"},P(jt(s).isHorizontal,{left:"".concat(Math.max(0,r-1)/(n-1)*100,"%"),width:"calc(100% / ".concat(n-1,")"),height:"100%"})),P(jt(s).isVertical,{top:"".concat(Math.max(0,r-1)/(n-1)*100,"%"),width:"100%",height:"calc(100% / ".concat(n-1,")")})),null==o?void 0:o.sx),children:a}))})},cn=N(M)({position:"relative",flexDirection:"row",flexGrow:1}),dn=m(m(m(m(m({},H.EDGE,[{rect:[0,0,100,33.33],type:V.NEXT},{rect:[0,33.33,33.33,66.66],type:V.NEXT},{rect:[66.66,33.33,33.33,66.66],type:V.NEXT},{rect:[33.33,33.33,33.33,33.33],type:V.MENU},{rect:[33.33,66.66,33.33,33.33],type:V.PREVIOUS}]),H.KINDLE,[{rect:[0,0,100,33.33],type:V.MENU},{rect:[0,33.33,33.33,66.66],type:V.PREVIOUS},{rect:[33.33,33.33,66.66,66.66],type:V.NEXT}]),H.L_SHAPE,[{rect:[0,0,100,33.33],type:V.PREVIOUS},{rect:[0,33.33,33.33,33.33],type:V.PREVIOUS},{rect:[33.33,33.33,33.33,33.33],type:V.MENU},{rect:[66.66,33.33,33.33,33.33],type:V.NEXT},{rect:[0,66.66,100,33.33],type:V.NEXT}]),H.RIGHT_LEFT,[{rect:[0,0,33.33,100],type:V.PREVIOUS},{rect:[33.33,0,33.33,100],type:V.MENU},{rect:[66.66,0,33.33,100],type:V.NEXT}]),H.DISABLED,[{rect:[0,0,100,100],type:V.MENU}]),pn=m(m(m({},V.PREVIOUS,{text:{id:"DHhJ7s"},color:"rgba(255, 114, 118, .5)"}),V.NEXT,{text:{id:"hXzOVo"},color:"rgba(144, 238, 144, .5)"}),V.MENU,{text:{id:"zucql+"},color:"rgba(0, 0, 0, .5)"}),fn=function(){return g(function e(){f(this,e)},null,[{key:"invertRect",value:function(e,t){var r=t.vertical,n=t.horizontal,i=t.isRTL,o=r?this.invertVertical(e):e,a=n?this.invertHorizontal(o):o;return i?this.invertHorizontal(a):a}},{key:"getRegions",value:function(e,t){var r=this;return dn[e].map(function(e){var n=e.type,i=e.rect;return{type:n,rect:r.invertRect(i,t)}})}},{key:"isCanvasReusable",value:function(e,t,r,n,i){var o,a=this.layout===e,s=this.width===t,u=this.height===r,l=!!this.canvas,c=this.language===z.locale,d=(null===(o=this.invertMode)||void 0===o?void 0:o.vertical)===i.vertical&&this.invertMode.horizontal===i.horizontal&&this.invertMode.isRTL===i.isRTL,p=this.fontStyle===n;return l&&s&&u&&a&&c&&d&&p}},{key:"drawCanvas",value:function(e,t,r,n,i){i.forEach(function(i){var o=i.type,a=b(i.rect,4),s=a[0],u=a[1],l=a[2],c=a[3],d=pn[o],p=d.text,f=d.color,h=z._(p),g=function(e,t){return e/100*t},v=g(s,t),x=g(u,r),m=g(l,t),C=g(c,r),S=function(e,t){return.5*(e+t)+.5*e},y=S(v,m),P=S(x,C);e.beginPath(),e.rect(v,x,m,C),e.fillStyle=f,e.strokeStyle=f,e.lineWidth=.1,e.stroke(),e.fill(),e.strokeStyle="black",e.textAlign="center",e.textBaseline="middle",e.font="".concat(n.fontSize," ").concat(n.fontFamily),e.strokeStyle="black",e.lineWidth=3,e.strokeText(h,y,P),e.lineWidth=1,e.fillStyle="white",e.fillText(h,y,P)})}},{key:"getOrCreateCanvas",value:function(e,t,r,n,i){if(this.isCanvasReusable(e,t,r,n,i))return this.canvas;var o=document.createElement("canvas"),a=o.getContext("2d");a.canvas.width=t,a.canvas.height=r;var s=this.getRegions(e,i);return this.drawCanvas(a,t,r,n,s),this.layout=e,this.canvas=o,this.width=t,this.height=r,this.language=z.locale,this.invertMode=i,this.regions=s,this.fontStyle=n,o}},{key:"doesRegionContainPos",value:function(e,t,r){var n=b(e.rect,4),i=n[0],o=n[1],a=n[2],s=n[3];return t>=i&&t<=i+a&&r>=o&&r<=o+s}},{key:"getAction",value:function(e,t){var r,n=this,i=e/this.width*100,o=t/this.height*100,a=null===(r=this.regions)||void 0===r?void 0:r.find(function(e){return n.doesRegionContainPos(e,i,o)});return a?a.type:V.MENU}}])}();m(fn,"layout",null),m(fn,"canvas",null),m(fn,"width",null),m(fn,"height",null),m(fn,"language",null),m(fn,"invertMode",null),m(fn,"regions",null),m(fn,"fontStyle",null),m(fn,"invertVertical",function(e){var t=b(e,4),r=t[0],n=t[1],i=t[2],o=t[3];return[r,100-(n+o),i,o]}),m(fn,"invertHorizontal",function(e){var t=b(e,4),r=t[0],n=t[1],i=t[2];return[100-(r+i),n,i,t[3]]});var hn=function(){function e(){f(this,e)}return g(e,null,[{key:"scroll",value:function(t,r,n,i,o){var a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:U.LARGE;if(o){var s=Z[i],u=F().direction===s,l=wt(n),c=Math.abs(o.scrollTop)<=1,d=Math.floor(o.scrollTop)===o.scrollHeight-o.clientHeight||Math.ceil(o.scrollTop)===o.scrollHeight-o.clientHeight,p=Math.abs(o.scrollLeft)<=1,f=o.scrollWidth-o.clientWidth-Math.floor(Math.abs(o.scrollLeft))<=1||o.scrollWidth-o.clientWidth-Math.ceil(Math.abs(o.scrollLeft))<=1,h=u?p:f,g=u?f:p,v=a/100,m=function(e,t,r){if(e===G.X){if(t===te.BACKWARD)return"ltr"===r?-1:1;if(t===te.FORWARD)return"ltr"===r?1:-1}return t===te.BACKWARD?-1:1}(r,t,s),C=function(e,t){return e+t*v*m};Tt().setIsVisible(!1),It().setShowPreview(!1);var b=function(r,n,i){r&&t===te.BACKWARD&&l?e.openChapter("previous"):n&&t===te.FORWARD&&l?e.openChapter("next"):o.scroll(x(x({},i),{},{behavior:"smooth"}))};switch(r){case G.X:b(h,g,{left:C(o.scrollLeft,o.clientWidth)});break;case G.Y:b(c,d,{top:C(o.scrollTop,o.clientHeight)});break;default:throw new Error('Unexpected "ScrollDirection" ('.concat(r,")"))}}}},{key:"openChapter",value:function(t){var r=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],i=Et(),o=i.currentChapter,a=i.previousChapter,s=i.nextChapter,u=i.chapters,c=i.visibleChapters,d=c.lastLeadingChapterSourceOrder,f=c.lastTrailingChapterSourceOrder,h=i.setReaderStateChapters,g=Mt(),v=g.shouldInformAboutMissingChapter,x=g.shouldInformAboutScanlatorChange,m=g.shouldUseInfiniteScroll;if(o){var C="number"==typeof t,b="previous"===t;if(C||b&&!!a||!b&&!!s){var S=function(){var i=p(l().m(function i(){var c,p,g,S,y;return l().w(function(i){for(;;)switch(i.p=i.n){case 0:if(c=function(){return C?u.find(function(e){return e.id===t}):b?a:s}()){i.n=1;break}return i.a(2);case 1:if(p=c.sourceOrder<o.sourceOrder,i.p=2,!r){i.n=3;break}return i.n=3,e.checkNextChapterConsistency(p?"previous":"next",o,c,v,x);case 3:g=d<=c.sourceOrder&&f>=c.sourceOrder,(S=m&&(!n||g))&&h(function(e){return Bt(p,e,c.sourceOrder,n,!p&&void 0,!!p&&void 0)}),mt.navigateToChapter(c,{resumeMode:_t(C||!S,p),updateInitialChapter:!S}),i.n=5;break;case 4:i.p=4,y=i.v,X("ReaderControls#useOpenChapter#doOpenChapter:")(y);case 5:return i.a(2)}},i,null,[[2,4]])}));return function(){return i.apply(this,arguments)}}();S().catch(X("ReaderControls#useOpenChapter"))}}}},{key:"checkNextChapterConsistency",value:(t=p(l().m(function e(t,r,n,i,o){var a,s,u,c,d,p,f,h;return l().w(function(e){for(;;)switch(e.n){case 0:if(r&&n){e.n=1;break}return e.a(2);case 1:if(a=wr.getGap(r,n),s=!o||r.scanlator===n.scanlator,u=!i||!a,!s||!u){e.n=2;break}return e.a(2);case 2:return c={previous:{scanlator:{id:"dDQ7od"},chapter_number:{id:"P0p2jp"}},next:{scanlator:{id:"AwNAqo"},chapter_number:{id:"jN+b67"}}},d=s?"":z.t(x(x({},c[t].scanlator),{},{values:{nextScanlator:n.scanlator,currentScanlator:r.scanlator}})),p=u?"":z.t(x(x({},c[t].chapter_number),{},{values:{count:a,nextChapter:"#".concat(n.chapterNumber," ").concat(n.name),currentChapter:"#".concat(r.chapterNumber," ").concat(r.name)}})),f=s||u?"":"\n\n",h="".concat(d).concat(f).concat(p),e.n=3,Y.show({title:z._({id:"Mx1mqC"}),message:h,actions:{confirm:{title:z._({id:"1TNIig"})}}});case 3:return e.a(2)}},e)})),function(e,r,n,i,o){return t.apply(this,arguments)})},{key:"openPage",value:function(t,r){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],i=Dt(),o=i.currentPageIndex,a=i.setPageToScrollToIndex,s=i.pages,u=i.transitionPageMode,l=i.setTransitionPageMode,c=Mt(),d=c.readingDirection,p=c.readingMode,f=c.shouldShowTransitionPage,h=Z[d.value],g=q(t,"previous"===t?"next":"previous",null!=r?r:h),v=Pt(o,s),x=Ot("previous",v.pagesIndex,s),m=Ot("next",v.pagesIndex,s),C=Rt(s[0]),b=Rt(s[s.length-1]),S=0===v.primary.index,y=o===b,P=kt(u,p.value),j=wt(p.value);n&&(Tt().setIsVisible(!1),It().setShowPreview(!1));var w=function(){return l(K.NONE)};if("number"==typeof t)return a(t),void w();var T=j&&P,I=!j&&u===K.PREVIOUS||T,E=!j&&u===K.NEXT||T;if(!S||f&&!I||"previous"!==g||!Et().previousChapter)if(y&&(!f||E)&&"next"===g&&!!Et().nextChapter)e.openChapter("next");else{var M="previous"===g,D="next"===g;if(P&&!j&&(I&&D||E&&M))return w(),void a(I?C:b);(S&&M||y&&D)&&!j?l(M?K.PREVIOUS:K.NEXT):a(M?x:m)}else e.openChapter("previous")}},{key:"useUpdateCurrentPageIndex",value:function(){var t=mt.useUpdateChapter(),r=J().settings.downloadAheadLimit;return h.useCallback(function(n){var i=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],o=arguments.length>2&&void 0!==arguments[2]&&arguments[2],a=Dt(),s=a.currentPageIndex,u=a.setCurrentPageIndex,l=Et(),c=l.currentChapter,d=l.chapters,p=l.previousChapter,f=l.nextChapter,h=l.visibleChapters;if((n!==s||o)&&(u(n),c)){var g=wr.getNextChapters(c,d,{offset:Q.NEXT}),v=s>n?Q.PREVIOUS:Q.NEXT;mt.downloadAhead(c,f,g,n,r),mt.preloadChapter(n,c.pageCount,v===Q.NEXT?f:p,h.lastLeadingChapterSourceOrder,h.lastTrailingChapterSourceOrder,v);var x=function(){var e=Wt(c.id);if(e){var r=o?e.pageCount-1:n,i=r===e.pageCount-1;t({lastPageRead:r,isRead:!!i||void 0})}};clearTimeout(e.updateCurrentPageTimeout),i?e.updateCurrentPageTimeout=setTimeout(x,$(1).seconds.inWholeMilliseconds):x()}},[r])}},{key:"updateCurrentPageOnScroll",value:function(e,t,r,n,i){var o,a,s,u=Z[i],l=null!==(o=null===(a=Lt().autoScroll.scrollRef)||void 0===a||null===(a=a.current)||void 0===a?void 0:a.getBoundingClientRect().x)&&void 0!==o?o:0,c=q(l+1,window.innerWidth+1,u),d=e.current.findIndex(function(e){return e&&At(e,n,{truncateValues:!0,thresholds:{bottom:1,left:q(0,c,u),right:q(c,0,u)}})}),p=null===(s=e.current)||void 0===s?void 0:s[e.current.length-1],f=p&&Nt(p,n,i);-1!==d&&(f?r(d,!1,!0):r(d,d!==t))}},{key:"handleClick",value:function(t,r){if(t){var n=Mt(),i=n.readingMode,o=n.readingDirection,a=n.isStaticNav,s=n.scrollAmount,u=r.currentTarget.getBoundingClientRect(),l=r.clientX-u.left,c=r.clientY-u.top,d=fn.getAction(l,c);It().setShowPreview(!1);var p=wt(i.value),f=i.value===ee.CONTINUOUS_HORIZONTAL?G.X:G.Y;switch(d){case V.MENU:Tt().setIsVisible(a||!Tt().isVisible);break;case V.PREVIOUS:case V.NEXT:p?e.scroll(d===V.PREVIOUS?te.BACKWARD:te.FORWARD,f,i.value,o.value,t,s):e.openPage(d===V.PREVIOUS?"previous":"next","ltr");break;default:throw new Error('Unexpected "TapZoneRegionType" ('.concat(d,")"))}}}},{key:"useHandleProgressDragging",value:function(t,r,n,i,o,a,s){h.useEffect(function(){if(!r)return function(){};var u=jt(o).isHorizontal,l=function(r){if(t.current){var o=Rt(Ht(r,t.current,i,u,s,a));Rt(n)!==o&&e.openPage(o,void 0,!1)}},c=function(e){l(e)},d=function(e){e.touches.length>0&&l(e.touches[0])};return document.addEventListener("mousemove",c,{passive:!0}),document.addEventListener("touchmove",d,{passive:!0}),function(){document.removeEventListener("mousemove",c),document.removeEventListener("touchmove",d)}},[r,n,i,o])}}]);var t}();m(hn,"updateCurrentPageTimeout",void 0);var gn=h.memo(N(D,{shouldForwardProp:B(["isFirstPage","isLastPage"])})(function(e){return{flexGrow:1,height:"100%",cursor:"pointer",borderLeftWidth:e.isFirstPage?0:void 0,borderRightWidth:e.isLastPage?0:void 0}})),vn=h.memo(function(e){var r=e.page,n=e.pagesIndex,i=e.isCurrentPage,o=e.isLeadingPage,a=e.isTrailingPage,s=e.totalPages,l=e.showDraggingStyle,c=e.primaryPageLoadState,d=e.secondaryPageLoadState,p=e.createProgressBarSlot,f=u(e,t),g=h.useMemo(function(){return p(r,n,c,d,i,o,a,s,l)},[p,r,n,c,d,i,o,a,s,l]);return C.jsx(gn,x(x({},f),{},{isFirstPage:0===n,isLastPage:n===s-1,children:g}))}),xn=function(e){var t,r,n,i,o,a,s,u,l,c,d,p,f,g,v,m,y,P,j,w,T=e.slotProps,I=e.slots,E=e.createProgressBarSlot,M=e.progressBarPosition,D=e.direction,O=e.fullSegmentClicks,R=St(function(e){return{pages:e.pages,pageLoadStates:e.pageLoadStates,totalPages:e.totalPages,currentPageIndex:e.currentPageIndex}}),k=R.pages,L=R.pageLoadStates,A=R.totalPages,N=R.currentPageIndex,B=vt(function(e){return e.readingMode.value}),_=yt(function(e){return e.isDragging}),W=h.useRef(null),H=h.useRef(void 0),V=b(h.useState(0),2),z=V[0],U=V[1],F=h.useRef(null);re(F,h.useCallback(function(){var e=F.current;if(e){var t=getComputedStyle(e),r=t.paddingLeft,n=t.paddingRight,i=e.clientWidth-parseFloat(r)-parseFloat(n),o=B===ee.DOUBLE_PAGE?2*i+6:i;U(o)}},[B]));var G=h.useMemo(function(){return Pt(N,k).pagesIndex},[N,k]),X=jt(M).isHorizontal,Y=h.useMemo(function(){return Pt(N,k)},[N,k]),Z=h.useCallback(function(){return q(arguments.length<=0?void 0:arguments[0],arguments.length<=1?void 0:arguments[1],D)},[D]);hn.useHandleProgressDragging(W,_,Y,k,M,Z,O);var K=function(e){if(W.current){var t="touches"in e;hn.openPage(Rt(Ht(t?e.touches[0]:e,W.current,k,X,O,Z)),void 0,!1),clearTimeout(H.current),H.current=setTimeout(function(){return Vt().setIsDragging(!0)},250)}},J=function(){Vt().setIsDragging(!1),clearTimeout(H.current)};return C.jsx(on,x(x({},null==T?void 0:T.container),{},{progressBarPosition:M,children:C.jsxs(an,x(x({},null==T?void 0:T.progressBarRoot),{},{children:[C.jsx(nn,x(x(x({},null==T||null===(t=T.progressBarPageTexts)||void 0===t?void 0:t.base),null==T||null===(r=T.progressBarPageTexts)||void 0===r?void 0:r.current),{},{sx:[{width:"".concat(z,"px")}].concat(S(Array.isArray(null==T||null===(n=T.progressBarPageTexts)||void 0===n||null===(n=n.base)||void 0===n?void 0:n.sx)?null!==(i=null==T||null===(o=T.progressBarPageTexts)||void 0===o||null===(o=o.base)||void 0===o?void 0:o.sx)&&void 0!==i?i:[]:[null==T||null===(a=T.progressBarPageTexts)||void 0===a||null===(a=a.base)||void 0===a?void 0:a.sx]),S(Array.isArray(null==T||null===(s=T.progressBarPageTexts)||void 0===s||null===(s=s.current)||void 0===s?void 0:s.sx)?null!==(u=null==T||null===(l=T.progressBarPageTexts)||void 0===l||null===(l=l.current)||void 0===l?void 0:l.sx)&&void 0!==u?u:[]:[null==T||null===(c=T.progressBarPageTexts)||void 0===c||null===(c=c.current)||void 0===c?void 0:c.sx])),onClick:function(){return hn.openPage("previous","ltr",!1)},children:Y.name})),C.jsx(rn,{onClickAway:function(){return Vt().setIsDragging(!1)},children:C.jsxs(cn,x(x({},null==T?void 0:T.progressBarSlotsActionArea),{},{onMouseDown:K,onMouseUp:J,onTouchStart:K,onTouchEnd:J,children:[C.jsxs(sn,x(x({ref:W},null==T?void 0:T.progressBarSlotsContainer),{},{children:[k.map(function(e,t){return h.createElement(vn,x(x({},null==T?void 0:T.progressBarSlot),{},{key:e.primary.index,page:e,pagesIndex:t,isCurrentPage:t===G,isLeadingPage:t<G,isTrailingPage:t>G,totalPages:k.length,primaryPageLoadState:L[e.primary.index].loaded,secondaryPageLoadState:e.secondary?L[e.secondary.index].loaded:void 0,createProgressBarSlot:E,showDraggingStyle:t===G&&_}))}),C.jsx(un,x(x({},null==T?void 0:T.progressBarReadPages),{},{currentPagesIndex:Y.pagesIndex,pagesLength:k.length,progressBarPosition:M}))]})),C.jsx(ln,{boxProps:null==T?void 0:T.progressBarCurrentPageSlot,pageName:Y.name,currentPagesIndex:Y.pagesIndex,pagesLength:k.length,isDragging:_,progressBarPosition:M,children:null==I?void 0:I.progressBarCurrentPage})]}))}),C.jsx(nn,x(x(x({ref:F},null==T||null===(d=T.progressBarPageTexts)||void 0===d?void 0:d.base),null==T||null===(p=T.progressBarPageTexts)||void 0===p?void 0:p.total),{},{sx:[{minWidth:"unset"}].concat(S(Array.isArray(null==T||null===(f=T.progressBarPageTexts)||void 0===f||null===(f=f.base)||void 0===f?void 0:f.sx)?null!==(g=null==T||null===(v=T.progressBarPageTexts)||void 0===v||null===(v=v.base)||void 0===v?void 0:v.sx)&&void 0!==g?g:[]:[null==T||null===(m=T.progressBarPageTexts)||void 0===m||null===(m=m.base)||void 0===m?void 0:m.sx]),S(Array.isArray(null==T||null===(y=T.progressBarPageTexts)||void 0===y||null===(y=y.total)||void 0===y?void 0:y.sx)?null!==(P=null==T||null===(j=T.progressBarPageTexts)||void 0===j||null===(j=j.total)||void 0===j?void 0:j.sx)&&void 0!==P?P:[]:[null==T||null===(w=T.progressBarPageTexts)||void 0===w||null===(w=w.total)||void 0===w?void 0:w.sx])),onClick:function(){return hn.openPage("next","ltr",!1)},children:A}))]}))}))},mn=h.memo(xn),Cn=Ct(function(e){var t=e.direction,n=u(e,r),i=J().settings,o=i.customThemes,a=i.appTheme,s=i.themeMode,l=i.shouldUsePureBlackMode,c=h.useMemo(function(){return ne(s,ie(a,o),l,t)},[s,a,o,l,t]);return C.jsx(oe,{value:ae[t],children:C.jsx(se,{theme:c,children:C.jsx(D,x(x({},n),{},{dir:t}))})})},[function(){return{direction:mt.useGetThemeDirection()}}],["direction"]),bn=h.memo(function(e){var t,r=e.pageName,n=e.progressBarPosition,i=e.slotProps,o=e.children;return C.jsx(_,x(x({},null==i?void 0:i.tooltip),{},{title:r,placement:W[n],disableTouchListener:!0,children:C.jsx(D,x(x({},null==i?void 0:i.box),{},{sx:x({width:"100%",height:"100%"},null==i||null===(t=i.box)||void 0===t?void 0:t.sx),children:o}))}))}),Sn=h.memo(function(e){var t=e.pageName,r=e.primaryPageLoadState,n=e.secondaryPageLoadState,i=e.progressBarPosition,o=e.isCurrentPage,a=e.isLeadingPage,s=e.showDraggingStyle,u=ue();return C.jsx(bn,{pageName:t,progressBarPosition:i,slotProps:{box:{sx:x(x({cursor:"pointer",backgroundColor:le(u.palette.background.paper,.2)},u.applyStyles("dark",{backgroundColor:de(u.palette.background.paper,.1)})),P(r&&(null==n||n),x({backgroundColor:le(u.palette.background.paper,.35)},u.applyStyles("dark",{backgroundColor:de(u.palette.background.paper,.25)}))))},tooltip:{slotProps:o?{tooltip:{sx:{backgroundColor:"primary.main",color:"primary.contrastText"}}}:void 0}},children:C.jsx(D,{sx:x(x({width:"100%",height:"100%"},P(a,{backgroundColor:ce(u.palette.primary.main,.5)})),P(o,x({cursor:s?"grabbing":"grab",pointer:"grabbing",borderRadius:2,backgroundColor:"primary.dark"},u.applyStyles("dark",{backgroundColor:"primary.light"}))))})})}),yn=function(e){var t=e.readerNavBarWidth,r=e.readerDirection,n=ue(),i=bt(function(e){return e}),o=St(function(e){return e.totalPages}),a=vt(function(e){return{progressBarType:e.progressBarType,progressBarSize:e.progressBarSize,progressBarPosition:e.progressBarPosition,progressBarPositionAutoVertical:e.progressBarPositionAutoVertical}}),s=a.progressBarType,u=a.progressBarSize,l=a.progressBarPosition,c=a.progressBarPositionAutoVertical,d=yt(function(e){return{isMaximized:e.isMaximized,isDragging:e.isDragging}}),p=d.isMaximized,f=d.isDragging,g=b(h.useState({}),2)[1];re(window.document.documentElement,h.useCallback(function(){return g({})},[]));var v=zt(l,c,i.ySize,t+i.xSize),m=jt(v),S=m.isBottom,y=m.isLeft,j=m.isRight,w=m.isVertical,T=m.isHorizontal,I=!!o,M=s===E.HIDDEN,D=!p&&!f;return C.jsx(Cn,{children:C.jsx(mn,{direction:T?r:"ltr",progressBarPosition:v,fullSegmentClicks:!0,createProgressBarSlot:h.useCallback(function(e,t,r,n,i,o,a,s,u){return C.jsx(Sn,{pageName:e.name,primaryPageLoadState:r,secondaryPageLoadState:n,progressBarPosition:v,isCurrentPage:i,isLeadingPage:o,showDraggingStyle:u})},[v]),slotProps:{container:{sx:x(x(x(x(x(x(x({overflow:"hidden",transition:"all 0.".concat(n.transitions.duration.shortest,"s")},P(T,x(x({minHeight:"100px"},P("ltr"===n.direction,{left:"ltr"===r?t:i.ySize,right:"rtl"===r?t:i.ySize})),P("rtl"===n.direction,{left:"rtl"===r?t:i.ySize,right:"ltr"===r?t:i.ySize})))),P(w,{minWidth:"100px",bottom:"".concat(i.xSize,"px")})),P(S,{bottom:"".concat(i.xSize,"px")})),P(y,x(x({},P("ltr"===n.direction,{left:"ltr"===r?t:"unset",right:"rtl"===r?t:"unset"})),P("rtl"===n.direction,{right:"rtl"===r?i.ySize:"unset",left:"ltr"===r?i.ySize:"unset"})))),P(j,x(x({},P("ltr"===n.direction,{right:"ltr"===r?i.ySize:"unset",left:"rtl"===r?i.ySize:"unset"})),P("rtl"===n.direction,{left:"rtl"===r?t:"unset",right:"ltr"===r?t:"unset"})))),P(D,{opacity:M?0:.85})),P(!I,{pointerEvents:"none"})),onMouseEnter:function(){return Vt().setIsMaximized(!0)},onMouseLeave:function(){return Vt().setIsMaximized(!1)}},progressBarRoot:{sx:x(x({gap:0,transition:"all 0.1s ease-in-out",backgroundColor:"background.paper"},P(w,{flexDirection:"column",height:"100%"})),P(D,x(x(x(x(x({backgroundColor:"unset",pointerEvents:"none"},P(T,{px:2})),P(w,{py:2})),P(S,{pb:.25})),P(y,x(x({},P("ltr"===n.direction,{pl:"ltr"===r?.25:0,pr:"rtl"===r?.25:0})),P("rtl"===n.direction,{pr:"rtl"===r?.25:0,pl:"ltr"===r?.25:0})))),P(j,x(x({},P("ltr"===n.direction,{pr:"ltr"===r?.25:0,pl:"rtl"===r?.25:0})),P("rtl"===n.direction,{pl:"rtl"===r?.25:0,pr:"ltr"===r?.25:0}))))))},progressBarSlotsContainer:{sx:x(x(x({gap:.25,borderRadius:2,transition:"height 0.1s ease-in-out"},P(T,{height:"20px"})),P(w,{flexDirection:"column",width:"20px"})),P(D,x(x({},P(T,{height:"".concat(u,"px")})),P(w,{width:"".concat(u,"px")}))))},progressBarReadPages:{sx:{display:"none"}},progressBarCurrentPageSlot:{sx:{display:"none"}},progressBarPageTexts:{base:{sx:x({px:1,py:1.5,transition:"all 0.1s ease-in-out"},P(D,{transform:"scale(0)",p:0,minWidth:0,maxWidth:0,minHeight:0,maxHeight:0}))}}}})})},Pn=Ct(h.memo(yn),[T,function(){return{readerDirection:mt.useGetThemeDirection()}}],["readerNavBarWidth","readerDirection"]),jn=N(M)({width:"400px",minWidth:"400px",maxWidth:"400px",height:"100vh",overflowY:"auto"}),wn=h.memo(function(e){var t=e.mangaId,r=e.mangaTitle,n=e.chapterTitle,i=e.scanlator;return C.jsxs(M,{children:[C.jsx(_,{title:r,placement:"right",children:C.jsx(pe,{lines:3,variant:"h6",component:"h1",sx:{textAlign:"center"},children:C.jsx(Dr,{component:he,to:fe.manga.path(t),sx:{textDecoration:"none",color:"inherit"},children:r})})}),C.jsx(_,{title:n,placement:"right",children:C.jsx(pe,{lines:4,variant:"body1",component:"h2",sx:{textAlign:"center"},children:n})}),i&&C.jsx(_,{title:i,placement:"right",children:C.jsx(pe,{lines:4,variant:"body2",component:"h3",color:"textDisabled",sx:{textAlign:"center"},children:i})})]})}),Tn=ge(C.jsx("path",{d:"M15.41 16.59 10.83 12l4.58-4.59L14 6l-6 6 6 6z"})),In=ge(C.jsx("path",{d:"M8.59 16.59 13.17 12 8.59 7.41 10 6l6 6-6 6z"})),En=function(e){var t=e.title,r=e.type,i=e.disabled,o=u(e,n);return C.jsx(_,{title:t,disabled:i,children:C.jsx(Rr,x(x({sx:{flexBasis:"15%"},variant:"contained",disabled:i},o),{},{children:"previous"===r?C.jsx(Tn,{}):C.jsx(In,{})}))})},Mn=function(){var e=ve(),t=e.i18n,r=(e._,xe()),n=St(function(e){return{currentPageIndex:e.currentPageIndex,pages:e.pages}}),i=n.currentPageIndex,o=n.pages,a=vt(function(e){return e.readingDirection.value}),s=h.useMemo(function(){return Pt(i,o)},[i,o]),u=Z[a];return C.jsxs(M,{sx:{flexDirection:"row",gap:1},dir:"ltr",children:[C.jsx(En,{type:"previous",title:r(t._({id:"aHKcKc"}),t._({id:"/dqduX"}),u),disabled:r(!s.primary.index,Rt(s)===Rt(o.slice(-1)[0]),u),onClick:function(){return hn.openPage("previous",void 0,!1)}}),C.jsxs(me,{sx:{flexBasis:"70%",flexGrow:0,flexShrink:0},children:[C.jsx(Ce,{id:"reader-nav-bar-desktop-page-select",children:t._({id:"6WdDG7"})}),C.jsx(Or,{labelId:"reader-nav-bar-desktop-page-select",label:t._({id:"6WdDG7"}),value:Rt(s),onChange:function(e){return hn.openPage(e.target.value,void 0,!1)},children:o.map(function(e){return C.jsx(be,{value:Rt(e),children:e.name},Rt(e))})})]}),C.jsx(En,{type:"next",title:r(t._({id:"/dqduX"}),t._({id:"aHKcKc"}),u),disabled:r(Rt(s)===Rt(o.slice(-1)[0]),!s.primary.index,u),onClick:function(){return hn.openPage("next",void 0,!1)}})]})},Dn=h.memo(Mn),On=function(){},Rn=function(e){var t=e.currentChapterId,r=e.chapters,n=e.style,i=h.useMemo(function(){return void 0===t?0:r.findIndex(function(e){return e.id===t})},[t,r]);return C.jsx(_r,{style:x({height:"calc(".concat(r.length," * 100px)")},n),initialTopMostItemIndex:i,totalCount:r.length,computeItemKey:function(e){return r[e].id},itemContent:function(e){return C.jsx(Wr,{index:e,chapters:r,isSortDesc:!0,mode:"reader",showChapterNumber:!1,selected:null,onSelect:On,selectable:!1,isActiveChapter:e===i})},increaseViewportBy:400})},kn=function(e){var t=e.currentChapterId,r=e.currentChapterName,n=e.currentChapterNumber,i=e.previousChapter,o=e.nextChapter,a=e.chapters,s=void 0===a?[]:a,u=e.readerThemeDirection,l=ve(),c=l.i18n,d=(l._,Se({variant:"popover",popupId:"reader-nav-bar-desktop-chapter-list"}));return h.useLayoutEffect(function(){d.close()},[t]),C.jsxs(M,{sx:{flexDirection:"row",gap:1},dir:"ltr",children:[C.jsx(En,{type:"previous",title:q(c._({id:"S9gT2s"}),c._({id:"05zAhA"}),u),onClick:function(){hn.openChapter(q("previous","next",u))},disabled:q(!i,!o,u)}),C.jsxs(me,{sx:{flexBasis:"70%",flexGrow:0,flexShrink:0},children:[C.jsx(Ce,{id:"reader-nav-bar-desktop-chapter-select",children:c._({id:"QIei5D"})}),C.jsx(Or,x(x({},ye(d)),{},{open:d.isOpen,value:null!=t?t:0,MenuProps:{sx:{visibility:"hidden"}},label:c._({id:"QIei5D"}),labelId:"reader-nav-bar-desktop-chapter-select",children:C.jsx(be,{value:null!=t?t:0,children:void 0!==n?"#".concat(n," ").concat(r):""},t)}))]}),C.jsx(En,{component:he,type:"next",title:q(c._({id:"05zAhA"}),c._({id:"S9gT2s"}),u),onClick:function(){hn.openChapter(q("next","previous",u))},disabled:q(!o,!i,u)}),C.jsx(Pe,x(x({},je(d)),{},{anchorOrigin:{vertical:"bottom",horizontal:"left"},children:C.jsx(D,{sx:{mb:1},children:C.jsx(Rn,{style:{width:"500px",maxWidth:"90vw",minHeight:"150px",maxHeight:"300px"},currentChapterId:t,chapters:s})})}))]})},Ln=Ct(h.memo(kn),[function(){return{readerThemeDirection:mt.useGetThemeDirection()}}],["readerThemeDirection"]),An=ge(C.jsx("path",{d:"M17 4h3c1.1 0 2 .9 2 2v2h-2V6h-3zM4 8V6h3V4H4c-1.1 0-2 .9-2 2v2zm16 8v2h-3v2h3c1.1 0 2-.9 2-2v-2zM7 18H4v-2H2v2c0 1.1.9 2 2 2h3zM18 8H6v8h12z"})),Nn=function(e,t,r){var n=(e+1)%t.length;if(!(!!r&&0===n))return t[(e+1)%t.length]},Bn=function(e){var t=e.tooltip,r=e.value,n=e.defaultValue,i=e.values,o=e.setValue,a=e.valueToDisplayData,s=e.isDefaultable,u=e.onDefault,l=e.defaultIcon,c=ve(),d=c.i18n,p=(c._,void 0===r),f=h.useMemo(function(){return p?-1:i.indexOf(r)},[r,i]);return C.jsx(_,{title:t,children:p?C.jsx(we,{onClick:function(){return o(i[0])},sx:{justifyContent:"start",textTransform:"unset",flexGrow:1},variant:"contained",startIcon:l,size:"large",children:void 0===n?d._({id:"ovBPCi"}):C.jsx(Ut,{superscript:"(".concat(d._({id:"ovBPCi"}),")"),text:a[n].isTitleString?a[n].title:d._(a[n].title)})}):C.jsx(we,{onClick:function(){var e=Nn(f,i,s);void 0!==e?o(e):null==u||u()},sx:{justifyContent:"start",textTransform:"unset",flexGrow:1},variant:"contained",startIcon:a[r].icon,size:"large",children:a[r].isTitleString?a[r].title:d._(a[r].title)})})},_n=function(e){var t=e.pageScaleMode,r=e.shouldStretchPage,n=e.updateSetting,o=u(e,i),a=ve(),s=a.i18n;a._;return C.jsxs(M,{sx:{flexDirection:"row",gap:1},children:[C.jsx(Bn,x(x({},o),{},{tooltip:s._({id:"h1Kv7C"}),value:t.isDefault?void 0:t.value,defaultValue:t.isDefault?t.value:void 0,values:Ee,setValue:function(e){return n("pageScaleMode",e)},valueToDisplayData:Ie,defaultIcon:Ie[t.value].icon})),Te[t.value]&&C.jsx(_,{title:s._({id:"RrbZW2"}),children:C.jsx(Rr,{onClick:function(){return n("shouldStretchPage",!r.value)},sx:{px:void 0},variant:"contained",color:r.value?"secondary":"primary",children:C.jsx(An,{})})})]})},Wn=function(e){var t=e.readingMode,r=e.setReadingMode,n=u(e,o),i=ve(),a=i.i18n;i._;return C.jsx(Bn,x(x({},n),{},{tooltip:a._({id:"n1QGhW"}),value:t.isDefault?void 0:t.value,defaultValue:t.isDefault?t.value:void 0,values:De,setValue:r,valueToDisplayData:Me,defaultIcon:Me[t.value].icon}))},Hn=function(){return C.jsx(Oe,{children:C.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",stroke:"currentColor",strokeWidth:"2",viewBox:"0 0 24 24",children:C.jsx("path",{d:"M2 4h6a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H2m20 0h-6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h6M2 12h20m-3-3 3 3-3 3M5 9l-3 3 3 3"})})})},Vn=function(e){var t=e.readingMode,r=e.shouldOffsetDoubleSpreads,n=e.setShouldOffsetDoubleSpreads,i=ve(),o=i.i18n;i._;return Ft(t)?C.jsx(we,{sx:{justifyContent:"start",textTransform:"unset"},size:"large",onClick:function(){return n(!r)},color:r?"secondary":"primary",variant:"contained",startIcon:C.jsx(Hn,{}),children:o._({id:"GSVtIx"})}):null},zn=function(e){var t=e.readingDirection,r=e.setReadingDirection,n=u(e,a),i=ve(),o=i.i18n;i._;return C.jsx(Bn,x(x({},n),{},{tooltip:o._({id:"Ap8Ipr"}),value:t.isDefault?void 0:t.value,defaultValue:t.isDefault?t.value:void 0,values:ke,setValue:r,valueToDisplayData:Re,defaultIcon:Re[t.value].icon}))},Un=ge(C.jsx("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2m-1 14H9V8h2zm4 0h-2V8h2z"})),Fn=ge(C.jsx("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2m-2 14.5v-9l6 4.5z"})),Gn=function(e){var t=e.autoScroll,r=e.setAutoScroll,n=ve(),i=n.i18n,o=(n._,Gt(function(e){return e.isActive})),a=h.useRef(void 0);return C.jsxs(M,{sx:{flexDirection:"row",gap:1},children:[C.jsx(we,{sx:{justifyContent:"start",textTransform:"unset",flexGrow:1},size:"large",onClick:function(){return Xt().toggleActive()},color:o?"secondary":"primary",variant:"contained",startIcon:o?C.jsx(Un,{}):C.jsx(Fn,{}),children:i._({id:"IFC5U2"})}),C.jsx(Le,{value:t.value,type:"number",size:"small",onBlur:function(e){var n=Be(+e.target.value,Ae.min,Ae.max);n!==t.value&&(clearTimeout(a.current),r(x(x({},t),{},{value:n}),!0))},onChange:function(e){var n=Be(+e.target.value,Ae.min,Ae.max);r(x(x({},t),{},{value:n}),!1),clearTimeout(a.current),a.current=setTimeout(function(){return r(x(x({},t),{},{value:n}),!0)},$(1).seconds.inWholeMilliseconds)},slotProps:{input:{inputProps:Ae,endAdornment:C.jsx(Ne,{position:"end",children:i._({id:"QyVTg4",values:{0:t.value}})})}}})]})},Xn=function(e){var t=e.openSettings,r=ve(),n=r.i18n,i=(r._,vt(function(e){return{readingMode:e.readingMode,shouldOffsetDoubleSpreads:e.shouldOffsetDoubleSpreads,pageScaleMode:e.pageScaleMode,shouldStretchPage:e.shouldStretchPage,readingDirection:e.readingDirection,autoScroll:e.autoScroll}})),o=i.readingMode,a=i.shouldOffsetDoubleSpreads,s=i.pageScaleMode,u=i.shouldStretchPage,l=i.readingDirection,c=i.autoScroll;return C.jsxs(M,{sx:{gap:1},children:[C.jsx(Wn,{readingMode:o,setReadingMode:function(e){return mt.updateSetting("readingMode",e)},isDefaultable:!0,onDefault:function(){return mt.deleteSetting("readingMode")}}),C.jsx(Vn,{readingMode:o.value,shouldOffsetDoubleSpreads:a.value,setShouldOffsetDoubleSpreads:function(e){return mt.setOffsetDoubleSpreads(e)}}),C.jsx(_n,{pageScaleMode:s,shouldStretchPage:u,updateSetting:mt.updateSetting,isDefaultable:!0,onDefault:function(){return mt.deleteSetting("pageScaleMode")}}),C.jsx(zn,{readingDirection:l,setReadingDirection:function(e){return mt.updateSetting("readingDirection",e)},isDefaultable:!0,onDefault:function(){return mt.deleteSetting("readingDirection")}}),C.jsx(Gn,{autoScroll:c,setAutoScroll:function(){for(var e,t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return(e=mt).updateSetting.apply(e,["autoScroll"].concat(r))}}),C.jsx(we,{onClick:function(){return t()},size:"large",sx:{justifyContent:"start",textTransform:"none"},variant:"contained",startIcon:C.jsx(_e,{}),children:n._({id:"Tz0i8g"})})]})},Yn=h.memo(Xn),Zn=ge(C.jsx("path",{d:"M12 5V1L7 6l5 5V7c3.31 0 6 2.69 6 6s-2.69 6-6 6-6-2.69-6-6H4c0 4.42 3.58 8 8 8s8-3.58 8-8-3.58-8-8-8"})),qn=x(x({},Yr),{},{title:"Fallback",inLibrary:!1}),Kn=h.memo(function(){var e=Yt(function(e){return e.manga}),t=(null!=e?e:qn).inLibrary,r=ve(),n=r.i18n,i=(r._,kr(null!=e?e:qn,!0).updateLibraryState);return C.jsx(_,{title:t?n._({id:"mfwy3x"}):n._({id:"RsaYWP"}),children:C.jsx(We,{onClick:i,color:"inherit",children:t?C.jsx(Gr,{}):C.jsx(Lr,{})})})}),Jn=ge(C.jsx("path",{d:"M17 3H7c-1.1 0-1.99.9-1.99 2L5 21l7-3 7 3V5c0-1.1-.9-2-2-2m0 15-5-2.18L7 18V5h10z"})),Qn=function(e){var t=e.id,r=e.isBookmarked,n=ve(),i=n.i18n,o=(n._,r?"unbookmark":"bookmark");return C.jsx(_,{title:i._(Tr[o].action.single),children:C.jsx(We,{onClick:function(){return wr.performAction(o,[t],{})},color:"inherit",children:r?C.jsx(Hr,{}):C.jsx(Jn,{})})})},$n=h.memo(Qn),ei=function(e){var t=e.id,r=void 0===t?-1:t,n=e.isDownloaded,i=ve(),o=i.i18n,a=(i._,wr.useDownloadStatusFromCache(r)),s=void 0===r;return void 0!==r&&n?C.jsx(_,{title:o._(Tr.delete.action.single),children:C.jsx(We,{onClick:function(){return wr.performAction("delete",[r],{})},color:"inherit",children:C.jsx(Ur,{})})}):a?C.jsx(Fr,{chapterId:a.chapter.id}):C.jsx(_,{title:o._(Tr.download.action.single),disabled:s,children:C.jsx(We,{disabled:s,onClick:function(){return wr.performAction("download",[r],{})},color:"inherit",children:C.jsx(zr,{})})})},ti=h.memo(function(){var e=Zt(function(e){var t,r,n,i,o,a,s,u;return{id:null!==(t=null===(r=e.currentChapter)||void 0===r?void 0:r.id)&&void 0!==t?t:Ir.id,isDownloaded:null!==(n=null===(i=e.currentChapter)||void 0===i?void 0:i.isDownloaded)&&void 0!==n?n:Ir.isDownloaded,isBookmarked:null!==(o=null===(a=e.currentChapter)||void 0===a?void 0:a.isBookmarked)&&void 0!==o?o:Ir.isBookmarked,realUrl:null!==(s=null===(u=e.currentChapter)||void 0===u?void 0:u.realUrl)&&void 0!==s?s:Ir.realUrl}}),t=e.id,r=e.isDownloaded,n=e.isBookmarked,i=e.realUrl,o=ve(),a=o.i18n,s=(o._,St(function(e){return e.pageLoadStates})),u=h.useRef(0),l=h.useMemo(function(){return s.some(function(e){return e.error})},[s]);return C.jsxs(M,{sx:{flexDirection:"row",justifyContent:"center",gap:1},children:[C.jsx(Kn,{}),C.jsx($n,{id:t,isBookmarked:n}),C.jsx(_,{title:a._({id:"KJJKF7"}),disabled:!l,children:C.jsx(We,{onClick:function(){Dt().setPageLoadStates(function(e){return e.map(function(e){return{url:e.url,loaded:e.loaded}})}),Dt().setRetryFailedPagesKeyPrefix("".concat(u.current)),u.current=(u.current+1)%1e3},disabled:!l,color:"inherit",children:C.jsx(Zn,{})})}),C.jsx(ei,{id:t,isDownloaded:r}),C.jsx(_,{title:a._({id:"ZdWg0V"}),disabled:!i,children:C.jsx(We,{disabled:!i,href:null!=i?i:"",rel:"noreferrer",target:"_blank",color:"inherit",children:C.jsx(Vr,{})})}),C.jsx(_,{title:a._({id:"Xrk3+q"}),disabled:!i,children:C.jsx(We,{disabled:!i,href:i?He.getWebviewUrl(i):"",rel:"noreferrer",target:"_blank",color:"inherit",children:C.jsx(Xr,{})})})]})}),ri=function(e){var t=e.exit,r=ve(),n=r.i18n,i=(r._,xe());return C.jsx(_,{title:n._({id:"2mxCGH"}),children:C.jsx(We,{sx:{marginRight:2},onClick:t,color:"inherit",children:i(C.jsx(Ve,{}),C.jsx(ze,{}))})})},ni=Ct(h.memo(ri),[function(){return{exit:mt.useExit()}}],["exit"]),ii=function(e){var t=e.isVisible,r=e.openSettings,n=e.setReaderNavBarWidth,i=ve(),o=i.i18n,a=(i._,Yt(function(e){return e.manga})),s=Zt(function(e){var t,r,n,i;return{chapters:e.chapters,currentChapterId:null===(t=e.currentChapter)||void 0===t?void 0:t.id,currentChapterName:null===(r=e.currentChapter)||void 0===r?void 0:r.name,currentChapterNumber:null===(n=e.currentChapter)||void 0===n?void 0:n.chapterNumber,currentChapterScanlator:null===(i=e.currentChapter)||void 0===i?void 0:i.scanlator,previousChapter:e.previousChapter,nextChapter:e.nextChapter}}),u=s.chapters,l=s.currentChapterId,c=s.currentChapterName,d=s.currentChapterNumber,p=s.currentChapterScanlator,f=s.previousChapter,g=s.nextChapter,v=vt(function(e){return e.isStaticNav}),x=b(h.useState(),2),m=x[0],S=x[1];re(m,h.useCallback(function(){v&&n(m.offsetWidth)},[m,v])),h.useLayoutEffect(function(){return function(){return n(0)}},[]);var y=function(e,t){var r=h.useRef(t),n=h.useRef(t);return n.current!==r.current&&!e&&(r.current=!1),n.current!==t&&(r.current=n.current,n.current=t),r.current}(t,v),P=y&&t?0:void 0;return C.jsx(Ue,{variant:v?"permanent":"persistent",open:t||v,transitionDuration:P,SlideProps:{unmountOnExit:!0},PaperProps:{ref:function(e){return S(e)}},children:C.jsxs(jn,{sx:{backgroundColor:"background.paper",pointerEvents:"all"},children:[C.jsxs(M,{sx:{p:2,gap:2,backgroundColor:"action.hover"},children:[C.jsxs(M,{sx:{flexDirection:"row",justifyContent:"space-between",alignItems:"center"},children:[C.jsx(ni,{}),C.jsx(_,{title:o._({id:"JqpUAG"}),children:C.jsx(We,{onClick:function(){n(0),mt.updateSetting("isStaticNav",!v)},color:v?"primary":"inherit",children:v?C.jsx(Er,{}):C.jsx(Mr,{})})})]}),a&&void 0!==l?C.jsxs(C.Fragment,{children:[C.jsx(wn,{mangaId:a.id,mangaTitle:a.title,chapterTitle:null!=c?c:"",scanlator:p}),C.jsx(ti,{})]}):C.jsx(Fe,{})]}),C.jsxs(M,{sx:{p:2,gap:2},children:[C.jsxs(M,{sx:{gap:1},children:[C.jsx(Dn,{}),C.jsx(Ln,{chapters:u,currentChapterId:l,currentChapterName:c,currentChapterNumber:d,nextChapter:g,previousChapter:f})]}),C.jsx(Ge,{}),C.jsx(Yn,{openSettings:r})]})]})})},oi=Ct(h.memo(ii),[T],["setReaderNavBarWidth"]),ai=x(x({},Yr),{},{title:""}),si=function(e){var t,r=e.isVisible,n=e.ref,i=ve(),o=i.i18n,a=(i._,Se({popupId:"reader-overlay-more-menu",variant:"popover"})),s=Zt(function(e){return e.currentChapter}),u=Yt(function(e){return e.manga}),c=bt(function(e){return e}),d=null!=u?u:ai,f=d.id,h=d.title,g=null!=s?s:Ir,v=g.id,m=g.name,b=g.realUrl,S=g.isBookmarked;return C.jsx(Xe,{direction:"down",in:r,ref:n,children:C.jsxs(M,{sx:{flexDirection:"row",alignItems:"center",position:"fixed",top:0,left:0,right:"".concat(c.ySize,"px"),p:2,pt:function(e){return"max(env(safe-area-inset-top), ".concat(e.spacing(2),")")},backgroundColor:function(e){return ce(e.palette.background.paper,.95)},pointerEvents:"all",boxShadow:2},children:[C.jsx(ni,{}),C.jsx(M,{sx:{flexGrow:1},children:u&&s?C.jsxs(C.Fragment,{children:[C.jsx(_,{title:h,children:C.jsx(pe,{lines:1,component:"h1",variant:"h5",children:C.jsx(Dr,{component:he,to:fe.manga.path(f),sx:{textDecoration:"none",color:"inherit"},children:h})})}),C.jsx(_,{title:m,children:C.jsx(pe,{lines:1,children:m})})]}):C.jsx(Fe,{})}),C.jsx(Kn,{}),C.jsx($n,{id:v,isBookmarked:S}),C.jsx(We,x(x({},ye(a)),{},{color:"inherit",children:C.jsx(Ar,{})})),C.jsxs(Ye,x(x({},Ze(a)),{},{children:[C.jsx(be,{component:Dr,disabled:!b,href:null!=b?b:"",rel:"noreferrer",target:"_blank",children:o._({id:"ZdWg0V"})}),C.jsx(be,{component:Dr,disabled:!b,href:b?He.getWebviewUrl(b):"",rel:"noreferrer",target:"_blank",children:o._({id:"Xrk3+q"})}),C.jsx(be,{disabled:!b,onClick:(t=p(l().m(function e(){return l().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,navigator.clipboard.writeText(h);case 1:qe(o._({id:"FxVG/l"}),"info");case 2:return e.a(2)}},e)})),function(){return t.apply(this,arguments)}),children:o._({id:"Z8lGw6"})})]}))]})})},ui=h.memo(si),li=ge(C.jsx("path",{d:"m21.81 12.74-.82-.63v-.22l.8-.63c.16-.12.2-.34.1-.51l-.85-1.48c-.07-.13-.21-.2-.35-.2q-.075 0-.15.03l-.95.38c-.08-.05-.11-.07-.19-.11l-.15-1.01c-.03-.21-.2-.36-.4-.36h-1.71c-.2 0-.37.15-.4.34l-.14 1.01c-.03.02-.07.03-.1.05l-.09.06-.95-.38q-.075-.03-.15-.03c-.14 0-.27.07-.35.2l-.85 1.48c-.1.17-.06.39.1.51l.8.63v.23l-.8.63c-.16.12-.2.34-.1.51l.85 1.48c.07.13.21.2.35.2q.075 0 .15-.03l.95-.37c.08.05.12.07.2.11l.15 1.01c.03.2.2.34.4.34h1.71c.2 0 .37-.15.4-.34l.15-1.01c.03-.02.07-.03.1-.05l.09-.06.95.38q.075.03.15.03c.14 0 .27-.07.35-.2l.85-1.48c.1-.17.06-.39-.1-.51M18 13.5c-.83 0-1.5-.67-1.5-1.5s.67-1.5 1.5-1.5 1.5.67 1.5 1.5-.67 1.5-1.5 1.5M17 17h2v4c0 1.1-.9 2-2 2H7c-1.1 0-2-.9-2-2V3c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2v4h-2V6H7v12h10z"})),ci=ge(C.jsx("path",{d:"M4 10.5c-.83 0-1.5.67-1.5 1.5s.67 1.5 1.5 1.5 1.5-.67 1.5-1.5-.67-1.5-1.5-1.5m0-6c-.83 0-1.5.67-1.5 1.5S3.17 7.5 4 7.5 5.5 6.83 5.5 6 4.83 4.5 4 4.5m0 12c-.83 0-1.5.68-1.5 1.5s.68 1.5 1.5 1.5 1.5-.68 1.5-1.5-.67-1.5-1.5-1.5M7 19h14v-2H7zm0-6h14v-2H7zm0-8v2h14V5z"})),di=ge(C.jsx("path",{d:"M6 6h2v12H6zm3.5 6 8.5 6V6z"})),pi=ge(C.jsx("path",{d:"m6 18 8.5-6L6 6zM16 6v12h2V6z"})),fi={display:"flex",alignItems:"center",justifyContent:"end",position:"relative",backgroundColor:"background.default"},hi=h.memo(function(e){var t=e.isTrailingPage,r=e.pagesIndex,n=e.totalPages,i=e.isVertical,o=e.isHorizontal,a="".concat(r/(n-1)*100,"%");return C.jsx(D,{sx:x(x(x(x({position:"absolute"},P(i,{top:a,left:"50%"})),P(o,{top:"50%",left:a})),{},{transform:"translate(-50%, -50%)",width:"3px",height:"3px",borderRadius:100,backgroundColor:"background.paper"},P(t,{backgroundColor:"primary.main"})),{},{zIndex:1})})}),gi=h.memo(function(e){var t=e.pageName,r=e.isTrailingPage,n=e.isCurrentPage,i=e.pagesIndex,o=e.totalPages,a=e.isVertical,s=e.isHorizontal;return C.jsx(bn,{pageName:t,progressBarPosition:Ke.BOTTOM,slotProps:{box:{sx:fi}},children:!n&&C.jsx(hi,{isTrailingPage:r,pagesIndex:i,totalPages:o,isVertical:a,isHorizontal:s})})}),vi=m(m(m(m({},Ke.BOTTOM,"up"),Ke.LEFT,"right"),Ke.RIGHT,"left"),Ke.AUTO,"left"),xi=function(e){var t=e.direction,r=e.topOffset,n=void 0===r?0:r,i=e.bottomOffset,o=void 0===i?0:i,a=bt(function(e){return e}),s=qt(function(e){return e.isVisible}),u=St(function(e){return{currentPageIndex:e.currentPageIndex,pages:e.pages}}),l=u.currentPageIndex,c=u.pages,d=Zt(function(e){return{previousChapter:e.previousChapter,nextChapter:e.nextChapter}}),p=d.previousChapter,f=d.nextChapter,g=vt(function(e){return{progressBarPosition:e.progressBarPosition,progressBarPositionAutoVertical:e.progressBarPositionAutoVertical}}),v=g.progressBarPosition,m=g.progressBarPositionAutoVertical,S=yt(function(e){return e.isDragging}),y=b(h.useState({}),2)[1];re(window.document.documentElement,h.useCallback(function(){return y({})},[]));var j=zt(v,m,n+o,a.xSize),w=jt(j),T=w.isLeft,I=w.isRight,E=w.isVertical,O=w.isHorizontal,R=O?t:"ltr",k=h.useMemo(function(){return Pt(l,c).pagesIndex},[l,c]),L=h.useMemo(function(){return{container:{sx:{flexGrow:1,position:"relative",display:"flex",justifyItems:"center",alignItems:"stretch",backgroundColor:function(e){return ce(e.palette.background.paper,.85)},borderRadius:100,boxShadow:2}},progressBarRoot:{sx:x(x({flexGrow:1,gap:0},P(E,{flexDirection:"column"})),P(O,{alignItems:"stretch"}))},progressBarSlotsActionArea:{sx:x(x({alignItems:"center",cursor:"pointer"},P(E,{width:"100%",flexDirection:"column",px:2})),P(O,{height:"100%",py:2}))},progressBarSlotsContainer:{sx:x(x({borderRadius:100,backgroundColor:"background.default"},P(E,{flexDirection:"column",py:1})),P(O,{px:1}))},progressBarSlot:{sx:x(x({},P(E,{width:"20px"})),P(O,{height:"20px"}))},progressBarCurrentPageSlot:{sx:x(x({display:"flex",zIndex:1,cursor:"inherit"},P(E,{justifyContent:"center"})),P(O,{alignItems:"center"}))},progressBarPageTexts:{base:{sx:x(x({},P(E,{py:1})),P(O,{px:1}))}}}},[E,O]),A=h.useMemo(function(){return{progressBarCurrentPage:C.jsx(D,{sx:x(x(x({position:"absolute"},P(E,x(x({top:"calc(100% - 6px)"},P(0===k,{top:"0"})),{},{width:"75%",height:"6px"}))),P(O,x(x({left:"calc(100% - 0px)"},P(0===k,{left:"0"})),{},{width:"6px",height:"75%"}))),{},{backgroundColor:"primary.main",borderRadius:100,cursor:S?"grabbing":"grab"})})}},[k,c.length,S,E,O]);return h.useLayoutEffect(function(){return Vt().setIsMaximized(s),function(){return Vt().setIsMaximized(!1)}},[s]),C.jsx(Xe,{direction:vi[j],in:s,children:C.jsx(Cn,{sx:x(x({position:"relative",display:"flex",alignItems:"end",height:"100%",pointerEvents:"none"},P(T,{justifyContent:"ltr"===t?"start":"end"})),P(I,{justifyContent:"ltr"===t?"end":"start"})),children:C.jsxs(M,{sx:x(x({p:2,gap:1,pointerEvents:"all",alignItems:"center"},P(E,{height:"100%",flexDirection:"column"})),P(O,{width:"100%",flexDirection:"row"})),children:[C.jsx(We,{onClick:function(){return hn.openChapter("previous")},disabled:!p,sx:{backgroundColor:function(e){return ce(e.palette.background.paper,.85)},boxShadow:2},children:q(C.jsx(di,{sx:x({},P(E,{transform:"rotate(90deg)"}))}),C.jsx(pi,{sx:x({},P(E,{transform:"rotate(90deg)"}))}),R)}),C.jsx(mn,{direction:R,progressBarPosition:j,fullSegmentClicks:!1,createProgressBarSlot:h.useCallback(function(e,t,r,n,i,o,a,s){return C.jsx(gi,{pageName:e.name,isTrailingPage:a,isCurrentPage:i,pagesIndex:t,totalPages:s,isVertical:E,isHorizontal:O})},[E,O]),slotProps:x(x({},L),{},{progressBarReadPages:{sx:x(x({backgroundColor:"primary.main"},P(E,{width:"20px",height:"".concat(Math.max(0,Pt(l,c).pagesIndex)/(c.length-1)*100,"%"),borderRadius:"400px 400px 0 0"})),P(O,{width:"".concat(Math.max(0,Pt(l,c).pagesIndex)/(c.length-1)*100,"%"),height:"20px",borderRadius:"400px 0 0 400px"}))}}),slots:A}),C.jsx(We,{onClick:function(){return hn.openChapter("next")},disabled:!f,sx:{backgroundColor:function(e){return ce(e.palette.background.paper,.85)},boxShadow:2},children:q(C.jsx(pi,{sx:x({},P(E,{transform:"rotate(90deg)"}))}),C.jsx(di,{sx:x({},P(E,{transform:"rotate(90deg)"}))}),R)})]})})})},mi=Ct(h.memo(xi),[function(){return{direction:mt.useGetThemeDirection()}}],["direction"]),Ci=function(){var e=ve(),t=e.i18n,r=(e._,Gt(function(e){return e.isActive})),n=vt(function(e){return{readingMode:e.readingMode,readingDirection:e.readingDirection,autoScroll:e.autoScroll}}),i=n.readingMode,o=n.readingDirection,a=n.autoScroll;return C.jsxs(M,{sx:{gap:2},children:[C.jsx(Kt,{}),C.jsx(Jt,{readingMode:i,setReadingMode:function(e){return mt.updateSetting("readingMode",e)},isDefaultable:!0,onDefault:function(){return mt.deleteSetting("readingMode")}}),C.jsx(Qt,{readingDirection:o,setReadingDirection:function(e){return mt.updateSetting("readingDirection",e)},isDefaultable:!0,onDefault:function(){return mt.deleteSetting("readingDirection")}}),C.jsx(Zr,{label:t._({id:"IFC5U2"}),checked:r,onChange:function(){return Xt().toggleActive()}}),C.jsx($t,{autoScroll:a,setAutoScroll:function(){for(var e,t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return(e=mt).updateSetting.apply(e,["autoScroll"].concat(r))}})]})},bi=h.memo(Ci),Si=function(e){var t=e.openSettings,r=e.isVisible,n=e.topOffset,i=void 0===n?0:n,o=ve(),a=o.i18n,s=(o._,Zt(function(e){var t;return{currentChapterId:null===(t=e.currentChapter)||void 0===t?void 0:t.id,chapters:e.chapters}})),u=s.currentChapterId,l=s.chapters,c=Se({variant:"dialog",popupId:"reader-chapter-list-dialog"}),d=Se({variant:"dialog",popupId:"reader-quick-settings-dialog"}),p=bt(function(e){return e}),f=b(h.useState(0),2),g=f[0],v=f[1],m=h.useRef(null);return re(m,h.useCallback(function(){var e,t;return v(null!==(e=null===(t=m.current)||void 0===t?void 0:t.clientHeight)&&void 0!==e?e:0)},[g])),h.useLayoutEffect(function(){c.close()},[u]),C.jsxs(C.Fragment,{children:[C.jsxs(M,{sx:{position:"fixed",right:"".concat(p.ySize,"px"),bottom:0,left:0,height:"calc(100% - ".concat(i,"px)")},children:[C.jsx(mi,{topOffset:i,bottomOffset:g}),C.jsx(Xe,{direction:"up",in:r,children:C.jsx(M,{ref:m,sx:{alignItems:"center",backgroundColor:function(e){return ce(e.palette.background.paper,.95)},pb:"max(".concat(p.xSize,"px, env(safe-area-inset-bottom))"),boxShadow:2,pointerEvents:"all"},children:C.jsxs(M,{sx:{width:"50%",flexDirection:"row",p:2,gap:1,justifyContent:"space-evenly",alignItems:"center"},children:[C.jsx(_,{title:a._({id:"S0FwRL"}),children:C.jsx(We,x(x({},ye(c)),{},{color:"inherit",children:C.jsx(ci,{})}))}),C.jsx(_,{title:a._({id:"iJSg+d"}),children:C.jsx(We,x(x({},ye(d)),{},{color:"inherit",children:C.jsx(li,{})}))}),C.jsx(_,{title:a._({id:"Tz0i8g"}),children:C.jsx(We,{onClick:t,color:"inherit",children:C.jsx(_e,{})})})]})})})]}),c.isOpen&&C.jsx(y,x(x({},Je(c)),{},{fullWidth:!0,maxWidth:"md",scroll:"paper",children:C.jsx(j,{sx:{p:0,pb:1},children:C.jsx(Rn,{style:{minHeight:"15vh",maxHeight:"75vh"},currentChapterId:u,chapters:l})})})),d.isOpen&&C.jsx(y,x(x({},Je(d)),{},{fullWidth:!0,maxWidth:"md",scroll:"paper",children:C.jsx(j,{children:C.jsx(bi,{})})}))]})},yi=h.memo(Si),Pi=function(e){var t=e.isDesktop,r=e.isMobile,n=qt(function(e){return e.isVisible}),i=b(h.useState(!1),2),o=i[0],a=i[1],s=b(h.useState(0),2),u=s[0],l=s[1],d=h.useRef(null);return re(d,h.useCallback(function(){var e,t;return l(null!==(e=null===(t=d.current)||void 0===t?void 0:t.clientHeight)&&void 0!==e?e:0)},[r])),C.jsxs(D,{sx:{position:"absolute",width:"100%",height:"100%",pointerEvents:"none",zIndex:1},children:[t&&C.jsxs(C.Fragment,{children:[C.jsx(Pn,{}),C.jsx(oi,{isVisible:n,openSettings:function(){return a(!0)}})]}),r&&C.jsxs(C.Fragment,{children:[C.jsx(ui,{ref:d,isVisible:n}),C.jsx(yi,{openSettings:function(){return a(!0)},isVisible:n,topOffset:u})]}),C.jsx(c,{isOpen:o,close:function(){return a(!1)}}),C.jsx(en,{})]})},ji=Ct(h.memo(Pi),[mt.useOverlayMode],["isDesktop","isMobile"]),wi="reader-tap-zone-layout-canvas",Ti=Ct(function(e){var t=e.readerNavBarWidth,r=ue(),n=vt(function(e){return{tapZoneLayout:e.tapZoneLayout.value,tapZoneInvertMode:e.tapZoneInvertMode.value,readingDirection:e.readingDirection.value}}),i=n.tapZoneLayout,o=n.tapZoneInvertMode,a=n.readingDirection,s=er(function(e){return e.showPreview}),u=b(h.useState(0),2),l=u[0],c=u[1],d=b(h.useState(0),2),p=d[0],f=d[1],g=b(h.useState(null),2),v=g[0],x=g[1];re(v,h.useCallback(function(){var e,t;c(null!==(e=null==v?void 0:v.clientWidth)&&void 0!==e?e:0),f(null!==(t=null==v?void 0:v.clientHeight)&&void 0!==t?t:0)},[v]));var m=fn.getOrCreateCanvas(i,l,p,r.typography.h3,{vertical:o.vertical,horizontal:o.horizontal,isRTL:a===I.RTL});return h.useLayoutEffect(function(){var e=document.getElementById(wi);null==e||e.replaceChildren(m)},[m,s]),C.jsx(D,{ref:x,sx:{position:"fixed",top:0,left:t,right:0,bottom:0,pointerEvents:"none"},children:s&&C.jsx("div",{id:wi})})},[T],["readerNavBarWidth"]),Ii=Ct(function(e){var t=e.readerNavBarWidth,r=vt(function(e){return e.customFilter.rgba}),n=r.value,i=n.red,o=n.green,a=n.blue,s=n.alpha,u=n.blendMode;return r.enabled?C.jsx(D,{sx:{position:"fixed",top:0,left:t,right:0,bottom:0,pointerEvents:"none",background:"rgba(".concat(i," ").concat(o," ").concat(a," / ").concat(s,"%)"),mixBlendMode:"".concat(u)}}):null},[T],["readerNavBarWidth"]),Ei=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:G.XY,r=b(h.useState(!1),2),n=r[0],i=r[1],o=h.useRef(void 0),a=h.useRef([0,0,0]),s=h.useRef([0,0,0]),u=h.useRef([0,0,0]),l=h.useRef([0,0]),c=h.useRef(void 0),d=h.useRef([0,0]),p=h.useRef([0,0]);return h.useEffect(function(){var r=null==e?void 0:e.current;if(!r)return function(){};var n=function(){o.current||(o.current=getComputedStyle(r));var e="rtl"===o.current.direction,t="row-reverse"===o.current.flexDirection;return e||!e&&t},f=t!==G.Y,h=t!==G.X,g=function(){void 0!==c.current&&(cancelAnimationFrame(c.current),c.current=void 0)},v=!1,x=function(e){(function(e){if(v)return!0;var t=[r.clientHeight<r.scrollHeight,r.clientWidth<r.scrollWidth],n=[Math.abs(a.current[0]-e.pageX)>0,Math.abs(s.current[0]-e.pageY)>0];return t[0]&&n[0]||t[1]&&n[1]})(e)&&(v=!0,i(!0),a.current=[].concat(S(a.current.slice(1)),[e.pageX]),s.current=[].concat(S(s.current.slice(1)),[e.pageY]),u.current=[].concat(S(u.current.slice(1)),[Date.now()]),f&&(r.scrollLeft=p.current[0]-(e.pageX-d.current[0])),h&&(r.scrollTop=p.current[1]-(e.pageY-d.current[1])))},m=function(){r.removeEventListener("mousemove",x),r.removeEventListener("mouseup",m),setTimeout(function(){v=!1,i(!1)},0),l.current=[r.scrollLeft,r.scrollTop];var e=function(){!function(){var e=function(e,t,r){return(e[0]-e[2])/(t[0]-t[2])*1e3/r},t=[f?e(a.current,u.current,r.clientWidth):0,h?e(s.current,u.current,r.clientHeight):0],i=f&&h?Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2)):h?Math.abs(t[1]):Math.abs(t[0]),c=[t[0]/i,t[1]/i],d=Be(1.2*i,-12,12),p=(Date.now()-u.current[0])/1e3,v=d-14.278*p+75.24*Math.pow(p,2)/d-149.72*Math.pow(p,3)/d/d;if(0!==d&&v>0&&!Number.isNaN(d)){var x=function(e,t){return e*t*(d*p-7.1397*Math.pow(p,2)+25.08*Math.pow(p,3)/d-37.43*Math.pow(p,4)/d/d)},m=[x(r.clientWidth,c[0]),x(r.clientHeight,c[1])],C=[r.scrollWidth-r.clientWidth,r.scrollHeight-r.clientHeight],b=[Be(l.current[0]-m[0],n()?-C[0]:0,C[0]),Be(l.current[1]-m[1],(o.current||(o.current=getComputedStyle(r)),"column-reverse"===o.current.flexDirection?-C[1]:0),C[1])];0!==b[0]||b[0]!==C[0]||0!==b[1]||b[1]!==C[1]||g(),f&&(r.scrollLeft=b[0]),h&&(r.scrollTop=b[1])}else g()}(),c.current=requestAnimationFrame(e)};c.current=requestAnimationFrame(e)},C=function(e){0===e.button&&(e.preventDefault(),d.current=[e.pageX,e.pageY],p.current=[r.scrollLeft,r.scrollTop],a.current=[e.pageX,e.pageX,e.pageX],s.current=[e.pageY,e.pageY,e.pageY],u.current=[Date.now()-2,Date.now()-1,Date.now()],r.addEventListener("mousemove",x,{passive:!0}),r.addEventListener("mouseup",m),g())};return r.addEventListener("mousedown",C),r.addEventListener("wheel",g,{passive:!0}),function(){r.removeEventListener("mousedown",C),r.removeEventListener("wheel",g),g()}},[e,t]),n},Mi=function(e){var t=e.title,r=e.name,n=e.scanlator,i=e.backgroundColor,o=ue(),a=o.palette.getContrastText(tt(o.palette,rt[i])),s=ce(a,.5);return r?C.jsxs(M,{children:[C.jsx(O,{color:a,children:t}),C.jsx(O,{color:a,variant:"h6",component:"h1",children:r}),n&&C.jsx(O,{variant:"body2",color:s,children:n})]}):null},Di=function(e){var t,r=e.type,n=e.currentChapterName,i=e.currentChapterScanlator,o=e.previousChapterName,a=e.previousChapterScanlator,s=e.nextChapterName,u=e.nextChapterScanlator,l=e.readerNavBarWidth,c=e.handleBack,d=ve(),p=d.i18n,f=(d._,Yt(function(e){return e.manga})),h=bt(function(e){return e}),g=St(function(e){return e.transitionPageMode}),v=vt(function(e){return{readingMode:e.readingMode.value,backgroundColor:e.backgroundColor,shouldShowTransitionPage:e.shouldShowTransitionPage}}),m=v.readingMode,b=v.backgroundColor,S=v.shouldShowTransitionPage,y=r===K.PREVIOUS,j=r===K.NEXT,w=!!n&&!o,T=!!n&&!s,I=w&&r===K.PREVIOUS,E=T&&r===K.NEXT;return(S||(I||E))&&ir(r,g,m)?C.jsx(M,{sx:x(x({justifyContent:"center",alignItems:"center"},P(!wt(m),{width:"100%",height:"100%"})),P(wt(m),x(x({position:"sticky"},P(or(m),{left:0,maxWidth:"calc(100vw - ".concat(h.ySize,"px - ").concat(l,"px)"),minHeight:"calc(100vh - ".concat(h.xSize,"px)")})),P(m===ee.CONTINUOUS_HORIZONTAL,{top:0,minWidth:"calc(100vw - ".concat(h.ySize,"px - ").concat(l,"px)"),maxHeight:"calc(100vh - ".concat(h.xSize,"px)")})))),children:C.jsxs(M,{sx:{gap:2,maxWidth:function(e){return"calc(100vw - ".concat(h.ySize,"px - ").concat(l,"px - ").concat(e.spacing(2),")")},maxHeight:"calc(100vh - ".concat(h.xSize,"px)"),width:"max-content",p:1},children:[y&&w&&C.jsx(O,{variant:"h6",children:p._({id:"eijoLF"})}),C.jsxs(M,{sx:{gap:5},children:[y&&!w&&C.jsx(Mi,{title:p._({id:"VHnO5x"}),name:o,scanlator:a,backgroundColor:b}),!!n&&C.jsx(Mi,{title:y?p._({id:"q/XX3T"}):p._({id:"A9r9ns"}),name:n,scanlator:i,backgroundColor:b}),j&&!T&&C.jsx(Mi,{title:p._({id:"3J7a7o"}),name:s,scanlator:u,backgroundColor:b})]}),j&&T&&C.jsx(O,{variant:"h6",children:p._({id:"STQqww"})}),(y&&w||j&&T)&&C.jsxs(M,{sx:{flexDirection:"row",flexWrap:"wrap",gap:1},children:[C.jsx(we,{sx:{flexGrow:1},onClick:function(e){e.stopPropagation(),c()},variant:"contained",children:p._({id:"+4RFej"})}),C.jsx(we,{sx:{flexGrow:1},component:he,onClick:function(e){e.stopPropagation()},variant:"contained",to:fe.manga.path(null!==(t=null==f?void 0:f.id)&&void 0!==t?t:-1),children:p._({id:"+YP7mg"})})]})]})}):null},Oi=Ct(h.memo(Di),[function(e){var t=e.chapterId,r=Zt(function(e){return e.chapters}),n=h.useMemo(function(){return r.findIndex(function(e){return e.id===t})},[t,r]),i=r[n],o=h.useMemo(function(){return r[n+1]},[n,r]),a=h.useMemo(function(){return r[n-1]},[n,r]);return{currentChapterName:null==i?void 0:i.name,currentChapterScanlator:null==i?void 0:i.scanlator,previousChapterName:null==o?void 0:o.name,previousChapterScanlator:null==o?void 0:o.name,nextChapterName:null==a?void 0:a.name,nextChapterScanlator:null==a?void 0:a.scanlator}},T,function(e){var t=e.chapterId,r=e.type,n=$e(),i=Zt(function(e){return e.chapters}),o=h.useMemo(function(){return i.findIndex(function(e){return e.id===t})},[t,i]),a=0===o,s=o===i.length-1,u=r===K.PREVIOUS&&s,l=r===K.NEXT&&a;return{handleBack:u||l?n:et}}],["currentChapterName","currentChapterScanlator","previousChapterName","previousChapterScanlator","nextChapterName","nextChapterScanlator","readerNavBarWidth","handleBack"]),Ri="-10px",ki=function(e,t,r){if(wt(t)){var n=Z[r],i="0px ".concat(Ri," 0px 0px"),o="0px 0px 0px ".concat(Ri);return or(t)?"first"===e?"0px 0px ".concat(Ri," 0px"):"".concat(Ri," 0px 0px 0px"):"first"===e?q(i,o,n):q(o,i,n)}},Li=function(e,t,r,n){var i=t.top,o=t.right,a=t.bottom,s=t.left,u=window.innerWidth-n,l=window.innerHeight-r;return m(m({},ee.CONTINUOUS_VERTICAL,{start:a>=l,end:i<0}),ee.CONTINUOUS_HORIZONTAL,function(e,t,r,n){return e===I.LTR?{start:r>=n,end:t<0}:{start:t<0,end:r>=n}}(e,s,o,u))},Ai=function(e,t,r,n,i,o,a){var s=vt(function(e){return{readingMode:e.readingMode.value,readingDirection:e.readingDirection.value,shouldUseInfiniteScroll:e.shouldUseInfiniteScroll,shouldShowTransitionPage:e.shouldShowTransitionPage}}),u=s.readingMode,l=s.readingDirection,c=s.shouldUseInfiniteScroll,d=s.shouldShowTransitionPage;h.useEffect(function(){var t=wt(u),o=or(u);if(d||!a||!t||!c||!n||i||void 0===r)return function(){};var s=function(){var t=0===a.scrollLeft,n=a.scrollLeft===a.scrollWidth-a.clientWidth,i=0===a.scrollTop,s=a.scrollTop===a.scrollHeight-a.clientHeight;("first"===e&&(o?i:t)||"last"===e&&(o?s:n))&&hn.openChapter(r,void 0,!1)};return a.addEventListener("scroll",s,{passive:!0}),function(){return a.removeEventListener("scroll",s)}},[u,a,d,c,n,i,r]),Kr(o,h.useCallback(function(o){if(c&&wt(u)&&void 0!==r&&(d||i)){var a=o[o.length-1],s=Li(l,a.target.getBoundingClientRect(),sr().xSize,sr().ySize),p=function(e,t){var r=e[ee.CONTINUOUS_VERTICAL],n=e[ee.CONTINUOUS_HORIZONTAL];return or(t)?r:n}(s,u),f=p.start,h=p.end,g=a.intersectionRatio<=0;if(function(e,t){var r=e[ee.CONTINUOUS_VERTICAL],n=e[ee.CONTINUOUS_HORIZONTAL];return or(t)?r.start||r.end:n.start||n.end}(s,u)){var v="last"===e&&!n&&h;"first"===e&&f&&!i||"last"===e&&h&&g?hn.openChapter(r,!i,!1):v&&hn.openChapter(t,!1,!1)}}},[e,t,r,n,i,u,l,c,d]),h.useMemo(function(){return{root:a,threshold:[0],rootMargin:ki(e,u,l),ignoreInitialObserve:!0}},[e,u,l]))},Ni=function(e){var t=e.chapterId,r=e.previousChapterId,n=e.nextChapterId,i=e.isPreviousChapterVisible,o=e.isCurrentChapter,a=e.isNextChapterVisible,s=e.imageWrapper,u=e.scrollElement;return Ai("first",t,r,o,i,s,u),Ai("last",t,n,o,a,s,u),null},Bi=h.memo(Ni),_i=function(e){var t=e.currentPageIndex,r=e.updateCurrentPageIndex,n=e.transitionPageMode,i=e.retryFailedPagesKeyPrefix,o=e.readingMode,a=e.readerWidth,s=e.pageScaleMode,u=e.shouldOffsetDoubleSpreads,l=e.readingDirection,c=e.imagePreLoadAmount,d=e.pageGap,p=e.chapterId,f=e.previousChapterId,g=e.nextChapterId,v=e.isPreviousChapterVisible,m=e.isNextChapterVisible,S=e.lastPageRead,y=e.isInitialChapter,j=e.isCurrentChapter,w=e.isPreviousChapter,T=e.isNextChapter,E=e.isLeadingChapter,O=e.isTrailingChapter,R=e.isPreloadMode,k=e.imageRefs,L=e.scrollIntoView,A=e.resumeMode,N=e.customFilter,B=e.shouldStretchPage,_=e.readerNavBarWidth,W=e.onSizeChange,H=e.minWidth,V=e.minHeight,z=e.scrollElement,U=ve(),F=U.i18n,G=(U._,ue().direction),Y=b(He.useGetChapterPagesFetch(null!=p?p:-1),2),Z=Y[0],q=Y[1],J=b(h.useState(!1),2),Q=J[0],$=J[1],te=b(h.useState(ur.totalPages),2),ne=te[0],ie=te[1],oe=b(h.useState(ur.pageUrls),2),ae=oe[0],se=oe[1],le=b(h.useState(ur.pages),2),ce=le[0],de=le[1],pe=b(h.useState(ur.pageLoadStates),2),fe=pe[0],he=pe[1],ge=b(h.useState(ur.pageSpreadStates),2),xe=ge[0],me=ge[1],Ce=h.useRef(null),be=h.useRef(j),Se=h.useRef(ce.map(function(){return null})),ye=h.useRef(null),Pe=h.useMemo(function(){return!ne?ce:ne===xe.length&&o===ee.DOUBLE_PAGE?lr(ae,xe,u,l):ce},[xe,o,u,l,ne]),je=h.useMemo(function(){return cr(o)},[o]),we=l===I.LTR,Te=wt(o),Ie=!Te&&!j||R,Ee=!Te&&j,Me=!Ie&&(Ee||Te&&(y||E)),De=!Ie&&(Ee||Te&&(y||O));be.current=j,j&&(k.current=Se.current);var Oe=h.useCallback(function(){p&&($(!1),Z({variables:{input:{chapterId:p}}}).catch(X("ReaderChapterViewer(".concat(p,")::fetchPages"))))},[Z,p]),Re=h.useMemo(function(){return dr(Pe,function(e){be.current&&Dt().setPageSpreadStates(e),me(e)},function(e){be.current&&Dt().setPageLoadStates(e),he(e)},o)},[Pe,o]),ke=h.useMemo(function(){return pr(function(e){be.current&&Dt().setPageLoadStates(e),he(e)})},[]);h.useEffect(function(){Oe()},[p]),re(Ce,h.useCallback(function(e){var t=e[0].target,r=t.clientWidth,n=t.clientHeight;W(r,n,p)},[W,Ce.current,p]));var Le=function(e,t,r){!(arguments.length>3&&void 0!==arguments[3]&&arguments[3])&&Q||t(e),j&&r(e)};return function(e,t,r,n,i,o,a,s,u,l,c,d,p,f,g,v,m,C){var b,S=h.useRef(void 0);h.useLayoutEffect(function(){var e,h=null===(e=t.data)||void 0===e?void 0:e.fetchChapterPages;if(h){var b=h.pages,y=(b.length?b:[""]).map(function(e){var t;return nt.addParams(e,{sourceId:null===(t=Lt().manga)||void 0===t?void 0:t.sourceId})}),P=ar(r,null!=n?n:0,y.length-1),j=S.current!==(null==h?void 0:h.pages);if(j){S.current=h.pages;var w=nr(y);u(!0),d(w),p(y),f(w.map(function(e){return{url:e.primary.url,loaded:!1}})),g(w.map(function(e){return{url:e.primary.url,isSpread:!1}}))}else d(i),f(o),g(a);c(h.pages.length),p(y),v(P),m(P),l(function(e){return x(x({},e),{},{isCurrentChapterReady:s||j})}),C(K.NONE)}},[null===(b=t.data)||void 0===b||null===(b=b.fetchChapterPages)||void 0===b?void 0:b.pages,e])}(j,q,A,S,Pe,fe,xe,Q,$,function(e){return Le(e,et,Et().setReaderStateChapters)},function(e){return Le(e,ie,Dt().setTotalPages.bind(Dt()))},function(e){return Le(e,de,Dt().setPages.bind(Dt()))},function(e){return Le(e,se,Dt().setPageUrls.bind(Dt()))},function(e){return Le(e,he,Dt().setPageLoadStates.bind(Dt()))},function(e){return Le(e,me,Dt().setPageSpreadStates.bind(Dt()))},function(e){return Le(e,et,Dt().setCurrentPageIndex.bind(Dt()))},function(e){(y&&!Q||L)&&(Dt().setPageToScrollToIndex(e),Et().setReaderStateChapters(function(e){return x(x({},e),{},{visibleChapters:x(x({},e.visibleChapters),{},{scrollIntoView:!1,resumeMode:void 0})})}))},function(e){return Le(e,et,Dt().setTransitionPageMode.bind(Dt()))}),function(e,t,r,n,i,o,a){var s=b(h.useState(a===ee.DOUBLE_PAGE),2),u=s[0],l=s[1];h.useLayoutEffect(function(){if(u&&a!==ee.DOUBLE_PAGE){l(!1);var s=nr(r);return n(s),void i(s.map(function(e){return{url:e.primary.url,isSpread:!1}}))}a===ee.DOUBLE_PAGE&&(u||o(Rt(Pt(e,t))),n(t),l(a===ee.DOUBLE_PAGE))},[t,a])}(t,Pe,ae,function(e){return Le(e,de,Dt().setPages.bind(Dt()),!0)},function(e){return Le(e,me,et,!0)},function(e){return Le(e,et,r)},o),Te||j||w||T?q.error?Ie?null:C.jsx(D,{sx:{minHeight:"100%",minWidth:"100%",display:"grid",placeItems:"center",position:"relative"},children:C.jsx(qr,{message:F._({id:"6m5aox"}),messageExtra:it(q.error),retry:function(){Oe()}})}):q.loading||!Q?Ie?null:C.jsx(D,{sx:{minHeight:"100%",minWidth:"100%",display:"grid",placeItems:"center"},children:C.jsx(Fe,{})}):null==p||ne?C.jsxs(M,{ref:Ce,sx:x(x(x(x(x({width:"fit-content",height:"fit-content",margin:"auto",flexWrap:"nowrap"},P(o===ee.CONTINUOUS_HORIZONTAL,{minHeight:V})),P(or(o),{minWidth:H})),P(Ie,{maxWidth:0,maxHeight:0,minWidth:"unset",minHeight:"unset",overflow:"hidden",margin:"unset"})),P(or(o)&&fr(a,s),{alignItems:"center"})),P(o===ee.CONTINUOUS_HORIZONTAL,x(x({},P("ltr"===G,{flexDirection:we?"row":"row-reverse"})),P("rtl"===G,{flexDirection:we?"row-reverse":"row"})))),children:[!R&&C.jsx(Bi,{chapterId:p,previousChapterId:f,nextChapterId:g,isCurrentChapter:j,isPreviousChapterVisible:v,isNextChapterVisible:m,imageWrapper:ye.current,scrollElement:z}),Me&&C.jsx(Oi,{chapterId:p,type:K.PREVIOUS}),C.jsx(je,{ref:ye,totalPages:ne,currentPageIndex:t,pages:Pe,transitionPageMode:n,pageLoadStates:fe,retryFailedPagesKeyPrefix:i,imageRefs:Se,onLoad:Re,onError:ke,isCurrentChapter:j,isPreviousChapter:w,isNextChapter:T,readingMode:o,imagePreLoadAmount:c,readingDirection:l,pageScaleMode:s,pageGap:d,customFilter:N,shouldStretchPage:B,readerWidth:a,readerNavBarWidth:_,isPreloadMode:R,resumeMode:A,handleAsInitialRender:L}),De&&C.jsx(Oi,{chapterId:p,type:K.NEXT})]}):Ie?null:C.jsx(D,{sx:{minWidth:"100%",minHeight:"100%",position:"relative"},children:C.jsx(qr,{message:F._({id:"Oo/WWc"}),retry:Oe})}):null},Wi=h.memo(_i),Hi=function(e,t){h.useLayoutEffect(function(){Dt().setPageToScrollToIndex(t)},[e])},Vi=function(e,t,r){var n=h.useRef({width:window.innerWidth,height:window.innerHeight}),i=h.useRef(!1),o=h.useRef(void 0),a=h.useRef(null),s=h.useCallback(function(){var s=n.current,u=s.width,l=s.height;n.current={width:window.innerWidth,height:window.innerHeight},i.current||(i.current=!0,a.current=r),function(e,t,r,n){if(!wt(e))return!1;var i=gr(t),o=vr(t),a=r!==window.innerWidth,s=n!==window.innerHeight;return i&&a||o&&s}(e,t,u,l)&&(Dt().setPageToScrollToIndex(a.current),clearTimeout(o.current),o.current=setTimeout(function(){i.current=!1,a.current=null},50))},[e,t,r]);Jr("resize",s)},zi=function(e){var t=h.useRef({left:0,top:0,visibleElement:void 0,visibleElementLeft:0,visibleElementTop:0});return h.useEffect(function(){var r=e.current;if(!r)return function(){};var n=function(){var e,n,i=t.current.visibleElement;t.current=x(x({},t.current),{},{left:r.scrollLeft,top:r.scrollTop,visibleElementLeft:null!==(e=null==i?void 0:i.offsetLeft)&&void 0!==e?e:0,visibleElementTop:null!==(n=null==i?void 0:i.offsetTop)&&void 0!==n?n:0})};return r.addEventListener("scroll",n,{passive:!0}),function(){return r.removeEventListener("scroll",n)}},[]),h.useEffect(function(){var r=e.current;if(!r)return function(){};var n=function(e,t){return Array.from(e).filter(function(e){return e instanceof HTMLElement}).flatMap(function(e){return e instanceof HTMLImageElement?[e]:Array.from(e.querySelectorAll("img"))}).forEach(t)},i=new IntersectionObserver(function(e){var r=e.find(function(e){return e.isIntersecting});(null==r?void 0:r.target)instanceof HTMLElement&&(t.current=x(x({},t.current),{},{visibleElement:r.target,visibleElementLeft:r.target.offsetLeft,visibleElementTop:r.target.offsetTop}))}),o=new MutationObserver(function(e){var t,r=s(e);try{for(r.s();!(t=r.n()).done;){var o=t.value;n(o.addedNodes,function(e){return i.observe(e)}),n(o.removedNodes,function(e){return i.unobserve(e)})}}catch(a){r.e(a)}finally{r.f()}});return o.observe(r,{childList:!0,subtree:!0}),function(){o.disconnect(),i.disconnect()}},[]),t},Ui=function(e,t,r,n,i,o,a,u,l,c,d){!function(e,t,r,n,i,o,a){var u=zi(e),l=function(){var t=e.current,s=u.current,l=s.left,c=s.top,d=s.visibleElementLeft,p=s.visibleElementTop,f=s.visibleElement;if(!t||!a||!f)return!1;var h=hr(r,i,o),g=0===n;if(h.previous||!g)return!1;var v=l-d+f.offsetLeft,x=c-p+f.offsetTop;return t.scrollTo(v,x),!0};h.useEffect(function(){var t=e.current;if(!t||!a)return function(){};var r=!1,n=function(e,t){Array.from(e).filter(function(e){return e instanceof HTMLElement}).flatMap(function(e){return e instanceof HTMLImageElement?[e]:Array.from(e.querySelectorAll("img"))}).forEach(t)},i=new ResizeObserver(function(){r||(r=l())&&i.disconnect()}),o=new MutationObserver(function(e){var t,r=s(e);try{for(r.s();!(t=r.n()).done;){var o=t.value;n(o.addedNodes,function(e){return i.observe(e)}),n(o.removedNodes,function(e){return i.unobserve(e)})}}catch(a){r.e(a)}finally{r.f()}});return o.observe(t,{childList:!0,subtree:!0}),function(){o.disconnect(),i.disconnect()}},[t]),h.useLayoutEffect(function(){l()},[t])}(e,t,r,n,i,o,wt(a)),function(e,t){var r=zi(e),n=wt(t),i=or(t);h.useEffect(function(){var t=e.current;if(!t||!n)return function(){};var o=function(e,t){return Array.from(e).filter(function(e){return e instanceof HTMLElement}).flatMap(function(e){return e instanceof HTMLImageElement?[e]:Array.from(e.querySelectorAll("img"))}).forEach(t)},a=new ResizeObserver(function(e){var n=r.current,o=n.left,a=n.top,s=n.visibleElement,u=n.visibleElementLeft,l=n.visibleElementTop;if(s&&e.filter(function(e){return e.target instanceof HTMLElement&&!(!e.target.clientWidth&&!e.target.clientHeight)&&(i?e.target.offsetTop<a:Math.abs(e.target.offsetLeft)<Math.abs(o))}).length){var c=o-u+s.offsetLeft,d=a-l+s.offsetTop;t.scrollTo(c,d)}}),u=new MutationObserver(function(e){var t,r=s(e);try{for(r.s();!(t=r.n()).done;){var n=t.value;o(n.addedNodes,function(e){return a.observe(e)}),o(n.removedNodes,function(e){return a.unobserve(e)})}}catch(i){r.e(i)}finally{r.f()}});return u.observe(t,{childList:!0,subtree:!0}),function(){u.disconnect(),a.disconnect()}},[n,i])}(e,a),Vi(a,l,n),Hi(u,n),Hi(a,n),Hi(l,n),Hi(c,n),Hi("".concat(d.value,"_").concat(d.enabled),n)},Fi=m(m(m(m(m({},ee.SINGLE_PAGE,ot.X),ee.DOUBLE_PAGE,ot.X),ee.CONTINUOUS_VERTICAL,ot.Y),ee.CONTINUOUS_HORIZONTAL,ot.X),ee.WEBTOON,ot.Y),Gi=function(e){var t,r=e.readerNavBarWidth,n=e.updateCurrentPageIndex,i=e.ref,o=ue().direction,a=qt(function(e){return e.isVisible}),s=St(function(e){return{currentPageIndex:e.currentPageIndex,pageToScrollToIndex:e.pageToScrollToIndex,pages:e.pages,totalPages:e.totalPages,transitionPageMode:e.transitionPageMode,retryFailedPagesKeyPrefix:e.retryFailedPagesKeyPrefix}}),u=s.currentPageIndex,l=s.pageToScrollToIndex,c=s.pages,d=s.totalPages,p=s.transitionPageMode,f=s.retryFailedPagesKeyPrefix,g=Zt(function(e){return{initialChapter:e.initialChapter,currentChapter:e.currentChapter,chapters:e.chapters,visibleChapters:e.visibleChapters,isCurrentChapterReady:e.isCurrentChapterReady}}),v=g.initialChapter,m=g.currentChapter,S=g.chapters,y=g.visibleChapters,j=g.isCurrentChapterReady,w=vt(function(e){return{readingMode:e.readingMode.value,readingDirection:e.readingDirection.value,readerWidth:e.readerWidth.value,pageScaleMode:e.pageScaleMode.value,shouldOffsetDoubleSpreads:e.shouldOffsetDoubleSpreads.value,imagePreLoadAmount:e.imagePreLoadAmount,pageGap:e.pageGap.value,customFilter:e.customFilter,shouldStretchPage:e.shouldStretchPage.value,isStaticNav:e.isStaticNav}}),T=w.readingMode,E=w.readingDirection,D=w.readerWidth,O=w.pageScaleMode,R=w.shouldOffsetDoubleSpreads,k=w.imagePreLoadAmount,L=w.pageGap,A=w.customFilter,N=w.shouldStretchPage,B=w.isStaticNav,_=(null!==(t=at().state)&&void 0!==t?t:{resumeMode:st.START}).resumeMode,W=void 0===_?st.START:_,H=h.useRef(null),V=Qr(i,H),z=or(T),U=wt(T),F=Ei(H);h.useEffect(function(){return Xt().setScrollRef(H.current)},[]);var G=ut.useGetScrollbarSize("width",H.current),X=ut.useGetScrollbarSize("height",H.current);h.useLayoutEffect(function(){var e=Lt().scrollbar;e.setXSize(G),e.setYSize(X)},[G,X]);var Y=h.useRef(c.map(function(){return null})),Z=b(h.useState({minChapterViewWidth:0,minChapterViewHeight:0,minChapterSizeSourceChapterId:-1}),2),q=Z[0],K=q.minChapterViewWidth,J=q.minChapterViewHeight,Q=q.minChapterSizeSourceChapterId,te=Z[1],re=b(h.useState({}),2)[1],ne=Fi[T],ie=E===I.LTR,oe=h.useMemo(function(){return S.findIndex(function(e){return e.id===(null==v?void 0:v.id)})},[S,null==v?void 0:v.id]),ae=h.useMemo(function(){return S.slice(Math.max(0,oe-y.trailing),Math.min(S.length,oe+y.leading+1))},[S,oe,y.trailing,y.leading]),se=h.useMemo(function(){return ae.findIndex(function(e){return e.id===(null==m?void 0:m.id)})},[m,ae]),le=h.useCallback(function(e,t,r){if(U){var n=r===Q;if(z){if(!n&&K>=e)return;te({minChapterViewWidth:e,minChapterViewHeight:0,minChapterSizeSourceChapterId:r})}else(n||J<t)&&te({minChapterViewWidth:0,minChapterViewHeight:t,minChapterSizeSourceChapterId:r})}},[U,z,K,J,Q]);if(function(e,t,r,n,i,o,a,s){h.useLayoutEffect(function(){if(null!=e){var u=Pt(e,t);if(i){var l=o.current[u.pagesIndex];null==l||l.scrollIntoView({block:"start",inline:rr(a,s)})}var c=Rt(u),d=c===r-1;Dt().setPageToScrollToIndex(null),n(c,!d,d)}},[e])}(l,c,d,n,U,Y,o,E),function(e,t,r,n,i){h.useLayoutEffect(function(){var e;t||null===(e=i.current)||void 0===e||e.scrollTo(tr(i.current,r,n),0)},[e])}(u,U,o,E,H),function(e){var t=h.useRef(void 0);h.useEffect(function(){var r=function(t){var r=e.current;r&&(r.style.cursor=t?"default":"none")},n=function(){r(!0),clearTimeout(t.current),t.current=setTimeout(function(){r(!1)},$(5).seconds.inWholeMilliseconds)};return n(),window.addEventListener("mousemove",n,{passive:!0}),function(){r(!0),window.removeEventListener("mousemove",n),clearTimeout(t.current)}},[])}(H),function(e,t,r){h.useEffect(function(){var n=r.current;if(e!==ee.CONTINUOUS_HORIZONTAL)return function(){};if(!n)return function(){};var i=function(e){Math.abs(e.deltaX)>Math.abs(e.deltaY)||Qe.isTrackPadLike()||(e.preventDefault(),e.shiftKey?n.scrollBy({top:e.deltaY}):n.scrollBy({left:t===I.LTR?e.deltaY:-1*e.deltaY}))};return n.addEventListener("wheel",i),function(){return n.removeEventListener("wheel",i)}},[e,t])}(T,E,H),function(e,t){var r=er(function(e){return{showPreview:e.showPreview}}).showPreview;h.useEffect(function(){var n,i,o=function(){e&&Tt().setIsVisible(!1),r&&It().setShowPreview(!1)};return null===(n=t.current)||void 0===n||n.addEventListener("wheel",o,{passive:!0}),null===(i=t.current)||void 0===i||i.addEventListener("touchmove",o,{passive:!0}),function(){var e,r;null===(e=t.current)||void 0===e||e.removeEventListener("wheel",o),null===(r=t.current)||void 0===r||r.removeEventListener("touchmove",o)}},[e,r])}(a,H),function(e,t){var r=Gt(function(e){return{isPaused:e.isPaused}}).isPaused;h.useEffect(function(){var r=Xt(),n=r.pause,i=r.resume;!e||t?i():n()},[e,r,t])}(a,B),Ui(H,null==m?void 0:m.id,se,u,ae,y,T,E,O,N,D),h.useLayoutEffect(function(){te({minChapterViewWidth:0,minChapterViewHeight:0,minChapterSizeSourceChapterId:-1}),re({})},[T]),!v||!m)throw new Error("ReaderViewer: illegal state - initialChapter and currentChapter should not be undefined");return C.jsx(M,{ref:V,sx:x(x({width:"100%",height:"100%",overflow:"auto",flexWrap:"nowrap"},P(z&&fr(D,O),{alignItems:"center"})),P(!z,x(x({},P("ltr"===o,{flexDirection:ie?"row":"row-reverse"})),P("rtl"===o,{flexDirection:ie?"row-reverse":"row"})))),onClick:function(e){return!F&&hn.handleClick(H.current,e)},onScroll:function(){return hn.updateCurrentPageOnScroll(Y,d-1,n,ne,E)},children:ae.map(function(e,t){var i,o,a,s,l=Math.max(0,ae.length-t-1),c=ae[l],d=null!==(i=ae[l+1])&&void 0!==i?i:S[oe+y.leading+1],h=null!==(o=ae[l-1])&&void 0!==o?o:S[oe-y.trailing-1],g=c.id===v.id,x=c.id===m.id,b=c.id===(null===(a=ae[se+1])||void 0===a?void 0:a.id),P=c.id===(null===(s=ae[se-1])||void 0===s?void 0:s.id),w=v.sourceOrder>c.sourceOrder,I=v.sourceOrder<c.sourceOrder,M=y.lastLeadingChapterSourceOrder===c.sourceOrder,B=y.lastTrailingChapterSourceOrder===c.sourceOrder,_=M&&y.isLeadingChapterPreloadMode||B&&y.isTrailingChapterPreloadMode,V=hr(l,ae,y),z=c.id===Q;return C.jsx(Wi,{chapterId:c.id,previousChapterId:null==d?void 0:d.id,nextChapterId:null==h?void 0:h.id,isPreviousChapterVisible:V.previous,isNextChapterVisible:V.next,lastPageRead:Be(c.lastPageRead,0,c.pageCount-1),currentPageIndex:mr(u,c,m,x,j,w,I,y),isInitialChapter:g,isCurrentChapter:x,isPreviousChapter:b,isNextChapter:P,isLeadingChapter:w,isTrailingChapter:I,isPreloadMode:_,imageRefs:Y,transitionPageMode:p,retryFailedPagesKeyPrefix:f,readingMode:T,readerWidth:D,pageScaleMode:O,shouldOffsetDoubleSpreads:R,readingDirection:E,updateCurrentPageIndex:x?n:et,scrollIntoView:x&&y.scrollIntoView,resumeMode:xr(x,g,w,I,y.resumeMode,W),pageGap:L,imagePreLoadAmount:k,customFilter:A,shouldStretchPage:N,readerNavBarWidth:r,onSizeChange:le,minWidth:z?0:K,minHeight:z?0:J,scrollElement:H.current},c.id)})})},Xi=Ct(h.memo(Gi),[function(){return{updateCurrentPageIndex:hn.useUpdateCurrentPageIndex()}},T],["readerNavBarWidth","updateCurrentPageIndex"]),Yi=Object.fromEntries(Object.values(v).map(function(e){return[e,{scopes:e}]})),Zi=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var n=t[0],i=t[1],o=t[2],a=t[3];return ct(n,i,x(x({preventDefault:!0},o),Yi.reader),a)},qi=function(e,t,r,n,i){if(n)mt.updateSetting(e,r[0]);else{var o=Nn(r.indexOf(t),r,i);void 0===o?mt.deleteSetting(e):mt.updateSetting(e,o)}},Ki=function(e){var t=e.scrollElementRef,r=mt.useGetThemeDirection(),n=d(),i=n.enableScope,o=n.disableScope,a=vt(function(e){return{hotkeys:e.hotkeys}}).hotkeys,s=mt.useExit();return Zi(a[lt.PREVIOUS_PAGE],function(){return hn.openPage("previous")}),Zi(a[lt.NEXT_PAGE],function(){return hn.openPage("next")}),Zi(a[lt.SCROLL_BACKWARD],function(){var e=Xt(),r=Mt(),n=r.readingMode,i=r.readingDirection,o=r.scrollAmount;e.isActive?e.setDirection(te.BACKWARD):t.current&&hn.scroll(te.BACKWARD,dt[n.value],n.value,i.value,t.current,o)}),Zi(a[lt.SCROLL_FORWARD],function(){var e=Xt(),r=Mt(),n=r.readingMode,i=r.readingDirection,o=r.scrollAmount;e.isActive?e.setDirection(te.FORWARD):t.current&&hn.scroll(te.FORWARD,dt[n.value],n.value,i.value,t.current,o)}),Zi(a[lt.PREVIOUS_CHAPTER],function(){return hn.openChapter(q("previous","next",r))},[r]),Zi(a[lt.NEXT_CHAPTER],function(){return hn.openChapter(q("next","previous",r))},[r]),Zi(a[lt.TOGGLE_MENU],function(){return Tt().setIsVisible(!Tt().isVisible)}),Zi(a[lt.CYCLE_SCALE_TYPE],function(){qi("pageScaleMode",Mt().pageScaleMode.value,Ee,Mt().pageScaleMode.isDefault,!0)},[]),Zi(a[lt.STRETCH_IMAGE],function(){return mt.updateSetting("shouldStretchPage",!Mt().shouldStretchPage.value)}),Zi(a[lt.OFFSET_SPREAD_PAGES],function(){return mt.setOffsetDoubleSpreads(!Mt().shouldOffsetDoubleSpreads.value)}),Zi(a[lt.CYCLE_READING_MODE],function(){qi("readingMode",Mt().readingMode.value,De,Mt().readingMode.isDefault,!0)}),Zi(a[lt.CYCLE_READING_DIRECTION],function(){qi("readingDirection",Mt().readingDirection.value,ke,Mt().readingDirection.isDefault,!0)}),Zi(a[lt.TOGGLE_AUTO_SCROLL],function(){return Xt().toggleActive()},{}),Zi(a[lt.AUTO_SCROLL_SPEED_DECREASE],function(){return mt.updateSetting("autoScroll",x(x({},Mt().autoScroll),{},{value:Math.min(Ae.max,Mt().autoScroll.value+Ae.step)}))}),Zi(a[lt.AUTO_SCROLL_SPEED_INCREASE],function(){return mt.updateSetting("autoScroll",x(x({},Mt().autoScroll),{},{value:Math.max(Ae.min,Mt().autoScroll.value-Ae.step)}))}),Zi(a[lt.EXIT_READER],s,[s]),h.useEffect(function(){return i(v.READER),function(){return o(v.READER)}},[]),null},Ji=$(5).seconds.inWholeMilliseconds,Qi=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=Math.max(e*t,1),o=r?-i:i;return n?-1*o:o},$i=function(e,t,r){return e*(t/100)/r};function eo(e,t,r,n,i){if(i(),e){var o,a=function(e){var t=e-(null!=o?o:e);o=e,n(t),r(requestAnimationFrame(a),"animationFrame")};r(requestAnimationFrame(a),"animationFrame")}else r(setInterval(function(){n(t)},t),"interval")}var to=function(e){var t=e.themeDirection,r=e.combinedDirection,n=Gt(function(e){return{scrollRef:e.scrollRef,direction:e.direction}}),i=n.scrollRef,o=n.direction,a=vt(function(e){return{readingMode:e.readingMode.value,autoScroll:e.autoScroll}}),s=a.readingMode,u=a.autoScroll,l=s===ee.CONTINUOUS_HORIZONTAL&&t!==r?q(o===te.BACKWARD,o===te.FORWARD,r):o===te.BACKWARD,c=wt(s),d=h.useCallback(function(){hn.openPage("next","ltr")},[]),p=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:G.Y,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:100,i=arguments.length>4&&void 0!==arguments[4]&&arguments[4],o=arguments.length>5&&void 0!==arguments[5]&&arguments[5],a="function"==typeof e,s=h.useRef(void 0),u=h.useRef(void 0),l=h.useRef(-1),c=b(h.useState(!1),2),d=c[0],p=c[1],f=b(h.useState(!1),2),g=f[0],v=f[1],x=b(h.useState({width:window.innerWidth,height:window.innerHeight}),2),m=x[0],C=x[1];re(document.documentElement,h.useCallback(function(){var e=window.innerWidth,t=window.innerHeight;m.width===e&&m.height===t||C({width:e,height:t})},[]));var S=h.useCallback(function(){clearTimeout(u.current),cancelAnimationFrame(l.current)},[]),y=h.useCallback(function(){p(!0)},[]),P=h.useCallback(function(){p(!1),v(!1),S()},[]),j=h.useCallback(function(){d?P():y()},[d]),w=h.useCallback(function(){v(!0)},[]),T=h.useCallback(function(){v(!1)},[]);return h.useEffect(function(){if(!e||!d)return function(){};if(g)return S(),function(){};var c=1e3*t;if(a)return eo(!1,c,function(e){u.current=e},e,S),function(){return S()};var p=e.current;if(!p)return function(){};s.current||(s.current=getComputedStyle(p));var f="rtl"===s.current.direction,h=r!==G.Y,v=r!==G.X,x=$i(window.innerWidth,n,c),m=$i(window.innerHeight,n,c);return eo(o,c,function(e,t){switch(t){case"interval":u.current=e;break;case"animationFrame":l.current=e;break;default:throw new Error('Unexpected "type" ('.concat(t,")"))}},function(e){p.scrollBy({top:Number(v)*Qi(m,e,!1,i),left:Number(h)*Qi(x,e,f,i),behavior:o?void 0:"smooth"})},S),function(){return S()}},[e,t,n,m,d,g,i,o]),h.useMemo(function(){return{isActive:d,isPaused:g,start:y,cancel:P,toggleActive:j,pause:w,resume:T}},[d,g,y,P,j,w,T])}(c?i:d,u.value,dt[s],U.MEDIUM,l,u.smooth);return h.useEffect(function(){var e=Xt();e.setIsActive(p.isActive),e.setIsPaused(p.isPaused),e.setStart(p.start),e.setCancel(p.cancel),e.setToggleActive(p.toggleActive),e.setPause(p.pause),e.setResume(p.resume)},[p]),null},ro=Ct(h.memo(to),[function(){return{themeDirection:ue().direction}},function(){return{combinedDirection:mt.useGetThemeDirection()}}],["themeDirection","combinedDirection"]),no=function(e){var t,r,n,i=e.setOverride,o=e.readerNavBarWidth,a=ve(),s=a.i18n,u=(a._,Yt(function(e){return e.manga})),l=Zt(function(e){return{mangaChapters:e.mangaChapters,initialChapter:e.initialChapter,chapterForDuplicatesHandling:e.chapterForDuplicatesHandling,currentChapter:e.currentChapter}}),c=l.mangaChapters,d=l.initialChapter,p=l.chapterForDuplicatesHandling,f=l.currentChapter,g=vt(function(e){return{shouldSkipDupChapters:e.shouldSkipDupChapters,shouldSkipFilteredChapters:e.shouldSkipFilteredChapters,backgroundColor:e.backgroundColor,readingMode:e.readingMode,tapZoneLayout:e.tapZoneLayout,tapZoneInvertMode:e.tapZoneInvertMode,shouldShowReadingModePreview:e.shouldShowReadingModePreview,shouldShowTapZoneLayoutPreview:e.shouldShowTapZoneLayoutPreview}}),v=g.shouldSkipDupChapters,m=g.shouldSkipFilteredChapters,S=g.backgroundColor,y=g.readingMode,P=g.tapZoneLayout,j=g.tapZoneInvertMode,w=g.shouldShowReadingModePreview,T=g.shouldShowTapZoneLayoutPreview,I=h.useRef(null),E=b(h.useState(!1),2),M=E[0],O=E[1],R=ft(),k=R.chapterSourceOrder,L=R.mangaId,A=Number(k),N=Number(L),B=He.useGetManga(ht,N),_=He.useGetMangaChapters(gt,N);$r(u&&f?"".concat(u.title,": ").concat(f.name):s._({id:"H7O2dc",values:{mangaId:N,chapterSourceOrder:A}}));var W=Pr(),H=W.metadata,V=W.settings,z=W.request,U=Br(null!=u?u:Yr),F=void 0===f||!M||B.loading||_.loading||z.loading,G=null!==(t=null!==(r=B.error)&&void 0!==r?r:_.error)&&void 0!==t?t:z.error;return h.useEffect(function(){var e;Lt().setManga(null===(e=B.data)||void 0===e?void 0:e.manga)},[null===(n=B.data)||void 0===n?void 0:n.manga]),h.useEffect(function(){return function(){Lt().reset()}},[]),function(e,t,r,n,i){var o;h.useEffect(function(){var o,a=null===(o=e.data)||void 0===o?void 0:o.manga;if(a&&!t.loading&&!t.error){var s=Cr(a,r),u=br(a,s.shouldUseAutoWebtoonMode,s.readingMode),l=x(x({},r),{},{readingMode:u?ee.WEBTOON:r.readingMode}),c=u?ee.WEBTOON:s.readingMode.value,d=Sr("global",{meta:n},l,void 0,c),p=Cr(a,d);Mt().setSettings(p),i(!0)}},[null===(o=e.data)||void 0===o?void 0:o.manga,r])}(B,z,V,H,O),function(e,t,r,n,i,o,a,s){var u=ve(),l=u.i18n,c=(u._,h.useRef(void 0)),d=h.useRef(void 0),p=h.useRef(void 0),f=h.useRef(!0);h.useEffect(function(){if(!e&&!t&&r){var u=JSON.stringify(n)!==JSON.stringify(c.current);a&&u&&qe(l._(Me[n.value].title),{autoHideDuration:Ji}),c.current=n;var h=JSON.stringify(i)!==JSON.stringify(d.current)||JSON.stringify(o)!==JSON.stringify(p.current);s&&h&&(It().setShowPreview(!0),f.current&&setTimeout(function(){return It().setShowPreview(!1)},Ji)),d.current=i,p.current=o,f.current=!1}},[e,t,r,n.value,n.isDefault,i.value,i.isDefault,o.value,o.isDefault])}(F,G,M,y,P,j,w,T),function(e,t,r,n,i,o,a,s){var u,l=pt(),c=at().state,d=(null!=c?c:{}).updateInitialChapter?void 0:n;h.useEffect(function(){var n,u,p=null===(n=e.data)||void 0===n?void 0:n.chapters.nodes,f=p?null!==(u=p[p.length-t])&&void 0!==u?u:null:void 0,h=null!=d?d:f,g=null!=i?i:f,v=function(){if(!p||!g)return[];var e=a?Nr(null!=r?r:p,s):p;return(o?wr.removeDuplicates(g,e):e).map(function(e){return Wt(e.id)})}(),m=f&&wr.getNextChapter(f,v,{offset:Q.NEXT}),C=f&&wr.getNextChapter(f,v,{offset:Q.PREVIOUS}),b=null!=h&&h.id!==(null==d?void 0:d.id);b&&l("",{replace:!0,state:x(x({},c),{},{updateInitialChapter:void 0})}),Et().setReaderStateChapters(function(e){var t,r,n,i,o=(null==f?void 0:f.id)!==(null===(t=e.currentChapter)||void 0===t?void 0:t.id);return x(x({},e),{},{mangaChapters:null!==(r=e.mangaChapters)&&void 0!==r?r:p,chapters:v,initialChapter:h,chapterForDuplicatesHandling:g,currentChapter:f,nextChapter:m,previousChapter:C,isCurrentChapterReady:!o&&e.isCurrentChapterReady,visibleChapters:b?x(x({},yr.chapters.visibleChapters),{},{lastLeadingChapterSourceOrder:null!==(n=null==h?void 0:h.sourceOrder)&&void 0!==n?n:yr.chapters.visibleChapters.lastLeadingChapterSourceOrder,lastTrailingChapterSourceOrder:null!==(i=null==h?void 0:h.sourceOrder)&&void 0!==i?i:yr.chapters.visibleChapters.lastTrailingChapterSourceOrder,isLeadingChapterPreloadMode:!1,isTrailingChapterPreloadMode:!1,scrollIntoView:!!e.initialChapter}):e.visibleChapters})})},[null===(u=e.data)||void 0===u?void 0:u.chapters.nodes,t,o,a,d,s])}(_,A,c,d,p,v,m,U),h.useLayoutEffect(function(){return i({status:!0,value:C.jsxs(D,{sx:{position:"absolute"},children:[C.jsx(Ki,{scrollElementRef:I}),C.jsx(ji,{}),!I.current&&C.jsx(D,{onClick:function(){return Tt().setIsVisible(!Tt().isVisible)},sx:{position:"fixed",top:0,left:0,width:"100vw",height:"100vh",background:"transparent"}})]})}),function(){return i({status:!1,value:null})}},[I.current]),G?C.jsx(qr,{message:s._({id:"6m5aox"}),messageExtra:it(G),retry:function(){B.error&&B.refetch().catch(X("Reader::refetchManga")),z.error&&z.refetch().catch(X("Reader::refetchDefaultSettings")),_.error&&_.refetch().catch(X("Reader::refetchChapters"))}}):F?C.jsx(D,{sx:{height:"100vh",width:"100vw",display:"grid",placeItems:"center"},children:C.jsx(Fe,{})}):null===f?C.jsx(qr,{message:s._({id:"aU8Fbq"})}):u&&f?C.jsxs(D,{sx:{position:"relative",display:"flex",flexDirection:"column",minWidth:"calc(100vw - ".concat(o,"px)"),maxWidth:"calc(100vw - ".concat(o,"px)"),width:"calc(100vw - ".concat(o,"px)"),height:"100vh",marginLeft:"".concat(o,"px"),transition:function(e){return"width 0.".concat(e.transitions.duration.shortest,"s, margin-left 0.").concat(e.transitions.duration.shortest,"s")},overflow:"auto",backgroundColor:rt[S]},children:[C.jsx(Xi,{ref:I}),C.jsx(Ti,{}),C.jsx(Ii,{}),C.jsx(ro,{})]}):null};e("Reader",Ct(h.memo(no),[T],["setOverride","readerNavBarWidth"]))}}})}();
