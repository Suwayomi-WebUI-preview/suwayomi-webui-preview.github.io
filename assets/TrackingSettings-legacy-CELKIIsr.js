!function(){function e(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */var r,t,a="function"==typeof Symbol?Symbol:{},o=a.iterator||"@@iterator",i=a.toStringTag||"@@toStringTag";function c(e,a,o,i){var c=a&&a.prototype instanceof u?a:u,l=Object.create(c.prototype);return n(l,"_invoke",function(e,n,a){var o,i,c,u=0,l=a||[],g=!1,f={p:0,n:0,v:r,a:d,f:d.bind(r,4),d:function(e,n){return o=e,i=0,c=r,f.n=n,s}};function d(e,n){for(i=e,c=n,t=0;!g&&u&&!a&&t<l.length;t++){var a,o=l[t],d=f.p,p=o[2];e>3?(a=p===n)&&(c=o[(i=o[4])?5:(i=3,3)],o[4]=o[5]=r):o[0]<=d&&((a=e<2&&d<o[1])?(i=0,f.v=n,f.n=o[1]):d<p&&(a=e<3||o[0]>n||n>p)&&(o[4]=e,o[5]=n,f.n=p,i=0))}if(a||e>1)return s;throw g=!0,n}return function(a,l,p){if(u>1)throw TypeError("Generator is already running");for(g&&1===l&&d(l,p),i=l,c=p;(t=i<2?r:c)||!g;){o||(i?i<3?(i>1&&(f.n=-1),d(i,c)):f.n=c:f.v=c);try{if(u=2,o){if(i||(a="next"),t=o[a]){if(!(t=t.call(o,c)))throw TypeError("iterator result is not an object");if(!t.done)return t;c=t.value,i<2&&(i=0)}else 1===i&&(t=o.return)&&t.call(o),i<2&&(c=TypeError("The iterator does not provide a '"+a+"' method"),i=1);o=r}else if((t=(g=f.n<0)?c:e.call(n,f))!==s)break}catch(t){o=r,i=1,c=t}finally{u=1}}return{value:t,done:g}}}(e,o,i),!0),l}var s={};function u(){}function l(){}function g(){}t=Object.getPrototypeOf;var f=[][o]?t(t([][o]())):(n(t={},o,function(){return this}),t),d=g.prototype=u.prototype=Object.create(f);function p(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,g):(e.__proto__=g,n(e,i,"GeneratorFunction")),e.prototype=Object.create(d),e}return l.prototype=g,n(d,"constructor",g),n(g,"constructor",l),l.displayName="GeneratorFunction",n(g,i,"GeneratorFunction"),n(d),n(d,i,"Generator"),n(d,o,function(){return this}),n(d,"toString",function(){return"[object Generator]"}),(e=function(){return{w:c,m:p}})()}function n(e,r,t,a){var o=Object.defineProperty;try{o({},"",{})}catch(e){o=0}n=function(e,r,t,a){function i(r,t){n(e,r,function(e){return this._invoke(r,t,e)})}r?o?o(e,r,{value:t,enumerable:!a,configurable:!a,writable:!a}):e[r]=t:(i("next",0),i("throw",1),i("return",2))},n(e,r,t,a)}function r(e,n,r,t,a,o,i){try{var c=e[o](i),s=c.value}catch(e){return void r(e)}c.done?n(s):Promise.resolve(s).then(t,a)}function t(e){return function(){var n=this,t=arguments;return new Promise(function(a,o){var i=e.apply(n,t);function c(e){r(i,a,o,c,s,"next",e)}function s(e){r(i,a,o,c,s,"throw",e)}c(void 0)})}}System.register(["./index-legacy-CRNBsRAD.js","./EmptyViewAbsoluteCentered-legacy-BOhfrj6H.js","./Trackers-legacy-DfsJOIZ_.js","./AvatarSpinner-legacy-DaHG5-50.js","./LoginDialog-legacy-xL3qR9rO.js","./ListItemAvatar-legacy-CMfpcbjt.js","./Chip-legacy-BPUoWfBz.js","./useAppTitle-legacy-kPomSzM6.js","./Switch-legacy-BY2x4ayr.js","./ListSubheader-legacy-fP7Qezg7.js","./SpinnerImage-legacy-BH-NoRIF.js","./Refresh-legacy-0hyTZRpD.js","./Image-legacy-73WRnrFB.js","./SwitchBase-legacy-BOCZ57k1.js"],function(n,r){"use strict";var a,o,i,c,s,u,l,g,f,d,p,h,m,y,v,b,k,j,w,x,_,S,L,I,P;return{setters:[function(e){a=e.u,o=e.j,i=e.b5,c=e.r,s=e.v,u=e.cd,l=e.bb,g=e.m,f=e.g,d=e.e,p=e.Y,h=e.k,m=e.i,y=e.M,v=e.s,b=e.F},function(e){k=e.E},function(e){j=e.T},function(e){w=e.A},function(e){x=e.C},function(e){_=e.L},function(e){S=e.C},function(e){L=e.u},function(e){I=e.S},function(e){P=e.L},null,null,null,null],execute:function(){var r=function(n){var r=n.tracker,d=a().t,p=!r.isLoggedIn&&!!r.authUrl,h=function(){var n=t(e().m(function n(){var t;return e().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,e.n=1,c.logoutFromTracker(r.id).response;case 1:e.n=3;break;case 2:e.p=2,t=e.v,g(d("tracking.action.logout.label.failure",{name:r.name}),"error",f(t));case 3:return e.a(2)}},n,null,[[0,2]])}));return function(){return n.apply(this,arguments)}}(),m=function(){var n=t(e().m(function n(t,a){var o,i;return e().w(function(e){for(;;)switch(e.p=e.n){case 0:if(!p){e.n=1;break}return o={redirectUrl:"".concat(window.location.origin,"/tracker/login/oauth"),clientName:"Suwayomi-WebUI",trackerId:r.id,trackerName:r.name},window.open("".concat(r.authUrl,"&state=").concat(JSON.stringify(o)),"_self"),e.a(2);case 1:return e.p=1,e.n=2,c.loginTrackerCredentials(r.id,t,a).response;case 2:e.n=4;break;case 3:e.p=3,i=e.v,g(d("tracking.action.login.label.failure",{name:r.name}),"error",f(i));case 4:return e.a(2)}},n,null,[[1,3]])}));return function(e,r){return n.apply(this,arguments)}}(),y=function(){var n=t(e().m(function n(a,o){var i,c;return e().w(function(n){for(;;)switch(n.n){case 0:if(!p){n.n=1;break}return i={redirectUrl:"".concat(window.location.origin,"/tracker/login/oauth"),clientName:"Suwayomi-WebUI",trackerId:r.id,trackerName:r.name},window.open("".concat(r.authUrl,"&state=").concat(JSON.stringify(i)),"_self"),n.a(2);case 1:return c=x.showControlled({title:d(j.isLoggedIn(r)?"tracking.settings.dialog.title.log_out":"tracking.settings.dialog.title.log_in",{name:r.name}),isLoading:!1,isLoggedIn:j.isLoggedIn(r),username:a,password:o,loginLogout:function(){var n=t(e().m(function n(t,a){var o,i,s;return e().w(function(e){for(;;)switch(e.p=e.n){case 0:if(c.update({isLoading:!0,loginLogout:l}),!j.isLoggedIn(r)){e.n=5;break}return e.p=1,e.n=2,h();case 2:c.submit(),e.n=4;break;case 3:e.p=3,i=e.v,g(d("tracking.action.logout.label.failure",{name:r.name}),"error",f(i));case 4:return e.a(2);case 5:return e.p=5,e.n=6,m(t,a);case 6:c.submit(),e.n=9;break;case 7:return e.p=7,s=e.v,g(d("tracking.action.login.label.failure",{name:r.name}),"error",f(s)),o="__retry__",e.n=8,Promise.race([c.promise,Promise.resolve(o)]);case 8:e.v===o&&y(t,a);case 9:return e.a(2)}},n,null,[[5,7],[1,3]])}));return function(e,r){return n.apply(this,arguments)}}()},{id:"tracker-login-dialog"}),n.n=2,c.promise;case 2:return n.a(2)}},n)}));return function(e,r){return n.apply(this,arguments)}}();return o.jsxs(i,{onClick:function(){return y()},children:[o.jsx(_,{sx:{paddingRight:"20px"},children:o.jsx(w,{alt:"".concat(r.name),iconUrl:c.getValidImgUrlFor(r.icon),slots:{avatarProps:{variant:"rounded",sx:{width:64,height:64}},spinnerImageProps:{ignoreQueue:!0}}})}),o.jsx(s,{primary:r.name}),j.isLoggedIn(r)&&o.jsx(u,{children:o.jsx(S,{label:d("global.label.logged_in"),color:"success"})})]})};n("TrackingSettings",function(){var e,n=a().t;L(n("tracking.title"));var t=d(),i=t.settings,u=i.updateProgressAfterReading,l=i.updateProgressManualMarkRead,j=t.loading,w=t.request,x=w.error,_=w.refetch,S=b(function(e){return g(n("global.error.label.failed_to_save_changes"),"error",f(e))}),O=c.useGetTrackerList(p,{notifyOnNetworkStatusChange:!0}),T=O.data,C=O.loading,U=O.error,A=O.refetch,N=null!==(e=null==T?void 0:T.trackers.nodes)&&void 0!==e?e:[],F=j||C,G=null!=x?x:U;return G?o.jsx(k,{message:n("global.error.label.failed_to_load_data"),messageExtra:f(G),retry:function(){x&&_().catch(h()),U&&A().catch(h())}}):F?o.jsx(m,{}):o.jsxs(o.Fragment,{children:[o.jsxs(y,{sx:{pt:0},children:[o.jsxs(v,{children:[o.jsx(s,{primary:n("tracking.settings.label.update_progress_reading")}),o.jsx(I,{edge:"end",checked:u,onChange:function(e){return S("updateProgressAfterReading",e.target.checked)}})]}),o.jsxs(v,{children:[o.jsx(s,{primary:n("tracking.settings.label.update_progress_manual"),secondary:n("tracking.settings.label.update_progress_reading_description")}),o.jsx(I,{edge:"end",checked:l,onChange:function(e){return S("updateProgressManualMarkRead",e.target.checked)}})]})]}),o.jsx(y,{subheader:o.jsx(P,{component:"div",id:"tracking-trackers",children:n("tracking.settings.title.trackers")}),children:N.map(function(e){return o.jsx(r,{tracker:e},e.id)})})]})})}}})}();
