import{b as x,j as i,ac as Te,ab as xe,a1 as O,ae as fe,ai as be,T as tt,B as pe,aQ as st,I as vt,aR as qt,aS as Pt,aT as Yt,aU as $e,ax as Dt,aV as Ue,aW as It,aX as Qt,aY as Vt,aZ as n,au as Xt,u as Ke,aL as Ze,p as Je,a_ as Ee,i as ot,k as nt,n as rt,q as at,S as et,H as ze,o as pt,A as ft,L as bt,N as Zt,r as ye,a$ as gt,m as ce,e as Jt,g as Ve,f as es,ay as ts,b0 as ss,az as Qe,as as ht}from"./index-C-m0jeKQ.js";import{f as kt}from"./file-selector-DlHkLoY8.js";import{P as os}from"./Progress-Cyf04hKN.js";import{N as Ct}from"./NumberSetting-Bnak2S_H.js";import{c as qe,s as ve,a as ns,u as ge,b as Ne,_ as v,d as rs,e as te,f as ue,g as as,P as is,h as ls,C as cs,i as us,j as ds,k as ms,l as it,m as Fe,n as Me,o as ps,p as fs,q as De,r as bs,S as gs,t as lt,v as ct,w as ut,x as We,y as dt,z as hs,D as jt,A as Ge,M as ks,B as Ae,E as Nt,F as Ft,G as Lt,H as Cs,I as Ot,J as Ts,K as xs,L as ws,N as ys}from"./useMobilePicker-Bn--mUGd.js";import{E as Ss}from"./EmptyViewAbsoluteCentered-zEGoLAHu.js";import{u as Ms}from"./useAppTitle-DiZ3fN1f.js";import{C as vs}from"./CheckboxInput-Y0-zsS4I.js";import{F as Ps}from"./FormGroup-DRUre45f.js";import{u as Tt}from"./use-window-event-CRM5zWF0.js";import{u as Ds}from"./use-merged-ref-DjOuqelg.js";import{L as Is}from"./ListSubheader-AsRr-NHi.js";import"./Slider-DI0ddmwd.js";import"./Chip-Df6B9ldg.js";import"./Checkbox-DI1kh5mM.js";import"./SwitchBase-DGdpRXkz.js";const Ye=({adapter:e,value:s,timezone:r,props:t})=>{if(s===null)return null;const{minTime:o,maxTime:l,minutesStep:a,shouldDisableTime:c,disableIgnoringDatePartForTimeValidation:d=!1,disablePast:u,disableFuture:k}=t,m=e.date(void 0,r),g=qe(d,e);switch(!0){case!e.isValid(s):return"invalidDate";case!!(o&&g(o,s)):return"minTime";case!!(l&&g(s,l)):return"maxTime";case!!(k&&e.isAfter(s,m)):return"disableFuture";case!!(u&&e.isBefore(s,m)):return"disablePast";case!!(c&&c(s,"hours")):return"shouldDisableTime-hours";case!!(c&&c(s,"minutes")):return"shouldDisableTime-minutes";case!!(c&&c(s,"seconds")):return"shouldDisableTime-seconds";case!!(a&&e.getMinutes(s)%a!==0):return"minutesStep";default:return null}};Ye.valueManager=ve;function Vs(e={}){const{enableAccessibleFieldDOMStructure:s=!0,ampm:r}=e;return x.useMemo(()=>({valueType:"time",validator:Ye,internal_valueManager:ve,internal_fieldValueManager:ns,internal_enableAccessibleFieldDOMStructure:s,internal_useApplyDefaultValuesToFieldInternalProps:Ns,internal_useOpenPickerButtonAriaLabel:js(r)}),[r,s])}function js(e){return function(r){const t=ge(),o=Ne();return x.useMemo(()=>{const l=(e!=null?e:t.is12HourCycleInCurrentLocale())?"fullTime12h":"fullTime24h",a=t.isValid(r)?t.format(r,l):null;return o.openTimePickerDialogue(a)},[r,o,t])}}function Ns(e){const s=ge(),r=At(e),t=x.useMemo(()=>{var o;return(o=e.ampm)!=null?o:s.is12HourCycleInCurrentLocale()},[e.ampm,s]);return x.useMemo(()=>{var o;return v({},e,r,{format:(o=e.format)!=null?o:t?s.formats.fullTime12h:s.formats.fullTime24h})},[e,r,t,s])}function At(e){return x.useMemo(()=>{var s,r;return{disablePast:(s=e.disablePast)!=null?s:!1,disableFuture:(r=e.disableFuture)!=null?r:!1}},[e.disablePast,e.disableFuture])}function Fs(e,s,r){const t=x.useRef(null),o=x.useRef(null),l=x.useCallback(a=>{a&&(o.current&&t.current&&o.current.removeEventListener(e,t.current,r),a.addEventListener(e,s,r),o.current=a,t.current=s)},[e,s,r]);return x.useEffect(()=>()=>{o.current&&t.current&&o.current.removeEventListener(e,t.current,r)},[e,r]),l}const Ls=e=>{const s=Vs(e);return rs({manager:s,props:e})},Os=["slots","slotProps","InputProps","inputProps"],Bt=x.forwardRef(function(s,r){const t=te({props:s,name:"MuiTimeField"}),{slots:o,slotProps:l}=t,a=ue(t,Os),c=as({slotProps:l,ref:r,externalForwardedProps:a}),d=Ls(c);return i.jsx(is,{slots:o,slotProps:l,inputRef:a.inputRef,children:i.jsx(ls,{fieldResponse:d,defaultOpenPickerIcon:cs})})});function As(e){return Te("MuiPickersToolbarText",e)}xe("MuiPickersToolbarText",["root"]);const Bs=["className","classes","selected","value"],_s=e=>be({root:["root"]},As,e),Rs=O(tt,{name:"MuiPickersToolbarText",slot:"Root"})(({theme:e})=>({transition:e.transitions.create("color"),color:(e.vars||e).palette.text.secondary,"&[data-selected]":{color:(e.vars||e).palette.text.primary}})),_t=x.forwardRef(function(s,r){const t=te({props:s,name:"MuiPickersToolbarText"}),{className:o,classes:l,selected:a,value:c}=t,d=ue(t,Bs),u=_s(l);return i.jsx(Rs,v({ref:r,className:fe(u.root,o),component:"span",ownerState:t},a&&{"data-selected":!0},d,{children:c}))}),Es=["align","className","classes","selected","typographyClassName","value","variant","width"],Hs=e=>be({root:["root"]},us,e),$s=O(pe,{name:"MuiPickersToolbarButton",slot:"Root"})({padding:0,minWidth:16,textTransform:"none"}),Le=x.forwardRef(function(s,r){const t=te({props:s,name:"MuiPickersToolbarButton"}),{align:o,className:l,classes:a,selected:c,typographyClassName:d,value:u,variant:k,width:m}=t,g=ue(t,Es),b=Hs(a);return i.jsx($s,v({variant:"text",ref:r,className:fe(b.root,l),ownerState:t},m?{sx:{width:m}}:{},g,{children:i.jsx(_t,{align:o,className:d,variant:k,value:u,selected:c})}))});function Us(e){return Te("MuiTimePickerToolbar",e)}const Oe=xe("MuiTimePickerToolbar",["root","separator","hourMinuteLabel","hourMinuteLabelLandscape","hourMinuteLabelReverse","ampmSelection","ampmLandscape","ampmLabel"]),zs=["ampm","ampmInClock","className","classes"],Ws=(e,s)=>{const{pickerOrientation:r,toolbarDirection:t}=s;return be({root:["root"],separator:["separator"],hourMinuteLabel:["hourMinuteLabel",r==="landscape"&&"hourMinuteLabelLandscape",t==="rtl"&&"hourMinuteLabelReverse"],ampmSelection:["ampmSelection",r==="landscape"&&"ampmLandscape"],ampmLabel:["ampmLabel"]},Us,e)},Gs=O(ps,{name:"MuiTimePickerToolbar",slot:"Root"})({}),Ks=O(_t,{name:"MuiTimePickerToolbar",slot:"Separator"})({outline:0,margin:"0 4px 0 2px",cursor:"default"}),qs=O("div",{name:"MuiTimePickerToolbar",slot:"HourMinuteLabel",overridesResolver:(e,s)=>[{["&.".concat(Oe.hourMinuteLabelLandscape)]:s.hourMinuteLabelLandscape,["&.".concat(Oe.hourMinuteLabelReverse)]:s.hourMinuteLabelReverse},s.hourMinuteLabel]})({display:"flex",justifyContent:"flex-end",alignItems:"flex-end",variants:[{props:{toolbarDirection:"rtl"},style:{flexDirection:"row-reverse"}},{props:{pickerOrientation:"landscape"},style:{marginTop:"auto"}}]}),Ys=O("div",{name:"MuiTimePickerToolbar",slot:"AmPmSelection",overridesResolver:(e,s)=>[{[".".concat(Oe.ampmLabel)]:s.ampmLabel},{["&.".concat(Oe.ampmLandscape)]:s.ampmLandscape},s.ampmSelection]})({display:"flex",flexDirection:"column",marginRight:"auto",marginLeft:12,["& .".concat(Oe.ampmLabel)]:{fontSize:17},variants:[{props:{pickerOrientation:"landscape"},style:{margin:"4px 0 auto",flexDirection:"row",justifyContent:"space-around",flexBasis:"100%"}}]});function Qs(e){const s=te({props:e,name:"MuiTimePickerToolbar"}),{ampm:r,ampmInClock:t,className:o,classes:l}=s,a=ue(s,zs),c=ge(),d=Ne(),u=ds(),k=Ws(l,u),{value:m,setValue:g,disabled:b,readOnly:C,view:y,setView:D,views:I}=ms(),P=!!(r&&!t&&I.includes("hours")),{meridiemMode:N,handleMeridiemChange:p}=it(m,r,V=>g(V,{changeImportance:"set"})),S=V=>c.isValid(m)?c.format(m,V):"--",j=i.jsx(Ks,{tabIndex:-1,value:":",variant:"h3",selected:!1,className:k.separator});return i.jsxs(Gs,v({landscapeDirection:"row",toolbarTitle:d.timePickerToolbarTitle,ownerState:u,className:fe(k.root,o)},a,{children:[i.jsxs(qs,{className:k.hourMinuteLabel,ownerState:u,children:[Fe(I,"hours")&&i.jsx(Le,{tabIndex:-1,variant:"h3",onClick:()=>D("hours"),selected:y==="hours",value:S(r?"hours12h":"hours24h")}),Fe(I,["hours","minutes"])&&j,Fe(I,"minutes")&&i.jsx(Le,{tabIndex:-1,variant:"h3",onClick:()=>D("minutes"),selected:y==="minutes",value:S("minutes")}),Fe(I,["minutes","seconds"])&&j,Fe(I,"seconds")&&i.jsx(Le,{variant:"h3",onClick:()=>D("seconds"),selected:y==="seconds",value:S("seconds")})]}),P&&i.jsxs(Ys,{className:k.ampmSelection,ownerState:u,children:[i.jsx(Le,{disableRipple:!0,variant:"subtitle2",selected:N==="am",typographyClassName:k.ampmLabel,value:Me(c,"am"),onClick:C?void 0:()=>p("am"),disabled:b}),i.jsx(Le,{disableRipple:!0,variant:"subtitle2",selected:N==="pm",typographyClassName:k.ampmLabel,value:Me(c,"pm"),onClick:C?void 0:()=>p("pm"),disabled:b})]})]}))}function Rt(e,s){var c,d;const r=ge(),t=te({props:e,name:s}),o=At(t),l=(c=t.ampm)!=null?c:r.is12HourCycleInCurrentLocale(),a=x.useMemo(()=>{var u;return((u=t.localeText)==null?void 0:u.toolbarTitle)==null?t.localeText:v({},t.localeText,{timePickerToolbarTitle:t.localeText.toolbarTitle})},[t.localeText]);return v({},t,o,{ampm:l,localeText:a},fs({views:t.views,openTo:t.openTo,defaultViews:["hours","minutes"],defaultOpenTo:"hours"}),{slots:v({toolbar:Qs},t.slots),slotProps:v({},t.slotProps,{toolbar:v({ampm:l,ampmInClock:t.ampmInClock},(d=t.slotProps)==null?void 0:d.toolbar)})})}function Xs(e){return Te("MuiTimeClock",e)}xe("MuiTimeClock",["root","arrowSwitcher"]);const je=220,Ce=36,Be={x:je/2,y:je/2},Et={x:Be.x,y:0},Zs=Et.x-Be.x,Js=Et.y-Be.y,eo=e=>e*(180/Math.PI),Ht=(e,s,r)=>{const t=s-Be.x,o=r-Be.y,l=Math.atan2(Zs,Js)-Math.atan2(t,o);let a=eo(l);a=Math.round(a/e)*e,a%=360;const c=Math.floor(a/e)||0,d=t**2+o**2,u=Math.sqrt(d);return{value:c,distance:u}},to=(e,s,r=1)=>{const t=r*6;let{value:o}=Ht(t,e,s);return o=o*r%60,o},so=(e,s,r)=>{const{value:t,distance:o}=Ht(30,e,s);let l=t||12;return r?l%=12:o<je/2-Ce&&(l+=12,l%=24),l};function oo(e){return Te("MuiClockPointer",e)}xe("MuiClockPointer",["root","thumb"]);const no=["className","classes","isBetweenTwoClockValues","isInner","type","viewValue"],ro=e=>be({root:["root"],thumb:["thumb"]},oo,e),ao=O("div",{name:"MuiClockPointer",slot:"Root"})(({theme:e})=>({width:2,backgroundColor:(e.vars||e).palette.primary.main,position:"absolute",left:"calc(50% - 1px)",bottom:"50%",transformOrigin:"center bottom 0px",variants:[{props:{isClockPointerAnimated:!0},style:{transition:e.transitions.create(["transform","height"])}}]})),io=O("div",{name:"MuiClockPointer",slot:"Thumb"})(({theme:e})=>({width:4,height:4,backgroundColor:(e.vars||e).palette.primary.contrastText,borderRadius:"50%",position:"absolute",top:-21,left:"calc(50% - ".concat(Ce/2,"px)"),border:"".concat((Ce-4)/2,"px solid ").concat((e.vars||e).palette.primary.main),boxSizing:"content-box",variants:[{props:{isClockPointerBetweenTwoValues:!1},style:{backgroundColor:(e.vars||e).palette.primary.main}}]}));function lo(e){const s=te({props:e,name:"MuiClockPointer"}),{className:r,classes:t,isBetweenTwoClockValues:o,isInner:l,type:a,viewValue:c}=s,d=ue(s,no),u=x.useRef(a);x.useEffect(()=>{u.current=a},[a]);const{ownerState:k}=De(),m=v({},k,{isClockPointerAnimated:u.current!==a,isClockPointerBetweenTwoValues:o}),g=ro(t),b=()=>{let y=360/(a==="hours"?12:60)*c;return a==="hours"&&c>12&&(y-=360),{height:Math.round((l?.26:.4)*je),transform:"rotateZ(".concat(y,"deg)")}};return i.jsx(ao,v({style:b(),className:fe(g.root,r),ownerState:m},d,{children:i.jsx(io,{ownerState:m,className:g.thumb})}))}function co(e){return Te("MuiClock",e)}xe("MuiClock",["root","clock","wrapper","squareMask","pin","amButton","pmButton","meridiemText","selected"]);const uo=(e,s)=>{const r={root:["root"],clock:["clock"],wrapper:["wrapper"],squareMask:["squareMask"],pin:["pin"],amButton:["amButton",s.clockMeridiemMode==="am"&&"selected"],pmButton:["pmButton",s.clockMeridiemMode==="pm"&&"selected"],meridiemText:["meridiemText"]};return be(r,co,e)},mo=O("div",{name:"MuiClock",slot:"Root"})(({theme:e})=>({display:"flex",justifyContent:"center",alignItems:"center",margin:e.spacing(2)})),po=O("div",{name:"MuiClock",slot:"Clock"})({backgroundColor:"rgba(0,0,0,.07)",borderRadius:"50%",height:220,width:220,flexShrink:0,position:"relative",pointerEvents:"none"}),fo=O("div",{name:"MuiClock",slot:"Wrapper"})({"&:focus":{outline:"none"}}),bo=O("div",{name:"MuiClock",slot:"SquareMask"})({width:"100%",height:"100%",position:"absolute",pointerEvents:"auto",outline:0,touchAction:"none",userSelect:"none",variants:[{props:{isClockDisabled:!1},style:{"@media (pointer: fine)":{cursor:"pointer",borderRadius:"50%"},"&:active":{cursor:"move"}}}]}),go=O("div",{name:"MuiClock",slot:"Pin"})(({theme:e})=>({width:6,height:6,borderRadius:"50%",backgroundColor:(e.vars||e).palette.primary.main,position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)"})),$t=(e,s)=>({zIndex:1,bottom:8,paddingLeft:4,paddingRight:4,width:Ce,variants:[{props:{clockMeridiemMode:s},style:{backgroundColor:(e.vars||e).palette.primary.main,color:(e.vars||e).palette.primary.contrastText,"&:hover":{backgroundColor:(e.vars||e).palette.primary.light}}}]}),ho=O(vt,{name:"MuiClock",slot:"AmButton"})(({theme:e})=>v({},$t(e,"am"),{position:"absolute",left:8})),ko=O(vt,{name:"MuiClock",slot:"PmButton"})(({theme:e})=>v({},$t(e,"pm"),{position:"absolute",right:8})),xt=O(tt,{name:"MuiClock",slot:"MeridiemText"})({overflow:"hidden",whiteSpace:"nowrap",textOverflow:"ellipsis"});function Co(e){const s=te({props:e,name:"MuiClock"}),{ampm:r,ampmInClock:t,autoFocus:o,children:l,value:a,handleMeridiemChange:c,isTimeDisabled:d,meridiemMode:u,minutesStep:k=1,onChange:m,selectedId:g,type:b,viewValue:C,viewRange:[y,D],disabled:I=!1,readOnly:P,className:N,classes:p}=s,S=ge(),j=Ne(),{ownerState:V}=De(),A=v({},V,{isClockDisabled:I,clockMeridiemMode:u}),_=x.useRef(!1),w=uo(p,A),R=d(C,b),q=!r&&b==="hours"&&(C<1||C>12),F=(h,ie)=>{I||P||d(h,b)||m(h,ie)},L=(h,ie)=>{let{offsetX:U,offsetY:oe}=h;if(U===void 0){const ne=h.target.getBoundingClientRect();U=h.changedTouches[0].clientX-ne.left,oe=h.changedTouches[0].clientY-ne.top}const ee=b==="seconds"||b==="minutes"?to(U,oe,k):so(U,oe,!!r);F(ee,ie)},se=h=>{_.current=!0,L(h,"shallow")},X=h=>{_.current&&(L(h,"finish"),_.current=!1),h.preventDefault()},he=h=>{h.buttons>0&&L(h.nativeEvent,"shallow")},de=h=>{_.current&&(_.current=!1),L(h.nativeEvent,"finish")},J=b==="hours"?!1:C%5!==0,ke=b==="minutes"?k:1,B=x.useRef(null);st(()=>{o&&B.current.focus()},[o]);const H=h=>Math.max(y,Math.min(D,h)),K=h=>(h+(D+1))%(D+1),Y=h=>{if(!_.current)switch(h.key){case"Home":F(y,"partial"),h.preventDefault();break;case"End":F(D,"partial"),h.preventDefault();break;case"ArrowUp":F(K(C+ke),"partial"),h.preventDefault();break;case"ArrowDown":F(K(C-ke),"partial"),h.preventDefault();break;case"PageUp":F(H(C+5),"partial"),h.preventDefault();break;case"PageDown":F(H(C-5),"partial"),h.preventDefault();break;case"Enter":case" ":F(C,"finish"),h.preventDefault();break}};return i.jsxs(mo,{className:fe(w.root,N),children:[i.jsxs(po,{className:w.clock,children:[i.jsx(bo,{onTouchMove:se,onTouchStart:se,onTouchEnd:X,onMouseUp:de,onMouseMove:he,ownerState:A,className:w.squareMask}),!R&&i.jsxs(x.Fragment,{children:[i.jsx(go,{className:w.pin}),a!=null&&i.jsx(lo,{type:b,viewValue:C,isInner:q,isBetweenTwoClockValues:J})]}),i.jsx(fo,{"aria-activedescendant":g,"aria-label":j.clockLabelText(b,a==null?null:S.format(a,r?"fullTime12h":"fullTime24h")),ref:B,role:"listbox",onKeyDown:Y,tabIndex:0,className:w.wrapper,children:l})]}),r&&t&&i.jsxs(x.Fragment,{children:[i.jsx(ho,{onClick:P?void 0:()=>c("am"),disabled:I||u===null,ownerState:A,className:w.amButton,title:Me(S,"am"),children:i.jsx(xt,{variant:"caption",className:w.meridiemText,children:Me(S,"am")})}),i.jsx(ko,{disabled:I||u===null,onClick:P?void 0:()=>c("pm"),ownerState:A,className:w.pmButton,title:Me(S,"pm"),children:i.jsx(xt,{variant:"caption",className:w.meridiemText,children:Me(S,"pm")})})]})]})}function To(e){return Te("MuiClockNumber",e)}const He=xe("MuiClockNumber",["root","selected","disabled"]),xo=["className","classes","disabled","index","inner","label","selected"],wo=(e,s)=>{const r={root:["root",s.isClockNumberSelected&&"selected",s.isClockNumberDisabled&&"disabled"]};return be(r,To,e)},yo=O("span",{name:"MuiClockNumber",slot:"Root",overridesResolver:(e,s)=>[s.root,{["&.".concat(He.disabled)]:s.disabled},{["&.".concat(He.selected)]:s.selected}]})(({theme:e})=>({height:Ce,width:Ce,position:"absolute",left:"calc((100% - ".concat(Ce,"px) / 2)"),display:"inline-flex",justifyContent:"center",alignItems:"center",borderRadius:"50%",color:(e.vars||e).palette.text.primary,fontFamily:e.typography.fontFamily,"&:focused":{backgroundColor:(e.vars||e).palette.background.paper},["&.".concat(He.selected)]:{color:(e.vars||e).palette.primary.contrastText},["&.".concat(He.disabled)]:{pointerEvents:"none",color:(e.vars||e).palette.text.disabled},variants:[{props:{isClockNumberInInnerRing:!0},style:v({},e.typography.body2,{color:(e.vars||e).palette.text.secondary})}]}));function Ut(e){const s=te({props:e,name:"MuiClockNumber"}),{className:r,classes:t,disabled:o,index:l,inner:a,label:c,selected:d}=s,u=ue(s,xo),{ownerState:k}=De(),m=v({},k,{isClockNumberInInnerRing:a,isClockNumberSelected:d,isClockNumberDisabled:o}),g=wo(t,m),b=l%12/12*Math.PI*2-Math.PI/2,C=(je-Ce-2)/2*(a?.65:1),y=Math.round(Math.cos(b)*C),D=Math.round(Math.sin(b)*C);return i.jsx(yo,v({className:fe(g.root,r),"aria-disabled":o?!0:void 0,"aria-selected":d?!0:void 0,role:"option",style:{transform:"translate(".concat(y,"px, ").concat(D+(je-Ce)/2,"px")},ownerState:m},u,{children:c}))}const So=({ampm:e,value:s,getClockNumberText:r,isDisabled:t,selectedId:o,adapter:l})=>{const a=s?l.getHours(s):null,c=[],d=e?1:0,u=e?12:23,k=m=>a===null?!1:e?m===12?a===12||a===0:a===m||a-12===m:a===m;for(let m=d;m<=u;m+=1){let g=m.toString();m===0&&(g="00");const b=!e&&(m===0||m>12);g=l.formatNumber(g);const C=k(m);c.push(i.jsx(Ut,{id:C?o:void 0,index:m,inner:b,selected:C,disabled:t(m),label:g,"aria-label":r(g)},m))}return c},wt=({adapter:e,value:s,isDisabled:r,getClockNumberText:t,selectedId:o})=>{const l=e.formatNumber;return[[5,l("05")],[10,l("10")],[15,l("15")],[20,l("20")],[25,l("25")],[30,l("30")],[35,l("35")],[40,l("40")],[45,l("45")],[50,l("50")],[55,l("55")],[0,l("00")]].map(([a,c],d)=>{const u=a===s;return i.jsx(Ut,{label:c,id:u?o:void 0,index:d+1,inner:!1,disabled:r(a),selected:u,"aria-label":t(c)},a)})},mt=({value:e,referenceDate:s,adapter:r,props:t,timezone:o})=>{const l=x.useMemo(()=>ve.getInitialReferenceValue({value:e,adapter:r,props:t,referenceDate:s,granularity:gs.day,timezone:o,getTodayDate:()=>bs(r,o,"date")}),[s,o]);return e!=null?e:l},Mo=["ampm","ampmInClock","autoFocus","slots","slotProps","value","defaultValue","referenceDate","disableIgnoringDatePartForTimeValidation","maxTime","minTime","disableFuture","disablePast","minutesStep","shouldDisableTime","showViewSwitcher","onChange","view","views","openTo","onViewChange","focusedView","onFocusedViewChange","className","classes","disabled","readOnly","timezone"],vo=e=>be({root:["root"],arrowSwitcher:["arrowSwitcher"]},Xs,e),Po=O(dt,{name:"MuiTimeClock",slot:"Root"})({display:"flex",flexDirection:"column",position:"relative"}),Do=O(hs,{name:"MuiTimeClock",slot:"ArrowSwitcher"})({position:"absolute",right:12,top:15}),Io=["hours","minutes"],Vo=x.forwardRef(function(s,r){const t=ge(),o=te({props:s,name:"MuiTimeClock"}),{ampm:l=t.is12HourCycleInCurrentLocale(),ampmInClock:a=!1,autoFocus:c,slots:d,slotProps:u,value:k,defaultValue:m,referenceDate:g,disableIgnoringDatePartForTimeValidation:b=!1,maxTime:C,minTime:y,disableFuture:D,disablePast:I,minutesStep:P=1,shouldDisableTime:N,showViewSwitcher:p,onChange:S,view:j,views:V=Io,openTo:A,onViewChange:_,focusedView:w,onFocusedViewChange:R,className:q,classes:F,disabled:L,readOnly:se,timezone:X}=o,he=ue(o,Mo),{value:de,handleValueChange:J,timezone:ke}=lt({name:"TimeClock",timezone:X,value:k,defaultValue:m,referenceDate:g,onChange:S,valueManager:ve}),B=mt({value:de,referenceDate:g,adapter:t,props:o,timezone:ke}),H=Ne(),K=ct(ke),Y=qt(),{ownerState:h}=De(),{view:ie,setView:U,previousView:oe,nextView:ee,setValueAndGoToNextView:ne}=ut({view:j,views:V,openTo:A,onViewChange:_,onChange:J,focusedView:w,onFocusedViewChange:R}),{meridiemMode:re,handleMeridiemChange:ae}=it(B,l,ne),me=x.useCallback((W,Q)=>{const $=qe(b,t),Z=Q==="hours"||Q==="minutes"&&V.includes("seconds"),f=({start:M,end:E})=>!(y&&$(y,E)||C&&$(M,C)||D&&$(M,K)||I&&$(K,Z?E:M)),T=(M,E=1)=>{if(M%E!==0)return!1;if(N)switch(Q){case"hours":return!N(t.setHours(B,M),"hours");case"minutes":return!N(t.setMinutes(B,M),"minutes");case"seconds":return!N(t.setSeconds(B,M),"seconds");default:return!1}return!0};switch(Q){case"hours":{const M=We(W,re,l),E=t.setHours(B,M);if(t.getHours(E)!==M)return!0;const G=t.setSeconds(t.setMinutes(E,0),0),Ie=t.setSeconds(t.setMinutes(E,59),59);return!f({start:G,end:Ie})||!T(M)}case"minutes":{const M=t.setMinutes(B,W),E=t.setSeconds(M,0),G=t.setSeconds(M,59);return!f({start:E,end:G})||!T(W,P)}case"seconds":{const M=t.setSeconds(B,W);return!f({start:M,end:M})||!T(W)}default:throw new Error("not supported")}},[l,B,b,C,re,y,P,N,t,D,I,K,V]),we=x.useMemo(()=>{switch(ie){case"hours":{const W=(Z,f)=>{const T=We(Z,re,l);ne(t.setHours(B,T),f,"hours")},Q=t.getHours(B);let $;return l?Q>12?$=[12,23]:$=[0,11]:$=[0,23],{onChange:W,viewValue:Q,children:So({value:de,adapter:t,ampm:l,getClockNumberText:H.hoursClockNumberText,isDisabled:Z=>L||me(Z,"hours"),selectedId:Y}),viewRange:$}}case"minutes":{const W=t.getMinutes(B);return{viewValue:W,onChange:($,Z)=>{ne(t.setMinutes(B,$),Z,"minutes")},children:wt({adapter:t,value:W,getClockNumberText:H.minutesClockNumberText,isDisabled:$=>L||me($,"minutes"),selectedId:Y}),viewRange:[0,59]}}case"seconds":{const W=t.getSeconds(B);return{viewValue:W,onChange:($,Z)=>{ne(t.setSeconds(B,$),Z,"seconds")},children:wt({adapter:t,value:W,getClockNumberText:H.secondsClockNumberText,isDisabled:$=>L||me($,"seconds"),selectedId:Y}),viewRange:[0,59]}}default:throw new Error("You must provide the type for ClockView")}},[ie,t,de,l,H.hoursClockNumberText,H.minutesClockNumberText,H.secondsClockNumberText,re,ne,B,me,Y,L]),Pe=vo(F);return i.jsxs(Po,v({ref:r,className:fe(Pe.root,q),ownerState:h},he,{children:[i.jsx(Co,v({autoFocus:c!=null?c:!!w,ampmInClock:a&&V.includes("hours"),value:de,type:ie,ampm:l,minutesStep:P,isTimeDisabled:me,meridiemMode:re,handleMeridiemChange:ae,selectedId:Y,disabled:L,readOnly:se},we)),p&&i.jsx(Do,{className:Pe.arrowSwitcher,slots:d,slotProps:u,onGoToPrevious:()=>U(oe),isPreviousDisabled:!oe,previousLabel:H.openPreviousView,onGoToNext:()=>U(ee),isNextDisabled:!ee,nextLabel:H.openNextView,ownerState:h})]}))});function jo(e){return Te("MuiDigitalClock",e)}xe("MuiDigitalClock",["root","list","item"]);const No=["ampm","timeStep","autoFocus","slots","slotProps","value","defaultValue","referenceDate","disableIgnoringDatePartForTimeValidation","maxTime","minTime","disableFuture","disablePast","minutesStep","shouldDisableTime","onChange","view","openTo","onViewChange","focusedView","onFocusedViewChange","className","classes","disabled","readOnly","views","skipDisabled","timezone"],Fo=e=>be({root:["root"],list:["list"],item:["item"]},jo,e),Lo=O(dt,{name:"MuiDigitalClock",slot:"Root"})({overflowY:"auto",width:"100%",scrollbarWidth:"thin","@media (prefers-reduced-motion: no-preference)":{scrollBehavior:"auto"},maxHeight:jt,variants:[{props:{hasDigitalClockAlreadyBeenRendered:!0},style:{"@media (prefers-reduced-motion: no-preference)":{scrollBehavior:"smooth"}}}]}),Oo=O(It,{name:"MuiDigitalClock",slot:"List"})({padding:0}),Ao=O(Dt,{name:"MuiDigitalClock",slot:"Item",shouldForwardProp:e=>e!=="itemValue"&&e!=="formattedValue"})(({theme:e})=>({padding:"8px 16px",margin:"2px 4px","&:first-of-type":{marginTop:4},"&:hover":{backgroundColor:e.vars?"rgba(".concat(e.vars.palette.primary.mainChannel," / ").concat(e.vars.palette.action.hoverOpacity,")"):Ue(e.palette.primary.main,e.palette.action.hoverOpacity)},"&.Mui-selected":{backgroundColor:(e.vars||e).palette.primary.main,color:(e.vars||e).palette.primary.contrastText,"&:focus-visible, &:hover":{backgroundColor:(e.vars||e).palette.primary.dark}},"&.Mui-focusVisible":{backgroundColor:e.vars?"rgba(".concat(e.vars.palette.primary.mainChannel," / ").concat(e.vars.palette.action.focusOpacity,")"):Ue(e.palette.primary.main,e.palette.action.focusOpacity)}})),Bo=x.forwardRef(function(s,r){var Z;const t=ge(),o=x.useRef(null),l=Pt(r,o),a=x.useRef(null),c=te({props:s,name:"MuiDigitalClock"}),{ampm:d=t.is12HourCycleInCurrentLocale(),timeStep:u=30,autoFocus:k,slots:m,slotProps:g,value:b,defaultValue:C,referenceDate:y,disableIgnoringDatePartForTimeValidation:D=!1,maxTime:I,minTime:P,disableFuture:N,disablePast:p,minutesStep:S=1,shouldDisableTime:j,onChange:V,view:A,openTo:_,onViewChange:w,focusedView:R,onFocusedViewChange:q,className:F,classes:L,disabled:se,readOnly:X,views:he=["hours"],skipDisabled:de=!1,timezone:J}=c,ke=ue(c,No),{value:B,handleValueChange:H,timezone:K}=lt({name:"DigitalClock",timezone:J,value:b,defaultValue:C,referenceDate:y,onChange:V,valueManager:ve}),Y=Ne(),h=ct(K),{ownerState:ie}=De(),U=v({},ie,{hasDigitalClockAlreadyBeenRendered:!!o.current}),oe=Fo(L),ee=(Z=m==null?void 0:m.digitalClockItem)!=null?Z:Ao,ne=Yt({elementType:ee,externalSlotProps:g==null?void 0:g.digitalClockItem,ownerState:U,className:oe.item}),re=mt({value:B,referenceDate:y,adapter:t,props:c,timezone:K}),ae=$e(f=>H(f,"finish","hours")),{setValueAndGoToNextView:me}=ut({view:A,views:he,openTo:_,onViewChange:w,onChange:ae,focusedView:R,onFocusedViewChange:q}),we=$e(f=>{me(f,"finish")});st(()=>{if(o.current===null)return;const f=o.current.querySelector('[role="listbox"] [role="option"][tabindex="0"], [role="listbox"] [role="option"][aria-selected="true"]');if(!f)return;const T=f.offsetTop;(k||R)&&f.focus(),o.current.scrollTop=T-4});const Pe=x.useCallback(f=>{const T=qe(D,t),M=()=>!(P&&T(P,f)||I&&T(f,I)||N&&T(f,h)||p&&T(h,f)),E=()=>t.getMinutes(f)%S!==0?!1:j?!j(f,"hours"):!0;return!M()||!E()},[D,t,P,I,N,h,p,S,j]),W=x.useMemo(()=>{const f=[];let M=t.startOfDay(re);for(;t.isSameDay(re,M);)f.push(M),M=t.addMinutes(M,u);return f},[re,u,t]),Q=W.findIndex(f=>t.isEqual(f,re)),$=f=>{switch(f.key){case"PageUp":{const T=Ge(a.current)-5,M=a.current.children,E=Math.max(0,T),G=M[E];G&&G.focus(),f.preventDefault();break}case"PageDown":{const T=Ge(a.current)+5,M=a.current.children,E=Math.min(M.length-1,T),G=M[E];G&&G.focus(),f.preventDefault();break}}};return i.jsx(Lo,v({ref:l,className:fe(oe.root,F),ownerState:U},ke,{children:i.jsx(Oo,{ref:a,role:"listbox","aria-label":Y.timePickerToolbarTitle,className:oe.list,onKeyDown:$,children:W.map((f,T)=>{const M=Pe(f);if(de&&M)return null;const E=t.isEqual(f,B),G=t.format(f,d?"fullTime12h":"fullTime24h"),z=Q===T||Q===-1&&T===0?0:-1;return i.jsx(ee,v({onClick:()=>!X&&we(f),selected:E,disabled:se||M,disableRipple:X,role:"option","aria-disabled":X,"aria-selected":E,tabIndex:z,itemValue:f,formattedValue:G},ne,{children:G}),"".concat(f.valueOf(),"-").concat(G))})})}))});function _o(e){return Te("MuiMultiSectionDigitalClock",e)}xe("MuiMultiSectionDigitalClock",["root"]);function Ro(e){return Te("MuiMultiSectionDigitalClockSection",e)}xe("MuiMultiSectionDigitalClockSection",["root","item"]);const Eo=["autoFocus","onChange","className","classes","disabled","readOnly","items","active","slots","slotProps","skipDisabled"],Ho=e=>be({root:["root"],item:["item"]},Ro,e),$o=O(It,{name:"MuiMultiSectionDigitalClockSection",slot:"Root"})(({theme:e})=>({maxHeight:jt,width:56,padding:0,overflow:"hidden",scrollbarWidth:"thin","@media (prefers-reduced-motion: no-preference)":{scrollBehavior:"auto"},"@media (pointer: fine)":{"&:hover":{overflowY:"auto"}},"@media (pointer: none), (pointer: coarse)":{overflowY:"auto"},"&:not(:first-of-type)":{borderLeft:"1px solid ".concat((e.vars||e).palette.divider)},variants:[{props:{hasDigitalClockAlreadyBeenRendered:!0},style:{"@media (prefers-reduced-motion: no-preference)":{scrollBehavior:"smooth"}}}]})),Uo=O(Dt,{name:"MuiMultiSectionDigitalClockSection",slot:"Item"})(({theme:e})=>({padding:8,margin:"2px 4px",width:ks,justifyContent:"center","&:first-of-type":{marginTop:4},"&:hover":{backgroundColor:e.vars?"rgba(".concat(e.vars.palette.primary.mainChannel," / ").concat(e.vars.palette.action.hoverOpacity,")"):Ue(e.palette.primary.main,e.palette.action.hoverOpacity)},"&.Mui-selected":{backgroundColor:(e.vars||e).palette.primary.main,color:(e.vars||e).palette.primary.contrastText,"&:focus-visible, &:hover":{backgroundColor:(e.vars||e).palette.primary.dark}},"&.Mui-focusVisible":{backgroundColor:e.vars?"rgba(".concat(e.vars.palette.primary.mainChannel," / ").concat(e.vars.palette.action.focusOpacity,")"):Ue(e.palette.primary.main,e.palette.action.focusOpacity)}})),zo=x.forwardRef(function(s,r){var _;const t=x.useRef(null),o=Pt(r,t),l=x.useRef(null),a=te({props:s,name:"MuiMultiSectionDigitalClockSection"}),{autoFocus:c,onChange:d,className:u,classes:k,disabled:m,readOnly:g,items:b,active:C,slots:y,slotProps:D,skipDisabled:I}=a,P=ue(a,Eo),{ownerState:N}=De(),p=v({},N,{hasDigitalClockAlreadyBeenRendered:!!t.current}),S=Ho(k),j=(_=y==null?void 0:y.digitalClockSectionItem)!=null?_:Uo;st(()=>{if(t.current===null)return;const w=t.current.querySelector('[role="option"][tabindex="0"], [role="option"][aria-selected="true"]');if(C&&c&&w&&w.focus(),!w||l.current===w)return;l.current=w;const R=w.offsetTop,q=w.offsetHeight,F=t.current.clientHeight,L=t.current.scrollHeight,se=R-F/2+q/2,X=L-F,he=Math.min(se,X);t.current.scrollTop=Math.max(0,he)});const V=b.findIndex(w=>w.isFocused(w.value)),A=w=>{switch(w.key){case"PageUp":{const R=Ge(t.current)-5,q=t.current.children,F=Math.max(0,R),L=q[F];L&&L.focus(),w.preventDefault();break}case"PageDown":{const R=Ge(t.current)+5,q=t.current.children,F=Math.min(q.length-1,R),L=q[F];L&&L.focus(),w.preventDefault();break}}};return i.jsx($o,v({ref:o,className:fe(S.root,u),ownerState:p,autoFocusItem:c&&C,role:"listbox",onKeyDown:A},P,{children:b.map((w,R)=>{var X;const q=(X=w.isDisabled)==null?void 0:X.call(w,w.value),F=m||q;if(I&&F)return null;const L=w.isSelected(w.value),se=V===R||V===-1&&R===0?0:-1;return i.jsx(j,v({onClick:()=>!g&&d(w.value),selected:L,disabled:F,disableRipple:g,role:"option","aria-disabled":g||F||void 0,"aria-label":w.ariaLabel,"aria-selected":L,tabIndex:se,className:S.item},D==null?void 0:D.digitalClockSectionItem,{children:w.label}),w.label)})}))}),Wo=({now:e,value:s,adapter:r,ampm:t,isDisabled:o,resolveAriaLabel:l,timeStep:a,valueOrReferenceDate:c})=>{const d=s?r.getHours(s):null,u=[],k=(b,C)=>{const y=C!=null?C:d;return y===null?!1:t?b===12?y===12||y===0:y===b||y-12===b:y===b},m=b=>k(b,r.getHours(c)),g=t?11:23;for(let b=0;b<=g;b+=a){let C=r.format(r.setHours(e,b),t?"hours12h":"hours24h");const y=l(parseInt(C,10).toString());C=r.formatNumber(C),u.push({value:b,label:C,isSelected:k,isDisabled:o,isFocused:m,ariaLabel:y})}return u},yt=({value:e,adapter:s,isDisabled:r,timeStep:t,resolveLabel:o,resolveAriaLabel:l,hasValue:a=!0})=>{const c=u=>e===null?!1:a&&e===u,d=u=>e===u;return[...Array.from({length:Math.ceil(60/t)},(u,k)=>{const m=t*k;return{value:m,label:s.formatNumber(o(m)),isDisabled:r,isSelected:c,isFocused:d,ariaLabel:l(m.toString())}})]},Go=["ampm","timeSteps","autoFocus","slots","slotProps","value","defaultValue","referenceDate","disableIgnoringDatePartForTimeValidation","maxTime","minTime","disableFuture","disablePast","minutesStep","shouldDisableTime","onChange","view","views","openTo","onViewChange","focusedView","onFocusedViewChange","className","classes","disabled","readOnly","skipDisabled","timezone"],Ko=e=>be({root:["root"]},_o,e),qo=O(dt,{name:"MuiMultiSectionDigitalClock",slot:"Root"})(({theme:e})=>({flexDirection:"row",width:"100%",borderBottom:"1px solid ".concat((e.vars||e).palette.divider)})),Yo=x.forwardRef(function(s,r){const t=ge(),o=Qt(),l=te({props:s,name:"MuiMultiSectionDigitalClock"}),{ampm:a=t.is12HourCycleInCurrentLocale(),timeSteps:c,autoFocus:d,slots:u,slotProps:k,value:m,defaultValue:g,referenceDate:b,disableIgnoringDatePartForTimeValidation:C=!1,maxTime:y,minTime:D,disableFuture:I,disablePast:P,minutesStep:N=1,shouldDisableTime:p,onChange:S,view:j,views:V=["hours","minutes"],openTo:A,onViewChange:_,focusedView:w,onFocusedViewChange:R,className:q,classes:F,disabled:L,readOnly:se,skipDisabled:X=!1,timezone:he}=l,de=ue(l,Go),{value:J,handleValueChange:ke,timezone:B}=lt({name:"MultiSectionDigitalClock",timezone:he,value:m,defaultValue:g,referenceDate:b,onChange:S,valueManager:ve}),H=Ne(),K=ct(B),Y=x.useMemo(()=>v({hours:1,minutes:5,seconds:5},c),[c]),h=mt({value:J,referenceDate:b,adapter:t,props:l,timezone:B}),ie=$e((f,T,M)=>ke(f,T,M)),U=x.useMemo(()=>!a||!V.includes("hours")||V.includes("meridiem")?V:[...V,"meridiem"],[a,V]),{view:oe,setValueAndGoToNextView:ee,focusedView:ne}=ut({view:j,views:U,openTo:A,onViewChange:_,onChange:ie,focusedView:w,onFocusedViewChange:R}),re=$e(f=>{ee(f,"finish","meridiem")}),{meridiemMode:ae,handleMeridiemChange:me}=it(h,a,re,"finish"),we=x.useCallback((f,T)=>{const M=qe(C,t),E=T==="hours"||T==="minutes"&&U.includes("seconds"),G=({start:z,end:le})=>!(D&&M(D,le)||y&&M(z,y)||I&&M(z,K)||P&&M(K,E?le:z)),Ie=(z,le=1)=>{if(z%le!==0)return!1;if(p)switch(T){case"hours":return!p(t.setHours(h,z),"hours");case"minutes":return!p(t.setMinutes(h,z),"minutes");case"seconds":return!p(t.setSeconds(h,z),"seconds");default:return!1}return!0};switch(T){case"hours":{const z=We(f,ae,a),le=t.setHours(h,z);if(t.getHours(le)!==z)return!0;const Re=t.setSeconds(t.setMinutes(le,0),0),Kt=t.setSeconds(t.setMinutes(le,59),59);return!G({start:Re,end:Kt})||!Ie(z)}case"minutes":{const z=t.setMinutes(h,f),le=t.setSeconds(z,0),Re=t.setSeconds(z,59);return!G({start:le,end:Re})||!Ie(f,N)}case"seconds":{const z=t.setSeconds(h,f);return!G({start:z,end:z})||!Ie(f)}default:throw new Error("not supported")}},[a,h,C,y,ae,D,N,p,t,I,P,K,U]),Pe=x.useCallback(f=>{switch(f){case"hours":return{onChange:T=>{const M=We(T,ae,a);ee(t.setHours(h,M),"finish","hours")},items:Wo({now:K,value:J,ampm:a,adapter:t,isDisabled:T=>we(T,"hours"),timeStep:Y.hours,resolveAriaLabel:H.hoursClockNumberText,valueOrReferenceDate:h})};case"minutes":return{onChange:T=>{ee(t.setMinutes(h,T),"finish","minutes")},items:yt({value:t.getMinutes(h),adapter:t,isDisabled:T=>we(T,"minutes"),resolveLabel:T=>t.format(t.setMinutes(K,T),"minutes"),timeStep:Y.minutes,hasValue:!!J,resolveAriaLabel:H.minutesClockNumberText})};case"seconds":return{onChange:T=>{ee(t.setSeconds(h,T),"finish","seconds")},items:yt({value:t.getSeconds(h),adapter:t,isDisabled:T=>we(T,"seconds"),resolveLabel:T=>t.format(t.setSeconds(K,T),"seconds"),timeStep:Y.seconds,hasValue:!!J,resolveAriaLabel:H.secondsClockNumberText})};case"meridiem":{const T=Me(t,"am"),M=Me(t,"pm");return{onChange:me,items:[{value:"am",label:T,isSelected:()=>!!J&&ae==="am",isFocused:()=>!!h&&ae==="am",ariaLabel:T},{value:"pm",label:M,isSelected:()=>!!J&&ae==="pm",isFocused:()=>!!h&&ae==="pm",ariaLabel:M}]}}default:throw new Error("Unknown view: ".concat(f," found."))}},[K,J,a,t,Y.hours,Y.minutes,Y.seconds,H.hoursClockNumberText,H.minutesClockNumberText,H.secondsClockNumberText,ae,ee,h,we,me]),W=x.useMemo(()=>{if(!o)return U;const f=U.filter(T=>T!=="meridiem");return f.reverse(),U.includes("meridiem")&&f.push("meridiem"),f},[o,U]),Q=x.useMemo(()=>U.reduce((f,T)=>v({},f,{[T]:Pe(T)}),{}),[U,Pe]),{ownerState:$}=De(),Z=Ko(F);return i.jsx(qo,v({ref:r,className:fe(Z.root,q),ownerState:$,role:"group"},de,{children:W.map(f=>i.jsx(zo,{items:Q[f].items,onChange:Q[f].onChange,active:oe===f,autoFocus:d||ne===f,disabled:L,readOnly:se,slots:u,slotProps:k,skipDisabled:X,"aria-label":H.selectViewText(f)},f))}))}),Xe=({view:e,onViewChange:s,focusedView:r,onFocusedViewChange:t,views:o,value:l,defaultValue:a,referenceDate:c,onChange:d,className:u,classes:k,disableFuture:m,disablePast:g,minTime:b,maxTime:C,shouldDisableTime:y,minutesStep:D,ampm:I,ampmInClock:P,slots:N,slotProps:p,readOnly:S,disabled:j,sx:V,autoFocus:A,showViewSwitcher:_,disableIgnoringDatePartForTimeValidation:w,timezone:R})=>i.jsx(Vo,{view:e,onViewChange:s,focusedView:r&&Ae(r)?r:null,onFocusedViewChange:t,views:o.filter(Ae),value:l,defaultValue:a,referenceDate:c,onChange:d,className:u,classes:k,disableFuture:m,disablePast:g,minTime:b,maxTime:C,shouldDisableTime:y,minutesStep:D,ampm:I,ampmInClock:P,slots:N,slotProps:p,readOnly:S,disabled:j,sx:V,autoFocus:A,showViewSwitcher:_,disableIgnoringDatePartForTimeValidation:w,timezone:R}),Qo=({view:e,onViewChange:s,focusedView:r,onFocusedViewChange:t,views:o,value:l,defaultValue:a,referenceDate:c,onChange:d,className:u,classes:k,disableFuture:m,disablePast:g,minTime:b,maxTime:C,shouldDisableTime:y,minutesStep:D,ampm:I,slots:P,slotProps:N,readOnly:p,disabled:S,sx:j,autoFocus:V,disableIgnoringDatePartForTimeValidation:A,timeSteps:_,skipDisabled:w,timezone:R})=>i.jsx(Bo,{view:e,onViewChange:s,focusedView:r&&Ae(r)?r:null,onFocusedViewChange:t,views:o.filter(Ae),value:l,defaultValue:a,referenceDate:c,onChange:d,className:u,classes:k,disableFuture:m,disablePast:g,minTime:b,maxTime:C,shouldDisableTime:y,minutesStep:D,ampm:I,slots:P,slotProps:N,readOnly:p,disabled:S,sx:j,autoFocus:V,disableIgnoringDatePartForTimeValidation:A,timeStep:_==null?void 0:_.minutes,skipDisabled:w,timezone:R}),St=({view:e,onViewChange:s,focusedView:r,onFocusedViewChange:t,views:o,value:l,defaultValue:a,referenceDate:c,onChange:d,className:u,classes:k,disableFuture:m,disablePast:g,minTime:b,maxTime:C,shouldDisableTime:y,minutesStep:D,ampm:I,slots:P,slotProps:N,readOnly:p,disabled:S,sx:j,autoFocus:V,disableIgnoringDatePartForTimeValidation:A,timeSteps:_,skipDisabled:w,timezone:R})=>i.jsx(Yo,{view:e,onViewChange:s,focusedView:r&&Nt(r)?r:null,onFocusedViewChange:t,views:o.filter(Ae),value:l,defaultValue:a,referenceDate:c,onChange:d,className:u,classes:k,disableFuture:m,disablePast:g,minTime:b,maxTime:C,shouldDisableTime:y,minutesStep:D,ampm:I,slots:P,slotProps:N,readOnly:p,disabled:S,sx:j,autoFocus:V,disableIgnoringDatePartForTimeValidation:A,timeSteps:_,skipDisabled:w,timezone:R}),Xo=(e,s,r)=>r?s.filter(t=>!Nt(t)||t==="hours"):e?[...s,"meridiem"]:s,Zo=(e,s)=>{var r,t;return 24*60/(((r=e.hours)!=null?r:1)*((t=e.minutes)!=null?t:5))<=s};function Jo({thresholdToRenderTimeInASingleColumn:e,ampm:s,timeSteps:r,views:t}){const o=e!=null?e:24,l=v({hours:1,minutes:5,seconds:5},r),a=Zo(l,o);return{thresholdToRenderTimeInASingleColumn:o,timeSteps:l,shouldRenderTimeInASingleColumn:a,views:Xo(s,t,a)}}const zt=x.forwardRef(function(s,r){var y,D,I;const t=ge(),o=Rt(s,"MuiDesktopTimePicker"),{shouldRenderTimeInASingleColumn:l,views:a,timeSteps:c}=Jo(o),d=l?Qo:St,u=v({hours:d,minutes:d,seconds:d,meridiem:d},o.viewRenderers),k=(y=o.ampmInClock)!=null?y:!0,g=((D=u.hours)==null?void 0:D.name)===St.name?a:a.filter(P=>P!=="meridiem"),b=v({},o,{ampmInClock:k,timeSteps:c,viewRenderers:u,format:Ft(t,o),views:l?["hours"]:g,slots:v({field:Bt},o.slots),slotProps:v({},o.slotProps,{field:P=>{var N;return v({},Vt((N=o.slotProps)==null?void 0:N.field,P),Lt(o))},toolbar:v({hidden:!0,ampmInClock:k},(I=o.slotProps)==null?void 0:I.toolbar)})}),{renderPicker:C}=Cs({ref:r,props:b,valueManager:ve,valueType:"time",validator:Ye,steps:null});return C()});zt.propTypes={ampm:n.bool,ampmInClock:n.bool,autoFocus:n.bool,className:n.string,closeOnSelect:n.bool,defaultValue:n.object,disabled:n.bool,disableFuture:n.bool,disableIgnoringDatePartForTimeValidation:n.bool,disableOpenPicker:n.bool,disablePast:n.bool,enableAccessibleFieldDOMStructure:n.any,format:n.string,formatDensity:n.oneOf(["dense","spacious"]),inputRef:Ot,label:n.node,localeText:n.object,maxTime:n.object,minTime:n.object,minutesStep:n.number,name:n.string,onAccept:n.func,onChange:n.func,onClose:n.func,onError:n.func,onOpen:n.func,onSelectedSectionsChange:n.func,onViewChange:n.func,open:n.bool,openTo:n.oneOf(["hours","meridiem","minutes","seconds"]),orientation:n.oneOf(["landscape","portrait"]),readOnly:n.bool,reduceAnimations:n.bool,referenceDate:n.object,selectedSections:n.oneOfType([n.oneOf(["all","day","empty","hours","meridiem","minutes","month","seconds","weekDay","year"]),n.number]),shouldDisableTime:n.func,skipDisabled:n.bool,slotProps:n.object,slots:n.object,sx:n.oneOfType([n.arrayOf(n.oneOfType([n.func,n.object,n.bool])),n.func,n.object]),thresholdToRenderTimeInASingleColumn:n.number,timeSteps:n.shape({hours:n.number,minutes:n.number,seconds:n.number}),timezone:n.string,value:n.object,view:n.oneOf(["hours","meridiem","minutes","seconds"]),viewRenderers:n.shape({hours:n.func,meridiem:n.func,minutes:n.func,seconds:n.func}),views:n.arrayOf(n.oneOf(["hours","minutes","seconds"]).isRequired)};const Wt=x.forwardRef(function(s,r){var u,k;const t=ge(),o=Rt(s,"MuiMobileTimePicker"),l=v({hours:Xe,minutes:Xe,seconds:Xe},o.viewRenderers),a=(u=o.ampmInClock)!=null?u:!1,c=v({},o,{ampmInClock:a,viewRenderers:l,format:Ft(t,o),slots:v({field:Bt},o.slots),slotProps:v({},o.slotProps,{field:m=>{var g;return v({},Vt((g=o.slotProps)==null?void 0:g.field,m),Lt(o))},toolbar:v({hidden:!1,ampmInClock:a},(k=o.slotProps)==null?void 0:k.toolbar)})}),{renderPicker:d}=Ts({ref:r,props:c,valueManager:ve,valueType:"time",validator:Ye,steps:null});return d()});Wt.propTypes={ampm:n.bool,ampmInClock:n.bool,autoFocus:n.bool,className:n.string,closeOnSelect:n.bool,defaultValue:n.object,disabled:n.bool,disableFuture:n.bool,disableIgnoringDatePartForTimeValidation:n.bool,disableOpenPicker:n.bool,disablePast:n.bool,enableAccessibleFieldDOMStructure:n.any,format:n.string,formatDensity:n.oneOf(["dense","spacious"]),inputRef:Ot,label:n.node,localeText:n.object,maxTime:n.object,minTime:n.object,minutesStep:n.number,name:n.string,onAccept:n.func,onChange:n.func,onClose:n.func,onError:n.func,onOpen:n.func,onSelectedSectionsChange:n.func,onViewChange:n.func,open:n.bool,openTo:n.oneOf(["hours","minutes","seconds"]),orientation:n.oneOf(["landscape","portrait"]),readOnly:n.bool,reduceAnimations:n.bool,referenceDate:n.object,selectedSections:n.oneOfType([n.oneOf(["all","day","empty","hours","meridiem","minutes","month","seconds","weekDay","year"]),n.number]),shouldDisableTime:n.func,slotProps:n.object,slots:n.object,sx:n.oneOfType([n.arrayOf(n.oneOfType([n.func,n.object,n.bool])),n.func,n.object]),timezone:n.string,value:n.object,view:n.oneOf(["hours","minutes","seconds"]),viewRenderers:n.shape({hours:n.func,minutes:n.func,seconds:n.func}),views:n.arrayOf(n.oneOf(["hours","minutes","seconds"]).isRequired)};const en=["desktopModeMediaQuery"],tn=x.forwardRef(function(s,r){const t=te({props:s,name:"MuiTimePicker"}),{desktopModeMediaQuery:o=xs}=t,l=ue(t,en);return Xt(o,{defaultMatches:!0})?i.jsx(zt,v({ref:r},l)):i.jsx(Wt,v({ref:r},l))}),sn=({settingName:e,value:s,defaultValue:r,handleChange:t})=>{const{t:o}=Ke(),[l,a]=x.useState(!1),[c,d]=x.useState(s);x.useEffect(()=>{s&&d(s)},[s]);const u=x.useCallback(g=>{a(!1),g&&d(s)},[s]),k=x.useCallback(()=>u(!0),[u]),m=x.useCallback((g,b=!0)=>{b&&u(!1),s!==g&&t(g)},[s,t,u]);return i.jsxs(i.Fragment,{children:[i.jsx(Ze,{onClick:()=>a(!0),children:i.jsx(Je,{primary:e,secondary:Ee(s,"HH:mm").format("LT"),secondaryTypographyProps:{style:{display:"flex",flexDirection:"column"}}})}),i.jsxs(ot,{open:l,onClose:u,children:[i.jsx(nt,{children:e}),i.jsx(rt,{children:i.jsx(ws,{dateAdapter:ys,adapterLocale:Ee.locale(),children:i.jsx(tn,{autoFocus:!0,value:Ee(c,"HH:mm"),defaultValue:Ee(r,"HH:mm"),format:"LT",onChange:g=>{var b;return d((b=g==null?void 0:g.format("HH:mm"))!=null?b:"00:00")}})})}),i.jsxs(at,{children:[r!==void 0?i.jsx(pe,{onClick:()=>{d(r),m(r,!1)},color:"primary",children:o("global.button.reset_to_default")}):null,i.jsx(pe,{onClick:k,color:"primary",children:o("global.button.cancel")}),i.jsx(pe,{onClick:()=>{m(c)},color:"primary",children:o("global.button.ok")})]})]})]})};var _e=(e=>(e.LIBRARY="library",e.SETTINGS="settings",e))(_e||{});const Gt={includeManga:"settings.backup.flag.manga",includeCategories:"settings.backup.flag.categories",includeChapters:"settings.backup.flag.chapters",includeClientData:"settings.backup.flag.client_data",includeHistory:"settings.backup.flag.history",includeServerSettings:"settings.backup.flag.server_settings",includeTracking:"settings.backup.flag.tracking"},on={[_e.LIBRARY]:"settings.backup.flag.group.library",[_e.SETTINGS]:"settings.backup.flag.group.settings"},nn=Object.keys(Gt),rn={[_e.LIBRARY]:["includeManga","includeChapters","includeTracking","includeHistory","includeCategories"],[_e.SETTINGS]:["includeClientData","includeServerSettings"]},Mt=({onCancel:e,onConfirm:s,title:r})=>{const{t}=Ke(),[o,l]=x.useState(Object.fromEntries(nn.map(a=>[a,!0])));return i.jsxs(ot,{open:!0,onAbort:e,maxWidth:"xs",fullWidth:!0,onClose:e,children:[i.jsx(nt,{children:r}),i.jsx(rt,{children:i.jsx(Ps,{sx:{gap:2},children:Object.entries(rn).map(([a,c])=>i.jsxs(et,{children:[i.jsx(tt,{children:t(on[a])}),c.map(d=>i.jsx(vs,{label:t(Gt[d]),checked:o[d],onChange:(u,k)=>{l({...o,[d]:k})}},d))]},a))})}),i.jsxs(at,{children:[i.jsx(pe,{autoFocus:!0,onClick:e,color:"primary",children:t("global.button.cancel")}),i.jsx(pe,{onClick:()=>s(o),color:"primary",children:t("global.button.ok")})]})]})},an=({validationResult:e,onCancel:s,onConfirm:r})=>{const{t}=Ke();return i.jsxs(ot,{open:!0,children:[i.jsx(nt,{children:t("settings.backup.action.validate.dialog.title")}),i.jsxs(rt,{dividers:!0,children:[!!(e!=null&&e.missingSources.length)&&i.jsx(ze,{sx:{listStyleType:"initial",listStylePosition:"inside"},subheader:t("settings.backup.action.validate.dialog.content.label.missing_sources"),children:e==null?void 0:e.missingSources.map(({id:o,name:l})=>i.jsx(pt,{sx:{display:"list-item"},children:"".concat(l," (").concat(o,")")},o))}),!!(e!=null&&e.missingTrackers.length)&&i.jsx(ze,{sx:{listStyleType:"initial",listStylePosition:"inside"},subheader:t("settings.backup.action.validate.dialog.content.label.missing_trackers"),children:e==null?void 0:e.missingTrackers.map(({name:o})=>i.jsx(pt,{sx:{display:"list-item"},children:"".concat(o)},o))})]}),i.jsx(at,{children:i.jsxs(et,{direction:"row",sx:{justifyContent:"space-between",width:"100%"},children:[!!(e!=null&&e.missingSources.length)&&i.jsx(pe,{onClick:s,component:bt,to:ft.browse.path(Zt.EXTENSIONS),autoFocus:!!(e!=null&&e.missingSources.length),variant:e!=null&&e.missingSources.length?"contained":"text",children:t("extension.action.label.install")}),!!(e!=null&&e.missingTrackers.length)&&i.jsx(pe,{onClick:s,component:bt,to:ft.settings.childRoutes.tracking.path,autoFocus:!!(e!=null&&e.missingTrackers.length),variant:e!=null&&e.missingTrackers.length?"contained":"text",children:t("global.button.log_in")}),i.jsxs(et,{direction:"row",children:[i.jsx(pe,{onClick:s,children:t("global.button.cancel")}),i.jsx(pe,{onClick:r,autoFocus:!(e!=null&&e.missingSources.length)&&!(e!=null&&e.missingTrackers.length),variant:!(e!=null&&e.missingSources.length)&&!(e!=null&&e.missingTrackers.length)?"contained":"text",children:t("global.button.restore")})]})]})})]})},ln=e=>e===0?ht("global.label.never"):ht("settings.backup.automated.cleanup.label.value",{days:e,count:e});let Se;function Mn(){var N;const{t:e}=Ke();Ms(e("settings.backup.title"));const{data:s,loading:r,error:t,refetch:o}=ye.useGetServerSettings({notifyOnNetworkStatusChange:!0}),[l]=ye.useUpdateServerSettings(),{data:a}=ye.useGetBackupRestoreStatus(Se!=null?Se:"",{skip:!Se,pollInterval:1e3}),[,c]=x.useState(0),d=x.useRef(null),u=(()=>{if(!(a!=null&&a.restoreStatus))return 0;const p=100*(a.restoreStatus.mangaProgress/a.restoreStatus.totalManga);return Number.isNaN(p)?0:p})(),k=(p,S)=>{l({variables:{input:{settings:{[p]:S}}}}).catch(j=>ce(e("global.error.label.failed_to_save_changes"),"error",Ve(j)))};x.useEffect(()=>{if(!(a!=null&&a.restoreStatus))return;const p=a.restoreStatus.state===gt.Success,S=a.restoreStatus.state===gt.Failure;(p||S)&&(p&&ce(e("settings.backup.action.restore.label.success"),"success"),S&&ce(e("settings.backup.action.restore.error.label.failure"),"error"),ye.reset(),Se=void 0,c(Date.now()))},[(N=a==null?void 0:a.restoreStatus)==null?void 0:N.state]);const m=()=>{const p=document.getElementById("backup-file");p&&(p.value="")},g=async()=>{var S;const p=await Qe.show(Mt,{title:e("settings.backup.action.create.label.title")});ce(e("settings.backup.action.create.label.in_progress"),"info");try{const j=await ye.createBackupFile({flags:p}).response,V=(S=j.data)==null?void 0:S.createBackup.url;if(!V){ce(e("settings.backup.action.create.error.failure"),"error",Ve(j.errors));return}const A=document.createElement("a");A.href=ye.getValidUrlFor(V,""),A.download="",document.body.appendChild(A),A.click(),document.body.removeChild(A)}catch(j){ce(e("settings.backup.action.create.error.failure"),"error",Ve(j))}},b=async p=>{try{const{data:{validateBackup:S}}=await ye.validateBackupFile(p,{fetchPolicy:"network-only"}).response;if(S.missingSources.length||S.missingTrackers.length)try{await Qe.show("backup-validate-".concat(p.name),an,{validationResult:S})}catch(j){return!1}return!0}catch(S){ce(e("settings.backup.action.validate.error.label.failure"),"error",Ve(S))}finally{m()}return!1},C=async p=>{var j;const S=await Qe.show(Mt,{title:e("settings.backup.action.restore.label.title")});try{ce(e("settings.backup.action.restore.label.in_progress"),"info"),Se=(j=(await ye.restoreBackupFile({backup:p,flags:S}).response).data)==null?void 0:j.restoreBackup.id,c(Date.now())}catch(V){ce(e("settings.backup.action.restore.error.label.failure"),"error",Ve(V))}finally{m()}},y=async p=>{if(p.name.toLowerCase().endsWith("json")){ce(e("settings.backup.action.restore.error.label.legacy_backup_unsupported"),"error");return}if(!p.name.toLowerCase().match(/proto\.gz$|tachibk$/g)){ce(e("global.error.label.invalid_file_type"),"error");return}await b(p)&&await C(p)};Tt("drop",async p=>{p.preventDefault();const S=await kt(p);y(S[0])}),Tt("dragover",p=>{p.preventDefault()});const D=Fs("change",async p=>{const S=await kt(p);y(S[0])}),I=Ds(d,D);if(r)return i.jsx(Jt,{});if(t)return i.jsx(Ss,{message:e("global.error.label.failed_to_load_data"),messageExtra:Ve(t),retry:()=>o().catch(es())});const P=s.settings;return i.jsxs(i.Fragment,{children:[i.jsxs(ze,{sx:{padding:0},children:[i.jsx(Ze,{onClick:g,children:i.jsx(Je,{primary:e("settings.backup.action.create.label.title"),secondary:e("settings.backup.action.create.label.description")})}),i.jsxs(Ze,{onClick:()=>{var p;return(p=d.current)==null?void 0:p.click()},disabled:!!Se,children:[i.jsx(Je,{primary:e("settings.backup.action.restore.label.title"),secondary:e("settings.backup.action.restore.label.description")}),Se?i.jsx(ts,{children:i.jsx(os,{progress:u})}):null]}),i.jsxs(ze,{subheader:i.jsx(Is,{component:"div",id:"backup-settings",children:"Automated backup"}),children:[i.jsx(ss,{settingName:e("settings.backup.automated.location.label.title"),dialogDescription:e("settings.backup.automated.location.label.description"),value:P.backupPath,settingDescription:P.backupPath.length?P.backupPath:e("global.label.default"),handleChange:p=>k("backupPath",p)}),i.jsx(sn,{settingName:e("settings.backup.automated.label.time"),value:P.backupTime,defaultValue:"00:00",handleChange:p=>k("backupTime",p)}),i.jsx(Ct,{settingTitle:e("settings.backup.automated.label.interval"),settingValue:e("global.date.value.label.day",{days:P.backupInterval,count:P.backupInterval}),value:P.backupInterval,defaultValue:1,minValue:1,maxValue:31,stepSize:1,valueUnit:e("global.date.label.day_one"),showSlider:!0,handleUpdate:p=>k("backupInterval",p)}),i.jsx(Ct,{settingTitle:e("settings.backup.automated.cleanup.label.title"),settingValue:ln(P.backupTTL),value:P.backupTTL,defaultValue:14,minValue:0,maxValue:1e3,stepSize:1,valueUnit:e("global.date.label.day_one"),showSlider:!0,handleUpdate:p=>k("backupTTL",p)})]})]}),i.jsx("input",{ref:I,type:"file",style:{display:"none"}})]})}export{Mn as Backup};
