import{j as e,b as j,r as h,T as d,aV as b,u as x,l as k,br as C,G as E,B as T,a as v,d as A,S as f,C as y,I as P,A as _,L as M,x as N,m as B,g as I,aD as w,f as D,n as G,i as R,k as S}from"./index-ZE1rjjwW.js";import{u as U}from"./useAppTitle-BS-n0Bj4.js";import{E as V}from"./EmptyViewAbsoluteCentered-o28tLxDU.js";import{a as F}from"./Asserts-D5Kyx99Q.js";import{S as H}from"./SpinnerImage-qA9iUb1i.js";import{M as O}from"./Metadata-CFNjYNkR.js";import{I as q,b as m,u as z,a as K,g as Q,t as W}from"./Extensions.utils-LGzUUrbn.js";import{M as Y}from"./MUI.util-CEodEA2f.js";import{L as J}from"./ListCardContent-CZMRWdbJ.js";import{S as X}from"./StyledGroupItemWrapper-CV6eBhUs.js";import{C as Z}from"./Card-BYM9Jdja.js";import{C as $}from"./CardActionArea-B97zkZDF.js";import{S as ee}from"./Switch-RWr7_DBi.js";import"./Refresh-Cl20HZ2e.js";import"./Strings-CAV0u705.js";import"./SwitchBase-DhK_X3zI.js";const te=({name:r,pkgName:s,iconUrl:a,repo:t})=>e.jsxs(j,{sx:{alignItems:"center"},children:[e.jsx(H,{alt:r,src:h.getValidImgUrlFor(a),ignoreQueue:!0}),e.jsx(d,{variant:"h5",component:"h2",children:r}),e.jsx(d,{variant:"body2",color:"textSecondary",children:s.replace("eu.kanade.tachiyomi.extension.","")}),t&&e.jsx(d,{variant:"body2",color:"textSecondary",children:t})]}),p=({addDivider:r=!0,...s})=>{var a;return e.jsxs(e.Fragment,{children:[e.jsx(O,{...s,stackProps:{...s.stackProps,sx:{...(a=s.stackProps)==null?void 0:a.sx,flexDirection:"column-reverse",alignItems:"center",flexGrow:1}},titleProps:{...s.titleProps,variant:"body2"}}),r&&e.jsx(b,{orientation:"vertical",sx:{height:"25px"}})]})},ae=({versionName:r,lang:s,isNsfw:a})=>{const{t}=x();return e.jsxs(j,{sx:{flexDirection:"row",justifyContent:"space-between",alignItems:"center"},children:[e.jsx(p,{title:t("global.label.version"),value:r}),e.jsx(p,{title:t("global.language.label.language"),value:k(s)}),a&&e.jsx(p,{title:t("extension.label.age_rating"),value:"18+",valueProps:{color:"error"}})]})},re=({pkgName:r,isInstalled:s,isObsolete:a,hasUpdate:t})=>{const o=C(),{t:i}=x(),n=Q(s,a,t);return e.jsx(E,{sx:{px:1},children:e.jsx(T,{sx:{width:"100%",color:n===K.OBSOLETE?"red":"inherit"},variant:"outlined",size:"large",onClick:async()=>{const c=t&&!a?m.UPDATE:m.UNINSTALL;try{await z(r,a,c),c===m.UNINSTALL&&o()}catch(u){}},children:i(q[n])})})},se=r=>{const{id:s,isConfigurable:a}=r,{t}=x(),{isEnabled:o}=v(r),i=A(r,n=>B(t("global.error.label.failed_to_save_changes"),"error",I(n)));return e.jsx(X,{sx:{px:0},children:e.jsx(Z,{children:e.jsx($,{onClick:()=>i("isEnabled",!o),children:e.jsxs(J,{children:[e.jsx(d,{variant:"h6",component:"h3",sx:{flexGrow:1},children:W(f.getLanguage(r))}),a&&e.jsx(y,{title:t("settings.title"),children:e.jsx(P,{component:M,to:_.sources.childRoutes.configure.path(s),color:"inherit",onClick:n=>n.stopPropagation(),...Y.preventRippleProp(),children:e.jsx(N,{})})}),e.jsx(ee,{checked:o})]})})})},s)},Ie=()=>{var u;const{t:r}=x(),{pkgName:s}=w();U(r("source.extension_info.title"));const a=h.useGetExtension(s),t=h.useGetSourceList(),{extension:o}=(u=a.data)!=null?u:{},i=D.useMemo(()=>{var l;return(l=t.data)!=null&&l.sources?t.data.sources.nodes.filter(g=>g.extension.pkgName===(o==null?void 0:o.pkgName)).sort((g,L)=>G(f.getLanguage(g),f.getLanguage(L))):[]},[o==null?void 0:o.pkgName,t.data]),n=a.loading||t.loading,c=a.error||t.error;return n?e.jsx(R,{}):c?e.jsx(V,{message:r("global.error.label.failed_to_load_data"),messageExtra:I(a.error),retry:()=>{a.error&&a.refetch().catch(S()),t.error&&t.refetch().catch(S())}}):(F(o),e.jsxs(j,{sx:{gap:2},children:[e.jsx(te,{...o}),e.jsx(ae,{...o}),e.jsx(re,{...o}),e.jsx(E,{sx:{px:1},children:i.map(l=>e.jsx(se,{...l},l.id))})]}))};export{Ie as ExtensionInfo};
