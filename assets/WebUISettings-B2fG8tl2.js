import{u as C,r as h,b as k,m as U,g as p,j as e,H as j,o as f,p as _,bO as b,a as N,e as T,f as E,bP as V,bQ as P,bR as y,b2 as W,bS as F,y as M}from"./index-B0ZjCkgF.js";import{N as B}from"./NumberSetting-C8SNMCoc.js";import{u as O,g as R}from"./usePersistedValue-4PxeqFye.js";import{S as I}from"./Switch-Cp6CDcts.js";import{S as v}from"./SelectSetting-T96cl3FZ.js";import{E as D}from"./EmptyViewAbsoluteCentered-5dUo-B3T.js";import{u as H}from"./useAppTitle-BY6XVG7J.js";import"./Slider-1ivG7SQd.js";import"./SwitchBase-D-8YidDh.js";import"./Select-DoZf3Bm3.js";const q=({disabled:t=!1,updateCheckInterval:g})=>{const{t:n}=C(),l=!!g,[m]=h.useUpdateServerSettings(),[i,S]=O("lastUpdateCheckInterval",b.default,g,R),d=k.useCallback(r=>{S(r===0?i:r),m({variables:{input:{settings:{webUIUpdateCheckInterval:r}}}}).catch(u=>U(n("global.error.label.failed_to_save_changes"),"error",p(u)))},[i]),c=r=>{d(r?i:0)};return e.jsxs(j,{children:[e.jsxs(f,{children:[e.jsx(_,{primary:n("settings.webui.auto_update.label.title")}),e.jsx(I,{disabled:t,edge:"end",checked:l,onChange:r=>c(r.target.checked)})]}),e.jsx(B,{settingTitle:n("settings.webui.auto_update.label.interval"),settingValue:n("library.settings.global_update.auto_update.interval.label.value",{hours:i}),value:i,minValue:b.min,maxValue:b.max,defaultValue:b.default,showSlider:!0,valueUnit:n("global.time.hour_short"),handleUpdate:d,disabled:t||!l})]})},ae=()=>{const{t}=C();H(t("settings.webui.title.webui"));const{settings:{webUIInformAvailableUpdate:g},loading:n,request:{error:l,refetch:m}}=N(),i=M(a=>U(t("global.error.label.failed_to_save_changes"),"error",p(a))),{data:S,loading:d,error:c,refetch:r}=h.useGetServerSettings({notifyOnNetworkStatusChange:!0}),[u]=h.useUpdateServerSettings(),o=(a,L)=>{a==="webUIChannel"&&h.graphQLClient.client.cache.evict({fieldName:"checkForWebUIUpdate"}),u({variables:{input:{settings:{[a]:L}}}}).catch(A=>U(t("global.error.label.failed_to_save_changes"),"error",p(A)))};if(n||d)return e.jsx(T,{});const x=l!=null?l:c;if(x)return e.jsx(D,{message:t("global.error.label.failed_to_load_data"),messageExtra:p(x),retry:()=>{l&&m().catch(E()),c&&r().catch(E())}});const s=S.settings,w=s.webUIFlavor===V.Custom;return e.jsxs(j,{sx:{pt:0},children:[e.jsx(v,{settingName:t("settings.webui.flavor.label.title"),value:s.webUIFlavor,values:P,handleChange:a=>o("webUIFlavor",a)}),e.jsxs(f,{children:[e.jsx(_,{primary:t("settings.webui.label.initial_open_browser")}),e.jsx(I,{edge:"end",checked:s.initialOpenInBrowserEnabled,onChange:a=>o("initialOpenInBrowserEnabled",a.target.checked)})]}),e.jsx(v,{settingName:t("settings.webui.interface.label.title"),value:s.webUIInterface,values:y,handleChange:a=>o("webUIInterface",a)}),e.jsx(W,{settingName:t("settings.webui.electron_path.label.title"),dialogDescription:t("settings.webui.electron_path.label.description"),value:s.electronPath,settingDescription:s.electronPath.length?s.electronPath:t("global.label.default"),handleChange:a=>o("electronPath",a)}),e.jsx(v,{settingName:t("settings.webui.channel.label.title"),value:s.webUIChannel,values:F,handleChange:a=>o("webUIChannel",a),disabled:w}),e.jsx(q,{disabled:w,updateCheckInterval:s.webUIUpdateCheckInterval}),!s.webUIUpdateCheckInterval&&e.jsxs(f,{children:[e.jsx(_,{primary:t("global.update.settings.inform.label.title"),secondary:t("global.update.settings.inform.label.description")}),e.jsx(I,{edge:"end",checked:g,onChange:a=>i("webUIInformAvailableUpdate",a.target.checked)})]})]})};export{ae as WebUISettings};
