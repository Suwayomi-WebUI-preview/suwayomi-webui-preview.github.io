var Rn=Object.defineProperty;var Tn=(e,t,n)=>t in e?Rn(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var ze=(e,t,n)=>Tn(e,typeof t!="symbol"?t+"":t,n);import{r as K,f as E,bK as lt,dG as P,bJ as An,dH as ge,dI as bn,bI as yn,dJ as Xt,dK as Pn,dL as In,ds as Cn,j as o,H as Z,b4 as A,dM as fe,c3 as H,dN as F,dO as Te,a8 as dt,dP as z,dQ as L,dR as O,am as le,dS as On,bG as ae,U as $e,dT as De,by as we,dU as Zt,c2 as _e,dV as jn,dW as gt,dX as Dn,k as ft,e as wn,dY as mt,dZ as Mn,d_ as xt,bm as Ln,m as pt,g as vt,G as St,d$ as $,cR as Nn,h as Un,A as $n,e0 as me,b as S,T as y,u as v,B as ee,C as Be,e1 as Jt,e2 as qt,e3 as Bn,e4 as Gn,e5 as se,e6 as kn,e7 as Fn,e8 as Vn,c as oe,I as Qt,e9 as We,aA as Hn,ea as en,eb as xe,ec as Ye,ed as zn,ee as de,ef as w,eg as Wn,eh as Yn,ei as Kn,ej as Xn,ek as ue,el as Ke,_ as Zn,em as Jn,o as qn,p as Qn,q as er,cC as tr,w as nr,cs as rr,aC as sr,en as D,eo as ir,ep as Et,eq as ce}from"./index-D9MaEs9E.js";import{T as or}from"./TabsMenu-DqvKxPYc.js";import{a as G}from"./Chapters-D9IjxkKV.js";import{a as ar,G as Rt,F as Tt}from"./Mangas-CH1hraOn.js";import{S as cr}from"./SpinnerImage-DJqBBLY8.js";import{r as lr}from"./Strings-CAV0u705.js";import{T as dr,a as re}from"./Tabs-dHYxHhmy.js";import{S as ur}from"./Slider-H6t2W6On.js";import{C}from"./CheckboxInput-CN8yRAfa.js";import{L as _r}from"./ListSubheader-DZg37YDb.js";import{A as hr}from"./Add-8vmo_q6k.js";const tn=(e,t,n)=>{var a;const s=In(),r=s===Cn,i=Object.keys((a=n.meta)!=null?a:{}).filter(d=>{var l;return r?((l=d.match(/_/g))==null?void 0:l.length)===1:d.startsWith("".concat(Pn,"_").concat(s,"_"))}).map(d=>Xt(d));return Object.fromEntries(Object.entries(t).map(([d,l])=>{if(ge.includes(d))return[d,l];const _=e==="manga"&&!i.includes(d);return[d,{value:l,isDefault:_}]}))},Qe=e=>({...e,tapZoneInvertMode:JSON.stringify(e.tapZoneInvertMode),customFilter:JSON.stringify(e.customFilter),readerWidth:JSON.stringify(e.readerWidth),hotkeys:JSON.stringify(e.hotkeys),autoScroll:JSON.stringify(e.autoScroll)}),At=tn("global",P,{meta:Qe(P)}),nn=(e,t,n=P,s,r)=>An(e,t,n,r!==void 0?[r.toString()]:void 0,s);function rn(e,t,n=P,s,r){const i=nn(e,t,n,s,r);return tn(e,i,t)}const gr=(e,t,n,s)=>rn("manga",{...e,meta:lt(e.meta,r=>!ge.includes(Xt(r)))},t,n,s),eo=(e,t)=>gr(e,t),to=e=>{const t=K.useGetGlobalMeta({notifyOnNetworkStatusChange:!0}),{data:n,loading:s}=t,r=E.useMemo(()=>lt(n==null?void 0:n.metas.nodes),[n==null?void 0:n.metas.nodes]),i=E.useMemo(()=>({meta:r}),[r]),c=nn("global",i,void 0,E.useEffect,e),a=E.useMemo(()=>c,[i,e]);return E.useMemo(()=>({metadata:r,settings:a,loading:s,request:t}),[r,a,s,t])},fr=e=>{const t=K.useGetGlobalMeta({notifyOnNetworkStatusChange:!0}),{data:n,loading:s}=t,r=E.useMemo(()=>lt(n==null?void 0:n.metas.nodes),[n==null?void 0:n.metas.nodes]),i=E.useMemo(()=>({meta:r}),[r]),c=rn("global",i,void 0,E.useEffect,e),a=E.useMemo(()=>c,[i,e]);return E.useMemo(()=>({metadata:r,settings:a,loading:s,request:t}),[r,a,s,t])},mr=async(e,t,n,s=!1,r)=>s||ge.includes(t)?bn([[t,Qe({[t]:n})[t]]],r!==void 0?[r==null?void 0:r.toString()]:void 0):yn(e,[[t,Qe({[t]:n})[t]]],r!==void 0?[r==null?void 0:r.toString()]:void 0),bt=e=>e===H.END?Number.MAX_SAFE_INTEGER:-1,xr=({currentPageIndex:e,pages:t,transitionPageMode:n,imageRefs:s,createPage:r,slots:i,readingMode:c,imagePreLoadAmount:a,isCurrentChapter:d,isPreviousChapter:l,isNextChapter:u,customFilter:_,pageScaleMode:h,shouldStretchPage:f,readerWidth:g,readerNavBarWidth:x,resumeMode:p,handleAsInitialRender:m,ref:T})=>{var M,j,B,W;const R=E.useRef(bt(p));m&&(R.current=bt(p));const b=E.useMemo(()=>bs(e,t,R.current,a,c,d,l,u),[e,t,a,c,d,l,u]);E.useEffect(()=>{d&&(R.current=e)},[b,d]);const I=E.useCallback((He,ye)=>{s.current[He]=ye},[s]);return o.jsx(Z,{ref:T,...i==null?void 0:i.boxProps,sx:[{width:"fit-content",height:"fit-content"},...Array.isArray((M=i==null?void 0:i.boxProps)==null?void 0:M.sx)?(B=(j=i==null?void 0:i.boxProps)==null?void 0:j.sx)!=null?B:[]:[(W=i==null?void 0:i.boxProps)==null?void 0:W.sx],A(!J(c)&&ys(n,c),{visibility:"hidden",width:0,height:0,m:0,p:0})],children:t.map((He,ye)=>r(He,ye,b.includes(ye),[fe.NONE,fe.BOTH].includes(n),I,c,_,h,f,g,x))})},Ge=E.memo(xr),pr=({onLoad:e,onError:t,pageLoadStates:n,retryFailedPagesKeyPrefix:s,isPreloadMode:r,...i})=>{const{currentPageIndex:c,totalPages:a}=i;return o.jsx(Ge,{...i,createPage:(d,l,u,_,h,...f)=>Re(d,l,!0,n[d.primary.index].loaded,r,e,t,u,_&&u&&c===d.primary.index,c,a,...f,n[d.primary.index].error?s:void 0),slots:{boxProps:{sx:{margin:"auto"}}}})},vr=E.memo(pr),sn=(e,t)=>{const n=t.findIndex(({primary:r,secondary:i})=>[r.index,i==null?void 0:i.index].includes(e));return{...t[Te(n,0,t.length-1)],pagesIndex:n}},et=e=>{var t,n;return(n=(t=e.secondary)==null?void 0:t.index)!=null?n:e.primary.index},no=(e,t,n)=>{switch(e){case"previous":return et(n[Math.max(0,t-1)]);case"next":return et(n[Math.min(n.length-1,t+1)]);default:throw new Error('Unexpected offset "'.concat(e,'"'))}},ro=(e,t,n,s,r,i)=>{const c=s?e.clientX:e.clientY,{paddingTop:a,paddingBottom:d,paddingLeft:l,paddingRight:u}=getComputedStyle(t),_=t.getBoundingClientRect(),h=s?parseFloat(l)+parseFloat(u):parseFloat(a)+parseFloat(d),f=s?_.left:_.top,x=(s?_.width:_.height)-h,p=c-f-h/2,m=n.length-+!r,T=x/m,R=Math.floor(p/T),b=(R+(r?1:.5))*T,I=p<=b?R:R+1,M=Math.max(0,I),j=Math.min(M,n.length-1),B=i(j,n.length-1-j);return n[B]},so=e=>{const t=e===F.BOTTOM,n=e===F.LEFT,s=e===F.RIGHT;return{isBottom:t,isLeft:n,isRight:s,isHorizontal:t,isVertical:n||s}},yt=(e,t,n)=>{const s=n===z.LTR;return e==="first"?t==="ltr"?s?"right":"left":s?"left":"right":t==="ltr"?s?"left":"right":s?"right":"left"},Sr=({onLoad:e,onError:t,pageLoadStates:n,retryFailedPagesKeyPrefix:s,isPreloadMode:r,...i})=>{const{currentPageIndex:c,pages:a,totalPages:d,readingDirection:l,pageScaleMode:u}=i,{direction:_}=dt(),h=E.useMemo(()=>sn(c,a),[c,a]),f=l===z.LTR;return o.jsx(Ge,{...i,createPage:(g,x,p,m,T,...R)=>{const{primary:b,secondary:I}=g,M=et(h),j=!!I,B=h.primary.index===b.index,W=!!I&&M===I.index;return o.jsxs(E.Fragment,{children:[Re(g,x,!0,n[b.index].loaded,r,e,t,p,m&&B&&p,h.primary.index,d,...R,n[b.index].error?s:void 0,j?yt("first",_,l):void 0,j),j&&Re({...g,primary:{...g.secondary}},x,!1,n[I.index].loaded,r,e,t,p,m&&W&&p,M,d,...R,n[I.index].error?s:void 0,yt("second",_,l),!0)]},"".concat(b.url,"_").concat(I==null?void 0:I.url))},slots:{boxProps:{sx:{...A(u===L.ORIGINAL,{margin:"auto"}),width:"100%",minWidth:"fit-content",height:"100%",minHeight:"fit-content",display:"flex",flexDirection:"row",flexWrap:"nowrap",...A(_==="ltr",{flexDirection:f?"row":"row-reverse"}),...A(_==="rtl",{flexDirection:f?"row-reverse":"row"})}}}})},Er=E.memo(Sr),Rr=({onLoad:e,onError:t,pageLoadStates:n,retryFailedPagesKeyPrefix:s,isPreloadMode:r,...i})=>{const{currentPageIndex:c,totalPages:a,readingMode:d,pageGap:l}=i,_=d===O.WEBTOON?0:l;return o.jsx(Ge,{...i,createPage:(h,f,g,x,p,...m)=>Re(h,f,!0,n[h.primary.index].loaded,r,e,t,g||n[h.primary.index].loaded,!r,c,a,...m,n[h.primary.index].error?s:void 0,void 0,void 0,h.primary.index!==0?_:0,p),slots:{boxProps:{sx:{margin:"auto"}}}})},Tr=E.memo(Rr),Ar=({onLoad:e,onError:t,pageLoadStates:n,retryFailedPagesKeyPrefix:s,isPreloadMode:r,...i})=>{const{currentPageIndex:c,totalPages:a,pageGap:d,readingDirection:l}=i,{direction:u}=dt(),_=l===z.LTR;return o.jsx(Ge,{...i,createPage:(h,f,g,x,p,...m)=>Re(h,f,!0,n[h.primary.index].loaded,r,e,t,g||n[h.primary.index].loaded,!r,c,a,...m,n[h.primary.index].error?s:void 0,void 0,void 0,void 0,p),slots:{boxProps:{sx:{my:"auto",display:"flex",flexWrap:"nowrap",alignItems:"center",gap:"".concat(d,"px"),...A(u==="ltr",{flexDirection:_?"row":"row-reverse",justifyContent:_?"flex-start":"flex-end"}),...A(u==="rtl",{flexDirection:_?"row-reverse":"row",justifyContent:_?"flex-end":"flex-start"})}}}})},br=E.memo(Ar),yr=e=>e===O.DOUBLE_PAGE,ut=e=>[L.WIDTH,L.SCREEN].includes(e),io=e=>ut(e),oo=e=>[L.HEIGHT,L.SCREEN].includes(e),on=(e,t)=>!!(e!=null&&e.enabled)&&ut(t),Pr=(e,t)=>{if(on(e,t))return e==null?void 0:e.value},J=e=>[O.CONTINUOUS_VERTICAL,O.CONTINUOUS_HORIZONTAL,O.WEBTOON].includes(e),je=e=>[O.CONTINUOUS_VERTICAL,O.WEBTOON].includes(e),ao=(e,t,n)=>t&&n.isDefault&&ar.isLongStripType(e),co=e=>{switch(e){case O.SINGLE_PAGE:return vr;case O.DOUBLE_PAGE:return Er;case O.CONTINUOUS_VERTICAL:case O.WEBTOON:return Tr;case O.CONTINUOUS_HORIZONTAL:return br;default:throw new Error('Unexpected "ReadingMode" ('.concat(e,")"))}},lo=(e,t,n=0,s=0)=>e!==F.AUTO?e:window.innerHeight-n>window.innerWidth-s?t:F.BOTTOM,Pt=e=>{let t;const n=new Set,s=(l,u)=>{const _=typeof l=="function"?l(t):l;if(!Object.is(_,t)){const h=t;t=(u!=null?u:typeof _!="object"||_===null)?_:Object.assign({},t,_),n.forEach(f=>f(t,h))}},r=()=>t,a={setState:s,getState:r,getInitialState:()=>d,subscribe:l=>(n.add(l),()=>n.delete(l))},d=t=e(s,r,a);return a},Ir=e=>e?Pt(e):Pt,Cr=e=>e;function Or(e,t=Cr){const n=le.useSyncExternalStore(e.subscribe,le.useCallback(()=>t(e.getState()),[e,t]),le.useCallback(()=>t(e.getInitialState()),[e,t]));return le.useDebugValue(n),n}const It=e=>{const t=Ir(e),n=s=>Or(t,s);return Object.assign(n,t),n},jr=e=>e?It(e):It,Ct={BASE_URL:"./",DEV:!1,LEGACY:!1,MODE:"production",PROD:!0,SSR:!1,VITE_SERVER_URL_DEFAULT:"http://localhost:4567"},pe=new Map,Pe=e=>{const t=pe.get(e);return t?Object.fromEntries(Object.entries(t.stores).map(([n,s])=>[n,s.getState()])):{}},Dr=(e,t,n)=>{if(e===void 0)return{type:"untracked",connection:t.connect(n)};const s=pe.get(n.name);if(s)return{type:"tracked",store:e,...s};const r={connection:t.connect(n),stores:{}};return pe.set(n.name,r),{type:"tracked",store:e,...r}},wr=(e,t)=>{if(t===void 0)return;const n=pe.get(e);n&&(delete n.stores[t],Object.keys(n.stores).length===0&&pe.delete(e))},Mr=e=>{var t,n;if(!e)return;const s=e.split("\n"),r=s.findIndex(c=>c.includes("api.setState"));if(r<0)return;const i=((t=s[r+1])==null?void 0:t.trim())||"";return(n=/.+ (.+) .+/.exec(i))==null?void 0:n[1]},Lr=(e,t={})=>(n,s,r)=>{const{enabled:i,anonymousActionType:c,store:a,...d}=t;let l;try{l=(i!=null?i:(Ct?"production":void 0)!=="production")&&window.__REDUX_DEVTOOLS_EXTENSION__}catch(x){}if(!l)return e(n,s,r);const{connection:u,..._}=Dr(a,l,d);let h=!0;r.setState=(x,p,m)=>{const T=n(x,p);if(!h)return T;const R=m===void 0?{type:c||Mr(new Error().stack)||"anonymous"}:typeof m=="string"?{type:m}:m;return a===void 0?(u==null||u.send(R,s()),T):(u==null||u.send({...R,type:"".concat(a,"/").concat(R.type)},{...Pe(d.name),[a]:r.getState()}),T)},r.devtools={cleanup:()=>{u&&typeof u.unsubscribe=="function"&&u.unsubscribe(),wr(d.name,a)}};const f=(...x)=>{const p=h;h=!1,n(...x),h=p},g=e(r.setState,s,r);if(_.type==="untracked"?u==null||u.init(g):(_.stores[_.store]=r,u==null||u.init(Object.fromEntries(Object.entries(_.stores).map(([x,p])=>[x,x===_.store?g:p.getState()])))),r.dispatchFromDevtools&&typeof r.dispatch=="function"){let x=!1;const p=r.dispatch;r.dispatch=(...m)=>{(Ct?"production":void 0)!=="production"&&m[0].type==="__setState"&&!x&&(console.warn('[zustand devtools middleware] "__setState" action type is reserved to set state from the devtools. Avoid using it.'),x=!0),p(...m)}}return u.subscribe(x=>{var p;switch(x.type){case"ACTION":if(typeof x.payload!="string"){console.error("[zustand devtools middleware] Unsupported action format");return}return Xe(x.payload,m=>{if(m.type==="__setState"){if(a===void 0){f(m.state);return}Object.keys(m.state).length!==1&&console.error('\n                    [zustand devtools middleware] Unsupported __setState action format.\n                    When using \'store\' option in devtools(), the \'state\' should have only one key, which is a value of \'store\' that was passed in devtools(),\n                    and value of this only key should be a state object. Example: { "type": "__setState", "state": { "abc123Store": { "foo": "bar" } } }\n                    ');const T=m.state[a];if(T==null)return;JSON.stringify(r.getState())!==JSON.stringify(T)&&f(T);return}r.dispatchFromDevtools&&typeof r.dispatch=="function"&&r.dispatch(m)});case"DISPATCH":switch(x.payload.type){case"RESET":return f(g),a===void 0?u==null?void 0:u.init(r.getState()):u==null?void 0:u.init(Pe(d.name));case"COMMIT":if(a===void 0){u==null||u.init(r.getState());return}return u==null?void 0:u.init(Pe(d.name));case"ROLLBACK":return Xe(x.state,m=>{if(a===void 0){f(m),u==null||u.init(r.getState());return}f(m[a]),u==null||u.init(Pe(d.name))});case"JUMP_TO_STATE":case"JUMP_TO_ACTION":return Xe(x.state,m=>{if(a===void 0){f(m);return}JSON.stringify(r.getState())!==JSON.stringify(m[a])&&f(m[a])});case"IMPORT_STATE":{const{nextLiftedState:m}=x.payload,T=(p=m.computedStates.slice(-1)[0])==null?void 0:p.state;if(!T)return;f(a===void 0?T:T[a]),u==null||u.send(null,m);return}case"PAUSE_RECORDING":return h=!h}return}}),g},Nr=Lr,Xe=(e,t)=>{let n;try{n=JSON.parse(e)}catch(s){console.error("[zustand devtools middleware] Could not parse the received json",s)}n!==void 0&&t(n)};var an=Symbol.for("immer-nothing"),Ot=Symbol.for("immer-draftable"),N=Symbol.for("immer-state");function k(e,...t){throw new Error("[Immer] minified error nr: ".concat(e,". Full error at: https://bit.ly/3cXEKWf"))}var ve=Object.getPrototypeOf;function ie(e){return!!e&&!!e[N]}function te(e){var t;return e?cn(e)||Array.isArray(e)||!!e[Ot]||!!((t=e.constructor)!=null&&t[Ot])||Ae(e)||Fe(e):!1}var Ur=Object.prototype.constructor.toString(),jt=new WeakMap;function cn(e){if(!e||typeof e!="object")return!1;const t=Object.getPrototypeOf(e);if(t===null||t===Object.prototype)return!0;const n=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;if(n===Object)return!0;if(typeof n!="function")return!1;let s=jt.get(n);return s===void 0&&(s=Function.toString.call(n),jt.set(n,s)),s===Ur}function Me(e,t,n=!0){ke(e)===0?(n?Reflect.ownKeys(e):Object.keys(e)).forEach(r=>{t(r,e[r],e)}):e.forEach((s,r)=>t(r,s,e))}function ke(e){const t=e[N];return t?t.type_:Array.isArray(e)?1:Ae(e)?2:Fe(e)?3:0}function tt(e,t){return ke(e)===2?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function ln(e,t,n){const s=ke(e);s===2?e.set(t,n):s===3?e.add(n):e[t]=n}function $r(e,t){return e===t?e!==0||1/e===1/t:e!==e&&t!==t}function Ae(e){return e instanceof Map}function Fe(e){return e instanceof Set}function Q(e){return e.copy_||e.base_}function nt(e,t){if(Ae(e))return new Map(e);if(Fe(e))return new Set(e);if(Array.isArray(e))return Array.prototype.slice.call(e);const n=cn(e);if(t===!0||t==="class_only"&&!n){const s=Object.getOwnPropertyDescriptors(e);delete s[N];let r=Reflect.ownKeys(s);for(let i=0;i<r.length;i++){const c=r[i],a=s[c];a.writable===!1&&(a.writable=!0,a.configurable=!0),(a.get||a.set)&&(s[c]={configurable:!0,writable:!0,enumerable:a.enumerable,value:e[c]})}return Object.create(ve(e),s)}else{const s=ve(e);if(s!==null&&n)return{...e};const r=Object.create(s);return Object.assign(r,e)}}function _t(e,t=!1){return Ve(e)||ie(e)||!te(e)||(ke(e)>1&&Object.defineProperties(e,{set:Ie,add:Ie,clear:Ie,delete:Ie}),Object.freeze(e),t&&Object.values(e).forEach(n=>_t(n,!0))),e}function Br(){k(2)}var Ie={value:Br};function Ve(e){return e===null||typeof e!="object"?!0:Object.isFrozen(e)}var Gr={};function ne(e){const t=Gr[e];return t||k(0,e),t}var Se;function dn(){return Se}function kr(e,t){return{drafts_:[],parent_:e,immer_:t,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function Dt(e,t){t&&(ne("Patches"),e.patches_=[],e.inversePatches_=[],e.patchListener_=t)}function rt(e){st(e),e.drafts_.forEach(Fr),e.drafts_=null}function st(e){e===Se&&(Se=e.parent_)}function wt(e){return Se=kr(Se,e)}function Fr(e){const t=e[N];t.type_===0||t.type_===1?t.revoke_():t.revoked_=!0}function Mt(e,t){t.unfinalizedDrafts_=t.drafts_.length;const n=t.drafts_[0];return e!==void 0&&e!==n?(n[N].modified_&&(rt(t),k(4)),te(e)&&(e=Le(t,e),t.parent_||Ne(t,e)),t.patches_&&ne("Patches").generateReplacementPatches_(n[N].base_,e,t.patches_,t.inversePatches_)):e=Le(t,n,[]),rt(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),e!==an?e:void 0}function Le(e,t,n){if(Ve(t))return t;const s=e.immer_.shouldUseStrictIteration(),r=t[N];if(!r)return Me(t,(i,c)=>Lt(e,r,t,i,c,n),s),t;if(r.scope_!==e)return t;if(!r.modified_)return Ne(e,r.base_,!0),r.base_;if(!r.finalized_){r.finalized_=!0,r.scope_.unfinalizedDrafts_--;const i=r.copy_;let c=i,a=!1;r.type_===3&&(c=new Set(i),i.clear(),a=!0),Me(c,(d,l)=>Lt(e,r,i,d,l,n,a),s),Ne(e,i,!1),n&&e.patches_&&ne("Patches").generatePatches_(r,n,e.patches_,e.inversePatches_)}return r.copy_}function Lt(e,t,n,s,r,i,c){if(r==null||typeof r!="object"&&!c)return;const a=Ve(r);if(!(a&&!c)){if(ie(r)){const d=i&&t&&t.type_!==3&&!tt(t.assigned_,s)?i.concat(s):void 0,l=Le(e,r,d);if(ln(n,s,l),ie(l))e.canAutoFreeze_=!1;else return}else c&&n.add(r);if(te(r)&&!a){if(!e.immer_.autoFreeze_&&e.unfinalizedDrafts_<1||t&&t.base_&&t.base_[s]===r&&a)return;Le(e,r),(!t||!t.scope_.parent_)&&typeof s!="symbol"&&(Ae(n)?n.has(s):Object.prototype.propertyIsEnumerable.call(n,s))&&Ne(e,r)}}}function Ne(e,t,n=!1){!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&_t(t,n)}function Vr(e,t){const n=Array.isArray(e),s={type_:n?1:0,scope_:t?t.scope_:dn(),modified_:!1,finalized_:!1,assigned_:{},parent_:t,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1};let r=s,i=ht;n&&(r=[s],i=Ee);const{revoke:c,proxy:a}=Proxy.revocable(r,i);return s.draft_=a,s.revoke_=c,a}var ht={get(e,t){if(t===N)return e;const n=Q(e);if(!tt(n,t))return Hr(e,n,t);const s=n[t];return e.finalized_||!te(s)?s:s===Ze(e.base_,t)?(Je(e),e.copy_[t]=ot(s,e)):s},has(e,t){return t in Q(e)},ownKeys(e){return Reflect.ownKeys(Q(e))},set(e,t,n){const s=un(Q(e),t);if(s!=null&&s.set)return s.set.call(e.draft_,n),!0;if(!e.modified_){const r=Ze(Q(e),t),i=r==null?void 0:r[N];if(i&&i.base_===n)return e.copy_[t]=n,e.assigned_[t]=!1,!0;if($r(n,r)&&(n!==void 0||tt(e.base_,t)))return!0;Je(e),it(e)}return e.copy_[t]===n&&(n!==void 0||t in e.copy_)||Number.isNaN(n)&&Number.isNaN(e.copy_[t])||(e.copy_[t]=n,e.assigned_[t]=!0),!0},deleteProperty(e,t){return Ze(e.base_,t)!==void 0||t in e.base_?(e.assigned_[t]=!1,Je(e),it(e)):delete e.assigned_[t],e.copy_&&delete e.copy_[t],!0},getOwnPropertyDescriptor(e,t){const n=Q(e),s=Reflect.getOwnPropertyDescriptor(n,t);return s&&{writable:!0,configurable:e.type_!==1||t!=="length",enumerable:s.enumerable,value:n[t]}},defineProperty(){k(11)},getPrototypeOf(e){return ve(e.base_)},setPrototypeOf(){k(12)}},Ee={};Me(ht,(e,t)=>{Ee[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}});Ee.deleteProperty=function(e,t){return Ee.set.call(this,e,t,void 0)};Ee.set=function(e,t,n){return ht.set.call(this,e[0],t,n,e[0])};function Ze(e,t){const n=e[N];return(n?Q(n):e)[t]}function Hr(e,t,n){var r;const s=un(t,n);return s?"value"in s?s.value:(r=s.get)==null?void 0:r.call(e.draft_):void 0}function un(e,t){if(!(t in e))return;let n=ve(e);for(;n;){const s=Object.getOwnPropertyDescriptor(n,t);if(s)return s;n=ve(n)}}function it(e){e.modified_||(e.modified_=!0,e.parent_&&it(e.parent_))}function Je(e){e.copy_||(e.copy_=nt(e.base_,e.scope_.immer_.useStrictShallowCopy_))}var zr=class{constructor(e){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.useStrictIteration_=!0,this.produce=(t,n,s)=>{if(typeof t=="function"&&typeof n!="function"){const i=n;n=t;const c=this;return function(d=i,...l){return c.produce(d,u=>n.call(this,u,...l))}}typeof n!="function"&&k(6),s!==void 0&&typeof s!="function"&&k(7);let r;if(te(t)){const i=wt(this),c=ot(t,void 0);let a=!0;try{r=n(c),a=!1}finally{a?rt(i):st(i)}return Dt(i,s),Mt(r,i)}else if(!t||typeof t!="object"){if(r=n(t),r===void 0&&(r=t),r===an&&(r=void 0),this.autoFreeze_&&_t(r,!0),s){const i=[],c=[];ne("Patches").generateReplacementPatches_(t,r,i,c),s(i,c)}return r}else k(1,t)},this.produceWithPatches=(t,n)=>{if(typeof t=="function")return(c,...a)=>this.produceWithPatches(c,d=>t(d,...a));let s,r;return[this.produce(t,n,(c,a)=>{s=c,r=a}),s,r]},typeof(e==null?void 0:e.autoFreeze)=="boolean"&&this.setAutoFreeze(e.autoFreeze),typeof(e==null?void 0:e.useStrictShallowCopy)=="boolean"&&this.setUseStrictShallowCopy(e.useStrictShallowCopy),typeof(e==null?void 0:e.useStrictIteration)=="boolean"&&this.setUseStrictIteration(e.useStrictIteration)}createDraft(e){te(e)||k(8),ie(e)&&(e=Wr(e));const t=wt(this),n=ot(e,void 0);return n[N].isManual_=!0,st(t),n}finishDraft(e,t){const n=e&&e[N];(!n||!n.isManual_)&&k(9);const{scope_:s}=n;return Dt(s,t),Mt(void 0,s)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}setUseStrictIteration(e){this.useStrictIteration_=e}shouldUseStrictIteration(){return this.useStrictIteration_}applyPatches(e,t){let n;for(n=t.length-1;n>=0;n--){const r=t[n];if(r.path.length===0&&r.op==="replace"){e=r.value;break}}n>-1&&(t=t.slice(n+1));const s=ne("Patches").applyPatches_;return ie(e)?s(e,t):this.produce(e,r=>s(r,t))}};function ot(e,t){const n=Ae(e)?ne("MapSet").proxyMap_(e,t):Fe(e)?ne("MapSet").proxySet_(e,t):Vr(e,t);return(t?t.scope_:dn()).drafts_.push(n),n}function Wr(e){return ie(e)||k(10,e),_n(e)}function _n(e){if(!te(e)||Ve(e))return e;const t=e[N];let n,s=!0;if(t){if(!t.modified_)return t.base_;t.finalized_=!0,n=nt(e,t.scope_.immer_.useStrictShallowCopy_),s=t.scope_.immer_.shouldUseStrictIteration()}else n=nt(e,!0);return Me(n,(r,i)=>{ln(n,r,_n(i))},s),t&&(t.finalized_=!1),n}var Yr=new zr,Kr=Yr.produce;const Xr=e=>(t,n,s)=>(s.setState=(r,i,...c)=>{const a=typeof r=="function"?Kr(r):r;return t(a,i,...c)},e(s.setState,n,s)),Zr=Xr,Nt=e=>Symbol.iterator in e,Ut=e=>"entries"in e,$t=(e,t)=>{const n=e instanceof Map?e:new Map(e.entries()),s=t instanceof Map?t:new Map(t.entries());if(n.size!==s.size)return!1;for(const[r,i]of n)if(!s.has(r)||!Object.is(i,s.get(r)))return!1;return!0},Jr=(e,t)=>{const n=e[Symbol.iterator](),s=t[Symbol.iterator]();let r=n.next(),i=s.next();for(;!r.done&&!i.done;){if(!Object.is(r.value,i.value))return!1;r=n.next(),i=s.next()}return!!r.done&&!!i.done};function qr(e,t){return Object.is(e,t)?!0:typeof e!="object"||e===null||typeof t!="object"||t===null||Object.getPrototypeOf(e)!==Object.getPrototypeOf(t)?!1:Nt(e)&&Nt(t)?Ut(e)&&Ut(t)?$t(e,t):Jr(e,t):$t({entries:()=>Object.entries(e)},{entries:()=>Object.entries(t)})}function Qr(e){const t=le.useRef(void 0);return n=>{const s=e(n);return qr(t.current,s)?t.current:t.current=s}}const Bt={isVisible:!1},es=(...[e,t,n])=>({overlay:{isVisible:Bt.isVisible,setIsVisible:s=>t(r=>{r.overlay.isVisible=s},void 0,e("setIsVisible")),reset:()=>({overlay:{...n().overlay,...Bt}})}}),Gt={isActive:!1,isPaused:!1,start:ae,cancel:ae,toggleActive:ae,pause:ae,resume:ae,invert:!1,direction:On.FORWARD,scrollRef:void 0},ts=(...[e,t,n])=>({autoScroll:{...Gt,reset:()=>({autoScroll:{...n().autoScroll,...Gt}}),setIsActive:s=>t(r=>{r.autoScroll.isActive=s},void 0,e("setIsActive")),setIsPaused:s=>t(r=>{r.autoScroll.isPaused=s},void 0,e("setIsPaused")),setStart:s=>t(r=>{r.autoScroll.start=s},void 0,e("setStart")),setCancel:s=>t(r=>{r.autoScroll.cancel=s},void 0,e("setCancel")),setToggleActive:s=>t(r=>{r.autoScroll.toggleActive=s},void 0,e("setToggleActive")),setPause:s=>t(r=>{r.autoScroll.pause=s},void 0,e("setPause")),setResume:s=>t(r=>{r.autoScroll.resume=s},void 0,e("setResume")),setInvert:s=>t(r=>{r.autoScroll.invert=s},void 0,e("setInvert")),setDirection:s=>t(r=>{r.autoScroll.direction=s},void 0,e("setDirection")),setScrollRef:s=>t(r=>{if(!s){r.autoScroll.scrollRef=void 0;return}const i=E.createRef();i.current=s,r.autoScroll.scrollRef=i},void 0,e("setScrollRef"))}}),kt={isMaximized:!1,isDragging:!1},ns=(...[e,t,n])=>({progressBar:{...kt,setIsMaximized:s=>t(r=>{r.progressBar.isMaximized=s},void 0,e("setIsMaximized")),setIsDragging:s=>t(r=>{r.progressBar.isDragging=s},void 0,e("setIsDragging")),reset:()=>({progressBar:{...n().progressBar,...kt}})}}),Ft={showPreview:!1},rs=(...[e,t,n])=>({tapZone:{...Ft,setShowPreview:s=>t(r=>{r.tapZone.showPreview=s},void 0,e("setShowPreview")),reset:()=>({tapZone:{...n().tapZone,...Ft}})}}),Vt={totalPages:0,currentPageIndex:0,pageToScrollToIndex:null,pageUrls:[],pageLoadStates:[{url:"",loaded:!1}],pages:[{name:"1",primary:{index:0,alt:"Page #1",url:"".concat(K.getBaseUrl())}}],transitionPageMode:fe.NONE,retryFailedPagesKeyPrefix:""},ss=(...[e,t,n])=>({pages:{...Vt,reset:()=>({pages:{...n().pages,...Vt}}),setCurrentPageIndex:s=>t(r=>{r.pages.currentPageIndex=s},void 0,e("setCurrentPageIndex")),setPageToScrollToIndex:s=>t(r=>{r.pages.pageToScrollToIndex=s},void 0,e("setPageToScrollToIndex")),setTotalPages:s=>t(r=>{r.pages.totalPages=s},void 0,e("setTotalPages")),setPageUrls:s=>t(r=>{r.pages.pageUrls=s},void 0,e("setPageUrls")),setPageLoadStates:s=>t(r=>{if(typeof s=="function"){r.pages.pageLoadStates=s(n().pages.pageLoadStates);return}r.pages.pageLoadStates=s},void 0,e("setPageLoadStates")),setPages:s=>t(r=>{r.pages.pages=s},void 0,e("setPages")),setTransitionPageMode:s=>t(r=>{r.pages.transitionPageMode=s},void 0,e("setTransitionPageMode")),setRetryFailedPagesKeyPrefix:s=>t(r=>{r.pages.retryFailedPagesKeyPrefix=s},void 0,e("setRetryFailedPagesKeyPrefix"))}}),Ht={chapters:{mangaChapters:void 0,chapters:[],chapterForDuplicatesHandling:void 0,initialChapter:void 0,currentChapter:void 0,nextChapter:void 0,previousChapter:void 0,isCurrentChapterReady:!1,visibleChapters:{leading:0,trailing:0,lastLeadingChapterSourceOrder:99999,lastTrailingChapterSourceOrder:-1,isLeadingChapterPreloadMode:!0,isTrailingChapterPreloadMode:!0,scrollIntoView:!1,resumeMode:void 0}}},is=(...[e,t,n])=>({chapters:{...Ht.chapters,reset:()=>({chapters:{...n().chapters,...Ht.chapters}}),setReaderStateChapters:s=>t(r=>{if(typeof s=="function"){r.chapters={...n().chapters,...s(n().chapters)};return}r.chapters={...n().chapters,...s}},void 0,e("setReaderStateChapters"))}});class Ue{static createActionName(...t){const n=t.slice(0,-1),s=t.slice(-1)[0];return"".concat(n.join(":"),"/").concat(s)}static createActionNameCreator(t,n=Ue.createActionName){return(...s)=>n(t,...s)}}const os=["scrollRef"],Ce={manga:void 0,scrollbar:{xSize:0,ySize:0}},X=jr()(Nr(Zr((e,t,n)=>{const s=Ue.createActionNameCreator("reader"),r=i=>Ue.createActionNameCreator(i,s);return{...Ce,reset:()=>e(()=>({...t(),...Ce,scrollbar:{...t().scrollbar,...Ce.scrollbar},settings:{...t().settings,...At},...t().overlay.reset(),...t().autoScroll.reset(),...t().pages.reset(),...t().chapters.reset(),...t().progressBar.reset(),...t().tapZone.reset()}),void 0,s("reset")),setManga:i=>e(c=>{c.manga=i},void 0,s("setManga")),scrollbar:{...Ce.scrollbar,setXSize:i=>e(c=>{c.scrollbar.xSize=i},void 0,s("scrollbar","setXSize")),setYSize:i=>e(c=>{c.scrollbar.ySize=i},void 0,s("scrollbar","setYSize"))},settings:{...At,setSettings:i=>e(c=>{c.settings={...t().settings,...i}},void 0,s("settings","setSettings"))},...es(r("overlay"),e,t,n),...ts(r("autoScroll"),e,t,n),...ss(r("pages"),e,t,n),...is(r("chapters"),e,t,n),...ns(r("progressBar"),e,t,n),...rs(r("tapZone"),e,t,n)}}),{name:"ReaderStore",anonymousActionType:"reader/action",serialize:{replacer:(e,t)=>os.includes(e)?null:t}})),q=e=>X(Qr(e)),Oe=()=>X.getState(),as=q,uo=()=>X.getState().scrollbar,qe=q,cs=()=>X.getState().settings,_o=q,ho=()=>X.getState().overlay,go=q,fo=()=>X.getState().autoScroll,mo=q,xo=()=>X.getState().pages,po=q,ls=()=>X.getState().chapters,vo=q,ds=q,So=()=>X.getState().tapZone,us=e=>Object.keys(e).map(t=>{const n=t,s=e[n];switch(n){case"brightness":case"contrast":case"saturate":return s.enabled?"".concat(n,"(").concat(s.value/100,")"):"";case"hue":return s.enabled?"hue-rotate(".concat(s.value,"deg)"):"";case"rgba":return"";case"sepia":case"grayscale":case"invert":return s?"".concat(n,"(").concat(Number(s),")"):"";default:throw new Error('Unexpected "CustomFilter" ('.concat(n,")"))}}).join(" "),_s=({pageIndex:e,pagesIndex:t,isPrimaryPage:n,display:s,doublePage:r=!1,position:i,marginTop:c,shouldLoad:a,readingMode:d,customFilter:l,pageScaleMode:u,shouldStretchPage:_,readerWidth:h,onLoad:f,onError:g,setRef:x,readerNavBarWidth:p,isLoaded:m,...T})=>{const{src:R}=T,b=$e.useIsTabletWidth(),I=as(W=>W.scrollbar),M=E.useCallback(()=>f==null?void 0:f(t,R,n),[f,t,R,n]),j=E.useCallback(()=>g==null?void 0:g(e,R),[g,e,R]),B=E.useCallback(W=>x==null?void 0:x(t,W),[t,x]);return!s&&!a?null:o.jsx(cr,{...T,onLoad:M,onError:j,shouldLoad:a,shouldDecode:!0,ref:B,spinnerStyle:{backgroundColor:"background.paper",...fs(d,_,u,h,p+I.ySize,I.xSize,r,b),...A(!s,{display:"none"}),...zt(r,i)},imgStyle:{...xs(d,_,u,r,h,p+I.ySize,I.xSize),filter:us(l),objectFit:"contain",objectPosition:i,userSelect:"none",...zt(r,i),...A(c!==void 0,{mt:"".concat(c,"px")}),display:"block",...A(!s,{display:"none"}),...A(!m,{margin:"unset"})},hideImgStyle:{visibility:"hidden",minWidth:0,minHeight:0,width:0,height:0}})},hs=E.memo(_s),gs=(e,t,n,s)=>{if(on(n,e)){const r=n.value;return t?r/100/2:r/100}return t?.5:1},fs=(e,t,n,s,r,i,c,a)=>{const l=R=>"calc(".concat(R," - ").concat(r,"px)"),u=(R,b)=>l("".concat(Te(b!=null?b:R,Math.min(R,b!=null?b:9e3),R),"vw")),_=Pr(s,n),h=l("".concat(Math.min(100,_!=null?_:9e3),"vw")),f="calc(100vh - ".concat(i,"px)"),g=a?h:u(40,_),x=a?f:"85vh",m={...{[O.SINGLE_PAGE]:{minWidth:g,minHeight:x},[O.DOUBLE_PAGE]:{minWidth:a?"50vw":u(35,_?_/2:void 0),minHeight:x},[O.CONTINUOUS_VERTICAL]:{minWidth:g,minHeight:"100vh"},[O.CONTINUOUS_HORIZONTAL]:{minWidth:g,minHeight:x},[O.WEBTOON]:{minWidth:g,minHeight:"100vh"}}[e],height:"unset"},T=c?"calc(".concat(l("".concat(_!=null?_:100,"vw"))," / 2)"):h;switch(n){case L.WIDTH:return{...m,...A(t,{minWidth:T})};case L.HEIGHT:return{...m,...A(t,{minHeight:f,...A(je(e),{minHeight:"100vh"})})};case L.SCREEN:return{...m,...A(t,{minWidth:T,minHeight:f,...A(je(e),{minHeight:"100vh"})})};case L.ORIGINAL:return{...m,...A(je(e),{height:void 0})};default:throw new Error('Unexpected "PageScaleMode" ('.concat(n,")"))}},ms=(e,t,n,s,r,i)=>{const c="calc((100vw - ".concat(r,"px) * ").concat(e,")"),a="calc(100vh - ".concat(i,"px)");switch(s){case L.WIDTH:return{minWidth:0,...A(J(t),{minWidth:"unset"}),...A(n,{minWidth:c}),maxWidth:c};case L.HEIGHT:return{minHeight:0,...A(J(t),{minHeight:"unset"}),...A(n,{minHeight:a}),maxHeight:a};case L.SCREEN:return{minWidth:0,minHeight:0,...A(J(t),{minWidth:"unset",minHeight:"unset"}),...A(n,{minWidth:c,minHeight:a,...A(t===O.CONTINUOUS_HORIZONTAL,{minWidth:"unset",minHeight:a}),...A(je(t),{minWidth:c,minHeight:"unset"})}),maxWidth:c,maxHeight:a};case L.ORIGINAL:return{};default:throw new Error('Unexpected "PageScaleMode" ('.concat(s,")"))}},xs=(e,t,n,s,r,i,c)=>{const a=gs(n,s,r);return ms(a,e,t,n,i,c)},zt=(e,t)=>({m:"auto",...A(e,{...A(t==="right",{mr:"unset "}),...A(t==="left",{ml:"unset "})})}),at=(e,t)=>({index:t,alt:"Page #".concat(t+1),url:"".concat(K.getBaseUrl()).concat(e)}),ps=(e,t)=>({name:"".concat(t+1),primary:at(e,t)}),Eo=e=>e.map(ps),vs=(e,t,n,s,r,i)=>{if(s||!r||i)return Number.MAX_SAFE_INTEGER;const c=Math.abs(t-e),a=n-c;return t<e?a-1:a},Re=({primary:{index:e,alt:t,url:n}},s,r,i,c,a,d,l,u,_,h,f,g,x,p,m,T,R,b,I,M,j)=>o.jsx(hs,{setRef:j,pageIndex:e,pagesIndex:s,isPrimaryPage:r,src:n,alt:t,display:u,priority:vs(_,e,h,i,l,c),position:b,onLoad:a,onError:d,doublePage:I,shouldLoad:l,retryKeyPrefix:R,marginTop:M,isLoaded:i,readingMode:f,customFilter:g,pageScaleMode:x,shouldStretchPage:p,readerWidth:m,readerNavBarWidth:T},n),hn=(e,{truncateValues:t,thresholds:n}={truncateValues:!1,thresholds:{}})=>{const{top:s,bottom:r,left:i,right:c}=e.getBoundingClientRect(),a=R=>t?Math.trunc(R):R,d=a(s),l=a(r),u=a(i),_=a(c),h={top:0,bottom:0,left:0,right:0,...n},f=u>=h.left&&u<=window.innerWidth,g=_>=h.right&&_<=window.innerWidth,x=u<=0&&_>=window.innerWidth,p=d>=h.top&&d<=window.innerHeight,m=l>=h.bottom&&l<=window.innerHeight,T=d<=0&&l>=window.innerHeight;return{isLeftInViewport:f,isRightInViewport:g,isFillingWidthViewportCompletely:x,isTopInViewport:p,isBottomInViewport:m,isFillingHeightViewportCompletely:T}},Ro=(e,t,n)=>{const{isLeftInViewport:s,isRightInViewport:r,isFillingWidthViewportCompletely:i,isTopInViewport:c,isBottomInViewport:a,isFillingHeightViewportCompletely:d}=hn(e,n),l=s||r||i,u=c||a||d;switch(t){case De.X:return l;case De.Y:return u;default:throw new Error('unexpected "type" ('.concat(t,")"))}},To=(e,t,n)=>{const{isLeftInViewport:s,isRightInViewport:r,isBottomInViewport:i}=hn(e);switch(t){case De.X:return n===z.LTR?r:s;case De.Y:return i;default:throw new Error('unexpected "type" ('.concat(t,")"))}},Ao=(e,t,n,s)=>{const r=[],i=t.map((c,a)=>a+t.slice(0,a).filter(({isSpread:d})=>d).length);return e.forEach((c,a)=>{var j;const l=!(i[a]%2),u=(l?1:-1)*(n?-1:1),_=a+u,h=a<_,f=a===0,g=a===e.length-1,x=h&&!g,p=t[a].isSpread,m=!!((j=t[_])!=null&&j.isSpread),b=!(p||m)&&!(f&&n);if(!h&&b){const B=r[r.length-1];r[r.length-1]={...B,secondary:at(c,a)};return}const I="-",M="".concat(a+1).concat(x&&b?"".concat(I).concat(_+1):"");r.push({name:s===z.LTR?M:lr(M,I),primary:at(c,a)})}),r},Ss=e=>e.height/e.width<1,Es=0,Rs=1,Ts=(e,t,n,s)=>e?s:t||n?Te(Rs,Es,s):0,As=2,bs=(e,t,n,s,r,i,c,a)=>{if(!i&&!c&&!a)return[];const d=sn(e,t).pagesIndex,l=Ts(i,c,a,s),u=n<=e&&!c?1:-1,_=Math.max(0,d-Math.min(As,l)*u),h=J(r)?e:_,f=d+l*u,g=Math.max(1,Math.abs(f-h)+Number(i));return Array(g).fill(1).map((x,p)=>h+p*u)},bo=(e,t,n)=>[fe.BOTH,e].includes(t)||J(n),ys=(e,t)=>e!==fe.NONE||J(t),yo=(e,t)=>{const n=Zt[t];return e==="ltr"?we("start","end",n):we("end","start",n)},Po=(e,t,n)=>{const s=Zt[n];return t==="ltr"?we(0,e.scrollWidth,s):we(-e.scrollWidth,0,s)},gn=(e,t)=>t===void 0||t.url!==e,Ps=(e,t,n)=>e===H.START?0:e===H.END?n:Te(t,0,n),he=e=>G.getFromCache(e,jn,"CHAPTER_READER_FIELDS"),Is=(e,t,n,s,r,i,c)=>{if(!(!!s.isRead&&!!r))return[];const d=[e,...n][r-1];if(!d)return[];const u=(c?G.addDuplicates([d],t):[d]).map(({id:_})=>he(_)).filter(_=>_!==null).filter(_=>G.isDeletable(_,i));return u.length?G.getIds(u):[]},fn=(e,t,n=_e.NEXT)=>{const s=(e+1)/t;return n===_e.PREVIOUS?s<.75:s>.25},Cs=(e,t,n,s,r)=>{const i=he(e.id);if(!i||!t)return[];if(!(!!r&&i.isDownloaded&&fn(s,i.pageCount)))return[];const d=he(t.id);return d!=null&&d.isDownloaded?G.getNonRead(n).map(u=>he(u.id)).filter(u=>!!u).slice(-r).filter(u=>!u.isDownloaded).map(u=>u.id).filter(u=>!G.isDownloading(u)):[]},Io=(e,t,n,s)=>(r,i,c=!0)=>{if(r>e.length-1)return;const a=e[r],{index:d}=c?a.primary:a.secondary;if(s===O.DOUBLE_PAGE){const l=new Image;l.onload=()=>{const u=Ss(l);u&&t(_=>{const h=_[d];return h===void 0||h.url!==i||h.isSpread===u?_:_.toSpliced(d,1,{url:i,isSpread:u})})},l.crossOrigin="anonymous",l.src=i}n(l=>{const u=l[d];return gn(i,u)||u.loaded?l:l.toSpliced(d,1,{url:u.url,loaded:!0})})},Co=(e,t)=>{if(e)return t?H.END:H.START},Oo=e=>(t,n)=>{e(s=>{const r=s[t];return gn(n,r)?s:s.toSpliced(t,1,{...r,loaded:!1,error:!0})})},Os=(e,t,n,s,r,i)=>{const{leading:c,trailing:a,lastLeadingChapterSourceOrder:d,lastTrailingChapterSourceOrder:l}=t.visibleChapters,u=e&&n<d,_=!e&&n>l;return{...t,visibleChapters:{...t.visibleChapters,leading:c+Number(u),trailing:a+Number(_),lastLeadingChapterSourceOrder:u?n:d,lastTrailingChapterSourceOrder:_?n:l,isLeadingChapterPreloadMode:r!==void 0?r:t.visibleChapters.isLeadingChapterPreloadMode,isTrailingChapterPreloadMode:i!==void 0?i:t.visibleChapters.isTrailingChapterPreloadMode,scrollIntoView:s,resumeMode:e?H.END:H.START}}},jo=(e,t,n,s,r,i,c,a)=>{if(s){if(r)return Te(e,0,t.pageCount-1);if(a.scrollIntoView&&a.resumeMode!==void 0)return Ps(a.resumeMode,0,t.pageCount-1);if(i)return Math.max(0,t.pageCount-1);if(c)return 0}return t.sourceOrder<n.sourceOrder?Math.max(t.pageCount-1,0):0},Do=(e,t,n,s,r,i)=>e&&r!==void 0?r:t?i:n?H.END:s?H.START:H.START,wo=(e,t,n)=>{const s=!!t[e+1],i=e+1>=t.length-1&&n.isLeadingChapterPreloadMode,c=s&&!i,a=!!t[e-1],l=e-1<=0&&n.isTrailingChapterPreloadMode;return{previous:c,next:a&&!l}},js={ltr:"rtl",rtl:"ltr"},Ds={ltr:z.LTR,rtl:z.RTL},Y=class Y{static getOrCreateChapterUpdateQueue(t){return Y.chapterUpdateQueues.has(t)||Y.chapterUpdateQueues.set(t,new gt(1)),Y.chapterUpdateQueues.get(t)}static navigateToChapter(t,n){Dn.navigate(G.getReaderUrl(t),{replace:!0,state:n})}static downloadAhead(t,n,s,r,i){const c="".concat(t.id,"_").concat(n==null?void 0:n.id,"_").concat(r,"_").concat(i);Y.downloadAheadQueue.enqueue(c,async()=>{const a=Cs(t,n,s,r,i);if(a.length)try{await G.download(a)}catch(d){ft("ReaderService::useUpdateCurrentPageIndex: download ahead")(d)}})}static preloadChapter(t,n,s,r,i,c,a){if(!s)return;const d=a===_e.PREVIOUS,l=a===_e.NEXT;!(d&&r<=s.sourceOrder||l&&i>=s.sourceOrder)&&fn(t,n,a)&&c(h=>Os(d,h,s.sourceOrder,!1,d?!0:void 0,l?!0:void 0))}static useUpdateChapter(){const{settings:{deleteChaptersWhileReading:t,deleteChaptersWithBookmark:n,updateProgressAfterReading:s}}=wn();return E.useCallback(r=>{const{manga:i}=Oe(),{currentChapter:c,mangaChapters:a,chapters:d}=ls(),{shouldSkipDupChapters:l}=cs();if(!i||!c||!a)return;const u=G.getNextChapters(c,d,{offset:_e.PREVIOUS}),_=async()=>{const h=G.getIds(l?G.addDuplicates([c],a):[c]),f=Is(c,a,u,r,t,n,l);(f.length||h.some(x=>{const p=he(x);return p?r.isRead!==void 0&&r.isRead!==p.isRead||r.lastPageRead!==void 0&&r.lastPageRead!==p.lastPageRead||r.isBookmarked!==void 0&&r.isBookmarked!==p.isBookmarked:!1}))&&await K.updateChapters(h,{...r,chapterIdsToDelete:f,trackProgressMangaId:s&&r.isRead&&i.trackRecords.totalCount?i.id:void 0},{errorPolicy:"all"}).response.catch(ft("ReaderService::useUpdateChapter"))};Y.getOrCreateChapterUpdateQueue(c.id).enqueue("".concat(c.id),_)},[t,n,s])}static useGetThemeDirection(){const{direction:t}=dt(),n=qe(s=>s.settings.readingDirection.value);return Ds[t]===n?t:js[t]}static updateSetting(t,n,s=!0,r=!1,i){const{manga:c}=Oe(),a=c!=null?c:r?Rt:c;if(!a||a.id===Tt.id)return;const d=mt(t,i!==void 0?[i==null?void 0:i.toString()]:void 0),{cache:l}=K.graphQLClient.client;if(r||ge.includes(t)){const _=l.writeFragment({fragment:Mn,data:{__typename:"GlobalMetaType",key:d,value:JSON.stringify(n)}});l.modify({fields:{metas(h,{readField:f}){return{...h,nodes:xt(d,h==null?void 0:h.nodes,f,()=>_)}}}})}else{const _=l.writeFragment({fragment:Ln,data:{__typename:"MangaMetaType",mangaId:a.id,key:d,value:JSON.stringify(n)}});l.modify({id:l.identify({__typename:"MangaType",id:a.id}),fields:{meta(h,{readField:f}){return xt(d,h,f,()=>_)}}})}s&&mr(a,t,n,r,i).catch(_=>pt(St._({id:"sFl1CR"}),"error",vt(_)))}static deleteSetting(t,n=!1,s){const{manga:r}=Oe(),i=r!=null?r:n?Rt:r;if(!i||i.id===Tt.id)return;const c=mt(t,s!==void 0?[s]:void 0),{cache:a}=K.graphQLClient.client,d=n||ge.includes(t);d?a.evict({id:a.identify({__typename:"GlobalMetaType",key:c})}):a.evict({id:a.identify({__typename:"MangaMetaType",mangaId:i.id,key:c})}),(d?()=>K.deleteGlobalMeta(c).response:()=>K.deleteMangaMeta(i.id,c).response)().catch(u=>pt(St._({id:"sFl1CR"}),"error",vt(u)))}static useOverlayMode(){const t=$e.useIsTouchDevice(),n=qe(d=>d.settings.overlayMode),s=n===$.AUTO,r=n===$.DESKTOP,i=n===$.MOBILE,c=r||s&&!t,a=i||s&&t;return{mode:c?$.DESKTOP:$.MOBILE,isDesktop:c,isMobile:a}}static useExit(){const t=qe(i=>i.settings.exitMode),n=Nn(),s=Un(),r=E.useCallback(()=>{const{manga:i}=Oe();return i?s($n.manga.path(i.id)):()=>{}},[]);switch(t){case me.PREVIOUS:return n;case me.MANGA:return r;default:throw new Error('Unexpected "exitMode" ('.concat(t,")"))}}};ze(Y,"downloadAheadQueue",new gt(1)),ze(Y,"chapterUpdateQueues",new Map);let ct=Y;const ws=({superscript:e,text:t})=>o.jsxs(S,{sx:{flexDirection:"row",gap:.25},children:[t,o.jsx(y,{variant:"caption",sx:{fontSize:"x-small",opacity:.75},children:e})]}),Ms=({value:e,values:t,defaultValue:n,setValue:s,valueToDisplayData:r,isDefaultable:i,onDefault:c})=>{const{i18n:a,_:d}=v();return o.jsxs(S,{sx:{flexDirection:"row",flexWrap:"wrap",gap:1},children:[i&&o.jsx(ee,{onClick:c,variant:e===void 0?"contained":"outlined",children:a._({id:"ovBPCi"})},"default"),t.map(l=>{const u=e===void 0&&l===n,_=r[l].isTitleString?r[l].title:a._(r[l].title);return o.jsx(Be,{title:u?a._({id:"D5zldB"}):"",children:o.jsx(ee,{onClick:()=>s(l),variant:l===e?"contained":"outlined",startIcon:r[l].icon,children:u?o.jsx(ws,{superscript:"*",text:_}):_})},l)})]})},U=({label:e,description:t,...n})=>o.jsxs(S,{children:[o.jsx(y,{children:e}),t&&o.jsx(y,{variant:"body2",color:"textDisabled",children:t}),o.jsx(Ms,{...n})]}),mn=({readingMode:e,setReadingMode:t,...n})=>{const{i18n:s,_:r}=v();return o.jsx(U,{...n,label:s._({id:"n1QGhW"}),value:e.isDefault?void 0:e.value,defaultValue:e.isDefault?e.value:void 0,values:qt,setValue:t,valueToDisplayData:Jt})},Ls={[z.LTR]:{title:{id:"1zAee9"},icon:o.jsx(Gn,{})},[z.RTL]:{title:{id:"isgNhH"},icon:o.jsx(Bn,{})}},Ns=Object.values(z).filter(e=>typeof e=="number"),Us=({readingDirection:e,setReadingDirection:t,...n})=>{const{i18n:s,_:r}=v();return o.jsx(U,{...n,label:s._({id:"Ap8Ipr"}),value:e.isDefault?void 0:e.value,defaultValue:e.isDefault?e.value:void 0,values:Ns,setValue:t,valueToDisplayData:Ls})},$s={[se.EDGE]:{title:{id:"izD9nz"},icon:null},[se.KINDLE]:{title:{id:"/x81ME"},icon:null},[se.L_SHAPE]:{title:{id:"WdxF/E"},icon:null},[se.RIGHT_LEFT]:{title:{id:"Uiadsw"},icon:null},[se.DISABLED]:{title:{id:"E/QGRL"},icon:null}},Bs=Object.values(se).filter(e=>typeof e=="number"),Gs=({tapZoneLayout:e,setTapZoneLayout:t,...n})=>{const{i18n:s,_:r}=v();return o.jsx(U,{...n,label:s._({id:"KHYK7w"}),value:e.isDefault?void 0:e.value,defaultValue:e.isDefault?e.value:void 0,values:Bs,setValue:t,valueToDisplayData:$s})};var xn=function(e){return e[e.NONE=0]="NONE",e[e.HORIZONTAL=1]="HORIZONTAL",e[e.VERTICAL=2]="VERTICAL",e[e.BOTH=3]="BOTH",e}(xn||{});const ks={0:{title:{id:"EdQY6l"},icon:null},1:{title:{id:"pzu7v4"},icon:null},2:{title:{id:"mX/isJ"},icon:null},3:{title:{id:"njBeMm"},icon:null}},Fs=Object.values(xn).filter(e=>typeof e=="number"),Vs={0:{vertical:!1,horizontal:!1},1:{vertical:!1,horizontal:!0},2:{vertical:!0,horizontal:!1},3:{vertical:!0,horizontal:!0}},Hs=({vertical:e,horizontal:t})=>e&&t?3:e?2:t?1:0,zs=({tapZoneInvertMode:e,setTapZoneInvertMode:t,...n})=>{const{i18n:s,_:r}=v(),i=Hs(e.value);return o.jsx(U,{...n,label:s._({id:"VS8gSt"}),value:e.isDefault?void 0:i,defaultValue:e.isDefault?i:void 0,values:Fs,setValue:c=>t(Vs[c]),valueToDisplayData:ks})},Ws=({pageScaleMode:e,setPageScaleMode:t,...n})=>{const{i18n:s,_:r}=v();return o.jsx(U,{...n,label:s._({id:"h1Kv7C"}),value:e.isDefault?void 0:e.value,defaultValue:e.isDefault?e.value:void 0,values:Fn,setValue:t,valueToDisplayData:kn})},Ys=({pageScaleMode:e,shouldStretchPage:t,setShouldStretchPage:n})=>{const{i18n:s,_:r}=v();return Vn[e]?o.jsx(Z,{children:o.jsx(ee,{onClick:()=>n(!t),variant:t?"contained":"outlined",children:s._({id:"RrbZW2"})})}):null},Wt=oe(o.jsx("path",{d:"M12 5V2L8 6l4 4V7c3.31 0 6 2.69 6 6 0 2.97-2.17 5.43-5 5.91v2.02c3.95-.49 7-3.85 7-7.93 0-4.42-3.58-8-8-8m-6 8c0-1.65.67-3.15 1.76-4.24L6.34 7.34C4.9 8.79 4 10.79 4 13c0 4.08 3.05 7.44 7 7.93v-2.02c-2.83-.48-5-2.94-5-5.91"})),be=({asIconButton:e,...t})=>{const{i18n:n,_:s}=v();return e?o.jsx(Be,{title:n._({id:"OfhWJH"}),children:o.jsx(Qt,{color:"inherit",...t,children:o.jsx(Wt,{})})}):o.jsx(ee,{startIcon:o.jsx(Wt,{}),...t,children:n._({id:"OfhWJH"})})},V=({label:e,value:t,onDefault:n,slotProps:s})=>{var r,i,c;return o.jsxs(S,{sx:{flexDirection:"row",gap:2,alignItems:"center"},children:[o.jsxs(S,{sx:{flexBasis:"25%"},children:[o.jsx(y,{...s==null?void 0:s.label,sx:{...(r=s==null?void 0:s.label)==null?void 0:r.sx},children:e}),o.jsx(y,{...s==null?void 0:s.value,sx:{...(i=s==null?void 0:s.value)==null?void 0:i.sx},children:t})]}),o.jsx(ur,{...s==null?void 0:s.slider,sx:{flexBasis:"75%",...(c=s==null?void 0:s.slider)==null?void 0:c.sx}}),n&&o.jsx(be,{asIconButton:!0,onClick:n})]})},Ks=({pageGap:e,readingMode:t,isDefaultable:n,onDefault:s,updateSetting:r})=>{const{i18n:i,_:c}=v();return t.value!==O.WEBTOON&&J(t.value)?o.jsx(V,{label:i._({id:"UBmH1j"}),value:"".concat(e.value).concat(i._({id:"qdSiBE"})),onDefault:n?s:void 0,slotProps:{slider:{defaultValue:P.pageGap,value:e.value,step:We.step,min:We.min,max:We.max,onChange:(d,l)=>{r(l,!1)},onChangeCommitted:(d,l)=>{r(l,!0)}}}}):null},Xs=({readerWidth:e,pageScaleMode:t,isDefaultable:n,onDefault:s,updateSetting:r,setTransparent:i})=>{const{i18n:c,_:a}=v();return ut(t)?o.jsxs(S,{children:[o.jsxs(S,{sx:{flexDirection:"row",justifyContent:"space-between"},children:[o.jsx(C,{label:c._({id:"0eF80K"}),checked:e.enabled,onChange:(d,l)=>r("readerWidth",{...e,enabled:l},!0)}),n&&o.jsx(be,{onClick:s,variant:"outlined"})]}),e.enabled&&o.jsx(V,{label:c._({id:"Rh3JNI"}),value:"".concat(e.value,"%"),slotProps:{slider:{defaultValue:P.readerWidth.value,value:e.value,step:1,min:10,max:100,onChange:(d,l)=>{i==null||i(!0),r("readerWidth",{...e,value:l},!1)},onChangeCommitted:(d,l)=>{i==null||i(!1),r("readerWidth",{...e,value:l},!0)}}}})]}):null},Zs=({areDefaultSettings:e})=>{const{i18n:t,_:n}=v();return!$e.useIsTouchDevice()||e?null:o.jsx(S,{sx:{alignItems:"end"},children:o.jsx(y,{variant:"caption",children:t._({id:"mQmQfR"})})})},Js=({profile:e,title:t,updateSetting:n,isSeriesMode:s,...r})=>{const{settings:i}=fr(e),c=E.useMemo(()=>({...i,readingMode:{value:e,isDefault:!0}}),[i,e]);return o.jsxs(S,{sx:{gap:2},children:[s?o.jsx(y,{children:t}):o.jsx(_r,{component:"div",id:"".concat(e,"-settings"),children:t}),o.jsx(S,{sx:{px:+!s*2},children:o.jsx(vn,{...r,setShowPreview:()=>{},settings:c,updateSetting:(a,d,l)=>n(a,d,l,!0,e)})})]})},pn=({profiles:e=qt,readingMode:t,...n})=>{const{updateSetting:s,isSeriesMode:r}=n,{i18n:i,_:c}=v();return o.jsxs(S,{sx:{gap:2,pb:+!r*2},children:[t!==void 0&&o.jsx(S,{sx:{pt:2,px:2},children:o.jsx(mn,{readingMode:t,setReadingMode:a=>s("readingMode",a)})}),e.map(a=>o.jsx(Js,{profile:a,title:i._(Jt[a].title),...n},a))]})},vn=({setShowPreview:e,settings:t,updateSetting:n,isDefaultable:s,onDefault:r,isSeriesMode:i,setTransparent:c})=>{const{i18n:a,_:d}=v();return o.jsxs(S,{sx:{gap:2},children:[o.jsx(Zs,{areDefaultSettings:!s}),i&&o.jsxs(o.Fragment,{children:[o.jsx(y,{children:a._({id:"8pkf23"})}),o.jsx(mn,{readingMode:t.readingMode,setReadingMode:l=>n("readingMode",l),isDefaultable:s,onDefault:()=>r==null?void 0:r("readingMode")})]}),o.jsx(Ks,{pageGap:t.pageGap,readingMode:t.readingMode,isDefaultable:s,onDefault:()=>r==null?void 0:r("pageGap"),updateSetting:(...l)=>n("pageGap",...l)}),o.jsx(Us,{readingDirection:t.readingDirection,setReadingDirection:l=>n("readingDirection",l),isDefaultable:s,onDefault:()=>r==null?void 0:r("readingDirection")}),o.jsx(Gs,{tapZoneLayout:t.tapZoneLayout,setTapZoneLayout:l=>{e(!0),n("tapZoneLayout",l)},isDefaultable:s,onDefault:()=>{e(!0),r==null||r("tapZoneLayout")}}),o.jsx(zs,{tapZoneInvertMode:t.tapZoneInvertMode,setTapZoneInvertMode:l=>{e(!0),n("tapZoneInvertMode",l)},isDefaultable:s,onDefault:()=>{e(!0),r==null||r("tapZoneInvertMode")}}),o.jsx(Ws,{pageScaleMode:t.pageScaleMode,setPageScaleMode:l=>n("pageScaleMode",l),isDefaultable:s,onDefault:()=>r==null?void 0:r("pageScaleMode")}),o.jsx(Ys,{pageScaleMode:t.pageScaleMode.value,shouldStretchPage:t.shouldStretchPage.value,setShouldStretchPage:l=>n("shouldStretchPage",l)}),o.jsx(Xs,{readerWidth:t.readerWidth.value,pageScaleMode:t.pageScaleMode.value,isDefaultable:s,onDefault:()=>r==null?void 0:r("readerWidth"),updateSetting:(...l)=>n(...l),setTransparent:c}),i&&o.jsxs(o.Fragment,{children:[o.jsx(Hn,{}),o.jsx(pn,{profiles:[t.readingMode.value],updateSetting:n,isSeriesMode:i,setTransparent:c})]})]})},qs=()=>o.jsx(en,{children:o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:o.jsx("path",{fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M4 15h16"})})}),Qs=()=>o.jsx(en,{children:o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:o.jsx("path",{fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M4 15h16M7 15v-5m10 5v-5M4 9h16"})})}),ei={[xe.HIDDEN]:{title:{id:"D+zLDD"},icon:o.jsx(qs,{})},[xe.STANDARD]:{title:{id:"TJBHlP"},icon:o.jsx(Qs,{})}},ti=Object.values(xe).filter(e=>typeof e=="number"),ni=({overlayMode:e,progressBarType:t,setProgressBarType:n})=>{const{i18n:s,_:r}=v();return e!==$.DESKTOP?null:o.jsx(U,{label:s._({id:"748T9C"}),value:t,values:ti,setValue:n,valueToDisplayData:ei})},ri=({overlayMode:e,progressBarType:t,progressBarSize:n,setProgressBarSize:s,onDefault:r})=>{const{i18n:i,_:c}=v();return e===$.DESKTOP&&t===xe.STANDARD?o.jsx(V,{label:i._({id:"BOS/KV"}),value:"".concat(n).concat(i._({id:"qdSiBE"})),onDefault:r,slotProps:{slider:{defaultValue:P.progressBarSize,value:n,step:Ye.step,min:Ye.min,max:Ye.max,onChange:(d,l)=>{s(l,!1)},onChangeCommitted:(d,l)=>{s(l,!0)}}}}):null},si=oe(o.jsx("path",{d:"M6.23 20.23 8 22l10-10L8 2 6.23 3.77 14.46 12z"})),Yt=oe(o.jsx("path",{d:"M17.77 3.77 16 2 6 12l10 10 1.77-1.77L9.54 12z"})),Sn=oe([o.jsx("path",{d:"M19.03 3.56c-1.67-1.39-3.74-2.3-6.03-2.51v2.01c1.73.19 3.31.88 4.61 1.92zM11 3.06V1.05c-2.29.2-4.36 1.12-6.03 2.51l1.42 1.42C7.69 3.94 9.27 3.25 11 3.06M4.98 6.39 3.56 4.97C2.17 6.64 1.26 8.71 1.05 11h2.01c.19-1.73.88-3.31 1.92-4.61M20.94 11h2.01c-.21-2.29-1.12-4.36-2.51-6.03l-1.42 1.42c1.04 1.3 1.73 2.88 1.92 4.61M7 12l3.44 1.56L12 17l1.56-3.44L17 12l-3.44-1.56L12 7l-1.56 3.44z"},"0"),o.jsx("path",{d:"M12 21c-3.11 0-5.85-1.59-7.46-4H7v-2H1v6h2v-2.7c1.99 2.84 5.27 4.7 9 4.7 4.87 0 9-3.17 10.44-7.56l-1.96-.45C19.25 18.48 15.92 21 12 21"},"1")]),Kt={[F.AUTO]:{title:{id:"R9Khdg"},icon:o.jsx(Sn,{})},[F.BOTTOM]:{title:{id:"zsiX7I"},icon:o.jsx(Yt,{sx:{transform:"rotate(90deg)"}})},[F.LEFT]:{title:{id:"UlKSMd"},icon:o.jsx(si,{})},[F.RIGHT]:{title:{id:"nOPbWJ"},icon:o.jsx(Yt,{})}},ii=Object.values(F).filter(e=>typeof e=="number"),oi=Object.values(zn),ai=({progressBarPosition:e,progressBarPositionAutoVertical:t,updateSetting:n})=>{const{i18n:s,_:r}=v(),i=e===F.AUTO;return o.jsxs(o.Fragment,{children:[o.jsx(U,{label:s._({id:"xffhMO"}),value:e,values:ii,setValue:c=>n("progressBarPosition",c),valueToDisplayData:Kt}),i&&o.jsx(U,{label:s._({id:"/y++43"}),value:t,values:oi,setValue:c=>n("progressBarPositionAutoVertical",c),valueToDisplayData:Kt})]})},ci=oe(o.jsx("path",{d:"M15.5 1h-8C6.12 1 5 2.12 5 3.5v17C5 21.88 6.12 23 7.5 23h8c1.38 0 2.5-1.12 2.5-2.5v-17C18 2.12 16.88 1 15.5 1m-4 21c-.83 0-1.5-.67-1.5-1.5s.67-1.5 1.5-1.5 1.5.67 1.5 1.5-.67 1.5-1.5 1.5m4.5-4H7V4h9z"})),li=oe(o.jsx("path",{d:"M20 18c1.1 0 1.99-.9 1.99-2L22 6c0-1.1-.9-2-2-2H4c-1.1 0-2 .9-2 2v10c0 1.1.9 2 2 2H0v2h24v-2zM4 6h16v10H4z"})),di={[$.AUTO]:{title:{id:"R9Khdg"},icon:o.jsx(Sn,{})},[$.DESKTOP]:{title:{id:"BBqGS9"},icon:o.jsx(li,{})},[$.MOBILE]:{title:{id:"dMsM20"},icon:o.jsx(ci,{})}},ui=Object.values($).filter(e=>typeof e=="number"),_i=({overlayMode:e,setOverlayMode:t})=>{const{i18n:n,_:s}=v();return o.jsx(U,{label:n._({id:"qtoYko"}),value:e,values:ui,setValue:t,valueToDisplayData:di})},hi={[de.THEME]:{title:{id:"FEr96N"},icon:null},[de.BLACK]:{title:{id:"THokF3"},icon:null},[de.GRAY]:{title:{id:"qS5//Q"},icon:null},[de.WHITE]:{title:{id:"5Ex+AP"},icon:null}},gi=Object.values(de).filter(e=>typeof e=="number"),fi=({backgroundColor:e,updateSetting:t})=>{const{i18n:n,_:s}=v();return o.jsx(U,{label:n._({id:"MLZyiY"}),value:e,values:gi,setValue:t,valueToDisplayData:hi})},mi=({overlayMode:e,settings:t,updateSetting:n,onDefault:s})=>{const{i18n:r,_:i}=v();return o.jsxs(S,{sx:{gap:2},children:[o.jsx(_i,{overlayMode:t.overlayMode,setOverlayMode:c=>n("overlayMode",c)}),o.jsx(fi,{backgroundColor:t.backgroundColor,updateSetting:c=>n("backgroundColor",c)}),o.jsx(ni,{overlayMode:e,progressBarType:t.progressBarType,setProgressBarType:c=>n("progressBarType",c)}),o.jsx(ri,{overlayMode:e,progressBarType:t.progressBarType,progressBarSize:t.progressBarSize,setProgressBarSize:(...c)=>n("progressBarSize",...c),onDefault:()=>s==null?void 0:s("progressBarSize")}),o.jsx(ai,{progressBarPosition:t.progressBarPosition,progressBarPositionAutoVertical:t.progressBarPositionAutoVertical,updateSetting:n}),(t.progressBarType===xe.HIDDEN||e===$.MOBILE)&&o.jsx(C,{label:r._({id:"T+guOL"}),checked:t.shouldShowPageNumber,onChange:(c,a)=>n("shouldShowPageNumber",a)})]})},xi=({brightness:e,updateSetting:t})=>{const{i18n:n,_:s}=v();return o.jsxs(S,{children:[o.jsx(C,{label:n._({id:"3+2y0V"}),checked:e.enabled,onChange:(r,i)=>t("brightness",{...e,enabled:i},!0)}),e.enabled&&o.jsx(V,{label:n._({id:"3+2y0V"}),value:e.value,onDefault:()=>t("brightness",{...e,value:P.customFilter.brightness.value},!0),slotProps:{slider:{defaultValue:P.customFilter.brightness.value,value:e.value,step:w.brightness.step,min:w.brightness.min,max:w.brightness.max,onChange:(r,i)=>{t("brightness",{...e,value:i},!1)},onChangeCommitted:(r,i)=>{t("brightness",{...e,value:i},!0)}}}})]})},pi=({contrast:e,updateSetting:t})=>{const{i18n:n,_:s}=v();return o.jsxs(S,{children:[o.jsx(C,{label:n._({id:"ab93Te"}),checked:e.enabled,onChange:(r,i)=>t("contrast",{...e,enabled:i},!0)}),e.enabled&&o.jsx(V,{label:n._({id:"ab93Te"}),value:e.value,onDefault:()=>t("contrast",{...e,value:P.customFilter.contrast.value},!0),slotProps:{slider:{defaultValue:P.customFilter.contrast.value,value:e.value,step:w.contrast.step,min:w.contrast.min,max:w.contrast.max,onChange:(r,i)=>{t("contrast",{...e,value:i},!1)},onChangeCommitted:(r,i)=>{t("contrast",{...e,value:i},!0)}}}})]})},vi=({saturate:e,updateSetting:t})=>{const{i18n:n,_:s}=v();return o.jsxs(S,{children:[o.jsx(C,{label:n._({id:"V9+aMw"}),checked:e.enabled,onChange:(r,i)=>t("saturate",{...e,enabled:i},!0)}),e.enabled&&o.jsx(V,{label:n._({id:"V9+aMw"}),value:e.value,onDefault:()=>t("saturate",{...e,value:P.customFilter.saturate.value},!0),slotProps:{slider:{defaultValue:P.customFilter.saturate.value,value:e.value,step:w.saturate.step,min:w.saturate.min,max:w.saturate.max,onChange:(r,i)=>{t("saturate",{...e,value:i},!1)},onChangeCommitted:(r,i)=>{t("saturate",{...e,value:i},!0)}}}})]})},Si=({hue:e,updateSetting:t})=>{const{i18n:n,_:s}=v();return o.jsxs(S,{children:[o.jsx(C,{label:n._({id:"JEFMWQ"}),checked:e.enabled,onChange:(r,i)=>t("hue",{...e,enabled:i},!0)}),e.enabled&&o.jsx(V,{label:n._({id:"JEFMWQ"}),value:e.value,onDefault:()=>t("hue",{...e,value:P.customFilter.hue.value},!0),slotProps:{slider:{defaultValue:P.customFilter.hue.value,value:e.value,step:w.hue.step,min:w.hue.min,max:w.hue.max,onChange:(r,i)=>{t("hue",{...e,value:i},!1)},onChangeCommitted:(r,i)=>{t("hue",{...e,value:i},!0)}}}})]})},Ei={red:{id:"wRTiSD"},green:{id:"VmkjGB"},blue:{id:"Zn5crm"},alpha:{id:"mqm0Hp"}},Ri=({rgba:e,updateSetting:t})=>{const{i18n:n,_:s}=v();return o.jsxs(S,{children:[o.jsx(C,{label:n._({id:"+rW/I9"}),checked:e.enabled,onChange:(r,i)=>t("rgba",{...e,enabled:i},!0)}),e.enabled&&o.jsxs(S,{sx:{gap:1},children:[Object.entries(e.value).map(([r,i])=>r==="blendMode"?null:o.jsx(V,{label:n._(Ei[r]),value:i,onDefault:()=>t("rgba",{...e,value:{...e.value,[r]:P.customFilter.rgba.value[r]}},!0),slotProps:{slider:{value:i,defaultValue:P.customFilter.rgba.value[r],step:w.rgba[r].step,min:w.rgba[r].min,max:w.rgba[r].max,onChange:(c,a)=>{t("rgba",{...e,value:{...e.value,[r]:a}},!1)},onChangeCommitted:(c,a)=>{t("rgba",{...e,value:{...e.value,[r]:a}},!0)}}}},r)),o.jsx(U,{label:n._({id:"csv16z"}),value:e.value.blendMode,values:Yn,setValue:r=>t("rgba",{...e,value:{...e.value,blendMode:r}},!0),valueToDisplayData:Wn})]})]})},Ti=({sepia:e,updateSetting:t})=>{const{i18n:n,_:s}=v();return o.jsx(S,{children:o.jsx(C,{label:n._({id:"SFDRbG"}),checked:e,onChange:(r,i)=>t(i)})})},Ai=({grayscale:e,updateSetting:t})=>{const{i18n:n,_:s}=v();return o.jsx(S,{children:o.jsx(C,{label:n._({id:"jDeFIG"}),checked:e,onChange:(r,i)=>t(i)})})},bi=({invert:e,updateSetting:t})=>{const{i18n:n,_:s}=v();return o.jsx(S,{children:o.jsx(C,{label:n._({id:"ACNGjp"}),checked:e,onChange:(r,i)=>t(i)})})},yi=({settings:{customFilter:e},updateSetting:t,onDefault:n,setTransparent:s})=>{const r=(i,c)=>{t("customFilter",i,c),s==null||s(c===void 0?!1:!c)};return o.jsxs(S,{sx:{gap:2},children:[o.jsx(xi,{brightness:e.brightness,updateSetting:(i,c,a)=>r({...e,[i]:c},a)}),o.jsx(pi,{contrast:e.contrast,updateSetting:(i,c,a)=>r({...e,[i]:c},a)}),o.jsx(vi,{saturate:e.saturate,updateSetting:(i,c,a)=>r({...e,[i]:c},a)}),o.jsx(Si,{hue:e.hue,updateSetting:(i,c,a)=>r({...e,[i]:c},a)}),o.jsx(Ri,{rgba:e.rgba,updateSetting:(i,c,a)=>r({...e,[i]:c},a)}),o.jsx(Ti,{sepia:e.sepia,updateSetting:i=>r({...e,sepia:i})}),o.jsx(Ai,{grayscale:e.grayscale,updateSetting:i=>r({...e,grayscale:i})}),o.jsx(bi,{invert:e.invert,updateSetting:i=>r({...e,invert:i})}),o.jsx(S,{sx:{alignItems:"end"},children:o.jsx(be,{onClick:()=>n==null?void 0:n("customFilter"),variant:"outlined"})})]})},Pi={[me.PREVIOUS]:{title:{id:"DHhJ7s"},icon:null},[me.MANGA]:{title:{id:"uB8LjK"},icon:null}},Ii=Object.values(me).filter(e=>typeof e=="number"),Ci=({exitMode:e,setExitMode:t})=>{const{i18n:n,_:s}=v();return o.jsx(U,{label:n._({id:"dg7Dm2"}),value:e,values:Ii,setValue:t,valueToDisplayData:Pi})},Oi=({autoScroll:e,setAutoScroll:t})=>{const{i18n:n,_:s}=v();return o.jsxs(o.Fragment,{children:[o.jsx(C,{label:n._({id:"Tl3N0W"}),checked:e.smooth,onChange:(r,i)=>t({...e,smooth:i},!0)}),o.jsx(V,{label:n._({id:"IhlXcK"}),value:n._({id:"RRgNMe",values:{0:e.value}}),onDefault:()=>t({...e,value:P.autoScroll.value},!0),slotProps:{slider:{defaultValue:P.customFilter.saturate.value,value:e.value,...Kn,onChange:(r,i)=>{t({...e,value:i},!1)},onChangeCommitted:(r,i)=>{t({...e,value:i},!0)}}}})]})},ji={[ue.TINY]:{title:{id:"D/xnlN"},icon:null},[ue.SMALL]:{title:{id:"4Revpc"},icon:null},[ue.MEDIUM]:{title:{id:"agPptk"},icon:null},[ue.LARGE]:{title:{id:"k7rCa/"},icon:null}},Di=Object.values(ue).filter(e=>typeof e=="number"),wi=({scrollAmount:e,setScrollAmount:t})=>{const{i18n:n,_:s}=v();return o.jsxs(o.Fragment,{children:[o.jsx(U,{label:n._({id:"txAJtk"}),value:e,values:Di,setValue:r=>t(r,!0),valueToDisplayData:ji}),o.jsx(V,{label:n._({id:"Gg3jnH"}),value:"".concat(e,"%"),onDefault:()=>t(P.scrollAmount,!0),slotProps:{slider:{defaultValue:P.scrollAmount,value:e,...Xn,onChange:(r,i)=>{t(i,!1)},onChangeCommitted:(r,i)=>{t(i,!0)}}}})]})},Mi=({settings:e,updateSetting:t,onDefault:n,isDefaultable:s})=>{const{i18n:r,_:i}=v();return o.jsxs(S,{sx:{gap:2},children:[o.jsx(Ci,{exitMode:e.exitMode,setExitMode:c=>t("exitMode",c)}),o.jsx(wi,{scrollAmount:e.scrollAmount,setScrollAmount:(c,a)=>t("scrollAmount",c,a)}),o.jsx(C,{label:r._({id:"sjmndi"}),checked:e.shouldSkipDupChapters,onChange:(c,a)=>t("shouldSkipDupChapters",a)}),o.jsx(C,{label:o.jsxs(Z,{children:[o.jsx(y,{children:r._({id:"HB6DOG"})}),s&&o.jsx(y,{variant:"body2",color:"textDisabled",children:r._({id:"Nyj0Xj"})})]}),checked:e.shouldSkipFilteredChapters,onChange:(c,a)=>t("shouldSkipFilteredChapters",a),disabled:s}),yr(e.readingMode.value)&&o.jsx(C,{label:r._({id:"GSVtIx"}),checked:e.shouldOffsetDoubleSpreads.value,onChange:(c,a)=>t("shouldOffsetDoubleSpreads",a)}),o.jsx(C,{label:o.jsxs(Z,{children:[o.jsx(y,{children:r._({id:"rGFDEn"})}),o.jsx(y,{variant:"body2",color:"textDisabled",children:r._({id:"Rd3UzG"})})]}),checked:e.shouldUseInfiniteScroll,onChange:(c,a)=>t("shouldUseInfiniteScroll",a)}),o.jsx(C,{label:o.jsxs(Z,{children:[o.jsx(y,{children:r._({id:"RvZJsb"})}),o.jsx(y,{variant:"body2",color:"textDisabled",children:r._({id:"qqCjXP"})})]}),checked:e.shouldShowReadingModePreview,onChange:(c,a)=>t("shouldShowReadingModePreview",a)}),o.jsx(C,{label:o.jsxs(Z,{children:[o.jsx(y,{children:r._({id:"CfMzBU"})}),o.jsx(y,{variant:"body2",color:"textDisabled",children:r._({id:"0h+zMK"})})]}),checked:e.shouldShowTapZoneLayoutPreview,onChange:(c,a)=>t("shouldShowTapZoneLayoutPreview",a)}),o.jsx(C,{label:o.jsxs(Z,{children:[o.jsx(y,{children:r._({id:"blybnC"})}),o.jsx(y,{variant:"body2",color:"textDisabled",children:r._({id:"mUFLa0"})})]}),checked:e.shouldUseAutoWebtoonMode,onChange:(c,a)=>t("shouldUseAutoWebtoonMode",a)}),o.jsx(C,{label:r._({id:"rbXbhb"}),checked:e.shouldShowTransitionPage,onChange:(c,a)=>t("shouldShowTransitionPage",a)}),o.jsx(C,{label:r._({id:"XGqMul"}),checked:e.shouldInformAboutMissingChapter,onChange:(c,a)=>t("shouldInformAboutMissingChapter",a)}),o.jsx(C,{label:r._({id:"HIzS0G"}),checked:e.shouldInformAboutScanlatorChange,onChange:(c,a)=>t("shouldInformAboutScanlatorChange",a)}),o.jsx(Oi,{autoScroll:e.autoScroll,setAutoScroll:(...c)=>t("autoScroll",...c)}),o.jsx(V,{label:r._({id:"plKWgh"}),value:e.imagePreLoadAmount,onDefault:()=>n==null?void 0:n("imagePreLoadAmount"),slotProps:{slider:{defaultValue:P.imagePreLoadAmount,value:e.imagePreLoadAmount,step:Ke.step,min:Ke.min,max:Ke.max,onChange:(c,a)=>{t("imagePreLoadAmount",a,!1)},onChangeCommitted:(c,a)=>{t("imagePreLoadAmount",a,!0)}}}})]})},Li=Zn(y)(({theme:e})=>({display:"inline-block",padding:"0.2em 0.4em",fontSize:"0.85em",lineHeight:"1.4",color:e.palette.text.primary,backgroundColor:e.palette.background.paper,border:"1px solid ".concat(e.palette.divider),borderRadius:"3px",boxShadow:"inset 0 -1px 0 ".concat(e.palette.divider),fontFamily:"monospace, monospace"})),En=({keys:e,removeKey:t})=>{const{i18n:n,_:s}=v();return o.jsx(S,{sx:{flexDirection:"row",flexWrap:"wrap",gap:1},children:e.map((r,i)=>o.jsxs(E.Fragment,{children:[o.jsx(Be,{title:n._({id:"cnGeoo"}),hidden:!t,children:o.jsx(S,{sx:{flexDirection:"row",flexWrap:"wrap",gap:.5,cursor:t?"pointer":void 0},onClick:()=>t==null?void 0:t(r),children:r.split("+").map((c,a,d)=>o.jsxs(E.Fragment,{children:[o.jsx(Li,{children:c}),a===d.length-1?"":"+"]},c))})}),i===e.length-1?"":","]},r))})},Ni=({onClose:e,onCreate:t,existingKeys:n})=>{const{i18n:s,_:r}=v(),[i,{start:c,stop:a,resetKeys:d}]=Jn(),l=[[...i].join("+")],u=l.some(_=>n.map(h=>h.toLowerCase()).includes(_.toLowerCase()));return E.useEffect(()=>(c(),()=>{a()}),[]),o.jsxs(qn,{open:!0,onClose:e,fullWidth:!0,children:[o.jsx(Qn,{children:s._({id:"Y5/RTg"})}),o.jsxs(er,{children:[o.jsx(S,{sx:{flexDirection:"row",gap:1},children:o.jsx(tr,{id:"+3CabJ",values:{0:i.size?o.jsx(En,{keys:l}):o.jsx(y,{children:s._({id:"Iae/Ei"})})}})}),u&&o.jsx(y,{color:"error",children:s._({id:"IX31GV"})})]}),o.jsx(nr,{children:o.jsxs(S,{direction:"row",sx:{justifyContent:"space-between",width:"100%"},children:[o.jsx(ee,{onClick:d,children:s._({id:"OfhWJH"})}),o.jsxs(S,{direction:"row",children:[o.jsx(ee,{onClick:e,children:s._({id:"dEgA5A"})}),o.jsx(ee,{disabled:u,onClick:()=>{e(),t(l)},children:s._({id:"hYgDIe"})})]})]})})]})},Ui={[D.PREVIOUS_PAGE]:{id:"aHKcKc"},[D.NEXT_PAGE]:{id:"/dqduX"},[D.SCROLL_BACKWARD]:{id:"hTwRFX"},[D.SCROLL_FORWARD]:{id:"gD+bj5"},[D.PREVIOUS_CHAPTER]:{id:"S9gT2s"},[D.NEXT_CHAPTER]:{id:"05zAhA"},[D.TOGGLE_MENU]:{id:"4gAX8s"},[D.CYCLE_SCALE_TYPE]:{id:"ep1O8c"},[D.STRETCH_IMAGE]:{id:"mAlazW"},[D.OFFSET_SPREAD_PAGES]:{id:"eTlni7"},[D.CYCLE_READING_MODE]:{id:"j75WfO"},[D.CYCLE_READING_DIRECTION]:{id:"aSq7q3"},[D.TOGGLE_AUTO_SCROLL]:{id:"A+Rlxa"},[D.AUTO_SCROLL_SPEED_INCREASE]:{id:"y9O1X7"},[D.AUTO_SCROLL_SPEED_DECREASE]:{id:"BmzMzm"},[D.EXIT_READER]:{id:"2mxCGH"}},$i=({hotkey:e,keys:t,existingKeys:n,updateSetting:s})=>{const{i18n:r,_:i}=v(),c=rr({popupId:"reader-setting-record-hotkey",variant:"dialog"});return o.jsxs(o.Fragment,{children:[o.jsxs(S,{sx:{flexDirection:"row",alignItems:"center",gap:1},children:[o.jsx(y,{sx:{flexGrow:1},children:r._(Ui[e])}),o.jsx(En,{keys:t,removeKey:a=>s(t.filter(d=>d!==a))}),o.jsx(Be,{title:r._({id:"m16xKo"}),children:o.jsx(Qt,{...sr(c),color:"inherit",children:o.jsx(hr,{})})}),o.jsx(be,{asIconButton:!0,onClick:()=>s(P.hotkeys[e])})]}),c.isOpen&&o.jsx(Ni,{onClose:c.close,onCreate:a=>s([...t,...a]),existingKeys:n})]})},Bi=({settings:e,updateSetting:t,onDefault:n})=>{const{i18n:s,_:r}=v();return o.jsxs(S,{sx:{gap:2},children:[o.jsx(S,{sx:{alignItems:"end"},children:o.jsx(y,{variant:"caption",children:s._({id:"jSx2E1"})})}),ir.map(i=>o.jsx($i,{hotkey:i,keys:e.hotkeys[i],existingKeys:Object.values(e.hotkeys).flat(),updateSetting:c=>t("hotkeys",{...e.hotkeys,[i]:c})},i)),o.jsx(S,{sx:{alignItems:"end"},children:o.jsx(be,{onClick:()=>n==null?void 0:n("hotkeys"),variant:"outlined"})})]})},Gi=(e,t,n)=>E.memo(({ref:s,...r})=>{const i=t.reduce((d,l)=>({...d,...l(r)}),{}),c=Object.fromEntries(Object.entries(i).filter(([d])=>n.includes(d))),a={...r,...c};return o.jsx(e,{...a,ref:s})}),ki=({activeTab:e,setActiveTab:t,areDefaultSettings:n,settings:s,updateSetting:r,deleteSetting:i,mode:c,setTransparent:a})=>{const{i18n:d,_:l}=v(),u=$e.useIsTouchDevice(),_=ds(h=>h.tapZone.setShowPreview);return o.jsxs(o.Fragment,{children:[o.jsx(or,{value:e,onChange:(h,f)=>t(f),sx:{...A(!!n,{zIndex:2}),...A(!n,{backgroundColor:"background.paper",backgroundImage:"var(--Paper-overlay)"})},children:Object.values(Et).map(({id:h,label:f,supportsTouchDevices:g})=>!g&&u?null:o.jsx(dr,{value:h,label:d._(f),sx:{flexGrow:1,maxWidth:"unset",textTransform:"none"}},h))}),o.jsx(Z,{sx:{p:n?void 0:2,overflowX:"hidden"},children:Object.values(Et).map(({id:h,supportsTouchDevices:f})=>{if(!f&&u)return null;switch(h){case ce.LAYOUT:return n?o.jsx(re,{index:h,currentIndex:e,children:o.jsx(pn,{readingMode:s.readingMode,updateSetting:(...g)=>r(...g)})},h):o.jsx(re,{index:h,currentIndex:e,children:o.jsx(vn,{settings:s,updateSetting:(...g)=>r(...g),setShowPreview:_,isDefaultable:!n,onDefault:(...g)=>i==null?void 0:i(...g),isSeriesMode:!0,setTransparent:a})},h);case ce.GENERAL:return o.jsx(re,{index:h,currentIndex:e,sx:{p:n?2:void 0},children:o.jsx(mi,{overlayMode:c,settings:s,updateSetting:(...g)=>r(...g),isDefaultable:!n,onDefault:(...g)=>i==null?void 0:i(...g)})},h);case ce.FILTER:return o.jsx(re,{index:h,currentIndex:e,sx:{p:n?2:void 0},children:o.jsx(yi,{settings:s,updateSetting:(...g)=>r(...g),isDefaultable:!0,onDefault:(...g)=>i==null?void 0:i(...g),setTransparent:a})},h);case ce.BEHAVIOUR:return o.jsx(re,{index:h,currentIndex:e,sx:{p:n?2:void 0},children:o.jsx(Mi,{settings:s,updateSetting:(...g)=>r(...g),isDefaultable:!n,onDefault:(...g)=>i==null?void 0:i(...g)})},h);case ce.HOTKEYS:return o.jsx(re,{index:h,currentIndex:e,sx:{p:n?2:void 0},children:o.jsx(Bi,{settings:s,updateSetting:(...g)=>r(...g),isDefaultable:!0,onDefault:(...g)=>i==null?void 0:i(...g)})},h);default:throw new Error('Unexpected "ReaderSettingTab" ('.concat(h,")"))}})})]})},Mo=Gi(ki,[ct.useOverlayMode],["mode"]);export{oo as $,yr as A,go as B,q as C,po as D,_o as E,Zs as F,mn as G,Us as H,Oi as I,ds as J,Po as K,yo as L,Eo as M,bo as N,je as O,Ps as P,uo as Q,Mo as R,ws as S,Vt as T,Ao as U,co as V,Io as W,Oo as X,on as Y,wo as Z,io as _,ct as a,Do as a0,jo as a1,fo as a2,eo as a3,ao as a4,nn as a5,Ht as a6,to as a7,qe as b,as as c,mo as d,vo as e,so as f,sn as g,ho as h,J as i,ls as j,cs as k,xo as l,no as m,et as n,ys as o,So as p,Oe as q,Ro as r,To as s,Os as t,fr as u,Co as v,Gi as w,he as x,ro as y,lo as z};
