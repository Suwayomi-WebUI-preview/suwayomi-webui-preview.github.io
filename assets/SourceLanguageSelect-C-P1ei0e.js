import{u as T,f as r,t as l,S as M,n as b,j as e,C as A,I as F,o as O,p as P,q as U,s as k,r as q,v as L,ak as w,w as D,B as y,al as V,m as W,g as H}from"./index-BQW0TzWK.js";import{F as K}from"./FilterList-B7TwfGsR.js";import{Y as X}from"./index-BV07AeYI.js";import{t as Y}from"./Extensions.utils-CcN73FjC.js";import{L as $}from"./ListCardAvatar-US-QVOiW.js";import{V as z}from"./Virtuoso.util-BDze1weF.js";import{L as G}from"./ListItemAvatar-CQ0oSoU1.js";import{C as N}from"./Checkbox-uX-PoMED.js";import{S as Q}from"./Switch-DfN3lorC.js";const ie=({selectedLanguages:x,setSelectedLanguages:E,languages:S,sources:d})=>{const{i18n:i,_:R}=T(),[u,m]=r.useState({}),[n,g]=r.useState(l(x)),[I,p]=r.useState(!1),c=r.useMemo(()=>M.groupByLanguage(d),[d]),s=r.useMemo(()=>l([...n.toSorted(b),...S.toSorted(b)]),[S,n]),C=r.useMemo(()=>Object.values(s.map(t=>c[t])).flat(),[s,c]),j=r.useMemo(()=>s.map(t=>{var o;return n.includes(t)&&(o=c[t].length)!=null?o:0}),[c,s]),v=z.useCreateGroupedComputeItemKey(j,r.useCallback(t=>s[t],[s]),r.useCallback(t=>C[t].id,[c,s])),f=()=>{p(!1),m({}),g(l(x))},_=()=>{p(!1),Promise.all(Object.entries(u).map(([t,a])=>V(d.find(o=>o.id===t),"isEnabled",a))).catch(t=>W(i._({id:"cBoXe4"}),"error",H(t))),m({}),E(l(n))},B=(t,a)=>{g(a?[...n,t]:n.toSpliced(n.indexOf(t),1))};return e.jsxs(e.Fragment,{children:[e.jsx(A,{title:i._({id:"Tz0i8g"}),children:e.jsx(F,{onClick:()=>p(!0),"aria-label":"display more actions",edge:"end",color:"inherit",children:e.jsx(K,{})})}),e.jsxs(O,{fullWidth:!0,maxWidth:"xs",open:I,onClose:f,children:[e.jsx(P,{children:i._({id:"tEL3Xq"})}),e.jsx(U,{dividers:!0,sx:{padding:0},children:e.jsx(X,{style:{height:s.length*54,minHeight:"25vh",maxHeight:"50vh"},groupCounts:j,increaseViewportBy:400,computeItemKey:v,groupContent:t=>{const a=s[t],o=n.includes(a);return e.jsxs(k,{sx:{backgroundColor:"background.paper",backgroundImage:"var(--Paper-overlay)"},children:[e.jsx(L,{primary:Y(a)}),e.jsx(Q,{checked:o,onChange:h=>B(a,h.target.checked)})]})},itemContent:t=>{var o;const a=C[t];return e.jsxs(k,{sx:{pl:3},children:[e.jsx(G,{sx:{minWidth:32,mr:1},children:e.jsx($,{iconUrl:q.getValidImgUrlFor(a.iconUrl),alt:a.name,slots:{avatarProps:{sx:{width:32,height:32}},spinnerImageProps:{ignoreQueue:!0}}})}),e.jsx(L,{primary:a.name}),e.jsx(N,{checked:(o=u[a.id])!=null?o:w(a).isEnabled,onChange:h=>m({...u,[a.id]:h.target.checked})})]})}})}),e.jsxs(D,{children:[e.jsx(y,{autoFocus:!0,onClick:f,color:"primary",children:i._({id:"dEgA5A"})}),e.jsx(y,{onClick:_,color:"primary",children:i._({id:"aP3N/0"})})]})]})]})};export{ie as S};
