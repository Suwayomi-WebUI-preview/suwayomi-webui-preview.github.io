!function(){var e=["className","children","columns","container","component","direction","wrap","size","offset","spacing","rowSpacing","columnSpacing","unstable_level"],n=["MenuItemProps","className","label","LeftIcon","renderLabel","RightIcon"],t=["ref"],r=["parentMenuOpen","label","renderLabel","RightIcon","LeftIcon","children","className","tabIndex","ContainerProps","MenuProps"],o=["ref"],i=["ref","persistKey"],a=["children","ref"],c=["children"];function l(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */var e,n,t="function"==typeof Symbol?Symbol:{},r=t.iterator||"@@iterator",o=t.toStringTag||"@@toStringTag";function i(t,r,o,i){var l=r&&r.prototype instanceof c?r:c,u=Object.create(l.prototype);return s(u,"_invoke",function(t,r,o){var i,c,l,s=0,u=o||[],d=!1,f={p:0,n:0,v:e,a:p,f:p.bind(e,4),d:function(n,t){return i=n,c=0,l=e,f.n=t,a}};function p(t,r){for(c=t,l=r,n=0;!d&&s&&!o&&n<u.length;n++){var o,i=u[n],p=f.p,g=i[2];t>3?(o=g===r)&&(l=i[(c=i[4])?5:(c=3,3)],i[4]=i[5]=e):i[0]<=p&&((o=t<2&&p<i[1])?(c=0,f.v=r,f.n=i[1]):p<g&&(o=t<3||i[0]>r||r>g)&&(i[4]=t,i[5]=r,f.n=g,c=0))}if(o||t>1)return a;throw d=!0,r}return function(o,u,g){if(s>1)throw TypeError("Generator is already running");for(d&&1===u&&p(u,g),c=u,l=g;(n=c<2?e:l)||!d;){i||(c?c<3?(c>1&&(f.n=-1),p(c,l)):f.n=l:f.v=l);try{if(s=2,i){if(c||(o="next"),n=i[o]){if(!(n=n.call(i,l)))throw TypeError("iterator result is not an object");if(!n.done)return n;l=n.value,c<2&&(c=0)}else 1===c&&(n=i.return)&&n.call(i),c<2&&(l=TypeError("The iterator does not provide a '"+o+"' method"),c=1);i=e}else if((n=(d=f.n<0)?l:t.call(r,f))!==a)break}catch(n){i=e,c=1,l=n}finally{s=1}}return{value:n,done:d}}}(t,o,i),!0),u}var a={};function c(){}function u(){}function d(){}n=Object.getPrototypeOf;var f=[][r]?n(n([][r]())):(s(n={},r,function(){return this}),n),p=d.prototype=c.prototype=Object.create(f);function g(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,d):(e.__proto__=d,s(e,o,"GeneratorFunction")),e.prototype=Object.create(p),e}return u.prototype=d,s(p,"constructor",d),s(d,"constructor",u),u.displayName="GeneratorFunction",s(d,o,"GeneratorFunction"),s(p),s(p,o,"Generator"),s(p,r,function(){return this}),s(p,"toString",function(){return"[object Generator]"}),(l=function(){return{w:i,m:g}})()}function s(e,n,t,r){var o=Object.defineProperty;try{o({},"",{})}catch(e){o=0}s=function(e,n,t,r){function i(n,t){s(e,n,function(e){return this._invoke(n,t,e)})}n?o?o(e,n,{value:t,enumerable:!r,configurable:!r,writable:!r}):e[n]=t:(i("next",0),i("throw",1),i("return",2))},s(e,n,t,r)}function u(e,n,t,r,o,i,a){try{var c=e[i](a),l=c.value}catch(e){return void t(e)}c.done?n(l):Promise.resolve(l).then(r,o)}function d(e,n){if(null==e)return{};var t,r,o=function(e,n){if(null==e)return{};var t={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==n.indexOf(r))continue;t[r]=e[r]}return t}(e,n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)t=i[r],-1===n.indexOf(t)&&{}.propertyIsEnumerable.call(e,t)&&(o[t]=e[t])}return o}function f(e){return function(e){if(Array.isArray(e))return h(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||g(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function p(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){var t=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var r,o,i,a,c=[],l=!0,s=!1;try{if(i=(t=t.call(e)).next,0===n){if(Object(t)!==t)return;l=!1}else for(;!(l=(r=i.call(t)).done)&&(c.push(r.value),c.length!==n);l=!0);}catch(e){s=!0,o=e}finally{try{if(!l&&null!=t.return&&(a=t.return(),Object(a)!==a))return}finally{if(s)throw o}}return c}}(e,n)||g(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function g(e,n){if(e){if("string"==typeof e)return h(e,n);var t={}.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?h(e,n):void 0}}function h(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=Array(n);t<n;t++)r[t]=e[t];return r}function m(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),t.push.apply(t,r)}return t}function v(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?m(Object(t),!0).forEach(function(n){b(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):m(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}function b(e,n,t){return(n=function(e){var n=function(e,n){if("object"!=y(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,n||"default");if("object"!=y(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===n?String:Number)(e)}(e,"string");return"symbol"==y(n)?n:n+""}(n))in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function y(e){return y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},y(e)}System.register(["./index-legacy-Cl2tsk4a.js","./EmptyViewAbsoluteCentered-legacy-CGJEBVsZ.js","./useManageMangaLibraryState-legacy-36UyQ-7V.js","./Delete-legacy-C-MFBWQ9.js","./Download-legacy-yNGYQlYb.js","./ContinueReadingTooltip-legacy-DZmRtIg3.js","./Sync-legacy-DYyZdU0f.js","./Mangas-legacy-DtMAsmkM.js","./use-merged-ref-legacy-DgTC3LlA.js","./CheckboxInput-legacy-D7RtuUmk.js","./FormGroup-legacy-BAm9QaIC.js","./SpinnerImage-legacy-OjxWtfP7.js","./MUI.util-legacy-D9xMlHDR.js","./Checkbox-legacy-DaMiKWJs.js","./Link-legacy-lSYcmUI_.js","./Card-legacy-BadKrW7n.js","./CardActionArea-legacy-CbAaYkHP.js","./ListCardAvatar-legacy-g655TUxJ.js","./ListCardContent-legacy-DMy1IcQc.js","./PlayArrow-legacy-DS0JNz3V.js","./Chapters-legacy-CxShZIZ8.js","./StyledFab-legacy-DLIETwNI.js","./index-legacy-5SV40KD4.js","./Virtuoso.util-legacy-V22C5mT7.js"],function(s,h){"use strict";var m,x,j,w,C,S,k,I,M,L,O,P,R,_,T,E,A,G,D,F,N,W,B,z,U,V,K,H,Y,Q,X,Z,q,J,$,ee,ne,te,re,oe,ie,ae,ce,le,se,ue,de,fe,pe,ge,he,me,ve,be,ye,xe,je,we,Ce,Se,ke,Ie,Me,Le,Oe,Pe,Re,_e,Te,Ee,Ae,Ge,De,Fe,Ne,We,Be,ze,Ue,Ve,Ke,He,Ye,Qe,Xe,Ze,qe,Je,$e,en,nn;return{setters:[function(e){m=e.bn,x=e.bo,j=e.f,w=e.bp,C=e.j,S=e.Z,k=e.bq,I=e.br,M=e.a0,L=e.X,O=e.bs,P=e._,R=e.Y,_=e.a8,T=e.ar,E=e.bt,A=e.v,G=e.bu,D=e.bv,F=e.bw,N=e.U,W=e.H,B=e.bx,z=e.u,U=e.L,V=e.A,K=e.by,H=e.o,Y=e.k,Q=e.h,X=e.aG,Z=e.e,q=e.p,J=e.q,$=e.F,ee=e.w,ne=e.b,te=e.B,re=e.m,oe=e.aC,ie=e.C,ae=e.I,ce=e.aq,le=e.aV,se=e.T,ue=e.aB,de=e.bf,fe=e.J,pe=e.Q,ge=e.i},function(e){he=e.E},function(e){me=e.c,ve=e.b,be=e.d,ye=e.e,xe=e.h,je=e.D,we=e.R,Ce=e.i,Se=e.F,ke=e.M,Ie=e.u,Me=e.V,Le=e.a},function(e){Oe=e.D},function(e){Pe=e.D},function(e){Re=e.C,_e=e.a,Te=e.L,Ee=e.T,Ae=e.b},function(e){Ge=e.S},function(e){De=e.a,Fe=e.b,Ne=e.M},function(e){We=e.u},function(e){Be=e.C},function(e){ze=e.F},function(e){Ue=e.S},function(e){Ve=e.M},function(e){Ke=e.C},function(e){He=e.L},function(e){Ye=e.C},function(e){Qe=e.C},function(e){Xe=e.L},function(e){Ze=e.L},function(e){qe=e.P},function(e){Je=e.a},function(e){$e=e.D},function(e){en=e.J},function(e){nn=e.V}],execute:function(){var h=function(e,n,t){var r,o,i=e.keys[0];if(Array.isArray(n))n.forEach(function(n,r){t(function(n,t){r<=e.keys.length-1&&(0===r?Object.assign(n,t):n[e.up(e.keys[r])]=t)},n)});else if(n&&"object"===y(n)){(Object.keys(n).length>e.keys.length?e.keys:(r=e.keys,o=Object.keys(n),r.filter(function(e){return o.includes(e)}))).forEach(function(r){if(e.keys.includes(r)){var o=n[r];void 0!==o&&t(function(n,t){i===r?Object.assign(n,t):n[e.up(r)]=t},o)}})}else"number"!=typeof n&&"string"!=typeof n||t(function(e,n){Object.assign(e,n)},n)};function tn(e){return"--Grid-".concat(e,"Spacing")}function rn(e){return"--Grid-parent-".concat(e,"Spacing")}var on="--Grid-columns",an="--Grid-parent-columns",cn=function(e){var n=e.theme,t=e.ownerState,r={};return h(n.breakpoints,t.size,function(e,n){var t={};"grow"===n&&(t={flexBasis:0,flexGrow:1,maxWidth:"100%"}),"auto"===n&&(t={flexBasis:"auto",flexGrow:0,flexShrink:0,maxWidth:"none",width:"auto"}),"number"==typeof n&&(t={flexGrow:0,flexBasis:"auto",width:"calc(100% * ".concat(n," / var(").concat(an,") - (var(").concat(an,") - ").concat(n,") * (var(").concat(rn("column"),") / var(").concat(an,")))")}),e(r,t)}),r},ln=function(e){var n=e.theme,t=e.ownerState,r={};return h(n.breakpoints,t.offset,function(e,n){var t={};"auto"===n&&(t={marginLeft:"auto"}),"number"==typeof n&&(t={marginLeft:0===n?"0px":"calc(100% * ".concat(n," / var(").concat(an,") + var(").concat(rn("column"),") * ").concat(n," / var(").concat(an,"))")}),e(r,t)}),r},sn=function(e){var n=e.theme,t=e.ownerState;if(!t.container)return{};var r=b({},on,12);return h(n.breakpoints,t.columns,function(e,n){var t=null!=n?n:12;e(r,b(b({},on,t),"> *",b({},an,t)))}),r},un=function(e){var n=e.theme,t=e.ownerState;if(!t.container)return{};var r={};return h(n.breakpoints,t.rowSpacing,function(e,t){var o,i="string"==typeof t?t:null===(o=n.spacing)||void 0===o?void 0:o.call(n,t);e(r,b(b({},tn("row"),i),"> *",b({},rn("row"),i)))}),r},dn=function(e){var n=e.theme,t=e.ownerState;if(!t.container)return{};var r={};return h(n.breakpoints,t.columnSpacing,function(e,t){var o,i="string"==typeof t?t:null===(o=n.spacing)||void 0===o?void 0:o.call(n,t);e(r,b(b({},tn("column"),i),"> *",b({},rn("column"),i)))}),r},fn=function(e){var n=e.theme,t=e.ownerState;if(!t.container)return{};var r={};return h(n.breakpoints,t.direction,function(e,n){e(r,{flexDirection:n})}),r},pn=function(e){var n=e.ownerState;return v({minWidth:0,boxSizing:"border-box"},n.container&&v(v({display:"flex",flexWrap:"wrap"},n.wrap&&"wrap"!==n.wrap&&{flexWrap:n.wrap}),{},{gap:"var(".concat(tn("row"),") var(").concat(tn("column"),")")}))},gn=function(e){var n=[];return Object.entries(e).forEach(function(e){var t=p(e,2),r=t[0],o=t[1];!1!==o&&void 0!==o&&n.push("grid-".concat(r,"-").concat(String(o)))}),n},hn=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"xs";function t(e){return void 0!==e&&("string"==typeof e&&!Number.isNaN(Number(e))||"number"==typeof e&&e>0)}if(t(e))return["spacing-".concat(n,"-").concat(String(e))];if("object"===y(e)&&!Array.isArray(e)){var r=[];return Object.entries(e).forEach(function(e){var n=p(e,2),o=n[0],i=n[1];t(i)&&r.push("spacing-".concat(o,"-").concat(String(i)))}),r}return[]},mn=function(e){return void 0===e?[]:"object"===y(e)?Object.entries(e).map(function(e){var n=p(e,2),t=n[0],r=n[1];return"direction-".concat(t,"-").concat(r)}):["direction-xs-".concat(String(e))]};var vn=O(),bn=m("div",{name:"MuiGrid",slot:"Root"});function yn(e){return I({props:e,name:"MuiGrid",defaultTheme:vn})}var xn=function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=n.createStyledComponent,r=void 0===t?bn:t,o=n.useThemeProps,i=void 0===o?yn:o,a=n.useTheme,c=void 0===a?x:a,l=n.componentName,s=void 0===l?"MuiGrid":l;function u(e,n){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){return!0},r={};return null===e||(Array.isArray(e)?e.forEach(function(e,o){null!==e&&t(e)&&n.keys[o]&&(r[n.keys[o]]=e)}):"object"===y(e)?Object.keys(e).forEach(function(n){var o=e[n];null!=o&&t(o)&&(r[n]=o)}):r[n.keys[0]]=e),r}var p=r(sn,dn,un,cn,fn,pn,ln),g=j.forwardRef(function(n,t){var r,o,a,l,g,h,m=c(),b=i(n),y=w(b);!function(e,n){void 0!==e.item&&delete e.item,void 0!==e.zeroMinWidth&&delete e.zeroMinWidth,n.keys.forEach(function(n){void 0!==e[n]&&delete e[n]})}(y,m.breakpoints);var x=y.className,I=y.children,O=y.columns,P=void 0===O?12:O,R=y.container,_=void 0!==R&&R,T=y.component,E=void 0===T?"div":T,A=y.direction,G=void 0===A?"row":A,D=y.wrap,F=void 0===D?"wrap":D,N=y.size,W=void 0===N?{}:N,B=y.offset,z=void 0===B?{}:B,U=y.spacing,V=void 0===U?0:U,K=y.rowSpacing,H=void 0===K?V:K,Y=y.columnSpacing,Q=void 0===Y?V:Y,X=y.unstable_level,Z=void 0===X?0:X,q=d(y,e),J=u(W,m.breakpoints,function(e){return!1!==e}),$=u(z,m.breakpoints),ee=null!==(r=n.columns)&&void 0!==r?r:Z?void 0:P,ne=null!==(o=n.spacing)&&void 0!==o?o:Z?void 0:V,te=null!==(a=null!==(l=n.rowSpacing)&&void 0!==l?l:n.spacing)&&void 0!==a?a:Z?void 0:H,re=null!==(g=null!==(h=n.columnSpacing)&&void 0!==h?h:n.spacing)&&void 0!==g?g:Z?void 0:Q,oe=v(v({},y),{},{level:Z,columns:ee,container:_,direction:G,wrap:F,spacing:ne,rowSpacing:te,columnSpacing:re,size:J,offset:$}),ie=function(e,n){var t=e.container,r=e.direction,o=e.spacing,i=e.wrap,a=e.size,c={root:["root",t&&"container","wrap"!==i&&"wrap-xs-".concat(String(i))].concat(f(mn(r)),f(gn(a)),f(t?hn(o,n.breakpoints.keys[0]):[]))};return M(c,function(e){return L(s,e)},{})}(oe,m);return C.jsx(p,v(v({ref:t,as:E,ownerState:oe,className:S(ie.root,x)},q),{},{children:j.Children.map(I,function(e){var n,t;return j.isValidElement(e)&&k(e,["Grid"])&&_&&e.props.container?j.cloneElement(e,{unstable_level:null!==(n=null===(t=e.props)||void 0===t?void 0:t.unstable_level)&&void 0!==n?n:Z+1}):e})}))});return g.muiName="Grid",g}({createStyledComponent:P("div",{name:"MuiGrid",slot:"Root",overridesResolver:function(e,n){var t=e.ownerState;return[n.root,t.container&&n.container]}}),componentName:"MuiGrid",useThemeProps:function(e){return R({props:e,name:"MuiGrid"})},useTheme:_}),jn=function(e){var t=e.MenuItemProps,r=e.className,o=e.label,i=e.LeftIcon,a=(e.renderLabel,e.RightIcon),c=d(e,n);return C.jsxs(T,v(v(v({},t),{},{className:r},c),{},{children:[i&&C.jsx(E,{children:C.jsx(i,{fontSize:"small"})}),C.jsx(A,{children:o}),a&&C.jsx(E,{style:{minWidth:0},children:C.jsx(a,{fontSize:"small"})})]}))},wn=function(e){var n,i=e.ref,a=d(e,t),c=a.parentMenuOpen,l=a.label,s=a.renderLabel,u=a.RightIcon,f=void 0===u?G(F,D):u,h=a.LeftIcon,m=a.children,b=a.className,y=a.tabIndex,x=a.ContainerProps,w=void 0===x?{}:x,S=a.MenuProps,k=d(a,r),I=N.useIsTouchDevice(),M=w.ref,L=d(w,o),O=j.useRef(null),P=We(i,O),R=j.useRef(null),_=We(M,R),T=j.useRef(null),E=p(j.useState(!1),2),A=E[0],z=E[1],U=function(e){A!==e&&(a.disabled?z(!1):z(e))},V=function(){var e,n,t=null!==(e=null===(n=R.current)||void 0===n?void 0:n.ownerDocument.activeElement)&&void 0!==e?e:null;if(null==T.current)return!1;var r,o=function(e,n){var t="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!t){if(Array.isArray(e)||(t=g(e))||n&&e&&"number"==typeof e.length){t&&(e=t);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,c=!1;return{s:function(){t=t.call(e)},n:function(){var e=t.next();return a=e.done,e},e:function(e){c=!0,i=e},f:function(){try{a||null==t.return||t.return()}finally{if(c)throw i}}}}(T.current.children);try{for(o.s();!(r=o.n()).done;){if(r.value===t)return!0}}catch(i){o.e(i)}finally{o.f()}return!1},K=A&&c;return a.disabled||(n=void 0!==y?y:-1),C.jsxs(W,v(v({},L),{},{ref:_,onFocus:function(e){I||(e.target===R.current&&U(!0),L.onFocus&&L.onFocus(e))},onClick:function(e){U(!A),L.onClick&&L.onClick(e)},tabIndex:n,onMouseEnter:function(e){I||(U(!0),L.onMouseEnter&&L.onMouseEnter(e))},onMouseLeave:function(e){U(!1),L.onMouseLeave&&L.onMouseLeave(e)},onKeyDown:function(e){var n;if("Escape"!==e.key){V()&&e.stopPropagation();var t,r=null===(n=R.current)||void 0===n?void 0:n.ownerDocument.activeElement;if("ArrowLeft"===e.key&&V())null===(t=R.current)||void 0===t||t.focus();if("ArrowRight"===e.key&&e.target===R.current&&e.target===r){var o,i=null===(o=T.current)||void 0===o?void 0:o.children[0];null==i||i.focus()}}},children:[C.jsx(jn,{MenuItemProps:k,className:b,ref:P,LeftIcon:h,RightIcon:f,label:l,renderLabel:s}),C.jsx(B,v(v({style:{pointerEvents:"none"},anchorEl:O.current,anchorOrigin:{horizontal:G("right","left"),vertical:"top"},transformOrigin:{horizontal:G("left","right"),vertical:"top"},open:K,autoFocus:!1,disableAutoFocus:!0,disableEnforceFocus:!0,onClose:function(){U(!1)}},S),{},{children:C.jsx(W,{ref:T,style:{pointerEvents:"auto"},children:m})}))]}))},Cn=s("b",function(e){var n,t,r=e.manga,o=e.handleSelection,i=e.selectedMangas,a=e.onClose,c=e.setHideMenu,l=z(),s=l.i18n,u=(l._,p(j.useState(!1),2)),d=u[0],g=u[1],h=!!r,m=null!=i?i:[],v=ye(h,Fe),b=me(h),y=xe(h),x=!!r&&r.downloadCount===r.chapters.totalCount,w=!(null==r||!r.downloadCount),S=!(null==r||!r.unreadCount),k=!!r&&r.unreadCount!==r.chapters.totalCount,I=function(e,n){De.performAction(e,r?[r.id]:De.getIds(n),{wasManuallyMarkedAsRead:!0}).catch(Y("MangaActionMenuItems:performAction(".concat(e,")"))),a()},M=j.useMemo(function(){return{downloadableMangas:[].concat(f(De.getNotDownloaded(m)),f(De.getPartiallyDownloaded(m))),downloadedMangas:[].concat(f(De.getPartiallyDownloaded(m)),f(De.getFullyDownloaded(m))),unreadMangas:[].concat(f(De.getUnread(m)),f(De.getPartiallyRead(m))),readMangas:[].concat(f(De.getPartiallyRead(m)),f(De.getFullyRead(m)))}},[m]),L=M.downloadableMangas,O=M.downloadedMangas,P=M.unreadMangas,R=M.readMangas;return C.jsxs(C.Fragment,{children:[!!o&&h&&C.jsx(ve,{onClick:function(){null==o||o(r.id,!0),a()},Icon:be,title:s._({id:"rG3WVm"})}),b(!x)&&C.jsx(wn,{disabled:y(!L.length),LeftIcon:Pe,label:v("download",L.length),parentMenuOpen:!0,children:C.jsx(Re,{mangaIds:h?[r.id]:De.getIds(m),closeMenu:a})}),b(w)&&C.jsx(ve,{Icon:Oe,disabled:y(!O.length),onClick:function(){return I("delete",O)},title:v("delete",O.length)}),b(S)&&C.jsx(ve,{Icon:je,disabled:y(!P.length),onClick:function(){return I("mark_as_read",P)},title:v("mark_as_read",P.length)}),b(k)&&C.jsx(ve,{Icon:we,disabled:y(!R.length),onClick:function(){return I("mark_as_unread",R)},title:v("mark_as_unread",R.length)}),h&&C.jsx(U,{to:V.migrate.childRoutes.search.path(null!==(n=null==r?void 0:r.sourceId)&&void 0!==n?n:-1,null!==(t=null==r?void 0:r.id)&&void 0!==t?t:-1,null==r?void 0:r.title),state:{mangaTitle:null==r?void 0:r.title},style:{textDecoration:"none",color:"inherit"},children:C.jsx(ve,{Icon:_e,title:v("migrate",m.length)})}),h&&C.jsx(ve,{onClick:function(){g(!0),c(!0)},Icon:Ge,title:v("track",m.length)}),C.jsx(ve,{onClick:function(){K.show(Ce,{mangaId:null==r?void 0:r.id,mangaIds:i?De.getIds(m):void 0,addToLibrary:!1}),c(!0),a()},Icon:Te,title:v("change_categories",m.length)}),C.jsx(ve,{onClick:function(){return I("remove_from_library",m)},Icon:Se,title:v("remove_from_library",m.length)}),d&&C.jsx(H,{open:!0,maxWidth:"md",fullWidth:!0,scroll:"paper",onClose:function(){g(!1),a()},children:C.jsx(Ee,{manga:r})})]})}),Sn=function(e){var n=e.mangaIdToMigrateTo,t=e.onClose,r=z(),o=r.i18n,i=(r._,Q()),a=X().mangaId,c=Number(a),s=Z().settings,d=s.migrateChapters,f=s.migrateCategories,g=s.migrateTracking,h=s.deleteChapters,m=p(j.useState(!1),2),v=m[0],b=m[1],y=$(Y("MigrateDialog::updateSetting")),x=function(){var e,t=(e=l().m(function e(t){return l().w(function(e){for(;;)switch(e.p=e.n){case 0:if(null!=c){e.n=1;break}throw new Error('MigrateDialog::migrate: unexpected mangaId "'.concat(c,'"'));case 1:return re(o._({id:"pf0CQ9"}),"info"),b(!0),e.p=2,e.n=3,De.migrate(c,n,{mode:t,migrateChapters:d,migrateCategories:f,migrateTracking:g,deleteChapters:h});case 3:i(V.manga.path(n),{replace:!0}),e.n=5;break;case 4:e.p=4,e.v,b(!1);case 5:return e.a(2)}},e,null,[[2,4]])}),function(){var n=this,t=arguments;return new Promise(function(r,o){var i=e.apply(n,t);function a(e){u(i,r,o,a,c,"next",e)}function c(e){u(i,r,o,a,c,"throw",e)}a(void 0)})});return function(e){return t.apply(this,arguments)}}();return C.jsxs(H,{open:!0,fullWidth:!0,onClose:t,children:[C.jsx(q,{children:o._({id:"cVCLaF"})}),C.jsx(J,{dividers:!0,children:C.jsxs(ze,{children:[C.jsx(Be,{disabled:v,label:o._({id:"QIei5D"}),checked:d,onChange:function(e,n){return y("migrateChapters",n)}}),C.jsx(Be,{disabled:v,label:o._({id:"K7tIrx"}),checked:f,onChange:function(e,n){return y("migrateCategories",n)}}),C.jsx(Be,{disabled:v,label:o._({id:"U0HZma"}),checked:g,onChange:function(e,n){return y("migrateTracking",n)}}),C.jsx(Be,{disabled:v,label:o._({id:"D/WCwa"}),checked:h,onChange:function(e,n){return y("deleteChapters",n)}})]})}),C.jsx(ee,{children:C.jsxs(ne,{direction:"row",sx:{justifyContent:"space-between",width:"100%"},children:[C.jsx(te,{disabled:v,component:U,to:V.manga.path(n),children:o._({id:"BbYYZ3"})}),C.jsxs(ne,{direction:"row",children:[C.jsx(te,{disabled:v,onClick:t,children:o._({id:"dEgA5A"})}),C.jsx(te,{disabled:v,onClick:function(){return x("copy")},children:o._({id:"he3ygx"})}),C.jsx(te,{disabled:v,onClick:function(){return x("migrate")},children:o._({id:"y5rS9U"})})]})]})})]})},kn=function(e){var n=e.id,t=e.selected,r=e.handleSelection,o=e.asCheckbox,i=void 0!==o&&o,a=e.popupState,c=e.ref,l=z(),s=l.i18n,u=(l._,j.useMemo(function(){return oe(a)},[a])),d=function(e){e.stopPropagation(),e.preventDefault()};return r?null!==t?i?C.jsx(ie,{title:t?s._({id:"HlKgQk"}):s._({id:"rG3WVm"}),children:C.jsx(Ke,v(v({},Ve.preventRippleProp()),{},{checked:t,onChange:function(e,t){d(e),null==r||r(n,t)}}))}):null:i?C.jsx(ie,{title:s._({id:"0zpgxV"}),children:C.jsx(ae,v(v({ref:c},Ve.preventRippleProp(u,{onClick:d})),{},{"aria-label":"more",children:C.jsx(ke,{})}))}):C.jsx(ie,{title:s._({id:"0zpgxV"}),children:C.jsx(te,v(v({ref:c},Ve.preventRippleProp(u,{onClick:d})),{},{className:"manga-option-button",size:"small",variant:"contained",sx:{minWidth:"unset",paddingX:"0",paddingY:"2.5px",visibility:a.isOpen?"visible":"hidden",pointerEvents:"none","@media not (pointer: fine)":{visibility:"hidden",width:0,height:0,p:0,m:0}},children:C.jsx(ke,{})}))}):null},In=P("div")({position:"absolute",bottom:0,width:"100%",height:"30%",background:"linear-gradient(180deg, rgba(0,0,0,0) 0%, rgba(0,0,0,1) 100%)"}),Mn=P("div")({position:"absolute",bottom:0,width:"100%",height:"20%",background:"linear-gradient(180deg, rgba(0,0,0,0) 0%, rgba(0,0,0,1) 100%)"}),Ln=j.memo(function(e){var n=e.manga,t=e.longPressBind,r=e.popupState,o=e.handleClick,i=e.mangaLinkTo,a=e.selected,c=e.inLibraryIndicator,l=e.isInLibrary,s=e.gridLayout,u=e.handleSelection,d=e.continueReadingButton,f=e.mangaBadges,p=e.mode,g=N.usePreventMobileContextMenu(),h=j.useRef(null),m=n.id,b=n.title;return C.jsx(He,v(v({component:U},t(function(){return r.open(h.current)})),{},{onClick:o,to:i,state:De.createLocationState(n,p),onContextMenu:g,sx:v(v({},N.preventMobileContextMenuSx()),{},{textDecoration:"none"}),children:C.jsxs(W,{sx:{display:"flex",flexDirection:"column",m:.25,outline:a?"4px solid":void 0,borderRadius:a?"1px":void 0,outlineColor:function(e){return e.palette.primary.main},backgroundColor:function(e){return a?e.palette.primary.main:void 0},"@media (hover: hover) and (pointer: fine)":{"&:hover .manga-option-button":{visibility:"visible",pointerEvents:"all"},"&:hover .source-manga-library-state-button":{display:"inline-flex"},"&:hover .source-manga-library-state-indicator":{display:"source"===p?"none":"flex"}}},children:[C.jsx(Ye,{sx:{aspectRatio:Ne,display:"flex"},children:C.jsxs(Qe,{sx:{position:"relative",height:"100%"},children:[C.jsx(Ue,{alt:b,src:De.getThumbnailUrl(n),imgStyle:c&&l?{height:"100%",width:"100%",objectFit:"cover",filter:"brightness(0.4)"}:{height:"100%",width:"100%",objectFit:"cover"},spinnerStyle:{display:"grid",placeItems:"center"}}),C.jsxs(ne,{direction:"row",sx:{alignItems:"start",justifyContent:"space-between",position:"absolute",top:function(e){return e.spacing(1)},left:function(e){return e.spacing(1)},right:function(e){return e.spacing(1)}},children:[f,C.jsx(kn,{ref:h,popupState:r,id:m,selected:a,handleSelection:u})]}),C.jsxs(C.Fragment,{children:[s!==ce.Comfortable&&C.jsxs(C.Fragment,{children:[C.jsx(In,{}),C.jsx(Mn,{})]}),C.jsxs(ne,{direction:"row",sx:{justifyContent:s!==ce.Comfortable?"space-between":"end",alignItems:"end",position:"absolute",bottom:0,width:"100%",p:1,gap:1},children:[s!==ce.Comfortable&&C.jsx(ie,{title:b,placement:"top",children:C.jsx(le,{component:"h3",sx:{color:"white",textShadow:"0px 0px 3px #000000"},children:b})}),d]})]})]})}),s===ce.Comfortable&&C.jsx(ne,{sx:{pb:1},children:C.jsx(ie,{title:b,placement:"top",children:C.jsx(le,{component:"h3",sx:{color:function(e){return a?e.palette.primary.contrastText:"text.primary"},height:"3rem",pt:.5},children:b})})})]})}))}),On=j.memo(function(e){var n=e.manga,t=e.longPressBind,r=e.popupState,o=e.handleClick,i=e.mangaLinkTo,a=e.selected,c=e.inLibraryIndicator,l=e.isInLibrary,s=e.handleSelection,u=e.continueReadingButton,d=e.mangaBadges,f=e.mode,p=N.usePreventMobileContextMenu(),g=j.useRef(null),h=n.id,m=n.title;return C.jsx(Ye,{children:C.jsx(Qe,v(v({component:U,to:i,state:De.createLocationState(n,f),onClick:o},t(function(){return r.open(g.current)})),{},{onContextMenu:p,sx:v(v({},N.preventMobileContextMenuSx()),{},{"@media (hover: hover) and (pointer: fine)":{"&:hover .manga-option-button":{visibility:"visible",pointerEvents:"all"},"&:hover .source-manga-library-state-button":{display:"inline-flex"},"&:hover .source-manga-library-state-indicator":{display:"source"===f?"none":"inline-flex"}}}),children:C.jsxs(Ze,{sx:{justifyContent:"space-between",position:"relative"},children:[C.jsx(Xe,{iconUrl:De.getThumbnailUrl(n),alt:n.title,slots:{spinnerImageProps:{imgStyle:{imageRendering:"pixelated",filter:c&&l?"brightness(0.4)":void 0}}}}),C.jsx(W,{sx:{display:"flex",flexDirection:"row",flexGrow:1,width:"min-content"},children:C.jsx(ie,{title:m,placement:"top",children:C.jsx(le,{variant:"h6",component:"h3",children:m})})}),C.jsxs(ne,{direction:"row",sx:{alignItems:"center",gap:.5},children:[d,u,C.jsx(kn,{ref:g,popupState:r,id:h,selected:a,handleSelection:s,asCheckbox:!0})]})]})}))})}),Pn=function(e){var n=e.showContinueReadingButton,t=e.chapter,r=e.mangaLinkTo;if(!n||!t)return null;var o=t.sourceOrder,i=t.chapterNumber,a=t.name,c=t.scanlator;return C.jsx(Ae,{chapterNumber:i,name:a,sourceOrder:o,scanlator:c,children:C.jsx(te,v(v({},Ve.preventRippleProp()),{},{variant:"contained",size:"small",sx:{minWidth:"unset",py:.5,px:.75},component:U,to:"".concat(r,"/chapter/").concat(o),state:Je.getReaderOpenChapterLocationState(t),onClick:function(e){return e.stopPropagation()},children:C.jsx(qe,{})}))})},Rn=P("div")(function(e){return{display:"flex",height:"fit-content",borderRadius:e.theme.shape.borderRadius,overflow:"hidden"}}),_n=P(se)(function(e){var n=e.theme;return{color:n.palette.primary.contrastText,paddingInline:n.spacing(.3)}}),Tn=function(e){var n=e.inLibraryIndicator,t=e.updateLibraryState,r=e.isInLibrary,o=e.unread,i=e.downloadCount,a=e.mode,c=z(),l=c.i18n,s=(c._,N.useIsTouchDevice()),u=Z().settings,d=u.showUnreadBadge,f=u.showDownloadBadge;return C.jsxs(Rn,{children:[!s&&n&&"source"===a&&C.jsx(te,v(v({className:"source-manga-library-state-button",component:"div",variant:"contained",size:"small"},Ve.preventRippleProp()),{},{onClick:function(e){e.preventDefault(),e.stopPropagation(),t()},sx:{display:"none"},color:r?"error":"primary",children:r?l._({id:"mfwy3x"}):l._({id:"RsaYWP"})})),n&&r&&C.jsx(se,{className:"source-manga-library-state-indicator",sx:{backgroundColor:"primary.dark",color:"primary.contrastText",p:.3},children:l._({id:"GcCthe"})}),(d&&"default"===a||"duplicate"===a)&&(null!=o?o:0)>0&&C.jsx(_n,{sx:{backgroundColor:"primary.main",color:"primary.contrastText"},children:o}),(f&&"default"===a||"duplicate"===a)&&(null!=i?i:0)>0&&C.jsx(_n,{sx:{backgroundColor:"secondary.main",color:"secondary.contrastText"},children:i})]})},En=s("c",j.memo(function(e){var n=e.manga,t=e.gridLayout,r=e.inLibraryIndicator,o=e.selected,i=e.handleSelection,a=e.mode,c=void 0===a?"default":a,l=n.id,s=n.firstUnreadChapter,u=n.downloadCount,d=n.unreadCount,f=Z().settings.showContinueReadingButton,g=Ie(n,"source"===c),h=g.updateLibraryState,m=g.isInLibrary,b=function(e,n,t,r){switch(e){case"default":case"source":case"duplicate":return V.manga.path(n);case"migrate.search":return V.migrate.childRoutes.search.path(null!=t?t:"-1",n,r);case"migrate.select":return"";default:throw new Error('getMangaLinkTo: unexpected MangaCardMode "'.concat(e,'"'))}}(c,n.id,n.sourceId,n.title),y=p(j.useState(!1),2),x=y[0],w=y[1],S=j.useCallback(function(e,n){var t="default"===c,r="source"===c,a="migrate.select"===c,s=null!==o;(a||s||(t||r)&&!!n)&&(e.preventDefault(),r?h():s?null==i||i(l,!o,{selectRange:e.shiftKey}):t?null==n||n():a&&w(!0))},[c,o,h,i]),k=Me(j.useCallback(function(e,n){var t=n.context;e.shiftKey=!0,S(e,t)},[S])),I=j.useMemo(function(){return t===ce.List?On:Ln},[t]);return C.jsxs(C.Fragment,{children:[x&&C.jsx(Sn,{mangaIdToMigrateTo:n.id,onClose:function(){return w(!1)}}),C.jsx(ue,{variant:"popover",popupId:"manga-card-action-menu",children:function(t){return C.jsxs(C.Fragment,{children:[C.jsx(I,v(v({},e),{},{longPressBind:k,popupState:t,handleClick:S,mangaLinkTo:b,isInLibrary:m,inLibraryIndicator:r,continueReadingButton:C.jsx(Pn,{showContinueReadingButton:f&&"default"===c,chapter:s,mangaLinkTo:b}),mangaBadges:C.jsx(Tn,{inLibraryIndicator:r,isInLibrary:m,unread:d,downloadCount:u,updateLibraryState:h,mode:c})})),!!i&&t.isOpen&&C.jsx(Le,v(v({},de(t)),{},{children:function(e,t){return C.jsx(Cn,{manga:n,handleSelection:i,onClose:e,setHideMenu:t})}}))]})}})]})})),An=function(e){var n=e.ref,t=e.persistKey,r=d(e,i),o=nn.usePersistState(t),a=o.state,c=o.persistState,l=j.useRef(void 0),s=We(l,n);return C.jsx(en,v(v({},r),{},{ref:s,stateChanged:c,restoreStateFrom:a}))},Gn=function(e){var n=e.children,t=e.ref,r=d(e,a);return C.jsx(xn,v(v({},r),{},{ref:t,container:!0,spacing:1,children:n}))},Dn=function(e,n,t){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o=arguments.length>4?arguments[4]:void 0,i=arguments.length>5?arguments[5]:void 0,a=arguments.length>6?arguments[6]:void 0;return C.jsx(En,{manga:e,gridLayout:n,inLibraryIndicator:t,selected:r?null==o?void 0:o.includes(e.id):null,handleSelection:i,mode:a})},Fn=function(e){var n=e.isLoading,t=e.mangas,r=e.inLibraryIndicator,o=e.GridItemContainer,i=e.gridLayout,a=e.isSelectModeActive,c=e.selectedMangaIds,l=e.handleSelection,s=e.mode,u=e.ref;return C.jsx(xn,{ref:u,container:!0,spacing:1,sx:{width:"100%",overflowX:"auto",display:"-webkit-inline-box",flexWrap:"nowrap"},children:n?C.jsx(ge,{}):t.map(function(e){return C.jsx(o,{children:Dn(e,i,r,a,c,l,s)},e.id)})})},Nn=s("M","MangaGrid-snapshot-location"),Wn=function(e){var n=e.isLoading,t=e.mangas,r=e.inLibraryIndicator,o=e.GridItemContainer,i=e.gridLayout,a=e.hasNextPage,c=e.loadMore,l=e.isSelectModeActive,s=e.selectedMangaIds,u=e.handleSelection,d=e.mode,f=e.ref;return C.jsxs(C.Fragment,{children:[C.jsx(W,{ref:f,children:C.jsx(An,{persistKey:Nn,useWindowScroll:!0,increaseViewportBy:.5*window.innerHeight,totalCount:t.length,components:{List:Gn,Item:o},endReached:function(){return c()},computeItemKey:function(e){return t[e].id},itemContent:function(e){return Dn(t[e],i,r,l,s,u,d)}})}),l&&i===ce.List?C.jsx(W,{sx:{paddingBottom:$e}}):n?C.jsx(ge,{}):a?C.jsx("div",{style:{height:"75px"}}):null]})};s("a",function(e){var n,t,r=e.mangas,o=e.isLoading,i=e.message,a=e.messageExtra,l=e.hasNextPage,s=e.loadMore,u=e.gridLayout,f=e.horizontal,g=e.noFaces,h=e.inLibraryIndicator,m=e.isSelectModeActive,b=e.selectedMangaIds,y=e.handleSelection,x=e.mode,w=e.retry,S=e.gridWrapperProps,k=z(),I=k.i18n,M=(k._,fe().navBarWidth),L=Z().settings.mangaGridItemWidth,O=j.useRef(null),P=j.useRef(null),R=p(j.useState(null!==(n=null===(t=P.current)||void 0===t?void 0:t.offsetWidth)&&void 0!==n?n:Math.max(0,document.documentElement.offsetWidth-M)),2),_=R[0],T=R[1],E=j.useMemo(function(){return function(e,n,t){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:12,o=Math.ceil(e/n),i=t===ce.List?r:r/o;return function(e){var n=e.children,t=d(e,c);return C.jsx(xn,v(v({},t),{},{size:i,children:n}))}}(_,L,u)},[_,L,u]);return j.useLayoutEffect(function(){if(f)return function(){};var e,n=function(t){e=setTimeout(function(){document.body.style.overflow.includes("hidden")?n(250):document.body.style.overflowY=u===ce.List?"auto":"scroll"},t)};return n(0),function(){clearTimeout(e)}},[u]),j.useLayoutEffect(function(){return function(){f||(document.body.style.overflowY="auto")}},[]),pe(P,j.useCallback(function(){var e;T((null===(e=P.current)||void 0===e?void 0:e.offsetWidth)||document.documentElement.offsetWidth-M)},[M])),pe(O,j.useCallback(function(e,n){var t=e[0].target.clientHeight,r=t>document.documentElement.clientHeight;o||t&&(r||s(),n.disconnect())},[O,s,o])),!o&&0===r.length?C.jsx(he,{noFaces:g,message:null!=i?i:I._({id:"RbPhRX"}),messageExtra:a,retry:w}):C.jsx(W,v(v({},S),{},{ref:P,sx:v(v({},null==S?void 0:S.sx),{},{overflow:"hidden"}),children:f?C.jsx(Fn,{ref:O,isLoading:o,mangas:r,inLibraryIndicator:h,GridItemContainer:E,gridLayout:u,isSelectModeActive:m,selectedMangaIds:b,handleSelection:y,mode:x}):C.jsx(Wn,{ref:O,isLoading:o,mangas:r,inLibraryIndicator:h,GridItemContainer:E,hasNextPage:l,loadMore:s,gridLayout:u,isSelectModeActive:m,selectedMangaIds:b,handleSelection:y,mode:x})}))})}}})}();
