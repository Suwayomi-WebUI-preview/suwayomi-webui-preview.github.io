import{u as _,f as g,j as e,aP as J,az as z,an as K,aI as N,aJ as A,bf as R,T as M,d as j,v as W,aL as $,e as m,aK as q,k as B,I as G,P as Q,n as U}from"./index-87a7KjSO.js";import{d as V}from"./Info-CQBc4xDk.js";import{a as X,T as Y}from"./TextSetting-C-lx0v2F.js";const Z=({handleDelete:o,mutable:r=!0,deletable:c=!0,...n})=>{const{t:u}=_();return e.jsxs(j,{direction:"row",children:[r?e.jsx(Y,{...n,dialogTitle:""}):e.jsx(q,{children:e.jsx(z,{secondary:n.value})}),e.jsx(B,{title:u("chapter.action.download.delete.label.action"),children:e.jsx(G,{disabled:!c,size:"large",onClick:o,children:e.jsx(Q,{})})})]})},E=o=>{var r;return(r=o==null?void 0:o.map(c=>c[0]))!=null?r:[]},te=({settingName:o,description:r,dialogDisclaimer:c,valueInfos:n,handleChange:u,addItemButtonTitle:b,placeholder:S,allowDuplicates:P=!1,validateItem:x=()=>!0,invalidItemError:D})=>{const{t:p}=_(),i=E(n),[F,T]=g.useState(!1),[a,h]=g.useState(i),[k,L]=g.useState(!1);g.useEffect(()=>{n&&h(i)},[n]);const y=(t=!0)=>{t&&h(i),T(!1)},f=(t,s)=>{if(s===void 0){h(a.toSpliced(t,1));return}if(!(!P&&a.includes(s))&&s!==""){if(!(x!=null&&x(s,a))){U(D!=null?D:p("global.error.label.invalid_input"),"error");return}h(a.toSpliced(t,1,s.trim()))}},H=()=>{y(!0);const t=a.filter(l=>l!==""),s=i.filter(l=>!t.includes(l));u(t,s)};return e.jsxs(e.Fragment,{children:[e.jsx(J,{onClick:()=>T(!0),children:e.jsx(z,{primary:o,secondary:i!=null&&i.length?i==null?void 0:i.join(", "):r,secondaryTypographyProps:{style:{display:"flex",flexDirection:"column"}}})}),e.jsxs(K,{open:F,onClose:()=>y(),fullWidth:!0,children:[e.jsx(N,{children:o}),(!!r||!!c)&&e.jsx(A,{children:e.jsxs(R,{sx:{paddingBottom:"10px"},component:"div",children:[r&&e.jsx(M,{variant:"body1",sx:{whiteSpace:"pre-line"},children:r}),c&&e.jsxs(j,{direction:"row",sx:{alignItems:"center"},children:[e.jsx(V,{color:"warning"}),e.jsx(M,{variant:"body1",sx:{marginLeft:"10px",marginTop:"5px",whiteSpace:"pre-line"},children:c})]})]})}),e.jsx(A,{dividers:!0,sx:{maxHeight:"300px"},children:e.jsx(W,{children:a.map((t,s)=>{var l,C,w,O;return e.jsx(Z,{settingName:"",placeholder:S,handleChange:d=>f(s,d),handleDelete:()=>f(s,void 0),value:t,mutable:(C=(l=n==null?void 0:n.find(([d])=>d===t))==null?void 0:l[1])==null?void 0:C.mutable,deletable:(O=(w=n==null?void 0:n.find(([d])=>d===t))==null?void 0:w[1])==null?void 0:O.deletable},t)})})}),e.jsx($,{children:e.jsxs(j,{direction:"row",sx:{justifyContent:"space-between",width:"100%"},children:[e.jsx(m,{onClick:()=>L(!0),children:b!=null?b:p("global.button.add")}),e.jsxs(j,{direction:"row",children:[e.jsx(m,{onClick:()=>y(),children:p("global.button.cancel")}),e.jsx(m,{onClick:()=>H(),children:p("global.button.ok")})]})]})})]}),k&&e.jsx(X,{settingName:"",placeholder:S,handleChange:t=>f(a.length,t),isDialogOpen:k,setIsDialogOpen:L,validate:t=>{var s;return(s=x==null?void 0:x(t,a))!=null?s:!0}})]})};export{te as M};
