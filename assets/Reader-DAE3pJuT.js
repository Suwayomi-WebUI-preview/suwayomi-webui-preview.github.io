var xs=Object.defineProperty;var ms=(e,t,r)=>t in e?xs(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;var ve=(e,t,r)=>ms(e,typeof t!="symbol"?t+"":t,r);import{ev as Nr,f as l,ew as wt,j as i,o as Jt,b3 as v,q as Qt,er as vs,J as Ye,dQ as gt,ec as er,b as B,H as G,T as rt,b8 as Ss,ex as Cs,a7 as Rs,a9 as Yt,Y as qe,ae as nr,C as $,ey as kr,e6 as xt,ez as H,G as et,el as Hr,eA as bs,eB as we,k as dt,aD as Ps,dV as bt,bx as Y,dN as de,e as Vr,c2 as lt,cG as Vt,dS as W,dT as ue,Q as We,dw as Ts,cC as Es,eC as ws,eD as As,dx as _s,a6 as it,eE as ur,b9 as st,eF as gr,aY as Pt,A as ir,L as zt,c as Ae,u as F,aZ as zr,aq as Wr,ar as Ur,ap as Tt,ct as Bt,aA as Nt,b1 as Is,b2 as Ms,B as nt,e9 as Os,e7 as hr,e8 as $r,e2 as tr,e3 as Fr,eb as Ds,eG as pr,eH as Gr,aC as js,ej as Ne,aw as Ls,dP as ut,x as Xr,I as ne,r as At,a_ as ys,a$ as Bs,am as Ns,i as Wt,ay as ks,eI as ar,bA as Hs,bi as Vs,m as Yr,dO as Ct,aB as fr,eJ as zs,cS as Ws,bF as Be,eK as Us,eL as qr,bP as $s,g as Kr,dU as mt,af as Zr,c3 as xr,aX as mr,eo as Q,al as Fs,eM as rr,h as Gs,aE as Xs,eN as Ys,eO as qs}from"./index-VxLoqdF2.js";import{b as J,R as Ks,a as D,w as he,c as ht,d as Ke,e as Ut,g as De,f as Ce,i as ge,h as ke,j as tt,k as Z,l as vr,m as Sr,n as le,o as Zs,p as Et,q as _t,r as Js,s as Qs,t as en,v as tn,x as Jr,y as Qr,z as es,S as rn,A as sn,B as $t,C as It,D as Ve,E as or,F as nn,G as an,H as on,I as cn,J as cr,K as ln,L as dn,M as ts,N as un,O as ze,P as gn,Q as Cr,T as Dt,U as hn,V as pn,W as fn,X as xn,Y as rs,Z as ss,_ as mn,$ as vn,a0 as Sn,a1 as Cn,a2 as Lt,a3 as Rr,a4 as Rn,a5 as bn,a6 as qt,a7 as Pn}from"./ReaderSettingsTabs-DODOcUwD.js";import{r as Tn}from"./Strings-CAV0u705.js";import{a as He,C as sr,F as Rt}from"./Chapters-KqFkrzA6.js";import{P as En}from"./PushPin-fmOGo5gR.js";import{P as wn}from"./PushPinOutlined-DcghYQ7A.js";import{L as yt}from"./Link-bz_H3Rka.js";import{S as ns}from"./Select-B6M4WIrh.js";import{C as is,u as An,F as _n,M as In,f as Mn,l as On}from"./useManageMangaLibraryState-C9yh7iJF.js";import{q as Dn}from"./index-4h_0XtsJ.js";import{C as jn,B as Ln,I as yn}from"./ChapterListCard-DbJigP7I.js";import{D as Bn}from"./Download-CQe2TOH4.js";import{D as Nn}from"./Delete-DKcjZeo-.js";import{D as kn}from"./ChapterCardMetadata-8IWf-L0u.js";import{F as Hn,I as Vn}from"./IconWebView-ByjRsvhg.js";import{F as lr}from"./Mangas-SPSbNsF5.js";import{C as zn}from"./CheckboxInput-CTX_lG7W.js";import{E as kt}from"./EmptyViewAbsoluteCentered-BBm6NvMy.js";import{u as Wn}from"./SpinnerImage-CRBPUN-R.js";import{u as Un}from"./use-window-event-DsZojzob.js";import{u as $n}from"./use-merged-ref-b1wt69S5.js";import{u as Fn}from"./useAppTitle-_XKroqPH.js";import"./TabsMenu-Vd2F66Wr.js";import"./Tabs-F6UgZUHf.js";import"./Slider-BbO_oAA_.js";import"./ListSubheader-CN0qru_F.js";import"./Add-BGi0t90I.js";import"./DateHelper-Oq1LsVGA.js";import"./Asserts-xItX73wb.js";import"./ThreeStateCheckboxInput-BUT5YVRs.js";import"./Checkbox-CjJa6CQI.js";import"./SwitchBase-DhK57wAx.js";import"./FormGroup-B7b-bcM6.js";import"./DoneAll-CJbY1wFH.js";import"./MUI.util-CEodEA2f.js";import"./ListCardContent-ynl7lS8I.js";import"./Card-DesDHnBl.js";import"./CardActionArea-BklpFoEF.js";import"./Refresh-0CahhaOR.js";import"./Image-CsHqAsfA.js";const Gn=e=>{const{activeScopes:t,enableScope:r,disableScope:s}=Nr(),n=l.useRef([]);l.useEffect(()=>e?(n.current=[...t],r(wt.NONE),n.current.forEach(s),()=>{s(wt.NONE),n.current.forEach(r)}):()=>{},[e])},Xn=({isOpen:e,close:t})=>{const r=J(c=>c.settings);Gn(e);const[s,n]=l.useState(0),[a,o]=l.useState(!1);return e?i.jsx(Jt,{open:e,maxWidth:"md",fullWidth:!0,onClose:t,hideBackdrop:s===vs.FILTER,sx:{...v(a,{opacity:.75})},children:i.jsx(Qt,{sx:{p:0},children:i.jsx(Ks,{activeTab:s,setActiveTab:n,settings:r,updateSetting:(...c)=>D.updateSetting(...c),deleteSetting:(...c)=>D.deleteSetting(...c),setTransparent:o})})}):null},Yn=({isDesktop:e,readerNavBarWidth:t})=>{const r=ht(u=>u.scrollbar),{currentPageIndex:s,pages:n,totalPages:a}=Ke(u=>({currentPageIndex:u.pages.currentPageIndex,pages:u.pages.pages,totalPages:u.pages.totalPages})),{readingDirection:o,shouldShowPageNumber:c,progressBarType:d}=J(u=>({readingDirection:u.settings.readingDirection.value,shouldShowPageNumber:u.settings.shouldShowPageNumber,progressBarType:u.settings.progressBarType})),h=Ut(u=>u.progressBar.isMaximized),p=l.useMemo(()=>{const u=De(s,n).name,g="/",x="".concat(u).concat(g).concat(a);return o===gt.LTR?x:Tn(x,g)},[s,n,a,o]);return!c||h||e&&d===er.STANDARD||h&&d===er.HIDDEN?null:i.jsx(B,{sx:{position:"fixed",left:t,right:0,bottom:u=>"max(calc(".concat(u.spacing(1)," + ").concat(r.xSize,"px), env(safe-area-inset-bottom))"),alignItems:"center",transition:u=>"left 0.".concat(u.transitions.duration.shortest,"s")},children:i.jsx(G,{sx:{p:.5,borderRadius:1,backgroundColor:"rgba(0, 0, 0, 0.3)"},children:i.jsx(rt,{sx:{color:"white"},children:p})})})},qn=he(Yn,[D.useOverlayMode,Ye],["isDesktop","readerNavBarWidth"]);function br(e){return e.substring(2).toLowerCase()}function Kn(e,t){return t.documentElement.clientWidth<e.clientX||t.documentElement.clientHeight<e.clientY}function Zn(e){const{children:t,disableReactTree:r=!1,mouseEvent:s="onClick",onClickAway:n,touchEvent:a="onTouchEnd"}=e,o=l.useRef(!1),c=l.useRef(null),d=l.useRef(!1),h=l.useRef(!1);l.useEffect(()=>(setTimeout(()=>{d.current=!0},0),()=>{d.current=!1}),[]);const p=Ss(Cs(t),c),u=Rs(f=>{const S=h.current;h.current=!1;const P=Yt(c.current);if(!d.current||!c.current||"clientX"in f&&Kn(f,P))return;if(o.current){o.current=!1;return}let m;f.composedPath?m=f.composedPath().includes(c.current):m=!P.documentElement.contains(f.target)||c.current.contains(f.target),!m&&(r||!S)&&n(f)}),g=f=>S=>{h.current=!0;const P=t.props[f];P&&P(S)},x={ref:p};return a!==!1&&(x[a]=g(a)),l.useEffect(()=>{if(a!==!1){const f=br(a),S=Yt(c.current),P=()=>{o.current=!0};return S.addEventListener(f,u),S.addEventListener("touchmove",P),()=>{S.removeEventListener(f,u),S.removeEventListener("touchmove",P)}}},[u,a]),s!==!1&&(x[s]=g(s)),l.useEffect(()=>{if(s!==!1){const f=br(s),S=Yt(c.current);return S.addEventListener(f,u),()=>{S.removeEventListener(f,u)}}},[u,s]),l.cloneElement(t,x)}const Pr=qe(rt)({boxSizing:"content-box",display:"flex",justifyContent:"center",alignItems:"center",overflow:"hidden",textAlign:"center",userSelect:"none",cursor:"pointer",WebkitTapHighlightColor:"transparent"}),Jn=qe(B,{shouldForwardProp:nr(["progressBarPosition"])})(({theme:e,progressBarPosition:t})=>({position:"fixed",pointerEvents:"all",touchAction:"none",...v(Ce(t).isHorizontal,{justifyContent:"flex-end",bottom:0,right:0}),...v(Ce(t).isVertical,{top:0,bottom:0}),...v(Ce(t).isLeft,{alignItems:e.direction==="ltr"?"flex-start":"flex-end"}),...v(Ce(t).isRight,{alignItems:e.direction==="ltr"?"flex-end":"flex-start"}),WebkitTapHighlightColor:"transparent"})),Qn=qe(B)(({theme:e})=>({flexDirection:"row",justifyContent:"center",alignItems:"center",gap:e.spacing(.5)})),ei=qe(B)({flexDirection:"row",flexGrow:1,overflow:"hidden"}),ti=qe(G,{shouldForwardProp:nr(["currentPagesIndex","pagesLength","progressBarPosition"])})(({currentPagesIndex:e,pagesLength:t,progressBarPosition:r})=>({position:"absolute",pointerEvents:"none",...v(Ce(r).isHorizontal,{left:0,width:"".concat((e+1)/t*100,"%"),height:"100%"}),...v(Ce(r).isVertical,{top:0,width:"100%",height:"".concat((e+1)/t*100,"%")})})),ri=({pageName:e,currentPagesIndex:t,pagesLength:r,isDragging:s,boxProps:n,children:a,progressBarPosition:o})=>i.jsx($,{title:e,slotProps:{tooltip:{sx:{backgroundColor:"primary.main",color:"primary.contrastText"}}},placement:kr[o],disableTouchListener:!0,children:i.jsx(G,{...n,sx:{position:"absolute",cursor:s?"grabbing":"grab",...v(Ce(o).isHorizontal,{left:"".concat(Math.max(0,t-1)/(r-1)*100,"%"),width:"calc(100% / ".concat(r-1,")"),height:"100%"}),...v(Ce(o).isVertical,{top:"".concat(Math.max(0,t-1)/(r-1)*100,"%"),width:"100%",height:"calc(100% / ".concat(r-1,")")}),...n==null?void 0:n.sx},children:a})}),si=qe(B)({position:"relative",flexDirection:"row",flexGrow:1}),ni={[xt.EDGE]:[{rect:[0,0,100,33.33],type:H.NEXT},{rect:[0,33.33,33.33,66.66],type:H.NEXT},{rect:[66.66,33.33,33.33,66.66],type:H.NEXT},{rect:[33.33,33.33,33.33,33.33],type:H.MENU},{rect:[33.33,66.66,33.33,33.33],type:H.PREVIOUS}],[xt.KINDLE]:[{rect:[0,0,100,33.33],type:H.MENU},{rect:[0,33.33,33.33,66.66],type:H.PREVIOUS},{rect:[33.33,33.33,66.66,66.66],type:H.NEXT}],[xt.L_SHAPE]:[{rect:[0,0,100,33.33],type:H.PREVIOUS},{rect:[0,33.33,33.33,33.33],type:H.PREVIOUS},{rect:[33.33,33.33,33.33,33.33],type:H.MENU},{rect:[66.66,33.33,33.33,33.33],type:H.NEXT},{rect:[0,66.66,100,33.33],type:H.NEXT}],[xt.RIGHT_LEFT]:[{rect:[0,0,33.33,100],type:H.PREVIOUS},{rect:[33.33,0,33.33,100],type:H.MENU},{rect:[66.66,0,33.33,100],type:H.NEXT}],[xt.DISABLED]:[{rect:[0,0,100,100],type:H.MENU}]},ii={[H.PREVIOUS]:{text:{id:"DHhJ7s"},color:"rgba(255, 114, 118, .5)"},[H.NEXT]:{text:{id:"hXzOVo"},color:"rgba(144, 238, 144, .5)"},[H.MENU]:{text:{id:"zucql+"},color:"rgba(0, 0, 0, .5)"}};class Se{static invertRect(t,{vertical:r,horizontal:s,isRTL:n}){const a=r?this.invertVertical(t):t,o=s?this.invertHorizontal(a):a;return n?this.invertHorizontal(o):o}static getRegions(t,r){return ni[t].map(({type:n,rect:a})=>({type:n,rect:this.invertRect(a,r)}))}static isCanvasReusable(t,r,s,n,a){var x;const o=this.layout===t,c=this.width===r,d=this.height===s,h=!!this.canvas,p=this.language===et.locale,u=((x=this.invertMode)==null?void 0:x.vertical)===a.vertical&&this.invertMode.horizontal===a.horizontal&&this.invertMode.isRTL===a.isRTL,g=this.fontStyle===n;return h&&c&&d&&o&&p&&u&&g}static drawCanvas(t,r,s,n,a){a.forEach(({type:o,rect:[c,d,h,p]})=>{const{text:u,color:g}=ii[o],x=et._(u),f=(E,b)=>E/100*b,S=f(c,r),P=f(d,s),m=f(h,r),R=f(p,s),w=(E,b)=>(E+b)*.5+E*.5,T=w(S,m),I=w(P,R);t.beginPath(),t.rect(S,P,m,R),t.fillStyle=g,t.strokeStyle=g,t.lineWidth=.1,t.stroke(),t.fill(),t.strokeStyle="black",t.textAlign="center",t.textBaseline="middle",t.font="".concat(n.fontSize," ").concat(n.fontFamily),t.strokeStyle="black",t.lineWidth=3,t.strokeText(x,T,I),t.lineWidth=1,t.fillStyle="white",t.fillText(x,T,I)})}static getOrCreateCanvas(t,r,s,n,a){if(this.isCanvasReusable(t,r,s,n,a))return this.canvas;const o=document.createElement("canvas"),c=o.getContext("2d");c.canvas.width=r,c.canvas.height=s;const d=this.getRegions(t,a);return this.drawCanvas(c,r,s,n,d),this.layout=t,this.canvas=o,this.width=r,this.height=s,this.language=et.locale,this.invertMode=a,this.regions=d,this.fontStyle=n,o}static doesRegionContainPos(t,r,s){const[n,a,o,c]=t.rect;return r>=n&&r<=n+o&&s>=a&&s<=a+c}static getAction(t,r){var o;const s=t/this.width*100,n=r/this.height*100,a=(o=this.regions)==null?void 0:o.find(c=>this.doesRegionContainPos(c,s,n));return a?a.type:H.MENU}}ve(Se,"layout",null),ve(Se,"canvas",null),ve(Se,"width",null),ve(Se,"height",null),ve(Se,"language",null),ve(Se,"invertMode",null),ve(Se,"regions",null),ve(Se,"fontStyle",null),ve(Se,"invertVertical",([t,r,s,n])=>[t,100-(r+n),s,n]),ve(Se,"invertHorizontal",([t,r,s,n])=>[100-(t+s),r,s,n]);const ai=(e,t,r)=>{if(e===we.X){if(t===ue.BACKWARD)return r==="ltr"?-1:1;if(t===ue.FORWARD)return r==="ltr"?1:-1}return t===ue.BACKWARD?-1:1},fe=class fe{static scroll(t,r,s,n,a,o,c=Hr.LARGE){if(!a)return;const d=bt[n],h=bs().direction===d,p=ge(s),u=Math.abs(a.scrollTop)<=1,g=Math.floor(a.scrollTop)===a.scrollHeight-a.clientHeight||Math.ceil(a.scrollTop)===a.scrollHeight-a.clientHeight,x=Math.abs(a.scrollLeft)<=1,f=a.scrollWidth-a.clientWidth-Math.floor(Math.abs(a.scrollLeft))<=1||a.scrollWidth-a.clientWidth-Math.ceil(Math.abs(a.scrollLeft))<=1,S=h?x:f,P=h?f:x,m=c/100,R=ai(r,t,d),w=(I,E)=>I+E*m*R;ke().setIsVisible(!1),o(!1);const T=(I,E,b)=>{if(I&&t===ue.BACKWARD&&p){fe.openChapter("previous");return}if(E&&t===ue.FORWARD&&p){fe.openChapter("next");return}a.scroll({...b,behavior:"smooth"})};switch(r){case we.X:T(S,P,{left:w(a.scrollLeft,a.clientWidth)});break;case we.Y:T(u,g,{top:w(a.scrollTop,a.clientHeight)});break;default:throw new Error('Unexpected "ScrollDirection" ('.concat(r,")"))}}static openChapter(t,r=!0,s=!0){const{currentChapter:n,previousChapter:a,nextChapter:o,chapters:c,visibleChapters:{lastLeadingChapterSourceOrder:d,lastTrailingChapterSourceOrder:h},setReaderStateChapters:p}=tt(),{shouldInformAboutMissingChapter:u,shouldInformAboutScanlatorChange:g,shouldUseInfiniteScroll:x}=Z();if(!n)return;const f=typeof t=="number",S=t==="previous";if(!(f||S&&!!a||!S&&!!o))return;(async()=>{const T=f?c.find(E=>E.id===t):S?a:o;if(!T)return;const I=T.sourceOrder<n.sourceOrder;try{r&&await fe.checkNextChapterConsistency(I?"previous":"next",n,T,u,g);const E=d<=T.sourceOrder&&h>=T.sourceOrder,b=x&&(!s||E);b&&p(A=>en(I,A,T.sourceOrder,s,I?!1:void 0,I?void 0:!1)),D.navigateToChapter(T,{resumeMode:tn(f||!b,I),updateInitialChapter:!b})}catch(E){dt("ReaderControls#useOpenChapter#doOpenChapter:")(E)}})().catch(dt("ReaderControls#useOpenChapter"))}static async checkNextChapterConsistency(t,r,s,n,a){if(!r||!s)return;const o=He.getGap(r,s),c=!a||r.scanlator===s.scanlator,d=!n||!o;if(!(!c||!d))return;const p={previous:{scanlator:{id:"dDQ7od"},chapter_number:{id:"P0p2jp"}},next:{scanlator:{id:"AwNAqo"},chapter_number:{id:"jN+b67"}}},u=c?"":et.t({...p[t].scanlator,values:{nextScanlator:s.scanlator,currentScanlator:r.scanlator}}),g=d?"":et.t({...p[t].chapter_number,values:{count:o,nextChapter:"#".concat(s.chapterNumber," ").concat(s.name),currentChapter:"#".concat(r.chapterNumber," ").concat(r.name)}}),x=!c&&!d?"\n\n":"",f="".concat(u).concat(x).concat(g);await Ps.show({title:et._({id:"Mx1mqC"}),message:f,actions:{confirm:{title:et._({id:"1TNIig"})}}})}static openPage(t,r,s=!0){const{currentPageIndex:n,setPageToScrollToIndex:a,pages:o,transitionPageMode:c,setTransitionPageMode:d}=vr(),{readingDirection:h,readingMode:p,shouldShowTransitionPage:u}=Z(),g=bt[h.value],x=Y(t,t==="previous"?"next":"previous",r!=null?r:g),f=De(n,o),S=Sr("previous",f.pagesIndex,o),P=Sr("next",f.pagesIndex,o),m=le(o[0]),R=le(o[o.length-1]),w=f.primary.index===0,T=n===R,I=Zs(c,p.value),E=ge(p.value);s&&(ke().setIsVisible(!1),Et().setShowPreview(!1));const b=()=>d(de.NONE);if(typeof t=="number"){a(t),b();return}const A=E&&I,_=!E&&c===de.PREVIOUS||A,j=!E&&c===de.NEXT||A;if(w&&(!u||_)&&x==="previous"&&!!tt().previousChapter){fe.openChapter("previous");return}if(T&&(!u||j)&&x==="next"&&!!tt().nextChapter){fe.openChapter("next");return}const M=x==="previous",z=x==="next";if(I&&!E&&(_&&z||j&&M)){b(),a(_?m:R);return}if((w&&M||T&&z)&&!E){d(M?de.PREVIOUS:de.NEXT);return}a(M?S:P)}static useUpdateCurrentPageIndex(){const t=D.useUpdateChapter(),{settings:{downloadAheadLimit:r}}=Vr();return l.useCallback((s,n=!0,a=!1)=>{const{currentPageIndex:o,setCurrentPageIndex:c}=vr(),{currentChapter:d,chapters:h,previousChapter:p,nextChapter:u,visibleChapters:g,setReaderStateChapters:x}=tt();if(s===o&&!a||(c(s),!d))return;const f=He.getNextChapters(d,h,{offset:lt.NEXT}),S=o>s?lt.PREVIOUS:lt.NEXT;D.downloadAhead(d,u,f,s,r),D.preloadChapter(s,d.pageCount,S===lt.NEXT?u:p,g.lastLeadingChapterSourceOrder,g.lastTrailingChapterSourceOrder,x,S);const P=()=>{const m=Jr(d.id);if(!m)return;const R=a?m.pageCount-1:s,w=R===m.pageCount-1;t({lastPageRead:R,isRead:w?!0:void 0})};if(clearTimeout(fe.updateCurrentPageTimeout),n){fe.updateCurrentPageTimeout=setTimeout(P,Vt(1).seconds.inWholeMilliseconds);return}P()},[r])}static updateCurrentPageOnScroll(t,r,s,n,a){var g,x,f,S;const o=bt[a],c=(f=(x=(g=_t().autoScroll.scrollRef)==null?void 0:g.current)==null?void 0:x.getBoundingClientRect().x)!=null?f:0,d=Y(c+1,window.innerWidth+1,o),h=t.current.findIndex(P=>P&&Js(P,n,{truncateValues:!0,thresholds:{bottom:1,left:Y(0,d,o),right:Y(d,0,o)}})),p=(S=t.current)==null?void 0:S[t.current.length-1],u=p&&Qs(p,n,a);if(h!==-1){if(u){s(h,!1,!0);return}s(h,h!==r)}}static handleClick(t,r){if(!t)return;const{readingMode:s,readingDirection:n,isStaticNav:a,scrollAmount:o}=Z(),c=r.currentTarget.getBoundingClientRect(),d=r.clientX-c.left,h=r.clientY-c.top,p=Se.getAction(d,h);Et().setShowPreview(!1);const u=ge(s.value),g=s.value===W.CONTINUOUS_HORIZONTAL?we.X:we.Y;switch(p){case H.MENU:ke().setIsVisible(a||!ke().isVisible);break;case H.PREVIOUS:case H.NEXT:u?fe.scroll(p===H.PREVIOUS?ue.BACKWARD:ue.FORWARD,g,s.value,n.value,t,Et().setShowPreview,o):fe.openPage(p===H.PREVIOUS?"previous":"next","ltr");break;default:throw new Error('Unexpected "TapZoneRegionType" ('.concat(p,")"))}}static useHandleProgressDragging(t,r,s,n,a,o,c){l.useEffect(()=>{if(!r)return()=>{};const{isHorizontal:d}=Ce(a),h=g=>{if(!t.current)return;const x=le(Qr(g,t.current,n,d,c,o));le(s)!==x&&fe.openPage(x,void 0,!1)},p=g=>{h(g)},u=g=>{g.touches.length>0&&h(g.touches[0])};return document.addEventListener("mousemove",p,{passive:!0}),document.addEventListener("touchmove",u,{passive:!0}),()=>{document.removeEventListener("mousemove",p),document.removeEventListener("touchmove",u)}},[r,s,n,a])}};ve(fe,"updateCurrentPageTimeout");let V=fe;const oi=l.memo(qe(G,{shouldForwardProp:nr(["isFirstPage","isLastPage"])})(({isFirstPage:e,isLastPage:t})=>({flexGrow:1,height:"100%",cursor:"pointer",borderLeftWidth:e?0:void 0,borderRightWidth:t?0:void 0}))),ci=l.memo(({page:e,pagesIndex:t,isCurrentPage:r,isLeadingPage:s,isTrailingPage:n,totalPages:a,showDraggingStyle:o,primaryPageLoadState:c,secondaryPageLoadState:d,createProgressBarSlot:h,...p})=>{const u=l.useMemo(()=>h(e,t,c,d,r,s,n,a,o),[h,e,t,c,d,r,s,n,a,o]);return i.jsx(oi,{...p,isFirstPage:t===0,isLastPage:t===a-1,children:u})}),li=({slotProps:e,slots:t,createProgressBarSlot:r,progressBarPosition:s,direction:n,fullSegmentClicks:a})=>{var A,_,j,N,y,M,z,Re,ie,ae,q,k,xe,L,_e,be,se,Ue,$e,je,Pe,Te,Le,me,at,Ze,Je,pe,K,Ie,Fe,Me;const{pages:o,pageLoadStates:c,totalPages:d,currentPageIndex:h}=Ke(C=>({pages:C.pages.pages,pageLoadStates:C.pages.pageLoadStates,totalPages:C.pages.totalPages,currentPageIndex:C.pages.currentPageIndex})),p=J(C=>C.settings.readingMode.value),{isDragging:u,setIsDragging:g}=Ut(C=>({isDragging:C.progressBar.isDragging,setIsDragging:C.progressBar.setIsDragging})),x=l.useRef(null),f=l.useRef(void 0),[S,P]=l.useState(0),m=l.useRef(null);We(m,l.useCallback(()=>{const C=m.current;if(!C)return;const{paddingLeft:X,paddingRight:oe}=getComputedStyle(C),U=6,ye=C.clientWidth-parseFloat(X)-parseFloat(oe),Ee=p===W.DOUBLE_PAGE?ye*2+U:ye;P(Ee)},[p]));const R=l.useMemo(()=>De(h,o).pagesIndex,[h,o]),w=Ce(s).isHorizontal,T=l.useMemo(()=>De(h,o),[h,o]),I=l.useCallback((...C)=>Y(C[0],C[1],n),[n]);V.useHandleProgressDragging(x,u,T,o,s,I,a);const E=C=>{if(!x.current)return;const X="touches"in C;V.openPage(le(Qr(X?C.touches[0]:C,x.current,o,w,a,I)),void 0,!1),clearTimeout(f.current),f.current=setTimeout(()=>g(!0),250)},b=()=>{g(!1),clearTimeout(f.current)};return i.jsx(Jn,{...e==null?void 0:e.container,progressBarPosition:s,children:i.jsxs(Qn,{...e==null?void 0:e.progressBarRoot,children:[i.jsx(Pr,{...(A=e==null?void 0:e.progressBarPageTexts)==null?void 0:A.base,...(_=e==null?void 0:e.progressBarPageTexts)==null?void 0:_.current,sx:[{width:"".concat(S,"px")},...Array.isArray((N=(j=e==null?void 0:e.progressBarPageTexts)==null?void 0:j.base)==null?void 0:N.sx)?(z=(M=(y=e==null?void 0:e.progressBarPageTexts)==null?void 0:y.base)==null?void 0:M.sx)!=null?z:[]:[(ie=(Re=e==null?void 0:e.progressBarPageTexts)==null?void 0:Re.base)==null?void 0:ie.sx],...Array.isArray((q=(ae=e==null?void 0:e.progressBarPageTexts)==null?void 0:ae.current)==null?void 0:q.sx)?(L=(xe=(k=e==null?void 0:e.progressBarPageTexts)==null?void 0:k.current)==null?void 0:xe.sx)!=null?L:[]:[(be=(_e=e==null?void 0:e.progressBarPageTexts)==null?void 0:_e.current)==null?void 0:be.sx]],onClick:()=>V.openPage("previous","ltr",!1),children:T.name}),i.jsx(Zn,{onClickAway:()=>g(!1),children:i.jsxs(si,{...e==null?void 0:e.progressBarSlotsActionArea,onMouseDown:E,onMouseUp:b,onTouchStart:E,onTouchEnd:b,children:[i.jsxs(ei,{ref:x,...e==null?void 0:e.progressBarSlotsContainer,children:[o.map((C,X)=>l.createElement(ci,{...e==null?void 0:e.progressBarSlot,key:C.primary.index,page:C,pagesIndex:X,isCurrentPage:X===R,isLeadingPage:X<R,isTrailingPage:X>R,totalPages:o.length,primaryPageLoadState:c[C.primary.index].loaded,secondaryPageLoadState:C.secondary?c[C.secondary.index].loaded:void 0,createProgressBarSlot:r,showDraggingStyle:X===R&&u})),i.jsx(ti,{...e==null?void 0:e.progressBarReadPages,currentPagesIndex:T.pagesIndex,pagesLength:o.length,progressBarPosition:s})]}),i.jsx(ri,{boxProps:e==null?void 0:e.progressBarCurrentPageSlot,pageName:T.name,currentPagesIndex:T.pagesIndex,pagesLength:o.length,isDragging:u,progressBarPosition:s,children:t==null?void 0:t.progressBarCurrentPage})]})}),i.jsx(Pr,{ref:m,...(se=e==null?void 0:e.progressBarPageTexts)==null?void 0:se.base,...(Ue=e==null?void 0:e.progressBarPageTexts)==null?void 0:Ue.total,sx:[{minWidth:"unset"},...Array.isArray((je=($e=e==null?void 0:e.progressBarPageTexts)==null?void 0:$e.base)==null?void 0:je.sx)?(Le=(Te=(Pe=e==null?void 0:e.progressBarPageTexts)==null?void 0:Pe.base)==null?void 0:Te.sx)!=null?Le:[]:[(at=(me=e==null?void 0:e.progressBarPageTexts)==null?void 0:me.base)==null?void 0:at.sx],...Array.isArray((Je=(Ze=e==null?void 0:e.progressBarPageTexts)==null?void 0:Ze.total)==null?void 0:Je.sx)?(Ie=(K=(pe=e==null?void 0:e.progressBarPageTexts)==null?void 0:pe.total)==null?void 0:K.sx)!=null?Ie:[]:[(Me=(Fe=e==null?void 0:e.progressBarPageTexts)==null?void 0:Fe.total)==null?void 0:Me.sx]],onClick:()=>V.openPage("next","ltr",!1),children:d})]})})},as=l.memo(li),di=({direction:e,...t})=>{const{settings:{customThemes:r,appTheme:s,themeMode:n,shouldUsePureBlackMode:a}}=Vr(),o=l.useMemo(()=>Ts(n,Es(s,r),a,e),[n,s,r,a,e]);return i.jsx(ws,{value:As[e],children:i.jsx(_s,{theme:o,children:i.jsx(G,{...t,dir:e})})})},os=he(di,[()=>({direction:D.useGetThemeDirection()})],["direction"]),cs=l.memo(({pageName:e,progressBarPosition:t,slotProps:r,children:s})=>{var n;return i.jsx($,{...r==null?void 0:r.tooltip,title:e,placement:kr[t],disableTouchListener:!0,children:i.jsx(G,{...r==null?void 0:r.box,sx:{width:"100%",height:"100%",...(n=r==null?void 0:r.box)==null?void 0:n.sx},children:s})})}),ui=l.memo(({pageName:e,primaryPageLoadState:t,secondaryPageLoadState:r,progressBarPosition:s,isCurrentPage:n,isLeadingPage:a,showDraggingStyle:o})=>{const c=it();return i.jsx(cs,{pageName:e,progressBarPosition:s,slotProps:{box:{sx:{cursor:"pointer",backgroundColor:ur(c.palette.background.paper,.2),...c.applyStyles("dark",{backgroundColor:gr(c.palette.background.paper,.1)}),...v(t&&(r==null||r),{backgroundColor:ur(c.palette.background.paper,.35),...c.applyStyles("dark",{backgroundColor:gr(c.palette.background.paper,.25)})})}},tooltip:{slotProps:n?{tooltip:{sx:{backgroundColor:"primary.main",color:"primary.contrastText"}}}:void 0}},children:i.jsx(G,{sx:{width:"100%",height:"100%",...v(a,{backgroundColor:st(c.palette.primary.main,.5)}),...v(n,{cursor:o?"grabbing":"grab",pointer:"grabbing",borderRadius:2,backgroundColor:"primary.dark",...c.applyStyles("dark",{backgroundColor:"primary.light"})})}})})}),gi=({readerNavBarWidth:e,readerDirection:t})=>{const r=it(),s=ht(E=>E.scrollbar),n=Ke(E=>E.pages.totalPages),{progressBarType:a,progressBarSize:o,progressBarPosition:c,progressBarPositionAutoVertical:d}=J(E=>({progressBarType:E.settings.progressBarType,progressBarSize:E.settings.progressBarSize,progressBarPosition:E.settings.progressBarPosition,progressBarPositionAutoVertical:E.settings.progressBarPositionAutoVertical})),{isMaximized:h,setIsMaximized:p,isDragging:u}=Ut(E=>({isMaximized:E.progressBar.isMaximized,setIsMaximized:E.progressBar.setIsMaximized,isDragging:E.progressBar.isDragging})),[,g]=l.useState({});We(window.document.documentElement,l.useCallback(()=>g({}),[]));const x=es(c,d,s.ySize,e+s.xSize),{isBottom:f,isLeft:S,isRight:P,isVertical:m,isHorizontal:R}=Ce(x),w=!!n,T=a===er.HIDDEN,I=!h&&!u;return i.jsx(os,{children:i.jsx(as,{direction:R?t:"ltr",progressBarPosition:x,fullSegmentClicks:!0,createProgressBarSlot:l.useCallback((E,b,A,_,j,N,y,M,z)=>i.jsx(ui,{pageName:E.name,primaryPageLoadState:A,secondaryPageLoadState:_,progressBarPosition:x,isCurrentPage:j,isLeadingPage:N,showDraggingStyle:z}),[x]),slotProps:{container:{sx:{overflow:"hidden",transition:"all 0.".concat(r.transitions.duration.shortest,"s"),...v(R,{minHeight:"100px",...v(r.direction==="ltr",{left:t==="ltr"?e:s.ySize,right:t==="rtl"?e:s.ySize}),...v(r.direction==="rtl",{left:t==="rtl"?e:s.ySize,right:t==="ltr"?e:s.ySize})}),...v(m,{minWidth:"100px",bottom:"".concat(s.xSize,"px")}),...v(f,{bottom:"".concat(s.xSize,"px")}),...v(S,{...v(r.direction==="ltr",{left:t==="ltr"?e:"unset",right:t==="rtl"?e:"unset"}),...v(r.direction==="rtl",{right:t==="rtl"?s.ySize:"unset",left:t==="ltr"?s.ySize:"unset"})}),...v(P,{...v(r.direction==="ltr",{right:t==="ltr"?s.ySize:"unset",left:t==="rtl"?s.ySize:"unset"}),...v(r.direction==="rtl",{left:t==="rtl"?e:"unset",right:t==="ltr"?e:"unset"})}),...v(I,{opacity:T?0:.85}),...v(!w,{pointerEvents:"none"})},onMouseEnter:()=>p(!0),onMouseLeave:()=>p(!1)},progressBarRoot:{sx:{gap:0,transition:"all 0.1s ease-in-out",backgroundColor:"background.paper",...v(m,{flexDirection:"column",height:"100%"}),...v(I,{backgroundColor:"unset",pointerEvents:"none",...v(R,{px:2}),...v(m,{py:2}),...v(f,{pb:.25}),...v(S,{...v(r.direction==="ltr",{pl:t==="ltr"?.25:0,pr:t==="rtl"?.25:0}),...v(r.direction==="rtl",{pr:t==="rtl"?.25:0,pl:t==="ltr"?.25:0})}),...v(P,{...v(r.direction==="ltr",{pr:t==="ltr"?.25:0,pl:t==="rtl"?.25:0}),...v(r.direction==="rtl",{pl:t==="rtl"?.25:0,pr:t==="ltr"?.25:0})})})}},progressBarSlotsContainer:{sx:{gap:.25,borderRadius:2,transition:"height 0.1s ease-in-out",...v(R,{height:"20px"}),...v(m,{flexDirection:"column",width:"20px"}),...v(I,{...v(R,{height:"".concat(o,"px")}),...v(m,{width:"".concat(o,"px")})})}},progressBarReadPages:{sx:{display:"none"}},progressBarCurrentPageSlot:{sx:{display:"none"}},progressBarPageTexts:{base:{sx:{px:1,py:1.5,transition:"all 0.1s ease-in-out",...v(I,{transform:"scale(0)",p:0,minWidth:0,maxWidth:0,minHeight:0,maxHeight:0})}}}}})})},hi=he(l.memo(gi),[Ye,()=>({readerDirection:D.useGetThemeDirection()})],["readerNavBarWidth","readerDirection"]),pi=qe(B)({width:"400px",minWidth:"400px",maxWidth:"400px",height:"100vh",overflowY:"auto"}),fi=l.memo(({mangaId:e,mangaTitle:t,chapterTitle:r,scanlator:s})=>i.jsxs(B,{children:[i.jsx($,{title:t,placement:"right",children:i.jsx(Pt,{lines:3,variant:"h6",component:"h1",sx:{textAlign:"center"},children:i.jsx(yt,{component:zt,to:ir.manga.path(e),sx:{textDecoration:"none",color:"inherit"},children:t})})}),i.jsx($,{title:r,placement:"right",children:i.jsx(Pt,{lines:4,variant:"body1",component:"h2",sx:{textAlign:"center"},children:r})}),s&&i.jsx($,{title:s,placement:"right",children:i.jsx(Pt,{lines:4,variant:"body2",component:"h3",color:"textDisabled",sx:{textAlign:"center"},children:s})})]})),xi=Ae(i.jsx("path",{d:"M15.41 16.59 10.83 12l4.58-4.59L14 6l-6 6 6 6z"})),mi=Ae(i.jsx("path",{d:"M8.59 16.59 13.17 12 8.59 7.41 10 6l6 6-6 6z"})),Ht=({title:e,type:t,disabled:r,...s})=>i.jsx($,{title:e,disabled:r,children:i.jsx(is,{sx:{flexBasis:"15%"},variant:"contained",disabled:r,...s,children:t==="previous"?i.jsx(xi,{}):i.jsx(mi,{})})}),vi=()=>{const{i18n:e,_:t}=F(),r=zr(),{currentPageIndex:s,pages:n}=Ke(d=>({currentPageIndex:d.pages.currentPageIndex,pages:d.pages.pages})),a=J(d=>d.settings.readingDirection.value),o=l.useMemo(()=>De(s,n),[s,n]),c=bt[a];return i.jsxs(B,{sx:{flexDirection:"row",gap:1},dir:"ltr",children:[i.jsx(Ht,{type:"previous",title:r(e._({id:"aHKcKc"}),e._({id:"/dqduX"}),c),disabled:r(!o.primary.index,le(o)===le(n.slice(-1)[0]),c),onClick:()=>V.openPage("previous",void 0,!1)}),i.jsxs(Wr,{sx:{flexBasis:"70%",flexGrow:0,flexShrink:0},children:[i.jsx(Ur,{id:"reader-nav-bar-desktop-page-select",children:e._({id:"6WdDG7"})}),i.jsx(ns,{labelId:"reader-nav-bar-desktop-page-select",label:e._({id:"6WdDG7"}),value:le(o),onChange:d=>V.openPage(d.target.value,void 0,!1),children:n.map(d=>i.jsx(Tt,{value:le(d),children:d.name},le(d)))})]}),i.jsx(Ht,{type:"next",title:r(e._({id:"/dqduX"}),e._({id:"aHKcKc"}),c),disabled:r(le(o)===le(n.slice(-1)[0]),!o.primary.index,c),onClick:()=>V.openPage("next",void 0,!1)})]})},Si=l.memo(vi),Ci=()=>{},ls=({currentChapterId:e,chapters:t,style:r})=>{const s=l.useMemo(()=>e===void 0?0:t.findIndex(n=>n.id===e),[e,t]);return i.jsx(Dn,{style:{height:"calc(".concat(t.length," * 100px)"),...r},initialTopMostItemIndex:s,totalCount:t.length,computeItemKey:n=>t[n].id,itemContent:n=>i.jsx(jn,{index:n,chapters:t,isSortDesc:!0,mode:"reader",showChapterNumber:!1,selected:null,onSelect:Ci,selectable:!1,isActiveChapter:n===s}),increaseViewportBy:400})},Ri=({currentChapterId:e,currentChapterName:t,currentChapterNumber:r,previousChapter:s,nextChapter:n,chapters:a=[],readerThemeDirection:o})=>{const{i18n:c,_:d}=F(),h=Bt({variant:"popover",popupId:"reader-nav-bar-desktop-chapter-list"});return l.useLayoutEffect(()=>{h.close()},[e]),i.jsxs(B,{sx:{flexDirection:"row",gap:1},dir:"ltr",children:[i.jsx(Ht,{type:"previous",title:Y(c._({id:"S9gT2s"}),c._({id:"05zAhA"}),o),onClick:()=>{V.openChapter(Y("previous","next",o))},disabled:Y(!s,!n,o)}),i.jsxs(Wr,{sx:{flexBasis:"70%",flexGrow:0,flexShrink:0},children:[i.jsx(Ur,{id:"reader-nav-bar-desktop-chapter-select",children:c._({id:"QIei5D"})}),i.jsx(ns,{...Nt(h),open:h.isOpen,value:e!=null?e:0,MenuProps:{sx:{visibility:"hidden"}},label:c._({id:"QIei5D"}),labelId:"reader-nav-bar-desktop-chapter-select",children:i.jsx(Tt,{value:e!=null?e:0,children:r!==void 0?"#".concat(r," ").concat(t):""},e)})]}),i.jsx(Ht,{component:zt,type:"next",title:Y(c._({id:"05zAhA"}),c._({id:"S9gT2s"}),o),onClick:()=>{V.openChapter(Y("next","previous",o))},disabled:Y(!n,!s,o)}),i.jsx(Is,{...Ms(h),anchorOrigin:{vertical:"bottom",horizontal:"left"},children:i.jsx(G,{sx:{mb:1},children:i.jsx(ls,{style:{width:"500px",maxWidth:"90vw",minHeight:"150px",maxHeight:"300px"},currentChapterId:e,chapters:a})})})]})},bi=he(l.memo(Ri),[()=>({readerThemeDirection:D.useGetThemeDirection()})],["readerThemeDirection"]),Pi=Ae(i.jsx("path",{d:"M17 4h3c1.1 0 2 .9 2 2v2h-2V6h-3zM4 8V6h3V4H4c-1.1 0-2 .9-2 2v2zm16 8v2h-3v2h3c1.1 0 2-.9 2-2v-2zM7 18H4v-2H2v2c0 1.1.9 2 2 2h3zM18 8H6v8h12z"})),ds=(e,t,r)=>{const n=(e+1)%t.length===0;if(!(r&&n))return t[(e+1)%t.length]},dr=({tooltip:e,value:t,defaultValue:r,values:s,setValue:n,valueToDisplayData:a,isDefaultable:o,onDefault:c,defaultIcon:d})=>{const{i18n:h,_:p}=F(),u=t===void 0,g=l.useMemo(()=>u?-1:s.indexOf(t),[t,s]);return i.jsx($,{title:e,children:u?i.jsx(nt,{onClick:()=>n(s[0]),sx:{justifyContent:"start",textTransform:"unset",flexGrow:1},variant:"contained",startIcon:d,size:"large",children:r===void 0?h._({id:"ovBPCi"}):i.jsx(rn,{superscript:"(".concat(h._({id:"ovBPCi"}),")"),text:a[r].isTitleString?a[r].title:h._(a[r].title)})}):i.jsx(nt,{onClick:()=>{const x=ds(g,s,o);if(x===void 0){c==null||c();return}n(x)},sx:{justifyContent:"start",textTransform:"unset",flexGrow:1},variant:"contained",startIcon:a[t].icon,size:"large",children:a[t].isTitleString?a[t].title:h._(a[t].title)})})},Ti=({pageScaleMode:e,shouldStretchPage:t,updateSetting:r,...s})=>{const{i18n:n,_:a}=F();return i.jsxs(B,{sx:{flexDirection:"row",gap:1},children:[i.jsx(dr,{...s,tooltip:n._({id:"h1Kv7C"}),value:e.isDefault?void 0:e.value,defaultValue:e.isDefault?e.value:void 0,values:$r,setValue:o=>r("pageScaleMode",o),valueToDisplayData:hr,defaultIcon:hr[e.value].icon}),Os[e.value]&&i.jsx($,{title:n._({id:"RrbZW2"}),children:i.jsx(is,{onClick:()=>r("shouldStretchPage",!t.value),sx:{px:void 0},variant:"contained",color:t.value?"secondary":"primary",children:i.jsx(Pi,{})})})]})},Ei=({readingMode:e,setReadingMode:t,...r})=>{const{i18n:s,_:n}=F();return i.jsx(dr,{...r,tooltip:s._({id:"n1QGhW"}),value:e.isDefault?void 0:e.value,defaultValue:e.isDefault?e.value:void 0,values:Fr,setValue:t,valueToDisplayData:tr,defaultIcon:tr[e.value].icon})},wi=()=>i.jsx(Ds,{children:i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",stroke:"currentColor",strokeWidth:"2",viewBox:"0 0 24 24",children:i.jsx("path",{d:"M2 4h6a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H2m20 0h-6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h6M2 12h20m-3-3 3 3-3 3M5 9l-3 3 3 3"})})}),Ai=({readingMode:e,shouldOffsetDoubleSpreads:t,setShouldOffsetDoubleSpreads:r})=>{const{i18n:s,_:n}=F();return sn(e)?i.jsx(nt,{sx:{justifyContent:"start",textTransform:"unset"},size:"large",onClick:()=>r(!t),color:t?"secondary":"primary",variant:"contained",startIcon:i.jsx(wi,{}),children:s._({id:"GSVtIx"})}):null},_i=({readingDirection:e,setReadingDirection:t,...r})=>{const{i18n:s,_:n}=F();return i.jsx(dr,{...r,tooltip:s._({id:"Ap8Ipr"}),value:e.isDefault?void 0:e.value,defaultValue:e.isDefault?e.value:void 0,values:Gr,setValue:t,valueToDisplayData:pr,defaultIcon:pr[e.value].icon})},Ii=Ae(i.jsx("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2m-1 14H9V8h2zm4 0h-2V8h2z"})),Mi=Ae(i.jsx("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2m-2 14.5v-9l6 4.5z"})),Oi=({autoScroll:e,setAutoScroll:t})=>{const{i18n:r,_:s}=F(),{isActive:n,toggleActive:a}=$t(c=>({isActive:c.autoScroll.isActive,toggleActive:c.autoScroll.toggleActive})),o=l.useRef(void 0);return i.jsxs(B,{sx:{flexDirection:"row",gap:1},children:[i.jsx(nt,{sx:{justifyContent:"start",textTransform:"unset",flexGrow:1},size:"large",onClick:a,color:n?"secondary":"primary",variant:"contained",startIcon:n?i.jsx(Ii,{}):i.jsx(Mi,{}),children:r._({id:"IFC5U2"})}),i.jsx(js,{value:e.value,type:"number",size:"small",onBlur:c=>{const d=ut(+c.target.value,Ne.min,Ne.max);d!==e.value&&(clearTimeout(o.current),t({...e,value:d},!0))},onChange:c=>{const d=ut(+c.target.value,Ne.min,Ne.max);t({...e,value:d},!1),clearTimeout(o.current),o.current=setTimeout(()=>t({...e,value:d},!0),Vt(1).seconds.inWholeMilliseconds)},slotProps:{input:{inputProps:Ne,endAdornment:i.jsx(Ls,{position:"end",children:r._({id:"QyVTg4",values:{0:e.value}})})}}})]})},Di=({openSettings:e})=>{const{i18n:t,_:r}=F(),{readingMode:s,shouldOffsetDoubleSpreads:n,pageScaleMode:a,shouldStretchPage:o,readingDirection:c,autoScroll:d}=J(h=>({readingMode:h.settings.readingMode,shouldOffsetDoubleSpreads:h.settings.shouldOffsetDoubleSpreads,pageScaleMode:h.settings.pageScaleMode,shouldStretchPage:h.settings.shouldStretchPage,readingDirection:h.settings.readingDirection,autoScroll:h.settings.autoScroll}));return i.jsxs(B,{sx:{gap:1},children:[i.jsx(Ei,{readingMode:s,setReadingMode:h=>D.updateSetting("readingMode",h),isDefaultable:!0,onDefault:()=>D.deleteSetting("readingMode")}),i.jsx(Ai,{readingMode:s.value,shouldOffsetDoubleSpreads:n.value,setShouldOffsetDoubleSpreads:h=>D.updateSetting("shouldOffsetDoubleSpreads",h)}),i.jsx(Ti,{pageScaleMode:a,shouldStretchPage:o,updateSetting:D.updateSetting,isDefaultable:!0,onDefault:()=>D.deleteSetting("pageScaleMode")}),i.jsx(_i,{readingDirection:c,setReadingDirection:h=>D.updateSetting("readingDirection",h),isDefaultable:!0,onDefault:()=>D.deleteSetting("readingDirection")}),i.jsx(Oi,{autoScroll:d,setAutoScroll:(...h)=>D.updateSetting("autoScroll",...h)}),i.jsx(nt,{onClick:()=>e(),size:"large",sx:{justifyContent:"start",textTransform:"none"},variant:"contained",startIcon:i.jsx(Xr,{}),children:t._({id:"Tz0i8g"})})]})},ji=l.memo(Di),Li=Ae(i.jsx("path",{d:"M12 5V1L7 6l5 5V7c3.31 0 6 2.69 6 6s-2.69 6-6 6-6-2.69-6-6H4c0 4.42 3.58 8 8 8s8-3.58 8-8-3.58-8-8-8"})),Tr={...lr,title:"Fallback",inLibrary:!1},us=l.memo(()=>{const e=It(a=>a.manga),{inLibrary:t}=e!=null?e:Tr,{i18n:r,_:s}=F(),{updateLibraryState:n}=An(e!=null?e:Tr,!0);return i.jsx($,{title:t?r._({id:"mfwy3x"}):r._({id:"RsaYWP"}),children:i.jsx(ne,{onClick:n,color:"inherit",children:t?i.jsx(Hn,{}):i.jsx(_n,{})})})}),yi=Ae(i.jsx("path",{d:"M17 3H7c-1.1 0-1.99.9-1.99 2L5 21l7-3 7 3V5c0-1.1-.9-2-2-2m0 15-5-2.18L7 18V5h10z"})),Bi=({id:e,isBookmarked:t})=>{const{i18n:r,_:s}=F(),n=t?"unbookmark":"bookmark";return i.jsx($,{title:r._(sr[n].action.single),children:i.jsx(ne,{onClick:()=>He.performAction(n,[e],{}),color:"inherit",children:t?i.jsx(Ln,{}):i.jsx(yi,{})})})},gs=l.memo(Bi),Ni=({id:e=-1,isDownloaded:t})=>{const{i18n:r,_:s}=F(),n=He.useDownloadStatusFromCache(e),a=e===void 0;return e!==void 0&&t?i.jsx($,{title:r._(sr.delete.action.single),children:i.jsx(ne,{onClick:()=>He.performAction("delete",[e],{}),color:"inherit",children:i.jsx(Nn,{})})}):n?i.jsx(kn,{chapterId:n.chapter.id}):i.jsx($,{title:r._(sr.download.action.single),disabled:a,children:i.jsx(ne,{disabled:a,onClick:()=>He.performAction("download",[e],{}),color:"inherit",children:i.jsx(Bn,{})})})},ki=l.memo(()=>{const{id:e,isDownloaded:t,isBookmarked:r,realUrl:s}=Ve(u=>{var g,x,f,S,P,m,R,w;return{id:(x=(g=u.chapters.currentChapter)==null?void 0:g.id)!=null?x:Rt.id,isDownloaded:(S=(f=u.chapters.currentChapter)==null?void 0:f.isDownloaded)!=null?S:Rt.isDownloaded,isBookmarked:(m=(P=u.chapters.currentChapter)==null?void 0:P.isBookmarked)!=null?m:Rt.isBookmarked,realUrl:(w=(R=u.chapters.currentChapter)==null?void 0:R.realUrl)!=null?w:Rt.realUrl}}),{i18n:n,_:a}=F(),{pageLoadStates:o,setPageLoadStates:c,setRetryFailedPagesKeyPrefix:d}=Ke(u=>({pageLoadStates:u.pages.pageLoadStates,setPageLoadStates:u.pages.setPageLoadStates,setRetryFailedPagesKeyPrefix:u.pages.setRetryFailedPagesKeyPrefix})),h=l.useRef(0),p=l.useMemo(()=>o.some(u=>u.error),[o]);return i.jsxs(B,{sx:{flexDirection:"row",justifyContent:"center",gap:1},children:[i.jsx(us,{}),i.jsx(gs,{id:e,isBookmarked:r}),i.jsx($,{title:n._({id:"KJJKF7"}),disabled:!p,children:i.jsx(ne,{onClick:()=>{c(u=>u.map(g=>({url:g.url,loaded:g.loaded}))),d("".concat(h.current)),h.current=(h.current+1)%1e3},disabled:!p,color:"inherit",children:i.jsx(Li,{})})}),i.jsx(Ni,{id:e,isDownloaded:t}),i.jsx($,{title:n._({id:"ZdWg0V"}),disabled:!s,children:i.jsx(ne,{disabled:!s,href:s!=null?s:"",rel:"noreferrer",target:"_blank",color:"inherit",children:i.jsx(yn,{})})}),i.jsx($,{title:n._({id:"Xrk3+q"}),disabled:!s,children:i.jsx(ne,{disabled:!s,href:s?At.getWebviewUrl(s):"",rel:"noreferrer",target:"_blank",color:"inherit",children:i.jsx(Vn,{})})})]})}),Hi=({exit:e})=>{const{i18n:t,_:r}=F(),s=zr();return i.jsx($,{title:t._({id:"2mxCGH"}),children:i.jsx(ne,{sx:{marginRight:2},onClick:e,color:"inherit",children:s(i.jsx(ys,{}),i.jsx(Bs,{}))})})},hs=he(l.memo(Hi),[()=>({exit:D.useExit()})],["exit"]),Vi=(e,t)=>{const r=l.useRef(t),s=l.useRef(t);return s.current!==r.current&&!e&&(r.current=!1),s.current!==t&&(r.current=s.current,s.current=t),r.current},zi=({isVisible:e,openSettings:t,setReaderNavBarWidth:r})=>{const{i18n:s,_:n}=F(),a=It(w=>w.manga),{chapters:o,currentChapterId:c,currentChapterName:d,currentChapterNumber:h,currentChapterScanlator:p,previousChapter:u,nextChapter:g}=Ve(w=>{var T,I,E,b;return{chapters:w.chapters.chapters,currentChapterId:(T=w.chapters.currentChapter)==null?void 0:T.id,currentChapterName:(I=w.chapters.currentChapter)==null?void 0:I.name,currentChapterNumber:(E=w.chapters.currentChapter)==null?void 0:E.chapterNumber,currentChapterScanlator:(b=w.chapters.currentChapter)==null?void 0:b.scanlator,previousChapter:w.chapters.previousChapter,nextChapter:w.chapters.nextChapter}}),x=J(w=>w.settings.isStaticNav),[f,S]=l.useState();We(f,l.useCallback(()=>{x&&r(f.offsetWidth)},[f,x])),l.useLayoutEffect(()=>()=>r(0),[]);const R=Vi(e,x)&&e?0:void 0;return i.jsx(Ns,{variant:x?"permanent":"persistent",open:e||x,transitionDuration:R,SlideProps:{unmountOnExit:!0},PaperProps:{ref:w=>S(w)},children:i.jsxs(pi,{sx:{backgroundColor:"background.paper",pointerEvents:"all"},children:[i.jsxs(B,{sx:{p:2,gap:2,backgroundColor:"action.hover"},children:[i.jsxs(B,{sx:{flexDirection:"row",justifyContent:"space-between",alignItems:"center"},children:[i.jsx(hs,{}),i.jsx($,{title:s._({id:"JqpUAG"}),children:i.jsx(ne,{onClick:()=>{r(0),D.updateSetting("isStaticNav",!x)},color:x?"primary":"inherit",children:x?i.jsx(En,{}):i.jsx(wn,{})})})]}),a&&c!==void 0?i.jsxs(i.Fragment,{children:[i.jsx(fi,{mangaId:a.id,mangaTitle:a.title,chapterTitle:d!=null?d:"",scanlator:p}),i.jsx(ki,{})]}):i.jsx(Wt,{})]}),i.jsxs(B,{sx:{p:2,gap:2},children:[i.jsxs(B,{sx:{gap:1},children:[i.jsx(Si,{}),i.jsx(bi,{chapters:o,currentChapterId:c,currentChapterName:d,currentChapterNumber:h,nextChapter:g,previousChapter:u})]}),i.jsx(ks,{}),i.jsx(ji,{openSettings:t})]})]})})},Wi=he(l.memo(zi),[Ye],["setReaderNavBarWidth"]),Ui={...lr,title:""},$i=({isVisible:e,ref:t})=>{const{i18n:r,_:s}=F(),n=Bt({popupId:"reader-overlay-more-menu",variant:"popover"}),a=Ve(f=>f.chapters.currentChapter),o=It(f=>f.manga),c=ht(f=>f.scrollbar),{id:d,title:h}=o!=null?o:Ui,{id:p,name:u,realUrl:g,isBookmarked:x}=a!=null?a:Rt;return i.jsx(ar,{direction:"down",in:e,ref:t,children:i.jsxs(B,{sx:{flexDirection:"row",alignItems:"center",position:"fixed",top:0,left:0,right:"".concat(c.ySize,"px"),p:2,pt:f=>"max(env(safe-area-inset-top), ".concat(f.spacing(2),")"),backgroundColor:f=>st(f.palette.background.paper,.95),pointerEvents:"all",boxShadow:2},children:[i.jsx(hs,{}),i.jsx(B,{sx:{flexGrow:1},children:o&&a?i.jsxs(i.Fragment,{children:[i.jsx($,{title:h,children:i.jsx(Pt,{lines:1,component:"h1",variant:"h5",children:i.jsx(yt,{component:zt,to:ir.manga.path(d),sx:{textDecoration:"none",color:"inherit"},children:h})})}),i.jsx($,{title:u,children:i.jsx(Pt,{lines:1,children:u})})]}):i.jsx(Wt,{})}),i.jsx(us,{}),i.jsx(gs,{id:p,isBookmarked:x}),i.jsx(ne,{...Nt(n),color:"inherit",children:i.jsx(In,{})}),i.jsxs(Hs,{...Vs(n),children:[i.jsx(Tt,{component:yt,disabled:!g,href:g!=null?g:"",rel:"noreferrer",target:"_blank",children:r._({id:"ZdWg0V"})}),i.jsx(Tt,{component:yt,disabled:!g,href:g?At.getWebviewUrl(g):"",rel:"noreferrer",target:"_blank",children:r._({id:"Xrk3+q"})}),i.jsx(Tt,{disabled:!g,onClick:async()=>{await navigator.clipboard.writeText(h),Yr(r._({id:"FxVG/l"}),"info")},children:r._({id:"Z8lGw6"})})]})]})})},Fi=l.memo($i),Gi=Ae(i.jsx("path",{d:"m21.81 12.74-.82-.63v-.22l.8-.63c.16-.12.2-.34.1-.51l-.85-1.48c-.07-.13-.21-.2-.35-.2q-.075 0-.15.03l-.95.38c-.08-.05-.11-.07-.19-.11l-.15-1.01c-.03-.21-.2-.36-.4-.36h-1.71c-.2 0-.37.15-.4.34l-.14 1.01c-.03.02-.07.03-.1.05l-.09.06-.95-.38q-.075-.03-.15-.03c-.14 0-.27.07-.35.2l-.85 1.48c-.1.17-.06.39.1.51l.8.63v.23l-.8.63c-.16.12-.2.34-.1.51l.85 1.48c.07.13.21.2.35.2q.075 0 .15-.03l.95-.37c.08.05.12.07.2.11l.15 1.01c.03.2.2.34.4.34h1.71c.2 0 .37-.15.4-.34l.15-1.01c.03-.02.07-.03.1-.05l.09-.06.95.38q.075.03.15.03c.14 0 .27-.07.35-.2l.85-1.48c.1-.17.06-.39-.1-.51M18 13.5c-.83 0-1.5-.67-1.5-1.5s.67-1.5 1.5-1.5 1.5.67 1.5 1.5-.67 1.5-1.5 1.5M17 17h2v4c0 1.1-.9 2-2 2H7c-1.1 0-2-.9-2-2V3c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2v4h-2V6H7v12h10z"})),Xi=Ae(i.jsx("path",{d:"M4 10.5c-.83 0-1.5.67-1.5 1.5s.67 1.5 1.5 1.5 1.5-.67 1.5-1.5-.67-1.5-1.5-1.5m0-6c-.83 0-1.5.67-1.5 1.5S3.17 7.5 4 7.5 5.5 6.83 5.5 6 4.83 4.5 4 4.5m0 12c-.83 0-1.5.68-1.5 1.5s.68 1.5 1.5 1.5 1.5-.68 1.5-1.5-.67-1.5-1.5-1.5M7 19h14v-2H7zm0-6h14v-2H7zm0-8v2h14V5z"})),Er=Ae(i.jsx("path",{d:"M6 6h2v12H6zm3.5 6 8.5 6V6z"})),wr=Ae(i.jsx("path",{d:"m6 18 8.5-6L6 6zM16 6v12h2V6z"})),Yi={display:"flex",alignItems:"center",justifyContent:"end",position:"relative",backgroundColor:"background.default"},Ar="3px",qi=l.memo(({isTrailingPage:e,pagesIndex:t,totalPages:r,isVertical:s,isHorizontal:n})=>{const a="".concat(t/(r-1)*100,"%");return i.jsx(G,{sx:{position:"absolute",...v(s,{top:a,left:"50%"}),...v(n,{top:"50%",left:a}),transform:"translate(-50%, -50%)",width:Ar,height:Ar,borderRadius:100,backgroundColor:"background.paper",...v(e,{backgroundColor:"primary.main"}),zIndex:1}})}),Ki=l.memo(({pageName:e,isTrailingPage:t,isCurrentPage:r,pagesIndex:s,totalPages:n,isVertical:a,isHorizontal:o})=>i.jsx(cs,{pageName:e,progressBarPosition:Ct.BOTTOM,slotProps:{box:{sx:Yi}},children:!r&&i.jsx(qi,{isTrailingPage:t,pagesIndex:s,totalPages:n,isVertical:a,isHorizontal:o})})),Zi={[Ct.BOTTOM]:"up",[Ct.LEFT]:"right",[Ct.RIGHT]:"left",[Ct.AUTO]:"left"},Ji=({direction:e,topOffset:t=0,bottomOffset:r=0})=>{const s=ht(b=>b.scrollbar),n=or(b=>b.overlay.isVisible),{currentPageIndex:a,pages:o}=Ke(b=>({currentPageIndex:b.pages.currentPageIndex,pages:b.pages.pages})),{previousChapter:c,nextChapter:d}=Ve(b=>({previousChapter:b.chapters.previousChapter,nextChapter:b.chapters.nextChapter})),{progressBarPosition:h,progressBarPositionAutoVertical:p}=J(b=>({progressBarPosition:b.settings.progressBarPosition,progressBarPositionAutoVertical:b.settings.progressBarPositionAutoVertical})),{setIsMaximized:u,isDragging:g}=Ut(b=>({setIsMaximized:b.progressBar.setIsMaximized,isDragging:b.progressBar.isDragging})),[,x]=l.useState({});We(window.document.documentElement,l.useCallback(()=>x({}),[]));const f=es(h,p,t+r,s.xSize),{isLeft:S,isRight:P,isVertical:m,isHorizontal:R}=Ce(f),w=R?e:"ltr",T=l.useMemo(()=>De(a,o).pagesIndex,[a,o]),I=l.useMemo(()=>({container:{sx:{flexGrow:1,position:"relative",display:"flex",justifyItems:"center",alignItems:"stretch",backgroundColor:b=>st(b.palette.background.paper,.85),borderRadius:100,boxShadow:2}},progressBarRoot:{sx:{flexGrow:1,gap:0,...v(m,{flexDirection:"column"}),...v(R,{alignItems:"stretch"})}},progressBarSlotsActionArea:{sx:{alignItems:"center",cursor:"pointer",...v(m,{width:"100%",flexDirection:"column",px:2}),...v(R,{height:"100%",py:2})}},progressBarSlotsContainer:{sx:{borderRadius:100,backgroundColor:"background.default",...v(m,{flexDirection:"column",py:1}),...v(R,{px:1})}},progressBarSlot:{sx:{...v(m,{width:"20px"}),...v(R,{height:"20px"})}},progressBarCurrentPageSlot:{sx:{display:"flex",zIndex:1,cursor:"inherit",...v(m,{justifyContent:"center"}),...v(R,{alignItems:"center"})}},progressBarPageTexts:{base:{sx:{...v(m,{py:1}),...v(R,{px:1})}}}}),[m,R]),E=l.useMemo(()=>({progressBarCurrentPage:i.jsx(G,{sx:{position:"absolute",...v(m,{top:"calc(100% - 6px)",...v(T===0,{top:"0"}),width:"75%",height:"6px"}),...v(R,{left:"calc(100% - 0px)",...v(T===0,{left:"0"}),width:"6px",height:"75%"}),backgroundColor:"primary.main",borderRadius:100,cursor:g?"grabbing":"grab"}})}),[T,o.length,g,m,R]);return l.useLayoutEffect(()=>(u(n),()=>u(!1)),[n]),i.jsx(ar,{direction:Zi[f],in:n,children:i.jsx(os,{sx:{position:"relative",display:"flex",alignItems:"end",height:"100%",pointerEvents:"none",...v(S,{justifyContent:e==="ltr"?"start":"end"}),...v(P,{justifyContent:e==="ltr"?"end":"start"})},children:i.jsxs(B,{sx:{p:2,gap:1,pointerEvents:"all",alignItems:"center",...v(m,{height:"100%",flexDirection:"column"}),...v(R,{width:"100%",flexDirection:"row"})},children:[i.jsx(ne,{onClick:()=>V.openChapter("previous"),disabled:!c,sx:{backgroundColor:b=>st(b.palette.background.paper,.85),boxShadow:2},children:Y(i.jsx(Er,{sx:{...v(m,{transform:"rotate(90deg)"})}}),i.jsx(wr,{sx:{...v(m,{transform:"rotate(90deg)"})}}),w)}),i.jsx(as,{direction:w,progressBarPosition:f,fullSegmentClicks:!1,createProgressBarSlot:l.useCallback((b,A,_,j,N,y,M,z)=>i.jsx(Ki,{pageName:b.name,isTrailingPage:M,isCurrentPage:N,pagesIndex:A,totalPages:z,isVertical:m,isHorizontal:R}),[m,R]),slotProps:{...I,progressBarReadPages:{sx:{backgroundColor:"primary.main",...v(m,{width:"20px",height:"".concat(Math.max(0,De(a,o).pagesIndex)/(o.length-1)*100,"%"),borderRadius:"400px 400px 0 0"}),...v(R,{width:"".concat(Math.max(0,De(a,o).pagesIndex)/(o.length-1)*100,"%"),height:"20px",borderRadius:"400px 0 0 400px"})}}},slots:E}),i.jsx(ne,{onClick:()=>V.openChapter("next"),disabled:!d,sx:{backgroundColor:b=>st(b.palette.background.paper,.85),boxShadow:2},children:Y(i.jsx(wr,{sx:{...v(m,{transform:"rotate(90deg)"})}}),i.jsx(Er,{sx:{...v(m,{transform:"rotate(90deg)"})}}),w)})]})})})},Qi=he(l.memo(Ji),[()=>({direction:D.useGetThemeDirection()})],["direction"]),ea=()=>{const{i18n:e,_:t}=F(),{isActive:r,toggleActive:s}=$t(c=>({isActive:c.autoScroll.isActive,toggleActive:c.autoScroll.toggleActive})),{readingMode:n,readingDirection:a,autoScroll:o}=J(c=>({readingMode:c.settings.readingMode,readingDirection:c.settings.readingDirection,autoScroll:c.settings.autoScroll}));return i.jsxs(B,{sx:{gap:2},children:[i.jsx(nn,{}),i.jsx(an,{readingMode:n,setReadingMode:c=>D.updateSetting("readingMode",c),isDefaultable:!0,onDefault:()=>D.deleteSetting("readingMode")}),i.jsx(on,{readingDirection:a,setReadingDirection:c=>D.updateSetting("readingDirection",c),isDefaultable:!0,onDefault:()=>D.deleteSetting("readingDirection")}),i.jsx(zn,{label:e._({id:"IFC5U2"}),checked:r,onChange:()=>s()}),i.jsx(cn,{autoScroll:o,setAutoScroll:(...c)=>D.updateSetting("autoScroll",...c)})]})},ta=l.memo(ea),ra=({openSettings:e,isVisible:t,topOffset:r=0})=>{const{i18n:s,_:n}=F(),{currentChapterId:a,chapters:o}=Ve(x=>{var f;return{currentChapterId:(f=x.chapters.currentChapter)==null?void 0:f.id,chapters:x.chapters.chapters}}),c=Bt({variant:"dialog",popupId:"reader-chapter-list-dialog"}),d=Bt({variant:"dialog",popupId:"reader-quick-settings-dialog"}),h=ht(x=>x.scrollbar),[p,u]=l.useState(0),g=l.useRef(null);return We(g,l.useCallback(()=>{var x,f;return u((f=(x=g.current)==null?void 0:x.clientHeight)!=null?f:0)},[p])),l.useLayoutEffect(()=>{c.close()},[a]),i.jsxs(i.Fragment,{children:[i.jsxs(B,{sx:{position:"fixed",right:"".concat(h.ySize,"px"),bottom:0,left:0,height:"calc(100% - ".concat(r,"px)")},children:[i.jsx(Qi,{topOffset:r,bottomOffset:p}),i.jsx(ar,{direction:"up",in:t,children:i.jsx(B,{ref:g,sx:{alignItems:"center",backgroundColor:x=>st(x.palette.background.paper,.95),pb:"max(".concat(h.xSize,"px, env(safe-area-inset-bottom))"),boxShadow:2,pointerEvents:"all"},children:i.jsxs(B,{sx:{width:"50%",flexDirection:"row",p:2,gap:1,justifyContent:"space-evenly",alignItems:"center"},children:[i.jsx($,{title:s._({id:"S0FwRL"}),children:i.jsx(ne,{...Nt(c),color:"inherit",children:i.jsx(Xi,{})})}),i.jsx($,{title:s._({id:"iJSg+d"}),children:i.jsx(ne,{...Nt(d),color:"inherit",children:i.jsx(Gi,{})})}),i.jsx($,{title:s._({id:"Tz0i8g"}),children:i.jsx(ne,{onClick:e,color:"inherit",children:i.jsx(Xr,{})})})]})})})]}),c.isOpen&&i.jsx(Jt,{...fr(c),fullWidth:!0,maxWidth:"md",scroll:"paper",children:i.jsx(Qt,{sx:{p:0,pb:1},children:i.jsx(ls,{style:{minHeight:"15vh",maxHeight:"75vh"},currentChapterId:a,chapters:o})})}),d.isOpen&&i.jsx(Jt,{...fr(d),fullWidth:!0,maxWidth:"md",scroll:"paper",children:i.jsx(Qt,{children:i.jsx(ta,{})})})]})},sa=l.memo(ra),na=({isDesktop:e,isMobile:t})=>{const r=or(d=>d.overlay.isVisible),[s,n]=l.useState(!1),[a,o]=l.useState(0),c=l.useRef(null);return We(c,l.useCallback(()=>{var d,h;return o((h=(d=c.current)==null?void 0:d.clientHeight)!=null?h:0)},[t])),i.jsxs(G,{sx:{position:"absolute",width:"100%",height:"100%",pointerEvents:"none",zIndex:1},children:[e&&i.jsxs(i.Fragment,{children:[i.jsx(hi,{}),i.jsx(Wi,{isVisible:r,openSettings:()=>n(!0)})]}),t&&i.jsxs(i.Fragment,{children:[i.jsx(Fi,{ref:c,isVisible:r}),i.jsx(sa,{openSettings:()=>n(!0),isVisible:r,topOffset:a})]}),i.jsx(Xn,{isOpen:s,close:()=>n(!1)}),i.jsx(qn,{})]})},ia=he(l.memo(na),[D.useOverlayMode],["isDesktop","isMobile"]),_r="reader-tap-zone-layout-canvas",aa=({readerNavBarWidth:e})=>{const t=it(),{tapZoneLayout:r,tapZoneInvertMode:s,readingDirection:n}=J(x=>({tapZoneLayout:x.settings.tapZoneLayout.value,tapZoneInvertMode:x.settings.tapZoneInvertMode.value,readingDirection:x.settings.readingDirection.value})),a=cr(x=>x.tapZone.showPreview),[o,c]=l.useState(0),[d,h]=l.useState(0),[p,u]=l.useState(null);We(p,l.useCallback(()=>{var x,f;c((x=p==null?void 0:p.clientWidth)!=null?x:0),h((f=p==null?void 0:p.clientHeight)!=null?f:0)},[p]));const g=Se.getOrCreateCanvas(r,o,d,t.typography.h3,{vertical:s.vertical,horizontal:s.horizontal,isRTL:n===gt.RTL});return l.useLayoutEffect(()=>{const x=document.getElementById(_r);x==null||x.replaceChildren(g)},[g,a]),i.jsx(G,{ref:u,sx:{position:"fixed",top:0,left:e,right:0,bottom:0,pointerEvents:"none"},children:a&&i.jsx("div",{id:_r})})},oa=he(aa,[Ye],["readerNavBarWidth"]),ca=({readerNavBarWidth:e})=>{const{value:{red:t,green:r,blue:s,alpha:n,blendMode:a},enabled:o}=J(c=>c.settings.customFilter.rgba);return o?i.jsx(G,{sx:{position:"fixed",top:0,left:e,right:0,bottom:0,pointerEvents:"none",background:"rgba(".concat(t," ").concat(r," ").concat(s," / ").concat(n,"%)"),mixBlendMode:"".concat(a)}}):null},la=he(ca,[Ye],["readerNavBarWidth"]),Ir=2,vt=0,ee=0,te=1,da=(e,t=we.XY)=>{const[r,s]=l.useState(!1),n=l.useRef(void 0),a=l.useRef([0,0,0]),o=l.useRef([0,0,0]),c=l.useRef([0,0,0]),d=l.useRef([0,0]),h=l.useRef(void 0),p=l.useRef([0,0]),u=l.useRef([0,0]);return l.useEffect(()=>{const g=e==null?void 0:e.current;if(!g)return()=>{};const x=()=>{n.current||(n.current=getComputedStyle(g));const A=n.current.direction==="rtl",_=n.current.flexDirection==="row-reverse";return A||!A&&_},f=()=>(n.current||(n.current=getComputedStyle(g)),n.current.flexDirection==="column-reverse"),S=t!==we.Y,P=t!==we.X,m=()=>{h.current!==void 0&&(cancelAnimationFrame(h.current),h.current=void 0)},R=()=>{const A=(be,se,Ue)=>(be[vt]-be[Ir])/(se[vt]-se[Ir])*1e3/Ue,_=[S?A(a.current,c.current,g.clientWidth):0,P?A(o.current,c.current,g.clientHeight):0],j=S&&P?Math.sqrt(_[ee]**2+_[te]**2):Math.abs(P?_[te]:_[ee]),N=[_[ee]/j,_[te]/j],y=ut(1.2*j,-12,12),M=(Date.now()-c.current[vt])/1e3,z=y-14.278*M+75.24*M**2/y-149.72*M**3/y/y;if(!(y!==0&&z>0&&!Number.isNaN(y))){m();return}const ie=(be,se)=>be*se*(y*M-7.1397*M**2+25.08*M**3/y-37.43*M**4/y/y),ae=[ie(g.clientWidth,N[ee]),ie(g.clientHeight,N[te])],q=[g.scrollWidth-g.clientWidth,g.scrollHeight-g.clientHeight],k=[ut(d.current[ee]-ae[ee],x()?-q[ee]:0,q[ee]),ut(d.current[te]-ae[te],f()?-q[te]:0,q[te])],xe=k[ee]!==0||k[ee]!==q[ee],L=k[te]!==0||k[te]!==q[te];xe||L||m(),S&&(g.scrollLeft=k[ee]),P&&(g.scrollTop=k[te])};let w=!1;const T=A=>{if(w)return!0;const _=[g.clientHeight<g.scrollHeight,g.clientWidth<g.scrollWidth],j=[Math.abs(a.current[vt]-A.pageX)>0,Math.abs(o.current[vt]-A.pageY)>0];return _[ee]&&j[ee]||_[te]&&j[te]},I=A=>{T(A)&&(w=!0,s(!0),a.current=[...a.current.slice(1),A.pageX],o.current=[...o.current.slice(1),A.pageY],c.current=[...c.current.slice(1),Date.now()],S&&(g.scrollLeft=u.current[ee]-(A.pageX-p.current[ee])),P&&(g.scrollTop=u.current[te]-(A.pageY-p.current[te])))},E=()=>{g.removeEventListener("mousemove",I),g.removeEventListener("mouseup",E),setTimeout(()=>{w=!1,s(!1)},0),d.current=[g.scrollLeft,g.scrollTop];const A=()=>{R(),h.current=requestAnimationFrame(A)};h.current=requestAnimationFrame(A)},b=A=>{A.button===0&&(A.preventDefault(),p.current=[A.pageX,A.pageY],u.current=[g.scrollLeft,g.scrollTop],a.current=[A.pageX,A.pageX,A.pageX],o.current=[A.pageY,A.pageY,A.pageY],c.current=[Date.now()-2,Date.now()-1,Date.now()],g.addEventListener("mousemove",I,{passive:!0}),g.addEventListener("mouseup",E),m())};return g.addEventListener("mousedown",b),g.addEventListener("wheel",m,{passive:!0}),()=>{g.removeEventListener("mousedown",b),g.removeEventListener("wheel",m),m()}},[e,t]),r},ua=(e,t,r,s,n)=>{l.useEffect(()=>{if(e&&!n){r();return}s()},[e,t,n])},ga=(e,t,r,s)=>{l.useEffect(()=>{var a,o;const n=()=>{e&&ke().setIsVisible(!1),t&&r(!1)};return(a=s.current)==null||a.addEventListener("wheel",n,{passive:!0}),(o=s.current)==null||o.addEventListener("touchmove",n,{passive:!0}),()=>{var c,d;(c=s.current)==null||c.removeEventListener("wheel",n),(d=s.current)==null||d.removeEventListener("touchmove",n)}},[e,t])},ha=(e,t,r)=>{l.useEffect(()=>{const s=r.current;if(e!==W.CONTINUOUS_HORIZONTAL)return()=>{};if(!s)return()=>{};const n=a=>{if(!(Math.abs(a.deltaX)>Math.abs(a.deltaY)||zs.isTrackPadLike())){if(a.preventDefault(),a.shiftKey){s.scrollBy({top:a.deltaY});return}s.scrollBy({left:t===gt.LTR?a.deltaY:a.deltaY*-1})}};return s.addEventListener("wheel",n),()=>s.removeEventListener("wheel",n)},[e,t])},pa=e=>{const t=l.useRef(void 0);l.useEffect(()=>{const r=n=>{const a=e.current;a&&(a.style.cursor=n?"default":"none")},s=()=>{r(!0),clearTimeout(t.current),t.current=setTimeout(()=>{r(!1)},Vt(5).seconds.inWholeMilliseconds)};return s(),window.addEventListener("mousemove",s,{passive:!0}),()=>{r(!0),window.removeEventListener("mousemove",s),clearTimeout(t.current)}},[])},fa=(e,t,r,s,n)=>{l.useLayoutEffect(()=>{var a;t||(a=n.current)==null||a.scrollTo(ln(n.current,r,s),0)},[e])},xa=(e,t,r,s,n,a,o,c,d)=>{l.useLayoutEffect(()=>{if(e==null)return;const h=De(e,t);if(a){const g=o.current[h.pagesIndex];g==null||g.scrollIntoView({block:"start",inline:dn(c,d)})}const p=le(h),u=p===r-1;s(null),n(p,!u,u)},[e])},ma=(e,t,r,s,n,a,o)=>{const[c,d]=l.useState(o===W.DOUBLE_PAGE);l.useLayoutEffect(()=>{if(c&&o!==W.DOUBLE_PAGE){d(!1);const u=ts(r);s(u),n(u.map(({primary:{url:g}})=>({url:g,isSpread:!1})));return}o===W.DOUBLE_PAGE&&(c||a(le(De(e,t))),s(t),d(o===W.DOUBLE_PAGE))},[t,o])},Kt=({title:e,name:t,scanlator:r,backgroundColor:s})=>{const n=it(),a=n.palette.getContrastText(Us(n.palette,qr[s])),o=st(a,.5);return t?i.jsxs(B,{children:[i.jsx(rt,{color:a,children:e}),i.jsx(rt,{color:a,variant:"h6",component:"h1",children:t}),r&&i.jsx(rt,{variant:"body2",color:o,children:r})]}):null},va=({type:e,currentChapterName:t,currentChapterScanlator:r,previousChapterName:s,previousChapterScanlator:n,nextChapterName:a,nextChapterScanlator:o,readerNavBarWidth:c,handleBack:d})=>{var A;const{i18n:h,_:p}=F(),u=It(_=>_.manga),g=ht(_=>_.scrollbar),x=Ke(_=>_.pages.transitionPageMode),{readingMode:f,backgroundColor:S,shouldShowTransitionPage:P}=J(_=>({readingMode:_.settings.readingMode.value,backgroundColor:_.settings.backgroundColor,shouldShowTransitionPage:_.settings.shouldShowTransitionPage})),m=e===de.PREVIOUS,R=e===de.NEXT,w=!!t&&!s,T=!!t&&!a,I=w&&e===de.PREVIOUS,E=T&&e===de.NEXT;return!P&&!(I||E)||!un(e,x,f)?null:i.jsx(B,{sx:{justifyContent:"center",alignItems:"center",...v(!ge(f),{width:"100%",height:"100%"}),...v(ge(f),{position:"sticky",...v(ze(f),{left:0,maxWidth:"calc(100vw - ".concat(g.ySize,"px - ").concat(c,"px)"),minHeight:"calc(100vh - ".concat(g.xSize,"px)")}),...v(f===W.CONTINUOUS_HORIZONTAL,{top:0,minWidth:"calc(100vw - ".concat(g.ySize,"px - ").concat(c,"px)"),maxHeight:"calc(100vh - ".concat(g.xSize,"px)")})})},children:i.jsxs(B,{sx:{gap:2,maxWidth:_=>"calc(100vw - ".concat(g.ySize,"px - ").concat(c,"px - ").concat(_.spacing(2),")"),maxHeight:"calc(100vh - ".concat(g.xSize,"px)"),width:"max-content",p:1},children:[m&&w&&i.jsx(rt,{variant:"h6",children:h._({id:"eijoLF"})}),i.jsxs(B,{sx:{gap:5},children:[m&&!w&&i.jsx(Kt,{title:h._({id:"VHnO5x"}),name:s,scanlator:n,backgroundColor:S}),!!t&&i.jsx(Kt,{title:m?h._({id:"q/XX3T"}):h._({id:"A9r9ns"}),name:t,scanlator:r,backgroundColor:S}),R&&!T&&i.jsx(Kt,{title:h._({id:"3J7a7o"}),name:a,scanlator:o,backgroundColor:S})]}),R&&T&&i.jsx(rt,{variant:"h6",children:h._({id:"STQqww"})}),(m&&w||R&&T)&&i.jsxs(B,{sx:{flexDirection:"row",flexWrap:"wrap",gap:1},children:[i.jsx(nt,{sx:{flexGrow:1},onClick:_=>{_.stopPropagation(),d()},variant:"contained",children:h._({id:"+4RFej"})}),i.jsx(nt,{sx:{flexGrow:1},component:zt,onClick:_=>{_.stopPropagation()},variant:"contained",to:ir.manga.path((A=u==null?void 0:u.id)!=null?A:-1),children:h._({id:"+YP7mg"})})]})]})})},Mr=he(l.memo(va),[({chapterId:e})=>{const t=Ve(o=>o.chapters.chapters),r=l.useMemo(()=>t.findIndex(o=>o.id===e),[e,t]),s=t[r],n=l.useMemo(()=>t[r+1],[r,t]),a=l.useMemo(()=>t[r-1],[r,t]);return{currentChapterName:s==null?void 0:s.name,currentChapterScanlator:s==null?void 0:s.scanlator,previousChapterName:n==null?void 0:n.name,previousChapterScanlator:n==null?void 0:n.name,nextChapterName:a==null?void 0:a.name,nextChapterScanlator:a==null?void 0:a.scanlator}},Ye,({chapterId:e,type:t})=>{const r=Ws(),s=Ve(p=>p.chapters.chapters),n=l.useMemo(()=>s.findIndex(p=>p.id===e),[e,s]),a=n===0,o=n===s.length-1,c=t===de.PREVIOUS&&o,d=t===de.NEXT&&a;return{handleBack:c||d?r:Be}}],["currentChapterName","currentChapterScanlator","previousChapterName","previousChapterScanlator","nextChapterName","nextChapterScanlator","readerNavBarWidth","handleBack"]),Sa=(e,t,r,s,n,a,o,c,d,h,p,u,g,x,f,S,P,m)=>{var w,T;const R=l.useRef(void 0);l.useLayoutEffect(()=>{var N;const I=(N=t.data)==null?void 0:N.fetchChapterPages;if(!I)return;const{pages:E}=I,A=(E.length?E:[""]).map(y=>{var M;return $s.addParams(y,{sourceId:(M=_t().manga)==null?void 0:M.sourceId})}),_=gn(r,s!=null?s:0,A.length-1),j=R.current!==(I==null?void 0:I.pages);if(j){R.current=I.pages;const y=ts(A);d(!0),u(y),g(A),x(y.map(({primary:{url:M}})=>({url:M,loaded:!1}))),f(y.map(({primary:{url:M}})=>({url:M,isSpread:!1})))}else u(n),x(a),f(o);p(I.pages.length),g(A),S(_),P(_),h(y=>({...y,isCurrentChapterReady:c||j})),m(de.NONE)},[(T=(w=t.data)==null?void 0:w.fetchChapterPages)==null?void 0:T.pages,e])},Or=0,jt="-10px",Ca=(e,t,r)=>{if(!ge(t))return;const s=bt[r],n="0px ".concat(jt," 0px 0px"),a="0px 0px 0px ".concat(jt);return ze(t)?e==="first"?"0px 0px ".concat(jt," 0px"):"".concat(jt," 0px 0px 0px"):e==="first"?Y(n,a,s):Y(a,n,s)},Ra=(e,t,r,s)=>e===gt.LTR?{start:r>=s,end:t<0}:{start:t<0,end:r>=s},ba=(e,{top:t,right:r,bottom:s,left:n},a,o)=>{const c=window.innerWidth-o,d=window.innerHeight-a;return{[W.CONTINUOUS_VERTICAL]:{start:s>=d,end:t<0},[W.CONTINUOUS_HORIZONTAL]:Ra(e,n,r,c)}},Pa=({[W.CONTINUOUS_VERTICAL]:e,[W.CONTINUOUS_HORIZONTAL]:t},r)=>ze(r)?e.start||e.end:t.start||t.end,Ta=({[W.CONTINUOUS_VERTICAL]:e,[W.CONTINUOUS_HORIZONTAL]:t},r)=>ze(r)?e:t,Dr=(e,t,r,s,n,a,o)=>{const{readingMode:c,readingDirection:d,shouldUseInfiniteScroll:h,shouldShowTransitionPage:p}=J(u=>({readingMode:u.settings.readingMode.value,readingDirection:u.settings.readingDirection.value,shouldUseInfiniteScroll:u.settings.shouldUseInfiniteScroll,shouldShowTransitionPage:u.settings.shouldShowTransitionPage}));l.useEffect(()=>{const u=ge(c),g=ze(c);if(p||!o||!u||!h||!s||n||r===void 0)return()=>{};const x=()=>{const f=o.scrollLeft===0,S=o.scrollLeft===o.scrollWidth-o.clientWidth,P=o.scrollTop===0,m=o.scrollTop===o.scrollHeight-o.clientHeight;(e==="first"&&(g?P:f)||e==="last"&&(g?m:S))&&V.openChapter(r,void 0,!1)};return o.addEventListener("scroll",x,{passive:!0}),()=>o.removeEventListener("scroll",x)},[c,o,p,h,s,n,r]),Wn(a,l.useCallback(u=>{if(!h||!ge(c)||r===void 0||!p&&!n)return;const g=u[u.length-1],x=ba(d,g.target.getBoundingClientRect(),Cr().xSize,Cr().ySize),{start:f,end:S}=Ta(x,c),P=g.intersectionRatio<=Or;if(!Pa(x,c))return;const m=e==="first"&&f&&!n,R=e==="last"&&!s&&S;if(m||e==="last"&&S&&P){V.openChapter(r,!n,!1);return}R&&V.openChapter(t,!1,!1)},[e,t,r,s,n,c,d,h,p]),l.useMemo(()=>({root:o,threshold:[Or],rootMargin:Ca(e,c,d),ignoreInitialObserve:!0}),[e,c,d]))},Ea=({chapterId:e,previousChapterId:t,nextChapterId:r,isPreviousChapterVisible:s,isCurrentChapter:n,isNextChapterVisible:a,imageWrapper:o,scrollElement:c})=>(Dr("first",e,t,n,s,o,c),Dr("last",e,r,n,a,o,c),null),wa=l.memo(Ea),Aa=({currentPageIndex:e,setPages:t,setPageLoadStates:r,setTotalPages:s,setCurrentPageIndex:n,updateCurrentPageIndex:a,setPageToScrollToIndex:o,transitionPageMode:c,retryFailedPagesKeyPrefix:d,setTransitionPageMode:h,readingMode:p,readerWidth:u,pageScaleMode:g,shouldOffsetDoubleSpreads:x,readingDirection:f,imagePreLoadAmount:S,pageGap:P,chapterId:m,previousChapterId:R,nextChapterId:w,isPreviousChapterVisible:T,isNextChapterVisible:I,lastPageRead:E,isInitialChapter:b,isCurrentChapter:A,isPreviousChapter:_,isNextChapter:j,isLeadingChapter:N,isTrailingChapter:y,isPreloadMode:M,imageRefs:z,scrollIntoView:Re,resumeMode:ie,customFilter:ae,shouldStretchPage:q,readerNavBarWidth:k,onSizeChange:xe,minWidth:L,minHeight:_e,scrollElement:be})=>{const{i18n:se,_:Ue}=F(),{direction:$e}=it(),[je,Pe]=At.useGetChapterPagesFetch(m!=null?m:-1),[Te,Le]=l.useState(!1),[me,at]=l.useState(Dt.totalPages),[Ze,Je]=l.useState(Dt.pageUrls),[pe,K]=l.useState(Dt.pages),[Ie,Fe]=l.useState(Dt.pageLoadStates),[Me,C]=l.useState(Ie.map(({url:O})=>({url:O,isSpread:!1}))),X=l.useRef(null),oe=l.useRef(A),U=l.useRef(pe.map(()=>null)),ye=l.useRef(null),Ee=l.useMemo(()=>!!!me||!(me===Me.length)?pe:p===W.DOUBLE_PAGE?hn(Ze,Me,x,f):pe,[Me,p,x,f,me]),Mt=l.useMemo(()=>pn(p),[p]),Ge=f===gt.LTR,Qe=ge(p),Xe=!Qe&&!A||M,ot=!Qe&&A,pt=!Xe&&(ot||Qe&&(b||N)),Ft=!Xe&&(ot||Qe&&(b||y));oe.current=A,A&&(z.current=U.current);const ft=l.useCallback(()=>{m&&(Le(!1),je({variables:{input:{chapterId:m}}}).catch(dt("ReaderChapterViewer(".concat(m,")::fetchPages"))))},[je,m]),Gt=l.useMemo(()=>fn(Ee,C,O=>{oe.current&&r(O),Fe(O)},p),[Ee,p]),Ot=l.useMemo(()=>xn(O=>{oe.current&&r(O),Fe(O)}),[]);l.useEffect(()=>{ft()},[m]),We(X,l.useCallback(O=>{const{clientWidth:Oe,clientHeight:ct}=O[0].target;xe(Oe,ct,m)},[xe,X.current,m]));const ce=(O,Oe,ct,fs=!1)=>{(fs||!Te)&&Oe(O),A&&ct(O)};return Sa(A,Pe,ie,E,Ee,Ie,Me,Te,Le,O=>ce(O,Be,tt().setReaderStateChapters),O=>ce(O,at,s),O=>ce(O,K,t),O=>ce(O,Je,Be),O=>ce(O,Fe,r),O=>ce(O,C,Be),O=>ce(O,Be,n),O=>{(b&&!Te||Re)&&(o(O),tt().setReaderStateChapters(Oe=>({...Oe,visibleChapters:{...Oe.visibleChapters,scrollIntoView:!1,resumeMode:void 0}})))},O=>ce(O,Be,h)),ma(e,Ee,Ze,O=>ce(O,K,t,!0),O=>ce(O,C,Be,!0),O=>ce(O,Be,a),p),Qe||A||_||j?Pe.error?Xe?null:i.jsx(G,{sx:{minHeight:"100%",minWidth:"100%",display:"grid",placeItems:"center",position:"relative"},children:i.jsx(kt,{message:se._({id:"6m5aox"}),messageExtra:Kr(Pe.error),retry:()=>{ft()}})}):Pe.loading||!Te?Xe?null:i.jsx(G,{sx:{minHeight:"100%",minWidth:"100%",display:"grid",placeItems:"center"},children:i.jsx(Wt,{})}):m!=null&&!me?Xe?null:i.jsx(G,{sx:{minWidth:"100%",minHeight:"100%",position:"relative"},children:i.jsx(kt,{message:se._({id:"Oo/WWc"}),retry:ft})}):i.jsxs(B,{ref:X,sx:{width:"fit-content",height:"fit-content",margin:"auto",flexWrap:"nowrap",...v(p===W.CONTINUOUS_HORIZONTAL,{minHeight:_e}),...v(ze(p),{minWidth:L}),...v(Xe,{maxWidth:0,maxHeight:0,minWidth:"unset",minHeight:"unset",overflow:"hidden",margin:"unset"}),...v(ze(p)&&rs(u,g),{alignItems:"center"}),...v(p===W.CONTINUOUS_HORIZONTAL,{...v($e==="ltr",{flexDirection:Ge?"row":"row-reverse"}),...v($e==="rtl",{flexDirection:Ge?"row-reverse":"row"})})},children:[!M&&i.jsx(wa,{chapterId:m,previousChapterId:R,nextChapterId:w,isCurrentChapter:A,isPreviousChapterVisible:T,isNextChapterVisible:I,imageWrapper:ye.current,scrollElement:be}),pt&&i.jsx(Mr,{chapterId:m,type:de.PREVIOUS}),i.jsx(Mt,{ref:ye,totalPages:me,currentPageIndex:e,pages:Ee,transitionPageMode:c,pageLoadStates:Ie,retryFailedPagesKeyPrefix:d,imageRefs:U,onLoad:Gt,onError:Ot,isCurrentChapter:A,isPreviousChapter:_,isNextChapter:j,readingMode:p,imagePreLoadAmount:S,readingDirection:f,pageScaleMode:g,pageGap:P,customFilter:ae,shouldStretchPage:q,readerWidth:u,readerNavBarWidth:k,isPreloadMode:M,resumeMode:ie,handleAsInitialRender:Re}),Ft&&i.jsx(Mr,{chapterId:m,type:de.NEXT})]}):null},_a=l.memo(Aa),Ia=(e,t,r,s)=>{if(!ge(e))return!1;const n=mn(t),a=vn(t),o=r!==window.innerWidth,c=s!==window.innerHeight;return n&&o||a&&c},St=(e,t,r)=>{l.useLayoutEffect(()=>{r(t)},[e])},Ma=(e,t,r,s)=>{const n=l.useRef({width:window.innerWidth,height:window.innerHeight}),a=l.useRef(!1),o=l.useRef(void 0),c=l.useRef(null),d=l.useCallback(()=>{const{width:h,height:p}=n.current;n.current={width:window.innerWidth,height:window.innerHeight},a.current||(a.current=!0,c.current=s),Ia(e,t,h,p)&&(r(c.current),clearTimeout(o.current),o.current=setTimeout(()=>{a.current=!1,c.current=null},50))},[e,t,s]);Un("resize",d)},ps=e=>{const t=l.useRef({left:0,top:0,visibleElement:void 0,visibleElementLeft:0,visibleElementTop:0});return l.useEffect(()=>{const r=e.current;if(!r)return()=>{};const s=()=>{var a,o;const{visibleElement:n}=t.current;t.current={...t.current,left:r.scrollLeft,top:r.scrollTop,visibleElementLeft:(a=n==null?void 0:n.offsetLeft)!=null?a:0,visibleElementTop:(o=n==null?void 0:n.offsetTop)!=null?o:0}};return r.addEventListener("scroll",s,{passive:!0}),()=>r.removeEventListener("scroll",s)},[]),l.useEffect(()=>{const r=e.current;if(!r)return()=>{};const s=(o,c)=>Array.from(o).filter(d=>d instanceof HTMLElement).flatMap(d=>d instanceof HTMLImageElement?[d]:Array.from(d.querySelectorAll("img"))).forEach(c),n=new IntersectionObserver(o=>{const c=o.find(d=>d.isIntersecting);(c==null?void 0:c.target)instanceof HTMLElement&&(t.current={...t.current,visibleElement:c.target,visibleElementLeft:c.target.offsetLeft,visibleElementTop:c.target.offsetTop})}),a=new MutationObserver(o=>{for(const c of o)s(c.addedNodes,d=>n.observe(d)),s(c.removedNodes,d=>n.unobserve(d))});return a.observe(r,{childList:!0,subtree:!0}),()=>{a.disconnect(),n.disconnect()}},[]),t},Oa=(e,t)=>{const r=ps(e),s=ge(t),n=ze(t);l.useEffect(()=>{const a=e.current;if(!a||!s)return()=>{};const o=p=>{const{left:u,top:g,visibleElement:x,visibleElementLeft:f,visibleElementTop:S}=r.current;if(!x||!!!p.filter(T=>!(T.target instanceof HTMLElement)||!T.target.clientWidth&&!T.target.clientHeight?!1:n?T.target.offsetTop<g:Math.abs(T.target.offsetLeft)<Math.abs(u)).length)return;const R=u-f+x.offsetLeft,w=g-S+x.offsetTop;a.scrollTo(R,w)},c=(p,u)=>Array.from(p).filter(g=>g instanceof HTMLElement).flatMap(g=>g instanceof HTMLImageElement?[g]:Array.from(g.querySelectorAll("img"))).forEach(u),d=new ResizeObserver(o),h=new MutationObserver(p=>{for(const u of p)c(u.addedNodes,g=>d.observe(g)),c(u.removedNodes,g=>d.unobserve(g))});return h.observe(a,{childList:!0,subtree:!0}),()=>{h.disconnect(),d.disconnect()}},[s,n])},Da=(e,t,r,s,n,a,o)=>{const c=ps(e),d=()=>{const h=e.current,{left:p,top:u,visibleElementLeft:g,visibleElementTop:x,visibleElement:f}=c.current;if(!h||!o||!f)return!1;const S=ss(r,n,a),P=s===0;if(!(!S.previous&&P))return!1;const R=p-g+f.offsetLeft,w=u-x+f.offsetTop;return h.scrollTo(R,w),!0};l.useEffect(()=>{const h=e.current;if(!h||!o)return()=>{};let p=!1;const u=(f,S)=>{Array.from(f).filter(P=>P instanceof HTMLElement).flatMap(P=>P instanceof HTMLImageElement?[P]:Array.from(P.querySelectorAll("img"))).forEach(S)},g=new ResizeObserver(()=>{p||(p=d(),p&&g.disconnect())}),x=new MutationObserver(f=>{for(const S of f)u(S.addedNodes,P=>g.observe(P)),u(S.removedNodes,P=>g.unobserve(P))});return x.observe(h,{childList:!0,subtree:!0}),()=>{x.disconnect(),g.disconnect()}},[t]),l.useLayoutEffect(()=>{d()},[t])},ja=(e,t,r,s,n,a,o,c,d,h,p,u)=>{Da(e,t,r,s,n,a,ge(o)),Oa(e,o),Ma(o,h,d,s),St(c,s,d),St(o,s,d),St(h,s,d),St(p,s,d),St("".concat(u.value,"_").concat(u.enabled),s,d)},La={[W.SINGLE_PAGE]:mt.X,[W.DOUBLE_PAGE]:mt.X,[W.CONTINUOUS_VERTICAL]:mt.Y,[W.CONTINUOUS_HORIZONTAL]:mt.X,[W.WEBTOON]:mt.Y},ya=({readerNavBarWidth:e,updateCurrentPageIndex:t,ref:r})=>{var Me;const{direction:s}=it(),n=or(C=>C.overlay.isVisible),{currentPageIndex:a,pageToScrollToIndex:o,setPageToScrollToIndex:c,pages:d,totalPages:h,setPages:p,setPageLoadStates:u,setTotalPages:g,setCurrentPageIndex:x,transitionPageMode:f,retryFailedPagesKeyPrefix:S,setTransitionPageMode:P}=Ke(C=>({currentPageIndex:C.pages.currentPageIndex,pageToScrollToIndex:C.pages.pageToScrollToIndex,setPageToScrollToIndex:C.pages.setPageToScrollToIndex,pages:C.pages.pages,totalPages:C.pages.totalPages,setPages:C.pages.setPages,setPageLoadStates:C.pages.setPageLoadStates,setTotalPages:C.pages.setTotalPages,setCurrentPageIndex:C.pages.setCurrentPageIndex,transitionPageMode:C.pages.transitionPageMode,retryFailedPagesKeyPrefix:C.pages.retryFailedPagesKeyPrefix,setTransitionPageMode:C.pages.setTransitionPageMode})),{initialChapter:m,currentChapter:R,chapters:w,visibleChapters:T,isCurrentChapterReady:I}=Ve(C=>({initialChapter:C.chapters.initialChapter,currentChapter:C.chapters.currentChapter,chapters:C.chapters.chapters,visibleChapters:C.chapters.visibleChapters,setReaderStateChapters:C.chapters.setReaderStateChapters,isCurrentChapterReady:C.chapters.isCurrentChapterReady})),{readingMode:E,readingDirection:b,readerWidth:A,pageScaleMode:_,shouldOffsetDoubleSpreads:j,imagePreLoadAmount:N,pageGap:y,customFilter:M,shouldStretchPage:z,isStaticNav:Re}=J(C=>({readingMode:C.settings.readingMode.value,readingDirection:C.settings.readingDirection.value,readerWidth:C.settings.readerWidth.value,pageScaleMode:C.settings.pageScaleMode.value,shouldOffsetDoubleSpreads:C.settings.shouldOffsetDoubleSpreads.value,imagePreLoadAmount:C.settings.imagePreLoadAmount,pageGap:C.settings.pageGap.value,customFilter:C.settings.customFilter,shouldStretchPage:C.settings.shouldStretchPage.value,isStaticNav:C.settings.isStaticNav})),{showPreview:ie,setShowPreview:ae}=cr(C=>({showPreview:C.tapZone.showPreview,setShowPreview:C.tapZone.setShowPreview})),{resumeMode:q=xr.START}=(Me=Zr().state)!=null?Me:{resumeMode:xr.START},k=l.useRef(null),xe=$n(r,k),L=ze(E),_e=ge(E),be=da(k),se=$t(C=>({isPaused:C.autoScroll.isPaused,pause:C.autoScroll.pause,resume:C.autoScroll.resume,setScrollRef:C.autoScroll.setScrollRef}));l.useEffect(()=>se.setScrollRef(k.current),[]);const Ue=mr.useGetScrollbarSize("width",k.current),$e=mr.useGetScrollbarSize("height",k.current);l.useLayoutEffect(()=>{const{scrollbar:C}=_t();C.setXSize(Ue),C.setYSize($e)},[Ue,$e]);const je=l.useRef(d.map(()=>null)),[{minChapterViewWidth:Pe,minChapterViewHeight:Te,minChapterSizeSourceChapterId:Le},me]=l.useState({minChapterViewWidth:0,minChapterViewHeight:0,minChapterSizeSourceChapterId:-1}),[,at]=l.useState({}),Ze=La[E],Je=b===gt.LTR,pe=l.useMemo(()=>w.findIndex(C=>C.id===(m==null?void 0:m.id)),[w,m==null?void 0:m.id]),K=l.useMemo(()=>w.slice(Math.max(0,pe-T.trailing),Math.min(w.length,pe+T.leading+1)),[w,pe,T.trailing,T.leading]),Ie=l.useMemo(()=>K.findIndex(C=>C.id===(R==null?void 0:R.id)),[R,K]),Fe=l.useCallback((C,X,oe)=>{if(!_e)return;const U=oe===Le;if(L){if(!U&&Pe>=C)return;me({minChapterViewWidth:C,minChapterViewHeight:0,minChapterSizeSourceChapterId:oe});return}(U||Te<X)&&me({minChapterViewWidth:0,minChapterViewHeight:X,minChapterSizeSourceChapterId:oe})},[_e,L,Pe,Te,Le]);if(xa(o,d,h,c,t,_e,je,s,b),fa(a,_e,s,b,k),pa(k),ha(E,b,k),ga(n,ie,ae,k),ua(n,se.isPaused,se.pause,se.resume,Re),ja(k,R==null?void 0:R.id,Ie,a,K,T,E,b,c,_,z,A),l.useLayoutEffect(()=>{me({minChapterViewWidth:0,minChapterViewHeight:0,minChapterSizeSourceChapterId:-1}),at({})},[E]),!m||!R)throw new Error("ReaderViewer: illegal state - initialChapter and currentChapter should not be undefined");return i.jsx(B,{ref:xe,sx:{width:"100%",height:"100%",overflow:"auto",flexWrap:"nowrap",...v(L&&rs(A,_),{alignItems:"center"}),...v(!L,{...v(s==="ltr",{flexDirection:Je?"row":"row-reverse"}),...v(s==="rtl",{flexDirection:Je?"row-reverse":"row"})})},onClick:C=>!be&&V.handleClick(k.current,C),onScroll:()=>V.updateCurrentPageOnScroll(je,h-1,t,Ze,b),children:K.map((C,X)=>{var Xt,O,Oe,ct;const oe=Math.max(0,K.length-X-1),U=K[oe],ye=(Xt=K[oe+1])!=null?Xt:w[pe+T.leading+1],Ee=(O=K[oe-1])!=null?O:w[pe-T.trailing-1],Mt=U.id===m.id,Ge=U.id===R.id,Qe=U.id===((Oe=K[Ie+1])==null?void 0:Oe.id),Xe=U.id===((ct=K[Ie-1])==null?void 0:ct.id),ot=m.sourceOrder>U.sourceOrder,pt=m.sourceOrder<U.sourceOrder,Ft=T.lastLeadingChapterSourceOrder===U.sourceOrder,ft=T.lastTrailingChapterSourceOrder===U.sourceOrder,Gt=Ft&&T.isLeadingChapterPreloadMode||ft&&T.isTrailingChapterPreloadMode,Ot=ss(oe,K,T),ce=U.id===Le;return i.jsx(_a,{chapterId:U.id,previousChapterId:ye==null?void 0:ye.id,nextChapterId:Ee==null?void 0:Ee.id,isPreviousChapterVisible:Ot.previous,isNextChapterVisible:Ot.next,lastPageRead:ut(U.lastPageRead,0,U.pageCount-1),currentPageIndex:Cn(a,U,R,Ge,I,ot,pt,T),isInitialChapter:Mt,isCurrentChapter:Ge,isPreviousChapter:Qe,isNextChapter:Xe,isLeadingChapter:ot,isTrailingChapter:pt,isPreloadMode:Gt,imageRefs:je,setPages:p,setPageLoadStates:u,setTotalPages:g,setCurrentPageIndex:x,setPageToScrollToIndex:c,transitionPageMode:f,retryFailedPagesKeyPrefix:S,readingMode:E,readerWidth:A,pageScaleMode:_,shouldOffsetDoubleSpreads:j,readingDirection:b,updateCurrentPageIndex:Ge?t:Be,scrollIntoView:Ge&&T.scrollIntoView,resumeMode:Sn(Ge,Mt,ot,pt,T.resumeMode,q),setTransitionPageMode:P,pageGap:y,imagePreLoadAmount:N,customFilter:M,shouldStretchPage:z,readerNavBarWidth:e,onSizeChange:Fe,minWidth:ce?0:Pe,minHeight:ce?0:Te,scrollElement:k.current},U.id)})})},Ba=he(l.memo(ya),[()=>({updateCurrentPageIndex:V.useUpdateCurrentPageIndex()}),Ye],["readerNavBarWidth","updateCurrentPageIndex"]),Na=Object.fromEntries(Object.values(wt).map(e=>[e,{scopes:e}])),re=(...e)=>{const[t,r,s,n]=e;return Fs(t,r,{preventDefault:!0,...s,...Na.reader},n)},Zt=(e,t,r,s,n)=>{if(s){D.updateSetting(e,r[0]);return}const a=ds(r.indexOf(t),r,n);if(a===void 0){D.deleteSetting(e);return}D.updateSetting(e,a)},ka=({scrollElementRef:e})=>{const t=D.useGetThemeDirection(),{enableScope:r,disableScope:s}=Nr(),{hotkeys:n}=J(o=>({hotkeys:o.settings.hotkeys})),a=D.useExit();return re(n[Q.PREVIOUS_PAGE],()=>V.openPage("previous")),re(n[Q.NEXT_PAGE],()=>V.openPage("next")),re(n[Q.SCROLL_BACKWARD],()=>{const o=Lt(),{readingMode:c,readingDirection:d,scrollAmount:h}=Z();if(o.isActive){o.setDirection(ue.BACKWARD);return}e.current&&V.scroll(ue.BACKWARD,rr[c.value],c.value,d.value,e.current,Et().setShowPreview,h)}),re(n[Q.SCROLL_FORWARD],()=>{const o=Lt(),{readingMode:c,readingDirection:d,scrollAmount:h}=Z();if(o.isActive){o.setDirection(ue.FORWARD);return}e.current&&V.scroll(ue.FORWARD,rr[c.value],c.value,d.value,e.current,Et().setShowPreview,h)}),re(n[Q.PREVIOUS_CHAPTER],()=>V.openChapter(Y("previous","next",t)),[t]),re(n[Q.NEXT_CHAPTER],()=>V.openChapter(Y("next","previous",t)),[t]),re(n[Q.TOGGLE_MENU],()=>ke().setIsVisible(!ke().isVisible)),re(n[Q.CYCLE_SCALE_TYPE],()=>{Zt("pageScaleMode",Z().pageScaleMode.value,$r,Z().pageScaleMode.isDefault,!0)},[]),re(n[Q.STRETCH_IMAGE],()=>D.updateSetting("shouldStretchPage",!Z().shouldStretchPage.value)),re(n[Q.OFFSET_SPREAD_PAGES],()=>D.updateSetting("shouldOffsetDoubleSpreads",!Z().shouldOffsetDoubleSpreads.value)),re(n[Q.CYCLE_READING_MODE],()=>{Zt("readingMode",Z().readingMode.value,Fr,Z().readingMode.isDefault,!0)}),re(n[Q.CYCLE_READING_DIRECTION],()=>{Zt("readingDirection",Z().readingDirection.value,Gr,Z().readingDirection.isDefault,!0)}),re(n[Q.TOGGLE_AUTO_SCROLL],()=>Lt().toggleActive(),{}),re(n[Q.AUTO_SCROLL_SPEED_DECREASE],()=>D.updateSetting("autoScroll",{...Z().autoScroll,value:Math.min(Ne.max,Z().autoScroll.value+Ne.step)})),re(n[Q.AUTO_SCROLL_SPEED_INCREASE],()=>D.updateSetting("autoScroll",{...Z().autoScroll,value:Math.max(Ne.min,Z().autoScroll.value-Ne.step)})),re(n[Q.EXIT_READER],a,[a]),l.useEffect(()=>(r(wt.READER),()=>s(wt.READER)),[]),null},Ha=()=>{l.useEffect(()=>()=>{_t().reset()},[])},Va=(e,t,r,s,n,a)=>{var o;l.useEffect(()=>{var f;const c=(f=e.data)==null?void 0:f.manga;if(!c||t.loading||t.error)return;const d=Rr(c,r),h=Rn(c,d.shouldUseAutoWebtoonMode,d.readingMode),p={...r,readingMode:h?W.WEBTOON:r.readingMode},u=h?W.WEBTOON:d.readingMode.value,g=bn("global",{meta:s},p,void 0,u),x=Rr(c,g);n(x),a(!0)},[(o=e.data)==null?void 0:o.manga,r])},jr=Vt(5).seconds.inWholeMilliseconds,za=(e,t,r,s,n,a,o,c,d)=>{const{i18n:h,_:p}=F(),u=l.useRef(void 0),g=l.useRef(void 0),x=l.useRef(void 0),f=l.useRef(!0);l.useEffect(()=>{if(e||t||!r)return;const S=JSON.stringify(s)!==JSON.stringify(u.current);o&&S&&Yr(h._(tr[s.value].title),{autoHideDuration:jr}),u.current=s;const m=JSON.stringify(n)!==JSON.stringify(g.current)||JSON.stringify(a)!==JSON.stringify(x.current);c&&m&&(d(!0),f.current&&setTimeout(()=>d(!1),jr)),g.current=n,x.current=a,f.current=!1},[e,t,r,s.value,s.isDefault,n.value,n.isDefault,a.value,a.isDefault])},Wa=(e,t,r,s,n,a,o,c)=>{var g;const d=Gs(),h=Zr().state,{updateInitialChapter:p}=h!=null?h:{},u=p?void 0:s;l.useEffect(()=>{var I,E;const x=(I=e.data)==null?void 0:I.chapters.nodes,f=x?(E=x[x.length-t])!=null?E:null:void 0,S=u!=null?u:f,P=n!=null?n:f,m=(()=>{if(!x||!P)return[];const b=o?Mn(r!=null?r:x,c):x;return(a?He.removeDuplicates(P,b):b).map(_=>Jr(_.id))})(),R=f&&He.getNextChapter(f,m,{offset:lt.NEXT}),w=f&&He.getNextChapter(f,m,{offset:lt.PREVIOUS}),T=S!=null&&S.id!==(u==null?void 0:u.id);T&&d("",{replace:!0,state:{...h,updateInitialChapter:void 0}}),tt().setReaderStateChapters(b=>{var _,j,N,y;const A=(f==null?void 0:f.id)!==((_=b.currentChapter)==null?void 0:_.id);return{...b,mangaChapters:(j=b.mangaChapters)!=null?j:x,chapters:m,initialChapter:S,chapterForDuplicatesHandling:P,currentChapter:f,nextChapter:R,previousChapter:w,isCurrentChapterReady:A?!1:b.isCurrentChapterReady,visibleChapters:T?{...qt.chapters.visibleChapters,lastLeadingChapterSourceOrder:(N=S==null?void 0:S.sourceOrder)!=null?N:qt.chapters.visibleChapters.lastLeadingChapterSourceOrder,lastTrailingChapterSourceOrder:(y=S==null?void 0:S.sourceOrder)!=null?y:qt.chapters.visibleChapters.lastTrailingChapterSourceOrder,isLeadingChapterPreloadMode:!1,isTrailingChapterPreloadMode:!1,scrollIntoView:!!b.initialChapter}:b.visibleChapters}})},[(g=e.data)==null?void 0:g.chapters.nodes,t,a,o,u,c])},Ua=1,Lr=(e,t,r=!1,s=!1)=>{const n=Math.max(e*t,Ua),a=r?-n:n;return s?a*-1:a},yr=(e,t,r)=>e*(t/100)/r;function Br(e,t,r,s,n){if(n(),!e){r(setInterval(()=>{s(t)},t),"interval");return}let a;const o=c=>{const d=c-(a!=null?a:c);a=c,s(d),r(requestAnimationFrame(o),"animationFrame")};r(requestAnimationFrame(o),"animationFrame")}const $a=(e,t,r=we.Y,s=100,n=!1,a=!1)=>{const o=typeof e=="function",c=l.useRef(void 0),d=l.useRef(void 0),h=l.useRef(-1),[p,u]=l.useState(!1),[g,x]=l.useState(!1),[f,S]=l.useState({width:window.innerWidth,height:window.innerHeight});We(document.documentElement,l.useCallback(()=>{const E=window.innerWidth,b=window.innerHeight;(f.width!==E||f.height!==b)&&S({width:E,height:b})},[]));const P=l.useCallback(()=>{clearTimeout(d.current),cancelAnimationFrame(h.current)},[]),m=l.useCallback(()=>{u(!0)},[]),R=l.useCallback(()=>{u(!1),x(!1),P()},[]),w=l.useCallback(()=>{if(p){R();return}m()},[p]),T=l.useCallback(()=>{x(!0)},[]),I=l.useCallback(()=>{x(!1)},[]);return l.useEffect(()=>{if(!e||!p)return()=>{};if(g)return P(),()=>{};const E=t*1e3;if(o)return Br(!1,E,M=>{d.current=M},e,P),()=>P();const b=e.current;if(!b)return()=>{};c.current||(c.current=getComputedStyle(b));const A=c.current.direction==="rtl",_=r!==we.Y,j=r!==we.X,N=yr(window.innerWidth,s,E),y=yr(window.innerHeight,s,E);return Br(a,E,(M,z)=>{switch(z){case"interval":d.current=M;break;case"animationFrame":h.current=M;break;default:throw new Error('Unexpected "type" ('.concat(z,")"))}},M=>{b.scrollBy({top:Number(j)*Lr(y,M,!1,n),left:Number(_)*Lr(N,M,A,n),behavior:a?void 0:"smooth"})},P),()=>P()},[e,t,s,f,p,g,n,a]),l.useMemo(()=>({isActive:p,isPaused:g,start:m,cancel:R,toggleActive:w,pause:T,resume:I}),[p,g,m,R,w,T,I])},Fa=({themeDirection:e,combinedDirection:t})=>{const{scrollRef:r,direction:s}=$t(u=>({scrollRef:u.autoScroll.scrollRef,direction:u.autoScroll.direction})),{readingMode:n,autoScroll:a}=J(u=>({readingMode:u.settings.readingMode.value,autoScroll:u.settings.autoScroll})),c=n===W.CONTINUOUS_HORIZONTAL&&e!==t?Y(s===ue.BACKWARD,s===ue.FORWARD,t):s===ue.BACKWARD,d=ge(n),h=l.useCallback(()=>{V.openPage("next","ltr")},[]),p=$a(d?r:h,a.value,rr[n],Hr.MEDIUM,c,a.smooth);return l.useEffect(()=>{const u=Lt();u.setIsActive(p.isActive),u.setIsPaused(p.isPaused),u.setStart(p.start),u.setCancel(p.cancel),u.setToggleActive(p.toggleActive),u.setPause(p.pause),u.setResume(p.resume)},[p]),null},Ga=he(l.memo(Fa),[()=>({themeDirection:it().direction}),()=>({combinedDirection:D.useGetThemeDirection()})],["themeDirection","combinedDirection"]),Xa=({setOverride:e,readerNavBarWidth:t})=>{var q,k,xe;const{i18n:r,_:s}=F(),n=It(L=>L.manga),{mangaChapters:a,initialChapter:o,chapterForDuplicatesHandling:c,currentChapter:d}=Ve(L=>({mangaChapters:L.chapters.mangaChapters,initialChapter:L.chapters.initialChapter,chapterForDuplicatesHandling:L.chapters.chapterForDuplicatesHandling,currentChapter:L.chapters.currentChapter})),{shouldSkipDupChapters:h,shouldSkipFilteredChapters:p,backgroundColor:u,readingMode:g,tapZoneLayout:x,tapZoneInvertMode:f,shouldShowReadingModePreview:S,shouldShowTapZoneLayoutPreview:P,setSettings:m}=J(L=>({shouldSkipDupChapters:L.settings.shouldSkipDupChapters,shouldSkipFilteredChapters:L.settings.shouldSkipFilteredChapters,backgroundColor:L.settings.backgroundColor,readingMode:L.settings.readingMode,tapZoneLayout:L.settings.tapZoneLayout,tapZoneInvertMode:L.settings.tapZoneInvertMode,shouldShowReadingModePreview:L.settings.shouldShowReadingModePreview,shouldShowTapZoneLayoutPreview:L.settings.shouldShowTapZoneLayoutPreview,setSettings:L.settings.setSettings})),R=cr(L=>L.tapZone.setShowPreview),w=l.useRef(null),[T,I]=l.useState(!1),{chapterSourceOrder:E,mangaId:b}=Xs(),A=Number(E),_=Number(b),j=At.useGetManga(Ys,_),N=At.useGetMangaChapters(qs,_);Fn(!n||!d?r._({id:"H7O2dc",values:{mangaId:_,chapterSourceOrder:A}}):"".concat(n.title,": ").concat(d.name));const{metadata:y,settings:M,request:z}=Pn(),Re=On(n!=null?n:lr),ie=d===void 0||!T||j.loading||N.loading||z.loading,ae=(k=(q=j.error)!=null?q:N.error)!=null?k:z.error;return l.useEffect(()=>{var L;_t().setManga((L=j.data)==null?void 0:L.manga)},[(xe=j.data)==null?void 0:xe.manga]),Ha(),Va(j,z,M,y,m,I),za(ie,ae,T,g,x,f,S,P,R),Wa(N,A,a,o,c,h,p,Re),l.useLayoutEffect(()=>(e({status:!0,value:i.jsxs(G,{sx:{position:"absolute"},children:[i.jsx(ka,{scrollElementRef:w}),i.jsx(ia,{}),!w.current&&i.jsx(G,{onClick:()=>ke().setIsVisible(!ke().isVisible),sx:{position:"fixed",top:0,left:0,width:"100vw",height:"100vh",background:"transparent"}})]})}),()=>e({status:!1,value:null})),[w.current]),ae?i.jsx(kt,{message:r._({id:"6m5aox"}),messageExtra:Kr(ae),retry:()=>{j.error&&j.refetch().catch(dt("Reader::refetchManga")),z.error&&z.refetch().catch(dt("Reader::refetchDefaultSettings")),N.error&&N.refetch().catch(dt("Reader::refetchChapters"))}}):ie?i.jsx(G,{sx:{height:"100vh",width:"100vw",display:"grid",placeItems:"center"},children:i.jsx(Wt,{})}):d===null?i.jsx(kt,{message:r._({id:"aU8Fbq"})}):!n||!d?null:i.jsxs(G,{sx:{position:"relative",display:"flex",flexDirection:"column",minWidth:"calc(100vw - ".concat(t,"px)"),maxWidth:"calc(100vw - ".concat(t,"px)"),width:"calc(100vw - ".concat(t,"px)"),height:"100vh",marginLeft:"".concat(t,"px"),transition:L=>"width 0.".concat(L.transitions.duration.shortest,"s, margin-left 0.").concat(L.transitions.duration.shortest,"s"),overflow:"auto",backgroundColor:qr[u]},children:[i.jsx(Ba,{ref:w}),i.jsx(oa,{}),i.jsx(la,{}),i.jsx(Ga,{})]})},Bo=he(l.memo(Xa),[Ye],["setOverride","readerNavBarWidth"]);export{Bo as Reader};
