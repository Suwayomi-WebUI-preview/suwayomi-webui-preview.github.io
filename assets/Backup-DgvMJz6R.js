import{b as k,j as l,a1 as A,ae as fe,T as Ze,B as pe,I as yt,ax as St,aP as Ue,aQ as Mt,aR as Gt,aS as o,au as Kt,u as et,aK as Qe,p as Xe,aT as Ee,i as tt,k as st,n as ot,q as nt,S as Je,r as De,aU as mt,m as ce,e as qt,g as Ve,f as Yt,H as He,ay as Qt,aV as Xt,o as pt,A as ft,L as bt,N as Jt,az as Zt,as as gt}from"./index-06R0nN7p.js";import{f as ht}from"./file-selector-DlHkLoY8.js";import{P as es}from"./Progress-B7ENrstd.js";import{N as kt}from"./NumberSetting-Iil-hjP_.js";import{c as Ke,s as ye,a as ts,u as be,b as Ne,_ as S,d as ss,e as te,f as ue,g as os,P as ns,C as as,h as Ce,i as Te,j as ge,k as rs,l as is,m as ls,n as at,o as Fe,p as ve,q as cs,r as us,t as Pe,v as rt,w as ds,S as ms,x as it,y as lt,z as ps,A as ct,B as ze,D as ut,E as fs,F as Dt,G as bs,H as We,I as Pt,J as Ge,M as gs,K as Le,L as It,N as Vt,O as jt,Q as Nt,R as hs,T as Ft,U as ks,V as Cs,W as Ts,X as xs}from"./useMobilePicker-DxTgSTrE.js";import{E as ws}from"./EmptyViewAbsoluteCentered-CO60AXU9.js";import{u as vs}from"./useAppTitle-C-9g9cRu.js";import{C as ys}from"./CheckboxInput-BT6DlfVI.js";import{F as Ss}from"./FormGroup-CwSk1jco.js";import{u as Ct}from"./use-window-event-TtZqTA7m.js";import{u as Ms}from"./use-merged-ref-DytnVaFJ.js";import{L as Ds}from"./ListSubheader-DJfjhQv1.js";import"./Slider-DYUqMTkr.js";import"./Chip-DrQFiaVO.js";import"./Checkbox-BtkGh3kO.js";import"./SwitchBase-KYCGyawl.js";const qe=({adapter:e,value:s,timezone:n,props:t})=>{if(s===null)return null;const{minTime:a,maxTime:c,minutesStep:r,shouldDisableTime:u,disableIgnoringDatePartForTimeValidation:f=!1,disablePast:m,disableFuture:w}=t,i=e.date(void 0,n),g=Ke(f,e);switch(!0){case!e.isValid(s):return"invalidDate";case!!(a&&g(a,s)):return"minTime";case!!(c&&g(s,c)):return"maxTime";case!!(w&&e.isAfter(s,i)):return"disableFuture";case!!(m&&e.isBefore(s,i)):return"disablePast";case!!(u&&u(s,"hours")):return"shouldDisableTime-hours";case!!(u&&u(s,"minutes")):return"shouldDisableTime-minutes";case!!(u&&u(s,"seconds")):return"shouldDisableTime-seconds";case!!(r&&e.getMinutes(s)%r!==0):return"minutesStep";default:return null}};qe.valueManager=ye;function Ps(e={}){const{enableAccessibleFieldDOMStructure:s=!0,ampm:n}=e;return k.useMemo(()=>({valueType:"time",validator:qe,internal_valueManager:ye,internal_fieldValueManager:ts,internal_enableAccessibleFieldDOMStructure:s,internal_useApplyDefaultValuesToFieldInternalProps:Vs,internal_useOpenPickerButtonAriaLabel:Is(n)}),[n,s])}function Is(e){return function(n){const t=be(),a=Ne();return k.useMemo(()=>{const c=(e!=null?e:t.is12HourCycleInCurrentLocale())?"fullTime12h":"fullTime24h",r=t.isValid(n)?t.format(n,c):null;return a.openTimePickerDialogue(r)},[n,a,t])}}function Vs(e){const s=be(),n=Rt(e),t=k.useMemo(()=>{var a;return(a=e.ampm)!=null?a:s.is12HourCycleInCurrentLocale()},[e.ampm,s]);return k.useMemo(()=>{var a;return S({},e,n,{format:(a=e.format)!=null?a:t?s.formats.fullTime12h:s.formats.fullTime24h})},[e,n,t,s])}function Rt(e){return k.useMemo(()=>{var s,n;return{disablePast:(s=e.disablePast)!=null?s:!1,disableFuture:(n=e.disableFuture)!=null?n:!1}},[e.disablePast,e.disableFuture])}function js(e,s,n){const t=k.useRef(null),a=k.useRef(null),c=k.useCallback(r=>{r&&(a.current&&t.current&&a.current.removeEventListener(e,t.current,n),r.addEventListener(e,s,n),a.current=r,t.current=s)},[e,s,n]);return k.useEffect(()=>()=>{a.current&&t.current&&a.current.removeEventListener(e,t.current,n)},[e,n]),c}const Ns=e=>{const s=Ps(e);return ss({manager:s,props:e})},Fs=["slots","slotProps","InputProps","inputProps"],Ot=k.forwardRef(function(s,n){const t=te({props:s,name:"MuiTimeField"}),{slots:a,slotProps:c}=t,r=ue(t,Fs),u=os({slotProps:c,ref:n,externalForwardedProps:r}),f=Ns(u);return l.jsx(ns,{slots:a,slotProps:c,fieldResponse:f,defaultOpenPickerIcon:as})});function Rs(e){return Ce("MuiPickersToolbarText",e)}Te("MuiPickersToolbarText",["root"]);const Os=["className","classes","selected","value"],Ls=e=>ge({root:["root"]},Rs,e),Bs=A(Ze,{name:"MuiPickersToolbarText",slot:"Root"})(({theme:e})=>({transition:e.transitions.create("color"),color:(e.vars||e).palette.text.secondary,"&[data-selected]":{color:(e.vars||e).palette.text.primary}})),Lt=k.forwardRef(function(s,n){const t=te({props:s,name:"MuiPickersToolbarText"}),{className:a,classes:c,selected:r,value:u}=t,f=ue(t,Os),m=Ls(c);return l.jsx(Bs,S({ref:n,className:fe(m.root,a),component:"span",ownerState:t},r&&{"data-selected":!0},f,{children:u}))}),As=["align","className","classes","selected","typographyClassName","value","variant","width"],_s=e=>ge({root:["root"]},rs,e),Es=A(pe,{name:"MuiPickersToolbarButton",slot:"Root"})({padding:0,minWidth:16,textTransform:"none"}),Re=k.forwardRef(function(s,n){const t=te({props:s,name:"MuiPickersToolbarButton"}),{align:a,className:c,classes:r,selected:u,typographyClassName:f,value:m,variant:w,width:i}=t,g=ue(t,As),b=_s(r);return l.jsx(Es,S({variant:"text",ref:n,className:fe(b.root,c),ownerState:t},i?{sx:{width:i}}:{},g,{children:l.jsx(Lt,{align:a,className:f,variant:w,value:m,selected:u})}))});function Hs(e){return Ce("MuiTimePickerToolbar",e)}const Oe=Te("MuiTimePickerToolbar",["root","separator","hourMinuteLabel","hourMinuteLabelLandscape","hourMinuteLabelReverse","ampmSelection","ampmLandscape","ampmLabel"]),$s=["ampm","ampmInClock","className","classes"],Us=(e,s)=>{const{pickerOrientation:n,toolbarDirection:t}=s;return ge({root:["root"],separator:["separator"],hourMinuteLabel:["hourMinuteLabel",n==="landscape"&&"hourMinuteLabelLandscape",t==="rtl"&&"hourMinuteLabelReverse"],ampmSelection:["ampmSelection",n==="landscape"&&"ampmLandscape"],ampmLabel:["ampmLabel"]},Hs,e)},zs=A(cs,{name:"MuiTimePickerToolbar",slot:"Root"})({}),Ws=A(Lt,{name:"MuiTimePickerToolbar",slot:"Separator"})({outline:0,margin:"0 4px 0 2px",cursor:"default"}),Gs=A("div",{name:"MuiTimePickerToolbar",slot:"HourMinuteLabel",overridesResolver:(e,s)=>[{["&.".concat(Oe.hourMinuteLabelLandscape)]:s.hourMinuteLabelLandscape,["&.".concat(Oe.hourMinuteLabelReverse)]:s.hourMinuteLabelReverse},s.hourMinuteLabel]})({display:"flex",justifyContent:"flex-end",alignItems:"flex-end",variants:[{props:{toolbarDirection:"rtl"},style:{flexDirection:"row-reverse"}},{props:{pickerOrientation:"landscape"},style:{marginTop:"auto"}}]}),Ks=A("div",{name:"MuiTimePickerToolbar",slot:"AmPmSelection",overridesResolver:(e,s)=>[{[".".concat(Oe.ampmLabel)]:s.ampmLabel},{["&.".concat(Oe.ampmLandscape)]:s.ampmLandscape},s.ampmSelection]})({display:"flex",flexDirection:"column",marginRight:"auto",marginLeft:12,["& .".concat(Oe.ampmLabel)]:{fontSize:17},variants:[{props:{pickerOrientation:"landscape"},style:{margin:"4px 0 auto",flexDirection:"row",justifyContent:"space-around",flexBasis:"100%"}}]});function qs(e){const s=te({props:e,name:"MuiTimePickerToolbar"}),{ampm:n,ampmInClock:t,className:a,classes:c}=s,r=ue(s,$s),u=be(),f=Ne(),m=is(),w=Us(c,m),{value:i,setValue:g,disabled:b,readOnly:C,view:v,setView:M,views:P}=ls(),j=!!(n&&!t&&P.includes("hours")),{meridiemMode:F,handleMeridiemChange:O}=at(i,n,N=>g(N,{changeImportance:"set"})),R=N=>u.isValid(i)?u.format(i,N):"--",B=l.jsx(Ws,{tabIndex:-1,value:":",variant:"h3",selected:!1,className:w.separator});return l.jsxs(zs,S({landscapeDirection:"row",toolbarTitle:f.timePickerToolbarTitle,ownerState:m,className:fe(w.root,a)},r,{children:[l.jsxs(Gs,{className:w.hourMinuteLabel,ownerState:m,children:[Fe(P,"hours")&&l.jsx(Re,{tabIndex:-1,variant:"h3",onClick:()=>M("hours"),selected:v==="hours",value:R(n?"hours12h":"hours24h")}),Fe(P,["hours","minutes"])&&B,Fe(P,"minutes")&&l.jsx(Re,{tabIndex:-1,variant:"h3",onClick:()=>M("minutes"),selected:v==="minutes",value:R("minutes")}),Fe(P,["minutes","seconds"])&&B,Fe(P,"seconds")&&l.jsx(Re,{variant:"h3",onClick:()=>M("seconds"),selected:v==="seconds",value:R("seconds")})]}),j&&l.jsxs(Ks,{className:w.ampmSelection,ownerState:m,children:[l.jsx(Re,{disableRipple:!0,variant:"subtitle2",selected:F==="am",typographyClassName:w.ampmLabel,value:ve(u,"am"),onClick:C?void 0:()=>O("am"),disabled:b}),l.jsx(Re,{disableRipple:!0,variant:"subtitle2",selected:F==="pm",typographyClassName:w.ampmLabel,value:ve(u,"pm"),onClick:C?void 0:()=>O("pm"),disabled:b})]})]}))}function Bt(e,s){var u,f;const n=be(),t=te({props:e,name:s}),a=Rt(t),c=(u=t.ampm)!=null?u:n.is12HourCycleInCurrentLocale(),r=k.useMemo(()=>{var m;return((m=t.localeText)==null?void 0:m.toolbarTitle)==null?t.localeText:S({},t.localeText,{timePickerToolbarTitle:t.localeText.toolbarTitle})},[t.localeText]);return S({},t,a,{ampm:c,localeText:r},us({views:t.views,openTo:t.openTo,defaultViews:["hours","minutes"],defaultOpenTo:"hours"}),{slots:S({toolbar:qs},t.slots),slotProps:S({},t.slotProps,{toolbar:S({ampm:c,ampmInClock:t.ampmInClock},(f=t.slotProps)==null?void 0:f.toolbar)})})}function Ys(e){return Ce("MuiTimeClock",e)}Te("MuiTimeClock",["root","arrowSwitcher"]);const je=220,ke=36,Be={x:je/2,y:je/2},At={x:Be.x,y:0},Qs=At.x-Be.x,Xs=At.y-Be.y,Js=e=>e*(180/Math.PI),_t=(e,s,n)=>{const t=s-Be.x,a=n-Be.y,c=Math.atan2(Qs,Xs)-Math.atan2(t,a);let r=Js(c);r=Math.round(r/e)*e,r%=360;const u=Math.floor(r/e)||0,f=t**2+a**2,m=Math.sqrt(f);return{value:u,distance:m}},Zs=(e,s,n=1)=>{const t=n*6;let{value:a}=_t(t,e,s);return a=a*n%60,a},eo=(e,s,n)=>{const{value:t,distance:a}=_t(30,e,s);let c=t||12;return n?c%=12:a<je/2-ke&&(c+=12,c%=24),c};function to(e){return Ce("MuiClockPointer",e)}Te("MuiClockPointer",["root","thumb"]);const so=["className","classes","isBetweenTwoClockValues","isInner","type","viewValue"],oo=e=>ge({root:["root"],thumb:["thumb"]},to,e),no=A("div",{name:"MuiClockPointer",slot:"Root"})(({theme:e})=>({width:2,backgroundColor:(e.vars||e).palette.primary.main,position:"absolute",left:"calc(50% - 1px)",bottom:"50%",transformOrigin:"center bottom 0px",variants:[{props:{isClockPointerAnimated:!0},style:{transition:e.transitions.create(["transform","height"])}}]})),ao=A("div",{name:"MuiClockPointer",slot:"Thumb"})(({theme:e})=>({width:4,height:4,backgroundColor:(e.vars||e).palette.primary.contrastText,borderRadius:"50%",position:"absolute",top:-21,left:"calc(50% - ".concat(ke/2,"px)"),border:"".concat((ke-4)/2,"px solid ").concat((e.vars||e).palette.primary.main),boxSizing:"content-box",variants:[{props:{isClockPointerBetweenTwoValues:!1},style:{backgroundColor:(e.vars||e).palette.primary.main}}]}));function ro(e){const s=te({props:e,name:"MuiClockPointer"}),{className:n,classes:t,isBetweenTwoClockValues:a,isInner:c,type:r,viewValue:u}=s,f=ue(s,so),m=k.useRef(r);k.useEffect(()=>{m.current=r},[r]);const{ownerState:w}=Pe(),i=S({},w,{isClockPointerAnimated:m.current!==r,isClockPointerBetweenTwoValues:a}),g=oo(t),b=()=>{let v=360/(r==="hours"?12:60)*u;return r==="hours"&&u>12&&(v-=360),{height:Math.round((c?.26:.4)*je),transform:"rotateZ(".concat(v,"deg)")}};return l.jsx(no,S({style:b(),className:fe(g.root,n),ownerState:i},f,{children:l.jsx(ao,{ownerState:i,className:g.thumb})}))}function io(e){return Ce("MuiClock",e)}Te("MuiClock",["root","clock","wrapper","squareMask","pin","amButton","pmButton","meridiemText","selected"]);const lo=(e,s)=>{const n={root:["root"],clock:["clock"],wrapper:["wrapper"],squareMask:["squareMask"],pin:["pin"],amButton:["amButton",s.clockMeridiemMode==="am"&&"selected"],pmButton:["pmButton",s.clockMeridiemMode==="pm"&&"selected"],meridiemText:["meridiemText"]};return ge(n,io,e)},co=A("div",{name:"MuiClock",slot:"Root"})(({theme:e})=>({display:"flex",justifyContent:"center",alignItems:"center",margin:e.spacing(2)})),uo=A("div",{name:"MuiClock",slot:"Clock"})({backgroundColor:"rgba(0,0,0,.07)",borderRadius:"50%",height:220,width:220,flexShrink:0,position:"relative",pointerEvents:"none"}),mo=A("div",{name:"MuiClock",slot:"Wrapper"})({"&:focus":{outline:"none"}}),po=A("div",{name:"MuiClock",slot:"SquareMask"})({width:"100%",height:"100%",position:"absolute",pointerEvents:"auto",outline:0,touchAction:"none",userSelect:"none",variants:[{props:{isClockDisabled:!1},style:{"@media (pointer: fine)":{cursor:"pointer",borderRadius:"50%"},"&:active":{cursor:"move"}}}]}),fo=A("div",{name:"MuiClock",slot:"Pin"})(({theme:e})=>({width:6,height:6,borderRadius:"50%",backgroundColor:(e.vars||e).palette.primary.main,position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)"})),Et=(e,s)=>({zIndex:1,bottom:8,paddingLeft:4,paddingRight:4,width:ke,variants:[{props:{clockMeridiemMode:s},style:{backgroundColor:(e.vars||e).palette.primary.main,color:(e.vars||e).palette.primary.contrastText,"&:hover":{backgroundColor:(e.vars||e).palette.primary.light}}}]}),bo=A(yt,{name:"MuiClock",slot:"AmButton"})(({theme:e})=>S({},Et(e,"am"),{position:"absolute",left:8})),go=A(yt,{name:"MuiClock",slot:"PmButton"})(({theme:e})=>S({},Et(e,"pm"),{position:"absolute",right:8})),Tt=A(Ze,{name:"MuiClock",slot:"MeridiemText"})({overflow:"hidden",whiteSpace:"nowrap",textOverflow:"ellipsis"});function ho(e){const s=te({props:e,name:"MuiClock"}),{ampm:n,ampmInClock:t,autoFocus:a,children:c,value:r,handleMeridiemChange:u,isTimeDisabled:f,meridiemMode:m,minutesStep:w=1,onChange:i,selectedId:g,type:b,viewValue:C,viewRange:[v,M],disabled:P=!1,readOnly:j,className:F,classes:O}=s,R=be(),B=Ne(),{ownerState:N}=Pe(),U=S({},N,{isClockDisabled:P,clockMeridiemMode:m}),V=k.useRef(!1),x=lo(O,U),d=f(C,b),D=!n&&b==="hours"&&(C<1||C>12),I=(h,ie)=>{P||j||f(h,b)||i(h,ie)},L=(h,ie)=>{let{offsetX:z,offsetY:oe}=h;if(z===void 0){const ne=h.target.getBoundingClientRect();z=h.changedTouches[0].clientX-ne.left,oe=h.changedTouches[0].clientY-ne.top}const ee=b==="seconds"||b==="minutes"?Zs(z,oe,w):eo(z,oe,!!n);I(ee,ie)},Y=h=>{V.current=!0,L(h,"shallow")},se=h=>{V.current&&(L(h,"finish"),V.current=!1),h.preventDefault()},Se=h=>{h.buttons>0&&L(h.nativeEvent,"shallow")},de=h=>{V.current&&(V.current=!1),L(h.nativeEvent,"finish")},Z=b==="hours"?!1:C%5!==0,he=b==="minutes"?w:1,_=k.useRef(null);rt(()=>{a&&_.current.focus()},[a]);const H=h=>Math.max(v,Math.min(M,h)),q=h=>(h+(M+1))%(M+1),Q=h=>{if(!V.current)switch(h.key){case"Home":I(v,"partial"),h.preventDefault();break;case"End":I(M,"partial"),h.preventDefault();break;case"ArrowUp":I(q(C+he),"partial"),h.preventDefault();break;case"ArrowDown":I(q(C-he),"partial"),h.preventDefault();break;case"PageUp":I(H(C+5),"partial"),h.preventDefault();break;case"PageDown":I(H(C-5),"partial"),h.preventDefault();break;case"Enter":case" ":I(C,"finish"),h.preventDefault();break}};return l.jsxs(co,{className:fe(x.root,F),children:[l.jsxs(uo,{className:x.clock,children:[l.jsx(po,{onTouchMove:Y,onTouchStart:Y,onTouchEnd:se,onMouseUp:de,onMouseMove:Se,ownerState:U,className:x.squareMask}),!d&&l.jsxs(k.Fragment,{children:[l.jsx(fo,{className:x.pin}),r!=null&&l.jsx(ro,{type:b,viewValue:C,isInner:D,isBetweenTwoClockValues:Z})]}),l.jsx(mo,{"aria-activedescendant":g,"aria-label":B.clockLabelText(b,r==null?null:R.format(r,n?"fullTime12h":"fullTime24h")),ref:_,role:"listbox",onKeyDown:Q,tabIndex:0,className:x.wrapper,children:c})]}),n&&t&&l.jsxs(k.Fragment,{children:[l.jsx(bo,{onClick:j?void 0:()=>u("am"),disabled:P||m===null,ownerState:U,className:x.amButton,title:ve(R,"am"),children:l.jsx(Tt,{variant:"caption",className:x.meridiemText,children:ve(R,"am")})}),l.jsx(go,{disabled:P||m===null,onClick:j?void 0:()=>u("pm"),ownerState:U,className:x.pmButton,title:ve(R,"pm"),children:l.jsx(Tt,{variant:"caption",className:x.meridiemText,children:ve(R,"pm")})})]})]})}function ko(e){return Ce("MuiClockNumber",e)}const $e=Te("MuiClockNumber",["root","selected","disabled"]),Co=["className","classes","disabled","index","inner","label","selected"],To=(e,s)=>{const n={root:["root",s.isClockNumberSelected&&"selected",s.isClockNumberDisabled&&"disabled"]};return ge(n,ko,e)},xo=A("span",{name:"MuiClockNumber",slot:"Root",overridesResolver:(e,s)=>[s.root,{["&.".concat($e.disabled)]:s.disabled},{["&.".concat($e.selected)]:s.selected}]})(({theme:e})=>({height:ke,width:ke,position:"absolute",left:"calc((100% - ".concat(ke,"px) / 2)"),display:"inline-flex",justifyContent:"center",alignItems:"center",borderRadius:"50%",color:(e.vars||e).palette.text.primary,fontFamily:e.typography.fontFamily,"&:focused":{backgroundColor:(e.vars||e).palette.background.paper},["&.".concat($e.selected)]:{color:(e.vars||e).palette.primary.contrastText},["&.".concat($e.disabled)]:{pointerEvents:"none",color:(e.vars||e).palette.text.disabled},variants:[{props:{isClockNumberInInnerRing:!0},style:S({},e.typography.body2,{color:(e.vars||e).palette.text.secondary})}]}));function Ht(e){const s=te({props:e,name:"MuiClockNumber"}),{className:n,classes:t,disabled:a,index:c,inner:r,label:u,selected:f}=s,m=ue(s,Co),{ownerState:w}=Pe(),i=S({},w,{isClockNumberInInnerRing:r,isClockNumberSelected:f,isClockNumberDisabled:a}),g=To(t,i),b=c%12/12*Math.PI*2-Math.PI/2,C=(je-ke-2)/2*(r?.65:1),v=Math.round(Math.cos(b)*C),M=Math.round(Math.sin(b)*C);return l.jsx(xo,S({className:fe(g.root,n),"aria-disabled":a?!0:void 0,"aria-selected":f?!0:void 0,role:"option",style:{transform:"translate(".concat(v,"px, ").concat(M+(je-ke)/2,"px")},ownerState:i},m,{children:u}))}const wo=({ampm:e,value:s,getClockNumberText:n,isDisabled:t,selectedId:a,adapter:c})=>{const r=s?c.getHours(s):null,u=[],f=e?1:0,m=e?12:23,w=i=>r===null?!1:e?i===12?r===12||r===0:r===i||r-12===i:r===i;for(let i=f;i<=m;i+=1){let g=i.toString();i===0&&(g="00");const b=!e&&(i===0||i>12);g=c.formatNumber(g);const C=w(i);u.push(l.jsx(Ht,{id:C?a:void 0,index:i,inner:b,selected:C,disabled:t(i),label:g,"aria-label":n(g)},i))}return u},xt=({adapter:e,value:s,isDisabled:n,getClockNumberText:t,selectedId:a})=>{const c=e.formatNumber;return[[5,c("05")],[10,c("10")],[15,c("15")],[20,c("20")],[25,c("25")],[30,c("30")],[35,c("35")],[40,c("40")],[45,c("45")],[50,c("50")],[55,c("55")],[0,c("00")]].map(([r,u],f)=>{const m=r===s;return l.jsx(Ht,{label:u,id:m?a:void 0,index:f+1,inner:!1,disabled:n(r),selected:m,"aria-label":t(u)},r)})},dt=({value:e,referenceDate:s,adapter:n,props:t,timezone:a})=>{const c=k.useMemo(()=>ye.getInitialReferenceValue({value:e,adapter:n,props:t,referenceDate:s,granularity:ms.day,timezone:a,getTodayDate:()=>ds(n,a,"date")}),[s,a]);return e!=null?e:c},vo=["ampm","ampmInClock","autoFocus","slots","slotProps","value","defaultValue","referenceDate","disableIgnoringDatePartForTimeValidation","maxTime","minTime","disableFuture","disablePast","minutesStep","shouldDisableTime","showViewSwitcher","onChange","view","views","openTo","onViewChange","focusedView","onFocusedViewChange","className","classes","disabled","readOnly","timezone"],yo=e=>ge({root:["root"],arrowSwitcher:["arrowSwitcher"]},Ys,e),So=A(ut,{name:"MuiTimeClock",slot:"Root"})({display:"flex",flexDirection:"column",position:"relative"}),Mo=A(fs,{name:"MuiTimeClock",slot:"ArrowSwitcher"})({position:"absolute",right:12,top:15}),Do=["hours","minutes"],Po=k.forwardRef(function(s,n){const t=be(),a=te({props:s,name:"MuiTimeClock"}),{ampm:c=t.is12HourCycleInCurrentLocale(),ampmInClock:r=!1,autoFocus:u,slots:f,slotProps:m,value:w,defaultValue:i,referenceDate:g,disableIgnoringDatePartForTimeValidation:b=!1,maxTime:C,minTime:v,disableFuture:M,disablePast:P,minutesStep:j=1,shouldDisableTime:F,showViewSwitcher:O,onChange:R,view:B,views:N=Do,openTo:U,onViewChange:V,focusedView:x,onFocusedViewChange:d,className:D,classes:I,disabled:L,readOnly:Y,timezone:se}=a,Se=ue(a,vo),{value:de,handleValueChange:Z,timezone:he}=it({name:"TimeClock",timezone:se,value:w,defaultValue:i,referenceDate:g,onChange:R,valueManager:ye}),_=dt({value:de,referenceDate:g,adapter:t,props:a,timezone:he}),H=Ne(),q=lt(he),Q=ps(),{ownerState:h}=Pe(),{view:ie,setView:z,previousView:oe,nextView:ee,setValueAndGoToNextView:ne}=ct({view:B,views:N,openTo:U,onViewChange:V,onChange:Z,focusedView:x,onFocusedViewChange:d}),{meridiemMode:ae,handleMeridiemChange:re}=at(_,c,ne),me=k.useCallback((G,X)=>{const $=Ke(b,t),J=X==="hours"||X==="minutes"&&N.includes("seconds"),p=({start:y,end:E})=>!(v&&$(v,E)||C&&$(y,C)||M&&$(y,q)||P&&$(q,J?E:y)),T=(y,E=1)=>{if(y%E!==0)return!1;if(F)switch(X){case"hours":return!F(t.setHours(_,y),"hours");case"minutes":return!F(t.setMinutes(_,y),"minutes");case"seconds":return!F(t.setSeconds(_,y),"seconds");default:return!1}return!0};switch(X){case"hours":{const y=ze(G,ae,c),E=t.setHours(_,y);if(t.getHours(E)!==y)return!0;const K=t.setSeconds(t.setMinutes(E,0),0),Ie=t.setSeconds(t.setMinutes(E,59),59);return!p({start:K,end:Ie})||!T(y)}case"minutes":{const y=t.setMinutes(_,G),E=t.setSeconds(y,0),K=t.setSeconds(y,59);return!p({start:E,end:K})||!T(G,j)}case"seconds":{const y=t.setSeconds(_,G);return!p({start:y,end:y})||!T(G)}default:throw new Error("not supported")}},[c,_,b,C,ae,v,j,F,t,M,P,q,N]),xe=k.useMemo(()=>{switch(ie){case"hours":{const G=(J,p)=>{const T=ze(J,ae,c);ne(t.setHours(_,T),p,"hours")},X=t.getHours(_);let $;return c?X>12?$=[12,23]:$=[0,11]:$=[0,23],{onChange:G,viewValue:X,children:wo({value:de,adapter:t,ampm:c,getClockNumberText:H.hoursClockNumberText,isDisabled:J=>L||me(J,"hours"),selectedId:Q}),viewRange:$}}case"minutes":{const G=t.getMinutes(_);return{viewValue:G,onChange:($,J)=>{ne(t.setMinutes(_,$),J,"minutes")},children:xt({adapter:t,value:G,getClockNumberText:H.minutesClockNumberText,isDisabled:$=>L||me($,"minutes"),selectedId:Q}),viewRange:[0,59]}}case"seconds":{const G=t.getSeconds(_);return{viewValue:G,onChange:($,J)=>{ne(t.setSeconds(_,$),J,"seconds")},children:xt({adapter:t,value:G,getClockNumberText:H.secondsClockNumberText,isDisabled:$=>L||me($,"seconds"),selectedId:Q}),viewRange:[0,59]}}default:throw new Error("You must provide the type for ClockView")}},[ie,t,de,c,H.hoursClockNumberText,H.minutesClockNumberText,H.secondsClockNumberText,ae,ne,_,me,Q,L]),Me=yo(I);return l.jsxs(So,S({ref:n,className:fe(Me.root,D),ownerState:h},Se,{children:[l.jsx(ho,S({autoFocus:u!=null?u:!!x,ampmInClock:r&&N.includes("hours"),value:de,type:ie,ampm:c,minutesStep:j,isTimeDisabled:me,meridiemMode:ae,handleMeridiemChange:re,selectedId:Q,disabled:L,readOnly:Y},xe)),O&&l.jsx(Mo,{className:Me.arrowSwitcher,slots:f,slotProps:m,onGoToPrevious:()=>z(oe),isPreviousDisabled:!oe,previousLabel:H.openPreviousView,onGoToNext:()=>z(ee),isNextDisabled:!ee,nextLabel:H.openNextView,ownerState:h})]}))});function Io(e){return Ce("MuiDigitalClock",e)}Te("MuiDigitalClock",["root","list","item"]);const Vo=["ampm","timeStep","autoFocus","slots","slotProps","value","defaultValue","referenceDate","disableIgnoringDatePartForTimeValidation","maxTime","minTime","disableFuture","disablePast","minutesStep","shouldDisableTime","onChange","view","openTo","onViewChange","focusedView","onFocusedViewChange","className","classes","disabled","readOnly","views","skipDisabled","timezone"],jo=e=>ge({root:["root"],list:["list"],item:["item"]},Io,e),No=A(ut,{name:"MuiDigitalClock",slot:"Root"})({overflowY:"auto",width:"100%",scrollbarWidth:"thin","@media (prefers-reduced-motion: no-preference)":{scrollBehavior:"auto"},maxHeight:Pt,variants:[{props:{hasDigitalClockAlreadyBeenRendered:!0},style:{"@media (prefers-reduced-motion: no-preference)":{scrollBehavior:"smooth"}}}]}),Fo=A(Mt,{name:"MuiDigitalClock",slot:"List"})({padding:0}),Ro=A(St,{name:"MuiDigitalClock",slot:"Item",shouldForwardProp:e=>e!=="itemValue"&&e!=="formattedValue"})(({theme:e})=>({padding:"8px 16px",margin:"2px 4px","&:first-of-type":{marginTop:4},"&:hover":{backgroundColor:e.vars?"rgba(".concat(e.vars.palette.primary.mainChannel," / ").concat(e.vars.palette.action.hoverOpacity,")"):Ue(e.palette.primary.main,e.palette.action.hoverOpacity)},"&.Mui-selected":{backgroundColor:(e.vars||e).palette.primary.main,color:(e.vars||e).palette.primary.contrastText,"&:focus-visible, &:hover":{backgroundColor:(e.vars||e).palette.primary.dark}},"&.Mui-focusVisible":{backgroundColor:e.vars?"rgba(".concat(e.vars.palette.primary.mainChannel," / ").concat(e.vars.palette.action.focusOpacity,")"):Ue(e.palette.primary.main,e.palette.action.focusOpacity)}})),Oo=k.forwardRef(function(s,n){var J;const t=be(),a=k.useRef(null),c=Dt(n,a),r=k.useRef(null),u=te({props:s,name:"MuiDigitalClock"}),{ampm:f=t.is12HourCycleInCurrentLocale(),timeStep:m=30,autoFocus:w,slots:i,slotProps:g,value:b,defaultValue:C,referenceDate:v,disableIgnoringDatePartForTimeValidation:M=!1,maxTime:P,minTime:j,disableFuture:F,disablePast:O,minutesStep:R=1,shouldDisableTime:B,onChange:N,view:U,openTo:V,onViewChange:x,focusedView:d,onFocusedViewChange:D,className:I,classes:L,disabled:Y,readOnly:se,views:Se=["hours"],skipDisabled:de=!1,timezone:Z}=u,he=ue(u,Vo),{value:_,handleValueChange:H,timezone:q}=it({name:"DigitalClock",timezone:Z,value:b,defaultValue:C,referenceDate:v,onChange:N,valueManager:ye}),Q=Ne(),h=lt(q),{ownerState:ie}=Pe(),z=S({},ie,{hasDigitalClockAlreadyBeenRendered:!!a.current}),oe=jo(L),ee=(J=i==null?void 0:i.digitalClockItem)!=null?J:Ro,ne=bs({elementType:ee,externalSlotProps:g==null?void 0:g.digitalClockItem,ownerState:z,className:oe.item}),ae=dt({value:_,referenceDate:v,adapter:t,props:u,timezone:q}),re=We(p=>H(p,"finish","hours")),{setValueAndGoToNextView:me}=ct({view:U,views:Se,openTo:V,onViewChange:x,onChange:re,focusedView:d,onFocusedViewChange:D}),xe=We(p=>{me(p,"finish")});rt(()=>{if(a.current===null)return;const p=a.current.querySelector('[role="listbox"] [role="option"][tabindex="0"], [role="listbox"] [role="option"][aria-selected="true"]');if(!p)return;const T=p.offsetTop;(w||d)&&p.focus(),a.current.scrollTop=T-4});const Me=k.useCallback(p=>{const T=Ke(M,t),y=()=>!(j&&T(j,p)||P&&T(p,P)||F&&T(p,h)||O&&T(h,p)),E=()=>t.getMinutes(p)%R!==0?!1:B?!B(p,"hours"):!0;return!y()||!E()},[M,t,j,P,F,h,O,R,B]),G=k.useMemo(()=>{const p=[];let y=t.startOfDay(ae);for(;t.isSameDay(ae,y);)p.push(y),y=t.addMinutes(y,m);return p},[ae,m,t]),X=G.findIndex(p=>t.isEqual(p,ae)),$=p=>{switch(p.key){case"PageUp":{const T=Ge(r.current)-5,y=r.current.children,E=Math.max(0,T),K=y[E];K&&K.focus(),p.preventDefault();break}case"PageDown":{const T=Ge(r.current)+5,y=r.current.children,E=Math.min(y.length-1,T),K=y[E];K&&K.focus(),p.preventDefault();break}}};return l.jsx(No,S({ref:c,className:fe(oe.root,I),ownerState:z},he,{children:l.jsx(Fo,{ref:r,role:"listbox","aria-label":Q.timePickerToolbarTitle,className:oe.list,onKeyDown:$,children:G.map((p,T)=>{const y=Me(p);if(de&&y)return null;const E=t.isEqual(p,_),K=t.format(p,f?"fullTime12h":"fullTime24h"),W=X===T||X===-1&&T===0?0:-1;return l.jsx(ee,S({onClick:()=>!se&&xe(p),selected:E,disabled:Y||y,disableRipple:se,role:"option","aria-disabled":se,"aria-selected":E,tabIndex:W,itemValue:p,formattedValue:K},ne,{children:K}),"".concat(p.valueOf(),"-").concat(K))})})}))});function Lo(e){return Ce("MuiMultiSectionDigitalClock",e)}Te("MuiMultiSectionDigitalClock",["root"]);function Bo(e){return Ce("MuiMultiSectionDigitalClockSection",e)}Te("MuiMultiSectionDigitalClockSection",["root","item"]);const Ao=["autoFocus","onChange","className","classes","disabled","readOnly","items","active","slots","slotProps","skipDisabled"],_o=e=>ge({root:["root"],item:["item"]},Bo,e),Eo=A(Mt,{name:"MuiMultiSectionDigitalClockSection",slot:"Root"})(({theme:e})=>({maxHeight:Pt,width:56,padding:0,overflow:"hidden",scrollbarWidth:"thin","@media (prefers-reduced-motion: no-preference)":{scrollBehavior:"auto"},"@media (pointer: fine)":{"&:hover":{overflowY:"auto"}},"@media (pointer: none), (pointer: coarse)":{overflowY:"auto"},"&:not(:first-of-type)":{borderLeft:"1px solid ".concat((e.vars||e).palette.divider)},"&::after":{display:"block",content:'""',height:"calc(100% - 40px - 6px)"},variants:[{props:{hasDigitalClockAlreadyBeenRendered:!0},style:{"@media (prefers-reduced-motion: no-preference)":{scrollBehavior:"smooth"}}}]})),Ho=A(St,{name:"MuiMultiSectionDigitalClockSection",slot:"Item"})(({theme:e})=>({padding:8,margin:"2px 4px",width:gs,justifyContent:"center","&:first-of-type":{marginTop:4},"&:hover":{backgroundColor:e.vars?"rgba(".concat(e.vars.palette.primary.mainChannel," / ").concat(e.vars.palette.action.hoverOpacity,")"):Ue(e.palette.primary.main,e.palette.action.hoverOpacity)},"&.Mui-selected":{backgroundColor:(e.vars||e).palette.primary.main,color:(e.vars||e).palette.primary.contrastText,"&:focus-visible, &:hover":{backgroundColor:(e.vars||e).palette.primary.dark}},"&.Mui-focusVisible":{backgroundColor:e.vars?"rgba(".concat(e.vars.palette.primary.mainChannel," / ").concat(e.vars.palette.action.focusOpacity,")"):Ue(e.palette.primary.main,e.palette.action.focusOpacity)}})),$o=k.forwardRef(function(s,n){var V;const t=k.useRef(null),a=Dt(n,t),c=k.useRef(null),r=te({props:s,name:"MuiMultiSectionDigitalClockSection"}),{autoFocus:u,onChange:f,className:m,classes:w,disabled:i,readOnly:g,items:b,active:C,slots:v,slotProps:M,skipDisabled:P}=r,j=ue(r,Ao),{ownerState:F}=Pe(),O=S({},F,{hasDigitalClockAlreadyBeenRendered:!!t.current}),R=_o(w),B=(V=v==null?void 0:v.digitalClockSectionItem)!=null?V:Ho;rt(()=>{if(t.current===null)return;const x=t.current.querySelector('[role="option"][tabindex="0"], [role="option"][aria-selected="true"]');if(C&&u&&x&&x.focus(),!x||c.current===x)return;c.current=x;const d=x.offsetTop;t.current.scrollTop=d-4});const N=b.findIndex(x=>x.isFocused(x.value)),U=x=>{switch(x.key){case"PageUp":{const d=Ge(t.current)-5,D=t.current.children,I=Math.max(0,d),L=D[I];L&&L.focus(),x.preventDefault();break}case"PageDown":{const d=Ge(t.current)+5,D=t.current.children,I=Math.min(D.length-1,d),L=D[I];L&&L.focus(),x.preventDefault();break}}};return l.jsx(Eo,S({ref:a,className:fe(R.root,m),ownerState:O,autoFocusItem:u&&C,role:"listbox",onKeyDown:U},j,{children:b.map((x,d)=>{var se;const D=(se=x.isDisabled)==null?void 0:se.call(x,x.value),I=i||D;if(P&&I)return null;const L=x.isSelected(x.value),Y=N===d||N===-1&&d===0?0:-1;return l.jsx(B,S({onClick:()=>!g&&f(x.value),selected:L,disabled:I,disableRipple:g,role:"option","aria-disabled":g||I||void 0,"aria-label":x.ariaLabel,"aria-selected":L,tabIndex:Y,className:R.item},M==null?void 0:M.digitalClockSectionItem,{children:x.label}),x.label)})}))}),Uo=({now:e,value:s,adapter:n,ampm:t,isDisabled:a,resolveAriaLabel:c,timeStep:r,valueOrReferenceDate:u})=>{const f=s?n.getHours(s):null,m=[],w=(b,C)=>{const v=C!=null?C:f;return v===null?!1:t?b===12?v===12||v===0:v===b||v-12===b:v===b},i=b=>w(b,n.getHours(u)),g=t?11:23;for(let b=0;b<=g;b+=r){let C=n.format(n.setHours(e,b),t?"hours12h":"hours24h");const v=c(parseInt(C,10).toString());C=n.formatNumber(C),m.push({value:b,label:C,isSelected:w,isDisabled:a,isFocused:i,ariaLabel:v})}return m},wt=({value:e,adapter:s,isDisabled:n,timeStep:t,resolveLabel:a,resolveAriaLabel:c,hasValue:r=!0})=>{const u=m=>e===null?!1:r&&e===m,f=m=>e===m;return[...Array.from({length:Math.ceil(60/t)},(m,w)=>{const i=t*w;return{value:i,label:s.formatNumber(a(i)),isDisabled:n,isSelected:u,isFocused:f,ariaLabel:c(i.toString())}})]},zo=["ampm","timeSteps","autoFocus","slots","slotProps","value","defaultValue","referenceDate","disableIgnoringDatePartForTimeValidation","maxTime","minTime","disableFuture","disablePast","minutesStep","shouldDisableTime","onChange","view","views","openTo","onViewChange","focusedView","onFocusedViewChange","className","classes","disabled","readOnly","skipDisabled","timezone"],Wo=e=>ge({root:["root"]},Lo,e),Go=A(ut,{name:"MuiMultiSectionDigitalClock",slot:"Root"})(({theme:e})=>({flexDirection:"row",width:"100%",borderBottom:"1px solid ".concat((e.vars||e).palette.divider)})),Ko=k.forwardRef(function(s,n){const t=be(),a=Gt(),c=te({props:s,name:"MuiMultiSectionDigitalClock"}),{ampm:r=t.is12HourCycleInCurrentLocale(),timeSteps:u,autoFocus:f,slots:m,slotProps:w,value:i,defaultValue:g,referenceDate:b,disableIgnoringDatePartForTimeValidation:C=!1,maxTime:v,minTime:M,disableFuture:P,disablePast:j,minutesStep:F=1,shouldDisableTime:O,onChange:R,view:B,views:N=["hours","minutes"],openTo:U,onViewChange:V,focusedView:x,onFocusedViewChange:d,className:D,classes:I,disabled:L,readOnly:Y,skipDisabled:se=!1,timezone:Se}=c,de=ue(c,zo),{value:Z,handleValueChange:he,timezone:_}=it({name:"MultiSectionDigitalClock",timezone:Se,value:i,defaultValue:g,referenceDate:b,onChange:R,valueManager:ye}),H=Ne(),q=lt(_),Q=k.useMemo(()=>S({hours:1,minutes:5,seconds:5},u),[u]),h=dt({value:Z,referenceDate:b,adapter:t,props:c,timezone:_}),ie=We((p,T,y)=>he(p,T,y)),z=k.useMemo(()=>!r||!N.includes("hours")||N.includes("meridiem")?N:[...N,"meridiem"],[r,N]),{view:oe,setValueAndGoToNextView:ee,focusedView:ne}=ct({view:B,views:z,openTo:U,onViewChange:V,onChange:ie,focusedView:x,onFocusedViewChange:d}),ae=We(p=>{ee(p,"finish","meridiem")}),{meridiemMode:re,handleMeridiemChange:me}=at(h,r,ae,"finish"),xe=k.useCallback((p,T)=>{const y=Ke(C,t),E=T==="hours"||T==="minutes"&&z.includes("seconds"),K=({start:W,end:le})=>!(M&&y(M,le)||v&&y(W,v)||P&&y(W,q)||j&&y(q,E?le:W)),Ie=(W,le=1)=>{if(W%le!==0)return!1;if(O)switch(T){case"hours":return!O(t.setHours(h,W),"hours");case"minutes":return!O(t.setMinutes(h,W),"minutes");case"seconds":return!O(t.setSeconds(h,W),"seconds");default:return!1}return!0};switch(T){case"hours":{const W=ze(p,re,r),le=t.setHours(h,W);if(t.getHours(le)!==W)return!0;const _e=t.setSeconds(t.setMinutes(le,0),0),Wt=t.setSeconds(t.setMinutes(le,59),59);return!K({start:_e,end:Wt})||!Ie(W)}case"minutes":{const W=t.setMinutes(h,p),le=t.setSeconds(W,0),_e=t.setSeconds(W,59);return!K({start:le,end:_e})||!Ie(p,F)}case"seconds":{const W=t.setSeconds(h,p);return!K({start:W,end:W})||!Ie(p)}default:throw new Error("not supported")}},[r,h,C,v,re,M,F,O,t,P,j,q,z]),Me=k.useCallback(p=>{switch(p){case"hours":return{onChange:T=>{const y=ze(T,re,r);ee(t.setHours(h,y),"finish","hours")},items:Uo({now:q,value:Z,ampm:r,adapter:t,isDisabled:T=>xe(T,"hours"),timeStep:Q.hours,resolveAriaLabel:H.hoursClockNumberText,valueOrReferenceDate:h})};case"minutes":return{onChange:T=>{ee(t.setMinutes(h,T),"finish","minutes")},items:wt({value:t.getMinutes(h),adapter:t,isDisabled:T=>xe(T,"minutes"),resolveLabel:T=>t.format(t.setMinutes(q,T),"minutes"),timeStep:Q.minutes,hasValue:!!Z,resolveAriaLabel:H.minutesClockNumberText})};case"seconds":return{onChange:T=>{ee(t.setSeconds(h,T),"finish","seconds")},items:wt({value:t.getSeconds(h),adapter:t,isDisabled:T=>xe(T,"seconds"),resolveLabel:T=>t.format(t.setSeconds(q,T),"seconds"),timeStep:Q.seconds,hasValue:!!Z,resolveAriaLabel:H.secondsClockNumberText})};case"meridiem":{const T=ve(t,"am"),y=ve(t,"pm");return{onChange:me,items:[{value:"am",label:T,isSelected:()=>!!Z&&re==="am",isFocused:()=>!!h&&re==="am",ariaLabel:T},{value:"pm",label:y,isSelected:()=>!!Z&&re==="pm",isFocused:()=>!!h&&re==="pm",ariaLabel:y}]}}default:throw new Error("Unknown view: ".concat(p," found."))}},[q,Z,r,t,Q.hours,Q.minutes,Q.seconds,H.hoursClockNumberText,H.minutesClockNumberText,H.secondsClockNumberText,re,ee,h,xe,me]),G=k.useMemo(()=>{if(!a)return z;const p=z.filter(T=>T!=="meridiem");return p.reverse(),z.includes("meridiem")&&p.push("meridiem"),p},[a,z]),X=k.useMemo(()=>z.reduce((p,T)=>S({},p,{[T]:Me(T)}),{}),[z,Me]),{ownerState:$}=Pe(),J=Wo(I);return l.jsx(Go,S({ref:n,className:fe(J.root,D),ownerState:$,role:"group"},de,{children:G.map(p=>l.jsx($o,{items:X[p].items,onChange:X[p].onChange,active:oe===p,autoFocus:f||ne===p,disabled:L,readOnly:Y,slots:m,slotProps:w,skipDisabled:se,"aria-label":H.selectViewText(p)},p))}))}),Ye=({view:e,onViewChange:s,focusedView:n,onFocusedViewChange:t,views:a,value:c,defaultValue:r,referenceDate:u,onChange:f,className:m,classes:w,disableFuture:i,disablePast:g,minTime:b,maxTime:C,shouldDisableTime:v,minutesStep:M,ampm:P,ampmInClock:j,slots:F,slotProps:O,readOnly:R,disabled:B,sx:N,autoFocus:U,showViewSwitcher:V,disableIgnoringDatePartForTimeValidation:x,timezone:d})=>l.jsx(Po,{view:e,onViewChange:s,focusedView:n&&Le(n)?n:null,onFocusedViewChange:t,views:a.filter(Le),value:c,defaultValue:r,referenceDate:u,onChange:f,className:m,classes:w,disableFuture:i,disablePast:g,minTime:b,maxTime:C,shouldDisableTime:v,minutesStep:M,ampm:P,ampmInClock:j,slots:F,slotProps:O,readOnly:R,disabled:B,sx:N,autoFocus:U,showViewSwitcher:V,disableIgnoringDatePartForTimeValidation:x,timezone:d}),qo=({view:e,onViewChange:s,focusedView:n,onFocusedViewChange:t,views:a,value:c,defaultValue:r,referenceDate:u,onChange:f,className:m,classes:w,disableFuture:i,disablePast:g,minTime:b,maxTime:C,shouldDisableTime:v,minutesStep:M,ampm:P,slots:j,slotProps:F,readOnly:O,disabled:R,sx:B,autoFocus:N,disableIgnoringDatePartForTimeValidation:U,timeSteps:V,skipDisabled:x,timezone:d})=>l.jsx(Oo,{view:e,onViewChange:s,focusedView:n&&Le(n)?n:null,onFocusedViewChange:t,views:a.filter(Le),value:c,defaultValue:r,referenceDate:u,onChange:f,className:m,classes:w,disableFuture:i,disablePast:g,minTime:b,maxTime:C,shouldDisableTime:v,minutesStep:M,ampm:P,slots:j,slotProps:F,readOnly:O,disabled:R,sx:B,autoFocus:N,disableIgnoringDatePartForTimeValidation:U,timeStep:V==null?void 0:V.minutes,skipDisabled:x,timezone:d}),vt=({view:e,onViewChange:s,focusedView:n,onFocusedViewChange:t,views:a,value:c,defaultValue:r,referenceDate:u,onChange:f,className:m,classes:w,disableFuture:i,disablePast:g,minTime:b,maxTime:C,shouldDisableTime:v,minutesStep:M,ampm:P,slots:j,slotProps:F,readOnly:O,disabled:R,sx:B,autoFocus:N,disableIgnoringDatePartForTimeValidation:U,timeSteps:V,skipDisabled:x,timezone:d})=>l.jsx(Ko,{view:e,onViewChange:s,focusedView:n&&It(n)?n:null,onFocusedViewChange:t,views:a.filter(Le),value:c,defaultValue:r,referenceDate:u,onChange:f,className:m,classes:w,disableFuture:i,disablePast:g,minTime:b,maxTime:C,shouldDisableTime:v,minutesStep:M,ampm:P,slots:j,slotProps:F,readOnly:O,disabled:R,sx:B,autoFocus:N,disableIgnoringDatePartForTimeValidation:U,timeSteps:V,skipDisabled:x,timezone:d}),Yo=(e,s,n)=>n?s.filter(t=>!It(t)||t==="hours"):e?[...s,"meridiem"]:s,Qo=(e,s)=>{var n,t;return 24*60/(((n=e.hours)!=null?n:1)*((t=e.minutes)!=null?t:5))<=s};function Xo({thresholdToRenderTimeInASingleColumn:e,ampm:s,timeSteps:n,views:t}){const a=e!=null?e:24,c=S({hours:1,minutes:5,seconds:5},n),r=Qo(c,a);return{thresholdToRenderTimeInASingleColumn:a,timeSteps:c,shouldRenderTimeInASingleColumn:r,views:Yo(s,t,r)}}const $t=k.forwardRef(function(s,n){var v,M,P;const t=be(),a=Bt(s,"MuiDesktopTimePicker"),{shouldRenderTimeInASingleColumn:c,views:r,timeSteps:u}=Xo(a),f=c?qo:vt,m=S({hours:f,minutes:f,seconds:f,meridiem:f},a.viewRenderers),w=(v=a.ampmInClock)!=null?v:!0,g=((M=m.hours)==null?void 0:M.name)===vt.name?r:r.filter(j=>j!=="meridiem"),b=S({},a,{ampmInClock:w,timeSteps:u,viewRenderers:m,format:Vt(t,a),views:c?["hours"]:g,slots:S({field:Ot},a.slots),slotProps:S({},a.slotProps,{field:j=>{var F;return S({},jt((F=a.slotProps)==null?void 0:F.field,j),Nt(a))},toolbar:S({hidden:!0,ampmInClock:w},(P=a.slotProps)==null?void 0:P.toolbar)})}),{renderPicker:C}=hs({ref:n,props:b,valueManager:ye,valueType:"time",validator:qe,steps:null});return C()});$t.propTypes={ampm:o.bool,ampmInClock:o.bool,autoFocus:o.bool,className:o.string,closeOnSelect:o.bool,defaultValue:o.object,disabled:o.bool,disableFuture:o.bool,disableIgnoringDatePartForTimeValidation:o.bool,disableOpenPicker:o.bool,disablePast:o.bool,enableAccessibleFieldDOMStructure:o.any,format:o.string,formatDensity:o.oneOf(["dense","spacious"]),inputRef:Ft,label:o.node,localeText:o.object,maxTime:o.object,minTime:o.object,minutesStep:o.number,name:o.string,onAccept:o.func,onChange:o.func,onClose:o.func,onError:o.func,onOpen:o.func,onSelectedSectionsChange:o.func,onViewChange:o.func,open:o.bool,openTo:o.oneOf(["hours","meridiem","minutes","seconds"]),orientation:o.oneOf(["landscape","portrait"]),readOnly:o.bool,reduceAnimations:o.bool,referenceDate:o.object,selectedSections:o.oneOfType([o.oneOf(["all","day","empty","hours","meridiem","minutes","month","seconds","weekDay","year"]),o.number]),shouldDisableTime:o.func,skipDisabled:o.bool,slotProps:o.object,slots:o.object,sx:o.oneOfType([o.arrayOf(o.oneOfType([o.func,o.object,o.bool])),o.func,o.object]),thresholdToRenderTimeInASingleColumn:o.number,timeSteps:o.shape({hours:o.number,minutes:o.number,seconds:o.number}),timezone:o.string,value:o.object,view:o.oneOf(["hours","meridiem","minutes","seconds"]),viewRenderers:o.shape({hours:o.func,meridiem:o.func,minutes:o.func,seconds:o.func}),views:o.arrayOf(o.oneOf(["hours","minutes","seconds"]).isRequired)};const Ut=k.forwardRef(function(s,n){var m,w;const t=be(),a=Bt(s,"MuiMobileTimePicker"),c=S({hours:Ye,minutes:Ye,seconds:Ye},a.viewRenderers),r=(m=a.ampmInClock)!=null?m:!1,u=S({},a,{ampmInClock:r,viewRenderers:c,format:Vt(t,a),slots:S({field:Ot},a.slots),slotProps:S({},a.slotProps,{field:i=>{var g;return S({},jt((g=a.slotProps)==null?void 0:g.field,i),Nt(a))},toolbar:S({hidden:!1,ampmInClock:r},(w=a.slotProps)==null?void 0:w.toolbar)})}),{renderPicker:f}=ks({ref:n,props:u,valueManager:ye,valueType:"time",validator:qe,steps:null});return f()});Ut.propTypes={ampm:o.bool,ampmInClock:o.bool,autoFocus:o.bool,className:o.string,closeOnSelect:o.bool,defaultValue:o.object,disabled:o.bool,disableFuture:o.bool,disableIgnoringDatePartForTimeValidation:o.bool,disableOpenPicker:o.bool,disablePast:o.bool,enableAccessibleFieldDOMStructure:o.any,format:o.string,formatDensity:o.oneOf(["dense","spacious"]),inputRef:Ft,label:o.node,localeText:o.object,maxTime:o.object,minTime:o.object,minutesStep:o.number,name:o.string,onAccept:o.func,onChange:o.func,onClose:o.func,onError:o.func,onOpen:o.func,onSelectedSectionsChange:o.func,onViewChange:o.func,open:o.bool,openTo:o.oneOf(["hours","minutes","seconds"]),orientation:o.oneOf(["landscape","portrait"]),readOnly:o.bool,reduceAnimations:o.bool,referenceDate:o.object,selectedSections:o.oneOfType([o.oneOf(["all","day","empty","hours","meridiem","minutes","month","seconds","weekDay","year"]),o.number]),shouldDisableTime:o.func,slotProps:o.object,slots:o.object,sx:o.oneOfType([o.arrayOf(o.oneOfType([o.func,o.object,o.bool])),o.func,o.object]),timezone:o.string,value:o.object,view:o.oneOf(["hours","minutes","seconds"]),viewRenderers:o.shape({hours:o.func,minutes:o.func,seconds:o.func}),views:o.arrayOf(o.oneOf(["hours","minutes","seconds"]).isRequired)};const Jo=["desktopModeMediaQuery"],Zo=k.forwardRef(function(s,n){const t=te({props:s,name:"MuiTimePicker"}),{desktopModeMediaQuery:a=Cs}=t,c=ue(t,Jo);return Kt(a,{defaultMatches:!0})?l.jsx($t,S({ref:n},c)):l.jsx(Ut,S({ref:n},c))}),en=({settingName:e,value:s,defaultValue:n,handleChange:t})=>{const{t:a}=et(),[c,r]=k.useState(!1),[u,f]=k.useState(s);k.useEffect(()=>{s&&f(s)},[s]);const m=k.useCallback(g=>{r(!1),g&&f(s)},[s]),w=k.useCallback(()=>m(!0),[m]),i=k.useCallback((g,b=!0)=>{b&&m(!1),s!==g&&t(g)},[s,t,m]);return l.jsxs(l.Fragment,{children:[l.jsx(Qe,{onClick:()=>r(!0),children:l.jsx(Xe,{primary:e,secondary:Ee(s,"HH:mm").format("LT"),secondaryTypographyProps:{style:{display:"flex",flexDirection:"column"}}})}),l.jsxs(tt,{open:c,onClose:m,children:[l.jsx(st,{children:e}),l.jsx(ot,{children:l.jsx(Ts,{dateAdapter:xs,adapterLocale:Ee.locale(),children:l.jsx(Zo,{autoFocus:!0,value:Ee(u,"HH:mm"),defaultValue:Ee(n,"HH:mm"),format:"LT",onChange:g=>{var b;return f((b=g==null?void 0:g.format("HH:mm"))!=null?b:"00:00")}})})}),l.jsxs(nt,{children:[n!==void 0?l.jsx(pe,{onClick:()=>{f(n),i(n,!1)},color:"primary",children:a("global.button.reset_to_default")}):null,l.jsx(pe,{onClick:w,color:"primary",children:a("global.button.cancel")}),l.jsx(pe,{onClick:()=>{i(u)},color:"primary",children:a("global.button.ok")})]})]})]})};var Ae=(e=>(e.LIBRARY="library",e.SETTINGS="settings",e))(Ae||{});const zt={includeCategories:"settings.backup.flag.categories",includeChapters:"settings.backup.flag.chapters",includeClientData:"settings.backup.flag.client_data",includeHistory:"settings.backup.flag.history",includeServerSettings:"settings.backup.flag.server_settings",includeTracking:"settings.backup.flag.tracking"},tn={[Ae.LIBRARY]:"settings.backup.flag.group.library",[Ae.SETTINGS]:"settings.backup.flag.group.settings"},sn=Object.keys(zt),on={[Ae.LIBRARY]:["includeChapters","includeTracking","includeHistory","includeCategories"],[Ae.SETTINGS]:["includeClientData","includeServerSettings"]},nn=({onCancel:e,onConfirm:s})=>{const{t:n}=et(),[t,a]=k.useState(Object.fromEntries(sn.map(c=>[c,!0])));return l.jsxs(tt,{open:!0,onAbort:e,maxWidth:"xs",fullWidth:!0,children:[l.jsx(st,{children:n("settings.backup.action.create.label.title")}),l.jsx(ot,{children:l.jsx(Ss,{sx:{gap:2},children:Object.entries(on).map(([c,r])=>l.jsxs(Je,{children:[l.jsx(Ze,{children:n(tn[c])}),r.map(u=>l.jsx(ys,{label:n(zt[u]),checked:t[u],onChange:(f,m)=>{a({...t,[u]:m})}},u))]}))})}),l.jsxs(nt,{children:[l.jsx(pe,{autoFocus:!0,onClick:e,color:"primary",children:n("global.button.cancel")}),l.jsx(pe,{onClick:()=>s(t),color:"primary",children:n("global.button.ok")})]})]})},an=e=>e===0?gt("global.label.never"):gt("settings.backup.automated.cleanup.label.value",{days:e,count:e});let we;function vn(){var x;const{t:e}=et();vs(e("settings.backup.title"));const{data:s,loading:n,error:t,refetch:a}=De.useGetServerSettings({notifyOnNetworkStatusChange:!0}),[c]=De.useUpdateServerSettings(),{data:r}=De.useGetBackupRestoreStatus(we!=null?we:"",{skip:!we,pollInterval:1e3}),[u,f]=k.useState(null),[m,w]=k.useState(!1),[i,g]=k.useState(),[,b]=k.useState(0),C=k.useRef(null),v=(()=>{if(!(r!=null&&r.restoreStatus))return 0;const d=100*(r.restoreStatus.mangaProgress/r.restoreStatus.totalManga);return Number.isNaN(d)?0:d})(),M=(d,D)=>{c({variables:{input:{settings:{[d]:D}}}}).catch(I=>ce(e("global.error.label.failed_to_save_changes"),"error",Ve(I)))};k.useEffect(()=>{if(!(r!=null&&r.restoreStatus))return;const d=r.restoreStatus.state===mt.Success,D=r.restoreStatus.state===mt.Failure;(d||D)&&(d&&ce(e("settings.backup.action.restore.label.success"),"success"),D&&ce(e("settings.backup.action.restore.error.label.failure"),"error"),De.reset(),we=void 0,b(Date.now()))},[(x=r==null?void 0:r.restoreStatus)==null?void 0:x.state]);const P=()=>{f(null);const d=document.getElementById("backup-file");d&&(d.value="")},j=async()=>{var D;const d=await Zt.show(nn);ce(e("settings.backup.action.create.label.in_progress"),"info");try{const I=await De.createBackupFile(d).response,L=(D=I.data)==null?void 0:D.createBackup.url;if(!L){ce(e("settings.backup.action.create.error.failure"),"error",Ve(I.errors));return}const Y=document.createElement("a");Y.href=L,Y.download="",document.body.appendChild(Y),Y.click(),document.body.removeChild(Y)}catch(I){ce(e("settings.backup.action.create.error.failure"),"error",Ve(I))}},F=async d=>{try{const{data:{validateBackup:D}}=await De.validateBackupFile(d,{fetchPolicy:"network-only"}).response;return D.missingSources.length||D.missingTrackers.length?(g(D),w(!0),!1):!0}catch(D){ce(e("settings.backup.action.validate.error.label.failure"),"error",Ve(D)),P()}return!1},O=async d=>{var D;try{ce(e("settings.backup.action.restore.label.in_progress"),"info"),we=(D=(await De.restoreBackupFile(d).response).data)==null?void 0:D.restoreBackup.id,b(Date.now())}catch(I){ce(e("settings.backup.action.restore.error.label.failure"),"error",Ve(I))}finally{P()}},R=async d=>{if(d.name.toLowerCase().endsWith("json")){ce(e("settings.backup.action.restore.error.label.legacy_backup_unsupported"),"error");return}if(!d.name.toLowerCase().match(/proto\.gz$|tachibk$/g)){ce(e("global.error.label.invalid_file_type"),"error");return}f(d),await F(d)&&await O(d)},B=()=>{w(!1),P()};Ct("drop",async d=>{d.preventDefault();const D=await ht(d);R(D[0])}),Ct("dragover",d=>{d.preventDefault()});const N=js("change",async d=>{const D=await ht(d);R(D[0])}),U=Ms(C,N);if(n)return l.jsx(qt,{});if(t)return l.jsx(ws,{message:e("global.error.label.failed_to_load_data"),messageExtra:Ve(t),retry:()=>a().catch(Yt())});const V=s.settings;return l.jsxs(l.Fragment,{children:[l.jsxs(He,{sx:{padding:0},children:[l.jsx(Qe,{onClick:j,children:l.jsx(Xe,{primary:e("settings.backup.action.create.label.title"),secondary:e("settings.backup.action.create.label.description")})}),l.jsxs(Qe,{onClick:()=>{var d;return(d=C.current)==null?void 0:d.click()},disabled:!!we,children:[l.jsx(Xe,{primary:e("settings.backup.action.restore.label.title"),secondary:e("settings.backup.action.restore.label.description")}),we?l.jsx(Qt,{children:l.jsx(es,{progress:v})}):null]}),l.jsxs(He,{subheader:l.jsx(Ds,{component:"div",id:"backup-settings",children:"Automated backup"}),children:[l.jsx(Xt,{settingName:e("settings.backup.automated.location.label.title"),dialogDescription:e("settings.backup.automated.location.label.description"),value:V.backupPath,settingDescription:V.backupPath.length?V.backupPath:e("global.label.default"),handleChange:d=>M("backupPath",d)}),l.jsx(en,{settingName:e("settings.backup.automated.label.time"),value:V.backupTime,defaultValue:"00:00",handleChange:d=>M("backupTime",d)}),l.jsx(kt,{settingTitle:e("settings.backup.automated.label.interval"),settingValue:e("global.date.value.label.day",{days:V.backupInterval,count:V.backupInterval}),value:V.backupInterval,defaultValue:1,minValue:1,maxValue:31,stepSize:1,valueUnit:e("global.date.label.day_one"),showSlider:!0,handleUpdate:d=>M("backupInterval",d)}),l.jsx(kt,{settingTitle:e("settings.backup.automated.cleanup.label.title"),settingValue:an(V.backupTTL),value:V.backupTTL,defaultValue:14,minValue:0,maxValue:1e3,stepSize:1,valueUnit:e("global.date.label.day_one"),showSlider:!0,handleUpdate:d=>M("backupTTL",d)})]})]}),l.jsx("input",{ref:U,type:"file",style:{display:"none"}}),l.jsxs(tt,{open:m,children:[l.jsx(st,{children:e("settings.backup.action.validate.dialog.title")}),l.jsxs(ot,{dividers:!0,children:[!!(i!=null&&i.missingSources.length)&&l.jsx(He,{sx:{listStyleType:"initial",listStylePosition:"inside"},subheader:e("settings.backup.action.validate.dialog.content.label.missing_sources"),children:i==null?void 0:i.missingSources.map(({id:d,name:D})=>l.jsx(pt,{sx:{display:"list-item"},children:"".concat(D," (").concat(d,")")},d))}),!!(i!=null&&i.missingTrackers.length)&&l.jsx(He,{sx:{listStyleType:"initial",listStylePosition:"inside"},subheader:e("settings.backup.action.validate.dialog.content.label.missing_trackers"),children:i==null?void 0:i.missingTrackers.map(({name:d})=>l.jsx(pt,{sx:{display:"list-item"},children:"".concat(d)},d))})]}),l.jsx(nt,{children:l.jsxs(Je,{direction:"row",sx:{justifyContent:"space-between",width:"100%"},children:[!!(i!=null&&i.missingSources.length)&&l.jsx(pe,{onClick:B,component:bt,to:ft.browse.path(Jt.EXTENSIONS),autoFocus:!!(i!=null&&i.missingSources.length),variant:i!=null&&i.missingSources.length?"contained":"text",children:e("extension.action.label.install")}),!!(i!=null&&i.missingTrackers.length)&&l.jsx(pe,{onClick:B,component:bt,to:ft.tracker.path,autoFocus:!!(i!=null&&i.missingTrackers.length),variant:i!=null&&i.missingTrackers.length?"contained":"text",children:e("global.button.log_in")}),l.jsxs(Je,{direction:"row",children:[l.jsx(pe,{onClick:B,children:e("global.button.cancel")}),l.jsx(pe,{onClick:()=>{B(),O(u)},autoFocus:!(i!=null&&i.missingSources.length)&&!(i!=null&&i.missingTrackers.length),variant:!(i!=null&&i.missingSources.length)&&!(i!=null&&i.missingTrackers.length)?"contained":"text",children:e("global.button.restore")})]})]})})]})]})}export{vn as Backup};
