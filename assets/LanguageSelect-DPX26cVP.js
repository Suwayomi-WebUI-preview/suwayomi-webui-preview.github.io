import{ay as T,ae as _,az as b,aA as A,aB as f,aC as u,aD as P,W as p,u as C,g as O,j as s,C as B,I as j,D as y,o as G,p as v,aE as R,as as k,aF as F,b as m}from"./index-YAtlvmGf.js";import{F as K}from"./FilterList-DJRw70o2.js";import{K as M}from"./MUI.util-CRrI--AY.js";import{S as H}from"./Switch-dYYnEC4v.js";var l=(e=>(e.UPDATE="UPDATE",e.UNINSTALL="UNINSTALL",e.INSTALL="INSTALL",e))(l||{}),I=(e=>(e.OBSOLETE="OBSOLETE",e.UPDATING="UPDATING",e.UNINSTALLING="UNINSTALLING",e.INSTALLING="INSTALLING",e))(I||{});const o={...l,...I};var i=(e=>(e.INSTALLED="INSTALLED",e.UPDATE_PENDING="UPDATE_PENDING",e.OBSOLETE="OBSOLETE",e))(i||{});const Q={[l.UPDATE]:I.UPDATING,[l.UNINSTALL]:I.UNINSTALLING,[l.INSTALL]:I.INSTALLING},Z={[l.UPDATE]:l.UNINSTALL,[l.UNINSTALL]:l.INSTALL,[l.INSTALL]:l.UNINSTALL},$={[o.UNINSTALL]:"extension.action.label.uninstall",[o.INSTALL]:"extension.action.label.install",[o.UPDATE]:"extension.action.label.update",[o.OBSOLETE]:"extension.state.label.obsolete",[o.UPDATING]:"extension.state.label.updating",[o.UNINSTALLING]:"extension.state.label.uninstalling",[o.INSTALLING]:"extension.state.label.installing"},ee={[l.UPDATE]:"extension.label.update_failed",[l.INSTALL]:"extension.label.installation_failed",[l.UNINSTALL]:"extension.label.uninstallation_failed"},X={[i.INSTALLED]:"extension.state.label.installed",[i.UPDATE_PENDING]:"extension.state.label.update_pending",[i.OBSOLETE]:"extension.state.label.obsolete",[T.ALL]:"extension.language.all",[T.OTHER]:"extension.language.other",[T.LOCAL_SOURCE]:"extension.language.other"},te=(e,n,r)=>n?o.OBSOLETE:r?o.UPDATE:e?o.UNINSTALL:o.INSTALL,W=e=>[i.INSTALLED,i.UPDATE_PENDING,i.OBSOLETE].includes(e),w=e=>W(e)||[T.ALL,T.OTHER,T.LOCAL_SOURCE].includes(e),z=e=>w(e)?_(X[e]):b(e);function ae(e){const n=Object.groupBy(e,a=>a.isInstalled?a.hasUpdate?i.UPDATE_PENDING:a.isObsolete?i.OBSOLETE:i.INSTALLED:a.lang);return Object.entries(n).toSorted(([a],[t])=>{const L=Object.values(i);return L.includes(a)?-1:L.includes(t)?1:A(a,t)}).map(([a,t])=>[a,(t!=null?t:[]).toSorted((L,d)=>A(L.lang,d.lang))]).filter(([,a])=>!!a.length)}const ne=e=>[...new Set(e.map(n=>n.lang))].toSorted(A),se=(e,{selectedLanguages:n,showNsfw:r,query:N}={})=>{const a=f(u(n!=null?n:[]));return e.filter(t=>!n||a.includes(P(t.lang))||t.isInstalled).filter(t=>r===void 0||r||!t.isNsfw).filter(t=>N==null||p(t.name).includes(p(N)))};function le(e){const{t:n}=C(),{selectedLanguages:r,setSelectedLanguages:N,languages:a}=e,[t,L]=O.useState(u(r)),[d,g]=O.useState(!1),E=O.useMemo(()=>u([...t.toSorted(A),...a.toSorted(A)]),[a,t]),x=()=>{g(!1),L(u(r))},D=()=>{g(!1),N(u(t))},U=(c,S)=>{L(S?[...t,c]:t.toSpliced(t.indexOf(c),1))};return s.jsxs(s.Fragment,{children:[s.jsx(B,{title:n("settings.title"),children:s.jsx(j,{onClick:()=>g(!0),"aria-label":"display more actions",edge:"end",color:"inherit",children:s.jsx(K,{})})}),s.jsxs(y,{fullWidth:!0,maxWidth:"xs",open:d,onClose:x,children:[s.jsx(G,{children:n("global.language.title.enabled_languages")}),s.jsx(v,{dividers:!0,sx:{padding:0},children:s.jsx(M,{style:{height:E.length*54,minHeight:"25vh",maxHeight:"50vh"},data:E,increaseViewportBy:400,computeItemKey:c=>E[c],itemContent:(c,S)=>s.jsxs(R,{children:[s.jsx(k,{primary:z(S)}),s.jsx(H,{checked:t.includes(S),onChange:h=>U(S,h.target.checked)})]})})}),s.jsxs(F,{children:[s.jsx(m,{autoFocus:!0,onClick:x,color:"primary",children:n("global.button.cancel")}),s.jsx(m,{onClick:D,color:"primary",children:n("global.button.ok")})]})]})]})}export{I as E,$ as I,le as L,o as a,l as b,Q as c,Z as d,ee as e,ne as f,te as g,se as h,ae as i,i as j,z as t};
