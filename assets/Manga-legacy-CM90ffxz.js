!function(){var t=["children","className","color","component","disabled","disableElevation","disableFocusRipple","disableRipple","fullWidth","orientation","size","variant"],e=["children"];function n(t){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},n(t)}function r(t,e,r){return e=o(e),function(t,e){if(e&&("object"==n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,i()?Reflect.construct(e,r||[],o(t).constructor):e.apply(t,r))}function i(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return(i=function(){return!!t})()}function o(t){return o=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},o(t)}function a(t,e){return a=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},a(t,e)}function s(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function u(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,w(r.key),r)}}function l(t,e,n){return e&&u(t.prototype,e),n&&u(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function c(t,e){if(null==t)return{};var n,r,i=function(t,e){if(null==t)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(-1!==e.indexOf(r))continue;n[r]=t[r]}return n}(t,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(r=0;r<o.length;r++)n=o[r],-1===e.indexOf(n)&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function d(t){return function(t){if(Array.isArray(t))return b(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||v(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function h(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */var t,e,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",i=n.toStringTag||"@@toStringTag";function o(n,r,i,o){var u=r&&r.prototype instanceof s?r:s,l=Object.create(u.prototype);return f(l,"_invoke",function(n,r,i){var o,s,u,l=0,c=i||[],d=!1,h={p:0,n:0,v:t,a:f,f:f.bind(t,4),d:function(e,n){return o=e,s=0,u=t,h.n=n,a}};function f(n,r){for(s=n,u=r,e=0;!d&&l&&!i&&e<c.length;e++){var i,o=c[e],f=h.p,g=o[2];n>3?(i=g===r)&&(u=o[(s=o[4])?5:(s=3,3)],o[4]=o[5]=t):o[0]<=f&&((i=n<2&&f<o[1])?(s=0,h.v=r,h.n=o[1]):f<g&&(i=n<3||o[0]>r||r>g)&&(o[4]=n,o[5]=r,h.n=g,s=0))}if(i||n>1)return a;throw d=!0,r}return function(i,c,g){if(l>1)throw TypeError("Generator is already running");for(d&&1===c&&f(c,g),s=c,u=g;(e=s<2?t:u)||!d;){o||(s?s<3?(s>1&&(h.n=-1),f(s,u)):h.n=u:h.v=u);try{if(l=2,o){if(s||(i="next"),e=o[i]){if(!(e=e.call(o,u)))throw TypeError("iterator result is not an object");if(!e.done)return e;u=e.value,s<2&&(s=0)}else 1===s&&(e=o.return)&&e.call(o),s<2&&(u=TypeError("The iterator does not provide a '"+i+"' method"),s=1);o=t}else if((e=(d=h.n<0)?u:n.call(r,h))!==a)break}catch(e){o=t,s=1,u=e}finally{l=1}}return{value:e,done:d}}}(n,i,o),!0),l}var a={};function s(){}function u(){}function l(){}e=Object.getPrototypeOf;var c=[][r]?e(e([][r]())):(f(e={},r,function(){return this}),e),d=l.prototype=s.prototype=Object.create(c);function g(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,l):(t.__proto__=l,f(t,i,"GeneratorFunction")),t.prototype=Object.create(d),t}return u.prototype=l,f(d,"constructor",l),f(l,"constructor",u),u.displayName="GeneratorFunction",f(l,i,"GeneratorFunction"),f(d),f(d,i,"Generator"),f(d,r,function(){return this}),f(d,"toString",function(){return"[object Generator]"}),(h=function(){return{w:o,m:g}})()}function f(t,e,n,r){var i=Object.defineProperty;try{i({},"",{})}catch(t){i=0}f=function(t,e,n,r){function o(e,n){f(t,e,function(t){return this._invoke(e,n,t)})}e?i?i(t,e,{value:n,enumerable:!r,configurable:!r,writable:!r}):t[e]=n:(o("next",0),o("throw",1),o("return",2))},f(t,e,n,r)}function g(t,e,n,r,i,o,a){try{var s=t[o](a),u=s.value}catch(t){return void n(t)}s.done?e(u):Promise.resolve(u).then(r,i)}function p(t){return function(){var e=this,n=arguments;return new Promise(function(r,i){var o=t.apply(e,n);function a(t){g(o,r,i,a,s,"next",t)}function s(t){g(o,r,i,a,s,"throw",t)}a(void 0)})}}function m(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,i,o,a,s=[],u=!0,l=!1;try{if(o=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=o.call(n)).done)&&(s.push(r.value),s.length!==e);u=!0);}catch(t){l=!0,i=t}finally{try{if(!u&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(l)throw i}}return s}}(t,e)||v(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function v(t,e){if(t){if("string"==typeof t)return b(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?b(t,e):void 0}}function b(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function y(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)}return n}function x(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?y(Object(n),!0).forEach(function(e){j(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):y(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}function j(t,e,n){return(e=w(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function w(t){var e=function(t,e){if("object"!=n(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var i=r.call(t,e||"default");if("object"!=n(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==n(e)?e:e+""}System.register(["./index-legacy-B-4FV6_X.js","./PlayArrow-legacy-xWg-3-pg.js","./StyledFab-legacy-DKKKcDIn.js","./Chapters-legacy-DJ6SWPv_.js","./ContinueReadingTooltip-legacy-0k9z2iWC.js","./useManageMangaLibraryState-legacy-C6J_5tFN.js","./EmptyViewAbsoluteCentered-legacy-DJN8HvRB.js","./FilterList-legacy-DsDup-ID.js","./Download-legacy-D-U04X6e.js","./DoneAll-legacy-Di8IZbWi.js","./SortRadioInput-legacy-hkGMoeX7.js","./ThreeStateCheckboxInput-legacy-DZglxFyA.js","./SelectionFAB-legacy-BsX_KQvn.js","./CheckboxInput-legacy-GmVOfyXc.js","./FormGroup-legacy-Cz5VEguR.js","./ListPreference-legacy-Cl9qdw13.js","./ChapterListCard-legacy-DLQOT9lf.js","./VirtuosoPersisted-legacy-bMbPFQUy.js","./Strings-legacy-CzJ32ydF.js","./IconWebView-legacy-CKOXx26F.js","./Mangas-legacy-DEM2AftP.js","./SpinnerImage-legacy-BOTEgoVp.js","./Sync-legacy-fD9HmfxK.js","./Trackers-legacy-CfAoco_b.js","./Metadata-legacy-2KuZXFXl.js","./ExpandMore-legacy-CW7PBMFQ.js","./Link-legacy-Bzmdo1kq.js","./Chip-legacy-DFyj0m_v.js","./Refresh-legacy-uUGWOi99.js","./CreateThemeDialog-legacy-BTVNcskd.js","./useAppTitleAndAction-legacy-BBIlnQbF.js","./DateHelper-legacy-DRw8JExd.js","./Asserts-legacy-CWE3_MKu.js","./AvatarSpinner-legacy-CiHgnRxH.js","./Card-legacy-eGdFGINu.js","./ListCardContent-legacy-1eTCrLT6.js","./CheckCircle-legacy-DFPqrjxw.js","./MUI.util-legacy-D9xMlHDR.js","./CardActionArea-legacy-J3pUwp5t.js","./NumberSetting-legacy-DV4HTUhy.js","./Slider-legacy--sb5GfTG.js","./useMobilePicker-legacy-CenLPbFA.js","./SelectSetting-legacy-DNwb_uyt.js","./Select-legacy-BguJtjZP.js","./Checkbox-legacy-DtCqMGsb.js","./SwitchBase-legacy-C3zsO1fx.js","./Tabs-legacy-B2UnVP7w.js","./ChapterCardMetadata-legacy-C5FZrypz.js","./Delete-legacy-DpafkVL1.js","./index-legacy-BaTTO59J.js","./Virtuoso.util-legacy-BAW4TUzH.js","./use-merged-ref-legacy-1oflvzBc.js","./Image-legacy-fRPLwcyl.js","./useAppTitle-legacy-CgGDVPY8.js","./useAppAction-legacy-BoKyaY_n.js"],function(i,o){"use strict";var u,f,g,v,b,y,w,k,C,_,S,M,L,O,B,I,D,T,P,R,E,V,z,F,A,W,H,N,q,U,G,J,K,X,Q,Y,Z,$,tt,et,nt,rt,it,ot,at,st,ut,lt,ct,dt,ht,ft,gt,pt,mt,vt,bt,yt,xt,jt,wt,kt,Ct,_t,St,Mt,Lt,Ot,Bt,It,Dt,Tt,Pt,Rt,Et,Vt,zt,Ft,At,Wt,Ht,Nt,qt,Ut,Gt,Jt,Kt,Xt,Qt,Yt,Zt,$t,te,ee,ne,re,ie,oe,ae,se,ue,le,ce,de,he,fe,ge,pe,me,ve,be,ye,xe,je,we,ke,Ce,_e,Se,Me,Le,Oe,Be,Ie;return{setters:[function(t){u=t.f,f=t.c,g=t.j,v=t.u,b=t.L,y=t.o,w=t.p,k=t.q,C=t.w,_=t.b,S=t.B,M=t.cs,L=t.aC,O=t.C,B=t.I,I=t.aB,D=t.bB,T=t.bj,P=t.J,R=t.U,E=t.Q,V=t.r,z=t.bo,F=t.i,A=t.g,W=t.k,H=t._,N=t.T,q=t.H,U=t.ag,G=t.G,J=t.m,K=t.ct,X=t.W,Q=t.X,Y=t.Y,Z=t.Z,$=t.cu,tt=t.cv,et=t.$,nt=t.a0,rt=t.a2,it=t.aT,ot=t.h,at=t.cl,st=t.aD,ut=t.A,lt=t.a8,ct=t.cw,dt=t.cx,ht=t.b3,ft=t.ap,gt=t.aw,pt=t.e,mt=t.b4,vt=t.S,bt=t.bg,yt=t.am,xt=t.cr,jt=t.ar,wt=t.bx,kt=t.v,Ct=t.bC,_t=t.cy,St=t.cz,Mt=t.aG,Lt=t.ah,Ot=t.cA,Bt=t.cB,It=t.bF},function(t){Dt=t.P},function(t){Tt=t.S,Pt=t.D},function(t){Rt=t.a,Et=t.c},function(t){Vt=t.b,zt=t.C,Ft=t.T,At=t.a,Wt=t.L},function(t){Ht=t.j,Nt=t.k,qt=t.l,Ut=t.m,Gt=t.n,Jt=t.u,Kt=t.F,Xt=t.C,Qt=t.i},function(t){Yt=t.E},function(t){Zt=t.F},function(t){$t=t.D},function(t){te=t.D},function(t){ee=t.S,ne=t.R},function(t){re=t.D,ie=t.T},function(t){oe=t.O,ae=t.S,se=t.a},function(t){ue=t.C},function(t){le=t.F},function(t){ce=t.a},function(t){de=t.C,he=t.a,fe=t.I},function(t){ge=t.V},function(t){pe=t.b},function(t){me=t.F,ve=t.I},function(t){be=t.a,ye=t.M,xe=t.c},function(t){je=t.S},function(t){we=t.S},function(t){ke=t.T},function(t){Ce=t.M},function(t){_e=t.a,Se=t.E},function(t){Me=t.L},function(t){Le=t.C},function(t){Oe=t.R},function(t){Be=t.T},function(t){Ie=t.u},null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null],execute:function(){var o=f(g.jsx("path",{d:"M1 21h22L12 2zm12-3h-2v-2h2zm0-4h-2v-4h2z"}));function De(t){var e=t.chapter,n=v(),r=n.i18n,i=(n._,e.sourceOrder),o=e.name,a=e.chapterNumber,s=e.scanlator,u=1===i;return g.jsx(Vt,{chapterNumber:a,name:o,sourceOrder:i,scanlator:s,children:g.jsxs(Tt,{component:b,variant:"extended",color:"primary",to:Rt.getReaderUrl(e),state:Rt.getReaderOpenChapterLocationState(e),children:[g.jsx(Dt,{}),u?r._({id:"tXkhj/"}):r._({id:"v39wLo"})]})})}var Te=f(g.jsx("path",{d:"M16.67 13.13C18.04 14.06 19 15.32 19 17v3h4v-3c0-2.18-3.57-3.47-6.33-3.87M15 12c2.21 0 4-1.79 4-4s-1.79-4-4-4c-.47 0-.91.1-1.33.24C14.5 5.27 15 6.58 15 8s-.5 2.73-1.33 3.76c.42.14.86.24 1.33.24m-6 0c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4m0-6c1.1 0 2 .9 2 2s-.9 2-2 2-2-.9-2-2 .9-2 2-2m0 7c-2.67 0-8 1.34-8 4v3h16v-3c0-2.66-5.33-4-8-4m6 5H3v-.99C3.2 16.29 6.3 15 9 15s5.8 1.29 6 2z"}));function Pe(t){var e=t.title,n=t.emptyMessage,r=t.items,i=t.getId,o=t.getLabel,a=t.isChecked,s=t.open,l=t.onClose,c=t.slotProps,d=v(),h=d.i18n,f=(d._,u.useMemo(function(){return r.map(i)},[r])),p=u.useMemo(function(){return r.filter(a).map(i)},[r]),m=Ht(r.length,{currentKey:"default",itemIds:f,initialState:{default:p}}),b=m.selectedItemIds,j=m.handleSelection,M=m.handleSelectAll,L=m.reset,O=function(){l(),L()},B=u.useCallback(function(){var t=b.length!==p.length||b.some(function(t){return!p.includes(t)}),e=r.filter(function(t){return b.includes(i(t))});l(t?e:void 0)},[b]);return g.jsxs(y,{sx:{".MuiDialog-paper":{maxHeight:435,width:"80%"}},maxWidth:"xs",open:s,onClose:O,children:[g.jsx(w,{children:e}),g.jsx(k,{dividers:!0,children:g.jsxs(le,{children:[0===r.length&&g.jsx("span",{children:n}),r.map(function(t){return u.createElement(ue,x(x({},null==c?void 0:c.checkbox),{},{checked:b.includes(i(t)),onChange:function(e,n){return j(i(t),n)},label:o(t),key:i(t)}))})]})}),g.jsx(C,{children:g.jsx(_,{sx:{width:"100%"},children:g.jsxs(_,{direction:"row",sx:{justifyContent:"space-between",alignItems:"end",width:"100%"},children:[g.jsx(S,{onClick:function(){return M(!b.length,r.map(i))},children:b.length?h._({id:"OfhWJH"}):h._({id:"wgNoIs"})}),g.jsxs(_,{direction:"row",children:[g.jsx(S,{autoFocus:!0,onClick:O,color:"primary",children:h._({id:"dEgA5A"})}),!!r.length&&g.jsx(S,{onClick:B,color:"primary",children:h._({id:"aP3N/0"})})]})]})})})]})}var Re=function(t){var e=t.updateOption,n=t.scanlators,r=t.excludedScanlators,i=v(),o=i.i18n,a=(i._,M({variant:"dialog",popupId:"chapter-list-options-scanlator-filter-dialog"}));return n.length?g.jsxs(g.Fragment,{children:[g.jsx(ue,x(x({},L(a)),{},{label:o._({id:"uPtLnM"}),icon:g.jsx(Te,{}),checkedIcon:g.jsx(Te,{color:"warning"}),checked:!!r.length})),g.jsx(Pe,{title:o._({id:"T5rRv7"}),open:a.isOpen,onClose:function(t){t&&e("excludedScanlators",t),a.close()},items:n,getId:function(t){return t},getLabel:function(t){return t},isChecked:function(t){return r.includes(t)},slotProps:{checkbox:{checkedIcon:g.jsx(re,{})}}})]}):null},Ee={filter:{id:"o7J4JM"},sort:{id:"f6Hub0"},display:{id:"Xm/s+u"}},Ve=function(t){var e=t.open,n=t.onClose,r=t.options,i=t.updateOption,o=t.scanlators,a=t.excludedScanlators,s=v(),u=s.i18n;s._;return g.jsx(oe,{open:e,onClose:n,minHeight:150,tabs:["filter","sort","display"],tabTitle:function(t){return u._(Ee[t])},tabContent:function(t){return"filter"===t?g.jsxs(g.Fragment,{children:[g.jsx(ie,{label:u._({id:"KuVpz+"}),checked:r.unread,onChange:function(t){return i("unread",t)}}),g.jsx(ie,{label:u._({id:"Vv4iDV"}),checked:r.downloaded,onChange:function(t){return i("downloaded",t)}}),g.jsx(ie,{label:u._({id:"1C/9Sa"}),checked:r.bookmarked,onChange:function(t){return i("bookmarked",t)}}),g.jsx(Re,{scanlators:o,excludedScanlators:a,updateOption:i})]}):"sort"===t?Object.entries(Et).map(function(t){var e=m(t,2),n=e[0],o=e[1];return g.jsx(ee,{label:u._(o),checked:r.sortBy===n,sortDescending:r.reverse,onClick:function(){return n!==r.sortBy?i("sortBy",n):i("reverse",!r.reverse)}},n)}):"display"===t?g.jsxs(ce,{onChange:function(){return i("showChapterNumber",!r.showChapterNumber)},value:r.showChapterNumber,children:[g.jsx(ne,{label:u._({id:"VlO8KP"}),value:!1}),g.jsx(ne,{label:u._({id:"hFuUTP"}),value:!0})]}):null}})},ze=function(t){var e=t.mangaId,n=t.options,r=t.updateOption,i=t.chapters,o=t.scanlators,a=t.excludeScanlators,s=v(),l=s.i18n,c=(s._,m(u.useState(!1),2)),d=c[0],h=c[1],f=Nt(n),p=u.useMemo(function(){return i.every(Rt.isRead)},[i]),b=u.useMemo(function(){return i.every(Rt.isDownloaded)},[i]);return g.jsxs(g.Fragment,{children:[g.jsx(O,{title:l._({id:"onllUU"}),disabled:p,children:g.jsx(B,{disabled:p,onClick:function(){return Rt.markAsRead(Rt.getNonRead(i),!0,e)},color:"inherit",children:g.jsx(te,{})})}),g.jsx(I,{variant:"popover",popupId:"chapterlist-download-button",children:function(t){return g.jsxs(g.Fragment,{children:[g.jsx(O,{title:l._({id:"mzI/c+"}),disabled:p,children:g.jsx(B,x(x({disabled:b},L(t)),{},{color:"inherit",children:g.jsx($t,{})}))}),t.isOpen&&g.jsx(D,x(x({},T(t)),{},{children:g.jsx(zt,{mangaIds:[e],closeMenu:t.close})}))]})}}),g.jsx(O,{title:l._({id:"mGW0K2"}),children:g.jsx(B,{onClick:function(){return h(!0)},color:"inherit",children:g.jsx(Zt,{color:f?"warning":void 0})})}),g.jsx(Ve,{open:d,onClose:function(){return h(!1)},options:n,updateOption:r,scanlators:o,excludedScanlators:a})]})},Fe=H(_,{shouldForwardProp:U(["scrollbarWidth"])})(function(t){var e=t.theme,n=t.scrollbarWidth;return j({padding:e.spacing(1),paddingRight:"calc(".concat(n,"px + ").concat(e.spacing(1),")"),paddingBottom:0},e.breakpoints.down("md"),{paddingRight:e.spacing(1)})}),Ae=H(ge,{shouldForwardProp:U(["topOffset"])})(function(t){var e=t.theme,n=t.topOffset;return j({listStyle:"none",padding:0},e.breakpoints.up("md"),{height:"calc(100vh - ".concat(n,"px)"),margin:0})}),We=function(t){var e=t.selectedChapters,n=t.firstUnreadChapter,r=t.onFABMenuClose;return e.length?g.jsx(se,{title:G._({id:"2zwLiX",values:{0:e.length}}),children:function(t){return g.jsx(he,{selectedChapters:e,onClose:function(){null==r||r(),t()}})}}):n?g.jsx(De,{chapter:n}):null},He=function(t){var e=t.manga,n=t.isRefreshing,r=v(),i=r.i18n,o=(r._,P().appBarHeight),a=R.useIsBelowWidth("md"),s=m(u.useState(50),2),l=s[0],c=s[1],d=m(u.useState(null),2),h=d[0],f=d[1];E(h,u.useCallback(function(){var t;return c(null!==(t=null==h?void 0:h.offsetHeight)&&void 0!==t?t:0)},[h]));var p=R.useGetScrollbarSize("width"),b=qt(e),y=Gt(e,function(t){return J(i._({id:"cBoXe4"}),"error",A(t))}),x=V.useGetMangaChapters(z,e.id,{notifyOnNetworkStatusChange:!0}),j=x.data,w=x.loading,k=x.error,C=x.refetch,S=u.useMemo(function(){var t;return null!==(t=null==j?void 0:j.chapters.nodes)&&void 0!==t?t:[]},[null==j?void 0:j.chapters.nodes]),M=u.useMemo(function(){return Ut(S,b)},[S,b]),L=u.useMemo(function(){return Rt.getIds(M)},[M]),O=u.useMemo(function(){return Rt.getMissingCount(M)},[M]),B=0===S.length,I=!B&&0===M.length,D=Ht(L.length,{itemIds:L,currentKey:"default"}),T=D.areNoItemsSelected,H=D.areAllItemsSelected,U=D.selectedItemIds,G=D.handleSelectAll,K=D.handleSelection,X=D.clearSelection,Q=u.useCallback(function(t,e,n){return K(t,e,{selectRange:n})},[K]);return w||B&&n?g.jsx(_,{sx:{justifyContent:"center",alignItems:"center",position:"relative",flexGrow:1},children:g.jsx(F,{})}):k?g.jsx(_,{sx:{justifyContent:"center",position:"relative",flexGrow:1},children:g.jsx(Yt,{message:i._({id:"6m5aox"}),messageExtra:A(k),retry:function(){return C().catch(W("ChapterList::refetch"))}})}):g.jsxs(g.Fragment,{children:[g.jsxs(_,{direction:"column",sx:{position:"relative",flexBasis:"60%"},children:[g.jsxs(Fe,{ref:f,direction:"row",alignItems:"center",justifyContent:"space-between",scrollbarWidth:p,children:[g.jsxs(_,{children:[g.jsx(N,{variant:"h5",component:"h3",children:i._({id:"2zwLiX",values:{0:M.length}})}),!!O&&g.jsx(N,{variant:"body2",color:"warning",children:i._({id:"xFU/Nr",values:{missingChapterCount:O}})})]}),g.jsxs(_,{direction:"row",children:[T&&g.jsx(ze,{mangaId:e.id,options:b,updateOption:y,chapters:M,scanlators:Rt.getScanlators(S),excludeScanlators:b.excludedScanlators}),!!L.length&&g.jsx(ae,{areAllItemsSelected:H,areNoItemsSelected:T,onChange:function(t){return G(t,t?L:[])}})]})]}),B&&g.jsx(Yt,{message:i._({id:"1tQM/6"})}),I&&g.jsx(Yt,{message:i._({id:"cDTTdi"})}),g.jsx(Ae,{persistKey:"manga-".concat(e.id,"-chapter-list"),topOffset:o+l,style:{height:"undefined"},components:{Footer:function(){return g.jsx(q,{sx:{paddingBottom:Pt}})}},totalCount:M.length,computeItemKey:function(t){return M[t].id},itemContent:function(t){return g.jsx(de,{index:t,isSortDesc:b.reverse,chapters:M,selected:T?null:U.includes(M[t].id),showChapterNumber:b.showChapterNumber,onSelect:Q})},useWindowScroll:a,overscan:.5*window.innerHeight})]}),g.jsx(We,{selectedChapters:U.map(function(t){return S.find(function(e){return e.id===t})}).filter(function(t){return null!=t}),firstUnreadChapter:e.firstUnreadChapter,onFABMenuClose:X})]})},Ne=f(g.jsx("path",{d:"M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12zm3 4H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2m0 16H8V7h11z"}));function qe(t){return Q("MuiButtonGroup",t)}var Ue=X("MuiButtonGroup",["root","contained","outlined","text","disableElevation","disabled","firstButton","fullWidth","horizontal","vertical","colorPrimary","colorSecondary","grouped","groupedHorizontal","groupedVertical","groupedText","groupedTextHorizontal","groupedTextVertical","groupedTextPrimary","groupedTextSecondary","groupedOutlined","groupedOutlinedHorizontal","groupedOutlinedVertical","groupedOutlinedPrimary","groupedOutlinedSecondary","groupedContained","groupedContainedHorizontal","groupedContainedVertical","groupedContainedPrimary","groupedContainedSecondary","lastButton","middleButton"]),Ge=H("div",{name:"MuiButtonGroup",slot:"Root",overridesResolver:function(t,e){var n=t.ownerState;return[j({},"& .".concat(Ue.grouped),e.grouped),j({},"& .".concat(Ue.grouped),e["grouped".concat(et(n.orientation))]),j({},"& .".concat(Ue.grouped),e["grouped".concat(et(n.variant))]),j({},"& .".concat(Ue.grouped),e["grouped".concat(et(n.variant)).concat(et(n.orientation))]),j({},"& .".concat(Ue.grouped),e["grouped".concat(et(n.variant)).concat(et(n.color))]),j({},"& .".concat(Ue.firstButton),e.firstButton),j({},"& .".concat(Ue.lastButton),e.lastButton),j({},"& .".concat(Ue.middleButton),e.middleButton),e.root,e[n.variant],!0===n.disableElevation&&e.disableElevation,n.fullWidth&&e.fullWidth,"vertical"===n.orientation&&e.vertical]}})(rt(function(t){var e=t.theme;return j({display:"inline-flex",borderRadius:(e.vars||e).shape.borderRadius,variants:[{props:{variant:"contained"},style:{boxShadow:(e.vars||e).shadows[2]}},{props:{disableElevation:!0},style:{boxShadow:"none"}},{props:{fullWidth:!0},style:{width:"100%"}},{props:{orientation:"vertical"},style:j(j({flexDirection:"column"},"& .".concat(Ue.lastButton,",& .").concat(Ue.middleButton),{borderTopRightRadius:0,borderTopLeftRadius:0}),"& .".concat(Ue.firstButton,",& .").concat(Ue.middleButton),{borderBottomRightRadius:0,borderBottomLeftRadius:0})},{props:{orientation:"horizontal"},style:j(j({},"& .".concat(Ue.firstButton,",& .").concat(Ue.middleButton),{borderTopRightRadius:0,borderBottomRightRadius:0}),"& .".concat(Ue.lastButton,",& .").concat(Ue.middleButton),{borderTopLeftRadius:0,borderBottomLeftRadius:0})},{props:{variant:"text",orientation:"horizontal"},style:j({},"& .".concat(Ue.firstButton,",& .").concat(Ue.middleButton),j({borderRight:e.vars?"1px solid ".concat(e.alpha(e.vars.palette.common.onBackground,.23)):"1px solid ".concat("light"===e.palette.mode?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)")},"&.".concat(Ue.disabled),{borderRight:"1px solid ".concat((e.vars||e).palette.action.disabled)}))},{props:{variant:"text",orientation:"vertical"},style:j({},"& .".concat(Ue.firstButton,",& .").concat(Ue.middleButton),j({borderBottom:e.vars?"1px solid ".concat(e.alpha(e.vars.palette.common.onBackground,.23)):"1px solid ".concat("light"===e.palette.mode?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)")},"&.".concat(Ue.disabled),{borderBottom:"1px solid ".concat((e.vars||e).palette.action.disabled)}))}].concat(d(Object.entries(e.palette).filter(it()).flatMap(function(t){var n=m(t,1)[0];return[{props:{variant:"text",color:n},style:j({},"& .".concat(Ue.firstButton,",& .").concat(Ue.middleButton),{borderColor:e.alpha((e.vars||e).palette[n].main,.5)})}]})),[{props:{variant:"outlined",orientation:"horizontal"},style:j(j({},"& .".concat(Ue.firstButton,",& .").concat(Ue.middleButton),{borderRightColor:"transparent","&:hover":{borderRightColor:"currentColor"}}),"& .".concat(Ue.lastButton,",& .").concat(Ue.middleButton),{marginLeft:-1})},{props:{variant:"outlined",orientation:"vertical"},style:j(j({},"& .".concat(Ue.firstButton,",& .").concat(Ue.middleButton),{borderBottomColor:"transparent","&:hover":{borderBottomColor:"currentColor"}}),"& .".concat(Ue.lastButton,",& .").concat(Ue.middleButton),{marginTop:-1})},{props:{variant:"contained",orientation:"horizontal"},style:j({},"& .".concat(Ue.firstButton,",& .").concat(Ue.middleButton),j({borderRight:"1px solid ".concat((e.vars||e).palette.grey[400])},"&.".concat(Ue.disabled),{borderRight:"1px solid ".concat((e.vars||e).palette.action.disabled)}))},{props:{variant:"contained",orientation:"vertical"},style:j({},"& .".concat(Ue.firstButton,",& .").concat(Ue.middleButton),j({borderBottom:"1px solid ".concat((e.vars||e).palette.grey[400])},"&.".concat(Ue.disabled),{borderBottom:"1px solid ".concat((e.vars||e).palette.action.disabled)}))}],d(Object.entries(e.palette).filter(it(["dark"])).map(function(t){var n=m(t,1)[0];return{props:{variant:"contained",color:n},style:j({},"& .".concat(Ue.firstButton,",& .").concat(Ue.middleButton),{borderColor:(e.vars||e).palette[n].dark})}})))},"& .".concat(Ue.grouped),{minWidth:40,boxShadow:"none",props:{variant:"contained"},style:{"&:hover":{boxShadow:"none"}}})})),Je=u.forwardRef(function(e,n){var r=Y({props:e,name:"MuiButtonGroup"}),i=r.children,o=r.className,a=r.color,s=void 0===a?"primary":a,l=r.component,d=void 0===l?"div":l,h=r.disabled,f=void 0!==h&&h,p=r.disableElevation,m=void 0!==p&&p,v=r.disableFocusRipple,b=void 0!==v&&v,y=r.disableRipple,j=void 0!==y&&y,w=r.fullWidth,k=void 0!==w&&w,C=r.orientation,_=void 0===C?"horizontal":C,S=r.size,M=void 0===S?"medium":S,L=r.variant,O=void 0===L?"outlined":L,B=c(r,t),I=x(x({},r),{},{color:s,component:d,disabled:f,disableElevation:m,disableFocusRipple:b,disableRipple:j,fullWidth:k,orientation:_,size:M,variant:O}),D=function(t){var e=t.classes,n=t.color,r=t.disabled,i=t.disableElevation,o=t.fullWidth,a=t.orientation,s=t.variant,u={root:["root",s,a,o&&"fullWidth",i&&"disableElevation","color".concat(et(n))],grouped:["grouped","grouped".concat(et(a)),"grouped".concat(et(s)),"grouped".concat(et(s)).concat(et(a)),"grouped".concat(et(s)).concat(et(n)),r&&"disabled"],firstButton:["firstButton"],lastButton:["lastButton"],middleButton:["middleButton"]};return nt(u,qe,e)}(I),T=u.useMemo(function(){return{className:D.grouped,color:s,disabled:f,disableElevation:m,disableFocusRipple:b,disableRipple:j,fullWidth:k,size:M,variant:O}},[s,f,m,b,j,k,M,O,D.grouped]),P=function(t){return u.Children.toArray(t).filter(function(t){return u.isValidElement(t)})}(i),R=P.length,E=function(t){var e=0===t,n=t===R-1;return e&&n?"":e?D.firstButton:n?D.lastButton:D.middleButton};return g.jsx(Ge,x(x({as:d,role:"group",className:Z(D.root,o),ref:n,ownerState:I},B),{},{children:g.jsx($.Provider,{value:T,children:P.map(function(t,e){return g.jsx(tt.Provider,{value:E(e),children:t},e)})})}))}),Ke=function(t){var n=t.children,r=c(t,e);return g.jsx(S,x(x({},r),{},{children:g.jsx(_,{direction:"row",sx:{alignItems:"center",justifyContent:"center",gap:1,flexWrap:"wrap"},children:n})}))},Xe=f(g.jsx("path",{d:"M9 16.17 4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z"})),Qe=function(t){var e,n,r=t.manga,i=v(),o=i.i18n,a=(i._,ot()),s=V.useGetTrackerList(at),u=null!==(e=null===(n=s.data)||void 0===n?void 0:n.trackers.nodes)&&void 0!==e?e:[],l=r.trackRecords.nodes,c=ke.getLoggedIn(u),d=ke.getLoggedIn(ke.getTrackers(l,u));return g.jsx(I,{variant:"dialog",popupId:"manga-track-modal",children:function(t){return g.jsxs(g.Fragment,{children:[g.jsxs(Ke,x(x({},L(t)),{},{size:"medium",disabled:s.loading||!!s.error,onClick:function(){return e=t.open,void(s.error?J(o._({id:"GIyQgE"}),"error",null===(n=s.error)||void 0===n?void 0:n.toString()):c.length?e():a(ut.settings.childRoutes.tracking.path));var e,n},variant:d.length?"contained":"outlined",children:[d.length?g.jsx(Xe,{}):g.jsx(we,{}),d.length?o._({id:"skmzin",values:{0:d.length}}):o._({id:"U0HZma"})]})),t.isOpen&&g.jsx(y,x(x({},st(t)),{},{maxWidth:"md",fullWidth:!0,scroll:"paper",children:g.jsx(Ft,{manga:r})}))]})}})},Ye=f(g.jsx("path",{d:"M21 11V3h-8l3.29 3.29-10 10L3 13v8h8l-3.29-3.29 10-10z"})),Ze=function(){return l(function t(e,n){s(this,t),this.pixels=e,this.opts=n;var r=n.sigBits,i=function(t,e,n){return(t<<2*r)+(e<<r)+n};this.getColorIndex=i;var o,a,u,l,c,d,h,f,g,p=8-r,m=new Uint32Array(1<<3*r);o=u=c=0,a=l=d=Number.MAX_VALUE;for(var v=e.length/4,b=0;b<v;){var y=4*b;if(b++,h=e[y+0],f=e[y+1],g=e[y+2],0!==e[y+3]){var x=i(h>>=p,f>>=p,g>>=p);void 0===m[x]&&(m[x]=0),m[x]+=1,h>o&&(o=h),h<a&&(a=h),f>u&&(u=f),f<l&&(l=f),g>c&&(c=g),g<d&&(d=g)}}this._colorCount=m.reduce(function(t,e){return e>0?t+1:t},0),this.hist=m,this.rmax=o,this.rmin=a,this.gmax=u,this.gmin=l,this.bmax=c,this.bmin=d},[{key:"colorCount",get:function(){return this._colorCount}}])}();var $e=function(t){function e(){return s(this,e),r(this,e,arguments)}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&a(t,e)}(e,t),l(e,[{key:"_getCanvas",value:function(){if(!this._canvas)throw new Error("Canvas is not initialized");return this._canvas}},{key:"_getContext",value:function(){if(!this._context)throw new Error("Context is not initialized");return this._context}},{key:"_getWidth",value:function(){if(!this._width)throw new Error("Width is not initialized");return this._width}},{key:"_getHeight",value:function(){if(!this._height)throw new Error("Height is not initialized");return this._height}},{key:"_initCanvas",value:function(){var t=this.image;if(!t)throw new Error("Image is not initialized");var e=this._canvas=document.createElement("canvas"),n=e.getContext("2d");if(!n)throw new ReferenceError("Failed to create canvas context");this._context=n,e.className="@vibrant/canvas",e.style.display="none",this._width=e.width=t.width,this._height=e.height=t.height,n.drawImage(t,0,0),document.body.appendChild(e)}},{key:"load",value:function(t){var e,n,r,i,o,a,s,u=this;if("string"==typeof t)e=document.createElement("img"),n=t,(s=new URL(n,location.href)).protocol===location.protocol&&s.host===location.host&&s.port===location.port||(r=window.location.href,i=n,o=new URL(r),a=new URL(i),o.protocol===a.protocol&&o.hostname===a.hostname&&o.port===a.port)||(e.crossOrigin="anonymous"),e.src=n;else{if(!(t instanceof HTMLImageElement))return Promise.reject(new Error("Cannot load buffer as an image in browser"));e=t,n=t.src}return this.image=e,new Promise(function(t,r){var i=function(){u._initCanvas(),t(u)};e.complete?i():(e.onload=i,e.onerror=function(t){return r(new Error("Fail to load image: ".concat(n)))})})}},{key:"clear",value:function(){this._getContext().clearRect(0,0,this._getWidth(),this._getHeight())}},{key:"update",value:function(t){this._getContext().putImageData(t,0,0)}},{key:"getWidth",value:function(){return this._getWidth()}},{key:"getHeight",value:function(){return this._getHeight()}},{key:"resize",value:function(t,e,n){if(!this.image)throw new Error("Image is not initialized");this._width=this._getCanvas().width=t,this._height=this._getCanvas().height=e,this._getContext().scale(n,n),this._getContext().drawImage(this.image,0,0)}},{key:"getPixelCount",value:function(){return this._getWidth()*this._getHeight()}},{key:"getImageData",value:function(){return this._getContext().getImageData(0,0,this._getWidth(),this._getHeight())}},{key:"remove",value:function(){this._canvas&&this._canvas.parentNode&&this._canvas.parentNode.removeChild(this._canvas)}}])}(function(){return l(function t(){s(this,t)},[{key:"scaleDown",value:function(t){var e=this.getWidth(),n=this.getHeight(),r=1;if(t.maxDimension>0){var i=Math.max(e,n);i>t.maxDimension&&(r=t.maxDimension/i)}else r=1/t.quality;r<1&&this.resize(e*r,n*r,r)}}])}());function tn(t){for(var e=arguments.length,r=new Array(e>1?e-1:0),i=1;i<e;i++)r[i-1]=arguments[i];return r.forEach(function(e){if(e)for(var r in e)if(e.hasOwnProperty(r)){var i=e[r];Array.isArray(i)?t[r]=i.slice(0):"object"===n(i)?(t[r]||(t[r]={}),tn(t[r],i)):t[r]=i}}),t}var en=function(){return l(function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};s(this,t),this._src=e,this._opts=tn({},un.DefaultOpts,n)},[{key:"maxColorCount",value:function(t){return this._opts.colorCount=t,this}},{key:"maxDimension",value:function(t){return this._opts.maxDimension=t,this}},{key:"addFilter",value:function(t){return this._opts.filters?this._opts.filters.push(t):this._opts.filters=[t],this}},{key:"removeFilter",value:function(t){if(this._opts.filters){var e=this._opts.filters.indexOf(t);e>0&&this._opts.filters.splice(e)}return this}},{key:"clearFilters",value:function(){return this._opts.filters=[],this}},{key:"quality",value:function(t){return this._opts.quality=t,this}},{key:"useImageClass",value:function(t){return this._opts.ImageClass=t,this}},{key:"useGenerator",value:function(t,e){return this._opts.generators||(this._opts.generators=[]),this._opts.generators.push(e?{name:t,options:e}:t),this}},{key:"useQuantizer",value:function(t,e){return this._opts.quantizer=e?{name:t,options:e}:t,this}},{key:"build",value:function(){return new un(this._src,this._opts)}},{key:"getPalette",value:function(){return this.build().getPalette()}}])}(),nn=function(){return l(function t(e){s(this,t),this.pipeline=e,this._map={}},[{key:"names",value:function(){return Object.keys(this._map)}},{key:"has",value:function(t){return!!this._map[t]}},{key:"get",value:function(t){return this._map[t]}},{key:"register",value:function(t,e){return this._map[t]=e,this.pipeline}}])}(),rn=function(){return l(function t(){s(this,t),this.filter=new nn(this),this.quantizer=new nn(this),this.generator=new nn(this)},[{key:"_buildProcessTasks",value:function(t){var e=this,n=t.filters,r=t.quantizer,i=t.generators;return 1===i.length&&"*"===i[0]&&(i=this.generator.names()),{filters:n.map(function(t){return o(e.filter,t)}),quantizer:o(this.quantizer,r),generators:i.map(function(t){return o(e.generator,t)})};function o(t,e){var n,r;return"string"==typeof e?n=e:(n=e.name,r=e.options),{name:n,fn:t.get(n),options:r}}}},{key:"process",value:(e=p(h().m(function t(e,n){var r,i,o,a,s,u,l;return h().w(function(t){for(;;)switch(t.n){case 0:return r=this._buildProcessTasks(n),i=r.filters,o=r.quantizer,a=r.generators,t.n=1,this._filterColors(i,e);case 1:return s=t.v,t.n=2,this._generateColors(o,s);case 2:return u=t.v,t.n=3,this._generatePalettes(a,u);case 3:return l=t.v,t.a(2,{colors:u,palettes:l})}},t,this)})),function(t,n){return e.apply(this,arguments)})},{key:"_filterColors",value:function(t,e){return Promise.resolve(function(t,e){var n;if(e.length>0)for(var r,i,o,a,s,u=t.data,l=u.length/4,c=0;c<l;c++){i=u[0+(r=4*c)],o=u[r+1],a=u[r+2],s=u[r+3];for(var d=0;d<e.length;d++)if(!(null==(n=e[d])?void 0:n.call(e,i,o,a,s))){u[r+3]=0;break}}return t}(e,t.map(function(t){return t.fn})))}},{key:"_generateColors",value:function(t,e){return Promise.resolve(t.fn(e.data,t.options))}},{key:"_generatePalettes",value:(t=p(h().m(function t(e,n){var r;return h().w(function(t){for(;;)switch(t.n){case 0:return t.n=1,Promise.all(e.map(function(t){var e=t.fn,r=t.options;return Promise.resolve(e(n,r))}));case 1:return r=t.v,t.a(2,Promise.resolve(r.reduce(function(t,n,r){return t[e[r].name]=n,t},{})))}},t)})),function(e,n){return t.apply(this,arguments)})}]);var t,e}();function on(t,e,n){var r,i,o;function a(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+6*(e-t)*n:n<.5?e:n<2/3?t+(e-t)*(2/3-n)*6:t}if(0===e)r=i=o=n;else{var s=n<.5?n*(1+e):n+e-n*e,u=2*n-s;r=a(u,s,t+1/3),i=a(u,s,t),o=a(u,s,t-1/3)}return[255*r,255*i,255*o]}var an=function(){function t(e,n){s(this,t),this._rgb=e,this._population=n}return l(t,[{key:"r",get:function(){return this._rgb[0]}},{key:"g",get:function(){return this._rgb[1]}},{key:"b",get:function(){return this._rgb[2]}},{key:"rgb",get:function(){return this._rgb}},{key:"hsl",get:function(){if(!this._hsl){var t=m(this._rgb,3),e=t[0],n=t[1],r=t[2];this._hsl=function(t,e,n){t/=255,e/=255,n/=255;var r=Math.max(t,e,n),i=Math.min(t,e,n),o=0,a=0,s=(r+i)/2;if(r!==i){var u=r-i;switch(a=s>.5?u/(2-r-i):u/(r+i),r){case t:o=(e-n)/u+(e<n?6:0);break;case e:o=(n-t)/u+2;break;case n:o=(t-e)/u+4}o/=6}return[o,a,s]}(e,n,r)}return this._hsl}},{key:"hex",get:function(){if(!this._hex){var t=m(this._rgb,3),e=t[0],n=t[1],r=t[2];this._hex=function(t,e,n){return"#"+((1<<24)+(t<<16)+(e<<8)+n).toString(16).slice(1,7)}(e,n,r)}return this._hex}},{key:"population",get:function(){return this._population}},{key:"toJSON",value:function(){return{rgb:this.rgb,population:this.population}}},{key:"getYiq",value:function(){if(!this._yiq){var t=this._rgb;this._yiq=(299*t[0]+587*t[1]+114*t[2])/1e3}return this._yiq}},{key:"titleTextColor",get:function(){return this._titleTextColor||(this._titleTextColor=this.getYiq()<200?"#fff":"#000"),this._titleTextColor}},{key:"bodyTextColor",get:function(){return this._bodyTextColor||(this._bodyTextColor=this.getYiq()<150?"#fff":"#000"),this._bodyTextColor}}],[{key:"applyFilters",value:function(t,e){return e.length>0?t.filter(function(t){for(var n,r=t.r,i=t.g,o=t.b,a=0;a<e.length;a++)if(!(null==(n=e[a])?void 0:n.call(e,r,i,o,255)))return!1;return!0}):t}},{key:"clone",value:function(e){return new t(e._rgb,e._population)}}])}(),sn=function(){function t(e,n){s(this,t),this._src=e,this.opts=tn({},t.DefaultOpts,n)}return l(t,[{key:"result",get:function(){return this._result}},{key:"_process",value:function(e,n){e.scaleDown(this.opts);var r=function(t,e){var n=t.colorCount,r=t.quantizer,i=t.generators,o=t.filters,a={colorCount:n},s="string"==typeof r?{name:r,options:{}}:r;return s.options=tn({},a,s.options),tn({},{quantizer:s,generators:i,filters:o},e)}(this.opts,n);return t._pipeline.process(e.getImageData(),r)}},{key:"getPalette",value:(n=p(h().m(function t(){var e,n,r,i,o;return h().w(function(t){for(;;)switch(t.p=t.n){case 0:return e=new this.opts.ImageClass,t.p=1,t.n=2,e.load(this._src);case 2:return n=t.v,t.n=3,this._process(n,{generators:["default"]});case 3:if(r=t.v,this._result=r,i=r.palettes.default){t.n=4;break}throw new Error("Something went wrong and a palette was not found, please file a bug against our GitHub repo: https://github.com/vibrant-Colors/node-vibrant/");case 4:return e.remove(),t.a(2,i);case 5:return t.p=5,o=t.v,e.remove(),t.a(2,Promise.reject(o))}},t,this,[[1,5]])})),function(){return n.apply(this,arguments)})},{key:"getPalettes",value:(e=p(h().m(function t(){var e,n,r,i,o;return h().w(function(t){for(;;)switch(t.p=t.n){case 0:return e=new this.opts.ImageClass,t.p=1,t.n=2,e.load(this._src);case 2:return n=t.v,t.n=3,this._process(n,{generators:["*"]});case 3:return r=t.v,this._result=r,i=r.palettes,e.remove(),t.a(2,i);case 4:return t.p=4,o=t.v,e.remove(),t.a(2,Promise.reject(o))}},t,this,[[1,4]])})),function(){return e.apply(this,arguments)})}],[{key:"use",value:function(t){this._pipeline=t}},{key:"from",value:function(t){return new en(t)}}]);var e,n}();sn.DefaultOpts={colorCount:64,quality:5,filters:[]};var un=sn;un.DefaultOpts.quantizer="mmcq",un.DefaultOpts.generators=["default"],un.DefaultOpts.filters=["default"],un.DefaultOpts.ImageClass=$e;var ln=function(){function t(e,n,r,i,o,a,u){s(this,t),this.histogram=u,this._volume=-1,this._avg=null,this._count=-1,this.dimension={r1:e,r2:n,g1:r,g2:i,b1:o,b2:a}}return l(t,[{key:"invalidate",value:function(){this._volume=this._count=-1,this._avg=null}},{key:"volume",value:function(){if(this._volume<0){var t=this.dimension,e=t.r1,n=t.r2,r=t.g1,i=t.g2,o=t.b1,a=t.b2;this._volume=(n-e+1)*(i-r+1)*(a-o+1)}return this._volume}},{key:"count",value:function(){if(this._count<0){for(var t=this.histogram,e=t.hist,n=t.getColorIndex,r=this.dimension,i=r.r1,o=r.r2,a=r.g1,s=r.g2,u=r.b1,l=r.b2,c=0,d=i;d<=o;d++)for(var h=a;h<=s;h++)for(var f=u;f<=l;f++){var g=n(d,h,f);e[g]&&(c+=e[g])}this._count=c}return this._count}},{key:"clone",value:function(){var e=this.histogram,n=this.dimension;return new t(n.r1,n.r2,n.g1,n.g2,n.b1,n.b2,e)}},{key:"avg",value:function(){if(!this._avg){var t,e,n,r=this.histogram,i=r.hist,o=r.getColorIndex,a=this.dimension,s=a.r1,u=a.r2,l=a.g1,c=a.g2,d=a.b1,h=a.b2,f=0;t=e=n=0;for(var g=s;g<=u;g++)for(var p=l;p<=c;p++)for(var m=d;m<=h;m++){var v=i[o(g,p,m)];v&&(f+=v,t+=v*(g+.5)*8,e+=v*(p+.5)*8,n+=v*(m+.5)*8)}this._avg=f?[~~(t/f),~~(e/f),~~(n/f)]:[~~(8*(s+u+1)/2),~~(8*(l+c+1)/2),~~(8*(d+h+1)/2)]}return this._avg}},{key:"contains",value:function(t){var e=m(t,3),n=e[0],r=e[1],i=e[2],o=this.dimension,a=o.r1,s=o.r2,u=o.g1,l=o.g2,c=o.b1,d=o.b2;return r>>=3,i>>=3,(n>>=3)>=a&&n<=s&&r>=u&&r<=l&&i>=c&&i<=d}},{key:"split",value:function(){var t=this.histogram,e=t.hist,n=t.getColorIndex,r=this.dimension,i=r.r1,o=r.r2,a=r.g1,s=r.g2,u=r.b1,l=r.b2,c=this.count();if(!c)return[];if(1===c)return[this.clone()];var d,h,f=o-i+1,g=s-a+1,p=l-u+1,m=Math.max(f,g,p),v=null;d=h=0;var b=null;if(m===f){b="r",v=new Uint32Array(o+1);for(var y=i;y<=o;y++){d=0;for(var x=a;x<=s;x++)for(var j=u;j<=l;j++){var w=n(y,x,j);e[w]&&(d+=e[w])}h+=d,v[y]=h}}else if(m===g){b="g",v=new Uint32Array(s+1);for(var k=a;k<=s;k++){d=0;for(var C=i;C<=o;C++)for(var _=u;_<=l;_++){var S=n(C,k,_);e[S]&&(d+=e[S])}h+=d,v[k]=h}}else{b="b",v=new Uint32Array(l+1);for(var M=u;M<=l;M++){d=0;for(var L=i;L<=o;L++)for(var O=a;O<=s;O++){var B=n(L,O,M);e[B]&&(d+=e[B])}h+=d,v[M]=h}}for(var I=-1,D=new Uint32Array(v.length),T=0;T<v.length;T++){var P=v[T];P&&(I<0&&P>h/2&&(I=T),D[T]=h-P)}var R=this;return function(t){var e=t+"1",n=t+"2",r=R.dimension[e],i=R.dimension[n],o=R.clone(),a=R.clone(),s=I-r,u=i-I;for(s<=u?(i=Math.min(i-1,~~(I+u/2)),i=Math.max(0,i)):(i=Math.max(r,~~(I-1-s/2)),i=Math.min(R.dimension[n],i));!v[i];)i++;for(var l=D[i];!l&&v[i-1];)l=D[--i];return o.dimension[n]=i,a.dimension[e]=i+1,[o,a]}(b)}}],[{key:"build",value:function(e){var n=new Ze(e,{sigBits:5});return new t(n.rmin,n.rmax,n.gmin,n.gmax,n.bmin,n.bmax,n)}}])}(),cn=function(){return l(function t(e){s(this,t),this._comparator=e,this.contents=[],this._sorted=!1},[{key:"_sort",value:function(){this._sorted||(this.contents.sort(this._comparator),this._sorted=!0)}},{key:"push",value:function(t){this.contents.push(t),this._sorted=!1}},{key:"peek",value:function(t){return this._sort(),t="number"==typeof t?t:this.contents.length-1,this.contents[t]}},{key:"pop",value:function(){return this._sort(),this.contents.pop()}},{key:"size",value:function(){return this.contents.length}},{key:"map",value:function(t){return this._sort(),this.contents.map(t)}}])}();function dn(t,e){for(var n=t.size();t.size()<e;){var r=t.pop();if(!(r&&r.count()>0))break;var i=m(r.split(),2),o=i[0],a=i[1];if(!o)break;if(t.push(o),a&&a.count()>0&&t.push(a),t.size()===n)break;n=t.size()}}var hn={targetDarkLuma:.26,maxDarkLuma:.45,minLightLuma:.55,targetLightLuma:.74,minNormalLuma:.3,targetNormalLuma:.5,maxNormalLuma:.7,targetMutesSaturation:.3,maxMutesSaturation:.4,targetVibrantSaturation:1,minVibrantSaturation:.35,weightSaturation:3,weightLuma:6.5,weightPopulation:.5};function fn(t,e,n,r,i,o,a,s,u,l){var c=null,d=0;return e.forEach(function(e){var h=m(e.hsl,3),f=h[1],g=h[2];if(f>=s&&f<=u&&g>=i&&g<=o&&!function(t,e){return t.Vibrant===e||t.DarkVibrant===e||t.LightVibrant===e||t.Muted===e||t.DarkMuted===e||t.LightMuted===e}(t,e)){var p=function(t,e,n,r,i,o,a){function s(t,e){return 1-Math.abs(t-e)}return function(){for(var t=0,e=0,n=0;n<arguments.length;n+=2){var r=n<0||arguments.length<=n?void 0:arguments[n],i=n+1<0||arguments.length<=n+1?void 0:arguments[n+1];r&&i&&(t+=r*i,e+=i)}return t/e}(s(t,e),a.weightSaturation,s(n,r),a.weightLuma,i/o,a.weightPopulation)}(f,a,g,r,e.population,n,l);(null===c||p>d)&&(c=e,d=p)}}),c}var gn=(new rn).filter.register("default",function(t,e,n,r){return r>=125&&!(t>250&&e>250&&n>250)}).quantizer.register("mmcq",function(t,e){if(0===t.length||e.colorCount<2||e.colorCount>256)throw new Error("Wrong MMCQ parameters");var n=ln.build(t);n.histogram.colorCount;var r=new cn(function(t,e){return t.count()-e.count()});r.push(n),dn(r,.75*e.colorCount);var i=new cn(function(t,e){return t.count()*t.volume()-e.count()*e.volume()});return i.contents=r.contents,dn(i,e.colorCount-i.size()),function(t){var e=[];for(;t.size();){var n=t.pop(),r=n.avg();e.push(new an(r,n.count()))}return e}(i)}).generator.register("default",function(t,e){e=Object.assign({},hn,e);var n=function(t){var e=0;return t.forEach(function(t){e=Math.max(e,t.population)}),e}(t),r=function(t,e,n){var r={Vibrant:null,DarkVibrant:null,LightVibrant:null,Muted:null,DarkMuted:null,LightMuted:null};return r.Vibrant=fn(r,t,e,n.targetNormalLuma,n.minNormalLuma,n.maxNormalLuma,n.targetVibrantSaturation,n.minVibrantSaturation,1,n),r.LightVibrant=fn(r,t,e,n.targetLightLuma,n.minLightLuma,1,n.targetVibrantSaturation,n.minVibrantSaturation,1,n),r.DarkVibrant=fn(r,t,e,n.targetDarkLuma,0,n.maxDarkLuma,n.targetVibrantSaturation,n.minVibrantSaturation,1,n),r.Muted=fn(r,t,e,n.targetNormalLuma,n.minNormalLuma,n.maxNormalLuma,n.targetMutesSaturation,0,n.maxMutesSaturation,n),r.LightMuted=fn(r,t,e,n.targetLightLuma,n.minLightLuma,1,n.targetMutesSaturation,0,n.maxMutesSaturation,n),r.DarkMuted=fn(r,t,e,n.targetDarkLuma,0,n.maxDarkLuma,n.targetMutesSaturation,0,n.maxMutesSaturation,n),r}(t,n,e);return function(t,e,n){if(!t.Vibrant&&!t.DarkVibrant&&!t.LightVibrant){if(!t.DarkVibrant&&t.DarkMuted){var r=m(t.DarkMuted.hsl,3),i=r[0],o=r[1],a=r[2];a=n.targetDarkLuma,t.DarkVibrant=new an(on(i,o,a),0)}if(!t.LightVibrant&&t.LightMuted){var s=m(t.LightMuted.hsl,3),u=s[0],l=s[1],c=s[2];c=n.targetDarkLuma,t.DarkVibrant=new an(on(u,l,c),0)}}if(!t.Vibrant&&t.DarkVibrant){var d=m(t.DarkVibrant.hsl,3),h=d[0],f=d[1],g=d[2];g=n.targetNormalLuma,t.Vibrant=new an(on(h,f,g),0)}else if(!t.Vibrant&&t.LightVibrant){var p=m(t.LightVibrant.hsl,3),v=p[0],b=p[1],y=p[2];y=n.targetNormalLuma,t.Vibrant=new an(on(v,b,y),0)}if(!t.DarkVibrant&&t.Vibrant){var x=m(t.Vibrant.hsl,3),j=x[0],w=x[1],k=x[2];k=n.targetDarkLuma,t.DarkVibrant=new an(on(j,w,k),0)}if(!t.LightVibrant&&t.Vibrant){var C=m(t.Vibrant.hsl,3),_=C[0],S=C[1],M=C[2];M=n.targetLightLuma,t.LightVibrant=new an(on(_,S,M),0)}if(!t.Muted&&t.Vibrant){var L=m(t.Vibrant.hsl,3),O=L[0],B=L[1],I=L[2];I=n.targetMutesSaturation,t.Muted=new an(on(O,B,I),0)}if(!t.DarkMuted&&t.DarkVibrant){var D=m(t.DarkVibrant.hsl,3),T=D[0],P=D[1],R=D[2];R=n.targetMutesSaturation,t.DarkMuted=new an(on(T,P,R),0)}if(!t.LightMuted&&t.LightVibrant){var E=m(t.LightVibrant.hsl,3),V=E[0],z=E[1],F=E[2];F=n.targetMutesSaturation,t.LightMuted=new an(on(V,z,F),0)}}(r,0,e),r});/*! Fast Average Color | Â© 2025 Denis Seleznev | MIT License | https://github.com/fast-average-color/fast-average-color */function pn(t){var e=t.toString(16);return 1===e.length?"0"+e:e}function mn(t){return"#"+t.map(pn).join("")}function vn(t){return t?(e=t,Array.isArray(e[0])?t:[t]):[];var e}function bn(t,e,n){for(var r=0;r<n.length;r++)if(yn(t,e,n[r]))return!0;return!1}function yn(t,e,n){switch(n.length){case 3:if(function(t,e,n){if(255!==t[e+3])return!0;if(t[e]===n[0]&&t[e+1]===n[1]&&t[e+2]===n[2])return!0;return!1}(t,e,n))return!0;break;case 4:if(function(t,e,n){if(t[e+3]&&n[3])return t[e]===n[0]&&t[e+1]===n[1]&&t[e+2]===n[2]&&t[e+3]===n[3];return t[e+3]===n[3]}(t,e,n))return!0;break;case 5:if(function(t,e,n){var r=n[0],i=n[1],o=n[2],a=n[3],s=n[4],u=t[e+3],l=xn(u,a,s);if(!a)return l;if(!u&&l)return!0;if(xn(t[e],r,s)&&xn(t[e+1],i,s)&&xn(t[e+2],o,s)&&l)return!0;return!1}(t,e,n))return!0;break;default:return!1}}function xn(t,e,n){return t>=e-n&&t<=e+n}un.use(gn);function jn(t,e,n){for(var r={},i=n.dominantDivider||24,o=n.ignoredColor,a=n.step,s=[0,0,0,0,0],u=0;u<e;u+=a){var l=t[u],c=t[u+1],d=t[u+2],h=t[u+3];if(!o||!bn(t,u,o)){var f=Math.round(l/i)+","+Math.round(c/i)+","+Math.round(d/i);r[f]?r[f]=[r[f][0]+l*h,r[f][1]+c*h,r[f][2]+d*h,r[f][3]+h,r[f][4]+1]:r[f]=[l*h,c*h,d*h,h,1],s[4]<r[f][4]&&(s=r[f])}}var g=s[0],p=s[1],m=s[2],v=s[3],b=s[4];return v?[Math.round(g/v),Math.round(p/v),Math.round(m/v),Math.round(v/b)]:n.defaultColor}function wn(t,e,n){for(var r=0,i=0,o=0,a=0,s=0,u=n.ignoredColor,l=n.step,c=0;c<e;c+=l){var d=t[c+3],h=t[c]*d,f=t[c+1]*d,g=t[c+2]*d;u&&bn(t,c,u)||(r+=h,i+=f,o+=g,a+=d,s++)}return a?[Math.round(r/a),Math.round(i/a),Math.round(o/a),Math.round(a/s)]:n.defaultColor}function kn(t,e,n){for(var r=0,i=0,o=0,a=0,s=0,u=n.ignoredColor,l=n.step,c=0;c<e;c+=l){var d=t[c],h=t[c+1],f=t[c+2],g=t[c+3];u&&bn(t,c,u)||(r+=d*d*g,i+=h*h*g,o+=f*f*g,a+=g,s++)}return a?[Math.round(Math.sqrt(r/a)),Math.round(Math.sqrt(i/a)),Math.round(Math.sqrt(o/a)),Math.round(a/s)]:n.defaultColor}function Cn(t){return _n(t,"defaultColor",[0,0,0,0])}function _n(t,e,n){return void 0===t[e]?n:t[e]}function Sn(t){if(Ln(t)){var e=t.naturalWidth,n=t.naturalHeight;return t.naturalWidth||-1===t.src.search(/\.svg(\?|$)/i)||(e=n=100),{width:e,height:n}}return function(t){return"undefined"!=typeof HTMLVideoElement&&t instanceof HTMLVideoElement}(t)?{width:t.videoWidth,height:t.videoHeight}:Bn(t)?{width:t.codedWidth,height:t.codedHeight}:{width:t.width,height:t.height}}function Mn(t){return function(t){return"undefined"!=typeof HTMLCanvasElement&&t instanceof HTMLCanvasElement}(t)?"canvas":function(t){return On&&t instanceof OffscreenCanvas}(t)?"offscreencanvas":Bn(t)?"videoframe":function(t){return"undefined"!=typeof ImageBitmap&&t instanceof ImageBitmap}(t)?"imagebitmap":t.src}function Ln(t){return"undefined"!=typeof HTMLImageElement&&t instanceof HTMLImageElement}var On="undefined"!=typeof OffscreenCanvas;function Bn(t){return"undefined"!=typeof VideoFrame&&t instanceof VideoFrame}var In="undefined"==typeof window;function Dn(t){return Error("FastAverageColor: "+t)}function Tn(t,e){e||console.error(t)}var Pn=function(){function t(){this.canvas=null,this.ctx=null}return t.prototype.getColorAsync=function(t,e){if(!t)return Promise.reject(Dn("call .getColorAsync() without resource"));if("string"==typeof t){if("undefined"==typeof Image)return Promise.reject(Dn("resource as string is not supported in this environment"));var n=new Image;return n.crossOrigin=e&&e.crossOrigin||"",n.src=t,this.bindImageEvents(n,e)}if(Ln(t)&&!t.complete)return this.bindImageEvents(t,e);var r=this.getColor(t,e);return r.error?Promise.reject(r.error):Promise.resolve(r)},t.prototype.getColor=function(t,e){var n=Cn(e=e||{});if(!t)return Tn(o=Dn("call .getColor() without resource"),e.silent),this.prepareResult(n,o);var r=function(t,e){var n,r=_n(e,"left",0),i=_n(e,"top",0),o=_n(e,"width",t.width),a=_n(e,"height",t.height),s=o,u=a;return"precision"===e.mode||(o>a?(n=o/a,s=100,u=Math.round(s/n)):(n=a/o,u=100,s=Math.round(u/n)),(s>o||u>a||s<10||u<10)&&(s=o,u=a)),{srcLeft:r,srcTop:i,srcWidth:o,srcHeight:a,destWidth:s,destHeight:u}}(Sn(t),e);if(!(r.srcWidth&&r.srcHeight&&r.destWidth&&r.destHeight))return Tn(o=Dn('incorrect sizes for resource "'.concat(Mn(t),'"')),e.silent),this.prepareResult(n,o);if(!this.canvas&&(this.canvas=In?On?new OffscreenCanvas(1,1):null:document.createElement("canvas"),!this.canvas))return Tn(o=Dn("OffscreenCanvas is not supported in this browser"),e.silent),this.prepareResult(n,o);if(!this.ctx){if(this.ctx=this.canvas.getContext("2d",{willReadFrequently:!0}),!this.ctx)return Tn(o=Dn("Canvas Context 2D is not supported in this browser"),e.silent),this.prepareResult(n);this.ctx.imageSmoothingEnabled=!1}this.canvas.width=r.destWidth,this.canvas.height=r.destHeight;try{this.ctx.clearRect(0,0,r.destWidth,r.destHeight),this.ctx.drawImage(t,r.srcLeft,r.srcTop,r.srcWidth,r.srcHeight,0,0,r.destWidth,r.destHeight);var i=this.ctx.getImageData(0,0,r.destWidth,r.destHeight).data;return this.prepareResult(this.getColorFromArray4(i,e))}catch(a){var o;return Tn(o=Dn("security error (CORS) for resource ".concat(Mn(t),".\nDetails: https://developer.mozilla.org/en/docs/Web/HTML/CORS_enabled_image")),e.silent),e.silent||console.error(a),this.prepareResult(n,o)}},t.prototype.getColorFromArray4=function(t,e){e=e||{};var n=t.length,r=Cn(e);if(n<4)return r;var i,o=n-n%4,a=4*(e.step||1);switch(e.algorithm||"sqrt"){case"simple":i=wn;break;case"sqrt":i=kn;break;case"dominant":i=jn;break;default:throw Dn("".concat(e.algorithm," is unknown algorithm"))}return i(t,o,{defaultColor:r,ignoredColor:vn(e.ignoredColor),step:a,dominantDivider:e.dominantDivider})},t.prototype.prepareResult=function(t,e){var n,r=t.slice(0,3),i=[t[0],t[1],t[2],t[3]/255],o=(299*(n=t)[0]+587*n[1]+114*n[2])/1e3<128;return{value:[t[0],t[1],t[2],t[3]],rgb:"rgb("+r.join(",")+")",rgba:"rgba("+i.join(",")+")",hex:mn(r),hexa:mn(t),isDark:o,isLight:!o,error:e}},t.prototype.destroy=function(){this.canvas&&(this.canvas.width=1,this.canvas.height=1,this.canvas=null),this.ctx=null},t.prototype.bindImageEvents=function(t,e){var n=this;return new Promise(function(r,i){var o=function(){u();var o=n.getColor(t,e);o.error?i(o.error):r(o)},a=function(){u(),i(Dn('Error loading image "'.concat(t.src,'"')))},s=function(){u(),i(Dn('Image "'.concat(t.src,'" loading aborted')))},u=function(){t.removeEventListener("load",o),t.removeEventListener("error",a),t.removeEventListener("abort",s)};t.addEventListener("load",o),t.addEventListener("error",a),t.addEventListener("abort",s)})},t}(),Rn=function(t){var e=t.manga,n=t.mangaDynamicColorSchemes,r=lt(),i=ct().setDynamicColor,o=M({variant:"popover",popupId:"manga-thumbnail-fullscreen"}),a=m(u.useState(!1),2),s=a[0],l=a[1];return u.useLayoutEffect(function(){if(!n)return function(){};var t=new Image;return t.crossOrigin="anonymous",t.src=be.getThumbnailUrl(e),t.onload=function(){var e=t.width>600&&t.height>900;Promise.all([un.from(t).getPalette(),(new Pn).getColor(t,{algorithm:"dominant",mode:e?"speed":"precision",ignoredColor:[[255,255,255,255,75],[0,0,0,255,75]]})]).then(function(t){var e=m(t,2),n=e[0],r=e[1];n.Vibrant&&n.DarkVibrant&&n.LightVibrant&&n.LightMuted&&n.Muted&&n.DarkMuted&&i(x(x({},n),{},{average:r}))})},function(){i(null)}},[]),g.jsxs(g.Fragment,{children:[g.jsxs(_,{sx:j(j({position:"relative",borderRadius:1,overflow:"hidden",backgroundColor:"background.paper",width:"150px",maxHeight:"fit-content",aspectRatio:ye,flexShrink:0,flexGrow:0},r.breakpoints.up("lg"),{width:"200px"}),r.breakpoints.up("xl"),{width:"300px"}),children:[g.jsx(je,{src:be.getThumbnailUrl(e),alt:"Manga Thumbnail",onLoad:function(){return l(!0)},imgStyle:{width:"100%",height:"100%",objectFit:"cover"}}),s&&g.jsx(_,x(x({},L(o)),{},{sx:{position:"absolute",top:0,bottom:0,width:"100%",justifyContent:"center",alignItems:"center",opacity:0,"&:hover":{background:"rgba(0, 0, 0, 0.4)",cursor:"pointer",opacity:1}},children:g.jsx(Ye,{fontSize:"large",color:"primary"})}))]}),g.jsx(dt,x(x({},ht(o)),{},{sx:{outline:0},children:g.jsx(_,{onClick:function(){return o.close()},sx:{height:"100vh",p:2,outline:0,justifyContent:"center",alignItems:"center"},children:g.jsx(je,{src:be.getThumbnailUrl(e),alt:"Manga Thumbnail",imgStyle:{height:"100%",width:"100%",objectFit:"contain"}})})}))]})},En=function(t){var e=t.query,n=t.sourceId,r=t.mode,i=t.children,o="source"===r&&void 0!==n?ut.sources.childRoutes.browse.path(n,e):"source.global-search"===r?ut.sources.childRoutes.searchAll.path(e):ut.library.path(void 0,e);return g.jsx(Me,{component:b,to:o,sx:{textDecoration:"none",color:"inherit"},children:null!=i?i:e})},Vn="35px",zn=function(t){var e=t.manga,n=e.description,r=e.genre,i=e.sourceId,o=t.mode,a=m(u.useState(null),2),s=a[0],l=a[1],c=m(u.useState(),2),d=c[0],h=c[1];E(s,u.useCallback(function(){return h(null==s?void 0:s.clientHeight)},[s]));var f=m(ft("isDescriptionGenreCollapsed",!0),2),p=f[0],v=f[1],b=n?Math.min(75,null!=d?d:75):0,y=u.useMemo(function(){return r.filter(Boolean)},[r]);return g.jsxs(g.Fragment,{children:[n&&g.jsxs(_,{sx:{position:"relative"},children:[g.jsx(gt,{collapsedSize:b,in:!p,children:g.jsx(N,{ref:l,sx:{whiteSpace:"pre-line",textAlign:"justify",textJustify:"inter-word",mb:Vn},children:n})}),g.jsx(_,{onClick:function(){return v(!p)},sx:{justifyContent:"flex-start",alignItems:"center",cursor:"pointer",position:"absolute",width:"100%",height:Vn,bottom:0,background:function(t){return"linear-gradient(transparent -15px, ".concat(t.palette.background.default,")")}},children:g.jsx(B,{sx:{color:function(t){return"light"===t.palette.mode?"black":"text"}},children:p?g.jsx(_e,{}):g.jsx(Se,{})})})]}),g.jsx(_,{sx:{flexDirection:"row",flexWrap:p?"no-wrap":"wrap",gap:1,overflowX:p?"auto":null},children:y.map(function(t){return g.jsx(En,{query:t,sourceId:i,mode:o,children:g.jsx(Le,{label:t,variant:"outlined",onClick:function(){}})},t)})})]})},Fn=H("div")(function(t){var e=t.theme;return j({display:"flex",flexDirection:"column",gap:e.spacing(2),padding:e.spacing(1)},e.breakpoints.up("md"),{flexBasis:"40%",height:"calc(100vh - 64px)",overflowY:"auto"})}),An=function(t){var e=t.url,n=t.mangaThumbnailBackdrop,r=t.children;return g.jsxs(_,{sx:{position:"relative"},children:[n&&g.jsxs(g.Fragment,{children:[g.jsx(je,{spinnerStyle:{display:"none"},imgStyle:{position:"absolute",top:0,left:0,width:"100%",height:"100%",objectFit:"cover"},src:e,alt:"Manga Thumbnail"}),g.jsx(_,{sx:{"&::before":function(t){return mt(n,{position:"absolute",display:"inline-block",content:'""',top:0,left:0,width:"100%",height:"100%",background:"linear-gradient(to top, ".concat(t.palette.background.default,", transparent 100%, transparent 1px),linear-gradient(to right, ").concat(t.palette.background.default,", transparent 50%, transparent 1px),linear-gradient(to bottom, ").concat(t.palette.background.default,", transparent 50%, transparent 1px),linear-gradient(to left, ").concat(t.palette.background.default,", transparent 50%, transparent 1px)"),backdropFilter:"blur(4.5px) brightness(0.75)"})}}})]}),r]})},Wn=H("div")(function(t){return{display:"flex",paddingBottom:t.theme.spacing(1)}}),Hn=H("div")(function(t){return{zIndex:1,marginLeft:t.theme.spacing(1)}}),Nn=function(t){return g.jsx(Ce,x({},t))},qn=H("div")(function(t){return{display:"flex",gap:t.theme.spacing(1)}}),Un=function(t){var e=t.url,n=v(),r=n.i18n;n._;return g.jsxs(Je,{children:[g.jsx(O,{title:r._({id:"ZdWg0V"}),disabled:!e,children:g.jsx(Xt,{size:"medium",disabled:!e,component:Me,href:null!=e?e:void 0,target:"_blank",rel:"noreferrer",variant:"outlined",children:g.jsx(fe,{})})}),g.jsx(O,{title:r._({id:"Xrk3+q"}),disabled:!e,children:g.jsx(Xt,{size:"medium",disabled:!e,component:Me,href:e?V.getWebviewUrl(e):void 0,target:"_blank",rel:"noreferrer",variant:"outlined",children:g.jsx(ve,{})})})]})};var Gn=function(t,e,n){return null==t?void 0:t.map(function(t){return g.jsx(En,{query:t,sourceId:e,mode:n},t)}).reduce(function(t,e){return g.jsxs(g.Fragment,{children:[t,", ",e]})})},Jn=function(t){var e,n,r=t.manga,i=t.mode,o=v(),a=o.i18n,s=o._,l=pt().settings,c=l.mangaThumbnailBackdrop,d=l.mangaDynamicColorSchemes;u.useEffect(function(){r.source||J(a._({id:"wGxz70"}),"error")},[r.source,s]);var f,m,b=Jt(r).updateLibraryState,y=function(){var t=p(h().m(function t(){var e;return h().w(function(t){for(;;)switch(t.p=t.n){case 0:return t.p=0,t.n=1,navigator.clipboard.writeText(r.title);case 1:J(a._({id:"FxVG/l"}),"info"),t.n=3;break;case 2:t.p=2,e=t.v,W("MangaDetails::copyTitleLongPress")(e);case 3:return t.a(2)}},t,null,[[0,2]])}));return function(){return t.apply(this,arguments)}}();return g.jsxs(Fn,{children:[g.jsxs(An,{url:be.getThumbnailUrl(r),mangaThumbnailBackdrop:c,children:[g.jsxs(Wn,{children:[g.jsx(Rn,{manga:r,mangaDynamicColorSchemes:d}),g.jsxs(Hn,{children:[g.jsxs(_,{sx:{flexDirection:"row",gap:1,alignItems:"flex-start",mb:1},children:[g.jsx(En,{query:r.title,sourceId:r.sourceId,mode:"source.global-search",children:g.jsx(N,{variant:"h5",component:"h2",sx:{wordBreak:"break-word"},children:r.title})}),g.jsx(O,{title:a._({id:"he3ygx"}),children:g.jsx(B,{onClick:y,color:"inherit",children:g.jsx(Ne,{fontSize:"small"})})})]}),r.author&&g.jsx(Nn,{title:a._({id:"VbeIOx"}),value:Gn(be.getAuthors(r),null===(e=r.source)||void 0===e?void 0:e.id,i)}),r.artist&&g.jsx(Nn,{title:a._({id:"0s5Sjx"}),value:Gn(be.getArtists(r),null===(n=r.source)||void 0===n?void 0:n.id,i)}),g.jsx(Nn,{title:a._({id:"uAQUqI"}),value:a._(xe[r.status])}),g.jsx(Nn,{title:a._({id:"wdxz7K"}),value:(f=r.source,f?vt.isLocalSource(f)?G._({id:"LECJgZ"}):null!==(m=f.displayName)&&void 0!==m?m:f.id:G._({id:"Ef7StM"}))})]})]}),g.jsxs(qn,{children:[g.jsxs(Ke,{size:"medium",onClick:b,variant:r.inLibrary?"contained":"outlined",children:[r.inLibrary?g.jsx(me,{}):g.jsx(Kt,{}),r.inLibrary?a._({id:"GcCthe"}):a._({id:"RsaYWP"})]}),g.jsx(Qe,{manga:r}),g.jsx(Un,{url:r.realUrl})]})]}),g.jsx(zn,{manga:r,mode:i})]})},Kn=f(g.jsx("path",{d:"M12 3c-4.97 0-9 4.03-9 9s4.03 9 9 9c.83 0 1.5-.67 1.5-1.5 0-.39-.15-.74-.39-1.01-.23-.26-.38-.61-.38-.99 0-.83.67-1.5 1.5-1.5H16c2.76 0 5-2.24 5-5 0-4.42-4.03-8-9-8m-5.5 9c-.83 0-1.5-.67-1.5-1.5S5.67 9 6.5 9 8 9.67 8 10.5 7.33 12 6.5 12m3-4C8.67 8 8 7.33 8 6.5S8.67 5 9.5 5s1.5.67 1.5 1.5S10.33 8 9.5 8m5 0c-.83 0-1.5-.67-1.5-1.5S13.67 5 14.5 5s1.5.67 1.5 1.5S15.33 8 14.5 8m3 4c-.83 0-1.5-.67-1.5-1.5S16.67 9 17.5 9s1.5.67 1.5 1.5-.67 1.5-1.5 1.5"})),Xn=function(t){var e=t.manga,n=t.onRefresh,r=t.refreshing,i=v(),o=i.i18n,a=(i._,lt()),s=bt(a.breakpoints.up("sm")),u=pt().settings,l=ct(),c=l.dynamicColor,d=l.appTheme,h=l.shouldUsePureBlackMode,f=l.themeMode,p=m(yt.useState(null),2),y=p[0],x=p[1],j=Boolean(y),w=function(){x(null)},k=function(){Ct.show(Qt,{mangaId:e.id})},C=function(){Ct.show(Be,{mode:"save_dynamic",appTheme:{id:"",getName:function(){return""},isCustom:!0,muiTheme:_t(St(d,u.customThemes).muiTheme,c,h,R.getThemeMode(f))}})};return g.jsxs(g.Fragment,{children:[s&&g.jsxs(g.Fragment,{children:[g.jsx(O,{title:o._({id:"+NckRw"}),disabled:r,children:g.jsx(B,{onClick:function(){n()},disabled:r,color:"inherit",children:g.jsx(Oe,{})})}),u.mangaDynamicColorSchemes&&g.jsx(O,{title:o._({id:"Bs1P1+"}),children:g.jsx(B,{onClick:C,color:"inherit",children:g.jsx(Kn,{})})}),e.inLibrary&&g.jsxs(g.Fragment,{children:[g.jsx(O,{title:o._({id:"y5rS9U"}),children:g.jsx(b,{to:ut.migrate.childRoutes.search.path(e.sourceId,e.id,e.title),state:{mangaTitle:e.title},style:{textDecoration:"none",color:"inherit"},children:g.jsx(B,{color:"inherit",children:g.jsx(At,{})})})}),g.jsx(O,{title:o._({id:"wSseJ9"}),children:g.jsx(B,{onClick:function(){k()},color:"inherit",children:g.jsx(Wt,{})})})]})]}),!s&&g.jsxs(g.Fragment,{children:[g.jsx(B,{id:"chaptersMenuButton","aria-controls":j?"chaptersMenu":void 0,"aria-haspopup":"true","aria-expanded":j?"true":void 0,onClick:function(t){return x(t.currentTarget)},color:"inherit",children:g.jsx(xt,{})}),g.jsxs(D,{id:"chaptersMenu",anchorEl:y,open:j,onClose:w,MenuListProps:{"aria-labelledby":"chaptersMenuButton"},children:[g.jsxs(jt,{onClick:function(){n(),w()},disabled:r,children:[g.jsx(wt,{children:g.jsx(Oe,{fontSize:"small"})}),g.jsx(kt,{children:o._({id:"+NckRw"})})]}),u.mangaDynamicColorSchemes&&g.jsxs(jt,{onClick:C,children:[g.jsx(wt,{children:g.jsx(Kn,{fontSize:"small"})}),g.jsx(kt,{children:o._({id:"Bs1P1+"})})]}),e.inLibrary&&[g.jsxs(jt,{component:b,to:ut.migrate.childRoutes.search.path(e.sourceId,e.id,e.title),state:{mangaTitle:e.title},style:{textDecoration:"none",color:"inherit"},children:[g.jsx(wt,{children:g.jsx(At,{fontSize:"small"})}),g.jsx(kt,{children:o._({id:"y5rS9U"})})]},"migrate"),g.jsxs(jt,{onClick:function(){k(),w()},children:[g.jsx(wt,{children:g.jsx(Wt,{fontSize:"small"})}),g.jsx(kt,{children:o._({id:"wSseJ9"})})]},"categories")]]})]})]})};i("Manga",function(){var t,e,n=v(),r=n.i18n,i=n._,a=Mt().id,s=(null!==(t=Lt().state)&&void 0!==t?t:{}).mode,l=u.useRef(!1),c=V.useGetManga(Ot,a),d=c.data,f=c.error,b=c.loading,y=c.networkStatus,x=c.refetch,j=Bt(y),w=null==d?void 0:d.manga,k=function(t){var e=m(u.useState(!1),2),n=e[0],r=e[1],i=m(u.useState(null),2),o=i[0],a=i[1];return[u.useCallback(p(h().m(function e(){return h().w(function(e){for(;;)switch(e.n){case 0:return r(!0),a(null),e.n=1,Promise.all([V.getMangaFetch(t,{awaitRefetchQueries:!0}).response,V.getMangaChaptersFetch(t,{awaitRefetchQueries:!0}).response]).catch(function(t){t instanceof K&&"no chapters found"===pe(t.message)||a(t)}).finally(function(){return r(!1)});case 1:return e.a(2)}},e)})),[t]),{loading:n,error:o}]}(a),C=m(k,2),S=C[0],M=C[1],L=M.loading,I=M.error,D=null!=f?f:I;return u.useEffect(function(){null!=w&&(!l.current&&!w.initialized&&(l.current=!0,S()))},[w]),Ie(null!==(e=null==w?void 0:w.title)&&void 0!==e?e:r._({id:"uB8LjK"}),g.jsxs(_,{direction:"row",sx:{alignItems:"center"},children:[D&&!j&&!L&&g.jsx(O,{title:g.jsxs(g.Fragment,{children:[r._({id:"wCaJj1"}),g.jsx("br",{}),A(D)]}),children:g.jsx(B,{onClick:function(){return x()},children:g.jsx(o,{color:"error"})})}),w&&(L||j)&&g.jsx(B,{disabled:!0,children:g.jsx(It,{size:16})}),w&&g.jsx(Xn,{manga:w,onRefresh:S,refreshing:L})]}),[i,D,j,L,w,S]),D&&!w?g.jsx(Yt,{message:r._({id:"wCaJj1"}),messageExtra:A(D)}):g.jsxs(q,{sx:{display:{md:"flex"},overflow:"hidden"},children:[b&&g.jsx(F,{}),w&&g.jsx(Jn,{manga:w,mode:s}),w&&g.jsx(He,{manga:w,isRefreshing:L})]})})}}})}();
