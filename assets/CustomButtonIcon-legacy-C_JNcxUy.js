!function(){function e(t){return e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e(t)}var t=["children"];function r(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function n(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function o(t,r,n){return(r=function(t){var r=function(t,r){if("object"!=e(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var o=n.call(t,r||"default");if("object"!=e(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(t)}(t,"string");return"symbol"==e(r)?r:r+""}(r))in t?Object.defineProperty(t,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[r]=n,t}System.register(["./index-legacy-CeziNlv-.js","./useManageMangaLibraryState-legacy-COaWOdvX.js","./ChapterCardMetadata-legacy-PKKkU1zB.js","./Delete-legacy-C5lwF2r7.js","./Download-legacy-BpE0vwwC.js","./MUI.util-legacy-C7ed77k1.js","./Card-legacy-g5lkNCl0.js","./CardActionArea-legacy-CStHnAWB.js","./CardContent-legacy-DDaHxtZW.js","./Checkbox-legacy-ccrJ8eA_.js"],(function(e,r){"use strict";var o,a,l,i,c,d,s,u,p,h,f,b,m,g,y,v,x,j,k,C,w,_,O,D,I,P,M,S,R,B,V,T,z,L,A,N,H,U,E,W;return{setters:[function(e){o=e.c,a=e.j,l=e.u,i=e.r,c=e.a2,d=e.d,s=e.e,u=e._,p=e.da,h=e.i,f=e.ae,b=e.a3,m=e.S,g=e.ad,y=e.L,v=e.dX,x=e.C,j=e.I,k=e.a4,C=e.a6,w=e.B},function(e){_=e.c,O=e.d,D=e.C,I=e.e,P=e.f,M=e.D,S=e.R,R=e.V,B=e.g,V=e.M},function(e){T=e.C,z=e.D},function(e){L=e.D},function(e){A=e.D},function(e){N=e.M},function(e){H=e.C},function(e){U=e.C},function(e){E=e.C},function(e){W=e.C}],execute:function(){var r=e("a",o(a.jsx("path",{d:"m18 7-1.41-1.41-6.34 6.34 1.41 1.41zm4.24-1.41L11.66 16.17 7.48 12l-1.41 1.41L11.66 19l12-12zM.41 13.41 6 19l1.41-1.41L1.83 12z"}))),F=e("B",o(a.jsx("path",{d:"M17 3H7c-1.1 0-1.99.9-1.99 2L5 21l7-3 7 3V5c0-1.1-.9-2-2-2"}))),K=o(a.jsx("path",{d:"M21 7h-6V5h6zm-2 3.9c-.32.07-.66.1-1 .1-2.76 0-5-2.24-5-5 0-1.13.37-2.16 1-3H7c-1.1 0-2 .9-2 2v16l7-3 7 3z"})),G=o(a.jsx("path",{d:"M21 7h-2v2h-2V7h-2V5h2V3h2v2h2zm-2 14-7-3-7 3V5c0-1.1.9-2 2-2h7c-.63.84-1 1.87-1 3 0 2.76 2.24 5 5 5 .34 0 .68-.03 1-.1z"})),Q=e("L",o(a.jsx("path",{d:"M19 19H5V5h7V3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2v-7h-2zM14 3v2h3.59l-9.83 9.83 1.41 1.41L19 6.41V10h2V3z"}))),X=e("c",(function(e){var t,n,o,f=e.chapter,b=e.handleSelection,m=e.canBeDownloaded,g=void 0!==m&&m,y=e.selectedChapters,v=void 0===y?[]:y,x=e.onClose,j=e.selectable,k=void 0===j||j,C=l().t,w=!!f,R=null!=f?f:{},B=R.isDownloaded,V=R.isRead,T=R.isBookmarked,z=null!==(n=null===(o=i.useGetMangaChapters(c,null!==(t=null==f?void 0:f.mangaId)&&void 0!==t?t:-1,{skip:!f,fetchPolicy:"cache-only"}).data)||void 0===o?void 0:o.chapters.nodes)&&void 0!==n?n:[],N=d().settings.deleteChaptersWithBookmark,H=I(w,p),U=_(w),E=P(w),W=s.useMemo((function(){return{downloadableChapters:u.getDownloadable(v),downloadedChapters:u.getDownloaded(v),unbookmarkedChapters:u.getNonBookmarked(v),bookmarkedChapters:u.getBookmarked(v),unreadChapters:u.getNonRead(v),readChapters:u.getRead(v)}}),[v]),F=W.downloadableChapters,X=W.downloadedChapters,q=W.unbookmarkedChapters,J=W.bookmarkedChapters,Y=W.unreadChapters,Z=W.readChapters,$=function(e,t){var r,n="mark_prev_as_read"===e,o=n?"mark_as_read":e;if("delete"===o&&f&&!u.isDeletable(f,N))return void x();var a=function(){if(!f)return t;if(!n)return[f];var e=z.findIndex((function(e){return e.id===f.id}));return e+1>z.length-1?[]:z.slice(e+1)}();a.length?(u.performAction(o,u.getIds(a),{chapters:a,wasManuallyMarkedAsRead:!0,trackProgressMangaId:null===(r=a[0])||void 0===r?void 0:r.mangaId}).catch(h()),x()):x()};return a.jsxs(a.Fragment,{children:[w&&k&&a.jsx(O,{onClick:function(){null==b||b(f.id,!0),x()},Icon:D,title:C("chapter.action.label.select")}),w&&a.jsx(O,{Icon:Q,disabled:!f.realUrl,onClick:function(){window.open(f.realUrl,"_blank","noopener,noreferrer"),x()},title:C("chapter.action.label.open_on_source")}),U(g)&&a.jsx(O,{Icon:A,disabled:E(!F.length),onClick:function(){return $("download",F)},title:H("download",F.length)}),U(B)&&a.jsx(O,{Icon:L,disabled:E(!X.length),onClick:function(){return $("delete",u.getDeletable(X,N))},title:H("delete",X.length)}),U(!T)&&a.jsx(O,{Icon:G,disabled:E(!q.length),onClick:function(){return $("bookmark",q)},title:H("bookmark",q.length)}),U(T)&&a.jsx(O,{Icon:K,disabled:E(!J.length),onClick:function(){return $("unbookmark",J)},title:H("unbookmark",J.length)}),U(!V)&&a.jsx(O,{Icon:M,disabled:E(!Y.length),onClick:function(){return $("mark_as_read",Y)},title:H("mark_as_read",Y.length)}),U(V)&&a.jsx(O,{Icon:S,disabled:E(!Z.length),onClick:function(){return $("mark_as_unread",Z)},title:H("mark_as_unread",Z.length)}),w&&a.jsx(O,{onClick:function(){return $("mark_prev_as_read",[])},Icon:r,title:C("chapter.action.mark_as_read.add.label.action.previous")})]})}));e("b",s.memo((function(e){var t=l().t,r=f(),o=s.useRef(null),i=e.mode,c=void 0===i?"manga.page":i,d=e.chapter,p=e.showChapterNumber,h=e.onSelect,w=e.selected,_=e.selectable,O=void 0===_||_,D=e.isActiveChapter,I=void 0!==D&&D,P=null!==w,M=d.isDownloaded,S=function(e){P&&(e.preventDefault(),e.stopPropagation(),h(d.id,!w,e.shiftKey))},L=function(e,t){e.stopPropagation(),e.preventDefault(),null==t||t(e)},A=R((function(e,t){var r=t.context;P||!o.current?(e.shiftKey=!0,S(e)):L(e,(function(){return null==r?void 0:r(o.current)}))}));return a.jsx(b,{variant:"popover",popupId:"chapter-card-action-menu",children:function(e){var l;return a.jsxs(m,{sx:{pt:1,px:1},children:[a.jsx(H,{sx:n({touchCallout:"none"},g("reader"===c&&I,{backgroundColor:"primary.main"})),children:a.jsx(U,n(n({component:y,to:u.getReaderUrl(d),style:{color:r.palette.text[d.isRead?"disabled":"primary"]},state:u.getReaderOpenChapterLocationState(d,!0),replace:"reader"===c,onClick:function(e){return S(e)}},A(e.open)),{},{children:a.jsxs(E,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:1.5,"&:last-child":{pb:1.5}},children:[a.jsx(T,{title:p?"".concat(t("chapter.title_one")," ").concat(d.chapterNumber):d.name,secondaryText:d.scanlator,ternaryText:"".concat(v(Number(null!==(l=d.uploadDate)&&void 0!==l?l:0),!0)).concat(M?" â€¢ ".concat(t("chapter.status.label.downloaded")):""),infoIcons:d.isBookmarked&&a.jsx(F,{color:"reader"===c&&I?"secondary":"primary"}),slotProps:{title:{variant:"h6",component:"h3",sx:g("reader"===c&&I,{color:r.palette.primary.contrastText})},secondaryText:{sx:g("reader"===c&&I,{color:r.palette.primary.contrastText})},ternaryText:{sx:g("reader"===c&&I,{color:r.palette.primary.contrastText})}}}),a.jsx(z,{chapterId:d.id,color:"reader"===c&&I?r.palette.primary.contrastText:void 0}),a.jsx(m,{sx:{minHeight:"48px"},children:null===w?a.jsx(x,{title:t("global.button.options"),children:a.jsx(j,n(n({ref:o},N.preventRippleProp(k(e),{onClick:function(e){return L(e)}})),{},{"aria-label":"more",sx:n({color:"inherit"},g("reader"===c&&I,{color:"primary.contrastText"})),children:a.jsx(B,{})}))}):a.jsx(x,{title:t(w?"global.button.deselect":"global.button.select"),children:a.jsx(W,{checked:w})})})]})}))}),!P&&e.isOpen&&a.jsx(V,n(n({},C(e)),{},{children:function(e){return a.jsx(X,{onClose:e,chapter:d,handleSelection:function(){return h(d.id,!0)},canBeDownloaded:u.isDownloadable(d),selectable:O})}}))]})}})}))),e("F",{id:-1,name:"",realUrl:"",isBookmarked:!1}),e("D",{unread:void 0,downloaded:void 0,bookmarked:void 0,reverse:!0,sortBy:"source",showChapterNumber:!1}),e("C",{source:"global.sort.label.by_source",chapterNumber:"global.sort.label.by_chapter_number",uploadedAt:"global.sort.label.by_upload_date",fetchedAt:"global.sort.label.by_fetch_date"}),e("d",s.forwardRef((function(e,r){var o=e.children,l=function(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(-1!==t.indexOf(n))continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],-1===t.indexOf(r)&&{}.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}(e,t);return a.jsx(w,n(n({ref:r},l),{},{sx:n({minWidth:"unset",px:"10px"},l.sx),children:o}))})))}}}))}();
