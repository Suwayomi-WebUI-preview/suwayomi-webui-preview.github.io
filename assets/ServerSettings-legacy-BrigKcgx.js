!function(){function e(r){return e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e(r)}function r(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */var e,n,s="function"==typeof Symbol?Symbol:{},a=s.iterator||"@@iterator",i=s.toStringTag||"@@toStringTag";function o(r,s,a,i){var o=s&&s.prototype instanceof d?s:d,c=Object.create(o.prototype);return t(c,"_invoke",function(r,t,s){var a,i,o,d=0,c=s||[],u=!1,g={p:0,n:0,v:e,a:v,f:v.bind(e,4),d:function(r,t){return a=r,i=0,o=e,g.n=t,l}};function v(r,t){for(i=r,o=t,n=0;!u&&d&&!s&&n<c.length;n++){var s,a=c[n],v=g.p,h=a[2];r>3?(s=h===t)&&(o=a[(i=a[4])?5:(i=3,3)],a[4]=a[5]=e):a[0]<=v&&((s=r<2&&v<a[1])?(i=0,g.v=t,g.n=a[1]):v<h&&(s=r<3||a[0]>t||t>h)&&(a[4]=r,a[5]=t,g.n=h,i=0))}if(s||r>1)return l;throw u=!0,t}return function(s,c,h){if(d>1)throw TypeError("Generator is already running");for(u&&1===c&&v(c,h),i=c,o=h;(n=i<2?e:o)||!u;){a||(i?i<3?(i>1&&(g.n=-1),v(i,o)):g.n=o:g.v=o);try{if(d=2,a){if(i||(s="next"),n=a[s]){if(!(n=n.call(a,o)))throw TypeError("iterator result is not an object");if(!n.done)return n;o=n.value,i<2&&(i=0)}else 1===i&&(n=a.return)&&n.call(a),i<2&&(o=TypeError("The iterator does not provide a '"+s+"' method"),i=1);a=e}else if((n=(u=g.n<0)?o:r.call(t,g))!==l)break}catch(n){a=e,i=1,o=n}finally{d=1}}return{value:n,done:u}}}(r,a,i),!0),c}var l={};function d(){}function c(){}function u(){}n=Object.getPrototypeOf;var g=[][a]?n(n([][a]())):(t(n={},a,function(){return this}),n),v=u.prototype=d.prototype=Object.create(g);function h(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,u):(e.__proto__=u,t(e,i,"GeneratorFunction")),e.prototype=Object.create(v),e}return c.prototype=u,t(v,"constructor",u),t(u,"constructor",c),c.displayName="GeneratorFunction",t(u,i,"GeneratorFunction"),t(v),t(v,i,"Generator"),t(v,a,function(){return this}),t(v,"toString",function(){return"[object Generator]"}),(r=function(){return{w:o,m:h}})()}function t(e,r,n,s){var a=Object.defineProperty;try{a({},"",{})}catch(e){a=0}t=function(e,r,n,s){function i(r,n){t(e,r,function(e){return this._invoke(r,n,e)})}r?a?a(e,r,{value:n,enumerable:!s,configurable:!s,writable:!s}):e[r]=n:(i("next",0),i("throw",1),i("return",2))},t(e,r,n,s)}function n(r,t,n){return(t=function(r){var t=function(r,t){if("object"!=e(r)||!r)return r;var n=r[Symbol.toPrimitive];if(void 0!==n){var s=n.call(r,t||"default");if("object"!=e(s))return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(r)}(r,"string");return"symbol"==e(t)?t:t+""}(t))in r?Object.defineProperty(r,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):r[t]=n,r}function s(e,r,t,n,s,a,i){try{var o=e[a](i),l=o.value}catch(e){return void t(e)}o.done?r(l):Promise.resolve(l).then(n,s)}function a(e,r){return function(e){if(Array.isArray(e))return e}(e)||function(e,r){var t=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var n,s,a,i,o=[],l=!0,d=!1;try{if(a=(t=t.call(e)).next,0===r){if(Object(t)!==t)return;l=!1}else for(;!(l=(n=a.call(t)).done)&&(o.push(n.value),o.length!==r);l=!0);}catch(e){d=!0,s=e}finally{try{if(!l&&null!=t.return&&(i=t.return(),Object(i)!==i))return}finally{if(d)throw s}}return o}}(e,r)||function(e,r){if(e){if("string"==typeof e)return i(e,r);var t={}.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?i(e,r):void 0}}(e,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function i(e,r){(null==r||r>e.length)&&(r=e.length);for(var t=0,n=Array(r);t<r;t++)n[t]=e[t];return n}System.register(["./index-legacy-CJ3_jJxP.js","./NumberSetting-legacy-B-7KVCrG.js","./SelectSetting-legacy-BvN-qnat.js","./EmptyViewAbsoluteCentered-legacy-B9tzLj7u.js","./useAppTitle-legacy-DXSg09OW.js","./Switch-legacy-Csb--jKW.js","./ListSubheader-legacy-_UXJUrkW.js","./Trans-legacy-CBP-N_Is.js","./Link-legacy-DkxQy0FL.js","./Slider-legacy-D1TClsfB.js","./Select-legacy-BOySwMVa.js","./SwitchBase-legacy-CYgHYy0v.js"],function(e,t){"use strict";var i,o,l,d,c,u,g,v,h,f,p,y,m,b,x,j,S,k,_,w,P,C,U,T,N,V,E,O,F,z,A,D,L,M,I;return{setters:[function(e){i=e.u,o=e.a,l=e.r,d=e.b,c=e.j,u=e.H,g=e.bq,v=e.o,h=e.p,f=e.y,p=e.e,y=e.g,m=e.f,b=e.br,x=e.aU,j=e.bs,S=e.bt,k=e.bu,_=e.aS,w=e.bv,P=e.bw,C=e.bx,U=e.by,T=e.bz,N=e.m,V=e.as,E=e.bA},function(e){O=e.N},function(e){F=e.S},function(e){z=e.E},function(e){A=e.u},function(e){D=e.S},function(e){L=e.L},function(e){M=e.T},function(e){I=e.L},null,null,null],execute:function(){var t=function(e){return 0===e?V("global.label.never"):V("settings.server.misc.log_files.file_cleanup.value",{days:e,count:e})};e("ServerSettings",function(){var e,V,R=i().t;A(R("settings.server.title.server"));var B=o(),G=B.settings.serverInformAvailableUpdate,q=B.loading,H=B.request,K=H.error,$=H.refetch,Y=f(function(e){return N(R("global.error.label.failed_to_save_changes"),"error",y(e))}),J=l.useGetServerSettings({notifyOnNetworkStatusChange:!0}),Q=J.data,W=J.loading,X=J.error,Z=J.refetch,ee=a(l.useUpdateServerSettings(),1)[0],re=function(){var e,t=(e=r().m(function e(t,s,a){var i;return r().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,e.n=1,ee({variables:{input:{settings:n({},t,s)}}});case 1:null==a||a(!0),e.n=3;break;case 2:e.p=2,i=e.v,N(R("global.error.label.failed_to_save_changes"),"error",y(i)),null==a||a(!1);case 3:return e.a(2)}},e,null,[[0,2]])}),function(){var r=this,t=arguments;return new Promise(function(n,a){var i=e.apply(r,t);function o(e){s(i,n,a,o,l,"next",e)}function l(e){s(i,n,a,o,l,"throw",e)}o(void 0)})});return function(e,r,n){return t.apply(this,arguments)}}(),te=d.useMemo(function(){return c.jsxs(u,{subheader:c.jsx(L,{component:"div",id:"server-settings-client",children:R("global.label.client")}),children:[c.jsx(g,{}),c.jsxs(v,{children:[c.jsx(h,{primary:R("global.update.settings.inform.label.title"),secondary:R("global.update.settings.inform.label.description")}),c.jsx(D,{edge:"end",checked:G,onChange:function(e){return Y("serverInformAvailableUpdate",e.target.checked)}})]})]})},[G]);if(q||W)return c.jsxs(c.Fragment,{children:[te,c.jsx(p,{})]});var ne=null!=K?K:X;if(ne)return c.jsxs(c.Fragment,{children:[te,c.jsx(z,{message:R("global.error.label.failed_to_load_data"),messageExtra:y(ne),retry:function(){K&&$().catch(m()),X&&Z().catch(m())}})]});var se=Q.settings,ae=!(null!==(e=se.authUsername)&&void 0!==e&&e.trim()&&null!==(V=se.authPassword)&&void 0!==V&&V.trim()),ie=se.databaseType===b.H2;return c.jsxs(u,{sx:{pt:0},children:[te,c.jsxs(u,{subheader:c.jsx(L,{component:"div",id:"server-settings-server-address",children:R("settings.server.address.server.title")}),children:[c.jsx(x,{settingName:R("settings.server.address.server.label.ip"),handleChange:function(e){return re("ip",e)},value:se.ip,placeholder:"0.0.0.0"}),c.jsx(O,{settingTitle:R("settings.server.address.server.label.port"),settingValue:se.port.toString(),handleUpdate:function(e){return re("port",e)},value:se.port,defaultValue:4567,valueUnit:R("settings.server.address.server.label.port")})]}),c.jsxs(u,{subheader:c.jsx(L,{component:"div",id:"server-settings-socks-proxy",children:R("settings.server.socks_proxy.title")}),children:[c.jsxs(v,{children:[c.jsx(h,{primary:R("settings.server.socks_proxy.label.enable")}),c.jsx(D,{edge:"end",checked:se.socksProxyEnabled,onChange:function(e){return re("socksProxyEnabled",e.target.checked)}})]}),c.jsx(F,{settingName:R("settings.server.socks_proxy.label.version"),value:se.socksProxyVersion,values:[[4,{text:"4"}],[5,{text:"5"}]],handleChange:function(e){return re("socksProxyVersion",e)}}),c.jsx(x,{settingName:R("settings.server.socks_proxy.label.host"),value:se.socksProxyHost,handleChange:function(e){return re("socksProxyHost",e)}}),c.jsx(x,{settingName:R("settings.server.socks_proxy.label.port"),value:se.socksProxyPort,handleChange:function(e){return re("socksProxyPort",e)}}),c.jsx(x,{settingName:R("settings.server.socks_proxy.label.username"),value:se.socksProxyUsername,handleChange:function(e){return re("socksProxyUsername",e)}}),c.jsx(x,{settingName:R("settings.server.socks_proxy.label.password"),value:se.socksProxyPassword,handleChange:function(e){return re("socksProxyPassword",e)},isPassword:!0})]}),c.jsxs(u,{subheader:c.jsx(L,{component:"div",id:"server-settings-auth",children:R("settings.server.auth.title")}),children:[c.jsx(F,{settingName:R("settings.server.auth.label.title"),value:se.authMode,values:j,handleChange:function(e){re("authMode",e,function(r){r&&(e!==S.UiLogin&&E.removeTokens(),E.setAuthRequired(e===S.UiLogin))})},disabled:ae}),c.jsx(x,{settingName:R("settings.server.auth.label.username"),value:se.authUsername,validate:function(e){return se.authMode===S.None||!!e.trim()},handleChange:function(e){return re("authUsername",e)}}),c.jsx(x,{settingName:R("settings.server.auth.label.password"),value:se.authPassword,isPassword:!0,validate:function(e){return se.authMode===S.None||!!e.trim()},handleChange:function(e){return re("authPassword",e)}}),se.authMode===S.UiLogin&&c.jsxs(c.Fragment,{children:[c.jsx(x,{settingName:R("settings.server.auth.jwt.audience"),value:se.jwtAudience,handleChange:function(e){return re("jwtAudience",e)}}),c.jsx(O,{settingTitle:R("settings.server.auth.jwt.access_token_expiry"),settingValue:_.duration(se.jwtTokenExpiry).humanize(),value:_.duration(se.jwtTokenExpiry).asMinutes(),valueUnit:R("global.time.minutes.minute_other"),defaultValue:k.default,minValue:k.min,maxValue:k.max,handleUpdate:function(e){return re("jwtTokenExpiry",_.duration(e,"minute").toISOString())},showSlider:!0}),c.jsx(O,{settingTitle:R("settings.server.auth.jwt.refresh_token_expiry"),settingValue:_.duration(se.jwtRefreshExpiry).humanize(),value:_.duration(se.jwtRefreshExpiry).asDays(),valueUnit:R("global.time.days.day_other"),defaultValue:w.default,minValue:w.min,maxValue:w.max,handleUpdate:function(e){return re("jwtRefreshExpiry",_.duration(e,"day").toISOString())},showSlider:!0})]})]}),c.jsxs(u,{subheader:c.jsx(L,{component:"div",id:"server-settings-clouadflare-bypass",children:R("settings.server.cloudflare.title")}),children:[c.jsxs(v,{children:[c.jsx(h,{primary:R("settings.server.cloudflare.flaresolverr.enabled.label.title"),secondary:c.jsxs(M,{i18nKey:"settings.server.cloudflare.flaresolverr.enabled.label.description",children:["See"," ",c.jsx(I,{href:"https://github.com/FlareSolverr/FlareSolverr?tab=readme-ov-file#installation",target:"_blank",rel:"noreferrer",children:"FlareSolverr"})," ","for information on how to set it up"]})}),c.jsx(D,{edge:"end",checked:se.flareSolverrEnabled,onChange:function(e){return re("flareSolverrEnabled",e.target.checked)}})]}),c.jsx(x,{settingName:R("settings.server.cloudflare.flaresolverr.url.label.title"),dialogDescription:R("settings.server.cloudflare.flaresolverr.url.label.description"),value:se.flareSolverrUrl,handleChange:function(e){return re("flareSolverrUrl",e)}}),c.jsx(O,{settingTitle:R("settings.server.cloudflare.flaresolverr.timeout.label.title"),settingValue:R("global.time.seconds.value",{count:se.flareSolverrTimeout}),dialogDescription:R("settings.server.cloudflare.flaresolverr.timeout.label.description"),value:se.flareSolverrTimeout,defaultValue:60,minValue:20,maxValue:300,stepSize:1,showSlider:!0,valueUnit:R("global.time.seconds.second_other"),handleUpdate:function(e){return re("flareSolverrTimeout",e)}}),c.jsx(x,{settingName:R("settings.server.cloudflare.flaresolverr.session.name.label.title"),value:se.flareSolverrSessionName,handleChange:function(e){return re("flareSolverrSessionName",e)}}),c.jsx(O,{settingTitle:R("settings.server.cloudflare.flaresolverr.session.ttl.label.title"),settingValue:R("global.time.minutes.value",{count:se.flareSolverrSessionTtl}),dialogDescription:R("settings.server.cloudflare.flaresolverr.session.ttl.label.description"),value:se.flareSolverrSessionTtl,defaultValue:15,minValue:1,maxValue:60,stepSize:1,showSlider:!0,valueUnit:R("global.time.minutes.minute_other"),handleUpdate:function(e){return re("flareSolverrSessionTtl",e)}}),c.jsxs(v,{children:[c.jsx(h,{primary:R("settings.server.cloudflare.flaresolverr.response_fallback.label.title"),secondary:R("settings.server.cloudflare.flaresolverr.response_fallback.label.description")}),c.jsx(D,{edge:"end",checked:se.flareSolverrAsResponseFallback,onChange:function(e){return re("flareSolverrAsResponseFallback",e.target.checked)}})]})]}),c.jsxs(u,{subheader:c.jsx(L,{component:"div",id:"server-settings-opds",children:R("settings.server.opds.title")}),children:[c.jsxs(v,{children:[c.jsx(h,{primary:R("settings.server.opds.binary_file_sizes.label.title"),secondary:R("settings.server.opds.binary_file_sizes.label.description")}),c.jsx(D,{edge:"end",checked:se.opdsUseBinaryFileSizes,onChange:function(e){return re("opdsUseBinaryFileSizes",e.target.checked)}})]}),c.jsx(O,{settingTitle:R("settings.server.opds.items_per_page.label.title"),settingValue:se.opdsItemsPerPage.toString(),dialogDescription:R("settings.server.opds.items_per_page.label.description"),value:se.opdsItemsPerPage,defaultValue:50,minValue:10,maxValue:5e3,stepSize:10,showSlider:!0,valueUnit:R("settings.server.opds.items_per_page.label.unit_other"),handleUpdate:function(e){return re("opdsItemsPerPage",e)}}),c.jsxs(v,{children:[c.jsx(h,{primary:R("settings.server.opds.enable_page_read_progress.label.title"),secondary:R("settings.server.opds.enable_page_read_progress.label.description")}),c.jsx(D,{edge:"end",checked:se.opdsEnablePageReadProgress,onChange:function(e){return re("opdsEnablePageReadProgress",e.target.checked)}})]}),c.jsxs(v,{children:[c.jsx(h,{primary:R("settings.server.opds.mark_as_read_on_download.label.title"),secondary:R("settings.server.opds.mark_as_read_on_download.label.description")}),c.jsx(D,{edge:"end",checked:se.opdsMarkAsReadOnDownload,onChange:function(e){return re("opdsMarkAsReadOnDownload",e.target.checked)}})]}),c.jsxs(v,{children:[c.jsx(h,{primary:R("settings.server.opds.show_only_unread_chapters.label.title"),secondary:R("settings.server.opds.show_only_unread_chapters.label.description")}),c.jsx(D,{edge:"end",checked:se.opdsShowOnlyUnreadChapters,onChange:function(e){return re("opdsShowOnlyUnreadChapters",e.target.checked)}})]}),c.jsxs(v,{children:[c.jsx(h,{primary:R("settings.server.opds.show_only_downloaded_chapters.label.title"),secondary:R("settings.server.opds.show_only_downloaded_chapters.label.description")}),c.jsx(D,{edge:"end",checked:se.opdsShowOnlyDownloadedChapters,onChange:function(e){return re("opdsShowOnlyDownloadedChapters",e.target.checked)}})]}),c.jsx(F,{settingName:R("settings.server.opds.chapter_sort_order.label.title"),dialogDescription:R("settings.server.opds.chapter_sort_order.label.description"),value:se.opdsChapterSortOrder,values:[[P.Asc,{text:R("global.sort.label.asc")}],[P.Desc,{text:R("global.sort.label.desc")}]],handleChange:function(e){return re("opdsChapterSortOrder",e)}})]}),c.jsxs(u,{subheader:c.jsx(L,{component:"div",id:"server-settings-koreader-sync",children:R("settings.server.koreader.sync.title")}),children:[c.jsx(x,{settingName:R("settings.server.koreader.sync.server_address"),handleChange:function(e){return re("koreaderSyncServerUrl",e)},value:se.koreaderSyncServerUrl,placeholder:"http://localhost:17200"}),c.jsx(x,{settingName:R("settings.server.koreader.sync.username"),value:se.koreaderSyncUsername,handleChange:function(e){return re("koreaderSyncUsername",e)}}),c.jsx(x,{settingName:R("settings.server.koreader.sync.user_key"),value:se.koreaderSyncUserkey,handleChange:function(e){return re("koreaderSyncUserkey",e)},isPassword:!0}),c.jsx(x,{settingName:R("settings.server.koreader.sync.device_id"),value:se.koreaderSyncDeviceId,handleChange:function(e){return re("koreaderSyncDeviceId",e)}}),c.jsx(F,{settingName:R("settings.server.koreader.sync.check_sum_method.title"),value:se.koreaderSyncChecksumMethod,values:[[C.Binary,{text:R("settings.server.koreader.sync.check_sum_method.binary")}],[C.Filename,{text:R("settings.server.koreader.sync.check_sum_method.filename")}]],handleChange:function(e){return re("koreaderSyncChecksumMethod",e)}}),c.jsx(F,{settingName:R("settings.server.koreader.sync.strategy.title"),value:se.koreaderSyncStrategy,values:[[U.Disabled,{text:R("settings.server.koreader.sync.strategy.disabled")}],[U.Prompt,{text:R("settings.server.koreader.sync.strategy.prompt")}],[U.Silent,{text:R("settings.server.koreader.sync.strategy.silent")}],[U.Send,{text:R("settings.server.koreader.sync.strategy.send")}],[U.Receive,{text:R("settings.server.koreader.sync.strategy.receive")}]],handleChange:function(e){return re("koreaderSyncStrategy",e)}}),c.jsx(O,{settingTitle:R("settings.server.koreader.sync.tolerance.title"),dialogDescription:R("settings.server.koreader.sync.tolerance.description"),settingValue:se.koreaderSyncPercentageTolerance.toString(),value:se.koreaderSyncPercentageTolerance,defaultValue:T.default,minValue:T.min,maxValue:T.max,stepSize:T.step,valueUnit:"",handleUpdate:function(e){return re("koreaderSyncPercentageTolerance",e)}})]}),c.jsxs(u,{subheader:c.jsx(L,{component:"div",id:"server-settings-database",children:R("settings.server.database.title")}),children:[c.jsx(F,{settingName:R("settings.server.database.type.title"),value:se.databaseType,values:[[b.H2,{text:R("settings.server.database.type.h2")}],[b.Postgresql,{text:R("settings.server.database.type.postgresql")}]],handleChange:function(e){return re("databaseType",e)}}),c.jsx(x,{settingName:R("settings.server.database.address"),handleChange:function(e){return re("databaseUrl",e)},value:se.databaseUrl,placeholder:"postgresql://localhost:5432/suwayomi",disabled:ie}),c.jsx(x,{settingName:R("settings.server.database.username"),value:se.databaseUsername,handleChange:function(e){return re("databaseUsername",e)},disabled:ie}),c.jsx(x,{settingName:R("settings.server.database.password"),value:se.databasePassword,handleChange:function(e){return re("databasePassword",e)},disabled:ie,isPassword:!0})]}),c.jsxs(u,{subheader:c.jsx(L,{component:"div",id:"server-settings-misc",children:R("settings.server.misc.title")}),children:[c.jsxs(v,{children:[c.jsx(h,{primary:R("settings.server.misc.log_level.label.server")}),c.jsx(D,{edge:"end",checked:se.debugLogsEnabled,onChange:function(e){return re("debugLogsEnabled",e.target.checked)}})]}),c.jsxs(v,{children:[c.jsx(h,{primary:R("settings.server.misc.tray_icon.label.title"),secondary:R("settings.server.misc.tray_icon.label.description")}),c.jsx(D,{edge:"end",checked:se.systemTrayEnabled,onChange:function(e){return re("systemTrayEnabled",e.target.checked)}})]}),c.jsx(O,{settingTitle:R("settings.server.misc.log_files.file_cleanup.title"),settingValue:t(se.maxLogFiles),value:se.maxLogFiles,valueUnit:R("global.date.label.day_one"),handleUpdate:function(e){return re("maxLogFiles",e)}}),c.jsx(x,{settingName:R("settings.server.misc.log_files.file_size.title"),value:se.maxLogFileSize,dialogDescription:R("settings.server.misc.log_files.file_size.description"),validate:function(e){return!!e.match(/^[0-9]+(|kb|KB|mb|MB|gb|GB)$/g)},handleChange:function(e){return re("maxLogFileSize",e)}}),c.jsx(x,{settingName:R("settings.server.misc.log_files.total_size.title"),value:se.maxLogFolderSize,dialogDescription:R("settings.server.misc.log_files.total_size.description"),validate:function(e){return!!e.match(/^[0-9]+(|kb|KB|mb|MB|gb|GB)$/g)},handleChange:function(e){return re("maxLogFolderSize",e)}})]})]})})}}})}();
