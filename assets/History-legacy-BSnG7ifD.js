System.register(["./index-legacy-BC5YaOB9.js","./Virtuoso.util-legacy-CuUyFX7u.js","./ChapterDownloadRetryButton-legacy-U8Aw5Cqz.js","./Avatar-legacy-Brup-bat.js"],(function(e,t){"use strict";var n,a,r,o,s,i,l,u,c,d,h,f,m,p,g,x,j,y,b,C,v,I,R,w,O,L,U,k;return{setters:[function(e){n=e.h,a=e.j,r=e.C,o=e.a,s=e.aa,i=e.A,l=e.L,u=e.b,c=e.B,d=e.bL,h=e.bN,f=e.bO,m=e.J,p=e.u,g=e.f,x=e.r,j=e.E,y=e.m,b=e.n,C=e.T,v=e.l},function(e){I=e.V,R=e.S,w=e.a,O=e.b},function(e){L=e.C,U=e.a,k=e.b},null],execute:function(){var t=n.memo((function(e){var t=e.chapter,n=t.manga;return a.jsx(r,{children:a.jsx(o,{component:l,to:i.reader.path(t.manga.id,t.sourceOrder),state:s.getReaderOpenChapterLocationState(t),sx:{color:function(e){return e.palette.text[t.isRead?"disabled":"primary"]}},children:a.jsxs(u,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:1.5},children:[a.jsxs(c,{sx:{display:"flex",flexGrow:1},children:[a.jsx(L,{mangaId:n.id,mangaTitle:n.title,thumbnailUrl:n.thumbnailUrl,thumbnailUrlLastFetched:n.thumbnailUrlLastFetched}),a.jsx(d,{title:n.title,secondaryText:"".concat(t.name," â€” ").concat(h.format(f(Number(t.lastReadAt)).valueOf()))})]}),a.jsx(m,{chapterId:t.id}),a.jsx(U,{chapterId:t.id}),a.jsx(k,{chapterId:t.id,isDownloaded:t.isDownloaded})]})})})}));e("History",(function(){var e,r=p().t,o=g().setTitle,i=x.useGetRecentlyReadChapters(void 0,{fetchPolicy:"cache-and-network",notifyOnNetworkStatusChange:!0}),l=i.data,u=i.loading,c=i.error,d=i.fetchMore,h=i.refetch,f=!(null==l||!l.chapters.pageInfo.hasNextPage),m=null==l?void 0:l.chapters.pageInfo.endCursor,L=null!==(e=null==l?void 0:l.chapters.nodes)&&void 0!==e?e:[],U=n.useMemo((function(){return Object.entries(s.groupByDate(L,"lastReadAt"))}),[L]),k=n.useMemo((function(){return U.map((function(e){return e[I.ITEMS].length}))}),[U]),G=I.useCreateGroupedComputeItemKey(k,n.useCallback((function(e){return U[e][I.GROUP]}),[U]),n.useCallback((function(e){return L[e].id}),[L]));n.useLayoutEffect((function(){return o(r("history.title")),function(){o("")}}),[r]);var N=n.useCallback((function(){f&&d({variables:{offset:L.length}})}),[f,m]);return c?a.jsx(j,{message:r("global.error.label.failed_to_load_data"),messageExtra:y(c),retry:function(){return h().catch(b())}}):u||0!==L.length?a.jsx(R,{style:{height:"undefined"},components:{Footer:function(){return u?a.jsx(v,{usePadding:!0}):null}},overscan:.5*window.innerHeight,endReached:N,groupCounts:k,groupContent:function(e){return a.jsx(O,{isFirstItem:0===e,children:a.jsx(C,{variant:"h5",component:"h2",children:U[e][I.GROUP]})})},computeItemKey:G,itemContent:function(e){return a.jsx(w,{children:a.jsx(t,{chapter:L[e]})})}}):a.jsx(j,{message:r("history.error.label.no_history_available")})}))}}}));
