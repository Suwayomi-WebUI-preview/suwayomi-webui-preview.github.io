var v=Object.defineProperty;var M=(t,e,a)=>e in t?v(t,e,{enumerable:!0,configurable:!0,writable:!0,value:a}):t[e]=a;var g=(t,e,a)=>M(t,typeof e!="symbol"?e+"":e,a);import{bk as m,i as E,H as C,e as S,K as D,J as P,D as d,aE as A,aB as N,aC as y,aD as B}from"./index-YZjYIyFe.js";const U={savedSearches:void 0,isPinned:!1},L=t=>({...t,savedSearches:t.savedSearches?JSON.stringify(t.savedSearches):void 0}),h=t=>{var e;return{...t,savedSearches:(e=C(t.savedSearches))!=null?e:void 0}},f=(t,e)=>h(D("source",{...t,meta:P(t.meta)},L(U),void 0,e)),l=t=>f(t),q=t=>{const e=f(t,S.useEffect);return S.useMemo(()=>e,[t])},O=async(t,e,a)=>m(t,[[e,L({[e]:a})[e]]]),x=(t,e=E())=>(a,r)=>O(t,a,r).catch(e),o=class o{static isLocalSource(e){return e.id===o.LOCAL_SOURCE_ID}static getLanguage(e){return o.isLocalSource(e)?d.OTHER:e.lang}static getLanguages(e){return[...new Set(e.map(o.getLanguage))]}static groupByLanguage(e){const a=Object.groupBy(e,i=>l(i).isPinned?d.PINNED:o.getLanguage(i)),n=Object.entries(a).toSorted(([i],[c])=>{const s=i===d.PINNED,u=c===d.PINNED;return s?-1:u?1:A(i,c)}).map(([i,c])=>[i,(c!=null?c:[]).toSorted((s,u)=>s.displayName.localeCompare(u.displayName))]);return Object.fromEntries(n)}static filter(e,{showNsfw:a,languages:r,keepLocalSource:n,pinned:i}={}){const c=N(y(r!=null?r:[]));return e.filter(s=>a===void 0||a||!s.isNsfw||n&&o.isLocalSource(s)).filter(s=>!r||c.includes(B(o.getLanguage(s)))||n&&o.isLocalSource(s)).filter(s=>i===void 0||!i||l(s).isPinned||n&&o.isLocalSource(s))}static areFromMultipleRepos(e){var r;const a=(r=e.find(n=>!!n.extension.repo))==null?void 0:r.extension.repo;return!a||!e.length?!1:e.some(n=>n.extension.repo!==a&&!o.isLocalSource(n))}static getLastUsedSource(e,a){return a.find(r=>r.id===e)}};g(o,"LOCAL_SOURCE_ID","0");let p=o;export{p as S,x as c,l as g,q as u};
