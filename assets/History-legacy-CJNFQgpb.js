System.register(["./index-legacy-CGEKhvW_.js","./Virtuoso.util-legacy-BAM91XIe.js","./ChapterDownloadRetryButton-legacy-DfRiYr83.js","./Avatar-legacy-B1ikuPre.js"],(function(e,t){"use strict";var n,a,r,o,s,i,l,c,u,d,h,f,p,g,m,x,j,y,b,C,v,I,R,w,O,k,L,U;return{setters:[function(e){n=e.k,a=e.j,r=e.C,o=e.a,s=e.ai,i=e.A,l=e.L,c=e.b,u=e.B,d=e.bZ,h=e.b$,f=e.bh,p=e.W,g=e.u,m=e.g,x=e.r,j=e.E,y=e.o,b=e.p,C=e.T,v=e.n},function(e){I=e.V,R=e.a,w=e.S,O=e.b},function(e){k=e.C,L=e.a,U=e.b},null],execute:function(){var t=n.memo((function(e){var t=e.chapter,n=t.manga;return a.jsx(r,{children:a.jsx(o,{component:l,to:i.reader.path(t.manga.id,t.sourceOrder),state:s.getReaderOpenChapterLocationState(t),sx:{color:function(e){return e.palette.text[t.isRead?"disabled":"primary"]}},children:a.jsxs(c,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:1.5},children:[a.jsxs(u,{sx:{display:"flex",flexGrow:1},children:[a.jsx(k,{mangaId:n.id,mangaTitle:n.title,thumbnailUrl:n.thumbnailUrl,thumbnailUrlLastFetched:n.thumbnailUrlLastFetched}),a.jsx(d,{title:n.title,secondaryText:"".concat(t.name," â€” ").concat(h.format(f(Number(t.lastReadAt)).valueOf()))})]}),a.jsx(p,{chapterId:t.id}),a.jsx(L,{chapterId:t.id}),a.jsx(U,{chapterId:t.id,isDownloaded:t.isDownloaded})]})})})}));e("History",(function(){var e,r=g().t,o=m().setTitle,i=x.useGetRecentlyReadChapters(void 0,{fetchPolicy:"cache-and-network",notifyOnNetworkStatusChange:!0}),l=i.data,c=i.loading,u=i.error,d=i.fetchMore,h=i.refetch,f=!(null==l||!l.chapters.pageInfo.hasNextPage),p=null==l?void 0:l.chapters.pageInfo.endCursor,k=null!==(e=null==l?void 0:l.chapters.nodes)&&void 0!==e?e:[],L=n.useMemo((function(){return Object.entries(s.groupByDate(k,"lastReadAt"))}),[k]),U=n.useMemo((function(){return L.map((function(e){return e[I.ITEMS].length}))}),[L]),G=I.useCreateGroupedComputeItemKey(U,n.useCallback((function(e){return L[e][I.GROUP]}),[L]),n.useCallback((function(e){return k[e].id}),[k]));n.useLayoutEffect((function(){return o(r("history.title")),function(){o("")}}),[r]);var P=n.useCallback((function(){f&&d({variables:{offset:k.length}})}),[f,p]);return u?a.jsx(j,{message:r("global.error.label.failed_to_load_data"),messageExtra:y(u),retry:function(){return h().catch(b())}}):c||0!==k.length?a.jsx(R,{style:{height:"undefined"},components:{Footer:function(){return c?a.jsx(v,{usePadding:!0}):null}},overscan:.5*window.innerHeight,endReached:P,groupCounts:U,groupContent:function(e){return a.jsx(O,{isFirstItem:0===e,children:a.jsx(C,{variant:"h5",component:"h2",children:L[e][I.GROUP]})})},computeItemKey:G,itemContent:function(e){return a.jsx(w,{children:a.jsx(t,{chapter:k[e]})})}}):a.jsx(j,{message:r("history.error.label.no_history_available")})}))}}}));
