import{u as C,r as h,f as A,m as U,g as p,j as e,M as j,s as f,v as _,bZ as b,e as N,i as T,k as E,b_ as V,b$ as P,c0 as W,b5 as y,c1 as F,F as M}from"./index-B0UwsKMl.js";import{N as B}from"./NumberSetting-wGGGirZY.js";import{u as D,g as O}from"./usePersistedValue-DIqwup0Y.js";import{S as I}from"./Switch-SWhSrS5Q.js";import{S}from"./SelectSetting-BRuxTpuo.js";import{E as R}from"./EmptyViewAbsoluteCentered-Bs5AD096.js";import{u as q}from"./useAppTitle-DqHPF1XK.js";import"./Slider-CKpmKyJR.js";import"./SwitchBase-_t5Xifnm.js";import"./Select-DbZjlVpk.js";const H=({disabled:t=!1,updateCheckInterval:g})=>{const{t:n}=C(),l=!!g,[m]=h.useUpdateServerSettings(),[i,v]=D("lastUpdateCheckInterval",b.default,g,O),d=A.useCallback(r=>{v(r===0?i:r),m({variables:{input:{settings:{webUIUpdateCheckInterval:r}}}}).catch(u=>U(n("global.error.label.failed_to_save_changes"),"error",p(u)))},[i]),c=r=>{d(r?i:0)};return e.jsxs(j,{children:[e.jsxs(f,{children:[e.jsx(_,{primary:n("settings.webui.auto_update.label.title")}),e.jsx(I,{disabled:t,edge:"end",checked:l,onChange:r=>c(r.target.checked)})]}),e.jsx(B,{settingTitle:n("settings.webui.auto_update.label.interval"),settingValue:n("library.settings.global_update.auto_update.interval.label.value",{hours:i}),value:i,minValue:b.min,maxValue:b.max,defaultValue:b.default,showSlider:!0,valueUnit:n("global.time.hour_short"),handleUpdate:d,disabled:t||!l})]})},ae=()=>{const{t}=C();q(t("settings.webui.title.webui"));const{settings:{webUIInformAvailableUpdate:g},loading:n,request:{error:l,refetch:m}}=N(),i=M(a=>U(t("global.error.label.failed_to_save_changes"),"error",p(a))),{data:v,loading:d,error:c,refetch:r}=h.useGetServerSettings({notifyOnNetworkStatusChange:!0}),[u]=h.useUpdateServerSettings(),o=(a,L)=>{a==="webUIChannel"&&h.graphQLClient.client.cache.evict({fieldName:"checkForWebUIUpdate"}),u({variables:{input:{settings:{[a]:L}}}}).catch(k=>U(t("global.error.label.failed_to_save_changes"),"error",p(k)))};if(n||d)return e.jsx(T,{});const x=l!=null?l:c;if(x)return e.jsx(R,{message:t("global.error.label.failed_to_load_data"),messageExtra:p(x),retry:()=>{l&&m().catch(E()),c&&r().catch(E())}});const s=v.settings,w=s.webUIFlavor===V.Custom;return e.jsxs(j,{sx:{pt:0},children:[e.jsx(S,{settingName:t("settings.webui.flavor.label.title"),value:s.webUIFlavor,values:P,handleChange:a=>o("webUIFlavor",a)}),e.jsxs(f,{children:[e.jsx(_,{primary:t("settings.webui.label.initial_open_browser")}),e.jsx(I,{edge:"end",checked:s.initialOpenInBrowserEnabled,onChange:a=>o("initialOpenInBrowserEnabled",a.target.checked)})]}),e.jsx(S,{settingName:t("settings.webui.interface.label.title"),value:s.webUIInterface,values:W,handleChange:a=>o("webUIInterface",a)}),e.jsx(y,{settingName:t("settings.webui.electron_path.label.title"),dialogDescription:t("settings.webui.electron_path.label.description"),value:s.electronPath,settingDescription:s.electronPath.length?s.electronPath:t("global.label.default"),handleChange:a=>o("electronPath",a)}),e.jsx(S,{settingName:t("settings.webui.channel.label.title"),value:s.webUIChannel,values:F,handleChange:a=>o("webUIChannel",a),disabled:w}),e.jsx(H,{disabled:w,updateCheckInterval:s.webUIUpdateCheckInterval}),!s.webUIUpdateCheckInterval&&e.jsxs(f,{children:[e.jsx(_,{primary:t("global.update.settings.inform.label.title"),secondary:t("global.update.settings.inform.label.description")}),e.jsx(I,{edge:"end",checked:g,onChange:a=>i("webUIInformAvailableUpdate",a.target.checked)})]})]})};export{ae as WebUISettings};
