import{j as e,S as j,r as h,T as d,aP as b,u as x,l as k,be as A,z as E,B as C,C as T,I as v,A as y,L as P,s as _,m as M,g as I,aA as N,b as B,h as w,e as R,f as S}from"./index-BxY--oUh.js";import{u as D}from"./useAppTitle-DKL-DSkS.js";import{E as G}from"./EmptyViewAbsoluteCentered-D6BQtVQo.js";import{a as U}from"./Asserts-CT4yz8Rx.js";import{u as z,c as F,S as f}from"./Sources-CPBYNKGK.js";import{S as H}from"./SpinnerImage-cYfbeNaT.js";import{M as O}from"./Metadata-Ct3MP3h9.js";import{I as V,b as m,u as q,a as K,g as W,t as Y}from"./Extensions.utils-0TtQe169.js";import{M as J}from"./MUI.util-CEodEA2f.js";import{L as Q}from"./ListCardContent-B7kgvJcO.js";import{S as X}from"./StyledGroupItemWrapper-DtvX_NvU.js";import{C as Z}from"./Card-VV91nnDB.js";import{C as $}from"./CardActionArea-BnmYSDIk.js";import{S as ee}from"./Switch-DloX7nE2.js";import"./Refresh-DHbarCD7.js";import"./Strings-CAV0u705.js";import"./SwitchBase-BXymYdFv.js";const te=({name:s,pkgName:r,iconUrl:a,repo:t})=>e.jsxs(j,{sx:{alignItems:"center"},children:[e.jsx(H,{alt:s,src:h.getValidImgUrlFor(a)}),e.jsx(d,{variant:"h5",component:"h2",children:s}),e.jsx(d,{variant:"body2",color:"textSecondary",children:r.replace("eu.kanade.tachiyomi.extension.","")}),t&&e.jsx(d,{variant:"body2",color:"textSecondary",children:t})]}),p=({addDivider:s=!0,...r})=>{var a;return e.jsxs(e.Fragment,{children:[e.jsx(O,{...r,stackProps:{...r.stackProps,sx:{...(a=r.stackProps)==null?void 0:a.sx,flexDirection:"column-reverse",alignItems:"center",flexGrow:1}},titleProps:{...r.titleProps,variant:"body2"}}),s&&e.jsx(b,{orientation:"vertical",sx:{height:"25px"}})]})},ae=({versionName:s,lang:r,isNsfw:a})=>{const{t}=x();return e.jsxs(j,{sx:{flexDirection:"row",justifyContent:"space-between",alignItems:"center"},children:[e.jsx(p,{title:t("global.label.version"),value:s}),e.jsx(p,{title:t("global.language.label.language"),value:k(r)}),a&&e.jsx(p,{title:t("extension.label.age_rating"),value:"18+",valueProps:{color:"error"}})]})},se=({pkgName:s,isInstalled:r,isObsolete:a,hasUpdate:t})=>{const o=A(),{t:i}=x(),n=W(r,a,t);return e.jsx(E,{sx:{px:1},children:e.jsx(C,{sx:{width:"100%",color:n===K.OBSOLETE?"red":"inherit"},variant:"outlined",size:"large",onClick:async()=>{const l=t&&!a?m.UPDATE:m.UNINSTALL;try{await q(s,a,l),l===m.UNINSTALL&&o()}catch(u){}},children:i(V[n])})})},re=s=>{const{id:r,isConfigurable:a}=s,{t}=x(),{isEnabled:o}=z(s),i=F(s,n=>M(t("global.error.label.failed_to_save_changes"),"error",I(n)));return e.jsx(X,{sx:{px:0},children:e.jsx(Z,{children:e.jsx($,{onClick:()=>i("isEnabled",!o),children:e.jsxs(Q,{children:[e.jsx(d,{variant:"h6",component:"h3",sx:{flexGrow:1},children:Y(f.getLanguage(s))}),a&&e.jsx(T,{title:t("settings.title"),children:e.jsx(v,{component:P,to:y.sources.childRoutes.configure.path(r),color:"inherit",onClick:n=>n.stopPropagation(),...J.preventRippleProp(),children:e.jsx(_,{})})}),e.jsx(ee,{checked:o})]})})})},r)},Le=()=>{var u;const{t:s}=x(),{pkgName:r}=N();D(s("source.extension_info.title"));const a=h.useGetExtension(r),t=h.useGetSourceList(),{extension:o}=(u=a.data)!=null?u:{},i=B.useMemo(()=>{var c;return(c=t.data)!=null&&c.sources?t.data.sources.nodes.filter(g=>g.extension.pkgName===(o==null?void 0:o.pkgName)).sort((g,L)=>w(f.getLanguage(g),f.getLanguage(L))):[]},[o==null?void 0:o.pkgName,t.data]),n=a.loading||t.loading,l=a.error||t.error;return n?e.jsx(R,{}):l?e.jsx(G,{message:s("global.error.label.failed_to_load_data"),messageExtra:I(a.error),retry:()=>{a.error&&a.refetch().catch(S()),t.error&&t.refetch().catch(S())}}):(U(o),e.jsxs(j,{sx:{gap:2},children:[e.jsx(te,{...o}),e.jsx(ae,{...o}),e.jsx(se,{...o}),e.jsx(E,{sx:{px:1},children:i.map(c=>e.jsx(re,{...c},c.id))})]}))};export{Le as ExtensionInfo};
