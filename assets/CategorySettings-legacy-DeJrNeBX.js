!function(){function n(n){return function(n){if(Array.isArray(n))return r(n)}(n)||function(n){if("undefined"!=typeof Symbol&&null!=n[Symbol.iterator]||null!=n["@@iterator"])return Array.from(n)}(n)||t(n)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function e(n,e){return function(n){if(Array.isArray(n))return n}(n)||function(n,e){var t=null==n?null:"undefined"!=typeof Symbol&&n[Symbol.iterator]||n["@@iterator"];if(null!=t){var r,i,o,a,c=[],l=!0,u=!1;try{if(o=(t=t.call(n)).next,0===e){if(Object(t)!==t)return;l=!1}else for(;!(l=(r=o.call(t)).done)&&(c.push(r.value),c.length!==e);l=!0);}catch(n){u=!0,i=n}finally{try{if(!l&&null!=t.return&&(a=t.return(),Object(a)!==a))return}finally{if(u)throw i}}return c}}(n,e)||t(n,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function t(n,e){if(n){if("string"==typeof n)return r(n,e);var t={}.toString.call(n).slice(8,-1);return"Object"===t&&n.constructor&&(t=n.constructor.name),"Map"===t||"Set"===t?Array.from(n):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?r(n,e):void 0}}function r(n,e){(null==e||e>n.length)&&(e=n.length);for(var t=0,r=Array(e);t<e;t++)r[t]=n[t];return r}System.register(["./index-legacy-DbYLCKg3.js","./Add-legacy-DTeDxKVW.js","./DragHandle-legacy-2hrnwshU.js","./StyledFab-legacy-B8apVztj.js","./EmptyViewAbsoluteCentered-legacy-CLYdV_C7.js","./Edit-legacy-CVvUdm-u.js","./Delete-legacy-BPMyoZ96.js","./ListCardContent-legacy-Cb_1VpC5.js","./Card-legacy-Dn_6cx31.js","./useAppTitle-legacy-CUuHxoEw.js","./Asserts-legacy-CWE3_MKu.js","./Checkbox-legacy-WbDb5rFa.js","./SwitchBase-legacy-G2l-7Re9.js"],function(t,r){"use strict";var i,o,a,c,l,u,s,d,f,g,h,y,j,x,m,v,p,b,C,S,A,D,_,E,k,w,I,F,B,G,H,O,T,L,M,Q,R,U,q,K,N;return{setters:[function(n){i=n.u,o=n.j,a=n.H,c=n.T,l=n.b,u=n.C,s=n.I,d=n.r,f=n.f,g=n.o,h=n.p,y=n.q,j=n.aE,x=n.w,m=n.B,v=n.m,p=n.g,b=n.cP,C=n.i,S=n.k,A=n.bG},function(n){D=n.A},function(n){_=n.D,E=n.a,k=n.b,w=n.c,I=n.S,F=n.v,B=n.d,G=n.e},function(n){H=n.D,O=n.F},function(n){T=n.E},function(n){L=n.E},function(n){M=n.D},function(n){Q=n.L},function(n){R=n.C},function(n){U=n.u},function(n){q=n.a},function(n){K=n.F,N=n.C},null],execute:function(){t("CategorySettings",function(){var t=i(),c=t.i18n,l=(t._,E.useSensorsForDevice());U(c._({id:"EDmovq"}));var u=d.useGetCategories(b,{notifyOnNetworkStatusChange:!0}),s=u.data,g=u.loading,h=u.error,y=u.refetch,j=e(d.useReorderCategory(),2),x=j[0],m=j[1].reset,v=e(f.useState(P),2),_=v[0],L=v[1],M=e(f.useState(!1),2),Q=M[0],R=M[1],q=e(f.useState(null),2),K=q[0],N=q[1],J=f.useMemo(function(){var e,t=n(null!==(e=null==s?void 0:s.categories.nodes)&&void 0!==e?e:[]);return t.length>0&&"Default"===t[0].name&&t.shift(),t},[s]),V=function(n){L(null!=n?n:P),R(!0)};if(g)return o.jsx(C,{});if(h)return o.jsx(T,{message:c._({id:"2HCkNR"}),messageExtra:p(h),retry:function(){return y().catch(S("CategorySettings::refetch"))}});return o.jsxs(o.Fragment,{children:[o.jsx(k,{sensors:l,collisionDetection:w,onDragStart:function(n){var e;return N(null!==(e=J.find(function(e){return e.id===n.active.id}))&&void 0!==e?e:null)},onDragEnd:function(n){var e=n.active,t=n.over;if(N(null),t&&e.id!==t.id){var r,i,o=J.findIndex(function(n){return n.id===e.id});r=J.findIndex(function(n){return n.id===t.id}),i=J[o],x({variables:{input:{id:i.id,position:r+1}}}).catch(function(){return m()})}},onDragCancel:function(){return N(null)},onDragAbort:function(){return N(null)},children:o.jsxs(a,{sx:{paddingBottom:H},children:[o.jsx(I,{items:J,strategy:F,children:J.map(function(n,e){return o.jsx(B,{id:n.id,isDragging:n.id===(null==K?void 0:K.id),children:o.jsx(r,{category:n,onEdit:function(){return V(e)}})},n.id)})}),o.jsx(G,{isActive:!!K,children:o.jsx(r,{category:K,onEdit:A})})]})}),o.jsx(O,{color:"primary","aria-label":"add",sx:{position:"fixed",bottom:function(n){return n.spacing(2)},right:function(n){return n.spacing(2)}},onClick:function(){return V()},children:o.jsx(D,{})}),Q&&o.jsx(W,{category:J[_],onClose:function(){L(P),R(!1)}})]})});var r=function(n){var e=n.category,t=n.onEdit,r=i(),f=r.i18n;r._;return o.jsx(a,{sx:{p:1,pb:0},children:o.jsx(R,{children:o.jsxs(Q,{sx:{gap:2},children:[o.jsx(_,{}),o.jsx(c,{sx:{flexGrow:1},variant:"h6",component:"h2",children:e.name}),o.jsxs(l,{sx:{flexDirection:"row"},children:[o.jsx(u,{title:f._({id:"ePK91l"}),children:o.jsx(s,{component:a,onClick:t,children:o.jsx(L,{})})}),o.jsx(u,{title:f._({id:"cnGeoo"}),children:o.jsx(s,{component:a,onClick:function(){d.deleteCategory(e.id)},children:o.jsx(M,{})})})]})]})})})},P=-1,W=function(n){var t=n.category,r=n.onClose,a=!!t,c=i(),l=c.i18n,u=(c._,e(f.useState(null==t?void 0:t.name),2)),s=u[0],b=u[1],C=e(f.useState(!(null==t||!t.default)),2),S=C[0],A=C[1],D=void 0!==s&&!s.trim().length,_=void 0!==s&&!D;return o.jsxs(g,{open:!0,onClose:r,children:[o.jsx(h,{id:"form-dialog-title",children:a?l._({id:"j1Jl7s"}):l._({id:"tl5vsv"})}),o.jsxs(y,{children:[o.jsx(j,{autoFocus:!0,margin:"dense",id:"name",label:l._({id:"+HdMsm"}),type:"text",fullWidth:!0,value:s,onChange:function(n){return b(n.target.value.trim())},error:D,helperText:D?l._({id:"UeOiKl"}):void 0}),o.jsx(K,{control:o.jsx(N,{checked:S,onChange:function(n){return A(n.target.checked)}}),label:l._({id:"hf5GFU"})})]}),o.jsxs(x,{children:[o.jsx(m,{onClick:r,color:"primary",children:l._({id:"dEgA5A"})}),o.jsx(m,{onClick:function(){q(s),r(),a?d.updateCategory(t.id,{name:s,default:S}).response.catch(function(n){return v(l._({id:"cBoXe4"}),"error",p(n))}):d.createCategory({name:s,default:S}).response.catch(function(n){return v(l._({id:"9B+9sQ"}),"error",p(n))})},color:"primary",disabled:!_,children:l._({id:"hQRttt"})})]})]})}}}})}();
