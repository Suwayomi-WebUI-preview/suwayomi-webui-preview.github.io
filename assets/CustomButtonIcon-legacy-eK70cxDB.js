!function(){function e(t){return e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e(t)}var t=["index","isSortDesc","chapters"],r=["children"];function n(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(-1!==t.indexOf(n))continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],-1===t.indexOf(r)&&{}.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}function o(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function a(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?o(Object(r),!0).forEach((function(t){i(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):o(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function i(t,r,n){return(r=function(t){var r=function(t,r){if("object"!=e(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var o=n.call(t,r||"default");if("object"!=e(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(t)}(t,"string");return"symbol"==e(r)?r:r+""}(r))in t?Object.defineProperty(t,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[r]=n,t}System.register(["./index-legacy-BDqoyjkR.js","./useManageMangaLibraryState-legacy-C_-99d8J.js","./ChapterCardMetadata-legacy-qa30Ul2R.js","./Delete-legacy-CQLJ83-E.js","./Download-legacy-Dg4s7aE0.js","./DoneAll-legacy-D3Ouiiq8.js","./MUI.util-legacy-C7LH2u7d.js","./ListCardContent-legacy-Cbmh8KiD.js","./Card-legacy-CQYdL3GD.js","./CardActionArea-legacy-DrIyBqUU.js","./Checkbox-legacy-SjKiJse7.js"],(function(e,o){"use strict";var i,l,c,s,d,u,p,h,f,x,b,m,g,y,v,j,k,C,w,D,O,S,_,M,I,P,R,T,V,B,L,N,z,A,G,H,E,U,K,W,F,X,q,J;return{setters:[function(e){i=e.c,l=e.j,c=e.u,s=e.r,d=e.a9,u=e.d,p=e.e,h=e.X,f=e.de,x=e.i,b=e.ae,m=e.a8,g=e.a5,y=e.S,v=e.am,j=e.L,k=e.d_,C=e.C,w=e.I,D=e.a3,O=e.a7,S=e.o,_=e.T,M=e.B},function(e){I=e.c,P=e.d,R=e.C,T=e.e,V=e.f,B=e.D,L=e.R,N=e.V,z=e.g,A=e.M},function(e){G=e.C,H=e.D},function(e){E=e.D},function(e){U=e.D},function(e){K=e.D},function(e){W=e.M},function(e){F=e.L},function(e){X=e.C},function(e){q=e.C},function(e){J=e.C}],execute:function(){var o=i(l.jsx("path",{d:"M21 7h-6V5h6zm-2 3.9c-.32.07-.66.1-1 .1-2.76 0-5-2.24-5-5 0-1.13.37-2.16 1-3H7c-1.1 0-2 .9-2 2v16l7-3 7 3z"})),Q=i(l.jsx("path",{d:"M21 7h-2v2h-2V7h-2V5h2V3h2v2h2zm-2 14-7-3-7 3V5c0-1.1.9-2 2-2h7c-.63.84-1 1.87-1 3 0 2.76 2.24 5 5 5 .34 0 .68-.03 1-.1z"})),Y=e("L",i(l.jsx("path",{d:"M19 19H5V5h7V3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2v-7h-2zM14 3v2h3.59l-9.83 9.83 1.41 1.41L19 6.41V10h2V3z"}))),Z=e("a",(function(e){var t,r,n,a=e.chapter,i=e.handleSelection,b=e.canBeDownloaded,m=void 0!==b&&b,g=e.selectedChapters,y=void 0===g?[]:g,v=e.onClose,j=e.selectable,k=void 0===j||j,C=c().t,w=!!a,D=null!=a?a:{},O=D.isDownloaded,S=D.isRead,_=D.isBookmarked,M=null!==(r=null===(n=s.useGetMangaChapters(d,null!==(t=null==a?void 0:a.mangaId)&&void 0!==t?t:-1,{skip:!a,fetchPolicy:"cache-only"}).data)||void 0===n?void 0:n.chapters.nodes)&&void 0!==r?r:[],N=u().settings.deleteChaptersWithBookmark,z=T(w,f),A=I(w),G=V(w),H=p.useMemo((function(){return{downloadableChapters:h.getDownloadable(y),downloadedChapters:h.getDownloaded(y),unbookmarkedChapters:h.getNonBookmarked(y),bookmarkedChapters:h.getBookmarked(y),unreadChapters:h.getNonRead(y),readChapters:h.getRead(y)}}),[y]),W=H.downloadableChapters,F=H.downloadedChapters,X=H.unbookmarkedChapters,q=H.bookmarkedChapters,J=H.unreadChapters,Z=H.readChapters,$=function(e,t){var r,n="mark_prev_as_read"===e,o=n?"mark_as_read":e;if("delete"===o&&a&&!h.isDeletable(a,N))return void v();var i=function(){if(!a)return t;if(!n)return[a];var e=M.findIndex((function(e){return e.id===a.id}));return e+1>M.length-1?[]:M.slice(e+1)}();i.length?(h.performAction(o,h.getIds(i),{chapters:i,wasManuallyMarkedAsRead:!0,trackProgressMangaId:null===(r=i[0])||void 0===r?void 0:r.mangaId}).catch(x()),v()):v()};return l.jsxs(l.Fragment,{children:[w&&k&&l.jsx(P,{onClick:function(){null==i||i(a.id,!0),v()},Icon:R,title:C("chapter.action.label.select")}),w&&l.jsx(P,{Icon:Y,disabled:!a.realUrl,onClick:function(){window.open(a.realUrl,"_blank","noopener,noreferrer"),v()},title:C("chapter.action.label.open_on_source")}),A(m)&&l.jsx(P,{Icon:U,disabled:G(!W.length),onClick:function(){return $("download",W)},title:z("download",W.length)}),A(O)&&l.jsx(P,{Icon:E,disabled:G(!F.length),onClick:function(){return $("delete",h.getDeletable(F,N))},title:z("delete",F.length)}),A(!_)&&l.jsx(P,{Icon:Q,disabled:G(!X.length),onClick:function(){return $("bookmark",X)},title:z("bookmark",X.length)}),A(_)&&l.jsx(P,{Icon:o,disabled:G(!q.length),onClick:function(){return $("unbookmark",q)},title:z("unbookmark",q.length)}),A(!S)&&l.jsx(P,{Icon:B,disabled:G(!J.length),onClick:function(){return $("mark_as_read",J)},title:z("mark_as_read",J.length)}),A(S)&&l.jsx(P,{Icon:L,disabled:G(!Z.length),onClick:function(){return $("mark_as_unread",Z)},title:z("mark_as_unread",Z.length)}),w&&l.jsx(P,{onClick:function(){return $("mark_prev_as_read",[])},Icon:K,title:C("chapter.action.mark_as_read.add.label.action.previous")})]})})),$=e("B",i(l.jsx("path",{d:"M17 3H7c-1.1 0-1.99.9-1.99 2L5 21l7-3 7 3V5c0-1.1-.9-2-2-2"}))),ee=p.memo((function(e){var t=c().t,r=b(),n=m.usePreventMobileContextMenu(),o=p.useRef(null),i=e.mode,s=void 0===i?"manga.page":i,d=e.chapter,u=e.showChapterNumber,f=e.onSelect,x=e.selected,S=e.selectable,_=void 0===S||S,M=e.isActiveChapter,I=void 0!==M&&M,P=null!==x,R=d.isDownloaded,T=function(e){P&&(e.preventDefault(),e.stopPropagation(),f(d.id,!x,e.shiftKey))},V=function(e,t){e.stopPropagation(),e.preventDefault(),null==t||t(e)},B=N((function(e,t){var r=t.context;P||!o.current?(e.shiftKey=!0,T(e)):V(e,(function(){return null==r?void 0:r(o.current)}))}));return l.jsx(g,{variant:"popover",popupId:"chapter-card-action-menu",children:function(e){var i;return l.jsxs(y,{sx:{pt:1,px:1},children:[l.jsx(X,{sx:a({},v("reader"===s&&I,{backgroundColor:"primary.main"})),children:l.jsx(q,a(a({component:j,to:h.getReaderUrl(d),onContextMenu:n,sx:m.preventMobileContextMenuSx(),style:{color:r.palette.text[d.isRead?"disabled":"primary"]},state:h.getReaderOpenChapterLocationState(d,!0),replace:"reader"===s,onClick:function(e){return T(e)}},B(e.open)),{},{children:l.jsxs(F,{children:[l.jsx(G,{title:u?"".concat(t("chapter.title_one")," ").concat(d.chapterNumber):d.name,secondaryText:d.scanlator,ternaryText:"".concat(k(Number(null!==(i=d.uploadDate)&&void 0!==i?i:0),!0)).concat(R?" â€¢ ".concat(t("chapter.status.label.downloaded")):""),infoIcons:d.isBookmarked&&l.jsx($,{color:"reader"===s&&I?"secondary":"primary"}),slotProps:{title:{variant:"h6",component:"h3",sx:v("reader"===s&&I,{color:r.palette.primary.contrastText})},secondaryText:{sx:v("reader"===s&&I,{color:r.palette.primary.contrastText})},ternaryText:{sx:v("reader"===s&&I,{color:r.palette.primary.contrastText})}}}),l.jsx(H,{chapterId:d.id,color:"reader"===s&&I?r.palette.primary.contrastText:void 0}),l.jsx(y,{sx:{minHeight:"48px"},children:null===x?l.jsx(C,{title:t("global.button.options"),children:l.jsx(w,a(a({ref:o},W.preventRippleProp(D(e),{onClick:function(e){return V(e)}})),{},{"aria-label":"more",sx:a({color:"inherit"},v("reader"===s&&I,{color:"primary.contrastText"})),children:l.jsx(z,{})}))}):l.jsx(C,{title:t(x?"global.button.deselect":"global.button.select"),children:l.jsx(J,{checked:x})})})]})}))}),!P&&e.isOpen&&l.jsx(A,a(a({},O(e)),{},{children:function(e){return l.jsx(Z,{onClose:e,chapter:d,handleSelection:function(){return f(d.id,!0)},canBeDownloaded:h.isDownloadable(d),selectable:_})}}))]})}})})),te=function(e){var t=e.missingChaptersGap,r=c().t;return l.jsxs(y,{sx:{width:"100%",flexDirection:"row",justifyContent:"center",alignItems:"center",p:2,pt:3.5,pb:2.5},children:[l.jsx(S,{sx:{flexGrow:1,border:"1px solid",borderColor:function(e){return e.palette.text.secondary}}}),l.jsx(_,{sx:{px:2},variant:"body2",color:"textSecondary",children:r("chapter.missing",{count:t})}),l.jsx(S,{sx:{flexGrow:1,border:"1px solid",borderColor:function(e){return e.palette.text.secondary}}})]})};e("C",(function(e){var r,o=e.index,i=e.isSortDesc,c=e.chapters,s=n(e,t),d=i?o+1:o-1,u=c[o],p=null!==(r=c[d])&&void 0!==r?r:{chapterNumber:0},f=h.getGap(u,p),x=f>0;return l.jsxs(y,{sx:v(!i,{flexDirection:"column-reverse"}),children:[l.jsx(ee,a(a({},s),{},{chapter:c[o]})),x&&l.jsx(te,{missingChaptersGap:f})]})})),e("b",p.forwardRef((function(e,t){var o=e.children,i=n(e,r);return l.jsx(M,a(a({ref:t},i),{},{sx:a({minWidth:"unset",px:"10px"},i.sx),children:o}))})))}}}))}();
