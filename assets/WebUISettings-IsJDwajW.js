import{u as w,r as S,f as N,m as f,g as p,j as e,N as k,s as m,v as U,dj as h,e as y,i as W,k as C,dk as B,dl as F,dm as T,cO as P,dn as M,F as O}from"./index-BCKoIEqI.js";import{N as $}from"./NumberSetting-1WSZHhbH.js";import{u as H,g as X}from"./usePersistedValue-csayWSEp.js";import{S as _}from"./Switch-DOLtNWw8.js";import{S as b}from"./SelectSetting-DyOppkhW.js";import{E as D}from"./EmptyViewAbsoluteCentered--5TDFcVk.js";import{u as G}from"./useAppTitle-DuVJbe8a.js";import"./Slider-WMHOBwFi.js";import"./SwitchBase-Do41N3BN.js";import"./Select--jAdXHpZ.js";const J=({disabled:t=!1,updateCheckInterval:I})=>{const{i18n:n,_:x}=w(),c=!!I,[d]=S.useUpdateServerSettings(),[i,l]=H("lastUpdateCheckInterval",h.default,I,X),g=N.useCallback(s=>{l(s===0?i:s),d({variables:{input:{settings:{webUIUpdateCheckInterval:s}}}}).catch(u=>f(n._({id:"cBoXe4"}),"error",p(u)))},[i]),v=s=>{g(s?i:0)};return e.jsxs(k,{children:[e.jsxs(m,{children:[e.jsx(U,{primary:n._({id:"eX6y8L"})}),e.jsx(_,{disabled:t,edge:"end",checked:c,onChange:s=>v(s.target.checked)})]}),e.jsx($,{settingTitle:n._({id:"KXpFbx"}),settingValue:"".concat(i).concat(n._({id:"3S9JH+"})),value:i,minValue:h.min,maxValue:h.max,defaultValue:h.default,showSlider:!0,valueUnit:n._({id:"3S9JH+"}),handleUpdate:g,disabled:t||!c})]})},re=()=>{const{i18n:t,_:I}=w();G(t._({id:"GYkIV+"}));const{settings:{webUIInformAvailableUpdate:n,webUIInformVersionUpdated:x},loading:c,request:{error:d,refetch:i}}=y(),l=O(a=>f(t._({id:"cBoXe4"}),"error",p(a))),{data:g,loading:v,error:s,refetch:u}=S.useGetServerSettings({notifyOnNetworkStatusChange:!0}),[L]=S.useUpdateServerSettings(),o=(a,V)=>{a==="webUIChannel"&&S.graphQLClient.client.cache.evict({fieldName:"checkForWebUIUpdate"}),L({variables:{input:{settings:{[a]:V}}}}).catch(A=>f(t._({id:"cBoXe4"}),"error",p(A)))};if(c||v)return e.jsx(W,{});const E=d!=null?d:s;if(E)return e.jsx(D,{message:t._({id:"6m5aox"}),messageExtra:p(E),retry:()=>{d&&i().catch(C("WebUISettings::refetchServerMetadataSettings")),s&&u().catch(C("WebUISettings::refetchServerSettings"))}});const r=g.settings,j=r.webUIFlavor===B.Custom;return e.jsxs(k,{sx:{pt:0},children:[e.jsx(b,{settingName:t._({id:"1Ov6Nl"}),value:r.webUIFlavor,values:F,handleChange:a=>o("webUIFlavor",a)}),e.jsxs(m,{children:[e.jsx(U,{primary:t._({id:"toJF0g"})}),e.jsx(_,{edge:"end",checked:r.initialOpenInBrowserEnabled,onChange:a=>o("initialOpenInBrowserEnabled",a.target.checked)})]}),e.jsx(b,{settingName:t._({id:"GfnKOF"}),value:r.webUIInterface,values:T,handleChange:a=>o("webUIInterface",a)}),e.jsx(P,{settingName:t._({id:"Wdus0i"}),dialogDescription:t._({id:"iaJUy1"}),value:r.electronPath,settingDescription:r.electronPath.length?r.electronPath:t._({id:"ovBPCi"}),handleChange:a=>o("electronPath",a)}),e.jsx(b,{settingName:t._({id:"HdE1If"}),value:r.webUIChannel,values:M,handleChange:a=>o("webUIChannel",a),disabled:j}),e.jsx(J,{disabled:j,updateCheckInterval:r.webUIUpdateCheckInterval}),e.jsxs(m,{children:[e.jsx(U,{primary:t._({id:"aftxcy"}),secondary:t._({id:"bUBj1e"})}),e.jsx(_,{edge:"end",checked:x,onChange:a=>l("webUIInformVersionUpdated",a.target.checked)})]}),!r.webUIUpdateCheckInterval&&e.jsxs(m,{children:[e.jsx(U,{primary:t._({id:"IV9G4u"}),secondary:t._({id:"3tqdsS"})}),e.jsx(_,{edge:"end",checked:n,onChange:a=>l("webUIInformAvailableUpdate",a.target.checked)})]})]})};export{re as WebUISettings};
