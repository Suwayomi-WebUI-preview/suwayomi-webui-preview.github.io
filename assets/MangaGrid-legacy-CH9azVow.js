!function(){var e=["className","children","columns","container","component","direction","wrap","size","offset","spacing","rowSpacing","columnSpacing","unstable_level"],n=["MenuItemProps","className","label","LeftIcon","renderLabel","RightIcon"],t=["ref"],r=["parentMenuOpen","label","renderLabel","RightIcon","LeftIcon","children","className","tabIndex","ContainerProps","MenuProps"],o=["ref"],i=["ref","persistKey"],a=["children","ref"],c=["children"];function l(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */var e,n,t="function"==typeof Symbol?Symbol:{},r=t.iterator||"@@iterator",o=t.toStringTag||"@@toStringTag";function i(t,r,o,i){var l=r&&r.prototype instanceof c?r:c,s=Object.create(l.prototype);return u(s,"_invoke",function(t,r,o){var i,c,l,u=0,s=o||[],d=!1,f={p:0,n:0,v:e,a:p,f:p.bind(e,4),d:function(n,t){return i=n,c=0,l=e,f.n=t,a}};function p(t,r){for(c=t,l=r,n=0;!d&&u&&!o&&n<s.length;n++){var o,i=s[n],p=f.p,g=i[2];t>3?(o=g===r)&&(l=i[(c=i[4])?5:(c=3,3)],i[4]=i[5]=e):i[0]<=p&&((o=t<2&&p<i[1])?(c=0,f.v=r,f.n=i[1]):p<g&&(o=t<3||i[0]>r||r>g)&&(i[4]=t,i[5]=r,f.n=g,c=0))}if(o||t>1)return a;throw d=!0,r}return function(o,s,g){if(u>1)throw TypeError("Generator is already running");for(d&&1===s&&p(s,g),c=s,l=g;(n=c<2?e:l)||!d;){i||(c?c<3?(c>1&&(f.n=-1),p(c,l)):f.n=l:f.v=l);try{if(u=2,i){if(c||(o="next"),n=i[o]){if(!(n=n.call(i,l)))throw TypeError("iterator result is not an object");if(!n.done)return n;l=n.value,c<2&&(c=0)}else 1===c&&(n=i.return)&&n.call(i),c<2&&(l=TypeError("The iterator does not provide a '"+o+"' method"),c=1);i=e}else if((n=(d=f.n<0)?l:t.call(r,f))!==a)break}catch(n){i=e,c=1,l=n}finally{u=1}}return{value:n,done:d}}}(t,o,i),!0),s}var a={};function c(){}function s(){}function d(){}n=Object.getPrototypeOf;var f=[][r]?n(n([][r]())):(u(n={},r,function(){return this}),n),p=d.prototype=c.prototype=Object.create(f);function g(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,d):(e.__proto__=d,u(e,o,"GeneratorFunction")),e.prototype=Object.create(p),e}return s.prototype=d,u(p,"constructor",d),u(d,"constructor",s),s.displayName="GeneratorFunction",u(d,o,"GeneratorFunction"),u(p),u(p,o,"Generator"),u(p,r,function(){return this}),u(p,"toString",function(){return"[object Generator]"}),(l=function(){return{w:i,m:g}})()}function u(e,n,t,r){var o=Object.defineProperty;try{o({},"",{})}catch(e){o=0}u=function(e,n,t,r){function i(n,t){u(e,n,function(e){return this._invoke(n,t,e)})}n?o?o(e,n,{value:t,enumerable:!r,configurable:!r,writable:!r}):e[n]=t:(i("next",0),i("throw",1),i("return",2))},u(e,n,t,r)}function s(e,n,t,r,o,i,a){try{var c=e[i](a),l=c.value}catch(e){return void t(e)}c.done?n(l):Promise.resolve(l).then(r,o)}function d(e,n){if(null==e)return{};var t,r,o=function(e,n){if(null==e)return{};var t={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==n.indexOf(r))continue;t[r]=e[r]}return t}(e,n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)t=i[r],-1===n.indexOf(t)&&{}.propertyIsEnumerable.call(e,t)&&(o[t]=e[t])}return o}function f(e){return function(e){if(Array.isArray(e))return m(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||g(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function p(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){var t=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var r,o,i,a,c=[],l=!0,u=!1;try{if(i=(t=t.call(e)).next,0===n){if(Object(t)!==t)return;l=!1}else for(;!(l=(r=i.call(t)).done)&&(c.push(r.value),c.length!==n);l=!0);}catch(e){u=!0,o=e}finally{try{if(!l&&null!=t.return&&(a=t.return(),Object(a)!==a))return}finally{if(u)throw o}}return c}}(e,n)||g(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function g(e,n){if(e){if("string"==typeof e)return m(e,n);var t={}.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?m(e,n):void 0}}function m(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=Array(n);t<n;t++)r[t]=e[t];return r}function h(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),t.push.apply(t,r)}return t}function v(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?h(Object(t),!0).forEach(function(n){b(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):h(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}function b(e,n,t){return(n=function(e){var n=function(e,n){if("object"!=y(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,n||"default");if("object"!=y(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===n?String:Number)(e)}(e,"string");return"symbol"==y(n)?n:n+""}(n))in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function y(e){return y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},y(e)}System.register(["./index-legacy-BfcsMgoh.js","./EmptyViewAbsoluteCentered-legacy-dLz43d1r.js","./useManageMangaLibraryState-legacy-DBEJpFhs.js","./Delete-legacy-CzwKgqqi.js","./Download-legacy-DWPkgwzb.js","./ContinueReadingTooltip-legacy-7uH5OjpH.js","./Sync-legacy-BCu3Wqjb.js","./Mangas-legacy-BuVEee6P.js","./use-merged-ref-legacy-pmKxyThz.js","./CheckboxInput-legacy-BrUbdUdh.js","./FormGroup-legacy-C41aRgjX.js","./SpinnerImage-legacy-l090QSuY.js","./MUI.util-legacy-D9xMlHDR.js","./Checkbox-legacy-4BJBVqs2.js","./Link-legacy-D-Iyry0u.js","./Card-legacy-BE0am6dz.js","./CardActionArea-legacy-CNvQn746.js","./ListCardAvatar-legacy-f7U8g-Y_.js","./ListCardContent-legacy-C3U2VB2i.js","./PlayArrow-legacy-Cgv7Un9L.js","./Chapters-legacy-CXx-ftbd.js","./StyledFab-legacy-CvLQaHJR.js","./index-legacy-Cd9AMH_0.js","./Virtuoso.util-legacy-DYslOy7v.js"],function(u,m){"use strict";var h,x,j,w,C,S,k,I,M,L,O,P,R,T,E,_,A,D,G,N,F,W,B,z,U,K,V,H,X,Y,q,J,Q,Z,$,ee,ne,te,re,oe,ie,ae,ce,le,ue,se,de,fe,pe,ge,me,he,ve,be,ye,xe,je,we,Ce,Se,ke,Ie,Me,Le,Oe,Pe,Re,Te,Ee,_e,Ae,De,Ge,Ne,Fe,We,Be,ze,Ue,Ke,Ve,He,Xe,Ye,qe,Je,Qe,Ze,$e,en;return{setters:[function(e){h=e.bQ,x=e.bR,j=e.b,w=e.bS,C=e.j,S=e.ae,k=e.bT,I=e.bU,M=e.ai,L=e.ac,O=e.bV,P=e.a1,R=e.ad,T=e.am,E=e.ax,_=e.ay,A=e.p,D=e.bW,G=e.bX,N=e.bY,F=e.O,W=e.z,B=e.a6,z=e.u,U=e.L,K=e.A,V=e.i,H=e.f,X=e.d,Y=e.az,q=e.a,J=e.k,Q=e.n,Z=e.y,$=e.q,ee=e.S,ne=e.B,te=e.m,re=e.a4,oe=e.C,ie=e.I,ae=e.Z,ce=e.bn,le=e.T,ue=e.a5,se=e.a7,de=e.E,fe=e.M,pe=e.e},function(e){ge=e.E},function(e){me=e.d,he=e.e,ve=e.g,be=e.h,ye=e.j,xe=e.k,je=e.D,we=e.R,Ce=e.F,Se=e.l,ke=e.c,Ie=e.V,Me=e.M},function(e){Le=e.D},function(e){Oe=e.D},function(e){Pe=e.a,Re=e.S,Te=e.L,Ee=e.T,_e=e.C},function(e){Ae=e.S},function(e){De=e.a,Ge=e.c,Ne=e.b},function(e){Fe=e.u},function(e){We=e.C},function(e){Be=e.F},function(e){ze=e.S},function(e){Ue=e.M},function(e){Ke=e.C},function(e){Ve=e.L},function(e){He=e.C},function(e){Xe=e.C},function(e){Ye=e.L},function(e){qe=e.L},function(e){Je=e.P},function(e){Qe=e.C},function(e){Ze=e.D},function(e){$e=e.J},function(e){en=e.V}],execute:function(){var m=function(e,n,t){var r,o,i=e.keys[0];if(Array.isArray(n))n.forEach(function(n,r){t(function(n,t){r<=e.keys.length-1&&(0===r?Object.assign(n,t):n[e.up(e.keys[r])]=t)},n)});else if(n&&"object"===y(n)){(Object.keys(n).length>e.keys.length?e.keys:(r=e.keys,o=Object.keys(n),r.filter(function(e){return o.includes(e)}))).forEach(function(r){if(e.keys.includes(r)){var o=n[r];void 0!==o&&t(function(n,t){i===r?Object.assign(n,t):n[e.up(r)]=t},o)}})}else"number"!=typeof n&&"string"!=typeof n||t(function(e,n){Object.assign(e,n)},n)};function nn(e){return"--Grid-".concat(e,"Spacing")}function tn(e){return"--Grid-parent-".concat(e,"Spacing")}var rn="--Grid-columns",on="--Grid-parent-columns",an=function(e){var n=e.theme,t=e.ownerState,r={};return m(n.breakpoints,t.size,function(e,n){var t={};"grow"===n&&(t={flexBasis:0,flexGrow:1,maxWidth:"100%"}),"auto"===n&&(t={flexBasis:"auto",flexGrow:0,flexShrink:0,maxWidth:"none",width:"auto"}),"number"==typeof n&&(t={flexGrow:0,flexBasis:"auto",width:"calc(100% * ".concat(n," / var(").concat(on,") - (var(").concat(on,") - ").concat(n,") * (var(").concat(tn("column"),") / var(").concat(on,")))")}),e(r,t)}),r},cn=function(e){var n=e.theme,t=e.ownerState,r={};return m(n.breakpoints,t.offset,function(e,n){var t={};"auto"===n&&(t={marginLeft:"auto"}),"number"==typeof n&&(t={marginLeft:0===n?"0px":"calc(100% * ".concat(n," / var(").concat(on,") + var(").concat(tn("column"),") * ").concat(n," / var(").concat(on,"))")}),e(r,t)}),r},ln=function(e){var n=e.theme,t=e.ownerState;if(!t.container)return{};var r=b({},rn,12);return m(n.breakpoints,t.columns,function(e,n){var t=null!=n?n:12;e(r,b(b({},rn,t),"> *",b({},on,t)))}),r},un=function(e){var n=e.theme,t=e.ownerState;if(!t.container)return{};var r={};return m(n.breakpoints,t.rowSpacing,function(e,t){var o,i="string"==typeof t?t:null===(o=n.spacing)||void 0===o?void 0:o.call(n,t);e(r,b(b({},nn("row"),i),"> *",b({},tn("row"),i)))}),r},sn=function(e){var n=e.theme,t=e.ownerState;if(!t.container)return{};var r={};return m(n.breakpoints,t.columnSpacing,function(e,t){var o,i="string"==typeof t?t:null===(o=n.spacing)||void 0===o?void 0:o.call(n,t);e(r,b(b({},nn("column"),i),"> *",b({},tn("column"),i)))}),r},dn=function(e){var n=e.theme,t=e.ownerState;if(!t.container)return{};var r={};return m(n.breakpoints,t.direction,function(e,n){e(r,{flexDirection:n})}),r},fn=function(e){var n=e.ownerState;return v({minWidth:0,boxSizing:"border-box"},n.container&&v(v({display:"flex",flexWrap:"wrap"},n.wrap&&"wrap"!==n.wrap&&{flexWrap:n.wrap}),{},{gap:"var(".concat(nn("row"),") var(").concat(nn("column"),")")}))},pn=function(e){var n=[];return Object.entries(e).forEach(function(e){var t=p(e,2),r=t[0],o=t[1];!1!==o&&void 0!==o&&n.push("grid-".concat(r,"-").concat(String(o)))}),n},gn=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"xs";function t(e){return void 0!==e&&("string"==typeof e&&!Number.isNaN(Number(e))||"number"==typeof e&&e>0)}if(t(e))return["spacing-".concat(n,"-").concat(String(e))];if("object"===y(e)&&!Array.isArray(e)){var r=[];return Object.entries(e).forEach(function(e){var n=p(e,2),o=n[0],i=n[1];t(i)&&r.push("spacing-".concat(o,"-").concat(String(i)))}),r}return[]},mn=function(e){return void 0===e?[]:"object"===y(e)?Object.entries(e).map(function(e){var n=p(e,2),t=n[0],r=n[1];return"direction-".concat(t,"-").concat(r)}):["direction-xs-".concat(String(e))]};var hn=O(),vn=h("div",{name:"MuiGrid",slot:"Root"});function bn(e){return I({props:e,name:"MuiGrid",defaultTheme:hn})}var yn=function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=n.createStyledComponent,r=void 0===t?vn:t,o=n.useThemeProps,i=void 0===o?bn:o,a=n.useTheme,c=void 0===a?x:a,l=n.componentName,u=void 0===l?"MuiGrid":l;function s(e,n){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){return!0},r={};return null===e||(Array.isArray(e)?e.forEach(function(e,o){null!==e&&t(e)&&n.keys[o]&&(r[n.keys[o]]=e)}):"object"===y(e)?Object.keys(e).forEach(function(n){var o=e[n];null!=o&&t(o)&&(r[n]=o)}):r[n.keys[0]]=e),r}var p=r(ln,sn,un,an,dn,fn,cn),g=j.forwardRef(function(n,t){var r,o,a,l,g,m,h=c(),b=i(n),y=w(b);!function(e,n){void 0!==e.item&&delete e.item,void 0!==e.zeroMinWidth&&delete e.zeroMinWidth,n.keys.forEach(function(n){void 0!==e[n]&&delete e[n]})}(y,h.breakpoints);var x=y.className,I=y.children,O=y.columns,P=void 0===O?12:O,R=y.container,T=void 0!==R&&R,E=y.component,_=void 0===E?"div":E,A=y.direction,D=void 0===A?"row":A,G=y.wrap,N=void 0===G?"wrap":G,F=y.size,W=void 0===F?{}:F,B=y.offset,z=void 0===B?{}:B,U=y.spacing,K=void 0===U?0:U,V=y.rowSpacing,H=void 0===V?K:V,X=y.columnSpacing,Y=void 0===X?K:X,q=y.unstable_level,J=void 0===q?0:q,Q=d(y,e),Z=s(W,h.breakpoints,function(e){return!1!==e}),$=s(z,h.breakpoints),ee=null!==(r=n.columns)&&void 0!==r?r:J?void 0:P,ne=null!==(o=n.spacing)&&void 0!==o?o:J?void 0:K,te=null!==(a=null!==(l=n.rowSpacing)&&void 0!==l?l:n.spacing)&&void 0!==a?a:J?void 0:H,re=null!==(g=null!==(m=n.columnSpacing)&&void 0!==m?m:n.spacing)&&void 0!==g?g:J?void 0:Y,oe=v(v({},y),{},{level:J,columns:ee,container:T,direction:D,wrap:N,spacing:ne,rowSpacing:te,columnSpacing:re,size:Z,offset:$}),ie=function(e,n){var t=e.container,r=e.direction,o=e.spacing,i=e.wrap,a=e.size,c={root:["root",t&&"container","wrap"!==i&&"wrap-xs-".concat(String(i))].concat(f(mn(r)),f(pn(a)),f(t?gn(o,n.breakpoints.keys[0]):[]))};return M(c,function(e){return L(u,e)},{})}(oe,h);return C.jsx(p,v(v({ref:t,as:_,ownerState:oe,className:S(ie.root,x)},Q),{},{children:j.Children.map(I,function(e){var n,t;return j.isValidElement(e)&&k(e,["Grid"])&&T&&e.props.container?j.cloneElement(e,{unstable_level:null!==(n=null===(t=e.props)||void 0===t?void 0:t.unstable_level)&&void 0!==n?n:J+1}):e})}))});return g.muiName="Grid",g}({createStyledComponent:P("div",{name:"MuiGrid",slot:"Root",overridesResolver:function(e,n){var t=e.ownerState;return[n.root,t.container&&n.container]}}),componentName:"MuiGrid",useThemeProps:function(e){return R({props:e,name:"MuiGrid"})},useTheme:T}),xn=function(e){var t=e.MenuItemProps,r=e.className,o=e.label,i=e.LeftIcon,a=(e.renderLabel,e.RightIcon),c=d(e,n);return C.jsxs(E,v(v(v({},t),{},{className:r},c),{},{children:[i&&C.jsx(_,{children:C.jsx(i,{fontSize:"small"})}),C.jsx(A,{children:o}),a&&C.jsx(_,{style:{minWidth:0},children:C.jsx(a,{fontSize:"small"})})]}))},jn=function(e){var n,i=e.ref,a=d(e,t),c=a.parentMenuOpen,l=a.label,u=a.renderLabel,s=a.RightIcon,f=void 0===s?D(N,G):s,m=a.LeftIcon,h=a.children,b=a.className,y=a.tabIndex,x=a.ContainerProps,w=void 0===x?{}:x,S=a.MenuProps,k=d(a,r),I=F.useIsTouchDevice(),M=w.ref,L=d(w,o),O=j.useRef(null),P=Fe(i,O),R=j.useRef(null),T=Fe(M,R),E=j.useRef(null),_=p(j.useState(!1),2),A=_[0],z=_[1],U=function(e){A!==e&&(a.disabled?z(!1):z(e))},K=function(){var e,n,t=null!==(e=null===(n=R.current)||void 0===n?void 0:n.ownerDocument.activeElement)&&void 0!==e?e:null;if(null==E.current)return!1;var r,o=function(e,n){var t="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!t){if(Array.isArray(e)||(t=g(e))||n&&e&&"number"==typeof e.length){t&&(e=t);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,c=!1;return{s:function(){t=t.call(e)},n:function(){var e=t.next();return a=e.done,e},e:function(e){c=!0,i=e},f:function(){try{a||null==t.return||t.return()}finally{if(c)throw i}}}}(E.current.children);try{for(o.s();!(r=o.n()).done;){if(r.value===t)return!0}}catch(i){o.e(i)}finally{o.f()}return!1},V=A&&c;return a.disabled||(n=void 0!==y?y:-1),C.jsxs(W,v(v({},L),{},{ref:T,onFocus:function(e){I||(e.target===R.current&&U(!0),L.onFocus&&L.onFocus(e))},onClick:function(e){U(!A),L.onClick&&L.onClick(e)},tabIndex:n,onMouseEnter:function(e){I||(U(!0),L.onMouseEnter&&L.onMouseEnter(e))},onMouseLeave:function(e){U(!1),L.onMouseLeave&&L.onMouseLeave(e)},onKeyDown:function(e){var n;if("Escape"!==e.key){K()&&e.stopPropagation();var t,r=null===(n=R.current)||void 0===n?void 0:n.ownerDocument.activeElement;if("ArrowLeft"===e.key&&K())null===(t=R.current)||void 0===t||t.focus();if("ArrowRight"===e.key&&e.target===R.current&&e.target===r){var o,i=null===(o=E.current)||void 0===o?void 0:o.children[0];null==i||i.focus()}}},children:[C.jsx(xn,{MenuItemProps:k,className:b,ref:P,LeftIcon:m,RightIcon:f,label:l,renderLabel:u}),C.jsx(B,v(v({style:{pointerEvents:"none"},anchorEl:O.current,anchorOrigin:{horizontal:D("right","left"),vertical:"top"},transformOrigin:{horizontal:D("left","right"),vertical:"top"},open:V,autoFocus:!1,disableAutoFocus:!0,disableEnforceFocus:!0,onClose:function(){U(!1)}},S),{},{children:C.jsx(W,{ref:E,style:{pointerEvents:"auto"},children:h})}))]}))},wn=["remove_from_library"],Cn=u("a",function(e){var n,t,r=e.manga,o=e.handleSelection,i=e.selectedMangas,a=e.onClose,c=e.setHideMenu,l=z().t,u=p(j.useState(!1),2),s=u[0],d=u[1],g=!!r,m=null!=i?i:[],h=ye(g,Ge),v=he(g),b=xe(g),y=!!r&&r.downloadCount===r.chapters.totalCount,x=!(null==r||!r.downloadCount),w=!(null==r||!r.unreadCount),S=!!r&&r.unreadCount!==r.chapters.totalCount,k=me({mangaId:null==r?void 0:r.id,mangaIds:i?De.getIds(m):void 0,onClose:function(){return a(!0)},addToLibrary:!1}),I=k.openCategorySelect,M=k.CategorySelectComponent,L=function(e,n){De.performAction(e,r?[r.id]:De.getIds(n),{wasManuallyMarkedAsRead:!0}).catch(H()),a(!wn.includes(e))},O=j.useMemo(function(){return{downloadableMangas:[].concat(f(De.getNotDownloaded(m)),f(De.getPartiallyDownloaded(m))),downloadedMangas:[].concat(f(De.getPartiallyDownloaded(m)),f(De.getFullyDownloaded(m))),unreadMangas:[].concat(f(De.getUnread(m)),f(De.getPartiallyRead(m))),readMangas:[].concat(f(De.getPartiallyRead(m)),f(De.getFullyRead(m)))}},[m]),P=O.downloadableMangas,R=O.downloadedMangas,T=O.unreadMangas,E=O.readMangas;return C.jsxs(C.Fragment,{children:[!!o&&g&&C.jsx(ve,{onClick:function(){null==o||o(r.id,!0),a(!0)},Icon:be,title:l("chapter.action.label.select")}),v(!y)&&C.jsx(jn,{disabled:b(!P.length),LeftIcon:Oe,label:h("download",P.length),parentMenuOpen:!0,children:C.jsx(Pe,{mangaIds:g?[r.id]:De.getIds(m),closeMenu:function(){return a(!0)}})}),v(x)&&C.jsx(ve,{Icon:Le,disabled:b(!R.length),onClick:function(){return L("delete",R)},title:h("delete",R.length)}),v(w)&&C.jsx(ve,{Icon:je,disabled:b(!T.length),onClick:function(){return L("mark_as_read",T)},title:h("mark_as_read",T.length)}),v(S)&&C.jsx(ve,{Icon:we,disabled:b(!E.length),onClick:function(){return L("mark_as_unread",E)},title:h("mark_as_unread",E.length)}),g&&C.jsx(U,{to:K.migrate.childRoutes.search.path(null!==(n=null==r?void 0:r.sourceId)&&void 0!==n?n:-1,null!==(t=null==r?void 0:r.id)&&void 0!==t?t:-1,null==r?void 0:r.title),state:{mangaTitle:null==r?void 0:r.title},style:{textDecoration:"none",color:"inherit"},children:C.jsx(ve,{Icon:Re,title:h("migrate",m.length)})}),g&&C.jsx(ve,{onClick:function(){d(!0),c(!0)},Icon:Ae,title:h("track",m.length)}),C.jsx(ve,{onClick:function(){I(!0),c(!0)},Icon:Te,title:h("change_categories",m.length)}),C.jsx(ve,{onClick:function(){return L("remove_from_library",m)},Icon:Ce,title:h("remove_from_library",m.length)}),M,s&&C.jsx(V,{open:!0,maxWidth:"md",fullWidth:!0,scroll:"paper",onClose:function(){d(!1),a(!0)},children:C.jsx(Ee,{manga:r})})]})}),Sn=function(e){var n=e.mangaIdToMigrateTo,t=e.onClose,r=z().t,o=X(),i=Y().mangaId,a=Number(i),c=q().settings,u=c.migrateChapters,d=c.migrateCategories,f=c.migrateTracking,g=c.deleteChapters,m=p(j.useState(!1),2),h=m[0],v=m[1],b=Z(H()),y=function(){var e,t=(e=l().m(function e(t){return l().w(function(e){for(;;)switch(e.p=e.n){case 0:if(null!=a){e.n=1;break}throw new Error('MigrateDialog::migrate: unexpected mangaId "'.concat(a,'"'));case 1:return te(r("migrate.label.info"),"info"),v(!0),e.p=2,e.n=3,De.migrate(a,n,{mode:t,migrateChapters:u,migrateCategories:d,migrateTracking:f,deleteChapters:g});case 3:o(K.manga.path(n),{replace:!0}),e.n=5;break;case 4:e.p=4,e.v,v(!1);case 5:return e.a(2)}},e,null,[[2,4]])}),function(){var n=this,t=arguments;return new Promise(function(r,o){var i=e.apply(n,t);function a(e){s(i,r,o,a,c,"next",e)}function c(e){s(i,r,o,a,c,"throw",e)}a(void 0)})});return function(e){return t.apply(this,arguments)}}();return C.jsxs(V,{open:!0,fullWidth:!0,onClose:t,children:[C.jsx(J,{children:r("migrate.dialog.title")}),C.jsx(Q,{dividers:!0,children:C.jsxs(Be,{children:[C.jsx(We,{disabled:h,label:r("chapter.title_one"),checked:u,onChange:function(e,n){return b("migrateChapters",n)}}),C.jsx(We,{disabled:h,label:r("category.title.category_one"),checked:d,onChange:function(e,n){return b("migrateCategories",n)}}),C.jsx(We,{disabled:h,label:r("tracking.title"),checked:f,onChange:function(e,n){return b("migrateTracking",n)}}),C.jsx(We,{disabled:h,label:r("migrate.dialog.label.delete_downloaded"),checked:g,onChange:function(e,n){return b("deleteChapters",n)}})]})}),C.jsx($,{children:C.jsxs(ee,{direction:"row",sx:{justifyContent:"space-between",width:"100%"},children:[C.jsx(ne,{disabled:h,component:U,to:K.manga.path(n),children:r("migrate.dialog.action.button.show_entry")}),C.jsxs(ee,{direction:"row",children:[C.jsx(ne,{disabled:h,onClick:t,children:r("global.button.cancel")}),C.jsx(ne,{disabled:h,onClick:function(){return y("copy")},children:r("global.button.copy")}),C.jsx(ne,{disabled:h,onClick:function(){return y("migrate")},children:r("global.button.migrate")})]})]})})]})},kn=function(e){var n=e.id,t=e.selected,r=e.handleSelection,o=e.asCheckbox,i=void 0!==o&&o,a=e.popupState,c=e.ref,l=z().t,u=j.useMemo(function(){return re(a)},[a]),s=function(e){e.stopPropagation(),e.preventDefault()};return r?null!==t?i?C.jsx(oe,{title:l(t?"global.button.deselect":"global.button.select"),children:C.jsx(Ke,v(v({},Ue.preventRippleProp()),{},{checked:t,onChange:function(e,t){s(e),null==r||r(n,t)}}))}):null:i?C.jsx(oe,{title:l("global.button.options"),children:C.jsx(ie,v(v({ref:c},Ue.preventRippleProp(u,{onClick:s})),{},{"aria-label":"more",children:C.jsx(Se,{})}))}):C.jsx(oe,{title:l("global.button.options"),children:C.jsx(ne,v(v({ref:c},Ue.preventRippleProp(u,{onClick:s})),{},{className:"manga-option-button",size:"small",variant:"contained",sx:{minWidth:"unset",paddingX:"0",paddingY:"2.5px",visibility:a.isOpen?"visible":"hidden",pointerEvents:"none","@media not (pointer: fine)":{visibility:"hidden",width:0,height:0,p:0,m:0}},children:C.jsx(Se,{})}))}):null},In=P("div")({position:"absolute",bottom:0,width:"100%",height:"30%",background:"linear-gradient(180deg, rgba(0,0,0,0) 0%, rgba(0,0,0,1) 100%)"}),Mn=P("div")({position:"absolute",bottom:0,width:"100%",height:"20%",background:"linear-gradient(180deg, rgba(0,0,0,0) 0%, rgba(0,0,0,1) 100%)"}),Ln=j.memo(function(e){var n=e.manga,t=e.longPressBind,r=e.popupState,o=e.handleClick,i=e.mangaLinkTo,a=e.selected,c=e.inLibraryIndicator,l=e.isInLibrary,u=e.gridLayout,s=e.handleSelection,d=e.continueReadingButton,f=e.mangaBadges,p=e.mode,g=F.usePreventMobileContextMenu(),m=j.useRef(null),h=n.id,b=n.title;return C.jsx(Ve,v(v({component:U},t(function(){return r.open(m.current)})),{},{onClick:o,to:i,state:De.createLocationState(n,p),onContextMenu:g,sx:v(v({},F.preventMobileContextMenuSx()),{},{textDecoration:"none"}),children:C.jsxs(W,{sx:{display:"flex",flexDirection:"column",m:.25,outline:a?"4px solid":void 0,borderRadius:a?"1px":void 0,outlineColor:function(e){return e.palette.primary.main},backgroundColor:function(e){return a?e.palette.primary.main:void 0},"@media (hover: hover) and (pointer: fine)":{"&:hover .manga-option-button":{visibility:"visible",pointerEvents:"all"},"&:hover .source-manga-library-state-button":{display:"inline-flex"},"&:hover .source-manga-library-state-indicator":{display:"source"===p?"none":"flex"}}},children:[C.jsx(He,{sx:{aspectRatio:Ne,display:"flex"},children:C.jsxs(Xe,{sx:{position:"relative",height:"100%"},children:[C.jsx(ze,{alt:b,src:De.getThumbnailUrl(n),imgStyle:c&&l?{height:"100%",width:"100%",objectFit:"cover",filter:"brightness(0.4)"}:{height:"100%",width:"100%",objectFit:"cover"},spinnerStyle:{display:"grid",placeItems:"center"}}),C.jsxs(ee,{direction:"row",sx:{alignItems:"start",justifyContent:"space-between",position:"absolute",top:function(e){return e.spacing(1)},left:function(e){return e.spacing(1)},right:function(e){return e.spacing(1)}},children:[f,C.jsx(kn,{ref:m,popupState:r,id:h,selected:a,handleSelection:s})]}),C.jsxs(C.Fragment,{children:[u!==ae.Comfortable&&C.jsxs(C.Fragment,{children:[C.jsx(In,{}),C.jsx(Mn,{})]}),C.jsxs(ee,{direction:"row",sx:{justifyContent:u!==ae.Comfortable?"space-between":"end",alignItems:"end",position:"absolute",bottom:0,width:"100%",p:1,gap:1},children:[u!==ae.Comfortable&&C.jsx(oe,{title:b,placement:"top",children:C.jsx(ce,{component:"h3",sx:{color:"white",textShadow:"0px 0px 3px #000000"},children:b})}),d]})]})]})}),u===ae.Comfortable&&C.jsx(ee,{sx:{pb:1},children:C.jsx(oe,{title:b,placement:"top",children:C.jsx(ce,{component:"h3",sx:{color:function(e){return a?e.palette.primary.contrastText:"text.primary"},height:"3rem",pt:.5},children:b})})})]})}))}),On=j.memo(function(e){var n=e.manga,t=e.longPressBind,r=e.popupState,o=e.handleClick,i=e.mangaLinkTo,a=e.selected,c=e.inLibraryIndicator,l=e.isInLibrary,u=e.handleSelection,s=e.continueReadingButton,d=e.mangaBadges,f=e.mode,p=F.usePreventMobileContextMenu(),g=j.useRef(null),m=n.id,h=n.title;return C.jsx(He,{children:C.jsx(Xe,v(v({component:U,to:i,state:De.createLocationState(n,f),onClick:o},t(function(){return r.open(g.current)})),{},{onContextMenu:p,sx:v(v({},F.preventMobileContextMenuSx()),{},{"@media (hover: hover) and (pointer: fine)":{"&:hover .manga-option-button":{visibility:"visible",pointerEvents:"all"},"&:hover .source-manga-library-state-button":{display:"inline-flex"},"&:hover .source-manga-library-state-indicator":{display:"source"===f?"none":"inline-flex"}}}),children:C.jsxs(qe,{sx:{justifyContent:"space-between",position:"relative"},children:[C.jsx(Ye,{iconUrl:De.getThumbnailUrl(n),alt:n.title,slots:{spinnerImageProps:{imgStyle:{imageRendering:"pixelated",filter:c&&l?"brightness(0.4)":void 0}}}}),C.jsx(W,{sx:{display:"flex",flexDirection:"row",flexGrow:1,width:"min-content"},children:C.jsx(oe,{title:h,placement:"top",children:C.jsx(ce,{variant:"h6",component:"h3",children:h})})}),C.jsxs(ee,{direction:"row",sx:{alignItems:"center",gap:.5},children:[d,s,C.jsx(kn,{ref:g,popupState:r,id:m,selected:a,handleSelection:u,asCheckbox:!0})]})]})}))})}),Pn=function(e){var n=e.showContinueReadingButton,t=e.chapter,r=e.mangaLinkTo;if(!n||!t)return null;var o=t.sourceOrder,i=t.chapterNumber,a=t.name,c=t.scanlator;return C.jsx(_e,{chapterNumber:i,name:a,sourceOrder:o,scanlator:c,children:C.jsx(ne,v(v({},Ue.preventRippleProp()),{},{variant:"contained",size:"small",sx:{minWidth:"unset",py:.5,px:.75},component:U,to:"".concat(r,"/chapter/").concat(o),state:Qe.getReaderOpenChapterLocationState(t),onClick:function(e){return e.stopPropagation()},children:C.jsx(Je,{})}))})},Rn=P("div")(function(e){return{display:"flex",height:"fit-content",borderRadius:e.theme.shape.borderRadius,overflow:"hidden"}}),Tn=P(le)(function(e){var n=e.theme;return{color:n.palette.primary.contrastText,paddingInline:n.spacing(.3)}}),En=function(e){var n=e.inLibraryIndicator,t=e.updateLibraryState,r=e.isInLibrary,o=e.unread,i=e.downloadCount,a=e.mode,c=z().t,l=F.useIsTouchDevice(),u=q().settings,s=u.showUnreadBadge,d=u.showDownloadBadge;return C.jsxs(Rn,{children:[!l&&n&&"source"===a&&C.jsx(ne,v(v({className:"source-manga-library-state-button",component:"div",variant:"contained",size:"small"},Ue.preventRippleProp()),{},{onClick:function(e){e.preventDefault(),e.stopPropagation(),t()},sx:{display:"none"},color:r?"error":"primary",children:c(r?"manga.action.library.remove.label.action":"manga.button.add_to_library")})),n&&r&&C.jsx(le,{className:"source-manga-library-state-indicator",sx:{backgroundColor:"primary.dark",color:"primary.contrastText",p:.3},children:c("manga.button.in_library")}),(s&&"default"===a||"duplicate"===a)&&(null!=o?o:0)>0&&C.jsx(Tn,{sx:{backgroundColor:"primary.main",color:"primary.contrastText"},children:o}),(d&&"default"===a||"duplicate"===a)&&(null!=i?i:0)>0&&C.jsx(Tn,{sx:{backgroundColor:"secondary.main",color:"secondary.contrastText"},children:i})]})},_n=u("c",j.memo(function(e){var n=e.manga,t=e.gridLayout,r=e.inLibraryIndicator,o=e.selected,i=e.handleSelection,a=e.mode,c=void 0===a?"default":a,l=n.id,u=n.firstUnreadChapter,s=n.downloadCount,d=n.unreadCount,f=q().settings.showContinueReadingButton,g=ke(n,"source"===c),m=g.CategorySelectComponent,h=g.updateLibraryState,b=g.isInLibrary,y=function(e,n,t,r){switch(e){case"default":case"source":case"duplicate":return K.manga.path(n);case"migrate.search":return K.migrate.childRoutes.search.path(null!=t?t:"-1",n,r);case"migrate.select":return"";default:throw new Error('getMangaLinkTo: unexpected MangaCardMode "'.concat(e,'"'))}}(c,n.id,n.sourceId,n.title),x=p(j.useState(!1),2),w=x[0],S=x[1],k=j.useCallback(function(e,n){var t="default"===c,r="source"===c,a="migrate.select"===c,u=null!==o;(a||u||(t||r)&&!!n)&&(e.preventDefault(),r?h():u?null==i||i(l,!o,{selectRange:e.shiftKey}):t?null==n||n():a&&S(!0))},[c,o,h,i]),I=Ie(j.useCallback(function(e,n){var t=n.context;e.shiftKey=!0,k(e,t)},[k])),M=j.useMemo(function(){return t===ae.List?On:Ln},[t]);return C.jsxs(C.Fragment,{children:[w&&C.jsx(Sn,{mangaIdToMigrateTo:n.id,onClose:function(){return S(!1)}}),C.jsx(ue,{variant:"popover",popupId:"manga-card-action-menu",children:function(t){return C.jsxs(C.Fragment,{children:[C.jsx(M,v(v({},e),{},{longPressBind:I,popupState:t,handleClick:k,mangaLinkTo:y,isInLibrary:b,inLibraryIndicator:r,continueReadingButton:C.jsx(Pn,{showContinueReadingButton:f&&"default"===c,chapter:u,mangaLinkTo:y}),mangaBadges:C.jsx(En,{inLibraryIndicator:r,isInLibrary:b,unread:d,downloadCount:s,updateLibraryState:h,mode:c})})),!!i&&t.isOpen&&C.jsx(Me,v(v({},se(t)),{},{children:function(e,t){return C.jsx(Cn,{manga:n,handleSelection:i,onClose:e,setHideMenu:t})}})),m]})}})]})})),An=function(e){var n=e.ref,t=e.persistKey,r=d(e,i),o=en.usePersistState(t),a=o.state,c=o.persistState,l=j.useRef(void 0),u=Fe(l,n);return C.jsx($e,v(v({},r),{},{ref:u,stateChanged:c,restoreStateFrom:a}))},Dn=function(e){var n=e.children,t=e.ref,r=d(e,a);return C.jsx(yn,v(v({},r),{},{ref:t,container:!0,spacing:1,children:n}))},Gn=function(e,n,t){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o=arguments.length>4?arguments[4]:void 0,i=arguments.length>5?arguments[5]:void 0,a=arguments.length>6?arguments[6]:void 0;return C.jsx(_n,{manga:e,gridLayout:n,inLibraryIndicator:t,selected:r?null==o?void 0:o.includes(e.id):null,handleSelection:i,mode:a})},Nn=function(e){var n=e.isLoading,t=e.mangas,r=e.inLibraryIndicator,o=e.GridItemContainer,i=e.gridLayout,a=e.isSelectModeActive,c=e.selectedMangaIds,l=e.handleSelection,u=e.mode,s=e.ref;return C.jsx(yn,{ref:s,container:!0,spacing:1,sx:{width:"100%",overflowX:"auto",display:"-webkit-inline-box",flexWrap:"nowrap"},children:n?C.jsx(pe,{}):t.map(function(e){return C.jsx(o,{children:Gn(e,i,r,a,c,l,u)},e.id)})})},Fn=u("b","MangaGrid-snapshot-location"),Wn=function(e){var n=e.isLoading,t=e.mangas,r=e.inLibraryIndicator,o=e.GridItemContainer,i=e.gridLayout,a=e.hasNextPage,c=e.loadMore,l=e.isSelectModeActive,u=e.selectedMangaIds,s=e.handleSelection,d=e.mode,f=e.ref;return C.jsxs(C.Fragment,{children:[C.jsx(W,{ref:f,children:C.jsx(An,{persistKey:Fn,useWindowScroll:!0,increaseViewportBy:.5*window.innerHeight,totalCount:t.length,components:{List:Dn,Item:o},endReached:function(){return c()},computeItemKey:function(e){return t[e].id},itemContent:function(e){return Gn(t[e],i,r,l,u,s,d)}})}),l&&i===ae.List?C.jsx(W,{sx:{paddingBottom:Ze}}):n?C.jsx(pe,{}):a?C.jsx("div",{style:{height:"75px"}}):null]})};u("M",function(e){var n,t,r=e.mangas,o=e.isLoading,i=e.message,a=e.messageExtra,l=e.hasNextPage,u=e.loadMore,s=e.gridLayout,f=e.horizontal,g=e.noFaces,m=e.inLibraryIndicator,h=e.isSelectModeActive,b=e.selectedMangaIds,y=e.handleSelection,x=e.mode,w=e.retry,S=e.gridWrapperProps,k=z().t,I=de().navBarWidth,M=q().settings.mangaGridItemWidth,L=j.useRef(null),O=j.useRef(null),P=p(j.useState(null!==(n=null===(t=O.current)||void 0===t?void 0:t.offsetWidth)&&void 0!==n?n:Math.max(0,document.documentElement.offsetWidth-I)),2),R=P[0],T=P[1],E=j.useMemo(function(){return function(e,n,t){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:12,o=Math.ceil(e/n),i=t===ae.List?r:r/o;return function(e){var n=e.children,t=d(e,c);return C.jsx(yn,v(v({},t),{},{size:i,children:n}))}}(R,M,s)},[R,M,s]);return j.useLayoutEffect(function(){if(f)return function(){};var e,n=function(t){e=setTimeout(function(){document.body.style.overflow.includes("hidden")?n(250):document.body.style.overflowY=s===ae.List?"auto":"scroll"},t)};return n(0),function(){clearTimeout(e)}},[s]),j.useLayoutEffect(function(){return function(){f||(document.body.style.overflowY="auto")}},[]),fe(O,j.useCallback(function(){var e;T((null===(e=O.current)||void 0===e?void 0:e.offsetWidth)||document.documentElement.offsetWidth-I)},[I])),fe(L,j.useCallback(function(e,n){var t=e[0].target.clientHeight,r=t>document.documentElement.clientHeight;o||t&&(r||u(),n.disconnect())},[L,u,o])),!o&&0===r.length?C.jsx(ge,{noFaces:g,message:null!=i?i:k("manga.error.label.no_mangas_found"),messageExtra:a,retry:w}):C.jsx(W,v(v({},S),{},{ref:O,sx:v(v({},null==S?void 0:S.sx),{},{overflow:"hidden"}),children:f?C.jsx(Nn,{ref:L,isLoading:o,mangas:r,inLibraryIndicator:m,GridItemContainer:E,gridLayout:s,isSelectModeActive:h,selectedMangaIds:b,handleSelection:y,mode:x}):C.jsx(Wn,{ref:L,isLoading:o,mangas:r,inLibraryIndicator:m,GridItemContainer:E,hasNextPage:l,loadMore:u,gridLayout:s,isSelectModeActive:h,selectedMangaIds:b,handleSelection:y,mode:x})}))})}}})}();
