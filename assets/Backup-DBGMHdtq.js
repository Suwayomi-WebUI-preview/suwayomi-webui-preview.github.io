import{h as C,a$ as Ht,j as l,a2 as _,T as ft,b0 as ie,e as Ce,b1 as bt,I as ht,b2 as gt,aB as kt,b3 as Ee,b4 as o,az as Ut,u as Tt,aT as Ke,aD as Ge,b5 as Le,ao as Ct,aN as xt,aM as vt,aP as wt,f as zt,r as De,b6 as tt,o as ke,l as Wt,E as qt,m as Oe,n as Kt,v as Be,aC as Gt,aY as Yt,aO as st,d as ot,L as nt,A as at,aa as rt}from"./index-BoLnrqKb.js";import{f as it}from"./file-selector-DlHkLoY8.js";import{P as Qt}from"./Progress-BttVsvbR.js";import{T as Xt}from"./TextSetting-CyzFz3Dq.js";import{N as lt}from"./NumberSetting-Dq-qgg_0.js";import{c as ze,s as ve,u as Jt,a as Zt,b as es,d as ts,e as Z,_ as ae,P as ss,f as yt,g as v,h as os,i as ns,j as pe,k as fe,l as le,m as as,n as rs,o as we,p as Se,q as Ye,r as Ve,t as xe,v as is,w as ls,S as cs,x as us,y as Qe,z as ds,A as Xe,B as Je,C as Ze,D as ms,E as Ae,F as St,G as Mt,H as $e,I as He,M as ps,J as Ue,K as fs,L as Dt,N as bs,O as Pt,Q as It,R as hs,T as Vt,U as jt,V as gs,W as ks,X as Ts,Y as Cs}from"./useMobilePicker-DvuBYV_r.js";import"./PasswordTextField-DrvlcTbf.js";import"./Info--eUj6hVv.js";import"./Chip-Ds94qmKq.js";const We=({adapter:e,value:t,timezone:a,props:s})=>{if(t===null)return null;const{minTime:i,maxTime:n,minutesStep:c,shouldDisableTime:d,disableIgnoringDatePartForTimeValidation:m=!1,disablePast:f,disableFuture:k}=s,p=e.utils.date(void 0,a),h=ze(m,e.utils);switch(!0){case!e.utils.isValid(t):return"invalidDate";case!!(i&&h(i,t)):return"minTime";case!!(n&&h(t,n)):return"maxTime";case!!(k&&e.utils.isAfter(t,p)):return"disableFuture";case!!(f&&e.utils.isBefore(t,p)):return"disablePast";case!!(d&&d(t,"hours")):return"shouldDisableTime-hours";case!!(d&&d(t,"minutes")):return"shouldDisableTime-minutes";case!!(d&&d(t,"seconds")):return"shouldDisableTime-seconds";case!!(c&&e.utils.getMinutes(t)%c!==0):return"minutesStep";default:return null}};We.valueManager=ve;const xs=e=>{const t=Jt(e),{forwardedProps:a,internalProps:s}=Zt(t,"time");return es({forwardedProps:a,internalProps:s,valueManager:ve,fieldValueManager:ts,validator:We,valueType:"time"})},vs=["slots","slotProps","InputProps","inputProps"],Rt=C.forwardRef(function(t,a){var y;const s=Z({props:t,name:"MuiTimeField"}),{slots:i,slotProps:n,InputProps:c,inputProps:d}=s,m=ae(s,vs),f=s,k=(y=i==null?void 0:i.textField)!=null?y:t.enableAccessibleFieldDOMStructure?ss:Ht,p=yt({elementType:k,externalSlotProps:n==null?void 0:n.textField,externalForwardedProps:m,ownerState:f,additionalProps:{ref:a}});p.inputProps=v({},d,p.inputProps),p.InputProps=v({},c,p.InputProps);const h=xs(p),r=os(h),b=ns(v({},r,{slots:i,slotProps:n}));return l.jsx(k,v({},b))});function ws(e){return fe("MuiPickersToolbarText",e)}const ct=pe("MuiPickersToolbarText",["root","selected"]),ys=["className","selected","value"],Ss=e=>{const{classes:t,selected:a}=e;return le({root:["root",a&&"selected"]},ws,t)},Ms=_(ft,{name:"MuiPickersToolbarText",slot:"Root",overridesResolver:(e,t)=>[t.root,{["&.".concat(ct.selected)]:t.selected}]})(({theme:e})=>({transition:e.transitions.create("color"),color:(e.vars||e).palette.text.secondary,["&.".concat(ct.selected)]:{color:(e.vars||e).palette.text.primary}})),Ft=C.forwardRef(function(t,a){const s=Z({props:t,name:"MuiPickersToolbarText"}),{className:i,value:n}=s,c=ae(s,ys),d=Ss(s);return l.jsx(Ms,v({ref:a,className:ie(d.root,i),component:"span"},c,{children:n}))}),Ds=["align","className","selected","typographyClassName","value","variant","width"],Ps=e=>{const{classes:t}=e;return le({root:["root"]},as,t)},Is=_(Ce,{name:"MuiPickersToolbarButton",slot:"Root",overridesResolver:(e,t)=>t.root})({padding:0,minWidth:16,textTransform:"none"}),je=C.forwardRef(function(t,a){const s=Z({props:t,name:"MuiPickersToolbarButton"}),{align:i,className:n,selected:c,typographyClassName:d,value:m,variant:f,width:k}=s,p=ae(s,Ds),h=Ps(s);return l.jsx(Is,v({variant:"text",ref:a,className:ie(h.root,n)},k?{sx:{width:k}}:{},p,{children:l.jsx(Ft,{align:i,className:d,variant:f,value:m,selected:c})}))});function Vs(e){return fe("MuiTimePickerToolbar",e)}const Re=pe("MuiTimePickerToolbar",["root","separator","hourMinuteLabel","hourMinuteLabelLandscape","hourMinuteLabelReverse","ampmSelection","ampmLandscape","ampmLabel"]),js=["ampm","ampmInClock","value","isLandscape","onChange","view","onViewChange","views","disabled","readOnly","className"],Rs=e=>{const{isLandscape:t,classes:a,isRtl:s}=e;return le({root:["root"],separator:["separator"],hourMinuteLabel:["hourMinuteLabel",t&&"hourMinuteLabelLandscape",s&&"hourMinuteLabelReverse"],ampmSelection:["ampmSelection",t&&"ampmLandscape"],ampmLabel:["ampmLabel"]},Vs,a)},Fs=_(rs,{name:"MuiTimePickerToolbar",slot:"Root",overridesResolver:(e,t)=>t.root})({}),Ns=_(Ft,{name:"MuiTimePickerToolbar",slot:"Separator",overridesResolver:(e,t)=>t.separator})({outline:0,margin:"0 4px 0 2px",cursor:"default"}),Ls=_("div",{name:"MuiTimePickerToolbar",slot:"HourMinuteLabel",overridesResolver:(e,t)=>[{["&.".concat(Re.hourMinuteLabelLandscape)]:t.hourMinuteLabelLandscape,["&.".concat(Re.hourMinuteLabelReverse)]:t.hourMinuteLabelReverse},t.hourMinuteLabel]})({display:"flex",justifyContent:"flex-end",alignItems:"flex-end",variants:[{props:{isRtl:!0},style:{flexDirection:"row-reverse"}},{props:{isLandscape:!0},style:{marginTop:"auto"}}]}),Os=_("div",{name:"MuiTimePickerToolbar",slot:"AmPmSelection",overridesResolver:(e,t)=>[{[".".concat(Re.ampmLabel)]:t.ampmLabel},{["&.".concat(Re.ampmLandscape)]:t.ampmLandscape},t.ampmSelection]})({display:"flex",flexDirection:"column",marginRight:"auto",marginLeft:12,["& .".concat(Re.ampmLabel)]:{fontSize:17},variants:[{props:{isLandscape:!0},style:{margin:"4px 0 auto",flexDirection:"row",justifyContent:"space-around",flexBasis:"100%"}}]});function Bs(e){const t=Z({props:e,name:"MuiTimePickerToolbar"}),{ampm:a,ampmInClock:s,value:i,isLandscape:n,onChange:c,view:d,onViewChange:m,views:f,disabled:k,readOnly:p,className:h}=t,r=ae(t,js),b=we(),y=Se(),O=bt(),R=!!(a&&!s&&f.includes("hours")),{meridiemMode:V,handleMeridiemChange:N}=Ye(i,a,c),L=g=>a?b.format(g,"hours12h"):b.format(g,"hours24h"),j=v({},t,{isRtl:O}),F=Rs(j),P=l.jsx(Ns,{tabIndex:-1,value:":",variant:"h3",selected:!1,className:F.separator});return l.jsxs(Fs,v({landscapeDirection:"row",toolbarTitle:y.timePickerToolbarTitle,isLandscape:n,ownerState:j,className:ie(F.root,h)},r,{children:[l.jsxs(Ls,{className:F.hourMinuteLabel,ownerState:j,children:[Ve(f,"hours")&&l.jsx(je,{tabIndex:-1,variant:"h3",onClick:()=>m("hours"),selected:d==="hours",value:i?L(i):"--"}),Ve(f,["hours","minutes"])&&P,Ve(f,"minutes")&&l.jsx(je,{tabIndex:-1,variant:"h3",onClick:()=>m("minutes"),selected:d==="minutes",value:i?b.format(i,"minutes"):"--"}),Ve(f,["minutes","seconds"])&&P,Ve(f,"seconds")&&l.jsx(je,{variant:"h3",onClick:()=>m("seconds"),selected:d==="seconds",value:i?b.format(i,"seconds"):"--"})]}),R&&l.jsxs(Os,{className:F.ampmSelection,ownerState:j,children:[l.jsx(je,{disableRipple:!0,variant:"subtitle2",selected:V==="am",typographyClassName:F.ampmLabel,value:xe(b,"am"),onClick:p?void 0:()=>N("am"),disabled:k}),l.jsx(je,{disableRipple:!0,variant:"subtitle2",selected:V==="pm",typographyClassName:F.ampmLabel,value:xe(b,"pm"),onClick:p?void 0:()=>N("pm"),disabled:k})]})]}))}function Nt(e,t){var c,d,m,f;const a=we(),s=Z({props:e,name:t}),i=(c=s.ampm)!=null?c:a.is12HourCycleInCurrentLocale(),n=C.useMemo(()=>{var k;return((k=s.localeText)==null?void 0:k.toolbarTitle)==null?s.localeText:v({},s.localeText,{timePickerToolbarTitle:s.localeText.toolbarTitle})},[s.localeText]);return v({},s,{ampm:i,localeText:n},is({views:s.views,openTo:s.openTo,defaultViews:["hours","minutes"],defaultOpenTo:"hours"}),{disableFuture:(d=s.disableFuture)!=null?d:!1,disablePast:(m=s.disablePast)!=null?m:!1,slots:v({toolbar:Bs},s.slots),slotProps:v({},s.slotProps,{toolbar:v({ampm:i,ampmInClock:s.ampmInClock},(f=s.slotProps)==null?void 0:f.toolbar)})})}function _s(e){return fe("MuiTimeClock",e)}pe("MuiTimeClock",["root","arrowSwitcher"]);const Pe=220,me=36,Fe={x:Pe/2,y:Pe/2},Lt={x:Fe.x,y:0},Es=Lt.x-Fe.x,As=Lt.y-Fe.y,$s=e=>e*(180/Math.PI),Ot=(e,t,a)=>{const s=t-Fe.x,i=a-Fe.y,n=Math.atan2(Es,As)-Math.atan2(s,i);let c=$s(n);c=Math.round(c/e)*e,c%=360;const d=Math.floor(c/e)||0,m=s**2+i**2,f=Math.sqrt(m);return{value:d,distance:f}},Hs=(e,t,a=1)=>{const s=a*6;let{value:i}=Ot(s,e,t);return i=i*a%60,i},Us=(e,t,a)=>{const{value:s,distance:i}=Ot(30,e,t);let n=s||12;return a?n%=12:i<Pe/2-me&&(n+=12,n%=24),n};function zs(e){return fe("MuiClockPointer",e)}pe("MuiClockPointer",["root","thumb"]);const Ws=["className","hasSelected","isInner","type","viewValue"],qs=e=>{const{classes:t}=e;return le({root:["root"],thumb:["thumb"]},zs,t)},Ks=_("div",{name:"MuiClockPointer",slot:"Root",overridesResolver:(e,t)=>t.root})(({theme:e})=>({width:2,backgroundColor:(e.vars||e).palette.primary.main,position:"absolute",left:"calc(50% - 1px)",bottom:"50%",transformOrigin:"center bottom 0px",variants:[{props:{shouldAnimate:!0},style:{transition:e.transitions.create(["transform","height"])}}]})),Gs=_("div",{name:"MuiClockPointer",slot:"Thumb",overridesResolver:(e,t)=>t.thumb})(({theme:e})=>({width:4,height:4,backgroundColor:(e.vars||e).palette.primary.contrastText,borderRadius:"50%",position:"absolute",top:-21,left:"calc(50% - ".concat(me/2,"px)"),border:"".concat((me-4)/2,"px solid ").concat((e.vars||e).palette.primary.main),boxSizing:"content-box",variants:[{props:{hasSelected:!0},style:{backgroundColor:(e.vars||e).palette.primary.main}}]}));function Ys(e){const t=Z({props:e,name:"MuiClockPointer"}),{className:a,isInner:s,type:i,viewValue:n}=t,c=ae(t,Ws),d=C.useRef(i);C.useEffect(()=>{d.current=i},[i]);const m=v({},t,{shouldAnimate:d.current!==i}),f=qs(m),k=()=>{let h=360/(i==="hours"?12:60)*n;return i==="hours"&&n>12&&(h-=360),{height:Math.round((s?.26:.4)*Pe),transform:"rotateZ(".concat(h,"deg)")}};return l.jsx(Ks,v({style:k(),className:ie(f.root,a),ownerState:m},c,{children:l.jsx(Gs,{ownerState:m,className:f.thumb})}))}function Qs(e){return fe("MuiClock",e)}pe("MuiClock",["root","clock","wrapper","squareMask","pin","amButton","pmButton","meridiemText","selected"]);const Xs=e=>{const{classes:t,meridiemMode:a}=e;return le({root:["root"],clock:["clock"],wrapper:["wrapper"],squareMask:["squareMask"],pin:["pin"],amButton:["amButton",a==="am"&&"selected"],pmButton:["pmButton",a==="pm"&&"selected"],meridiemText:["meridiemText"]},Qs,t)},Js=_("div",{name:"MuiClock",slot:"Root",overridesResolver:(e,t)=>t.root})(({theme:e})=>({display:"flex",justifyContent:"center",alignItems:"center",margin:e.spacing(2)})),Zs=_("div",{name:"MuiClock",slot:"Clock",overridesResolver:(e,t)=>t.clock})({backgroundColor:"rgba(0,0,0,.07)",borderRadius:"50%",height:220,width:220,flexShrink:0,position:"relative",pointerEvents:"none"}),eo=_("div",{name:"MuiClock",slot:"Wrapper",overridesResolver:(e,t)=>t.wrapper})({"&:focus":{outline:"none"}}),to=_("div",{name:"MuiClock",slot:"SquareMask",overridesResolver:(e,t)=>t.squareMask})({width:"100%",height:"100%",position:"absolute",pointerEvents:"auto",outline:0,touchAction:"none",userSelect:"none",variants:[{props:{disabled:!1},style:{"@media (pointer: fine)":{cursor:"pointer",borderRadius:"50%"},"&:active":{cursor:"move"}}}]}),so=_("div",{name:"MuiClock",slot:"Pin",overridesResolver:(e,t)=>t.pin})(({theme:e})=>({width:6,height:6,borderRadius:"50%",backgroundColor:(e.vars||e).palette.primary.main,position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)"})),Bt=(e,t)=>({zIndex:1,bottom:8,paddingLeft:4,paddingRight:4,width:me,variants:[{props:{meridiemMode:t},style:{backgroundColor:(e.vars||e).palette.primary.main,color:(e.vars||e).palette.primary.contrastText,"&:hover":{backgroundColor:(e.vars||e).palette.primary.light}}}]}),oo=_(ht,{name:"MuiClock",slot:"AmButton",overridesResolver:(e,t)=>t.amButton})(({theme:e})=>v({},Bt(e,"am"),{position:"absolute",left:8})),no=_(ht,{name:"MuiClock",slot:"PmButton",overridesResolver:(e,t)=>t.pmButton})(({theme:e})=>v({},Bt(e,"pm"),{position:"absolute",right:8})),ut=_(ft,{name:"MuiClock",slot:"meridiemText",overridesResolver:(e,t)=>t.meridiemText})({overflow:"hidden",whiteSpace:"nowrap",textOverflow:"ellipsis"});function ao(e){const t=Z({props:e,name:"MuiClock"}),{ampm:a,ampmInClock:s,autoFocus:i,children:n,value:c,handleMeridiemChange:d,isTimeDisabled:m,meridiemMode:f,minutesStep:k=1,onChange:p,selectedId:h,type:r,viewValue:b,viewRange:[y,O],disabled:R=!1,readOnly:V,className:N}=t,L=t,j=we(),F=Se(),P=C.useRef(!1),g=Xs(L),I=m(b,r),E=!a&&r==="hours"&&(b<1||b>12),u=(S,B)=>{R||V||m(S,r)||p(S,B)},w=(S,B)=>{let{offsetX:te,offsetY:W}=S;if(te===void 0){const Q=S.target.getBoundingClientRect();te=S.changedTouches[0].clientX-Q.left,W=S.changedTouches[0].clientY-Q.top}const se=r==="seconds"||r==="minutes"?Hs(te,W,k):Us(te,W,!!a);u(se,B)},$=S=>{P.current=!0,w(S,"shallow")},ee=S=>{P.current&&(w(S,"finish"),P.current=!1),S.preventDefault()},ce=S=>{S.buttons>0&&w(S.nativeEvent,"shallow")},ye=S=>{P.current&&(P.current=!1),w(S.nativeEvent,"finish")},re=C.useMemo(()=>r==="hours"?!0:b%5===0,[r,b]),J=r==="minutes"?k:1,ue=C.useRef(null);ls(()=>{i&&ue.current.focus()},[i]);const A=S=>Math.max(y,Math.min(O,S)),U=S=>(S+(O+1))%(O+1),Y=S=>{if(!P.current)switch(S.key){case"Home":u(y,"partial"),S.preventDefault();break;case"End":u(O,"partial"),S.preventDefault();break;case"ArrowUp":u(U(b+J),"partial"),S.preventDefault();break;case"ArrowDown":u(U(b-J),"partial"),S.preventDefault();break;case"PageUp":u(A(b+5),"partial"),S.preventDefault();break;case"PageDown":u(A(b-5),"partial"),S.preventDefault();break;case"Enter":case" ":u(b,"finish"),S.preventDefault();break}};return l.jsxs(Js,{className:ie(g.root,N),children:[l.jsxs(Zs,{className:g.clock,children:[l.jsx(to,{onTouchMove:$,onTouchStart:$,onTouchEnd:ee,onMouseUp:ye,onMouseMove:ce,ownerState:{disabled:R},className:g.squareMask}),!I&&l.jsxs(C.Fragment,{children:[l.jsx(so,{className:g.pin}),c!=null&&l.jsx(Ys,{type:r,viewValue:b,isInner:E,hasSelected:re})]}),l.jsx(eo,{"aria-activedescendant":h,"aria-label":F.clockLabelText(r,c,j,c==null?null:j.format(c,"fullTime")),ref:ue,role:"listbox",onKeyDown:Y,tabIndex:0,className:g.wrapper,children:n})]}),a&&s&&l.jsxs(C.Fragment,{children:[l.jsx(oo,{onClick:V?void 0:()=>d("am"),disabled:R||f===null,ownerState:L,className:g.amButton,title:xe(j,"am"),children:l.jsx(ut,{variant:"caption",className:g.meridiemText,children:xe(j,"am")})}),l.jsx(no,{disabled:R||f===null,onClick:V?void 0:()=>d("pm"),ownerState:L,className:g.pmButton,title:xe(j,"pm"),children:l.jsx(ut,{variant:"caption",className:g.meridiemText,children:xe(j,"pm")})})]})]})}function ro(e){return fe("MuiClockNumber",e)}const _e=pe("MuiClockNumber",["root","selected","disabled"]),io=["className","disabled","index","inner","label","selected"],lo=e=>{const{classes:t,selected:a,disabled:s}=e;return le({root:["root",a&&"selected",s&&"disabled"]},ro,t)},co=_("span",{name:"MuiClockNumber",slot:"Root",overridesResolver:(e,t)=>[t.root,{["&.".concat(_e.disabled)]:t.disabled},{["&.".concat(_e.selected)]:t.selected}]})(({theme:e})=>({height:me,width:me,position:"absolute",left:"calc((100% - ".concat(me,"px) / 2)"),display:"inline-flex",justifyContent:"center",alignItems:"center",borderRadius:"50%",color:(e.vars||e).palette.text.primary,fontFamily:e.typography.fontFamily,"&:focused":{backgroundColor:(e.vars||e).palette.background.paper},["&.".concat(_e.selected)]:{color:(e.vars||e).palette.primary.contrastText},["&.".concat(_e.disabled)]:{pointerEvents:"none",color:(e.vars||e).palette.text.disabled},variants:[{props:{inner:!0},style:v({},e.typography.body2,{color:(e.vars||e).palette.text.secondary})}]}));function _t(e){const t=Z({props:e,name:"MuiClockNumber"}),{className:a,disabled:s,index:i,inner:n,label:c,selected:d}=t,m=ae(t,io),f=t,k=lo(f),p=i%12/12*Math.PI*2-Math.PI/2,h=(Pe-me-2)/2*(n?.65:1),r=Math.round(Math.cos(p)*h),b=Math.round(Math.sin(p)*h);return l.jsx(co,v({className:ie(k.root,a),"aria-disabled":s?!0:void 0,"aria-selected":d?!0:void 0,role:"option",style:{transform:"translate(".concat(r,"px, ").concat(b+(Pe-me)/2,"px")},ownerState:f},m,{children:c}))}const uo=({ampm:e,value:t,getClockNumberText:a,isDisabled:s,selectedId:i,utils:n})=>{const c=t?n.getHours(t):null,d=[],m=e?1:0,f=e?12:23,k=p=>c===null?!1:e?p===12?c===12||c===0:c===p||c-12===p:c===p;for(let p=m;p<=f;p+=1){let h=p.toString();p===0&&(h="00");const r=!e&&(p===0||p>12);h=n.formatNumber(h);const b=k(p);d.push(l.jsx(_t,{id:b?i:void 0,index:p,inner:r,selected:b,disabled:s(p),label:h,"aria-label":a(h)},p))}return d},dt=({utils:e,value:t,isDisabled:a,getClockNumberText:s,selectedId:i})=>{const n=e.formatNumber;return[[5,n("05")],[10,n("10")],[15,n("15")],[20,n("20")],[25,n("25")],[30,n("30")],[35,n("35")],[40,n("40")],[45,n("45")],[50,n("50")],[55,n("55")],[0,n("00")]].map(([c,d],m)=>{const f=c===t;return l.jsx(_t,{label:d,id:f?i:void 0,index:m+1,inner:!1,disabled:a(c),selected:f,"aria-label":s(d)},c)})},et=({value:e,referenceDate:t,utils:a,props:s,timezone:i})=>{const n=C.useMemo(()=>ve.getInitialReferenceValue({value:e,utils:a,props:s,referenceDate:t,granularity:cs.day,timezone:i,getTodayDate:()=>us(a,i,"date")}),[]);return e!=null?e:n},mo=["ampm","ampmInClock","autoFocus","slots","slotProps","value","defaultValue","referenceDate","disableIgnoringDatePartForTimeValidation","maxTime","minTime","disableFuture","disablePast","minutesStep","shouldDisableTime","showViewSwitcher","onChange","view","views","openTo","onViewChange","focusedView","onFocusedViewChange","className","disabled","readOnly","timezone"],po=e=>{const{classes:t}=e;return le({root:["root"],arrowSwitcher:["arrowSwitcher"]},_s,t)},fo=_(Qe,{name:"MuiTimeClock",slot:"Root",overridesResolver:(e,t)=>t.root})({display:"flex",flexDirection:"column",position:"relative"}),bo=_(ds,{name:"MuiTimeClock",slot:"ArrowSwitcher",overridesResolver:(e,t)=>t.arrowSwitcher})({position:"absolute",right:12,top:15}),ho=["hours","minutes"],go=C.forwardRef(function(t,a){const s=we(),i=Z({props:t,name:"MuiTimeClock"}),{ampm:n=s.is12HourCycleInCurrentLocale(),ampmInClock:c=!1,autoFocus:d,slots:m,slotProps:f,value:k,defaultValue:p,referenceDate:h,disableIgnoringDatePartForTimeValidation:r=!1,maxTime:b,minTime:y,disableFuture:O,disablePast:R,minutesStep:V=1,shouldDisableTime:N,showViewSwitcher:L,onChange:j,view:F,views:P=ho,openTo:g,onViewChange:I,focusedView:E,onFocusedViewChange:u,className:w,disabled:$,readOnly:ee,timezone:ce}=i,ye=ae(i,mo),{value:re,handleValueChange:J,timezone:ue}=Xe({name:"TimeClock",timezone:ce,value:k,defaultValue:p,referenceDate:h,onChange:j,valueManager:ve}),A=et({value:re,referenceDate:h,utils:s,props:i,timezone:ue}),U=Se(),Y=Je(ue),{view:S,setView:B,previousView:te,nextView:W,setValueAndGoToNextView:se}=Ze({view:F,views:P,openTo:g,onViewChange:I,onChange:J,focusedView:E,onFocusedViewChange:u}),{meridiemMode:Q,handleMeridiemChange:be}=Ye(A,n,se),de=C.useCallback((q,K)=>{const H=ze(r,s),M=K==="hours"||K==="minutes"&&P.includes("seconds"),x=({start:D,end:z})=>!(y&&H(y,z)||b&&H(D,b)||O&&H(D,Y)||R&&H(Y,M?z:D)),T=(D,z=1)=>{if(D%z!==0)return!1;if(N)switch(K){case"hours":return!N(s.setHours(A,D),"hours");case"minutes":return!N(s.setMinutes(A,D),"minutes");case"seconds":return!N(s.setSeconds(A,D),"seconds");default:return!1}return!0};switch(K){case"hours":{const D=Ae(q,Q,n),z=s.setHours(A,D);if(s.getHours(z)!==D)return!0;const ge=s.setSeconds(s.setMinutes(z,0),0),Ie=s.setSeconds(s.setMinutes(z,59),59);return!x({start:ge,end:Ie})||!T(D)}case"minutes":{const D=s.setMinutes(A,q),z=s.setSeconds(D,0),ge=s.setSeconds(D,59);return!x({start:z,end:ge})||!T(q,V)}case"seconds":{const D=s.setSeconds(A,q);return!x({start:D,end:D})||!T(q)}default:throw new Error("not supported")}},[n,A,r,b,Q,y,V,N,s,O,R,Y,P]),X=ms(),Me=C.useMemo(()=>{switch(S){case"hours":{const q=(M,x)=>{const T=Ae(M,Q,n);se(s.setHours(A,T),x,"hours")},K=s.getHours(A);let H;return n?K>12?H=[12,23]:H=[0,11]:H=[0,23],{onChange:q,viewValue:K,children:uo({value:re,utils:s,ampm:n,onChange:q,getClockNumberText:U.hoursClockNumberText,isDisabled:M=>$||de(M,"hours"),selectedId:X}),viewRange:H}}case"minutes":{const q=s.getMinutes(A),K=(H,M)=>{se(s.setMinutes(A,H),M,"minutes")};return{viewValue:q,onChange:K,children:dt({utils:s,value:q,onChange:K,getClockNumberText:U.minutesClockNumberText,isDisabled:H=>$||de(H,"minutes"),selectedId:X}),viewRange:[0,59]}}case"seconds":{const q=s.getSeconds(A),K=(H,M)=>{se(s.setSeconds(A,H),M,"seconds")};return{viewValue:q,onChange:K,children:dt({utils:s,value:q,onChange:K,getClockNumberText:U.secondsClockNumberText,isDisabled:H=>$||de(H,"seconds"),selectedId:X}),viewRange:[0,59]}}default:throw new Error("You must provide the type for ClockView")}},[S,s,re,n,U.hoursClockNumberText,U.minutesClockNumberText,U.secondsClockNumberText,Q,se,A,de,X,$]),oe=i,he=po(oe);return l.jsxs(fo,v({ref:a,className:ie(he.root,w),ownerState:oe},ye,{children:[l.jsx(ao,v({autoFocus:d!=null?d:!!E,ampmInClock:c&&P.includes("hours"),value:re,type:S,ampm:n,minutesStep:V,isTimeDisabled:de,meridiemMode:Q,handleMeridiemChange:be,selectedId:X,disabled:$,readOnly:ee},Me)),L&&l.jsx(bo,{className:he.arrowSwitcher,slots:m,slotProps:f,onGoToPrevious:()=>B(te),isPreviousDisabled:!te,previousLabel:U.openPreviousView,onGoToNext:()=>B(W),isNextDisabled:!W,nextLabel:U.openNextView,ownerState:oe})]}))});function ko(e){return fe("MuiDigitalClock",e)}pe("MuiDigitalClock",["root","list","item"]);const To=["ampm","timeStep","autoFocus","slots","slotProps","value","defaultValue","referenceDate","disableIgnoringDatePartForTimeValidation","maxTime","minTime","disableFuture","disablePast","minutesStep","shouldDisableTime","onChange","view","openTo","onViewChange","focusedView","onFocusedViewChange","className","disabled","readOnly","views","skipDisabled","timezone"],Co=e=>{const{classes:t}=e;return le({root:["root"],list:["list"],item:["item"]},ko,t)},xo=_(Qe,{name:"MuiDigitalClock",slot:"Root",overridesResolver:(e,t)=>t.root})({overflowY:"auto",width:"100%","@media (prefers-reduced-motion: no-preference)":{scrollBehavior:"auto"},maxHeight:St,variants:[{props:{alreadyRendered:!0},style:{"@media (prefers-reduced-motion: no-preference)":{scrollBehavior:"smooth"}}}]}),vo=_(gt,{name:"MuiDigitalClock",slot:"List",overridesResolver:(e,t)=>t.list})({padding:0}),wo=_(kt,{name:"MuiDigitalClock",slot:"Item",overridesResolver:(e,t)=>t.item})(({theme:e})=>({padding:"8px 16px",margin:"2px 4px","&:first-of-type":{marginTop:4},"&:hover":{backgroundColor:e.vars?"rgba(".concat(e.vars.palette.primary.mainChannel," / ").concat(e.vars.palette.action.hoverOpacity,")"):Ee(e.palette.primary.main,e.palette.action.hoverOpacity)},"&.Mui-selected":{backgroundColor:(e.vars||e).palette.primary.main,color:(e.vars||e).palette.primary.contrastText,"&:focus-visible, &:hover":{backgroundColor:(e.vars||e).palette.primary.dark}},"&.Mui-focusVisible":{backgroundColor:e.vars?"rgba(".concat(e.vars.palette.primary.mainChannel," / ").concat(e.vars.palette.action.focusOpacity,")"):Ee(e.palette.primary.main,e.palette.action.focusOpacity)}})),yo=C.forwardRef(function(t,a){var H;const s=we(),i=C.useRef(null),n=Mt(a,i),c=C.useRef(null),d=Z({props:t,name:"MuiDigitalClock"}),{ampm:m=s.is12HourCycleInCurrentLocale(),timeStep:f=30,autoFocus:k,slots:p,slotProps:h,value:r,defaultValue:b,referenceDate:y,disableIgnoringDatePartForTimeValidation:O=!1,maxTime:R,minTime:V,disableFuture:N,disablePast:L,minutesStep:j=1,shouldDisableTime:F,onChange:P,view:g,openTo:I,onViewChange:E,focusedView:u,onFocusedViewChange:w,className:$,disabled:ee,readOnly:ce,views:ye=["hours"],skipDisabled:re=!1,timezone:J}=d,ue=ae(d,To),{value:A,handleValueChange:U,timezone:Y}=Xe({name:"DigitalClock",timezone:J,value:r,defaultValue:b,referenceDate:y,onChange:P,valueManager:ve}),S=Se(),B=Je(Y),te=C.useMemo(()=>v({},d,{alreadyRendered:!!i.current}),[d]),W=Co(te),se=(H=p==null?void 0:p.digitalClockItem)!=null?H:wo,Q=yt({elementType:se,externalSlotProps:h==null?void 0:h.digitalClockItem,ownerState:{},className:W.item}),be=et({value:A,referenceDate:y,utils:s,props:d,timezone:Y}),de=$e(M=>U(M,"finish","hours")),{setValueAndGoToNextView:X}=Ze({view:g,views:ye,openTo:I,onViewChange:E,onChange:de,focusedView:u,onFocusedViewChange:w}),Me=$e(M=>{X(M,"finish")});C.useEffect(()=>{if(i.current===null)return;const M=i.current.querySelector('[role="listbox"] [role="option"][tabindex="0"], [role="listbox"] [role="option"][aria-selected="true"]');if(!M)return;const x=M.offsetTop;(k||u)&&M.focus(),i.current.scrollTop=x-4});const oe=C.useCallback(M=>{const x=ze(O,s),T=()=>!(V&&x(V,M)||R&&x(M,R)||N&&x(M,B)||L&&x(B,M)),D=()=>s.getMinutes(M)%j!==0?!1:F?!F(M,"hours"):!0;return!T()||!D()},[O,s,V,R,N,B,L,j,F]),he=C.useMemo(()=>{const M=[];let T=s.startOfDay(be);for(;s.isSameDay(be,T);)M.push(T),T=s.addMinutes(T,f);return M},[be,f,s]),q=he.findIndex(M=>s.isEqual(M,be)),K=M=>{switch(M.key){case"PageUp":{const x=He(c.current)-5,T=c.current.children,D=Math.max(0,x),z=T[D];z&&z.focus(),M.preventDefault();break}case"PageDown":{const x=He(c.current)+5,T=c.current.children,D=Math.min(T.length-1,x),z=T[D];z&&z.focus(),M.preventDefault();break}}};return l.jsx(xo,v({ref:n,className:ie(W.root,$),ownerState:te},ue,{children:l.jsx(vo,{ref:c,role:"listbox","aria-label":S.timePickerToolbarTitle,className:W.list,onKeyDown:K,children:he.map((M,x)=>{if(re&&oe(M))return null;const T=s.isEqual(M,A),D=s.format(M,m?"fullTime12h":"fullTime24h"),z=q===x||q===-1&&x===0?0:-1;return l.jsx(se,v({onClick:()=>!ce&&Me(M),selected:T,disabled:ee||oe(M),disableRipple:ce,role:"option","aria-disabled":ce,"aria-selected":T,tabIndex:z},Q,{children:D}),"".concat(M.valueOf(),"-").concat(D))})})}))});function So(e){return fe("MuiMultiSectionDigitalClock",e)}pe("MuiMultiSectionDigitalClock",["root"]);function Mo(e){return fe("MuiMultiSectionDigitalClockSection",e)}pe("MuiMultiSectionDigitalClockSection",["root","item"]);const Do=["autoFocus","onChange","className","disabled","readOnly","items","active","slots","slotProps","skipDisabled"],Po=e=>{const{classes:t}=e;return le({root:["root"],item:["item"]},Mo,t)},Io=_(gt,{name:"MuiMultiSectionDigitalClockSection",slot:"Root",overridesResolver:(e,t)=>t.root})(({theme:e})=>({maxHeight:St,width:56,padding:0,overflow:"hidden","@media (prefers-reduced-motion: no-preference)":{scrollBehavior:"auto"},"@media (pointer: fine)":{"&:hover":{overflowY:"auto"}},"@media (pointer: none), (pointer: coarse)":{overflowY:"auto"},"&:not(:first-of-type)":{borderLeft:"1px solid ".concat((e.vars||e).palette.divider)},"&::after":{display:"block",content:'""',height:"calc(100% - 40px - 6px)"},variants:[{props:{alreadyRendered:!0},style:{"@media (prefers-reduced-motion: no-preference)":{scrollBehavior:"smooth"}}}]})),Vo=_(kt,{name:"MuiMultiSectionDigitalClockSection",slot:"Item",overridesResolver:(e,t)=>t.item})(({theme:e})=>({padding:8,margin:"2px 4px",width:ps,justifyContent:"center","&:first-of-type":{marginTop:4},"&:hover":{backgroundColor:e.vars?"rgba(".concat(e.vars.palette.primary.mainChannel," / ").concat(e.vars.palette.action.hoverOpacity,")"):Ee(e.palette.primary.main,e.palette.action.hoverOpacity)},"&.Mui-selected":{backgroundColor:(e.vars||e).palette.primary.main,color:(e.vars||e).palette.primary.contrastText,"&:focus-visible, &:hover":{backgroundColor:(e.vars||e).palette.primary.dark}},"&.Mui-focusVisible":{backgroundColor:e.vars?"rgba(".concat(e.vars.palette.primary.mainChannel," / ").concat(e.vars.palette.action.focusOpacity,")"):Ee(e.palette.primary.main,e.palette.action.focusOpacity)}})),jo=C.forwardRef(function(t,a){var P;const s=C.useRef(null),i=Mt(a,s),n=C.useRef(null),c=Z({props:t,name:"MuiMultiSectionDigitalClockSection"}),{autoFocus:d,onChange:m,className:f,disabled:k,readOnly:p,items:h,active:r,slots:b,slotProps:y,skipDisabled:O}=c,R=ae(c,Do),V=C.useMemo(()=>v({},c,{alreadyRendered:!!s.current}),[c]),N=Po(V),L=(P=b==null?void 0:b.digitalClockSectionItem)!=null?P:Vo;C.useEffect(()=>{if(s.current===null)return;const g=s.current.querySelector('[role="option"][tabindex="0"], [role="option"][aria-selected="true"]');if(r&&d&&g&&g.focus(),!g||n.current===g)return;n.current=g;const I=g.offsetTop;s.current.scrollTop=I-4});const j=h.findIndex(g=>g.isFocused(g.value)),F=g=>{switch(g.key){case"PageUp":{const I=He(s.current)-5,E=s.current.children,u=Math.max(0,I),w=E[u];w&&w.focus(),g.preventDefault();break}case"PageDown":{const I=He(s.current)+5,E=s.current.children,u=Math.min(E.length-1,I),w=E[u];w&&w.focus(),g.preventDefault();break}}};return l.jsx(Io,v({ref:i,className:ie(N.root,f),ownerState:V,autoFocusItem:d&&r,role:"listbox",onKeyDown:F},R,{children:h.map((g,I)=>{var ee;const E=(ee=g.isDisabled)==null?void 0:ee.call(g,g.value),u=k||E;if(O&&u)return null;const w=g.isSelected(g.value),$=j===I||j===-1&&I===0?0:-1;return l.jsx(L,v({onClick:()=>!p&&m(g.value),selected:w,disabled:u,disableRipple:p,role:"option","aria-disabled":p||u||void 0,"aria-label":g.ariaLabel,"aria-selected":w,tabIndex:$,className:N.item},y==null?void 0:y.digitalClockSectionItem,{children:g.label}),g.label)})}))}),Ro=({now:e,value:t,utils:a,ampm:s,isDisabled:i,resolveAriaLabel:n,timeStep:c,valueOrReferenceDate:d})=>{const m=t?a.getHours(t):null,f=[],k=(r,b)=>{const y=b!=null?b:m;return y===null?!1:s?r===12?y===12||y===0:y===r||y-12===r:y===r},p=r=>k(r,a.getHours(d)),h=s?11:23;for(let r=0;r<=h;r+=c){let b=a.format(a.setHours(e,r),s?"hours12h":"hours24h");const y=n(parseInt(b,10).toString());b=a.formatNumber(b),f.push({value:r,label:b,isSelected:k,isDisabled:i,isFocused:p,ariaLabel:y})}return f},mt=({value:e,utils:t,isDisabled:a,timeStep:s,resolveLabel:i,resolveAriaLabel:n,hasValue:c=!0})=>{const d=f=>e===null?!1:c&&e===f,m=f=>e===f;return[...Array.from({length:Math.ceil(60/s)},(f,k)=>{const p=s*k;return{value:p,label:t.formatNumber(i(p)),isDisabled:a,isSelected:d,isFocused:m,ariaLabel:n(p.toString())}})]},Fo=["ampm","timeSteps","autoFocus","slots","slotProps","value","defaultValue","referenceDate","disableIgnoringDatePartForTimeValidation","maxTime","minTime","disableFuture","disablePast","minutesStep","shouldDisableTime","onChange","view","views","openTo","onViewChange","focusedView","onFocusedViewChange","className","disabled","readOnly","skipDisabled","timezone"],No=e=>{const{classes:t}=e;return le({root:["root"]},So,t)},Lo=_(Qe,{name:"MuiMultiSectionDigitalClock",slot:"Root",overridesResolver:(e,t)=>t.root})(({theme:e})=>({display:"flex",flexDirection:"row",width:"100%",borderBottom:"1px solid ".concat((e.vars||e).palette.divider)})),Oo=C.forwardRef(function(t,a){const s=we(),i=bt(),n=Z({props:t,name:"MuiMultiSectionDigitalClock"}),{ampm:c=s.is12HourCycleInCurrentLocale(),timeSteps:d,autoFocus:m,slots:f,slotProps:k,value:p,defaultValue:h,referenceDate:r,disableIgnoringDatePartForTimeValidation:b=!1,maxTime:y,minTime:O,disableFuture:R,disablePast:V,minutesStep:N=1,shouldDisableTime:L,onChange:j,view:F,views:P=["hours","minutes"],openTo:g,onViewChange:I,focusedView:E,onFocusedViewChange:u,className:w,disabled:$,readOnly:ee,skipDisabled:ce=!1,timezone:ye}=n,re=ae(n,Fo),{value:J,handleValueChange:ue,timezone:A}=Xe({name:"MultiSectionDigitalClock",timezone:ye,value:p,defaultValue:h,referenceDate:r,onChange:j,valueManager:ve}),U=Se(),Y=Je(A),S=C.useMemo(()=>v({hours:1,minutes:5,seconds:5},d),[d]),B=et({value:J,referenceDate:r,utils:s,props:n,timezone:A}),te=$e((x,T,D)=>ue(x,T,D)),W=C.useMemo(()=>!c||!P.includes("hours")||P.includes("meridiem")?P:[...P,"meridiem"],[c,P]),{view:se,setValueAndGoToNextView:Q,focusedView:be}=Ze({view:F,views:W,openTo:g,onViewChange:I,onChange:te,focusedView:E,onFocusedViewChange:u}),de=$e(x=>{Q(x,"finish","meridiem")}),{meridiemMode:X,handleMeridiemChange:Me}=Ye(B,c,de,"finish"),oe=C.useCallback((x,T)=>{const D=ze(b,s),z=T==="hours"||T==="minutes"&&W.includes("seconds"),ge=({start:G,end:ne})=>!(O&&D(O,ne)||y&&D(G,y)||R&&D(G,Y)||V&&D(Y,z?ne:G)),Ie=(G,ne=1)=>{if(G%ne!==0)return!1;if(L)switch(T){case"hours":return!L(s.setHours(B,G),"hours");case"minutes":return!L(s.setMinutes(B,G),"minutes");case"seconds":return!L(s.setSeconds(B,G),"seconds");default:return!1}return!0};switch(T){case"hours":{const G=Ae(x,X,c),ne=s.setHours(B,G);if(s.getHours(ne)!==G)return!0;const Ne=s.setSeconds(s.setMinutes(ne,0),0),$t=s.setSeconds(s.setMinutes(ne,59),59);return!ge({start:Ne,end:$t})||!Ie(G)}case"minutes":{const G=s.setMinutes(B,x),ne=s.setSeconds(G,0),Ne=s.setSeconds(G,59);return!ge({start:ne,end:Ne})||!Ie(x,N)}case"seconds":{const G=s.setSeconds(B,x);return!ge({start:G,end:G})||!Ie(x)}default:throw new Error("not supported")}},[c,B,b,y,X,O,N,L,s,R,V,Y,W]),he=C.useCallback(x=>{switch(x){case"hours":return{onChange:T=>{const D=Ae(T,X,c);Q(s.setHours(B,D),"finish","hours")},items:Ro({now:Y,value:J,ampm:c,utils:s,isDisabled:T=>oe(T,"hours"),timeStep:S.hours,resolveAriaLabel:U.hoursClockNumberText,valueOrReferenceDate:B})};case"minutes":return{onChange:T=>{Q(s.setMinutes(B,T),"finish","minutes")},items:mt({value:s.getMinutes(B),utils:s,isDisabled:T=>oe(T,"minutes"),resolveLabel:T=>s.format(s.setMinutes(Y,T),"minutes"),timeStep:S.minutes,hasValue:!!J,resolveAriaLabel:U.minutesClockNumberText})};case"seconds":return{onChange:T=>{Q(s.setSeconds(B,T),"finish","seconds")},items:mt({value:s.getSeconds(B),utils:s,isDisabled:T=>oe(T,"seconds"),resolveLabel:T=>s.format(s.setSeconds(Y,T),"seconds"),timeStep:S.seconds,hasValue:!!J,resolveAriaLabel:U.secondsClockNumberText})};case"meridiem":{const T=xe(s,"am"),D=xe(s,"pm");return{onChange:Me,items:[{value:"am",label:T,isSelected:()=>!!J&&X==="am",isFocused:()=>!!B&&X==="am",ariaLabel:T},{value:"pm",label:D,isSelected:()=>!!J&&X==="pm",isFocused:()=>!!B&&X==="pm",ariaLabel:D}]}}default:throw new Error("Unknown view: ".concat(x," found."))}},[Y,J,c,s,S.hours,S.minutes,S.seconds,U.hoursClockNumberText,U.minutesClockNumberText,U.secondsClockNumberText,X,Q,B,oe,Me]),q=C.useMemo(()=>{if(!i)return W;const x=W.filter(T=>T!=="meridiem");return x.reverse(),W.includes("meridiem")&&x.push("meridiem"),x},[i,W]),K=C.useMemo(()=>W.reduce((x,T)=>v({},x,{[T]:he(T)}),{}),[W,he]),H=n,M=No(H);return l.jsx(Lo,v({ref:a,className:ie(M.root,w),ownerState:H,role:"group"},re,{children:q.map(x=>l.jsx(jo,{items:K[x].items,onChange:K[x].onChange,active:se===x,autoFocus:m!=null?m:be===x,disabled:$,readOnly:ee,slots:f,slotProps:k,skipDisabled:ce,"aria-label":U.selectViewText(x)},x))}))}),qe=({view:e,onViewChange:t,focusedView:a,onFocusedViewChange:s,views:i,value:n,defaultValue:c,referenceDate:d,onChange:m,className:f,classes:k,disableFuture:p,disablePast:h,minTime:r,maxTime:b,shouldDisableTime:y,minutesStep:O,ampm:R,ampmInClock:V,slots:N,slotProps:L,readOnly:j,disabled:F,sx:P,autoFocus:g,showViewSwitcher:I,disableIgnoringDatePartForTimeValidation:E,timezone:u})=>l.jsx(go,{view:e,onViewChange:t,focusedView:a&&Ue(a)?a:null,onFocusedViewChange:s,views:i.filter(Ue),value:n,defaultValue:c,referenceDate:d,onChange:m,className:f,classes:k,disableFuture:p,disablePast:h,minTime:r,maxTime:b,shouldDisableTime:y,minutesStep:O,ampm:R,ampmInClock:V,slots:N,slotProps:L,readOnly:j,disabled:F,sx:P,autoFocus:g,showViewSwitcher:I,disableIgnoringDatePartForTimeValidation:E,timezone:u}),Bo=({view:e,onViewChange:t,focusedView:a,onFocusedViewChange:s,views:i,value:n,defaultValue:c,referenceDate:d,onChange:m,className:f,classes:k,disableFuture:p,disablePast:h,minTime:r,maxTime:b,shouldDisableTime:y,minutesStep:O,ampm:R,slots:V,slotProps:N,readOnly:L,disabled:j,sx:F,autoFocus:P,disableIgnoringDatePartForTimeValidation:g,timeSteps:I,skipDisabled:E,timezone:u})=>l.jsx(yo,{view:e,onViewChange:t,focusedView:a,onFocusedViewChange:s,views:i.filter(Ue),value:n,defaultValue:c,referenceDate:d,onChange:m,className:f,classes:k,disableFuture:p,disablePast:h,minTime:r,maxTime:b,shouldDisableTime:y,minutesStep:O,ampm:R,slots:V,slotProps:N,readOnly:L,disabled:j,sx:F,autoFocus:P,disableIgnoringDatePartForTimeValidation:g,timeStep:I==null?void 0:I.minutes,skipDisabled:E,timezone:u}),pt=({view:e,onViewChange:t,focusedView:a,onFocusedViewChange:s,views:i,value:n,defaultValue:c,referenceDate:d,onChange:m,className:f,classes:k,disableFuture:p,disablePast:h,minTime:r,maxTime:b,shouldDisableTime:y,minutesStep:O,ampm:R,slots:V,slotProps:N,readOnly:L,disabled:j,sx:F,autoFocus:P,disableIgnoringDatePartForTimeValidation:g,timeSteps:I,skipDisabled:E,timezone:u})=>l.jsx(Oo,{view:e,onViewChange:t,focusedView:a,onFocusedViewChange:s,views:i.filter(Ue),value:n,defaultValue:c,referenceDate:d,onChange:m,className:f,classes:k,disableFuture:p,disablePast:h,minTime:r,maxTime:b,shouldDisableTime:y,minutesStep:O,ampm:R,slots:V,slotProps:N,readOnly:L,disabled:j,sx:F,autoFocus:P,disableIgnoringDatePartForTimeValidation:g,timeSteps:I,skipDisabled:E,timezone:u}),_o=(e,t,a)=>a?t.filter(s=>!fs(s)||s==="hours"):e?[...t,"meridiem"]:t,Eo=(e,t)=>{var a,s;return 24*60/(((a=e.hours)!=null?a:1)*((s=e.minutes)!=null?s:5))<=t};function Ao({thresholdToRenderTimeInASingleColumn:e,ampm:t,timeSteps:a,views:s}){const i=e!=null?e:24,n=v({hours:1,minutes:5,seconds:5},a),c=Eo(n,i);return{thresholdToRenderTimeInASingleColumn:i,timeSteps:n,shouldRenderTimeInASingleColumn:c,views:_o(t,s,c)}}const Et=C.forwardRef(function(t,a){var R,V,N,L,j;const s=Se(),i=we(),n=Nt(t,"MuiDesktopTimePicker"),{shouldRenderTimeInASingleColumn:c,views:d,timeSteps:m}=Ao(n),f=c?Bo:pt,k=v({hours:f,minutes:f,seconds:f,meridiem:f},n.viewRenderers),p=(R=n.ampmInClock)!=null?R:!0,h=c?[]:["accept"],b=((V=k.hours)==null?void 0:V.name)===pt.name?d:d.filter(F=>F!=="meridiem"),y=v({},n,{ampmInClock:p,timeSteps:m,viewRenderers:k,format:Dt(i,n),views:c?["hours"]:b,slots:v({field:Rt,openPickerIcon:bs},n.slots),slotProps:v({},n.slotProps,{field:F=>{var P;return v({},Pt((P=n.slotProps)==null?void 0:P.field,F),It(n),{ref:a})},toolbar:v({hidden:!0,ampmInClock:p},(N=n.slotProps)==null?void 0:N.toolbar),actionBar:v({actions:h},(L=n.slotProps)==null?void 0:L.actionBar)})}),{renderPicker:O}=hs({props:y,valueManager:ve,valueType:"time",getOpenDialogAriaText:Vt({utils:i,formatKey:"fullTime",contextTranslation:s.openTimePickerDialogue,propsTranslation:(j=y.localeText)==null?void 0:j.openTimePickerDialogue}),validator:We});return O()});Et.propTypes={ampm:o.bool,ampmInClock:o.bool,autoFocus:o.bool,className:o.string,closeOnSelect:o.bool,defaultValue:o.object,disabled:o.bool,disableFuture:o.bool,disableIgnoringDatePartForTimeValidation:o.bool,disableOpenPicker:o.bool,disablePast:o.bool,enableAccessibleFieldDOMStructure:o.any,format:o.string,formatDensity:o.oneOf(["dense","spacious"]),inputRef:jt,label:o.node,localeText:o.object,maxTime:o.object,minTime:o.object,minutesStep:o.number,name:o.string,onAccept:o.func,onChange:o.func,onClose:o.func,onError:o.func,onOpen:o.func,onSelectedSectionsChange:o.func,onViewChange:o.func,open:o.bool,openTo:o.oneOf(["hours","meridiem","minutes","seconds"]),orientation:o.oneOf(["landscape","portrait"]),readOnly:o.bool,reduceAnimations:o.bool,referenceDate:o.object,selectedSections:o.oneOfType([o.oneOf(["all","day","empty","hours","meridiem","minutes","month","seconds","weekDay","year"]),o.number]),shouldDisableTime:o.func,skipDisabled:o.bool,slotProps:o.object,slots:o.object,sx:o.oneOfType([o.arrayOf(o.oneOfType([o.func,o.object,o.bool])),o.func,o.object]),thresholdToRenderTimeInASingleColumn:o.number,timeSteps:o.shape({hours:o.number,minutes:o.number,seconds:o.number}),timezone:o.string,value:o.object,view:o.oneOf(["hours","meridiem","minutes","seconds"]),viewRenderers:o.shape({hours:o.func,meridiem:o.func,minutes:o.func,seconds:o.func}),views:o.arrayOf(o.oneOf(["hours","minutes","seconds"]).isRequired)};const At=C.forwardRef(function(t,a){var k,p,h;const s=Se(),i=we(),n=Nt(t,"MuiMobileTimePicker"),c=v({hours:qe,minutes:qe,seconds:qe},n.viewRenderers),d=(k=n.ampmInClock)!=null?k:!1,m=v({},n,{ampmInClock:d,viewRenderers:c,format:Dt(i,n),slots:v({field:Rt},n.slots),slotProps:v({},n.slotProps,{field:r=>{var b;return v({},Pt((b=n.slotProps)==null?void 0:b.field,r),It(n),{ref:a})},toolbar:v({hidden:!1,ampmInClock:d},(p=n.slotProps)==null?void 0:p.toolbar)})}),{renderPicker:f}=gs({props:m,valueManager:ve,valueType:"time",getOpenDialogAriaText:Vt({utils:i,formatKey:"fullTime",contextTranslation:s.openTimePickerDialogue,propsTranslation:(h=m.localeText)==null?void 0:h.openTimePickerDialogue}),validator:We});return f()});At.propTypes={ampm:o.bool,ampmInClock:o.bool,autoFocus:o.bool,className:o.string,closeOnSelect:o.bool,defaultValue:o.object,disabled:o.bool,disableFuture:o.bool,disableIgnoringDatePartForTimeValidation:o.bool,disableOpenPicker:o.bool,disablePast:o.bool,enableAccessibleFieldDOMStructure:o.any,format:o.string,formatDensity:o.oneOf(["dense","spacious"]),inputRef:jt,label:o.node,localeText:o.object,maxTime:o.object,minTime:o.object,minutesStep:o.number,name:o.string,onAccept:o.func,onChange:o.func,onClose:o.func,onError:o.func,onOpen:o.func,onSelectedSectionsChange:o.func,onViewChange:o.func,open:o.bool,openTo:o.oneOf(["hours","minutes","seconds"]),orientation:o.oneOf(["landscape","portrait"]),readOnly:o.bool,reduceAnimations:o.bool,referenceDate:o.object,selectedSections:o.oneOfType([o.oneOf(["all","day","empty","hours","meridiem","minutes","month","seconds","weekDay","year"]),o.number]),shouldDisableTime:o.func,slotProps:o.object,slots:o.object,sx:o.oneOfType([o.arrayOf(o.oneOfType([o.func,o.object,o.bool])),o.func,o.object]),timezone:o.string,value:o.object,view:o.oneOf(["hours","minutes","seconds"]),viewRenderers:o.shape({hours:o.func,minutes:o.func,seconds:o.func}),views:o.arrayOf(o.oneOf(["hours","minutes","seconds"]).isRequired)};const $o=["desktopModeMediaQuery"],Ho=C.forwardRef(function(t,a){const s=Z({props:t,name:"MuiTimePicker"}),{desktopModeMediaQuery:i=ks}=s,n=ae(s,$o);return Ut(i,{defaultMatches:!0})?l.jsx(Et,v({ref:a},n)):l.jsx(At,v({ref:a},n))}),Uo=({settingName:e,value:t,defaultValue:a,handleChange:s})=>{const{t:i}=Tt(),[n,c]=C.useState(!1),[d,m]=C.useState(t);C.useEffect(()=>{t&&m(t)},[t]);const f=C.useCallback(h=>{c(!1),h&&m(t)},[t]),k=C.useCallback(()=>f(!0),[f]),p=C.useCallback((h,r=!0)=>{r&&f(!1),t!==h&&s(h)},[t,s,f]);return l.jsxs(l.Fragment,{children:[l.jsx(Ke,{onClick:()=>c(!0),children:l.jsx(Ge,{primary:e,secondary:Le(t,"HH:mm").format("LT"),secondaryTypographyProps:{style:{display:"flex",flexDirection:"column"}}})}),l.jsxs(Ct,{open:n,onClose:f,children:[l.jsxs(xt,{children:[l.jsx(vt,{sx:{paddingLeft:0},children:e}),l.jsx(Ts,{dateAdapter:Cs,adapterLocale:Le.locale(),children:l.jsx(Ho,{value:Le(d,"HH:mm"),defaultValue:Le(a,"HH:mm"),format:"LT",onChange:h=>{var r;return m((r=h==null?void 0:h.format("HH:mm"))!=null?r:"00:00")}})})]}),l.jsxs(wt,{children:[a!==void 0?l.jsx(Ce,{onClick:()=>{m(a),p(a,!1)},color:"primary",children:i("global.button.reset_to_default")}):null,l.jsx(Ce,{onClick:k,color:"primary",children:i("global.button.cancel")}),l.jsx(Ce,{onClick:()=>{p(d)},color:"primary",children:i("global.button.ok")})]})]})]})},zo=e=>({backupPath:e.backupPath,backupTime:e.backupTime,backupInterval:e.backupInterval,backupTTL:e.backupTTL}),Wo=e=>e===0?rt("global.label.never"):rt("settings.backup.automated.cleanup.label.value",{days:e,count:e});let Te;function tn(){var E;const{t:e}=Tt(),{setTitle:t,setAction:a}=zt();C.useLayoutEffect(()=>(t(e("settings.backup.title")),a(null),()=>{t(""),a(null)}),[e]);const{data:s,loading:i,error:n,refetch:c}=De.useGetServerSettings({notifyOnNetworkStatusChange:!0}),[d]=De.useUpdateServerSettings(),{data:m}=De.useGetBackupRestoreStatus(Te!=null?Te:"",{skip:!Te,pollInterval:1e3}),[f,k]=C.useState(null),[p,h]=C.useState(!1),[r,b]=C.useState(),[,y]=C.useState(0),O=(()=>{if(!(m!=null&&m.restoreStatus))return 0;const u=100*(m.restoreStatus.mangaProgress/m.restoreStatus.totalManga);return Number.isNaN(u)?0:u})(),R=(u,w)=>{d({variables:{input:{settings:{[u]:w}}}}).catch($=>ke(e("global.error.label.failed_to_save_changes"),"error",Oe($)))};C.useEffect(()=>{if(!(m!=null&&m.restoreStatus))return;const u=m.restoreStatus.state===tt.Success,w=m.restoreStatus.state===tt.Failure;(u||w)&&(u&&ke(e("settings.backup.action.restore.label.success"),"success"),w&&ke(e("settings.backup.action.restore.error.label.failure"),"error"),Te=void 0,y(Date.now()))},[(E=m==null?void 0:m.restoreStatus)==null?void 0:E.state]);const V=()=>{k(null);const u=document.getElementById("backup-file");u&&(u.value="")},N=async u=>{try{const{data:{validateBackup:w}}=await De.validateBackupFile(u,{fetchPolicy:"network-only"}).response;return w.missingSources.length||w.missingTrackers.length?(b(w),h(!0),!1):!0}catch(w){ke(e("settings.backup.action.validate.error.label.failure"),"error",Oe(w)),V()}return!1},L=async u=>{var w;try{ke(e("settings.backup.action.restore.label.in_progress"),"info"),Te=(w=(await De.restoreBackupFile(u).response).data)==null?void 0:w.restoreBackup.id,y(Date.now())}catch($){ke(e("settings.backup.action.restore.error.label.failure"),"error",Oe($))}finally{V()}},j=async u=>{if(u.name.toLowerCase().endsWith("json")){ke(e("settings.backup.action.restore.error.label.legacy_backup_unsupported"),"error");return}if(!u.name.toLowerCase().match(/proto\.gz$|tachibk$/g)){ke(e("global.error.label.invalid_file_type"),"error");return}k(u),await N(u)&&await L(u)},F=async u=>{u.preventDefault();const w=await it(u);j(w[0])},P=u=>{u.preventDefault()},g=()=>{h(!1),V()};if(C.useEffect(()=>{document.addEventListener("drop",F),document.addEventListener("dragover",P);const u=async $=>{const ee=await it($);j(ee[0])},w=document.getElementById("backup-file");return w==null||w.addEventListener("change",u),()=>{document.removeEventListener("drop",F),document.removeEventListener("dragover",P),w==null||w.removeEventListener("change",u)}},[]),i)return l.jsx(Wt,{});if(n)return l.jsx(qt,{message:e("global.error.label.failed_to_load_data"),messageExtra:Oe(n),retry:()=>c().catch(Kt())});const I=zo(s.settings);return l.jsxs(l.Fragment,{children:[l.jsxs(Be,{sx:{padding:0},children:[l.jsx(Ke,{component:"a",href:De.getExportBackupUrl(),download:!0,children:l.jsx(Ge,{primary:e("settings.backup.action.create.label.title"),secondary:e("settings.backup.action.create.label.description")})}),l.jsxs(Ke,{onClick:()=>{var u;return(u=document.getElementById("backup-file"))==null?void 0:u.click()},disabled:!!Te,children:[l.jsx(Ge,{primary:e("settings.backup.action.restore.label.title"),secondary:e("settings.backup.action.restore.label.description")}),Te?l.jsx(Gt,{children:l.jsx(Qt,{progress:O})}):null]}),l.jsxs(Be,{subheader:l.jsx(Yt,{component:"div",id:"backup-settings",children:"Automated backup"}),children:[l.jsx(Xt,{settingName:e("settings.backup.automated.location.label.title"),dialogDescription:e("settings.backup.automated.location.label.description"),value:I.backupPath,settingDescription:I.backupPath.length?I.backupPath:e("global.label.default"),handleChange:u=>R("backupPath",u)}),l.jsx(Uo,{settingName:e("settings.backup.automated.label.time"),value:I.backupTime,defaultValue:"00:00",handleChange:u=>R("backupTime",u)}),l.jsx(lt,{settingTitle:e("settings.backup.automated.label.interval"),settingValue:e("global.date.value.label.day",{days:I.backupInterval,count:I.backupInterval}),value:I.backupInterval,defaultValue:1,minValue:1,maxValue:31,stepSize:1,valueUnit:e("global.date.label.day_one"),showSlider:!0,handleUpdate:u=>R("backupInterval",u)}),l.jsx(lt,{settingTitle:e("settings.backup.automated.cleanup.label.title"),settingValue:Wo(I.backupTTL),value:I.backupTTL,defaultValue:14,minValue:0,maxValue:1e3,stepSize:1,valueUnit:e("global.date.label.day_one"),showSlider:!0,handleUpdate:u=>R("backupTTL",u)})]})]}),l.jsx("input",{type:"file",id:"backup-file",style:{display:"none"}}),l.jsxs(Ct,{open:p,children:[l.jsx(vt,{children:e("settings.backup.action.validate.dialog.title")}),l.jsxs(xt,{dividers:!0,children:[!!(r!=null&&r.missingSources.length)&&l.jsx(Be,{sx:{listStyleType:"initial",listStylePosition:"inside"},subheader:e("settings.backup.action.validate.dialog.content.label.missing_sources"),children:r==null?void 0:r.missingSources.map(({id:u,name:w})=>l.jsx(st,{sx:{display:"list-item"},children:"".concat(w," (").concat(u,")")},u))}),!!(r!=null&&r.missingTrackers.length)&&l.jsx(Be,{sx:{listStyleType:"initial",listStylePosition:"inside"},subheader:e("settings.backup.action.validate.dialog.content.label.missing_trackers"),children:r==null?void 0:r.missingTrackers.map(({name:u})=>l.jsx(st,{sx:{display:"list-item"},children:"".concat(u)},u))})]}),l.jsx(wt,{children:l.jsxs(ot,{direction:"row",sx:{justifyContent:"space-between",width:"100%"},children:[!!(r!=null&&r.missingSources.length)&&l.jsx(Ce,{onClick:g,component:nt,to:at.browse.path,autoFocus:!!(r!=null&&r.missingSources.length),variant:r!=null&&r.missingSources.length?"contained":"text",children:e("extension.action.label.install")}),!!(r!=null&&r.missingTrackers.length)&&l.jsx(Ce,{onClick:g,component:nt,to:at.tracker.path,autoFocus:!!(r!=null&&r.missingTrackers.length),variant:r!=null&&r.missingTrackers.length?"contained":"text",children:e("global.button.log_in")}),l.jsxs(ot,{direction:"row",children:[l.jsx(Ce,{onClick:g,children:e("global.button.cancel")}),l.jsx(Ce,{onClick:()=>{g(),L(f)},autoFocus:!(r!=null&&r.missingSources.length)&&!(r!=null&&r.missingTrackers.length),variant:!(r!=null&&r.missingSources.length)&&!(r!=null&&r.missingTrackers.length)?"contained":"text",children:e("global.button.restore")})]})]})})]})]})}export{tn as Backup};
