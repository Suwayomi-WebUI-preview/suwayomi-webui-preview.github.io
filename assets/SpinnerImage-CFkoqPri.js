import{r as y,i as S,j as e,c as r,u as B,a as z,bX as D,B as L,S as j,Y as T,b as A,O as v}from"./index-C4MwTuXl.js";var d={},F=S;Object.defineProperty(d,"__esModule",{value:!0});var _=d.default=void 0,O=F(y()),V=e;_=d.default=(0,O.default)((0,V.jsx)("path",{d:"M21 5v6.59l-3-3.01-4 4.01-4-4-4 4-3-3.01V5c0-1.1.9-2 2-2h14c1.1 0 2 .9 2 2m-3 6.42 3 3.01V19c0 1.1-.9 2-2 2H5c-1.1 0-2-.9-2-2v-6.58l3 2.99 4-4 4 4z"}),"BrokenImage");var f={},K=S;Object.defineProperty(f,"__esModule",{value:!0});var b=f.default=void 0,U=K(y()),G=e;b=f.default=(0,U.default)((0,G.jsx)("path",{d:"M21 19V5c0-1.1-.9-2-2-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2M8.5 13.5l2.5 3.01L14.5 12l4.5 6H5z"}),"Image");const N=r.forwardRef((w,C)=>{const{useFetchApi:R,src:n,alt:k,onImageLoad:i,spinnerStyle:{small:u,...E}={},imgStyle:o}=w,{t:q}=B(),h=!n.length,[p,M]=r.useState(""),[x,P]=r.useState(0),[c,$]=r.useState(void 0),[l,H]=r.useState(!1),g=(t,a=!1)=>{$(t),H(a),!t&&!a&&(i==null||i())};return r.useEffect(()=>{if(h)return()=>{};const t=z.requestImage(n,D.HIGH,R);let a;return(async()=>{try{const s=async()=>{const m=await t.response;g(!1),M(m)};if(!!await Promise.race([t.response,new Promise(m=>{a=setTimeout(m,50)})])){await s();return}g(!0),await s()}catch(s){const I=s instanceof Error&&(s.name==="AbortError"||s.message==="Component was unmounted");g(!1,!I)}})().catch(()=>{}),()=>{t.cleanup(),clearTimeout(a),t.abortRequest(new Error("Component was unmounted"))}},[n,x]),e.jsxs(e.Fragment,{children:[(c||l)&&e.jsx(L,{sx:E,children:e.jsxs(j,{height:"100%",alignItems:"center",justifyContent:"center",children:[c&&e.jsx(T,{thickness:5}),l&&c===!1&&e.jsxs(e.Fragment,{children:[e.jsx(_,{}),e.jsx(A,{startIcon:!u&&e.jsx(v,{}),onClick:t=>{t.stopPropagation(),t.preventDefault(),P(a=>(a+1)%100)},size:u?"small":"large",children:u?e.jsx(v,{}):q("global.button.retry")})]})]})}),h?e.jsx(j,{height:"100%",alignItems:"center",justifyContent:"center",sx:{background:t=>t.palette.background.default},children:e.jsx(b,{fontSize:"large"})}):e.jsx("img",{style:{...o,display:!p||c||l?"none":o==null?void 0:o.display},ref:C,src:p,alt:k,draggable:!1},"".concat(n,"_").concat(x))]})});export{N as S};
