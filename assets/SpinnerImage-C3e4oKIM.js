import{r as _,i as b,j as e,c as r,u as L,a as T,B as A,S as y,a8 as F,b as V}from"./index-jDC7h8fO.js";import{d as S}from"./Refresh-BMhfDC7_.js";var f={},K=b;Object.defineProperty(f,"__esModule",{value:!0});var w=f.default=void 0,O=K(_()),U=e;w=f.default=(0,O.default)((0,U.jsx)("path",{d:"M21 5v6.59l-3-3.01-4 4.01-4-4-4 4-3-3.01V5c0-1.1.9-2 2-2h14c1.1 0 2 .9 2 2m-3 6.42 3 3.01V19c0 1.1-.9 2-2 2H5c-1.1 0-2-.9-2-2v-6.58l3 2.99 4-4 4 4z"}),"BrokenImage");var h={},G=b;Object.defineProperty(h,"__esModule",{value:!0});var C=h.default=void 0,J=G(_()),N=e;C=h.default=(0,J.default)((0,N.jsx)("path",{d:"M21 19V5c0-1.1-.9-2-2-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2M8.5 13.5l2.5 3.01L14.5 12l4.5 6H5z"}),"Image");const Y=r.forwardRef((R,k)=>{const{shouldDecode:E,useFetchApi:q,src:n,alt:M,onImageLoad:i,spinnerStyle:{small:u,...p}={},imgStyle:o,priority:$}=R,{t:P}=L(),x=!n.length,[j,B]=r.useState(""),[v,D]=r.useState(0),[c,z]=r.useState(void 0),[l,H]=r.useState(!1),d=(t,a=!1,I=!1)=>{z(t),H(a),!t&&!a&&!I&&(i==null||i())};return r.useEffect(()=>{if(x)return()=>{};const t=T.requestImage(n,{priority:$,shouldDecode:E,useFetchApi:q});let a;return(async()=>{try{const s=async()=>{const g=await t.response;d(!1),B(g)};if(!!await Promise.race([t.response,new Promise(g=>{a=setTimeout(g,50)})])){await s();return}d(!0),await s()}catch(s){const m=s instanceof Error&&(s.name==="AbortError"||s.message==="Component was unmounted");d(!1,!m,m)}})().catch(()=>{}),()=>{t.cleanup(),clearTimeout(a),t.abortRequest(new Error("Component was unmounted"))}},[n,v]),e.jsxs(e.Fragment,{children:[(c||l)&&e.jsx(A,{sx:{height:"100%",...p},children:e.jsxs(y,{sx:{height:"100%",alignItems:"center",justifyContent:"center"},children:[c&&e.jsx(F,{thickness:5}),l&&c===!1&&e.jsxs(e.Fragment,{children:[e.jsx(w,{}),e.jsx(V,{startIcon:!u&&e.jsx(S,{}),onClick:t=>{t.stopPropagation(),t.preventDefault(),D(a=>(a+1)%100)},size:u?"small":"large",children:u?e.jsx(S,{}):P("global.button.retry")})]})]})}),x?e.jsx(y,{sx:{height:"100%",alignItems:"center",justifyContent:"center",background:t=>t.palette.background.default,...p},children:e.jsx(C,{fontSize:"large"})}):e.jsx("img",{style:{...o,display:!j||c||l?"none":o==null?void 0:o.display},ref:k,src:j,alt:M,draggable:!1},"".concat(n,"_").concat(v))]})});export{Y as S};
