import{D as L,as as O,l as D,bm as _,t as g,bn as P,bo as b,r as A,m as p,g as B}from"./index-yn3QiPzk.js";import{e as c}from"./Strings-CAV0u705.js";var t=(e=>(e.UPDATE="UPDATE",e.UNINSTALL="UNINSTALL",e.INSTALL="INSTALL",e))(t||{}),T=(e=>(e.OBSOLETE="OBSOLETE",e.UPDATING="UPDATING",e.UNINSTALLING="UNINSTALLING",e.INSTALLING="INSTALLING",e))(T||{});const o={...t,...T};var s=(e=>(e.INSTALLED="INSTALLED",e.UPDATE_PENDING="UPDATE_PENDING",e.OBSOLETE="OBSOLETE",e))(s||{});const R={[t.UPDATE]:T.UPDATING,[t.UNINSTALL]:T.UNINSTALLING,[t.INSTALL]:T.INSTALLING},w={[t.UPDATE]:t.UNINSTALL,[t.UNINSTALL]:t.INSTALL,[t.INSTALL]:t.UNINSTALL},M={[o.UNINSTALL]:"extension.action.label.uninstall",[o.INSTALL]:"extension.action.label.install",[o.UPDATE]:"extension.action.label.update",[o.OBSOLETE]:"extension.state.label.obsolete",[o.UPDATING]:"extension.state.label.updating",[o.UNINSTALLING]:"extension.state.label.uninstalling",[o.INSTALLING]:"extension.state.label.installing"},x={[t.UPDATE]:"extension.label.update_failed",[t.INSTALL]:"extension.label.installation_failed",[t.UNINSTALL]:"extension.label.uninstallation_failed"},G={[s.INSTALLED]:"extension.state.label.installed",[s.UPDATE_PENDING]:"extension.state.label.update_pending",[s.OBSOLETE]:"extension.state.label.obsolete",[L.ALL]:"extension.language.all",[L.OTHER]:"extension.language.other",[L.LOCAL_SOURCE]:"extension.language.other",[L.PINNED]:"global.label.pinned",[L.LAST_USED_SOURCE]:"global.label.last_used"},v=(e,l,r)=>l?o.OBSOLETE:r?o.UPDATE:e?o.UNINSTALL:o.INSTALL,f=e=>[s.INSTALLED,s.UPDATE_PENDING,s.OBSOLETE].includes(e),m=e=>[L.PINNED,L.LAST_USED_SOURCE].includes(e),C=e=>f(e)||m(e)||[L.ALL,L.OTHER,L.LOCAL_SOURCE].includes(e),j=e=>C(e)?O(G[e]):D(e);function X(e){const l=Object.groupBy(e,a=>a.isInstalled?a.hasUpdate&&!a.isObsolete?s.UPDATE_PENDING:a.isObsolete?s.OBSOLETE:s.INSTALLED:a.lang);return Object.entries(l).toSorted(([a],[n])=>{const i=Object.values(s),E=i.includes(a),U=s.OBSOLETE===a,S=s.UPDATE_PENDING===a,I=i.includes(n),u=s.OBSOLETE===n,d=s.UPDATE_PENDING===n;return U||E&&!I||S&&!u?-1:u||!E&&I||!S&&d?1:b(a,n)}).map(([a,n])=>[a,(n!=null?n:[]).toSorted((i,E)=>i.name.localeCompare(E.name))]).filter(([,a])=>!!a.length)}const k=e=>[...new Set(e.map(l=>l.lang))],K=(e,{selectedLanguages:l,showNsfw:r,query:N}={})=>{const a=_(g(l!=null?l:[]));return e.filter(n=>!l||a.includes(P(n.lang))||n.isInstalled).filter(n=>r===void 0||r||!n.isNsfw).filter(n=>N==null||c(n.name).includes(c(N)))},F=async(e,l,r)=>{try{switch(r){case t.INSTALL:await A.updateExtension(e,{install:!0,isObsolete:l}).response;break;case t.UNINSTALL:await A.updateExtension(e,{uninstall:!0,isObsolete:l}).response;break;case t.UPDATE:await A.updateExtension(e,{update:!0,isObsolete:l}).response;break;default:throw new Error('Unexpected ExtensionAction "'.concat(r,'"'))}}catch(N){throw p(O(x[r],{count:1}),"error",B(N)),N}};export{T as E,M as I,o as a,t as b,R as c,w as d,k as e,K as f,v as g,X as h,m as i,s as j,x as k,j as t,F as u};
