!function(){function e(t){return e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e(t)}var t=["isBookmarked"],r=["offset"];function n(e){return function(e){if(Array.isArray(e))return o(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return o(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?o(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function a(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function i(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?a(Object(r),!0).forEach(function(t){u(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):a(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function u(e,t,r){return(t=m(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function c(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */var e,t,r="function"==typeof Symbol?Symbol:{},n=r.iterator||"@@iterator",o=r.toStringTag||"@@toStringTag";function a(r,n,o,a){var c=n&&n.prototype instanceof u?n:u,s=Object.create(c.prototype);return l(s,"_invoke",function(r,n,o){var a,u,c,l=0,s=o||[],f=!1,d={p:0,n:0,v:e,a:p,f:p.bind(e,4),d:function(t,r){return a=t,u=0,c=e,d.n=r,i}};function p(r,n){for(u=r,c=n,t=0;!f&&l&&!o&&t<s.length;t++){var o,a=s[t],p=d.p,m=a[2];r>3?(o=m===n)&&(c=a[(u=a[4])?5:(u=3,3)],a[4]=a[5]=e):a[0]<=p&&((o=r<2&&p<a[1])?(u=0,d.v=n,d.n=a[1]):p<m&&(o=r<3||a[0]>n||n>m)&&(a[4]=r,a[5]=n,d.n=m,u=0))}if(o||r>1)return i;throw f=!0,n}return function(o,s,m){if(l>1)throw TypeError("Generator is already running");for(f&&1===s&&p(s,m),u=s,c=m;(t=u<2?e:c)||!f;){a||(u?u<3?(u>1&&(d.n=-1),p(u,c)):d.n=c:d.v=c);try{if(l=2,a){if(u||(o="next"),t=a[o]){if(!(t=t.call(a,c)))throw TypeError("iterator result is not an object");if(!t.done)return t;c=t.value,u<2&&(u=0)}else 1===u&&(t=a.return)&&t.call(a),u<2&&(c=TypeError("The iterator does not provide a '"+o+"' method"),u=1);a=e}else if((t=(f=d.n<0)?c:r.call(n,d))!==i)break}catch(t){a=e,u=1,c=t}finally{l=1}}return{value:t,done:f}}}(r,o,a),!0),s}var i={};function u(){}function s(){}function f(){}t=Object.getPrototypeOf;var d=[][n]?t(t([][n]())):(l(t={},n,function(){return this}),t),p=f.prototype=u.prototype=Object.create(d);function m(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,f):(e.__proto__=f,l(e,o,"GeneratorFunction")),e.prototype=Object.create(p),e}return s.prototype=f,l(p,"constructor",f),l(f,"constructor",s),s.displayName="GeneratorFunction",l(f,o,"GeneratorFunction"),l(p),l(p,o,"Generator"),l(p,n,function(){return this}),l(p,"toString",function(){return"[object Generator]"}),(c=function(){return{w:a,m:m}})()}function l(e,t,r,n){var o=Object.defineProperty;try{o({},"",{})}catch(e){o=0}l=function(e,t,r,n){function a(t,r){l(e,t,function(e){return this._invoke(t,r,e)})}t?o?o(e,t,{value:r,enumerable:!n,configurable:!n,writable:!n}):e[t]=r:(a("next",0),a("throw",1),a("return",2))},l(e,t,r,n)}function s(e,t,r,n,o,a,i){try{var u=e[a](i),c=u.value}catch(e){return void r(e)}u.done?t(c):Promise.resolve(c).then(n,o)}function f(e){return function(){var t=this,r=arguments;return new Promise(function(n,o){var a=e.apply(t,r);function i(e){s(a,n,o,i,u,"next",e)}function u(e){s(a,n,o,i,u,"throw",e)}i(void 0)})}}function d(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(-1!==t.indexOf(n))continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],-1===t.indexOf(r)&&{}.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}function p(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,m(n.key),n)}}function m(t){var r=function(t,r){if("object"!=e(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var o=n.call(t,r||"default");if("object"!=e(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(t)}(t,"string");return"symbol"==e(r)?r:r+""}System.register(["./index-legacy-Ba2A8zU1.js","./DateHelper-legacy-DBEtGbUk.js","./Asserts-legacy-CWE3_MKu.js"],function(e,o){"use strict";var a,u,l,s,m,y,v,b,g,h,k,w,D,O,A,_,C,S,N,j,P,T,E,R;return{setters:[function(e){a=e.bS,u=e.bT,l=e.bU,s=e.bV,m=e.bW,y=e.bX,v=e.bY,b=e.bZ,g=e.b_,h=e.b$,k=e.r,w=e.c0,D=e.A,O=e.c1,A=e.bN,_=e.aF,C=e.G,S=e.m,N=e.g,j=e.c2,P=e.c3},function(e){T=e.g,E=e.e},function(e){R=e.a}],execute:function(){function o(e){var t=u(e.client),r=t.cache,n=e.from,o=l(e,["from"]),a=s.useMemo(function(){return"string"==typeof n?n:null===n?null:r.identify(n)},[r,n]),i=m(function(){return y(y({},o),{from:a})},[o,a]),c=s.useMemo(function(){var e=i.fragment,r=i.fragmentName,n=i.from,o=i.optimistic,a=void 0===o||o;if(null===n)return{result:x({result:{},complete:!1})};var u=t.cache,c=u.diff(y(y({},i),{returnPartialData:!0,id:n,query:u.getFragmentDoc(e,r),optimistic:a}));return{result:x(y(y({},c),{result:t.queryManager.maskFragment({fragment:e,fragmentName:r,data:c.result})}))}},[t,i]),f=s.useCallback(function(){return c.result},[c]);return v(s.useCallback(function(e){var r=0,n=null===i.from?null:t.watchFragment(i).subscribe({next:function(t){b(t,c.result)||(c.result=t,clearTimeout(r),r=setTimeout(e))}});return function(){null==n||n.unsubscribe(),clearTimeout(r)}},[t,i,c]),f,f)}function x(e){var t={data:e.result,complete:!!e.complete};return e.missing&&(t.missing=g(e.missing.map(function(e){return e.missing}))),t}e("F",{id:-1,name:"",realUrl:"",isDownloaded:!1,isBookmarked:!1}),e("D",{unread:void 0,downloaded:void 0,bookmarked:void 0,reverse:!0,sortBy:"source",showChapterNumber:!1,excludedScanlators:[]}),e("c",{source:{id:"b8Yvxe"},chapterNumber:{id:"o9D8Hq"},uploadedAt:{id:"WwJg/z"},fetchedAt:{id:"vN2re/"}});var M=e("b",{download:{always:!1,bulkAction:!1,bulkActionCountForce:300},delete:{always:!0,bulkAction:!0},bookmark:{always:!1,bulkAction:!1},unbookmark:{always:!1,bulkAction:!0},mark_as_read:{always:!1,bulkAction:!0},mark_as_unread:{always:!1,bulkAction:!0}}),F=e("C",{download:{action:{single:{id:"mzI/c+"},selected:{id:"yXQEP/"}},confirmation:{id:"b4+8Zj"},success:{id:"Pw2aAm"},error:{id:"2QbxfQ"}},delete:{action:{single:{id:"cnGeoo"},selected:{id:"QEazml"}},confirmation:{id:"copN8z"},success:{id:"lGdfBe"},error:{id:"bfr371"}},bookmark:{action:{single:{id:"E4VGdA"},selected:{id:"OIAlUV"}},success:{id:"oS+Ars"},error:{id:"JjZGNS"}},unbookmark:{action:{single:{id:"Rk2XFh"},selected:{id:"6e404l"}},confirmation:{id:"elkD2D"},success:{id:"IEf0sL"},error:{id:"dAIceg"}},mark_as_read:{action:{single:{id:"+s1J8k"},selected:{id:"6/1SYX"}},confirmation:{id:"bVVGAK"},success:{id:"Z/MnHr"},error:{id:"+YRP1q"}},mark_as_unread:{action:{single:{id:"5GPcf9"},selected:{id:"KCnt6P"}},confirmation:{id:"iQgME0"},success:{id:"DrEB25"},error:{id:"d5zV3g"}}}),B=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return l=e,s=null,m=[{key:"getIds",value:function(e){return e.map(function(e){return e.id})}},{key:"getFromCache",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:h,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"CHAPTER_LIST_FIELDS";return k.graphQLClient.client.cache.readFragment({id:k.graphQLClient.client.cache.identify({__typename:"ChapterType",id:e}),fragment:t,fragmentName:r})}},{key:"getDownloadStatusFromCache",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:w,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"DOWNLOAD_TYPE_FIELDS";return k.graphQLClient.client.cache.readFragment({id:k.graphQLClient.client.cache.identify({__typename:"DownloadType",chapter:{__ref:k.graphQLClient.client.cache.identify({__typename:"ChapterType",id:e})}}),fragment:t,fragmentName:r})}},{key:"useDownloadStatusFromCache",value:function(e){var t,r,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:w,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"DOWNLOAD_TYPE_FIELDS",c=(r={from:{__typename:"DownloadType",chapter:{__ref:k.graphQLClient.client.cache.identify({__typename:"ChapterType",id:e})}},fragment:n,fragmentName:i,client:k.graphQLClient.client},a("useFragment",o,u(r.client))(r));return c.complete&&Object.keys(null!==(t=c.data)&&void 0!==t?t:{}).length?c.data:null}},{key:"getReaderUrl",value:function(e){return D.reader.path(e.mangaId,e.sourceOrder)}},{key:"isDownloading",value:function(t){var r=[O.Downloading,O.Queued],n=e.getDownloadStatusFromCache(t);return r.includes(null==n?void 0:n.state)}},{key:"isDownloaded",value:function(e){return e.isDownloaded}},{key:"getDownloaded",value:function(t){return t.filter(e.isDownloaded)}},{key:"isDownloadable",value:function(t){var r=e.getDownloadStatusFromCache(t.id);return!(e.isDownloaded(t)||r&&r.state!==O.Error)}},{key:"getDownloadable",value:function(e){return e.filter(this.isDownloadable)}},{key:"isDeletable",value:function(r){var n=r.isBookmarked,o=d(r,t),a=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return e.isDownloaded(o)&&(!n||a)}},{key:"getDeletable",value:function(t,r){return t.filter(function(t){return e.isDeletable(t,r)})}},{key:"isBookmarked",value:function(e){return e.isBookmarked}},{key:"getBookmarked",value:function(t){return t.filter(e.isBookmarked)}},{key:"getNonBookmarked",value:function(t){return t.filter(function(t){return!e.isBookmarked(t)})}},{key:"isRead",value:function(e){return e.isRead}},{key:"getRead",value:function(t){return t.filter(e.isRead)}},{key:"getNonRead",value:function(t){return t.filter(function(t){return!e.isRead(t)})}},{key:"getMatchingChapterNumberChapters",value:function(e,t){return e.map(function(e){var r=t.find(function(t){return e.chapterNumber===t.chapterNumber});return r?[e,r]:null}).filter(function(e){return null!==e})}},{key:"download",value:(L=f(c().m(function t(r,n){return c().w(function(t){for(;;)if(0===t.n)return t.a(2,e.executeAction("download",r.length,function(){return k.addChaptersToDownloadQueue(r).response},n))},t)})),function(e,t){return L.apply(this,arguments)})},{key:"delete",value:(I=f(c().m(function t(r,n){return c().w(function(t){for(;;)if(0===t.n)return t.a(2,e.executeAction("delete",r.length,function(){return k.deleteDownloadedChapters(r).response},n))},t)})),function(e,t){return I.apply(this,arguments)})},{key:"markAsRead",value:(B=f(c().m(function t(r){var n,o,a,i,u,l,s,f,d=arguments;return c().w(function(t){for(;;)switch(t.n){case 0:return n=d.length>1&&void 0!==d[1]&&d[1],o=d.length>2?d[2]:void 0,a=d.length>3?d[3]:void 0,t.n=1,A();case 1:return i=t.v,u=i.deleteChaptersManuallyMarkedRead,l=i.deleteChaptersWithBookmark,s=i.updateProgressManualMarkRead,f=u&&n?e.getIds(e.getDeletable(r,l)):[],t.a(2,e.executeAction("mark_as_read",r.length,function(){return k.updateChapters(e.getIds(r),{isRead:!0,lastPageRead:0,chapterIdsToDelete:f,trackProgressMangaId:s&&n?o:void 0}).response},a))}},t)})),function(e){return B.apply(this,arguments)})},{key:"markAsUnread",value:(x=f(c().m(function t(r,n){return c().w(function(t){for(;;)if(0===t.n)return t.a(2,e.executeAction("mark_as_unread",r.length,function(){return k.updateChapters(r,{isRead:!1}).response},n))},t)})),function(e,t){return x.apply(this,arguments)})},{key:"bookmark",value:(g=f(c().m(function t(r){return c().w(function(t){for(;;)if(0===t.n)return t.a(2,e.executeAction("bookmark",r.length,function(){return k.updateChapters(r,{isBookmarked:!0}).response}))},t)})),function(e){return g.apply(this,arguments)})},{key:"unBookmark",value:(b=f(c().m(function t(r){return c().w(function(t){for(;;)if(0===t.n)return t.a(2,e.executeAction("unbookmark",r.length,function(){return k.updateChapters(r,{isBookmarked:!1}).response}))},t)})),function(e){return b.apply(this,arguments)})},{key:"executeAction",value:(v=f(c().m(function e(t,r,n,o){var a,u,l,s,f,d,p;return c().w(function(e){for(;;)switch(e.p=e.n){case 0:if(a=M[t],u=a.always,l=a.bulkAction,s=a.bulkActionCountForce,f=!o&&(u||l&&r>1)||s&&r>=s,d=F[t].confirmation,e.p=1,!f){e.n=5;break}return R(d),e.p=2,e.n=3,_.show({title:C._({id:"6foA8n"}),message:C.t(i(i({},d),{},{values:{count:r}})),actions:{confirm:{title:C._({id:"aP3N/0"})}}});case 3:e.n=5;break;case 4:return e.p=4,e.v,e.a(2);case 5:return e.n=6,n();case 6:S(C.t(i(i({},F[t].success),{},{values:{count:r}})),"success"),e.n=8;break;case 7:throw e.p=7,p=e.v,S(C.t(i(i({},F[t].error),{},{values:{count:r}})),"error",N(p)),p;case 8:return e.a(2)}},e,null,[[2,4],[1,7]])})),function(e,t,r,n){return v.apply(this,arguments)})},{key:"performAction",value:(y=f(c().m(function t(r,n,o){var a,i,u,l;return c().w(function(t){for(;;)switch(t.n){case 0:a=o.wasManuallyMarkedAsRead,i=o.trackProgressMangaId,u=o.chapters,l=r,t.n="download"===l?1:"delete"===l?2:"mark_as_read"===l?3:"mark_as_unread"===l?4:"bookmark"===l?5:"unbookmark"===l?6:7;break;case 1:return t.a(2,e.download(n));case 2:return t.a(2,e.delete(n));case 3:return t.a(2,e.markAsRead(u,a,i));case 4:return t.a(2,e.markAsUnread(n));case 5:return t.a(2,e.bookmark(n));case 6:return t.a(2,e.unBookmark(n));case 7:throw new Error('Chapters::performAction: unknown action "'.concat(r,'"'));case 8:return t.a(2)}},t)})),function(e,t,r){return y.apply(this,arguments)})},{key:"addDuplicates",value:function(e,t){var r=Object.groupBy(t,function(e){return e.chapterNumber});return e.map(function(e){var t;return null!==(t=r[e.chapterNumber])&&void 0!==t?t:[e]}).flat()}},{key:"removeDuplicates",value:function(e,t){var r=Object.groupBy(t,function(e){return e.chapterNumber}),n=Object.values(r).map(function(t){var r,n;return null!==(r=null!==(n=t.find(function(t){return t.id===e.id}))&&void 0!==n?n:t.findLast(function(t){return t.scanlator===e.scanlator}))&&void 0!==r?r:t.slice(-1)[0]});return t.map(function(e){var t=e.id;return n.find(function(e){return e.id===t})}).filter(function(e){return!!e})}},{key:"getNextChapter",value:function(t,n){var o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=o.offset,u=void 0===a?j.NEXT:a,c=d(o,r),l=e.getNextChapters(t,n,i({offset:u},c)),s=u===j.NEXT,f=s?-1:0,p=s?void 0:1;return l.slice(f,p)[0]}},{key:"getNextChapters",value:function(t,r){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=n.offset,a=void 0===o?j.NEXT:o,i=n.onlyUnread,u=void 0!==i&&i,c=n.skipDupe,l=void 0!==c&&c,s=n.skipDupeChapter,f=void 0===s?t:s,d=r.findIndex(function(e){return e.id===t.id}),p=a===j.NEXT,m=p?0:d,y=p?d+1:void 0,v=r.slice(m,y),b=(l?e.removeDuplicates(f,v):v).toSpliced(p?-1:0,1);return u?e.getNonRead(b):b}},{key:"getReaderResumeMode",value:function(e){return e.isRead?P.START:P.LAST_READ}},{key:"getReaderOpenChapterLocationState",value:function(t,r){return{resumeMode:e.getReaderResumeMode(t),updateInitialChapter:r}}},{key:"groupByDate",value:function(e,t){return Object.groupBy(e,function(e){return T(E(Number(e[t])))})}},{key:"getMissingCount",value:function(t){var r=t.toSorted(function(e,t){return e.chapterNumber-t.chapterNumber});return r.reduce(function(t,n,o){return t+e.getGap(n,r[o-1])},0)}},{key:"getGap",value:function(e,t){if(!e||!t)return 0;if(-1===e.chapterNumber||-1===t.chapterNumber)return 0;var r=Math.max(e.chapterNumber,t.chapterNumber),n=Math.min(e.chapterNumber,t.chapterNumber);return Math.max(0,Math.floor(r)-Math.floor(n)-1)}},{key:"getScanlators",value:function(e){return n(new Set(e.map(function(e){return e.scanlator}).filter(function(e){return"string"==typeof e})))}}],s&&p(l.prototype,s),m&&p(l,m),Object.defineProperty(l,"prototype",{writable:!1}),l;var l,s,m,y,v,b,g,x,B,I,L}();e("a",B)}}})}();
