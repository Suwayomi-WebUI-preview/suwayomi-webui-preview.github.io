import{u as j,c,N as y,W as P,d as _,a as o,j as t,h as E,E as I,k as C,v as N,am as u,U as d}from"./index-DoPHSvD2.js";import{N as T}from"./NumberSetting-CzvgGT8U.js";import{M as L}from"./MutableListSetting-CSo-3sge.js";import{T as M}from"./TextSetting-Ca9pDAOj.js";import{u as U,c as k}from"./metadataServerSettings-BpNSfY5a.js";import{S as m}from"./Switch-D5pRLzor.js";import{T as R}from"./Trans-r-FY9Tuf.js";import"./Info-v3XTjq6g.js";import"./TextField-DNgJoY7o.js";import"./InputAdornment-B_VOiAO2.js";import"./Delete-C-AxNQho.js";import"./PasswordTextField-B7pSaNBf.js";import"./metadata-pNRG_XKl.js";import"./SwitchBase-BW4HniC2.js";const B=e=>({maxSourcesInParallel:e.maxSourcesInParallel,localSourcePath:e.localSourcePath,extensionRepos:e.extensionRepos}),X=()=>{const{t:e}=j(),{setTitle:p,setAction:g}=c.useContext(y);P("settings"),c.useEffect(()=>{p(e("settings.browse.title")),g(null)},[e]);const[i,h]=_("showNsfw",!0),{data:x,loading:S,error:n,refetch:b}=o.useGetServerSettings({notifyOnNetworkStatusChange:!0}),[f]=o.useUpdateServerSettings(),a=(s,w)=>{f({variables:{input:{settings:{[s]:w}}}})},{settings:{hideLibraryEntries:l}}=U(),v=k();if(S)return t.jsx(E,{});if(n)return t.jsx(I,{message:e("global.error.label.failed_to_load_data"),messageExtra:n.message,retry:()=>b().catch(C())});const r=B(x.settings);return t.jsxs(N,{children:[t.jsxs(u,{children:[t.jsx(d,{primary:e("settings.label.hide_library_entries")}),t.jsx(m,{edge:"end",checked:l,onChange:()=>v("hideLibraryEntries",!l)})]}),t.jsxs(u,{children:[t.jsx(d,{primary:e("settings.label.show_nsfw"),secondary:e("settings.label.show_nsfw_description")}),t.jsx(m,{edge:"end",checked:i,onChange:()=>h(!i)})]}),t.jsx(T,{settingTitle:e("settings.server.requests.sources.parallel.label.title"),settingValue:e("settings.server.requests.sources.parallel.label.value",{value:r.maxSourcesInParallel,count:r.maxSourcesInParallel}),valueUnit:e("source.title"),value:r.maxSourcesInParallel,defaultValue:6,minValue:1,maxValue:20,showSlider:!0,stepSize:1,handleUpdate:s=>a("maxSourcesInParallel",s)}),t.jsx(L,{settingName:e("extension.settings.repositories.custom.label.title"),description:e("extension.settings.repositories.custom.label.description"),dialogDisclaimer:t.jsxs(R,{i18nKey:"extension.settings.repositories.custom.label.disclaimer",children:[t.jsx("strong",{children:"Suwayomi does not provide any support for 3rd party repositories or extensions!"}),t.jsx("br",{}),"Use with caution as there could be malicious actors making those repositories.",t.jsx("br",{}),"You as the user need to verify the security and that you trust any repository or extension."]}),handleChange:s=>{a("extensionRepos",s),o.clearExtensionCache()},valueInfos:r.extensionRepos.map(s=>[s]),addItemButtonTitle:e("extension.settings.repositories.custom.dialog.action.button.add"),placeholder:"https://github.com/MY_ACCOUNT/MY_REPO/tree/repo",validateItem:s=>!!s.match(/https:\/\/(www\.|raw\.)?(github|githubusercontent)\.com\/([^/]+)\/([^/]+)((\/tree|\/blob)?\/([^/\n]*))?(\/([^/\n]*\.json)?)?/g),invalidItemError:e("extension.settings.repositories.custom.error.label.invalid_url")}),t.jsx(M,{settingName:e("settings.server.local_source.path.label.title"),dialogDescription:e("settings.server.local_source.path.label.description"),value:r.localSourcePath,handleChange:s=>a("localSourcePath",s)})]})};export{X as BrowseSettings};
