import{b as x,j as i,a1 as F,ae as fe,T as tt,B as pe,I as vt,ax as Dt,aQ as He,aR as Pt,aS as qt,aT as n,au as Yt,u as Ke,aL as Je,p as Ze,aU as Ee,i as st,k as ot,n as nt,q as rt,S as et,H as Ue,o as pt,A as ft,L as bt,N as Qt,r as we,aV as gt,m as le,e as Xt,g as Ve,f as Jt,ay as Zt,aW as es,az as Qe,as as ht}from"./index-B2qmtFS-.js";import{f as kt}from"./file-selector-DlHkLoY8.js";import{P as ts}from"./Progress-DaSdPX7i.js";import{N as Ct}from"./NumberSetting-CbI7vmp1.js";import{c as qe,s as Me,a as ss,u as be,b as Ne,_ as v,d as os,e as ee,f as ce,g as ns,P as rs,C as as,h as Ce,i as Te,j as ge,k as is,l as ls,m as cs,n as at,o as Fe,p as Se,q as us,r as ds,t as Pe,v as it,w as ms,S as ps,x as lt,y as ct,z as fs,A as ut,B as We,D as dt,E as bs,F as It,G as gs,H as ze,I as Vt,J as Ge,M as hs,K as Ae,L as jt,N as Nt,O as Ft,Q as Lt,R as ks,T as Ot,U as Cs,V as Ts,W as xs,X as ws}from"./useMobilePicker-CtT6x5rY.js";import{E as ys}from"./EmptyViewAbsoluteCentered-Z5QyXw2n.js";import{u as Ss}from"./useAppTitle-C6gfSlAE.js";import{C as Ms}from"./CheckboxInput-BiJ4ATpn.js";import{F as vs}from"./FormGroup-qlQrdjiw.js";import{u as Tt}from"./use-window-event-BIEeEPzu.js";import{u as Ds}from"./use-merged-ref-BHCZOaa8.js";import{L as Ps}from"./ListSubheader-DvTAmKEa.js";import"./Slider-BywcBQUy.js";import"./Chip-DQ9GcoVb.js";import"./Checkbox-CaUBEJJQ.js";import"./SwitchBase-CBt3rrZc.js";const Ye=({adapter:e,value:s,timezone:r,props:t})=>{if(s===null)return null;const{minTime:o,maxTime:l,minutesStep:a,shouldDisableTime:c,disableIgnoringDatePartForTimeValidation:d=!1,disablePast:u,disableFuture:k}=t,m=e.date(void 0,r),g=qe(d,e);switch(!0){case!e.isValid(s):return"invalidDate";case!!(o&&g(o,s)):return"minTime";case!!(l&&g(s,l)):return"maxTime";case!!(k&&e.isAfter(s,m)):return"disableFuture";case!!(u&&e.isBefore(s,m)):return"disablePast";case!!(c&&c(s,"hours")):return"shouldDisableTime-hours";case!!(c&&c(s,"minutes")):return"shouldDisableTime-minutes";case!!(c&&c(s,"seconds")):return"shouldDisableTime-seconds";case!!(a&&e.getMinutes(s)%a!==0):return"minutesStep";default:return null}};Ye.valueManager=Me;function Is(e={}){const{enableAccessibleFieldDOMStructure:s=!0,ampm:r}=e;return x.useMemo(()=>({valueType:"time",validator:Ye,internal_valueManager:Me,internal_fieldValueManager:ss,internal_enableAccessibleFieldDOMStructure:s,internal_useApplyDefaultValuesToFieldInternalProps:js,internal_useOpenPickerButtonAriaLabel:Vs(r)}),[r,s])}function Vs(e){return function(r){const t=be(),o=Ne();return x.useMemo(()=>{const l=(e!=null?e:t.is12HourCycleInCurrentLocale())?"fullTime12h":"fullTime24h",a=t.isValid(r)?t.format(r,l):null;return o.openTimePickerDialogue(a)},[r,o,t])}}function js(e){const s=be(),r=At(e),t=x.useMemo(()=>{var o;return(o=e.ampm)!=null?o:s.is12HourCycleInCurrentLocale()},[e.ampm,s]);return x.useMemo(()=>{var o;return v({},e,r,{format:(o=e.format)!=null?o:t?s.formats.fullTime12h:s.formats.fullTime24h})},[e,r,t,s])}function At(e){return x.useMemo(()=>{var s,r;return{disablePast:(s=e.disablePast)!=null?s:!1,disableFuture:(r=e.disableFuture)!=null?r:!1}},[e.disablePast,e.disableFuture])}function Ns(e,s,r){const t=x.useRef(null),o=x.useRef(null),l=x.useCallback(a=>{a&&(o.current&&t.current&&o.current.removeEventListener(e,t.current,r),a.addEventListener(e,s,r),o.current=a,t.current=s)},[e,s,r]);return x.useEffect(()=>()=>{o.current&&t.current&&o.current.removeEventListener(e,t.current,r)},[e,r]),l}const Fs=e=>{const s=Is(e);return os({manager:s,props:e})},Ls=["slots","slotProps","InputProps","inputProps"],Bt=x.forwardRef(function(s,r){const t=ee({props:s,name:"MuiTimeField"}),{slots:o,slotProps:l}=t,a=ce(t,Ls),c=ns({slotProps:l,ref:r,externalForwardedProps:a}),d=Fs(c);return i.jsx(rs,{slots:o,slotProps:l,fieldResponse:d,defaultOpenPickerIcon:as})});function Os(e){return Ce("MuiPickersToolbarText",e)}Te("MuiPickersToolbarText",["root"]);const As=["className","classes","selected","value"],Bs=e=>ge({root:["root"]},Os,e),_s=F(tt,{name:"MuiPickersToolbarText",slot:"Root"})(({theme:e})=>({transition:e.transitions.create("color"),color:(e.vars||e).palette.text.secondary,"&[data-selected]":{color:(e.vars||e).palette.text.primary}})),_t=x.forwardRef(function(s,r){const t=ee({props:s,name:"MuiPickersToolbarText"}),{className:o,classes:l,selected:a,value:c}=t,d=ce(t,As),u=Bs(l);return i.jsx(_s,v({ref:r,className:fe(u.root,o),component:"span",ownerState:t},a&&{"data-selected":!0},d,{children:c}))}),Rs=["align","className","classes","selected","typographyClassName","value","variant","width"],Es=e=>ge({root:["root"]},is,e),$s=F(pe,{name:"MuiPickersToolbarButton",slot:"Root"})({padding:0,minWidth:16,textTransform:"none"}),Le=x.forwardRef(function(s,r){const t=ee({props:s,name:"MuiPickersToolbarButton"}),{align:o,className:l,classes:a,selected:c,typographyClassName:d,value:u,variant:k,width:m}=t,g=ce(t,Rs),b=Es(a);return i.jsx($s,v({variant:"text",ref:r,className:fe(b.root,l),ownerState:t},m?{sx:{width:m}}:{},g,{children:i.jsx(_t,{align:o,className:d,variant:k,value:u,selected:c})}))});function Hs(e){return Ce("MuiTimePickerToolbar",e)}const Oe=Te("MuiTimePickerToolbar",["root","separator","hourMinuteLabel","hourMinuteLabelLandscape","hourMinuteLabelReverse","ampmSelection","ampmLandscape","ampmLabel"]),Us=["ampm","ampmInClock","className","classes"],Ws=(e,s)=>{const{pickerOrientation:r,toolbarDirection:t}=s;return ge({root:["root"],separator:["separator"],hourMinuteLabel:["hourMinuteLabel",r==="landscape"&&"hourMinuteLabelLandscape",t==="rtl"&&"hourMinuteLabelReverse"],ampmSelection:["ampmSelection",r==="landscape"&&"ampmLandscape"],ampmLabel:["ampmLabel"]},Hs,e)},zs=F(us,{name:"MuiTimePickerToolbar",slot:"Root"})({}),Gs=F(_t,{name:"MuiTimePickerToolbar",slot:"Separator"})({outline:0,margin:"0 4px 0 2px",cursor:"default"}),Ks=F("div",{name:"MuiTimePickerToolbar",slot:"HourMinuteLabel",overridesResolver:(e,s)=>[{["&.".concat(Oe.hourMinuteLabelLandscape)]:s.hourMinuteLabelLandscape,["&.".concat(Oe.hourMinuteLabelReverse)]:s.hourMinuteLabelReverse},s.hourMinuteLabel]})({display:"flex",justifyContent:"flex-end",alignItems:"flex-end",variants:[{props:{toolbarDirection:"rtl"},style:{flexDirection:"row-reverse"}},{props:{pickerOrientation:"landscape"},style:{marginTop:"auto"}}]}),qs=F("div",{name:"MuiTimePickerToolbar",slot:"AmPmSelection",overridesResolver:(e,s)=>[{[".".concat(Oe.ampmLabel)]:s.ampmLabel},{["&.".concat(Oe.ampmLandscape)]:s.ampmLandscape},s.ampmSelection]})({display:"flex",flexDirection:"column",marginRight:"auto",marginLeft:12,["& .".concat(Oe.ampmLabel)]:{fontSize:17},variants:[{props:{pickerOrientation:"landscape"},style:{margin:"4px 0 auto",flexDirection:"row",justifyContent:"space-around",flexBasis:"100%"}}]});function Ys(e){const s=ee({props:e,name:"MuiTimePickerToolbar"}),{ampm:r,ampmInClock:t,className:o,classes:l}=s,a=ce(s,Us),c=be(),d=Ne(),u=ls(),k=Ws(l,u),{value:m,setValue:g,disabled:b,readOnly:C,view:w,setView:P,views:I}=cs(),D=!!(r&&!t&&I.includes("hours")),{meridiemMode:N,handleMeridiemChange:p}=at(m,r,V=>g(V,{changeImportance:"set"})),S=V=>c.isValid(m)?c.format(m,V):"--",j=i.jsx(Gs,{tabIndex:-1,value:":",variant:"h3",selected:!1,className:k.separator});return i.jsxs(zs,v({landscapeDirection:"row",toolbarTitle:d.timePickerToolbarTitle,ownerState:u,className:fe(k.root,o)},a,{children:[i.jsxs(Ks,{className:k.hourMinuteLabel,ownerState:u,children:[Fe(I,"hours")&&i.jsx(Le,{tabIndex:-1,variant:"h3",onClick:()=>P("hours"),selected:w==="hours",value:S(r?"hours12h":"hours24h")}),Fe(I,["hours","minutes"])&&j,Fe(I,"minutes")&&i.jsx(Le,{tabIndex:-1,variant:"h3",onClick:()=>P("minutes"),selected:w==="minutes",value:S("minutes")}),Fe(I,["minutes","seconds"])&&j,Fe(I,"seconds")&&i.jsx(Le,{variant:"h3",onClick:()=>P("seconds"),selected:w==="seconds",value:S("seconds")})]}),D&&i.jsxs(qs,{className:k.ampmSelection,ownerState:u,children:[i.jsx(Le,{disableRipple:!0,variant:"subtitle2",selected:N==="am",typographyClassName:k.ampmLabel,value:Se(c,"am"),onClick:C?void 0:()=>p("am"),disabled:b}),i.jsx(Le,{disableRipple:!0,variant:"subtitle2",selected:N==="pm",typographyClassName:k.ampmLabel,value:Se(c,"pm"),onClick:C?void 0:()=>p("pm"),disabled:b})]})]}))}function Rt(e,s){var c,d;const r=be(),t=ee({props:e,name:s}),o=At(t),l=(c=t.ampm)!=null?c:r.is12HourCycleInCurrentLocale(),a=x.useMemo(()=>{var u;return((u=t.localeText)==null?void 0:u.toolbarTitle)==null?t.localeText:v({},t.localeText,{timePickerToolbarTitle:t.localeText.toolbarTitle})},[t.localeText]);return v({},t,o,{ampm:l,localeText:a},ds({views:t.views,openTo:t.openTo,defaultViews:["hours","minutes"],defaultOpenTo:"hours"}),{slots:v({toolbar:Ys},t.slots),slotProps:v({},t.slotProps,{toolbar:v({ampm:l,ampmInClock:t.ampmInClock},(d=t.slotProps)==null?void 0:d.toolbar)})})}function Qs(e){return Ce("MuiTimeClock",e)}Te("MuiTimeClock",["root","arrowSwitcher"]);const je=220,ke=36,Be={x:je/2,y:je/2},Et={x:Be.x,y:0},Xs=Et.x-Be.x,Js=Et.y-Be.y,Zs=e=>e*(180/Math.PI),$t=(e,s,r)=>{const t=s-Be.x,o=r-Be.y,l=Math.atan2(Xs,Js)-Math.atan2(t,o);let a=Zs(l);a=Math.round(a/e)*e,a%=360;const c=Math.floor(a/e)||0,d=t**2+o**2,u=Math.sqrt(d);return{value:c,distance:u}},eo=(e,s,r=1)=>{const t=r*6;let{value:o}=$t(t,e,s);return o=o*r%60,o},to=(e,s,r)=>{const{value:t,distance:o}=$t(30,e,s);let l=t||12;return r?l%=12:o<je/2-ke&&(l+=12,l%=24),l};function so(e){return Ce("MuiClockPointer",e)}Te("MuiClockPointer",["root","thumb"]);const oo=["className","classes","isBetweenTwoClockValues","isInner","type","viewValue"],no=e=>ge({root:["root"],thumb:["thumb"]},so,e),ro=F("div",{name:"MuiClockPointer",slot:"Root"})(({theme:e})=>({width:2,backgroundColor:(e.vars||e).palette.primary.main,position:"absolute",left:"calc(50% - 1px)",bottom:"50%",transformOrigin:"center bottom 0px",variants:[{props:{isClockPointerAnimated:!0},style:{transition:e.transitions.create(["transform","height"])}}]})),ao=F("div",{name:"MuiClockPointer",slot:"Thumb"})(({theme:e})=>({width:4,height:4,backgroundColor:(e.vars||e).palette.primary.contrastText,borderRadius:"50%",position:"absolute",top:-21,left:"calc(50% - ".concat(ke/2,"px)"),border:"".concat((ke-4)/2,"px solid ").concat((e.vars||e).palette.primary.main),boxSizing:"content-box",variants:[{props:{isClockPointerBetweenTwoValues:!1},style:{backgroundColor:(e.vars||e).palette.primary.main}}]}));function io(e){const s=ee({props:e,name:"MuiClockPointer"}),{className:r,classes:t,isBetweenTwoClockValues:o,isInner:l,type:a,viewValue:c}=s,d=ce(s,oo),u=x.useRef(a);x.useEffect(()=>{u.current=a},[a]);const{ownerState:k}=Pe(),m=v({},k,{isClockPointerAnimated:u.current!==a,isClockPointerBetweenTwoValues:o}),g=no(t),b=()=>{let w=360/(a==="hours"?12:60)*c;return a==="hours"&&c>12&&(w-=360),{height:Math.round((l?.26:.4)*je),transform:"rotateZ(".concat(w,"deg)")}};return i.jsx(ro,v({style:b(),className:fe(g.root,r),ownerState:m},d,{children:i.jsx(ao,{ownerState:m,className:g.thumb})}))}function lo(e){return Ce("MuiClock",e)}Te("MuiClock",["root","clock","wrapper","squareMask","pin","amButton","pmButton","meridiemText","selected"]);const co=(e,s)=>{const r={root:["root"],clock:["clock"],wrapper:["wrapper"],squareMask:["squareMask"],pin:["pin"],amButton:["amButton",s.clockMeridiemMode==="am"&&"selected"],pmButton:["pmButton",s.clockMeridiemMode==="pm"&&"selected"],meridiemText:["meridiemText"]};return ge(r,lo,e)},uo=F("div",{name:"MuiClock",slot:"Root"})(({theme:e})=>({display:"flex",justifyContent:"center",alignItems:"center",margin:e.spacing(2)})),mo=F("div",{name:"MuiClock",slot:"Clock"})({backgroundColor:"rgba(0,0,0,.07)",borderRadius:"50%",height:220,width:220,flexShrink:0,position:"relative",pointerEvents:"none"}),po=F("div",{name:"MuiClock",slot:"Wrapper"})({"&:focus":{outline:"none"}}),fo=F("div",{name:"MuiClock",slot:"SquareMask"})({width:"100%",height:"100%",position:"absolute",pointerEvents:"auto",outline:0,touchAction:"none",userSelect:"none",variants:[{props:{isClockDisabled:!1},style:{"@media (pointer: fine)":{cursor:"pointer",borderRadius:"50%"},"&:active":{cursor:"move"}}}]}),bo=F("div",{name:"MuiClock",slot:"Pin"})(({theme:e})=>({width:6,height:6,borderRadius:"50%",backgroundColor:(e.vars||e).palette.primary.main,position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)"})),Ht=(e,s)=>({zIndex:1,bottom:8,paddingLeft:4,paddingRight:4,width:ke,variants:[{props:{clockMeridiemMode:s},style:{backgroundColor:(e.vars||e).palette.primary.main,color:(e.vars||e).palette.primary.contrastText,"&:hover":{backgroundColor:(e.vars||e).palette.primary.light}}}]}),go=F(vt,{name:"MuiClock",slot:"AmButton"})(({theme:e})=>v({},Ht(e,"am"),{position:"absolute",left:8})),ho=F(vt,{name:"MuiClock",slot:"PmButton"})(({theme:e})=>v({},Ht(e,"pm"),{position:"absolute",right:8})),xt=F(tt,{name:"MuiClock",slot:"MeridiemText"})({overflow:"hidden",whiteSpace:"nowrap",textOverflow:"ellipsis"});function ko(e){const s=ee({props:e,name:"MuiClock"}),{ampm:r,ampmInClock:t,autoFocus:o,children:l,value:a,handleMeridiemChange:c,isTimeDisabled:d,meridiemMode:u,minutesStep:k=1,onChange:m,selectedId:g,type:b,viewValue:C,viewRange:[w,P],disabled:I=!1,readOnly:D,className:N,classes:p}=s,S=be(),j=Ne(),{ownerState:V}=Pe(),L=v({},V,{isClockDisabled:I,clockMeridiemMode:u}),A=x.useRef(!1),y=co(p,L),B=d(C,b),Q=!r&&b==="hours"&&(C<1||C>12),R=(h,ae)=>{I||D||d(h,b)||m(h,ae)},_=(h,ae)=>{let{offsetX:U,offsetY:se}=h;if(U===void 0){const oe=h.target.getBoundingClientRect();U=h.changedTouches[0].clientX-oe.left,se=h.changedTouches[0].clientY-oe.top}const Z=b==="seconds"||b==="minutes"?eo(U,se,k):to(U,se,!!r);R(Z,ae)},ue=h=>{A.current=!0,_(h,"shallow")},te=h=>{A.current&&(_(h,"finish"),A.current=!1),h.preventDefault()},ve=h=>{h.buttons>0&&_(h.nativeEvent,"shallow")},de=h=>{A.current&&(A.current=!1),_(h.nativeEvent,"finish")},J=b==="hours"?!1:C%5!==0,he=b==="minutes"?k:1,O=x.useRef(null);it(()=>{o&&O.current.focus()},[o]);const $=h=>Math.max(w,Math.min(P,h)),K=h=>(h+(P+1))%(P+1),q=h=>{if(!A.current)switch(h.key){case"Home":R(w,"partial"),h.preventDefault();break;case"End":R(P,"partial"),h.preventDefault();break;case"ArrowUp":R(K(C+he),"partial"),h.preventDefault();break;case"ArrowDown":R(K(C-he),"partial"),h.preventDefault();break;case"PageUp":R($(C+5),"partial"),h.preventDefault();break;case"PageDown":R($(C-5),"partial"),h.preventDefault();break;case"Enter":case" ":R(C,"finish"),h.preventDefault();break}};return i.jsxs(uo,{className:fe(y.root,N),children:[i.jsxs(mo,{className:y.clock,children:[i.jsx(fo,{onTouchMove:ue,onTouchStart:ue,onTouchEnd:te,onMouseUp:de,onMouseMove:ve,ownerState:L,className:y.squareMask}),!B&&i.jsxs(x.Fragment,{children:[i.jsx(bo,{className:y.pin}),a!=null&&i.jsx(io,{type:b,viewValue:C,isInner:Q,isBetweenTwoClockValues:J})]}),i.jsx(po,{"aria-activedescendant":g,"aria-label":j.clockLabelText(b,a==null?null:S.format(a,r?"fullTime12h":"fullTime24h")),ref:O,role:"listbox",onKeyDown:q,tabIndex:0,className:y.wrapper,children:l})]}),r&&t&&i.jsxs(x.Fragment,{children:[i.jsx(go,{onClick:D?void 0:()=>c("am"),disabled:I||u===null,ownerState:L,className:y.amButton,title:Se(S,"am"),children:i.jsx(xt,{variant:"caption",className:y.meridiemText,children:Se(S,"am")})}),i.jsx(ho,{disabled:I||u===null,onClick:D?void 0:()=>c("pm"),ownerState:L,className:y.pmButton,title:Se(S,"pm"),children:i.jsx(xt,{variant:"caption",className:y.meridiemText,children:Se(S,"pm")})})]})]})}function Co(e){return Ce("MuiClockNumber",e)}const $e=Te("MuiClockNumber",["root","selected","disabled"]),To=["className","classes","disabled","index","inner","label","selected"],xo=(e,s)=>{const r={root:["root",s.isClockNumberSelected&&"selected",s.isClockNumberDisabled&&"disabled"]};return ge(r,Co,e)},wo=F("span",{name:"MuiClockNumber",slot:"Root",overridesResolver:(e,s)=>[s.root,{["&.".concat($e.disabled)]:s.disabled},{["&.".concat($e.selected)]:s.selected}]})(({theme:e})=>({height:ke,width:ke,position:"absolute",left:"calc((100% - ".concat(ke,"px) / 2)"),display:"inline-flex",justifyContent:"center",alignItems:"center",borderRadius:"50%",color:(e.vars||e).palette.text.primary,fontFamily:e.typography.fontFamily,"&:focused":{backgroundColor:(e.vars||e).palette.background.paper},["&.".concat($e.selected)]:{color:(e.vars||e).palette.primary.contrastText},["&.".concat($e.disabled)]:{pointerEvents:"none",color:(e.vars||e).palette.text.disabled},variants:[{props:{isClockNumberInInnerRing:!0},style:v({},e.typography.body2,{color:(e.vars||e).palette.text.secondary})}]}));function Ut(e){const s=ee({props:e,name:"MuiClockNumber"}),{className:r,classes:t,disabled:o,index:l,inner:a,label:c,selected:d}=s,u=ce(s,To),{ownerState:k}=Pe(),m=v({},k,{isClockNumberInInnerRing:a,isClockNumberSelected:d,isClockNumberDisabled:o}),g=xo(t,m),b=l%12/12*Math.PI*2-Math.PI/2,C=(je-ke-2)/2*(a?.65:1),w=Math.round(Math.cos(b)*C),P=Math.round(Math.sin(b)*C);return i.jsx(wo,v({className:fe(g.root,r),"aria-disabled":o?!0:void 0,"aria-selected":d?!0:void 0,role:"option",style:{transform:"translate(".concat(w,"px, ").concat(P+(je-ke)/2,"px")},ownerState:m},u,{children:c}))}const yo=({ampm:e,value:s,getClockNumberText:r,isDisabled:t,selectedId:o,adapter:l})=>{const a=s?l.getHours(s):null,c=[],d=e?1:0,u=e?12:23,k=m=>a===null?!1:e?m===12?a===12||a===0:a===m||a-12===m:a===m;for(let m=d;m<=u;m+=1){let g=m.toString();m===0&&(g="00");const b=!e&&(m===0||m>12);g=l.formatNumber(g);const C=k(m);c.push(i.jsx(Ut,{id:C?o:void 0,index:m,inner:b,selected:C,disabled:t(m),label:g,"aria-label":r(g)},m))}return c},wt=({adapter:e,value:s,isDisabled:r,getClockNumberText:t,selectedId:o})=>{const l=e.formatNumber;return[[5,l("05")],[10,l("10")],[15,l("15")],[20,l("20")],[25,l("25")],[30,l("30")],[35,l("35")],[40,l("40")],[45,l("45")],[50,l("50")],[55,l("55")],[0,l("00")]].map(([a,c],d)=>{const u=a===s;return i.jsx(Ut,{label:c,id:u?o:void 0,index:d+1,inner:!1,disabled:r(a),selected:u,"aria-label":t(c)},a)})},mt=({value:e,referenceDate:s,adapter:r,props:t,timezone:o})=>{const l=x.useMemo(()=>Me.getInitialReferenceValue({value:e,adapter:r,props:t,referenceDate:s,granularity:ps.day,timezone:o,getTodayDate:()=>ms(r,o,"date")}),[s,o]);return e!=null?e:l},So=["ampm","ampmInClock","autoFocus","slots","slotProps","value","defaultValue","referenceDate","disableIgnoringDatePartForTimeValidation","maxTime","minTime","disableFuture","disablePast","minutesStep","shouldDisableTime","showViewSwitcher","onChange","view","views","openTo","onViewChange","focusedView","onFocusedViewChange","className","classes","disabled","readOnly","timezone"],Mo=e=>ge({root:["root"],arrowSwitcher:["arrowSwitcher"]},Qs,e),vo=F(dt,{name:"MuiTimeClock",slot:"Root"})({display:"flex",flexDirection:"column",position:"relative"}),Do=F(bs,{name:"MuiTimeClock",slot:"ArrowSwitcher"})({position:"absolute",right:12,top:15}),Po=["hours","minutes"],Io=x.forwardRef(function(s,r){const t=be(),o=ee({props:s,name:"MuiTimeClock"}),{ampm:l=t.is12HourCycleInCurrentLocale(),ampmInClock:a=!1,autoFocus:c,slots:d,slotProps:u,value:k,defaultValue:m,referenceDate:g,disableIgnoringDatePartForTimeValidation:b=!1,maxTime:C,minTime:w,disableFuture:P,disablePast:I,minutesStep:D=1,shouldDisableTime:N,showViewSwitcher:p,onChange:S,view:j,views:V=Po,openTo:L,onViewChange:A,focusedView:y,onFocusedViewChange:B,className:Q,classes:R,disabled:_,readOnly:ue,timezone:te}=o,ve=ce(o,So),{value:de,handleValueChange:J,timezone:he}=lt({name:"TimeClock",timezone:te,value:k,defaultValue:m,referenceDate:g,onChange:S,valueManager:Me}),O=mt({value:de,referenceDate:g,adapter:t,props:o,timezone:he}),$=Ne(),K=ct(he),q=fs(),{ownerState:h}=Pe(),{view:ae,setView:U,previousView:se,nextView:Z,setValueAndGoToNextView:oe}=ut({view:j,views:V,openTo:L,onViewChange:A,onChange:J,focusedView:y,onFocusedViewChange:B}),{meridiemMode:ne,handleMeridiemChange:re}=at(O,l,oe),me=x.useCallback((z,Y)=>{const H=qe(b,t),X=Y==="hours"||Y==="minutes"&&V.includes("seconds"),f=({start:M,end:E})=>!(w&&H(w,E)||C&&H(M,C)||P&&H(M,K)||I&&H(K,X?E:M)),T=(M,E=1)=>{if(M%E!==0)return!1;if(N)switch(Y){case"hours":return!N(t.setHours(O,M),"hours");case"minutes":return!N(t.setMinutes(O,M),"minutes");case"seconds":return!N(t.setSeconds(O,M),"seconds");default:return!1}return!0};switch(Y){case"hours":{const M=We(z,ne,l),E=t.setHours(O,M);if(t.getHours(E)!==M)return!0;const G=t.setSeconds(t.setMinutes(E,0),0),Ie=t.setSeconds(t.setMinutes(E,59),59);return!f({start:G,end:Ie})||!T(M)}case"minutes":{const M=t.setMinutes(O,z),E=t.setSeconds(M,0),G=t.setSeconds(M,59);return!f({start:E,end:G})||!T(z,D)}case"seconds":{const M=t.setSeconds(O,z);return!f({start:M,end:M})||!T(z)}default:throw new Error("not supported")}},[l,O,b,C,ne,w,D,N,t,P,I,K,V]),xe=x.useMemo(()=>{switch(ae){case"hours":{const z=(X,f)=>{const T=We(X,ne,l);oe(t.setHours(O,T),f,"hours")},Y=t.getHours(O);let H;return l?Y>12?H=[12,23]:H=[0,11]:H=[0,23],{onChange:z,viewValue:Y,children:yo({value:de,adapter:t,ampm:l,getClockNumberText:$.hoursClockNumberText,isDisabled:X=>_||me(X,"hours"),selectedId:q}),viewRange:H}}case"minutes":{const z=t.getMinutes(O);return{viewValue:z,onChange:(H,X)=>{oe(t.setMinutes(O,H),X,"minutes")},children:wt({adapter:t,value:z,getClockNumberText:$.minutesClockNumberText,isDisabled:H=>_||me(H,"minutes"),selectedId:q}),viewRange:[0,59]}}case"seconds":{const z=t.getSeconds(O);return{viewValue:z,onChange:(H,X)=>{oe(t.setSeconds(O,H),X,"seconds")},children:wt({adapter:t,value:z,getClockNumberText:$.secondsClockNumberText,isDisabled:H=>_||me(H,"seconds"),selectedId:q}),viewRange:[0,59]}}default:throw new Error("You must provide the type for ClockView")}},[ae,t,de,l,$.hoursClockNumberText,$.minutesClockNumberText,$.secondsClockNumberText,ne,oe,O,me,q,_]),De=Mo(R);return i.jsxs(vo,v({ref:r,className:fe(De.root,Q),ownerState:h},ve,{children:[i.jsx(ko,v({autoFocus:c!=null?c:!!y,ampmInClock:a&&V.includes("hours"),value:de,type:ae,ampm:l,minutesStep:D,isTimeDisabled:me,meridiemMode:ne,handleMeridiemChange:re,selectedId:q,disabled:_,readOnly:ue},xe)),p&&i.jsx(Do,{className:De.arrowSwitcher,slots:d,slotProps:u,onGoToPrevious:()=>U(se),isPreviousDisabled:!se,previousLabel:$.openPreviousView,onGoToNext:()=>U(Z),isNextDisabled:!Z,nextLabel:$.openNextView,ownerState:h})]}))});function Vo(e){return Ce("MuiDigitalClock",e)}Te("MuiDigitalClock",["root","list","item"]);const jo=["ampm","timeStep","autoFocus","slots","slotProps","value","defaultValue","referenceDate","disableIgnoringDatePartForTimeValidation","maxTime","minTime","disableFuture","disablePast","minutesStep","shouldDisableTime","onChange","view","openTo","onViewChange","focusedView","onFocusedViewChange","className","classes","disabled","readOnly","views","skipDisabled","timezone"],No=e=>ge({root:["root"],list:["list"],item:["item"]},Vo,e),Fo=F(dt,{name:"MuiDigitalClock",slot:"Root"})({overflowY:"auto",width:"100%",scrollbarWidth:"thin","@media (prefers-reduced-motion: no-preference)":{scrollBehavior:"auto"},maxHeight:Vt,variants:[{props:{hasDigitalClockAlreadyBeenRendered:!0},style:{"@media (prefers-reduced-motion: no-preference)":{scrollBehavior:"smooth"}}}]}),Lo=F(Pt,{name:"MuiDigitalClock",slot:"List"})({padding:0}),Oo=F(Dt,{name:"MuiDigitalClock",slot:"Item",shouldForwardProp:e=>e!=="itemValue"&&e!=="formattedValue"})(({theme:e})=>({padding:"8px 16px",margin:"2px 4px","&:first-of-type":{marginTop:4},"&:hover":{backgroundColor:e.vars?"rgba(".concat(e.vars.palette.primary.mainChannel," / ").concat(e.vars.palette.action.hoverOpacity,")"):He(e.palette.primary.main,e.palette.action.hoverOpacity)},"&.Mui-selected":{backgroundColor:(e.vars||e).palette.primary.main,color:(e.vars||e).palette.primary.contrastText,"&:focus-visible, &:hover":{backgroundColor:(e.vars||e).palette.primary.dark}},"&.Mui-focusVisible":{backgroundColor:e.vars?"rgba(".concat(e.vars.palette.primary.mainChannel," / ").concat(e.vars.palette.action.focusOpacity,")"):He(e.palette.primary.main,e.palette.action.focusOpacity)}})),Ao=x.forwardRef(function(s,r){var X;const t=be(),o=x.useRef(null),l=It(r,o),a=x.useRef(null),c=ee({props:s,name:"MuiDigitalClock"}),{ampm:d=t.is12HourCycleInCurrentLocale(),timeStep:u=30,autoFocus:k,slots:m,slotProps:g,value:b,defaultValue:C,referenceDate:w,disableIgnoringDatePartForTimeValidation:P=!1,maxTime:I,minTime:D,disableFuture:N,disablePast:p,minutesStep:S=1,shouldDisableTime:j,onChange:V,view:L,openTo:A,onViewChange:y,focusedView:B,onFocusedViewChange:Q,className:R,classes:_,disabled:ue,readOnly:te,views:ve=["hours"],skipDisabled:de=!1,timezone:J}=c,he=ce(c,jo),{value:O,handleValueChange:$,timezone:K}=lt({name:"DigitalClock",timezone:J,value:b,defaultValue:C,referenceDate:w,onChange:V,valueManager:Me}),q=Ne(),h=ct(K),{ownerState:ae}=Pe(),U=v({},ae,{hasDigitalClockAlreadyBeenRendered:!!o.current}),se=No(_),Z=(X=m==null?void 0:m.digitalClockItem)!=null?X:Oo,oe=gs({elementType:Z,externalSlotProps:g==null?void 0:g.digitalClockItem,ownerState:U,className:se.item}),ne=mt({value:O,referenceDate:w,adapter:t,props:c,timezone:K}),re=ze(f=>$(f,"finish","hours")),{setValueAndGoToNextView:me}=ut({view:L,views:ve,openTo:A,onViewChange:y,onChange:re,focusedView:B,onFocusedViewChange:Q}),xe=ze(f=>{me(f,"finish")});it(()=>{if(o.current===null)return;const f=o.current.querySelector('[role="listbox"] [role="option"][tabindex="0"], [role="listbox"] [role="option"][aria-selected="true"]');if(!f)return;const T=f.offsetTop;(k||B)&&f.focus(),o.current.scrollTop=T-4});const De=x.useCallback(f=>{const T=qe(P,t),M=()=>!(D&&T(D,f)||I&&T(f,I)||N&&T(f,h)||p&&T(h,f)),E=()=>t.getMinutes(f)%S!==0?!1:j?!j(f,"hours"):!0;return!M()||!E()},[P,t,D,I,N,h,p,S,j]),z=x.useMemo(()=>{const f=[];let M=t.startOfDay(ne);for(;t.isSameDay(ne,M);)f.push(M),M=t.addMinutes(M,u);return f},[ne,u,t]),Y=z.findIndex(f=>t.isEqual(f,ne)),H=f=>{switch(f.key){case"PageUp":{const T=Ge(a.current)-5,M=a.current.children,E=Math.max(0,T),G=M[E];G&&G.focus(),f.preventDefault();break}case"PageDown":{const T=Ge(a.current)+5,M=a.current.children,E=Math.min(M.length-1,T),G=M[E];G&&G.focus(),f.preventDefault();break}}};return i.jsx(Fo,v({ref:l,className:fe(se.root,R),ownerState:U},he,{children:i.jsx(Lo,{ref:a,role:"listbox","aria-label":q.timePickerToolbarTitle,className:se.list,onKeyDown:H,children:z.map((f,T)=>{const M=De(f);if(de&&M)return null;const E=t.isEqual(f,O),G=t.format(f,d?"fullTime12h":"fullTime24h"),W=Y===T||Y===-1&&T===0?0:-1;return i.jsx(Z,v({onClick:()=>!te&&xe(f),selected:E,disabled:ue||M,disableRipple:te,role:"option","aria-disabled":te,"aria-selected":E,tabIndex:W,itemValue:f,formattedValue:G},oe,{children:G}),"".concat(f.valueOf(),"-").concat(G))})})}))});function Bo(e){return Ce("MuiMultiSectionDigitalClock",e)}Te("MuiMultiSectionDigitalClock",["root"]);function _o(e){return Ce("MuiMultiSectionDigitalClockSection",e)}Te("MuiMultiSectionDigitalClockSection",["root","item"]);const Ro=["autoFocus","onChange","className","classes","disabled","readOnly","items","active","slots","slotProps","skipDisabled"],Eo=e=>ge({root:["root"],item:["item"]},_o,e),$o=F(Pt,{name:"MuiMultiSectionDigitalClockSection",slot:"Root"})(({theme:e})=>({maxHeight:Vt,width:56,padding:0,overflow:"hidden",scrollbarWidth:"thin","@media (prefers-reduced-motion: no-preference)":{scrollBehavior:"auto"},"@media (pointer: fine)":{"&:hover":{overflowY:"auto"}},"@media (pointer: none), (pointer: coarse)":{overflowY:"auto"},"&:not(:first-of-type)":{borderLeft:"1px solid ".concat((e.vars||e).palette.divider)},"&::after":{display:"block",content:'""',height:"calc(100% - 40px - 6px)"},variants:[{props:{hasDigitalClockAlreadyBeenRendered:!0},style:{"@media (prefers-reduced-motion: no-preference)":{scrollBehavior:"smooth"}}}]})),Ho=F(Dt,{name:"MuiMultiSectionDigitalClockSection",slot:"Item"})(({theme:e})=>({padding:8,margin:"2px 4px",width:hs,justifyContent:"center","&:first-of-type":{marginTop:4},"&:hover":{backgroundColor:e.vars?"rgba(".concat(e.vars.palette.primary.mainChannel," / ").concat(e.vars.palette.action.hoverOpacity,")"):He(e.palette.primary.main,e.palette.action.hoverOpacity)},"&.Mui-selected":{backgroundColor:(e.vars||e).palette.primary.main,color:(e.vars||e).palette.primary.contrastText,"&:focus-visible, &:hover":{backgroundColor:(e.vars||e).palette.primary.dark}},"&.Mui-focusVisible":{backgroundColor:e.vars?"rgba(".concat(e.vars.palette.primary.mainChannel," / ").concat(e.vars.palette.action.focusOpacity,")"):He(e.palette.primary.main,e.palette.action.focusOpacity)}})),Uo=x.forwardRef(function(s,r){var A;const t=x.useRef(null),o=It(r,t),l=x.useRef(null),a=ee({props:s,name:"MuiMultiSectionDigitalClockSection"}),{autoFocus:c,onChange:d,className:u,classes:k,disabled:m,readOnly:g,items:b,active:C,slots:w,slotProps:P,skipDisabled:I}=a,D=ce(a,Ro),{ownerState:N}=Pe(),p=v({},N,{hasDigitalClockAlreadyBeenRendered:!!t.current}),S=Eo(k),j=(A=w==null?void 0:w.digitalClockSectionItem)!=null?A:Ho;it(()=>{if(t.current===null)return;const y=t.current.querySelector('[role="option"][tabindex="0"], [role="option"][aria-selected="true"]');if(C&&c&&y&&y.focus(),!y||l.current===y)return;l.current=y;const B=y.offsetTop;t.current.scrollTop=B-4});const V=b.findIndex(y=>y.isFocused(y.value)),L=y=>{switch(y.key){case"PageUp":{const B=Ge(t.current)-5,Q=t.current.children,R=Math.max(0,B),_=Q[R];_&&_.focus(),y.preventDefault();break}case"PageDown":{const B=Ge(t.current)+5,Q=t.current.children,R=Math.min(Q.length-1,B),_=Q[R];_&&_.focus(),y.preventDefault();break}}};return i.jsx($o,v({ref:o,className:fe(S.root,u),ownerState:p,autoFocusItem:c&&C,role:"listbox",onKeyDown:L},D,{children:b.map((y,B)=>{var te;const Q=(te=y.isDisabled)==null?void 0:te.call(y,y.value),R=m||Q;if(I&&R)return null;const _=y.isSelected(y.value),ue=V===B||V===-1&&B===0?0:-1;return i.jsx(j,v({onClick:()=>!g&&d(y.value),selected:_,disabled:R,disableRipple:g,role:"option","aria-disabled":g||R||void 0,"aria-label":y.ariaLabel,"aria-selected":_,tabIndex:ue,className:S.item},P==null?void 0:P.digitalClockSectionItem,{children:y.label}),y.label)})}))}),Wo=({now:e,value:s,adapter:r,ampm:t,isDisabled:o,resolveAriaLabel:l,timeStep:a,valueOrReferenceDate:c})=>{const d=s?r.getHours(s):null,u=[],k=(b,C)=>{const w=C!=null?C:d;return w===null?!1:t?b===12?w===12||w===0:w===b||w-12===b:w===b},m=b=>k(b,r.getHours(c)),g=t?11:23;for(let b=0;b<=g;b+=a){let C=r.format(r.setHours(e,b),t?"hours12h":"hours24h");const w=l(parseInt(C,10).toString());C=r.formatNumber(C),u.push({value:b,label:C,isSelected:k,isDisabled:o,isFocused:m,ariaLabel:w})}return u},yt=({value:e,adapter:s,isDisabled:r,timeStep:t,resolveLabel:o,resolveAriaLabel:l,hasValue:a=!0})=>{const c=u=>e===null?!1:a&&e===u,d=u=>e===u;return[...Array.from({length:Math.ceil(60/t)},(u,k)=>{const m=t*k;return{value:m,label:s.formatNumber(o(m)),isDisabled:r,isSelected:c,isFocused:d,ariaLabel:l(m.toString())}})]},zo=["ampm","timeSteps","autoFocus","slots","slotProps","value","defaultValue","referenceDate","disableIgnoringDatePartForTimeValidation","maxTime","minTime","disableFuture","disablePast","minutesStep","shouldDisableTime","onChange","view","views","openTo","onViewChange","focusedView","onFocusedViewChange","className","classes","disabled","readOnly","skipDisabled","timezone"],Go=e=>ge({root:["root"]},Bo,e),Ko=F(dt,{name:"MuiMultiSectionDigitalClock",slot:"Root"})(({theme:e})=>({flexDirection:"row",width:"100%",borderBottom:"1px solid ".concat((e.vars||e).palette.divider)})),qo=x.forwardRef(function(s,r){const t=be(),o=qt(),l=ee({props:s,name:"MuiMultiSectionDigitalClock"}),{ampm:a=t.is12HourCycleInCurrentLocale(),timeSteps:c,autoFocus:d,slots:u,slotProps:k,value:m,defaultValue:g,referenceDate:b,disableIgnoringDatePartForTimeValidation:C=!1,maxTime:w,minTime:P,disableFuture:I,disablePast:D,minutesStep:N=1,shouldDisableTime:p,onChange:S,view:j,views:V=["hours","minutes"],openTo:L,onViewChange:A,focusedView:y,onFocusedViewChange:B,className:Q,classes:R,disabled:_,readOnly:ue,skipDisabled:te=!1,timezone:ve}=l,de=ce(l,zo),{value:J,handleValueChange:he,timezone:O}=lt({name:"MultiSectionDigitalClock",timezone:ve,value:m,defaultValue:g,referenceDate:b,onChange:S,valueManager:Me}),$=Ne(),K=ct(O),q=x.useMemo(()=>v({hours:1,minutes:5,seconds:5},c),[c]),h=mt({value:J,referenceDate:b,adapter:t,props:l,timezone:O}),ae=ze((f,T,M)=>he(f,T,M)),U=x.useMemo(()=>!a||!V.includes("hours")||V.includes("meridiem")?V:[...V,"meridiem"],[a,V]),{view:se,setValueAndGoToNextView:Z,focusedView:oe}=ut({view:j,views:U,openTo:L,onViewChange:A,onChange:ae,focusedView:y,onFocusedViewChange:B}),ne=ze(f=>{Z(f,"finish","meridiem")}),{meridiemMode:re,handleMeridiemChange:me}=at(h,a,ne,"finish"),xe=x.useCallback((f,T)=>{const M=qe(C,t),E=T==="hours"||T==="minutes"&&U.includes("seconds"),G=({start:W,end:ie})=>!(P&&M(P,ie)||w&&M(W,w)||I&&M(W,K)||D&&M(K,E?ie:W)),Ie=(W,ie=1)=>{if(W%ie!==0)return!1;if(p)switch(T){case"hours":return!p(t.setHours(h,W),"hours");case"minutes":return!p(t.setMinutes(h,W),"minutes");case"seconds":return!p(t.setSeconds(h,W),"seconds");default:return!1}return!0};switch(T){case"hours":{const W=We(f,re,a),ie=t.setHours(h,W);if(t.getHours(ie)!==W)return!0;const Re=t.setSeconds(t.setMinutes(ie,0),0),Kt=t.setSeconds(t.setMinutes(ie,59),59);return!G({start:Re,end:Kt})||!Ie(W)}case"minutes":{const W=t.setMinutes(h,f),ie=t.setSeconds(W,0),Re=t.setSeconds(W,59);return!G({start:ie,end:Re})||!Ie(f,N)}case"seconds":{const W=t.setSeconds(h,f);return!G({start:W,end:W})||!Ie(f)}default:throw new Error("not supported")}},[a,h,C,w,re,P,N,p,t,I,D,K,U]),De=x.useCallback(f=>{switch(f){case"hours":return{onChange:T=>{const M=We(T,re,a);Z(t.setHours(h,M),"finish","hours")},items:Wo({now:K,value:J,ampm:a,adapter:t,isDisabled:T=>xe(T,"hours"),timeStep:q.hours,resolveAriaLabel:$.hoursClockNumberText,valueOrReferenceDate:h})};case"minutes":return{onChange:T=>{Z(t.setMinutes(h,T),"finish","minutes")},items:yt({value:t.getMinutes(h),adapter:t,isDisabled:T=>xe(T,"minutes"),resolveLabel:T=>t.format(t.setMinutes(K,T),"minutes"),timeStep:q.minutes,hasValue:!!J,resolveAriaLabel:$.minutesClockNumberText})};case"seconds":return{onChange:T=>{Z(t.setSeconds(h,T),"finish","seconds")},items:yt({value:t.getSeconds(h),adapter:t,isDisabled:T=>xe(T,"seconds"),resolveLabel:T=>t.format(t.setSeconds(K,T),"seconds"),timeStep:q.seconds,hasValue:!!J,resolveAriaLabel:$.secondsClockNumberText})};case"meridiem":{const T=Se(t,"am"),M=Se(t,"pm");return{onChange:me,items:[{value:"am",label:T,isSelected:()=>!!J&&re==="am",isFocused:()=>!!h&&re==="am",ariaLabel:T},{value:"pm",label:M,isSelected:()=>!!J&&re==="pm",isFocused:()=>!!h&&re==="pm",ariaLabel:M}]}}default:throw new Error("Unknown view: ".concat(f," found."))}},[K,J,a,t,q.hours,q.minutes,q.seconds,$.hoursClockNumberText,$.minutesClockNumberText,$.secondsClockNumberText,re,Z,h,xe,me]),z=x.useMemo(()=>{if(!o)return U;const f=U.filter(T=>T!=="meridiem");return f.reverse(),U.includes("meridiem")&&f.push("meridiem"),f},[o,U]),Y=x.useMemo(()=>U.reduce((f,T)=>v({},f,{[T]:De(T)}),{}),[U,De]),{ownerState:H}=Pe(),X=Go(R);return i.jsx(Ko,v({ref:r,className:fe(X.root,Q),ownerState:H,role:"group"},de,{children:z.map(f=>i.jsx(Uo,{items:Y[f].items,onChange:Y[f].onChange,active:se===f,autoFocus:d||oe===f,disabled:_,readOnly:ue,slots:u,slotProps:k,skipDisabled:te,"aria-label":$.selectViewText(f)},f))}))}),Xe=({view:e,onViewChange:s,focusedView:r,onFocusedViewChange:t,views:o,value:l,defaultValue:a,referenceDate:c,onChange:d,className:u,classes:k,disableFuture:m,disablePast:g,minTime:b,maxTime:C,shouldDisableTime:w,minutesStep:P,ampm:I,ampmInClock:D,slots:N,slotProps:p,readOnly:S,disabled:j,sx:V,autoFocus:L,showViewSwitcher:A,disableIgnoringDatePartForTimeValidation:y,timezone:B})=>i.jsx(Io,{view:e,onViewChange:s,focusedView:r&&Ae(r)?r:null,onFocusedViewChange:t,views:o.filter(Ae),value:l,defaultValue:a,referenceDate:c,onChange:d,className:u,classes:k,disableFuture:m,disablePast:g,minTime:b,maxTime:C,shouldDisableTime:w,minutesStep:P,ampm:I,ampmInClock:D,slots:N,slotProps:p,readOnly:S,disabled:j,sx:V,autoFocus:L,showViewSwitcher:A,disableIgnoringDatePartForTimeValidation:y,timezone:B}),Yo=({view:e,onViewChange:s,focusedView:r,onFocusedViewChange:t,views:o,value:l,defaultValue:a,referenceDate:c,onChange:d,className:u,classes:k,disableFuture:m,disablePast:g,minTime:b,maxTime:C,shouldDisableTime:w,minutesStep:P,ampm:I,slots:D,slotProps:N,readOnly:p,disabled:S,sx:j,autoFocus:V,disableIgnoringDatePartForTimeValidation:L,timeSteps:A,skipDisabled:y,timezone:B})=>i.jsx(Ao,{view:e,onViewChange:s,focusedView:r&&Ae(r)?r:null,onFocusedViewChange:t,views:o.filter(Ae),value:l,defaultValue:a,referenceDate:c,onChange:d,className:u,classes:k,disableFuture:m,disablePast:g,minTime:b,maxTime:C,shouldDisableTime:w,minutesStep:P,ampm:I,slots:D,slotProps:N,readOnly:p,disabled:S,sx:j,autoFocus:V,disableIgnoringDatePartForTimeValidation:L,timeStep:A==null?void 0:A.minutes,skipDisabled:y,timezone:B}),St=({view:e,onViewChange:s,focusedView:r,onFocusedViewChange:t,views:o,value:l,defaultValue:a,referenceDate:c,onChange:d,className:u,classes:k,disableFuture:m,disablePast:g,minTime:b,maxTime:C,shouldDisableTime:w,minutesStep:P,ampm:I,slots:D,slotProps:N,readOnly:p,disabled:S,sx:j,autoFocus:V,disableIgnoringDatePartForTimeValidation:L,timeSteps:A,skipDisabled:y,timezone:B})=>i.jsx(qo,{view:e,onViewChange:s,focusedView:r&&jt(r)?r:null,onFocusedViewChange:t,views:o.filter(Ae),value:l,defaultValue:a,referenceDate:c,onChange:d,className:u,classes:k,disableFuture:m,disablePast:g,minTime:b,maxTime:C,shouldDisableTime:w,minutesStep:P,ampm:I,slots:D,slotProps:N,readOnly:p,disabled:S,sx:j,autoFocus:V,disableIgnoringDatePartForTimeValidation:L,timeSteps:A,skipDisabled:y,timezone:B}),Qo=(e,s,r)=>r?s.filter(t=>!jt(t)||t==="hours"):e?[...s,"meridiem"]:s,Xo=(e,s)=>{var r,t;return 24*60/(((r=e.hours)!=null?r:1)*((t=e.minutes)!=null?t:5))<=s};function Jo({thresholdToRenderTimeInASingleColumn:e,ampm:s,timeSteps:r,views:t}){const o=e!=null?e:24,l=v({hours:1,minutes:5,seconds:5},r),a=Xo(l,o);return{thresholdToRenderTimeInASingleColumn:o,timeSteps:l,shouldRenderTimeInASingleColumn:a,views:Qo(s,t,a)}}const Wt=x.forwardRef(function(s,r){var w,P,I;const t=be(),o=Rt(s,"MuiDesktopTimePicker"),{shouldRenderTimeInASingleColumn:l,views:a,timeSteps:c}=Jo(o),d=l?Yo:St,u=v({hours:d,minutes:d,seconds:d,meridiem:d},o.viewRenderers),k=(w=o.ampmInClock)!=null?w:!0,g=((P=u.hours)==null?void 0:P.name)===St.name?a:a.filter(D=>D!=="meridiem"),b=v({},o,{ampmInClock:k,timeSteps:c,viewRenderers:u,format:Nt(t,o),views:l?["hours"]:g,slots:v({field:Bt},o.slots),slotProps:v({},o.slotProps,{field:D=>{var N;return v({},Ft((N=o.slotProps)==null?void 0:N.field,D),Lt(o))},toolbar:v({hidden:!0,ampmInClock:k},(I=o.slotProps)==null?void 0:I.toolbar)})}),{renderPicker:C}=ks({ref:r,props:b,valueManager:Me,valueType:"time",validator:Ye,steps:null});return C()});Wt.propTypes={ampm:n.bool,ampmInClock:n.bool,autoFocus:n.bool,className:n.string,closeOnSelect:n.bool,defaultValue:n.object,disabled:n.bool,disableFuture:n.bool,disableIgnoringDatePartForTimeValidation:n.bool,disableOpenPicker:n.bool,disablePast:n.bool,enableAccessibleFieldDOMStructure:n.any,format:n.string,formatDensity:n.oneOf(["dense","spacious"]),inputRef:Ot,label:n.node,localeText:n.object,maxTime:n.object,minTime:n.object,minutesStep:n.number,name:n.string,onAccept:n.func,onChange:n.func,onClose:n.func,onError:n.func,onOpen:n.func,onSelectedSectionsChange:n.func,onViewChange:n.func,open:n.bool,openTo:n.oneOf(["hours","meridiem","minutes","seconds"]),orientation:n.oneOf(["landscape","portrait"]),readOnly:n.bool,reduceAnimations:n.bool,referenceDate:n.object,selectedSections:n.oneOfType([n.oneOf(["all","day","empty","hours","meridiem","minutes","month","seconds","weekDay","year"]),n.number]),shouldDisableTime:n.func,skipDisabled:n.bool,slotProps:n.object,slots:n.object,sx:n.oneOfType([n.arrayOf(n.oneOfType([n.func,n.object,n.bool])),n.func,n.object]),thresholdToRenderTimeInASingleColumn:n.number,timeSteps:n.shape({hours:n.number,minutes:n.number,seconds:n.number}),timezone:n.string,value:n.object,view:n.oneOf(["hours","meridiem","minutes","seconds"]),viewRenderers:n.shape({hours:n.func,meridiem:n.func,minutes:n.func,seconds:n.func}),views:n.arrayOf(n.oneOf(["hours","minutes","seconds"]).isRequired)};const zt=x.forwardRef(function(s,r){var u,k;const t=be(),o=Rt(s,"MuiMobileTimePicker"),l=v({hours:Xe,minutes:Xe,seconds:Xe},o.viewRenderers),a=(u=o.ampmInClock)!=null?u:!1,c=v({},o,{ampmInClock:a,viewRenderers:l,format:Nt(t,o),slots:v({field:Bt},o.slots),slotProps:v({},o.slotProps,{field:m=>{var g;return v({},Ft((g=o.slotProps)==null?void 0:g.field,m),Lt(o))},toolbar:v({hidden:!1,ampmInClock:a},(k=o.slotProps)==null?void 0:k.toolbar)})}),{renderPicker:d}=Cs({ref:r,props:c,valueManager:Me,valueType:"time",validator:Ye,steps:null});return d()});zt.propTypes={ampm:n.bool,ampmInClock:n.bool,autoFocus:n.bool,className:n.string,closeOnSelect:n.bool,defaultValue:n.object,disabled:n.bool,disableFuture:n.bool,disableIgnoringDatePartForTimeValidation:n.bool,disableOpenPicker:n.bool,disablePast:n.bool,enableAccessibleFieldDOMStructure:n.any,format:n.string,formatDensity:n.oneOf(["dense","spacious"]),inputRef:Ot,label:n.node,localeText:n.object,maxTime:n.object,minTime:n.object,minutesStep:n.number,name:n.string,onAccept:n.func,onChange:n.func,onClose:n.func,onError:n.func,onOpen:n.func,onSelectedSectionsChange:n.func,onViewChange:n.func,open:n.bool,openTo:n.oneOf(["hours","minutes","seconds"]),orientation:n.oneOf(["landscape","portrait"]),readOnly:n.bool,reduceAnimations:n.bool,referenceDate:n.object,selectedSections:n.oneOfType([n.oneOf(["all","day","empty","hours","meridiem","minutes","month","seconds","weekDay","year"]),n.number]),shouldDisableTime:n.func,slotProps:n.object,slots:n.object,sx:n.oneOfType([n.arrayOf(n.oneOfType([n.func,n.object,n.bool])),n.func,n.object]),timezone:n.string,value:n.object,view:n.oneOf(["hours","minutes","seconds"]),viewRenderers:n.shape({hours:n.func,minutes:n.func,seconds:n.func}),views:n.arrayOf(n.oneOf(["hours","minutes","seconds"]).isRequired)};const Zo=["desktopModeMediaQuery"],en=x.forwardRef(function(s,r){const t=ee({props:s,name:"MuiTimePicker"}),{desktopModeMediaQuery:o=Ts}=t,l=ce(t,Zo);return Yt(o,{defaultMatches:!0})?i.jsx(Wt,v({ref:r},l)):i.jsx(zt,v({ref:r},l))}),tn=({settingName:e,value:s,defaultValue:r,handleChange:t})=>{const{t:o}=Ke(),[l,a]=x.useState(!1),[c,d]=x.useState(s);x.useEffect(()=>{s&&d(s)},[s]);const u=x.useCallback(g=>{a(!1),g&&d(s)},[s]),k=x.useCallback(()=>u(!0),[u]),m=x.useCallback((g,b=!0)=>{b&&u(!1),s!==g&&t(g)},[s,t,u]);return i.jsxs(i.Fragment,{children:[i.jsx(Je,{onClick:()=>a(!0),children:i.jsx(Ze,{primary:e,secondary:Ee(s,"HH:mm").format("LT"),secondaryTypographyProps:{style:{display:"flex",flexDirection:"column"}}})}),i.jsxs(st,{open:l,onClose:u,children:[i.jsx(ot,{children:e}),i.jsx(nt,{children:i.jsx(xs,{dateAdapter:ws,adapterLocale:Ee.locale(),children:i.jsx(en,{autoFocus:!0,value:Ee(c,"HH:mm"),defaultValue:Ee(r,"HH:mm"),format:"LT",onChange:g=>{var b;return d((b=g==null?void 0:g.format("HH:mm"))!=null?b:"00:00")}})})}),i.jsxs(rt,{children:[r!==void 0?i.jsx(pe,{onClick:()=>{d(r),m(r,!1)},color:"primary",children:o("global.button.reset_to_default")}):null,i.jsx(pe,{onClick:k,color:"primary",children:o("global.button.cancel")}),i.jsx(pe,{onClick:()=>{m(c)},color:"primary",children:o("global.button.ok")})]})]})]})};var _e=(e=>(e.LIBRARY="library",e.SETTINGS="settings",e))(_e||{});const Gt={includeManga:"settings.backup.flag.manga",includeCategories:"settings.backup.flag.categories",includeChapters:"settings.backup.flag.chapters",includeClientData:"settings.backup.flag.client_data",includeHistory:"settings.backup.flag.history",includeServerSettings:"settings.backup.flag.server_settings",includeTracking:"settings.backup.flag.tracking"},sn={[_e.LIBRARY]:"settings.backup.flag.group.library",[_e.SETTINGS]:"settings.backup.flag.group.settings"},on=Object.keys(Gt),nn={[_e.LIBRARY]:["includeManga","includeChapters","includeTracking","includeHistory","includeCategories"],[_e.SETTINGS]:["includeClientData","includeServerSettings"]},Mt=({onCancel:e,onConfirm:s,title:r})=>{const{t}=Ke(),[o,l]=x.useState(Object.fromEntries(on.map(a=>[a,!0])));return i.jsxs(st,{open:!0,onAbort:e,maxWidth:"xs",fullWidth:!0,onClose:e,children:[i.jsx(ot,{children:r}),i.jsx(nt,{children:i.jsx(vs,{sx:{gap:2},children:Object.entries(nn).map(([a,c])=>i.jsxs(et,{children:[i.jsx(tt,{children:t(sn[a])}),c.map(d=>i.jsx(Ms,{label:t(Gt[d]),checked:o[d],onChange:(u,k)=>{l({...o,[d]:k})}},d))]},a))})}),i.jsxs(rt,{children:[i.jsx(pe,{autoFocus:!0,onClick:e,color:"primary",children:t("global.button.cancel")}),i.jsx(pe,{onClick:()=>s(o),color:"primary",children:t("global.button.ok")})]})]})},rn=({validationResult:e,onCancel:s,onConfirm:r})=>{const{t}=Ke();return i.jsxs(st,{open:!0,children:[i.jsx(ot,{children:t("settings.backup.action.validate.dialog.title")}),i.jsxs(nt,{dividers:!0,children:[!!(e!=null&&e.missingSources.length)&&i.jsx(Ue,{sx:{listStyleType:"initial",listStylePosition:"inside"},subheader:t("settings.backup.action.validate.dialog.content.label.missing_sources"),children:e==null?void 0:e.missingSources.map(({id:o,name:l})=>i.jsx(pt,{sx:{display:"list-item"},children:"".concat(l," (").concat(o,")")},o))}),!!(e!=null&&e.missingTrackers.length)&&i.jsx(Ue,{sx:{listStyleType:"initial",listStylePosition:"inside"},subheader:t("settings.backup.action.validate.dialog.content.label.missing_trackers"),children:e==null?void 0:e.missingTrackers.map(({name:o})=>i.jsx(pt,{sx:{display:"list-item"},children:"".concat(o)},o))})]}),i.jsx(rt,{children:i.jsxs(et,{direction:"row",sx:{justifyContent:"space-between",width:"100%"},children:[!!(e!=null&&e.missingSources.length)&&i.jsx(pe,{onClick:s,component:bt,to:ft.browse.path(Qt.EXTENSIONS),autoFocus:!!(e!=null&&e.missingSources.length),variant:e!=null&&e.missingSources.length?"contained":"text",children:t("extension.action.label.install")}),!!(e!=null&&e.missingTrackers.length)&&i.jsx(pe,{onClick:s,component:bt,to:ft.settings.childRoutes.tracking.path,autoFocus:!!(e!=null&&e.missingTrackers.length),variant:e!=null&&e.missingTrackers.length?"contained":"text",children:t("global.button.log_in")}),i.jsxs(et,{direction:"row",children:[i.jsx(pe,{onClick:s,children:t("global.button.cancel")}),i.jsx(pe,{onClick:r,autoFocus:!(e!=null&&e.missingSources.length)&&!(e!=null&&e.missingTrackers.length),variant:!(e!=null&&e.missingSources.length)&&!(e!=null&&e.missingTrackers.length)?"contained":"text",children:t("global.button.restore")})]})]})})]})},an=e=>e===0?ht("global.label.never"):ht("settings.backup.automated.cleanup.label.value",{days:e,count:e});let ye;function Sn(){var N;const{t:e}=Ke();Ss(e("settings.backup.title"));const{data:s,loading:r,error:t,refetch:o}=we.useGetServerSettings({notifyOnNetworkStatusChange:!0}),[l]=we.useUpdateServerSettings(),{data:a}=we.useGetBackupRestoreStatus(ye!=null?ye:"",{skip:!ye,pollInterval:1e3}),[,c]=x.useState(0),d=x.useRef(null),u=(()=>{if(!(a!=null&&a.restoreStatus))return 0;const p=100*(a.restoreStatus.mangaProgress/a.restoreStatus.totalManga);return Number.isNaN(p)?0:p})(),k=(p,S)=>{l({variables:{input:{settings:{[p]:S}}}}).catch(j=>le(e("global.error.label.failed_to_save_changes"),"error",Ve(j)))};x.useEffect(()=>{if(!(a!=null&&a.restoreStatus))return;const p=a.restoreStatus.state===gt.Success,S=a.restoreStatus.state===gt.Failure;(p||S)&&(p&&le(e("settings.backup.action.restore.label.success"),"success"),S&&le(e("settings.backup.action.restore.error.label.failure"),"error"),we.reset(),ye=void 0,c(Date.now()))},[(N=a==null?void 0:a.restoreStatus)==null?void 0:N.state]);const m=()=>{const p=document.getElementById("backup-file");p&&(p.value="")},g=async()=>{var S;const p=await Qe.show(Mt,{title:e("settings.backup.action.create.label.title")});le(e("settings.backup.action.create.label.in_progress"),"info");try{const j=await we.createBackupFile({flags:p}).response,V=(S=j.data)==null?void 0:S.createBackup.url;if(!V){le(e("settings.backup.action.create.error.failure"),"error",Ve(j.errors));return}const L=document.createElement("a");L.href=we.getValidUrlFor(V,""),L.download="",document.body.appendChild(L),L.click(),document.body.removeChild(L)}catch(j){le(e("settings.backup.action.create.error.failure"),"error",Ve(j))}},b=async p=>{try{const{data:{validateBackup:S}}=await we.validateBackupFile(p,{fetchPolicy:"network-only"}).response;if(S.missingSources.length||S.missingTrackers.length)try{await Qe.show("backup-validate-".concat(p.name),rn,{validationResult:S})}catch(j){return!1}return!0}catch(S){le(e("settings.backup.action.validate.error.label.failure"),"error",Ve(S))}finally{m()}return!1},C=async p=>{var j;const S=await Qe.show(Mt,{title:e("settings.backup.action.restore.label.title")});try{le(e("settings.backup.action.restore.label.in_progress"),"info"),ye=(j=(await we.restoreBackupFile({backup:p,flags:S}).response).data)==null?void 0:j.restoreBackup.id,c(Date.now())}catch(V){le(e("settings.backup.action.restore.error.label.failure"),"error",Ve(V))}finally{m()}},w=async p=>{if(p.name.toLowerCase().endsWith("json")){le(e("settings.backup.action.restore.error.label.legacy_backup_unsupported"),"error");return}if(!p.name.toLowerCase().match(/proto\.gz$|tachibk$/g)){le(e("global.error.label.invalid_file_type"),"error");return}await b(p)&&await C(p)};Tt("drop",async p=>{p.preventDefault();const S=await kt(p);w(S[0])}),Tt("dragover",p=>{p.preventDefault()});const P=Ns("change",async p=>{const S=await kt(p);w(S[0])}),I=Ds(d,P);if(r)return i.jsx(Xt,{});if(t)return i.jsx(ys,{message:e("global.error.label.failed_to_load_data"),messageExtra:Ve(t),retry:()=>o().catch(Jt())});const D=s.settings;return i.jsxs(i.Fragment,{children:[i.jsxs(Ue,{sx:{padding:0},children:[i.jsx(Je,{onClick:g,children:i.jsx(Ze,{primary:e("settings.backup.action.create.label.title"),secondary:e("settings.backup.action.create.label.description")})}),i.jsxs(Je,{onClick:()=>{var p;return(p=d.current)==null?void 0:p.click()},disabled:!!ye,children:[i.jsx(Ze,{primary:e("settings.backup.action.restore.label.title"),secondary:e("settings.backup.action.restore.label.description")}),ye?i.jsx(Zt,{children:i.jsx(ts,{progress:u})}):null]}),i.jsxs(Ue,{subheader:i.jsx(Ps,{component:"div",id:"backup-settings",children:"Automated backup"}),children:[i.jsx(es,{settingName:e("settings.backup.automated.location.label.title"),dialogDescription:e("settings.backup.automated.location.label.description"),value:D.backupPath,settingDescription:D.backupPath.length?D.backupPath:e("global.label.default"),handleChange:p=>k("backupPath",p)}),i.jsx(tn,{settingName:e("settings.backup.automated.label.time"),value:D.backupTime,defaultValue:"00:00",handleChange:p=>k("backupTime",p)}),i.jsx(Ct,{settingTitle:e("settings.backup.automated.label.interval"),settingValue:e("global.date.value.label.day",{days:D.backupInterval,count:D.backupInterval}),value:D.backupInterval,defaultValue:1,minValue:1,maxValue:31,stepSize:1,valueUnit:e("global.date.label.day_one"),showSlider:!0,handleUpdate:p=>k("backupInterval",p)}),i.jsx(Ct,{settingTitle:e("settings.backup.automated.cleanup.label.title"),settingValue:an(D.backupTTL),value:D.backupTTL,defaultValue:14,minValue:0,maxValue:1e3,stepSize:1,valueUnit:e("global.date.label.day_one"),showSlider:!0,handleUpdate:p=>k("backupTTL",p)})]})]}),i.jsx("input",{ref:I,type:"file",style:{display:"none"}})]})}export{Sn as Backup};
