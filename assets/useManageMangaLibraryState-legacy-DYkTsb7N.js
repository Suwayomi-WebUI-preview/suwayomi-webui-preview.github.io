!function(){var e,n=["title","Icon"],t=["children"],r=["children","onClose"];function o(e,n){for(var t=0;t<n.length;t++){var r=n[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,h(r.key),r)}}function i(e){return function(e){if(Array.isArray(e))return f(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||d(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function a(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */var e,n,t="function"==typeof Symbol?Symbol:{},r=t.iterator||"@@iterator",o=t.toStringTag||"@@toStringTag";function i(t,r,o,i){var a=r&&r.prototype instanceof l?r:l,s=Object.create(a.prototype);return u(s,"_invoke",function(t,r,o){var i,a,u,l=0,s=o||[],d=!1,f={p:0,n:0,v:e,a:v,f:v.bind(e,4),d:function(n,t){return i=n,a=0,u=e,f.n=t,c}};function v(t,r){for(a=t,u=r,n=0;!d&&l&&!o&&n<s.length;n++){var o,i=s[n],v=f.p,m=i[2];t>3?(o=m===r)&&(u=i[(a=i[4])?5:(a=3,3)],i[4]=i[5]=e):i[0]<=v&&((o=t<2&&v<i[1])?(a=0,f.v=r,f.n=i[1]):v<m&&(o=t<3||i[0]>r||r>m)&&(i[4]=t,i[5]=r,f.n=m,a=0))}if(o||t>1)return c;throw d=!0,r}return function(o,s,m){if(l>1)throw TypeError("Generator is already running");for(d&&1===s&&v(s,m),a=s,u=m;(n=a<2?e:u)||!d;){i||(a?a<3?(a>1&&(f.n=-1),v(a,u)):f.n=u:f.v=u);try{if(l=2,i){if(a||(o="next"),n=i[o]){if(!(n=n.call(i,u)))throw TypeError("iterator result is not an object");if(!n.done)return n;u=n.value,a<2&&(a=0)}else 1===a&&(n=i.return)&&n.call(i),a<2&&(u=TypeError("The iterator does not provide a '"+o+"' method"),a=1);i=e}else if((n=(d=f.n<0)?u:t.call(r,f))!==c)break}catch(n){i=e,a=1,u=n}finally{l=1}}return{value:n,done:d}}}(t,o,i),!0),s}var c={};function l(){}function s(){}function d(){}n=Object.getPrototypeOf;var f=[][r]?n(n([][r]())):(u(n={},r,function(){return this}),n),v=d.prototype=l.prototype=Object.create(f);function m(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,d):(e.__proto__=d,u(e,o,"GeneratorFunction")),e.prototype=Object.create(v),e}return s.prototype=d,u(v,"constructor",d),u(d,"constructor",s),s.displayName="GeneratorFunction",u(d,o,"GeneratorFunction"),u(v),u(v,o,"Generator"),u(v,r,function(){return this}),u(v,"toString",function(){return"[object Generator]"}),(a=function(){return{w:i,m:m}})()}function u(e,n,t,r){var o=Object.defineProperty;try{o({},"",{})}catch(e){o=0}u=function(e,n,t,r){function i(n,t){u(e,n,function(e){return this._invoke(n,t,e)})}n?o?o(e,n,{value:t,enumerable:!r,configurable:!r,writable:!r}):e[n]=t:(i("next",0),i("throw",1),i("return",2))},u(e,n,t,r)}function c(e,n,t,r,o,i,a){try{var u=e[i](a),c=u.value}catch(e){return void t(e)}u.done?n(c):Promise.resolve(c).then(r,o)}function l(e){return function(){var n=this,t=arguments;return new Promise(function(r,o){var i=e.apply(n,t);function a(e){c(i,r,o,a,u,"next",e)}function u(e){c(i,r,o,a,u,"throw",e)}a(void 0)})}}function s(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){var t=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var r,o,i,a,u=[],c=!0,l=!1;try{if(i=(t=t.call(e)).next,0===n){if(Object(t)!==t)return;c=!1}else for(;!(c=(r=i.call(t)).done)&&(u.push(r.value),u.length!==n);c=!0);}catch(e){l=!0,o=e}finally{try{if(!c&&null!=t.return&&(a=t.return(),Object(a)!==a))return}finally{if(l)throw o}}return u}}(e,n)||d(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function d(e,n){if(e){if("string"==typeof e)return f(e,n);var t={}.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?f(e,n):void 0}}function f(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=Array(n);t<n;t++)r[t]=e[t];return r}function v(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),t.push.apply(t,r)}return t}function m(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?v(Object(t),!0).forEach(function(n){g(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):v(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}function g(e,n,t){return(n=h(n))in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function h(e){var n=function(e,n){if("object"!=y(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,n||"default");if("object"!=y(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===n?String:Number)(e)}(e,"string");return"symbol"==y(n)?n:n+""}function p(e,n){if(null==e)return{};var t,r,o=function(e,n){if(null==e)return{};var t={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==n.indexOf(r))continue;t[r]=e[r]}return t}(e,n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)t=i[r],-1===n.indexOf(t)&&{}.propertyIsEnumerable.call(e,t)&&(o[t]=e[t])}return o}function y(e){return y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},y(e)}System.register(["./index-legacy-CUnK-uKs.js","./Chapters-legacy-BMMufp5w.js","./Mangas-legacy-SeU7d9Xj.js","./ThreeStateCheckboxInput-legacy-BZ99zV7_.js","./CheckboxInput-legacy-jjl0YKR4.js","./FormGroup-legacy-BY1DGxh2.js"],function(u,c){"use strict";var d,f,v,h,b,w,x,j,C,S,k,M,O,T,E,L,P,I,_,A,F,D,R,N,K,B,z,G,U,Y,H,X,V,J,q,W;return{setters:[function(e){d=e.f,f=e.c,v=e.j,h=e.ar,b=e.bx,w=e.v,x=e.G,j=e.B,C=e.bB,S=e.bI,k=e.k,M=e.bJ,O=e.bK,T=e.u,E=e.r,L=e.bL,P=e.o,I=e.p,_=e.q,A=e.w,F=e.b,D=e.A,R=e.L,N=e.bM,K=e.aJ,B=e.m,z=e.g,G=e.aF,U=e.bn,Y=e.bN,H=e.bC},function(e){X=e.D},function(e){V=e.a},function(e){J=e.T},function(e){q=e.C},function(e){W=e.F}],execute:function(){u({V:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},t=n.threshold,r=void 0===t?400:t,o=n.captureEvent,i=void 0!==o&&o,a=n.detect,u=void 0===a?c.Pointer:a,l=n.cancelOnMovement,s=void 0!==l&&l,f=n.cancelOutsideElement,v=void 0===f||f,m=n.filterEvents,g=n.onStart,h=n.onMove,p=n.onFinish,y=n.onCancel,b=d.useRef(!1),w=d.useRef(!1),x=d.useRef(),j=d.useRef(),C=d.useRef(e),S=d.useRef(null),k=d.useCallback(function(e){return function(n){w.current||te(n)&&(void 0!==m&&!m(n)||(i&&n.persist(),null==g||g(n,{context:e}),S.current=re(n),w.current=!0,x.current=n.currentTarget,j.current=setTimeout(function(){C.current&&(C.current(n,{context:e}),b.current=!0)},r)))}},[i,m,g,r]),M=d.useCallback(function(e){return function(n,t){te(n)&&w.current&&(S.current=null,i&&n.persist(),b.current?null==p||p(n,{context:e}):w.current&&(null==y||y(n,{context:e,reason:null!=t?t:Q.CancelledByRelease})),b.current=!1,w.current=!1,void 0!==j.current&&clearTimeout(j.current))}},[i,p,y]),O=d.useCallback(function(e){return function(n){if(te(n)&&(null==h||h(n,{context:e}),!1!==s&&S.current)){var t=re(n);if(t){var r=!0===s?25:s,o={x:Math.abs(t.x-S.current.x),y:Math.abs(t.y-S.current.y)};(o.x>r||o.y>r)&&M(e)(n,Q.CancelledByMovement)}}}},[M,s,h]),T=d.useCallback(function(n){if(null===e)return{};switch(u){case c.Mouse:var t={onMouseDown:k(n),onMouseMove:O(n),onMouseUp:M(n)};return v&&(t.onMouseLeave=function(e){M(n)(e,Q.CancelledOutsideElement)}),t;case c.Touch:return{onTouchStart:k(n),onTouchMove:O(n),onTouchEnd:M(n)};case c.Pointer:var r={onPointerDown:k(n),onPointerMove:O(n),onPointerUp:M(n)};return v&&(r.onPointerLeave=function(e){return M(n)(e,Q.CancelledOutsideElement)}),r}},[e,M,v,u,O,k]);return d.useEffect(function(){function e(e){var n=function(e){return{target:e.target,currentTarget:e.currentTarget,nativeEvent:e,persist:function(){}}}(e);M()(n)}return window.addEventListener("mouseup",e),window.addEventListener("touchend",e),window.addEventListener("pointerup",e),function(){window.removeEventListener("mouseup",e),window.removeEventListener("touchend",e),window.removeEventListener("pointerup",e)}},[M]),d.useEffect(function(){return function(){void 0!==j.current&&clearTimeout(j.current)}},[]),d.useEffect(function(){C.current=e},[e]),T},f:le,i:me,m:function(e,n){var t=le(e,n);return ce(t,n)}});var c=function(e){return e.Mouse="mouse",e.Touch="touch",e.Pointer="pointer",e}(c||{}),Q=function(e){return e.CancelledByMovement="cancelled-by-movement",e.CancelledByRelease="cancelled-by-release",e.CancelledOutsideElement="cancelled-outside-element",e}(Q||{}),Z=["mousedown","mousemove","mouseup","mouseleave","mouseout"],$=["touchstart","touchmove","touchend","touchcancel"],ee=["pointerdown","pointermove","pointerup","pointerleave","pointerout"];function ne(e){var n;return $.includes(null==(n=null==e?void 0:e.nativeEvent)?void 0:n.type)||"touches"in e}function te(e){return function(e){var n;return Z.includes(null==(n=null==e?void 0:e.nativeEvent)?void 0:n.type)}(e)||ne(e)||function(e){var n=e.nativeEvent;return!!n&&(ee.includes(null==n?void 0:n.type)||"pointerId"in n)}(e)}function re(e){var n,t=ne(e)?null==(n=null==e?void 0:e.touches)?void 0:n[0]:e;return function(e){return"object"==y(e)&&null!==e&&"pageX"in e&&"number"==typeof e.pageX&&"pageY"in e&&"number"==typeof e.pageY}(t)?{x:t.pageX,y:t.pageY}:null}u("d",f(v.jsx("path",{d:"M19 5v14H5V5zm0-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2"}))),u("R",f(v.jsx("path",{d:"m1.79 12 5.58 5.59L5.96 19 .37 13.41zm.45-7.78L12.9 14.89l-1.28 1.28L7.44 12l-1.41 1.41L11.62 19l2.69-2.69 4.89 4.89 1.41-1.41L3.65 2.81zm14.9 9.27L23.62 7 22.2 5.59l-6.48 6.48zM17.96 7l-1.41-1.41-3.65 3.66 1.41 1.41z"}))),u("D",f(v.jsx("path",{d:"M9 16.2 4.8 12l-1.4 1.4L9 19 21 7l-1.4-1.4z"}))),u("F",f(v.jsx("path",{d:"M16.5 3c-1.74 0-3.41.81-4.5 2.09C10.91 3.81 9.24 3 7.5 3 4.42 3 2 5.42 2 8.5c0 3.78 3.4 6.86 8.55 11.54L12 21.35l1.45-1.32C18.6 15.36 22 12.28 22 8.5 22 5.42 19.58 3 16.5 3m-4.4 15.55-.1.1-.1-.1C7.14 14.24 4 11.39 4 8.5 4 6.5 5.5 5 7.5 5c1.54 0 3.04.99 3.57 2.36h1.87C13.46 5.99 14.96 5 16.5 5c2 0 3.5 1.5 3.5 3.5 0 2.89-3.14 5.74-7.9 10.05"}))),u("b",function(e){var t=e.title,r=e.Icon,o=p(e,n);return v.jsxs(h,m(m({},o),{},{children:[v.jsx(b,{children:v.jsx(r,{fontSize:"small"})}),v.jsx(w,{children:t})]}))}),u("e",function(e,n){return function(t,r){var o=r>0?" (".concat(r,")"):"";return"".concat(x._(n[t].action[e?"single":"selected"])).concat(o)}}),u("c",function(e){return function(){return!e||arguments.length>0&&void 0!==arguments[0]&&arguments[0]}}),u("h",function(e){return function(n){return!e&&n}}),u("C",function(e){var n=e.children,r=p(e,t);return v.jsx(j,m(m({},r),{},{sx:m({minWidth:"unset",px:"10px"},r.sx),children:n}))}),u("M",f(v.jsx("path",{d:"M12 8c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2m0 2c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2m0 6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2"}))),u("a",function(e){var n=e.children,t=e.onClose,o=p(e,r),i=s(d.useState(!1),2),a=i[0],u=i[1];return v.jsx(C,m(m({},o),{},{open:o.open,onClose:t,sx:{visibility:!o.open||a?"hidden":"visible"},children:n(function(){t({},"backdropClick"),u(!1)},u)}))});var oe=m({},X),ie=function(e){return m(m({},e),{},{excludedScanlators:JSON.stringify(e.excludedScanlators)})},ae=function(e,n,t){return function(e){return M("manga",e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:oe,void 0,arguments.length>2?arguments[2]:void 0)}(m(m({},e),{},{meta:O(e.meta)}),n,t)},ue=(u("g",function(e,n){return ae(e,n)}),function(){var e=l(a().m(function e(n,t,r){return a().w(function(e){for(;;)if(0===e.n)return e.a(2,S(n,[[t,ie(g({},t,r))[t]]]))},e)}));return function(n,t,r){return e.apply(this,arguments)}}());var ce=function(e,n){var t=n.sortBy,r=n.reverse,o=i(e);switch(t){case"source":o.sort(function(e,n){return e.sourceOrder-n.sourceOrder});break;case"fetchedAt":o.sort(function(e,n){var t,r;return Number(null!==(t=e.fetchedAt)&&void 0!==t?t:0)-Number(null!==(r=n.fetchedAt)&&void 0!==r?r:0)});break;case"chapterNumber":o.sort(function(e,n){return e.chapterNumber-n.chapterNumber});break;case"uploadedAt":o.sort(function(e,n){var t,r;return Number(null!==(t=e.uploadDate)&&void 0!==t?t:0)-Number(null!==(r=n.uploadDate)&&void 0!==r?r:0)})}return r&&o.reverse(),o};function le(e,n){return e.filter(function(e){return function(e,n){var t=n.isRead;switch(e){case!0:return!t;case!1:return t;default:return!0}}(n.unread,e)&&function(e,n){var t=n.isDownloaded;switch(e){case!0:return t;case!1:return!t;default:return!0}}(n.downloaded,e)&&function(e,n){var t=n.isBookmarked;switch(e){case!0:return t;case!1:return!t;default:return!0}}(n.bookmarked,e)&&(t=n.excludedScanlators,!(r=e.scanlator)||!t.includes(r));var t,r})}u("k",function(e){var n=e.unread,t=e.downloaded,r=e.bookmarked,o=e.excludedScanlators;return null!=n||null!=t||null!=r||!!o.length}),u("l",function(e){var n,t,r,o=(r=ae(n=e,t,d.useEffect),d.useMemo(function(){return r},[n,t])),i=o.unread,a=o.downloaded,u=o.bookmarked,c=o.reverse,l=o.sortBy,s=o.showChapterNumber,f=o.excludedScanlators;return d.useMemo(function(){return{unread:i,downloaded:a,bookmarked:u,reverse:c,sortBy:l,showChapterNumber:s,excludedScanlators:f}},[i,a,u,c,l,s,f])}),u("n",function(e){return function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:k("createUpdateMangaMetadata");return function(t,r){return ue(e,t,r).catch(n)}}(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:k("createUpdateMangaMetadata"))});var se=u("j",function(e,n){var t,r=n.itemIds,o=void 0===r?[]:r,a=n.keyCount,u=void 0===a?e:a,c=n.currentKey,l=n.initialState,f=void 0===l?{}:l,v=s(d.useState(f),2),h=v[0],p=v[1],y=d.useRef(void 0),b=i(new Set(Object.values(h).flat())),w=b.length===e,x=!b.length,j=null!==(t=h[c])&&void 0!==t?t:[],C=j.length===u,S=0===j.length;S&&(y.current=void 0);var k=d.useCallback(function(e,n){var t,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=r.selectRange,u=void 0!==a&&a,l=r.key,s=void 0===l?c:l,d=!n,f=null!==(t=y.current)&&void 0!==t?t:{},v=f.id,h=f.key;y.current={id:e,key:s};var b=u&&s===h&&void 0!==v,w=b?o.indexOf(v):-1,x=b?o.indexOf(e):-1,j=b?o.slice(Math.min(w,x),Math.max(w,x)+1):[e];p(d?function(e){var n,t;return m(m({},e),{},g({},s,null!==(n=null===(t=e[s])||void 0===t?void 0:t.filter(function(e){return!j.includes(e)}))&&void 0!==n?n:[]))}:function(e){var n;return m(m({},e),{},g({},s,i(new Set([].concat(i(null!==(n=e[s])&&void 0!==n?n:[]),i(j))))))})},[c,o]),M=d.useCallback(function(e,n){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:c;switch(e){case!0:p(function(e){return m(m({},e),{},g({},t,i(n)))});break;case!1:p(function(e){return m(m({},e),{},g({},t,[]))})}},[c]),O=d.useCallback(function(e,n){p(function(t){return m(m({},t),{},g({},e,i(n)))})},[]),T=d.useCallback(function(e){return h[e]},[h]),E=d.useCallback(function(){p({})},[]),L=d.useCallback(function(){E(),p(f)},[E,f]);return{selectedItemIds:b,keySelectedItemIds:j,handleSelection:k,handleSelectAll:M,areAllItemsSelected:w,areNoItemsSelected:x,areAllItemsForKeySelected:C,areNoItemsForKeySelected:S,setSelectionForKey:O,getSelectionForKey:T,clearSelection:E,reset:L}}),de=function(){return e=function e(){!function(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}(this,e)},t=[{key:"getIds",value:function(e){return e.map(function(e){return e.id})}},{key:"getUserCreated",value:function(e){return e.filter(function(e){return 0!==e.id})}},{key:"getDefaults",value:function(e){return e.filter(function(e){return e.default})}}],(n=null)&&o(e.prototype,n),t&&o(e,t),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,n,t}(),fe=function(e){var n=E.useGetManga(N,null!=e?e:-1,{skip:void 0===e}).data;return d.useMemo(function(){return void 0!==e&&n?de.getIds(n.manga.categories.nodes):[]},[null==n?void 0:n.manga.categories.nodes,e])},ve=function(e,n,t,r){return!!n.includes(e)||(r||!t.includes(e))&&void 0};function me(e){var n=T(),t=n.i18n,r=(n._,e.onDismiss),o=e.onSubmit,a=e.isVisible,u=e.onExitComplete,c=e.mangaId,l=e.mangaIds,f=e.addToLibrary,m=void 0!==f&&f,g=void 0!==c,h=null!=l?l:[c],p=s(d.useState(!1),2),y=p[0],b=p[1],w=fe(c),x=E.useGetCategories(L).data,C=null==x?void 0:x.categories.nodes,S=d.useMemo(function(){return de.getUserCreated(null!=C?C:[])},[C]),M=d.useMemo(function(){return m?de.getIds(de.getDefaults(S)):[]},[S]),O=se(S.length,{currentKey:"categoriesToAdd",initialState:{categoriesToAdd:[].concat(i(w),i(M)),categoriesToRemove:[]}}),N=O.handleSelection,G=O.setSelectionForKey,U=O.getSelectionForKey;d.useEffect(function(){G("categoriesToAdd",[].concat(i(w),i(M))),G("categoriesToRemove",[])},[w]);var Y=U("categoriesToAdd"),H=U("categoriesToRemove"),X=function(){G("categoriesToAdd",w),G("categoriesToRemove",[]),r()};return v.jsxs(P,{sx:{".MuiDialog-paper":{maxHeight:435,width:"80%"}},maxWidth:"xs",open:a,onTransitionExited:u,onClose:X,children:[v.jsx(I,{children:t._({id:"Q2vtcn"})}),v.jsx(_,{dividers:!0,children:v.jsxs(W,{children:[0===S.length&&v.jsx("span",{children:t._({id:"hgP50e"})}),S.map(function(e){return v.jsx(J,{checked:ve(e.id,Y,H,g),onChange:function(n){N(e.id,!1,{key:"categoriesToAdd"}),N(e.id,!1,{key:"categoriesToRemove"}),n&&N(e.id,!0,{key:"categoriesToAdd"}),!1===n&&N(e.id,!0,{key:"categoriesToRemove"})},label:e.name},e.id)})]})}),v.jsx(A,{children:v.jsxs(F,{sx:{width:"100%"},children:[m&&v.jsx(q,{sx:{margin:0},size:"small",label:t._({id:"kDUFNa"}),onChange:function(e){return b(e.target.checked)}}),v.jsxs(F,{direction:"row",sx:{justifyContent:"space-between",alignItems:"end",width:"100%"},children:[v.jsx(j,{component:R,to:D.settings.childRoutes.categories.path,onClick:r,children:S.length?t._({id:"ePK91l"}):t._({id:"hYgDIe"})}),v.jsxs(F,{direction:"row",children:[v.jsx(j,{autoFocus:!0,onClick:X,color:"primary",children:t._({id:"dEgA5A"})}),!!S.length&&v.jsx(j,{onClick:function(){var e=g?Y.filter(function(e){return!w.includes(e)}):Y,n=g?w.filter(function(e){return!Y.includes(e)}):H;o({addToCategories:e,removeFromCategories:n}),y&&K("showAddToLibraryCategorySelectDialog",!1).catch(function(e){return B(t._({id:"p43DY9"}),"error",z(e))}),(!!e.length||!!n.length)&&(m||V.performAction("change_categories",h,{changeCategoriesPatch:{addToCategories:e,removeFromCategories:n}}).catch(k("CategorySelect::handleOk")))},color:"primary",children:t._({id:"aP3N/0"})})]})]})]})})]})}u("u",function(n){var t,r,o=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=T(),u=i.i18n,c=(i._,s(d.useState(!!n.inLibrary),2)),f=c[0],v=c[1];d.useEffect(function(){v(!!n.inLibrary)},[n.id]);var m,g,h=d.useCallback(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];E.updateManga(n.id,{updateManga:{inLibrary:!0},updateMangaCategories:{addToCategories:e,removeFromCategories:t}}).response.then(function(){return B(u._({id:"lMioEB"}),"success")}).then(function(){return v(!0)}).catch(function(e){B(u._({id:"Y5/o4t"}),"error",z(e))})},[n.id]),p=d.useCallback(l(a().m(function e(){return a().w(function(e){for(;;)switch(e.n){case 0:if(!o){e.n=1;break}return e.n=1,G.show({title:u._({id:"6foA8n"}),message:u._({id:"PfsayX",values:{0:n.title}}),actions:{confirm:{title:u._({id:"t/YqKh"})}}},{id:"manga-library-state-remove-".concat(n.id)});case 1:return e.n=2,V.removeFromLibrary([n.id],!0);case 2:v(!1);case 3:return e.a(2)}},e)})),[n.id,o]),y=d.useCallback(function(){var e=function(){var t=l(a().m(function t(){var r,o,i,c,l,s,d,v,m,g,y,b;return a().w(function(t){for(;;)switch(t.p=t.n){case 0:if(!f){t.n=1;break}return p().catch(k("useManageMangaLibraryState::updateLibraryState::removeFromLibrary")),t.a(2);case 1:return t.p=1,t.n=2,Y();case 2:o=t.v.showAddToLibraryCategorySelectDialog,t.n=4;break;case 3:return t.p=3,g=t.v,B(u._({id:"6m5aox"}),"error",z(g)),t.a(2);case 4:return t.p=4,t.n=5,E.getCategories(L).response;case 5:i=t.v,t.n=7;break;case 6:return t.p=6,y=t.v,B(u._({id:"2HCkNR"}),"error",z(y)),t.a(2);case 7:return c=de.getUserCreated(i.data.categories.nodes),t.p=8,t.n=9,V.getDuplicateLibraryMangas(n.title).response;case 9:l=t.v,t.n=11;break;case 10:return t.p=10,b=t.v,s=z(b),t.n=11,G.show({title:u._({id:"6m5aox"}),message:u._({id:"3l2Hmw",values:{errorMessage:s}}),actions:{extra:{show:!0,title:u._({id:"6gRgw8"}),contain:!0},confirm:{title:u._({id:"m16xKo"})}},onExtra:function(){return e().catch(k("useManageMangaLibraryState::update: retry duplicate check"))}},{id:"manga-library-state-add-".concat(n.id)});case 11:if(!(null===(r=l)||void 0===r?void 0:r.data.mangas.totalCount)){t.n=12;break}return t.n=12,G.show({title:u._({id:"6foA8n"}),message:u._({id:"jc6MlM"}),actions:{extra:{show:!0,title:u._({id:"BbYYZ3"}),contain:!0,link:D.manga.path(l.data.mangas.nodes[0].id)},confirm:{title:u._({id:"m16xKo"})}},onExtra:function(){}},{id:"manga-library-state-add-duplicated-".concat(n.id)});case 12:if(o&&!!c.length){t.n=13;break}return h(de.getIds(de.getDefaults(c))),t.a(2);case 13:return t.n=14,H.show(me,{mangaId:n.id,addToLibrary:!0},{id:"manga-library-state-add-categories-".concat(n.id)});case 14:d=t.v,v=d.addToCategories,m=d.removeFromCategories,h(v,m);case 15:return t.a(2)}},t,null,[[8,10],[4,6],[1,3]])}));return function(){return t.apply(this,arguments)}}();e().catch(k("useManageMangaLibraryState::updateLibraryState"))},[f,p,h]);return{updateLibraryState:y,isInLibrary:null!==(t=null===(r=V.getFromCache(n.id,U(e||(m=["\n                    fragment MangaInLibraryState on MangaType {\n                        inLibrary\n                    }\n                "],g||(g=m.slice(0)),e=Object.freeze(Object.defineProperties(m,{raw:{value:Object.freeze(g)}})))),"MangaInLibraryState"))||void 0===r?void 0:r.inLibrary)&&void 0!==t?t:f}})}}})}();
