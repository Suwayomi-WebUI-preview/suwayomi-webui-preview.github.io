!function(){function e(t){return e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e(t)}function t(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */var e,o,r="function"==typeof Symbol?Symbol:{},a=r.iterator||"@@iterator",i=r.toStringTag||"@@toStringTag";function l(t,r,a,i){var l=r&&r.prototype instanceof d?r:d,c=Object.create(l.prototype);return n(c,"_invoke",function(t,n,r){var a,i,l,d=0,c=r||[],u=!1,p={p:0,n:0,v:e,a:h,f:h.bind(e,4),d:function(t,n){return a=t,i=0,l=e,p.n=n,s}};function h(t,n){for(i=t,l=n,o=0;!u&&d&&!r&&o<c.length;o++){var r,a=c[o],h=p.p,f=a[2];t>3?(r=f===n)&&(l=a[(i=a[4])?5:(i=3,3)],a[4]=a[5]=e):a[0]<=h&&((r=t<2&&h<a[1])?(i=0,p.v=n,p.n=a[1]):h<f&&(r=t<3||a[0]>n||n>f)&&(a[4]=t,a[5]=n,p.n=f,i=0))}if(r||t>1)return s;throw u=!0,n}return function(r,c,f){if(d>1)throw TypeError("Generator is already running");for(u&&1===c&&h(c,f),i=c,l=f;(o=i<2?e:l)||!u;){a||(i?i<3?(i>1&&(p.n=-1),h(i,l)):p.n=l:p.v=l);try{if(d=2,a){if(i||(r="next"),o=a[r]){if(!(o=o.call(a,l)))throw TypeError("iterator result is not an object");if(!o.done)return o;l=o.value,i<2&&(i=0)}else 1===i&&(o=a.return)&&o.call(a),i<2&&(l=TypeError("The iterator does not provide a '"+r+"' method"),i=1);a=e}else if((o=(u=p.n<0)?l:t.call(n,p))!==s)break}catch(o){a=e,i=1,l=o}finally{d=1}}return{value:o,done:u}}}(t,a,i),!0),c}var s={};function d(){}function c(){}function u(){}o=Object.getPrototypeOf;var p=[][a]?o(o([][a]())):(n(o={},a,function(){return this}),o),h=u.prototype=d.prototype=Object.create(p);function f(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,u):(e.__proto__=u,n(e,i,"GeneratorFunction")),e.prototype=Object.create(h),e}return c.prototype=u,n(h,"constructor",u),n(u,"constructor",c),c.displayName="GeneratorFunction",n(u,i,"GeneratorFunction"),n(h),n(h,i,"Generator"),n(h,a,function(){return this}),n(h,"toString",function(){return"[object Generator]"}),(t=function(){return{w:l,m:f}})()}function n(e,t,o,r){var a=Object.defineProperty;try{a({},"",{})}catch(e){a=0}n=function(e,t,o,r){function i(t,o){n(e,t,function(e){return this._invoke(t,o,e)})}t?a?a(e,t,{value:o,enumerable:!r,configurable:!r,writable:!r}):e[t]=o:(i("next",0),i("throw",1),i("return",2))},n(e,t,o,r)}function o(e,t,n,o,r,a,i){try{var l=e[a](i),s=l.value}catch(e){return void n(e)}l.done?t(s):Promise.resolve(s).then(o,r)}function r(e){return function(e){if(Array.isArray(e))return c(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||d(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,o)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach(function(t){l(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function l(t,n,o){return(n=function(t){var n=function(t,n){if("object"!=e(t)||!t)return t;var o=t[Symbol.toPrimitive];if(void 0!==o){var r=o.call(t,n||"default");if("object"!=e(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===n?String:Number)(t)}(t,"string");return"symbol"==e(n)?n:n+""}(n))in t?Object.defineProperty(t,n,{value:o,enumerable:!0,configurable:!0,writable:!0}):t[n]=o,t}function s(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var o,r,a,i,l=[],s=!0,d=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;s=!1}else for(;!(s=(o=a.call(n)).done)&&(l.push(o.value),l.length!==t);s=!0);}catch(e){d=!0,r=e}finally{try{if(!s&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(d)throw r}}return l}}(e,t)||d(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function d(e,t){if(e){if("string"==typeof e)return c(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?c(e,t):void 0}}function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=Array(t);n<t;n++)o[n]=e[n];return o}System.register(["./index-legacy-FvHYs0Ew.js","./NumberSetting-legacy-DHIDo_Im.js","./usePersistedValue-legacy-Jn-pRs6e.js","./Switch-legacy-DOHMnPA9.js","./SelectSetting-legacy-DNoK9jKv.js","./CategoriesInclusionSetting-legacy-BlCKWGK_.js","./EmptyViewAbsoluteCentered-legacy-CAsiCiEe.js","./useAppTitle-legacy-gk-Quvb7.js","./Delete-legacy-mwkFfbGR.js","./ListSubheader-legacy-BhRTJV2C.js","./Slider-legacy-Cqdas6k1.js","./SwitchBase-legacy-CehhzFO1.js","./Select-legacy-DtTeeo6H.js","./ThreeStateCheckboxInput-legacy-BfClD5EB.js","./Checkbox-legacy-xtiUC_xy.js"],function(e,n){"use strict";var a,d,c,u,p,h,f,g,m,b,w,y,v,j,x,_,C,S,T,D,k,O,P,A,L,N,F,E,I,U,M,V,G,W,R,z,B,$,q,H,Q;return{setters:[function(e){a=e.u,d=e.j,c=e.M,u=e.s,p=e.v,h=e.bz,f=e.$,g=e.m,m=e.g,b=e.f,w=e.aQ,y=e.o,v=e.p,j=e.q,x=e.bb,_=e.b,C=e.w,S=e.B,T=e.bA,D=e.b7,k=e.bB,O=e.C,P=e.I,A=e.bh,L=e.r,N=e.b8,F=e.e,E=e.i,I=e.k,U=e.b6,M=e.F},function(e){V=e.N},function(e){G=e.u,W=e.g},function(e){R=e.S},function(e){z=e.S},function(e){B=e.a},function(e){$=e.E},function(e){q=e.u},function(e){H=e.D},function(e){Q=e.L},null,null,null,null,null],execute:function(){var n=function(e){var t=e.downloadAheadLimit,n=a().t,o=!!t,r=s(G("lastDownloadAheadLimit",h.default,t,W),2),i=r[0],l=r[1],b=function(e){l(0===e?i:e),f("downloadAheadLimit",e).catch(function(e){return g(n("global.error.label.failed_to_save_changes"),"error",m(e))})};return d.jsxs(c,{children:[d.jsxs(u,{children:[d.jsx(p,{primary:n("download.settings.download_ahead.label.while_reading")}),d.jsx(R,{edge:"end",checked:o,onChange:function(e){return t=e.target.checked,void b(t?i:0);var t}})]}),d.jsx(V,{settingTitle:n("download.settings.download_ahead.label.unread_chapters_to_download"),settingValue:n("download.settings.download_ahead.label.value",{chapters:i,count:i}),value:i,minValue:h.min,maxValue:h.max,defaultValue:h.default,stepSize:h.step,showSlider:!0,dialogDescription:n("download.settings.download_ahead.label.description"),dialogDisclaimer:n("download.settings.download_ahead.label.disclaimer"),valueUnit:n("chapter.title_one"),handleUpdate:b,disabled:!o})]})},X={0:{text:"global.label.disabled"},1:{text:"download.settings.delete_chapters.while_reading.option.label.first"},2:{text:"download.settings.delete_chapters.while_reading.option.label.second"},3:{text:"download.settings.delete_chapters.while_reading.option.label.third"},4:{text:"download.settings.delete_chapters.while_reading.option.label.fourth"},5:{text:"download.settings.delete_chapters.while_reading.option.label.fifth"}},J=[0,1,2,3,4,5].map(function(e){return[e,X[e]]}),K=function(e){var t=e.chapterToDelete,n=e.handleChange,o=a().t,r=function(e){return"boolean"==typeof e?Number(e):e}(t);return d.jsx(z,{settingName:o("download.settings.delete_chapters.while_reading.label.title"),value:r,values:J,handleChange:n})},Y="default",Z="image/",ee=function(e){return e.replace(Z,"")},te=function(e){return ee(e.toLowerCase().trim())===Y},ne=function(e,t,n){return n.slice(0,t).some(function(t){return t.mimeType===e})},oe=function(e){return null==e||e>=k.min&&e<=k.max},re=function(e){return e.map(function(e){return i(i({},e),{},{mimeType:ee(e.mimeType),target:ee(e.target)})})},ae=function(e){return e.filter(function(e){var t=e.mimeType,n=e.target;return!!t&&!!n}).map(function(e){return i(i({},e),{},{mimeType:(t=e.mimeType,te(t)?Y:"".concat(Z).concat(t)),target:"".concat(Z).concat(e.target)});var t})},ie=function(e){var t=e.some(function(e){var t=e.mimeType;return te(t)});return[].concat(r(t?[]:[{mimeType:Y,target:"",compressionLevel:null}]),r(e))},le=function(e){var t=e.shouldAutoFocus,n=e.isDefault,o=e.isDuplicate,r=e.label,i=e.value,l=e.onUpdate,s=a().t;return d.jsx(D,{sx:{maxWidth:150},autoFocus:t,label:r,value:i,disabled:n,error:o,helperText:o&&s("global.error.label.invalid_input"),slotProps:{input:{startAdornment:d.jsx(A,{position:"start",children:Z})}},onChange:function(e){return l(e.target.value.trim())}})},se=function(e){var t=e.shouldAutoFocusMimeTypeTextField,n=e.conversion,o=n.mimeType,r=n.target,i=n.compressionLevel,l=e.setFocusMimeTypeTextField,s=e.onChange,c=e.isDuplicate,u=a().t,p=oe(i),h=te(o)&&!c,f=h&&!r&&null==i;return d.jsxs(_,{sx:{gap:1,flexDirection:"row",flexWrap:"nowrap",alignItems:"center",pt:1},children:[d.jsxs(_,{sx:{gap:1,flexDirection:"row",alignItems:"baseline",flexWrap:"wrap"},children:[d.jsx(le,{shouldAutoFocus:t,isDefault:h,isDuplicate:c,label:u("download.settings.conversion.mime_type"),value:o,onUpdate:function(e){l(!0),s({mimeType:e,target:r,compressionLevel:i})}}),d.jsx(T,{sx:{mx:1},children:"→"}),d.jsx(le,{shouldAutoFocus:!1,isDefault:!1,isDuplicate:!1,label:u("download.settings.conversion.target"),value:r,onUpdate:function(e){return s({mimeType:o,target:e,compressionLevel:i})}}),d.jsx(D,{label:u("download.settings.conversion.compression_level"),value:null!=i?i:"",type:"number",error:!p,helperText:p?"":u("global.error.label.invalid_input"),slotProps:{input:{inputProps:k}},onChange:function(e){s({mimeType:o,target:r,compressionLevel:e.target.value?Number(e.target.value):void 0})}})]}),d.jsx(O,{disabled:f,title:u("chapter.action.download.delete.label.action"),children:d.jsx(P,{disabled:f,onClick:function(){l(!1),s(null)},children:d.jsx(H,{})})})]})},de=function(e){var n=e.conversions,i=e.updateSetting,l=a().t,c=s(b.useState(!1),2),u=c[0],h=c[1],f=s(b.useState(re(ie(n))),2),g=f[0],m=f[1],T=s(b.useState(-1),2),D=T[0],k=T[1],O=function(e){return e.some(function(t,n){var o=t.mimeType,r=t.compressionLevel;return!oe(r)||ne(o,n,e)})}(g),P=function(e,t){return e.length!==t.length||e.some(function(e,n){var o=e.mimeType,r=e.target,a=e.compressionLevel,i=t[n];return ee(o)!==i.mimeType||ee(r)!==i.target||a!==i.compressionLevel})}(re(ie(n)),g),A=function(){m(re(ie(arguments.length>0&&void 0!==arguments[0]?arguments[0]:n))),h(!1)},L=function(){A(n)},N=function(){var e,n=(e=t().m(function e(){return t().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,e.n=1,i(ae(g));case 1:A(ae(g)),e.n=3;break;case 2:e.p=2,e.v;case 3:return e.a(2)}},e,null,[[0,2]])}),function(){var t=this,n=arguments;return new Promise(function(r,a){var i=e.apply(t,n);function l(e){o(i,r,a,l,s,"next",e)}function s(e){o(i,r,a,l,s,"throw",e)}l(void 0)})});return function(){return n.apply(this,arguments)}}();return d.jsxs(d.Fragment,{children:[d.jsx(w,{disabled:!1,onClick:function(){return h(!0)},children:d.jsx(p,{primary:l("download.settings.conversion.title"),secondary:n.map(function(e){return"".concat(e.mimeType," → ").concat(e.target)}).join("; "),secondaryTypographyProps:{style:{display:"flex",flexDirection:"column"}}})}),d.jsxs(y,{open:u,onClose:L,children:[d.jsx(v,{children:l("download.settings.conversion.title")}),d.jsxs(j,{children:[d.jsx(x,{sx:{mb:2,whiteSpace:"pre-line"},children:l("download.settings.conversion.description",{value:"none"})}),d.jsx(_,{sx:{flexDirection:"column",gap:3},children:g.map(function(e,t){var n=e.mimeType,o=ne(n,t,g),a=t===D;return d.jsx(se,{conversion:e,isDuplicate:o,setFocusMimeTypeTextField:function(e){return k(e?t:-1)},shouldAutoFocusMimeTypeTextField:a,onChange:function(e){m(function(n){return ie(n.toSpliced.apply(n,[t,1].concat(r(e?[e]:[]))))})}},"".concat(n,"-").concat(t))})})]}),d.jsx(C,{children:d.jsxs(_,{direction:"row",sx:{justifyContent:"space-between",width:"100%"},children:[d.jsx(S,{variant:"outlined",onClick:function(){m(function(e){return[].concat(r(e),[{mimeType:"",target:"",compressionLevel:null}])})},children:l("global.button.add")}),d.jsxs(_,{direction:"row",children:[d.jsx(S,{onClick:L,children:l("global.button.cancel")}),d.jsx(S,{disabled:O||!P,onClick:N,children:l("global.button.ok")})]})]})})]})]})};e("DownloadSettings",function(){var e,t,o,r=a().t;q(r("download.title.download"));var i=L.useGetCategories(N),h=L.useGetServerSettings({notifyOnNetworkStatusChange:!0}),f=s(L.useUpdateServerSettings(),1)[0],b=F(),w=b.settings,y=b.loading,v=b.request,j=v.error,x=v.refetch;if(h.loading||y||i.loading)return d.jsx(E,{});var _=null!==(e=null!==(t=h.error)&&void 0!==t?t:j)&&void 0!==e?e:i.error;if(_)return d.jsx($,{message:r("global.error.label.failed_to_load_data"),messageExtra:m(_),retry:function(){h.error&&h.refetch().catch(I()),j&&x().catch(I()),i.error&&i.refetch().catch(I())}});var C=h.data.settings,S=function(e,t){var n=f({variables:{input:{settings:l({},e,t)}}});return n.catch(function(e){return g(r("global.error.label.failed_to_save_changes"),"error",m(e))}),n},T=M(function(e){return g(r("global.error.label.failed_to_save_changes"),"error",m(e))});return d.jsxs(c,{sx:{pt:0},children:[d.jsx(U,{settingName:r("download.settings.download_path.label.title"),dialogDescription:r("download.settings.download_path.label.description"),value:null==C?void 0:C.downloadsPath,settingDescription:null!=C&&C.downloadsPath.length?C.downloadsPath:r("global.label.default"),handleChange:function(e){return S("downloadsPath",e)}}),d.jsxs(u,{children:[d.jsx(p,{primary:r("download.settings.file_type.label.cbz")}),d.jsx(R,{edge:"end",checked:!(null==C||!C.downloadAsCbz),onChange:function(e){return S("downloadAsCbz",e.target.checked)}})]}),d.jsx(de,{conversions:null==C?void 0:C.downloadConversions,updateSetting:function(e){return S("downloadConversions",e)}}),d.jsxs(c,{subheader:d.jsx(Q,{component:"div",id:"download-settings-auto-delete-downloads",children:r("download.settings.delete_chapters.title")}),children:[d.jsxs(u,{children:[d.jsx(p,{primary:r("download.settings.delete_chapters.label.manually_marked_as_read")}),d.jsx(R,{edge:"end",checked:w.deleteChaptersManuallyMarkedRead,onChange:function(e){return T("deleteChaptersManuallyMarkedRead",e.target.checked)}})]}),d.jsx(K,{chapterToDelete:w.deleteChaptersWhileReading,handleChange:function(e){return T("deleteChaptersWhileReading",e)}}),d.jsxs(u,{children:[d.jsx(p,{primary:r("download.settings.delete_chapters.label.allow_deletion_of_bookmarked")}),d.jsx(R,{edge:"end",checked:w.deleteChaptersWithBookmark,onChange:function(e){return T("deleteChaptersWithBookmark",e.target.checked)}})]})]}),d.jsxs(c,{subheader:d.jsx(Q,{component:"div",id:"download-settings-auto-download",children:r("download.settings.auto_download.title")}),children:[d.jsxs(u,{children:[d.jsx(p,{primary:r("download.settings.auto_download.label.new_chapters")}),d.jsx(R,{edge:"end",checked:!(null==C||!C.autoDownloadNewChapters),onChange:function(e){return S("autoDownloadNewChapters",e.target.checked)}})]}),d.jsx(V,{disabled:!(null!=C&&C.autoDownloadNewChapters),settingTitle:r("download.settings.auto_download.download_limit.label.title"),dialogDescription:r("download.settings.auto_download.download_limit.label.description"),value:null!==(o=null==C?void 0:C.autoDownloadNewChaptersLimit)&&void 0!==o?o:0,settingValue:C.autoDownloadNewChaptersLimit?r("download.settings.download_ahead.label.value",{chapters:C.autoDownloadNewChaptersLimit,count:C.autoDownloadNewChaptersLimit}):r("global.label.none"),defaultValue:0,minValue:0,maxValue:20,showSlider:!0,valueUnit:r("chapter.title_one"),handleUpdate:function(e){return S("autoDownloadNewChaptersLimit",e)}}),d.jsxs(u,{children:[d.jsx(p,{primary:r("download.settings.auto_download.label.ignore_with_unread_chapters")}),d.jsx(R,{edge:"end",checked:!(null==C||!C.excludeEntryWithUnreadChapters),onChange:function(e){return S("excludeEntryWithUnreadChapters",e.target.checked)},disabled:!(null!=C&&C.autoDownloadNewChapters)})]}),d.jsxs(u,{children:[d.jsx(p,{primary:r("download.settings.auto_download.label.ignore_re_uploads")}),d.jsx(R,{edge:"end",checked:!(null==C||!C.autoDownloadIgnoreReUploads),onChange:function(e){return S("autoDownloadIgnoreReUploads",e.target.checked)},disabled:!(null!=C&&C.autoDownloadNewChapters)})]}),d.jsx(B,{categories:i.data.categories.nodes,includeField:"includeInDownload",dialogText:r("download.settings.auto_download.categories.label.include_in_download")})]}),d.jsx(c,{subheader:d.jsx(Q,{component:"div",id:"download-settings-download-ahead",children:r("download.settings.download_ahead.title")}),children:d.jsx(n,{downloadAheadLimit:w.downloadAheadLimit})})]})})}}})}();
