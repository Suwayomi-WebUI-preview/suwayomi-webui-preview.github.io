import{u as T,c as v,N as C,W as U,a as h,d as w,j as s,v as o,aH as n,h as N,E as A,k as _,am as i,U as d}from"./index-CS80_GAI.js";import{T as l}from"./TextSetting-OXu8-vjj.js";import{N as m}from"./NumberSetting-CbtOdrrF.js";import{S as L}from"./SelectSetting-kurGmjUO.js";import{S as c}from"./Switch-Bvr0gylJ.js";import{T as V}from"./Trans-CAiRwsD6.js";import{L as D}from"./Link-28mUXDs0.js";import"./PasswordTextField-DkMaObyp.js";import"./TextField-Bk1LEc6p.js";import"./InputAdornment-DJk0_XRV.js";import"./Info-DlR8RElm.js";import"./Select-DKpDfkVB.js";import"./SwitchBase-C-B40Ueg.js";const q=e=>({ip:e.ip,port:e.port,socksProxyEnabled:e.socksProxyEnabled,socksProxyVersion:e.socksProxyVersion,socksProxyHost:e.socksProxyHost,socksProxyPort:e.socksProxyPort,socksProxyUsername:e.socksProxyUsername,socksProxyPassword:e.socksProxyPassword,debugLogsEnabled:e.debugLogsEnabled,gqlDebugLogsEnabled:e.gqlDebugLogsEnabled,systemTrayEnabled:e.systemTrayEnabled,basicAuthEnabled:e.basicAuthEnabled,basicAuthUsername:e.basicAuthUsername,basicAuthPassword:e.basicAuthPassword,flareSolverrEnabled:e.flareSolverrEnabled,flareSolverrTimeout:e.flareSolverrTimeout,flareSolverrUrl:e.flareSolverrUrl,flareSolverrSessionName:e.flareSolverrSessionName,flareSolverrSessionTtl:e.flareSolverrSessionTtl}),Q=()=>{const{t:e}=T(),{setTitle:b,setAction:x}=v.useContext(C);U("settings"),v.useEffect(()=>(b(e("settings.server.title.settings")),x(null),()=>{b(""),x(null)}),[e]);const{data:f,loading:S,error:p,refetch:y}=h.useGetServerSettings({notifyOnNetworkStatusChange:!0}),[j]=h.useUpdateServerSettings(),[k,P]=w("serverBaseURL",window.location.origin),E=r=>{const u=r.replaceAll(/(\/)+$/g,"");P(u),h.reset()},a=(r,u)=>{j({variables:{input:{settings:{[r]:u}}}})},g=v.useMemo(()=>s.jsx(o,{subheader:s.jsx(n,{component:"div",id:"server-settings-client",children:e("global.label.client")}),children:s.jsx(l,{settingName:e("settings.about.server.label.address"),handleChange:E,value:k,placeholder:"http://localhost:4567"})}),[]);if(S)return s.jsxs(s.Fragment,{children:[g,s.jsx(N,{})]});if(p)return s.jsxs(s.Fragment,{children:[g,s.jsx(A,{message:e("global.error.label.failed_to_load_data"),messageExtra:p.message,retry:()=>y().catch(_())})]});const t=q(f.settings);return s.jsxs(o,{children:[g,s.jsxs(o,{subheader:s.jsx(n,{component:"div",id:"server-settings-server-address",children:e("settings.server.address.server.title")}),children:[s.jsx(l,{settingName:e("settings.server.address.server.label.ip"),handleChange:r=>a("ip",r),value:t.ip,placeholder:"0.0.0.0"}),s.jsx(m,{settingTitle:e("settings.server.address.server.label.port"),settingValue:t.port.toString(),handleUpdate:r=>a("port",r),value:t.port,defaultValue:4567,valueUnit:e("settings.server.address.server.label.port")})]}),s.jsxs(o,{subheader:s.jsx(n,{component:"div",id:"server-settings-socks-proxy",children:e("settings.server.socks_proxy.title")}),children:[s.jsxs(i,{children:[s.jsx(d,{primary:e("settings.server.socks_proxy.label.enable")}),s.jsx(c,{edge:"end",checked:t.socksProxyEnabled,onChange:r=>a("socksProxyEnabled",r.target.checked)})]}),s.jsx(L,{settingName:e("settings.server.socks_proxy.label.version"),value:t.socksProxyVersion,values:[[4,{text:"4"}],[5,{text:"5"}]],handleChange:r=>a("socksProxyVersion",r)}),s.jsx(l,{settingName:e("settings.server.socks_proxy.label.host"),value:t.socksProxyHost,handleChange:r=>a("socksProxyHost",r)}),s.jsx(l,{settingName:e("settings.server.socks_proxy.label.port"),value:t.socksProxyPort,handleChange:r=>a("socksProxyPort",r)}),s.jsx(l,{settingName:e("settings.server.socks_proxy.label.username"),value:t.socksProxyUsername,handleChange:r=>a("socksProxyUsername",r)}),s.jsx(l,{settingName:e("settings.server.socks_proxy.label.password"),value:t.socksProxyPassword,handleChange:r=>a("socksProxyPassword",r),isPassword:!0})]}),s.jsxs(o,{subheader:s.jsx(n,{component:"div",id:"server-settings-auth",children:e("settings.server.auth.title")}),children:[s.jsxs(i,{children:[s.jsx(d,{primary:e("settings.server.auth.basic.label.enable")}),s.jsx(c,{edge:"end",checked:t.basicAuthEnabled,onChange:r=>a("basicAuthEnabled",r.target.checked)})]}),s.jsx(l,{settingName:e("settings.server.auth.basic.label.username"),value:t.basicAuthUsername,handleChange:r=>a("basicAuthUsername",r)}),s.jsx(l,{settingName:e("settings.server.auth.basic.label.password"),value:t.basicAuthPassword,isPassword:!0,handleChange:r=>a("basicAuthPassword",r)})]}),s.jsxs(o,{subheader:s.jsx(n,{component:"div",id:"server-settings-clouadflare-bypass",children:e("settings.server.cloudflare.title")}),children:[s.jsxs(i,{children:[s.jsx(d,{primary:e("settings.server.cloudflare.flaresolverr.enabled.label.title"),secondary:s.jsxs(V,{i18nKey:"settings.server.cloudflare.flaresolverr.enabled.label.description",children:["See",s.jsx(D,{href:"https://github.com/FlareSolverr/FlareSolverr?tab=readme-ov-file#installation",target:"_blank",rel:"noreferrer",children:"FlareSolverr"}),"for information on how to set it up"]})}),s.jsx(c,{edge:"end",checked:t.flareSolverrEnabled,onChange:r=>a("flareSolverrEnabled",r.target.checked)})]}),s.jsx(l,{settingName:e("settings.server.cloudflare.flaresolverr.url.label.title"),dialogDescription:e("settings.server.cloudflare.flaresolverr.url.label.description"),value:t.flareSolverrUrl,handleChange:r=>a("flareSolverrUrl",r)}),s.jsx(m,{settingTitle:e("settings.server.cloudflare.flaresolverr.timeout.label.title"),settingValue:e("global.time.seconds.value",{count:t.flareSolverrTimeout}),dialogDescription:e("settings.server.cloudflare.flaresolverr.timeout.label.description"),value:t.flareSolverrTimeout,defaultValue:60,minValue:20,maxValue:60*5,stepSize:1,showSlider:!0,valueUnit:e("global.time.seconds.second_other"),handleUpdate:r=>a("flareSolverrTimeout",r)}),s.jsx(l,{settingName:e("settings.server.cloudflare.flaresolverr.session.name.label.title"),value:t.flareSolverrSessionName,handleChange:r=>a("flareSolverrSessionName",r)}),s.jsx(m,{settingTitle:e("settings.server.cloudflare.flaresolverr.session.ttl.label.title"),settingValue:e("global.time.minutes.value",{count:t.flareSolverrSessionTtl}),dialogDescription:e("settings.server.cloudflare.flaresolverr.session.ttl.label.description"),value:t.flareSolverrSessionTtl,defaultValue:15,minValue:1,maxValue:60,stepSize:1,showSlider:!0,valueUnit:e("global.time.minutes.minute_other"),handleUpdate:r=>a("flareSolverrSessionTtl",r)})]}),s.jsxs(o,{subheader:s.jsx(n,{component:"div",id:"server-settings-misc",children:e("settings.server.misc.title")}),children:[s.jsxs(i,{children:[s.jsx(d,{primary:e("settings.server.misc.log_level.label.server")}),s.jsx(c,{edge:"end",checked:t.debugLogsEnabled,onChange:r=>a("debugLogsEnabled",r.target.checked)})]}),s.jsxs(i,{children:[s.jsx(d,{primary:e("settings.server.misc.log_level.graphql.label.title"),secondary:e("settings.server.misc.log_level.graphql.label.description")}),s.jsx(c,{edge:"end",checked:t.gqlDebugLogsEnabled,onChange:r=>a("gqlDebugLogsEnabled",r.target.checked)})]}),s.jsxs(i,{children:[s.jsx(d,{primary:e("settings.server.misc.tray_icon.label.title"),secondary:e("settings.server.misc.tray_icon.label.description")}),s.jsx(c,{edge:"end",checked:t.systemTrayEnabled,onChange:r=>a("systemTrayEnabled",r.target.checked)})]})]})]})};export{Q as ServerSettings};
