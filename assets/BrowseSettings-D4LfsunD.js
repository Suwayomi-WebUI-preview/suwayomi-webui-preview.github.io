import{u as P,f as u,N as E,g as I,r as o,q as N,j as t,k as C,E as M,l as i,m as T,v as L,aM as g,aB as d,bN as k,n as h,y as R}from"./index-CquUQo3v.js";import{N as U}from"./NumberSetting-CNC_MFCS.js";import{M as B}from"./MutableListSetting-BwxFzD-s.js";import{T as V}from"./TextSetting-joSJ7Wi5.js";import{S as m}from"./Switch-0QBm7Jmi.js";import"./Info-Bq7fkH3-.js";import"./TextField-C2-uV8Pc.js";import"./InputAdornment-DRquAD5l.js";import"./PasswordTextField-CRQoBgLP.js";const q=e=>({maxSourcesInParallel:e.maxSourcesInParallel,localSourcePath:e.localSourcePath,extensionRepos:e.extensionRepos}),J=()=>{const{t:e}=P(),{setTitle:p,setAction:x}=u.useContext(E);u.useLayoutEffect(()=>{p(e("settings.browse.title")),x(null)},[e]);const[n,S]=I("showNsfw",!0),{data:b,loading:f,error:l,refetch:v}=o.useGetServerSettings({notifyOnNetworkStatusChange:!0}),[w]=o.useUpdateServerSettings(),r=(s,_)=>{w({variables:{input:{settings:{[s]:_}}}}).catch(j=>h(e("global.error.label.failed_to_save_changes"),"error",i(j)))},{settings:{hideLibraryEntries:c}}=N(),y=R(s=>h(e("global.error.label.failed_to_save_changes"),"error",i(s)));if(f)return t.jsx(C,{});if(l)return t.jsx(M,{message:e("global.error.label.failed_to_load_data"),messageExtra:i(l),retry:()=>v().catch(T())});const a=q(b.settings);return t.jsxs(L,{sx:{pt:0},children:[t.jsxs(g,{children:[t.jsx(d,{primary:e("settings.label.hide_library_entries")}),t.jsx(m,{edge:"end",checked:c,onChange:()=>y("hideLibraryEntries",!c)})]}),t.jsxs(g,{children:[t.jsx(d,{primary:e("settings.label.show_nsfw"),secondary:e("settings.label.show_nsfw_description")}),t.jsx(m,{edge:"end",checked:n,onChange:()=>S(!n)})]}),t.jsx(U,{settingTitle:e("settings.server.requests.sources.parallel.label.title"),settingValue:e("settings.server.requests.sources.parallel.label.value",{value:a.maxSourcesInParallel,count:a.maxSourcesInParallel}),valueUnit:e("source.title_one"),value:a.maxSourcesInParallel,defaultValue:6,minValue:1,maxValue:20,showSlider:!0,stepSize:1,handleUpdate:s=>r("maxSourcesInParallel",s)}),t.jsx(B,{settingName:e("extension.settings.repositories.custom.label.title"),description:e("extension.settings.repositories.custom.label.description"),dialogDisclaimer:t.jsxs(k,{i18nKey:"extension.settings.repositories.custom.label.disclaimer",children:[t.jsx("strong",{children:"Suwayomi does not provide any support for 3rd party repositories or extensions!"}),t.jsx("br",{}),"Use with caution as there could be malicious actors making those repositories.",t.jsx("br",{}),"You as the user need to verify the security and that you trust any repository or extension."]}),handleChange:s=>{r("extensionRepos",s),o.clearExtensionCache()},valueInfos:a.extensionRepos.map(s=>[s]),addItemButtonTitle:e("extension.settings.repositories.custom.dialog.action.button.add"),placeholder:"https://github.com/MY_ACCOUNT/MY_REPO/tree/repo",validateItem:s=>!!s.match(/https:\/\/(www\.|raw\.)?(github|githubusercontent)\.com\/([^/]+)\/([^/]+)((\/tree|\/blob)?\/([^/\n]*))?(\/([^/\n]*\.json)?)?/g),invalidItemError:e("extension.settings.repositories.custom.error.label.invalid_url")}),t.jsx(V,{settingName:e("settings.server.local_source.path.label.title"),dialogDescription:e("settings.server.local_source.path.label.description"),value:a.localSourcePath,settingDescription:a.localSourcePath.length?a.localSourcePath:e("global.label.default"),handleChange:s=>r("localSourcePath",s)})]})};export{J as BrowseSettings};
