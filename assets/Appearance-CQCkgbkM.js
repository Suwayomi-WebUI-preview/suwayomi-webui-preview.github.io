import{c as Y,j as e,u as v,b as l,B as $,aC as G,C as k,bO as N,ap as Q,aq as P,f as U,c$ as X,d0 as J,G as j,I as E,a4 as Z,d1 as D,m as g,g as b,e as V,d2 as ee,i as z,aM as te,k as H,F,d3 as ae,R as se,d4 as p,M as A,s as C,v as y,aA as T,c_ as re,d5 as ie,d6 as L,l as oe,d7 as M,d8 as ne}from"./index-CnB8qTzX.js";import{S as R}from"./Select-Dry1-d0G.js";import{N as le}from"./NumberSetting-BaPg-v2B.js";import{T as O}from"./CreateThemeDialog-C_VVBTYU.js";import{C as de}from"./CheckCircle-Dk1b128l.js";import{D as ce}from"./Delete-DTUeWA8o.js";import{E as me}from"./Edit-CP7IDW9M.js";import{C as he}from"./Card-eDlHDBVI.js";import{C as pe}from"./CardActionArea-DwMNTEAG.js";import{E as ge}from"./EmptyViewAbsoluteCentered-Bg_mLmEt.js";import{u as xe}from"./useAppTitle-2CqwBTgW.js";import{S}from"./Switch-23Tnj6Gs.js";import{L as ue}from"./Link-DTTIwp-4.js";import{L as B}from"./ListSubheader-CBZ25tB-.js";import"./Slider-B81NXvQH.js";import"./CheckboxInput-BOklNtxO.js";import"./Checkbox-D27EB50A.js";import"./SwitchBase-BwLtvHvZ.js";import"./Trans-CdLdx69A.js";const je=Y(e.jsx("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2m5 11h-4v4h-2v-4H7v-2h4V7h2v4h4z"})),be=()=>{const{t}=v();return e.jsxs(l,{sx:{alignItems:"center",gap:1,minWidth:"150px",maxWidth:"150px"},children:[e.jsx($,{sx:{width:"100%",height:"225px"},variant:"contained",size:"large",onClick:()=>{G.show(O,{mode:"create"})},children:e.jsx(je,{fontSize:"large"})}),e.jsx(k,{title:t("settings.appearance.theme.create.title"),placement:"top",children:e.jsx(N,{sx:{maxWidth:"100%"},children:t("settings.appearance.theme.create.title")})})]})},W=Z(j)(()=>({width:"15px",height:"20px"})),fe=({appTheme:t,onDelete:r})=>{const{getName:x}=t,{t:i}=v(),f=Q(),{themeMode:u,setAppTheme:d,appTheme:s,shouldUsePureBlackMode:o}=P(),m=t.id===s,h=U.useMemo(()=>X(u,t,o),[t,u,o]);return e.jsxs(l,{sx:{justifyContent:"center",alignItems:"center",minWidth:"150px",maxWidth:"150px",gap:1},children:[e.jsx(J,{theme:h,children:e.jsxs(he,{sx:{width:"100%",height:"225px",position:"relative"},children:[e.jsx(j,{sx:{position:"absolute",top:0,right:0,bottom:0,left:0,border:"4px solid",borderColor:m?h.palette.primary.light:h.palette.grey[100],zIndex:1,pointerEvents:"none",borderRadius:1,...f.applyStyles("dark",{borderColor:m?h.palette.primary.light:h.palette.grey[900]})}}),e.jsx(pe,{sx:{height:"100%",backgroundColor:"background.default"},onClick:()=>{if(!D.hasMissing(t.muiTheme)){d(t.id);return}g(i("settings.appearance.theme.select.fonts.loading"),"info"),D.load(t.muiTheme).then(()=>d(t.id)).catch(_=>g(i("settings.appearance.theme.select.fonts.error"),"error",b(_)))},children:e.jsxs(l,{sx:{height:"100%",m:0},children:[e.jsxs(l,{sx:{height:"100%",gap:2,p:2},children:[e.jsxs(l,{sx:{maxHeight:"20px",flexDirection:"row",justifyContent:"space-between",alignItems:"flex-start"},children:[e.jsx(j,{sx:{width:"65%",height:"20px",backgroundColor:"primary.dark",borderRadius:1}}),e.jsxs(l,{sx:{alignItems:"center",gap:1,mt:-.25},children:[m&&e.jsx(de,{sx:{visibility:m?"visible":"hidden",color:"primary.light"}}),!m&&t.isCustom&&e.jsx(E,{onClick:n=>{n.preventDefault(),n.stopPropagation(),r()},component:"div",size:"small",sx:{mt:-.5},children:e.jsx(k,{title:i("global.button.delete"),children:e.jsx(ce,{})})}),t.isCustom&&e.jsx(E,{onClick:n=>{n.preventDefault(),n.stopPropagation(),G.show(O,{mode:"edit",appTheme:t})},component:"div",size:"small",children:e.jsx(k,{title:i("global.button.edit"),children:e.jsx(me,{})})})]})]}),e.jsx(j,{sx:{width:"55%",height:"65%",backgroundColor:"background.paper",p:1,borderRadius:1},children:e.jsxs(l,{sx:{width:"max-content",flexDirection:"row",overflow:"hidden",borderRadius:1},children:[e.jsx(W,{sx:{backgroundColor:"primary.main"}}),e.jsx(W,{sx:{backgroundColor:"secondary.main"}})]})})]}),e.jsxs(l,{sx:{height:"25%",backgroundColor:"background.paper",alignItems:"center",flexDirection:"row",gap:2,p:2},children:[e.jsx(j,{sx:{width:"20px",height:"20px",borderRadius:"50%",backgroundColor:"primary.main"}}),e.jsx(j,{sx:{flexGrow:1,height:"20px",borderRadius:1,backgroundColor:"primary.light"}})]})]})})]})}),e.jsx(k,{title:x(),placement:"top",children:e.jsx(N,{sx:{maxWidth:"100%"},children:x()})})]})},Ce=()=>{const{t}=v(),{settings:{customThemes:r},request:{loading:x,error:i,refetch:f}}=V(),u=U.useMemo(()=>[...ee,...Object.values(r).map(s=>({...s,getName:()=>s.id}))],[r]),d=F(s=>{throw s});return x?e.jsx(z,{}):i?e.jsx(te,{message:t("global.error.label.failed_to_load_data"),messageExtra:b(i),retry:()=>f().catch(H())}):e.jsxs(l,{sx:{flexDirection:"row",flexWrap:"no-wrap",alignItems:"start",overflowX:"auto",gap:1,mx:2},children:[e.jsx(be,{}),u.map(s=>e.jsx(fe,{appTheme:s,onDelete:()=>{g(t("settings.appearance.theme.delete.action",{theme:s.getName()}),"info"),d("customThemes",Object.fromEntries(Object.entries(r).filter(([o])=>o!==s.id))).then(()=>g(t("settings.appearance.theme.delete.success",{theme:s.getName()}),"success")).catch(o=>g(t("settings.appearance.theme.delete.failure",{theme:s.getName()}),"error",b(o)))}},s.id))]})},Ue=()=>{const{t,i18n:r}=v(),{themeMode:x,setThemeMode:i,shouldUsePureBlackMode:f,setShouldUsePureBlackMode:u}=P(),{mode:d,setMode:s}=ae(),o=d!=null?d:x;xe(t("settings.appearance.title"));const{settings:{mangaThumbnailBackdrop:m,mangaDynamicColorSchemes:h,mangaGridItemWidth:n},request:{loading:_,error:I,refetch:K}}=V(),w=F(a=>g(t("global.error.label.failed_to_save_changes"),"error",b(a))),q=se.getThemeMode(o)===p.DARK;return _?e.jsx(z,{}):I?e.jsx(ge,{message:t("global.error.label.failed_to_load_data"),messageExtra:b(I),retry:()=>K().catch(H())}):e.jsxs(A,{subheader:e.jsx(B,{component:"div",id:"appearance-theme",children:t("settings.appearance.theme.title")}),children:[e.jsxs(C,{children:[e.jsx(y,{primary:t("settings.appearance.theme.mode")}),e.jsxs(R,{value:o,onChange:a=>{const c=a.target.value;i(c),s(c),re.local.setItem(ie,c,!0)},children:[e.jsx(T,{value:p.SYSTEM,children:t("global.label.system")},p.SYSTEM),e.jsx(T,{value:p.DARK,children:t("global.label.dark")},p.DARK),e.jsx(T,{value:p.LIGHT,children:t("global.label.light")},p.LIGHT)]})]}),e.jsx(Ce,{}),q&&e.jsxs(C,{children:[e.jsx(y,{primary:t("settings.appearance.theme.pure_black_mode")}),e.jsx(S,{checked:f,onChange:(a,c)=>u(c)})]}),e.jsxs(A,{subheader:e.jsx(B,{component:"div",id:"appearance-theme",children:t("global.label.display")}),children:[e.jsxs(C,{children:[e.jsx(y,{primary:t("global.language.label.language"),secondary:e.jsxs(e.Fragment,{children:[e.jsxs("span",{children:[t("settings.label.language_description")," "]}),e.jsx(ue,{href:"https://hosted.weblate.org/projects/suwayomi/suwayomi-webui",target:"_blank",rel:"noreferrer",children:t("global.language.title.weblate")})]})}),e.jsx(R,{value:L.includes(r.language)?r.language:"en",onChange:({target:{value:a}})=>r.changeLanguage(a,c=>{c&&g(t("global.language.error.load"),"error",b(c))}),children:L.map(a=>e.jsx(T,{value:a,children:oe(a)},a))})]}),e.jsx(le,{settingTitle:t("settings.label.manga_item_width"),settingValue:"px: ".concat(n),value:n,defaultValue:ne.mangaGridItemWidth,minValue:M.min,maxValue:M.max,stepSize:M.step,valueUnit:"px",showSlider:!0,handleUpdate:a=>w("mangaGridItemWidth",a)}),e.jsxs(C,{children:[e.jsx(y,{primary:t("settings.appearance.manga_thumbnail_backdrop.title"),secondary:t("settings.appearance.manga_thumbnail_backdrop.description")}),e.jsx(S,{edge:"end",checked:m,onChange:a=>w("mangaThumbnailBackdrop",a.target.checked)})]}),e.jsxs(C,{children:[e.jsx(y,{primary:t("settings.appearance.manga_dynamic_color_schemes.title"),secondary:t("settings.appearance.manga_dynamic_color_schemes.description")}),e.jsx(S,{edge:"end",checked:h,onChange:a=>w("mangaDynamicColorSchemes",a.target.checked)})]})]})]})};export{Ue as Appearance};
