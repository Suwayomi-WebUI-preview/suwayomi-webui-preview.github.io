import{u as d,aF as I,r as m,b as k,h as C,j as e,e as T,g as E,f as S,bk as v,S as f,as as A,T as l,l as y,bl as P,x as b,B as _,aU as M,C as N,I as B,A as w,L as R,s as U,m as D}from"./index-DBfGTIZV.js";import{M as G}from"./Metadata-f8XN555T.js";import{u as F}from"./useAppTitle-DJFXX9Js.js";import{E as O}from"./EmptyViewAbsoluteCentered-rOGaD3Mh.js";import{I as H,b as g,u as V,a as q,g as z,t as K}from"./Extensions.utils-DvsEVpJg.js";import{S as W}from"./StyledGroupItemWrapper-Dm9He9t8.js";import{L as Y}from"./ListCardContent-3xEQSJ4a.js";import{S as h,u as J,c as Q}from"./Sources-CywTCAlm.js";import{M as X}from"./MUI.util-CYBuX_Wz.js";import{C as Z}from"./Card-GGkhWCKJ.js";import{C as $}from"./CardActionArea-D_OA_ZiX.js";import{S as ee}from"./Switch-__d_HYA7.js";import"./SwitchBase-COUmJuqQ.js";import"./useFormControl-x0-kuXF8.js";const te=({name:a,pkgName:s,iconUrl:r,repo:t})=>e.jsxs(f,{sx:{alignItems:"center"},children:[e.jsx(A,{alt:a,src:m.getValidImgUrlFor(r)}),e.jsx(l,{variant:"h5",component:"h2",children:a}),e.jsx(l,{variant:"body2",color:"textSecondary",children:s.replace("eu.kanade.tachiyomi.extension.","")}),t&&e.jsx(l,{variant:"body2",color:"textSecondary",children:t})]}),p=({addDivider:a=!0,...s})=>{var r;return e.jsxs(e.Fragment,{children:[e.jsx(G,{...s,stackProps:{...s.stackProps,sx:{...(r=s.stackProps)==null?void 0:r.sx,flexDirection:"column-reverse",alignItems:"center",flexGrow:1}},titleProps:{...s.titleProps,variant:"body2"}}),a&&e.jsx(M,{orientation:"vertical",sx:{height:"25px"}})]})},ae=({versionName:a,lang:s,isNsfw:r})=>{const{t}=d();return e.jsxs(f,{sx:{flexDirection:"row",justifyContent:"space-between",alignItems:"center"},children:[e.jsx(p,{title:t("global.label.version"),value:a}),e.jsx(p,{title:t("global.language.label.language"),value:y(s)}),r&&e.jsx(p,{title:t("extension.label.age_rating"),value:"18+",valueProps:{color:"error"}})]})},se=({pkgName:a,isInstalled:s,isObsolete:r,hasUpdate:t})=>{const o=P(),{t:i}=d(),n=z(s,r,t);return e.jsx(b,{sx:{px:1},children:e.jsx(_,{sx:{width:"100%",color:n===q.OBSOLETE?"red":"inherit"},variant:"outlined",size:"large",onClick:async()=>{const c=t?g.UPDATE:g.UNINSTALL;try{await V(a,r,c),c===g.UNINSTALL&&o()}catch(x){}},children:i(H[n])})})},re=a=>{const{id:s,isConfigurable:r}=a,{t}=d(),{isEnabled:o}=J(a),i=Q(a,n=>D(t("global.error.label.failed_to_save_changes"),"error",E(n)));return e.jsx(W,{sx:{px:0},children:e.jsx(Z,{children:e.jsx($,{onClick:()=>i("isEnabled",!o),children:e.jsxs(Y,{children:[e.jsx(l,{variant:"h6",component:"h3",sx:{flexGrow:1},children:K(h.getLanguage(a))}),r&&e.jsx(N,{title:t("settings.title"),children:e.jsx(B,{component:R,to:w.sources.childRoutes.configure.path(s),color:"inherit",onClick:n=>n.stopPropagation(),...X.preventRippleProp(),children:e.jsx(U,{})})}),e.jsx(ee,{checked:o})]})})})},s)},oe=({sources:a})=>e.jsx(b,{sx:{px:1},children:a.map(s=>e.jsx(re,{...s},s.id))}),Ee=()=>{var x;const{t:a}=d(),{pkgName:s}=I();F(a("source.extension_info.title"));const r=m.useGetExtension(s),t=m.useGetSourceList(),{extension:o}=(x=r.data)!=null?x:{},i=k.useMemo(()=>{var j;return(j=t.data)!=null&&j.sources?t.data.sources.nodes.filter(u=>u.extension.pkgName===(o==null?void 0:o.pkgName)).sort((u,L)=>C(h.getLanguage(u),h.getLanguage(L))):[]},[o==null?void 0:o.pkgName,t.data]),n=r.loading||t.loading,c=r.error||t.error;return n?e.jsx(T,{}):c?e.jsx(O,{message:a("global.error.label.failed_to_load_data"),messageExtra:E(r.error),retry:()=>{r.error&&r.refetch().catch(S()),t.error&&t.refetch().catch(S())}}):(v(o),e.jsxs(f,{sx:{gap:2},children:[e.jsx(te,{...o}),e.jsx(ae,{...o}),e.jsx(se,{...o}),e.jsx(oe,{sources:i})]}))};export{Ee as ExtensionInfo};
