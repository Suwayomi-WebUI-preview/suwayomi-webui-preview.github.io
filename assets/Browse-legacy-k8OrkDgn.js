!function(){function e(n){return e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e(n)}var n=["disabled","children"];function t(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */var e,n,o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",s=o.toStringTag||"@@toStringTag";function a(t,o,i,s){var a=o&&o.prototype instanceof u?o:u,l=Object.create(a.prototype);return r(l,"_invoke",function(t,r,o){var i,s,a,u=0,l=o||[],d=!1,f={p:0,n:0,v:e,a:g,f:g.bind(e,4),d:function(n,t){return i=n,s=0,a=e,f.n=t,c}};function g(t,r){for(s=t,a=r,n=0;!d&&u&&!o&&n<l.length;n++){var o,i=l[n],g=f.p,h=i[2];t>3?(o=h===r)&&(a=i[(s=i[4])?5:(s=3,3)],i[4]=i[5]=e):i[0]<=g&&((o=t<2&&g<i[1])?(s=0,f.v=r,f.n=i[1]):g<h&&(o=t<3||i[0]>r||r>h)&&(i[4]=t,i[5]=r,f.n=h,s=0))}if(o||t>1)return c;throw d=!0,r}return function(o,l,h){if(u>1)throw TypeError("Generator is already running");for(d&&1===l&&g(l,h),s=l,a=h;(n=s<2?e:a)||!d;){i||(s?s<3?(s>1&&(f.n=-1),g(s,a)):f.n=a:f.v=a);try{if(u=2,i){if(s||(o="next"),n=i[o]){if(!(n=n.call(i,a)))throw TypeError("iterator result is not an object");if(!n.done)return n;a=n.value,s<2&&(s=0)}else 1===s&&(n=i.return)&&n.call(i),s<2&&(a=TypeError("The iterator does not provide a '"+o+"' method"),s=1);i=e}else if((n=(d=f.n<0)?a:t.call(r,f))!==c)break}catch(n){i=e,s=1,a=n}finally{u=1}}return{value:n,done:d}}}(t,i,s),!0),l}var c={};function u(){}function l(){}function d(){}n=Object.getPrototypeOf;var f=[][i]?n(n([][i]())):(r(n={},i,function(){return this}),n),g=d.prototype=u.prototype=Object.create(f);function h(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,d):(e.__proto__=d,r(e,s,"GeneratorFunction")),e.prototype=Object.create(g),e}return l.prototype=d,r(g,"constructor",d),r(d,"constructor",l),l.displayName="GeneratorFunction",r(d,s,"GeneratorFunction"),r(g),r(g,s,"Generator"),r(g,i,function(){return this}),r(g,"toString",function(){return"[object Generator]"}),(t=function(){return{w:a,m:h}})()}function r(e,n,t,o){var i=Object.defineProperty;try{i({},"",{})}catch(e){i=0}r=function(e,n,t,o){function s(n,t){r(e,n,function(e){return this._invoke(n,t,e)})}n?i?i(e,n,{value:t,enumerable:!o,configurable:!o,writable:!o}):e[n]=t:(s("next",0),s("throw",1),s("return",2))},r(e,n,t,o)}function o(e,n,t,r,o,i,s){try{var a=e[i](s),c=a.value}catch(e){return void t(e)}a.done?n(c):Promise.resolve(c).then(r,o)}function i(e){return function(){var n=this,t=arguments;return new Promise(function(r,i){var s=e.apply(n,t);function a(e){o(s,r,i,a,c,"next",e)}function c(e){o(s,r,i,a,c,"throw",e)}a(void 0)})}}function s(e){return function(e){if(Array.isArray(e))return u(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||c(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function a(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){var t=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var r,o,i,s,a=[],c=!0,u=!1;try{if(i=(t=t.call(e)).next,0===n){if(Object(t)!==t)return;c=!1}else for(;!(c=(r=i.call(t)).done)&&(a.push(r.value),a.length!==n);c=!0);}catch(e){u=!0,o=e}finally{try{if(!c&&null!=t.return&&(s=t.return(),Object(s)!==s))return}finally{if(u)throw o}}return a}}(e,n)||c(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function c(e,n){if(e){if("string"==typeof e)return u(e,n);var t={}.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?u(e,n):void 0}}function u(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=Array(n);t<n;t++)r[t]=e[t];return r}function l(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),t.push.apply(t,r)}return t}function d(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?l(Object(t),!0).forEach(function(n){f(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):l(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}function f(n,t,r){return(t=function(n){var t=function(n,t){if("object"!=e(n)||!n)return n;var r=n[Symbol.toPrimitive];if(void 0!==r){var o=r.call(n,t||"default");if("object"!=e(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(n)}(n,"string");return"symbol"==e(t)?t:t+""}(t))in n?Object.defineProperty(n,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):n[t]=r,n}System.register(["./index-legacy-RhUnPd9L.js","./PushPin-legacy-CqfgPPLM.js","./PushPinOutlined-legacy-CFu9ezxo.js","./SourceMangas-legacy-DLGj8TpH.js","./MUI.util-legacy-D9xMlHDR.js","./ListCardAvatar-legacy-b_rwBdhz.js","./ListCardContent-legacy-B0os3gKv.js","./Card-legacy-i4boYTu0.js","./CardActionArea-legacy-BRTmtim-.js","./EmptyViewAbsoluteCentered-legacy-BihSaxZt.js","./Extensions.utils-legacy-BJdkuCr6.js","./useAppAction-legacy-xp2ERmwG.js","./StyledGroupHeader-legacy-fj2H65_6.js","./Virtuoso.util-legacy-DaUVJESN.js","./StyledGroupItemWrapper-legacy-BzQMAx1B.js","./SourceLanguageSelect-legacy-BgsJasHb.js","./file-selector-legacy-POg7DV-z.js","./Add-legacy-BJj-ljHA.js","./AppbarSearch-legacy-C6rRpy_H.js","./FilterList-legacy-CloWFRoL.js","./index-legacy-Enc0vCrv.js","./Switch-legacy-DlykvN6K.js","./use-window-event-legacy-DBsDZFq3.js","./Tabs-legacy-p4ppd_ax.js","./TabsWrapper-legacy-Bt6x5_ZG.js","./TabsMenu-legacy-UcDp8-5x.js","./SortRadioInput-legacy-BL14kFSB.js","./Chip-legacy-5faTvFhV.js","./useAppTitle-legacy-C4S0AVWc.js","./Virtuoso.constants-legacy-D12OcMfg.js","./IconWebView-legacy-DViHgWq8.js","./GridLayouts-legacy-B9Tg7YKQ.js","./Checkbox-legacy-CHeb2MpI.js","./SwitchBase-legacy-1Pmi8RIT.js","./ListPreference-legacy-BiB0QosS.js","./FormGroup-legacy-CcHdoP1d.js","./Delete-legacy-C5A0ZKb2.js","./CheckboxInput-legacy-J_9s6uVk.js","./ExpandMore-legacy-Be1Dih6C.js","./useDebounce-legacy-dzSHrE-D.js","./ThreeStateCheckboxInput-legacy-CtKgaEJK.js","./StyledFab-legacy-DdIs66aE.js","./BaseMangaGrid-legacy-C589BqmD.js","./MangaGrid-legacy-DvW4ZQ3q.js","./useManageMangaLibraryState-legacy-Chjya5gq.js","./Chapters-legacy-DoCsIJgs.js","./DateHelper-legacy-DvAjC-YL.js","./Asserts-legacy-CWE3_MKu.js","./Mangas-legacy-_b-FFBLs.js","./Download-legacy-DODb9AJx.js","./ContinueReadingTooltip-legacy-DK6PzBo6.js","./Trackers-legacy-CfAoco_b.js","./AvatarSpinner-legacy-C07ar-wk.js","./SpinnerImage-legacy-DCPiDa-0.js","./Refresh-legacy-zJKnejB3.js","./Image-legacy-B64sZG5Z.js","./CheckCircle-legacy-ThonFEVT.js","./Metadata-legacy-B1orAaTI.js","./Link-legacy-Bd4iTU_Z.js","./NumberSetting-legacy-D3kqJL5y.js","./Slider-legacy-9mx_hIkG.js","./useMobilePicker-legacy-B6Fo8l6a.js","./SelectSetting-legacy-U3_7-Wde.js","./Select-legacy-CIBwGK7s.js","./Sync-legacy-zzH1eujr.js","./use-merged-ref-legacy-CCIUMPvs.js","./PlayArrow-legacy-lqMAEPVv.js","./useAppTitleAndAction-legacy-D_9eyN11.js","./Strings-legacy-CzJ32ydF.js","./ListItemAvatar-legacy-DtMXJczI.js"],function(e,r){"use strict";var o,c,u,l,f,g,h,p,j,x,y,m,v,b,S,w,C,E,O,I,k,_,L,T,A,M,P,U,N,R,G,D,B,F,H,z,V,K,W,X,q,J,Q,Y,Z,$,ee,ne,te,re,oe,ie,se,ae,ce,ue,le,de,fe,ge,he,pe,je,xe,ye,me,ve,be,Se,we,Ce,Ee,Oe,Ie,ke,_e,Le,Te,Ae,Me,Pe,Ue,Ne,Re,Ge,De,Be,Fe,He,ze,Ve,Ke;return{setters:[function(e){o=e.c,c=e.j,u=e.u,l=e.a,f=e.S,g=e.A,h=e.L,p=e.r,j=e.b,x=e.T,y=e.l,m=e.B,v=e.C,b=e.I,S=e.d,w=e.m,C=e.g,E=e.e,O=e.f,I=e.D,k=e.h,_=e.i,L=e.k,T=e.t,A=e.n,M=e.o,P=e.p,U=e.q,N=e.s,R=e.v,G=e.w,D=e.x,B=e.y,F=e.z,H=e.E,z=e.F,V=e.G,K=e.H,W=e.J,X=e.K,q=e.M,J=e.N,Q=e.O,Y=e.P,Z=e.Q,$=e.R},function(e){ee=e.P},function(e){ne=e.P},function(e){te=e.SourceContentType},function(e){re=e.M},function(e){oe=e.L},function(e){ie=e.L},function(e){se=e.C},function(e){ae=e.C},function(e){ce=e.E},function(e){ue=e.i,le=e.t,de=e.g,fe=e.I,ge=e.a,he=e.E,pe=e.b,je=e.c,xe=e.u,ye=e.d,me=e.e,ve=e.f,be=e.h,Se=e.j,we=e.k},function(e){Ce=e.u},function(e){Ee=e.S,Oe=e.a},function(e){Ie=e.V},function(e){ke=e.S},function(e){_e=e.S},function(e){Le=e.f},function(e){Te=e.A},function(e){Ae=e.A},function(e){Me=e.F},function(e){Pe=e.q},function(e){Ue=e.S},function(e){Ne=e.u},function(e){Re=e.T,Ge=e.a},function(e){De=e.T},function(e){Be=e.T},function(e){Fe=e.A,He=e.a},function(e){ze=e.C},function(e){Ve=e.u},function(e){Ke=e.G},null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null],execute:function(){e("Browse",function(){var e=u(),n=e.i18n;e._;Ve(n._({id:"O2UpM1"}));var t=O.useRef(null),r=a(O.useState(0),2),o=r[0],i=r[1];Z(t,O.useCallback(function(){return i(t.current.offsetHeight)},[t.current]));var s=a(B(H.TAB,F,{}),2),l=s[0],d=s[1],f=null!=l?l:$.SOURCES;l||d(f,"replaceIn");return c.jsxs(De,{children:[c.jsxs(Be,{ref:t,sx:{zIndex:Ke},variant:"fullWidth",value:f,onChange:function(e,n){return d(n,"replaceIn")},children:[c.jsx(Re,{value:$.SOURCES,sx:{textTransform:"none"},label:n._({id:"wdxz7K"})}),c.jsx(Re,{value:$.EXTENSIONS,sx:{textTransform:"none"},label:n._({id:"V3sher"})}),c.jsx(Re,{value:$.MIGRATE,sx:{textTransform:"none"},label:n._({id:"y5rS9U"})})]}),c.jsx(Ge,{index:$.SOURCE_DEPRECATED,currentIndex:f,children:c.jsx(Xe,{tabsMenuHeight:o})}),c.jsx(Ge,{index:$.SOURCES,currentIndex:f,children:c.jsx(Xe,{tabsMenuHeight:o})}),c.jsx(Ge,{index:$.EXTENSIONS,currentIndex:f,children:c.jsx(en,{tabsMenuHeight:o})}),c.jsx(Ge,{index:$.MIGRATE,currentIndex:f,children:c.jsx(on,{tabsMenuHeight:o})})]})});var r=o(c.jsx("path",{d:"M19.3 16.9c.4-.7.7-1.5.7-2.4 0-2.5-2-4.5-4.5-4.5S11 12 11 14.5s2 4.5 4.5 4.5c.9 0 1.7-.3 2.4-.7l3.2 3.2 1.4-1.4zm-3.8.1c-1.4 0-2.5-1.1-2.5-2.5s1.1-2.5 2.5-2.5 2.5 1.1 2.5 2.5-1.1 2.5-2.5 2.5M12 20v2C6.48 22 2 17.52 2 12S6.48 2 12 2c4.84 0 8.87 3.44 9.8 8h-2.07c-.64-2.46-2.4-4.47-4.73-5.41V5c0 1.1-.9 2-2 2h-2v2c0 .55-.45 1-1 1H8v2h2v3H9l-4.79-4.79C4.08 10.79 4 11.38 4 12c0 4.41 3.59 8 8 8"})),We=function(e){var n=u(),t=n.i18n,r=(n._,e.source),o=e.showSourceRepo,i=e.showLanguage,s=r.id,a=r.name,E=r.lang,O=r.iconUrl,I=r.supportsLatest,k=r.isNsfw,_=r.extension.repo,L=l(r).isPinned,T=f.isLocalSource(r)?t._({id:"LECJgZ"}):a,A=S(r,function(e){return w(t._({id:"cBoXe4"}),"error",C(e))});return c.jsx(se,{children:c.jsx(ae,{component:h,to:g.sources.childRoutes.browse.path(s),state:{contentType:te.POPULAR,clearCache:!0},children:c.jsxs(ie,{children:[c.jsx(oe,{iconUrl:p.getValidImgUrlFor(O),alt:T,slots:{spinnerImageProps:{ignoreQueue:!0}}}),c.jsxs(j,{sx:{justifyContent:"center",flexGrow:1,flexShrink:1,wordBreak:"break-word"},children:[c.jsx(x,{variant:"h6",component:"h3",children:T}),c.jsxs(x,{variant:"caption",children:[i&&y(E),k&&c.jsx(x,{variant:"caption",color:"error",children:" 18+"})]}),o&&c.jsx(x,{variant:"caption",children:_})]}),I&&c.jsx(m,d(d({},re.preventRippleProp()),{},{variant:"outlined",component:h,to:g.sources.childRoutes.browse.path(s),state:{contentType:te.LATEST,clearCache:!0},children:t._({id:"wL3cK8"})})),c.jsx(v,{title:L?t._({id:"e6tI/P"}):t._({id:"KofAFL"}),children:c.jsx(b,d(d({},re.preventRippleProp()),{},{onClick:function(e){e.preventDefault(),A("isPinned",!L)},color:L?"primary":"inherit",children:L?c.jsx(ee,{}):c.jsx(ne,{})}))})]})})})};function Xe(e){var n=e.tabsMenuHeight,t=u(),o=t.i18n,i=t._,s=f.useLanguages(),l=s.languages,d=s.setLanguages,h=E().settings,j=h.showNsfw,y=h.lastUsedSourceId,m=p.useGetSourceList({notifyOnNetworkStatusChange:!0}),S=m.data,w=m.loading,T=m.error,A=m.refetch,M=null==S?void 0:S.sources.nodes,P=O.useMemo(function(){return f.filter(null!=M?M:[],{isNsfw:!j||void 0,languages:l,keepLocalSource:!0,enabled:!0})},[M,l]),U=O.useMemo(function(){return f.filter(null!=M?M:[],{isNsfw:!j||void 0,removeLocalSource:!0})},[M]),N=O.useMemo(function(){var e=f.getLastUsedSource(y,P),n=Object.entries(f.groupByLanguage(P,{withPinnedGroup:!0}));return e?[[I.LAST_USED_SOURCE,[e]]].concat(n):n},[P]),R=O.useMemo(function(){return f.getLanguages(U,{excludeLocalSource:!0})},[M]),G=O.useMemo(function(){return f.areFromMultipleRepos(P)},[P]),D=O.useMemo(function(){return N.map(function(e){return a(e,2)[1]}).flat(1)},[N]),B=O.useMemo(function(){return N.map(function(e){return e[1].length})},[N]),F=Ie.useCreateGroupedComputeItemKey(B,O.useCallback(function(e){return N[e][0]},[N]),O.useCallback(function(e,n){return"".concat(N[n][0],"_").concat(D[e].id)},[D])),H=k();return Ce(c.jsxs(c.Fragment,{children:[c.jsx(v,{title:o._({id:"kddIOO"}),children:c.jsx(b,{onClick:function(){return H(g.sources.childRoutes.searchAll.path())},color:"inherit",children:c.jsx(r,{})})}),c.jsx(_e,{selectedLanguages:l,setSelectedLanguages:d,languages:R,sources:U})]}),[i,l,R,U]),w?c.jsx(_,{}):T?c.jsx(ce,{message:o._({id:"6m5aox"}),messageExtra:C(T),retry:function(){return A().catch(L("Sources::refetch"))}}):0===(null==M?void 0:M.length)?c.jsx(ce,{message:o._({id:"W//hDl"})}):c.jsx(Ee,{persistKey:"sources",heightToSubtract:n,overscan:.5*window.innerHeight,groupCounts:B,computeItemKey:F,groupContent:function(e){var n=a(N[e],1)[0];return c.jsx(Oe,{isFirstItem:!e,children:c.jsx(x,{variant:"h5",component:"h2",children:le(n)})})},itemContent:function(e,n){var t=N[n][0],r=D[e];return c.jsx(ke,{children:c.jsx(We,{source:r,showSourceRepo:G,showLanguage:ue(t)})})}})}function qe(e){var n=e.selectedLanguages,t=e.setSelectedLanguages,r=e.languages,o=u(),i=o.i18n,l=(o._,a(O.useState(T(n)),2)),d=l[0],f=l[1],g=a(O.useState(!1),2),h=g[0],p=g[1],j=O.useMemo(function(){return T([].concat(s(d.filter(function(e){return r.includes(e)}).toSorted(A)),s(r.toSorted(A))))},[r,d]),x=function(){p(!1),f(T(n))};return c.jsxs(c.Fragment,{children:[c.jsx(v,{title:i._({id:"Tz0i8g"}),children:c.jsx(b,{onClick:function(){return p(!0)},"aria-label":"display more actions",edge:"end",color:"inherit",children:c.jsx(Me,{})})}),c.jsxs(M,{fullWidth:!0,maxWidth:"xs",open:h,onClose:x,children:[c.jsx(P,{children:i._({id:"tEL3Xq"})}),c.jsx(U,{dividers:!0,sx:{padding:0},children:c.jsx(Pe,{style:{height:54*j.length,minHeight:"25vh",maxHeight:"50vh"},data:j,increaseViewportBy:400,computeItemKey:function(e){return j[e]},itemContent:function(e,n){return c.jsxs(N,{children:[c.jsx(R,{primary:le(n)}),c.jsx(Ue,{checked:d.includes(n),onChange:function(e){return function(e,n){f(n?[].concat(s(d),[e]):d.toSpliced(d.indexOf(e),1))}(n,e.target.checked)}})]})}})}),c.jsxs(G,{children:[c.jsx(m,{autoFocus:!0,onClick:x,color:"primary",children:i._({id:"dEgA5A"})}),c.jsx(m,{onClick:function(){p(!1),t(T(d))},color:"primary",children:i._({id:"aP3N/0"})})]})]})]})}var Je=function(e){var t=e.disabled,r=e.children,o=function(e,n){if(null==e)return{};var t,r,o=function(e,n){if(null==e)return{};var t={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==n.indexOf(r))continue;t[r]=e[r]}return t}(e,n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)t=i[r],-1===n.indexOf(t)&&{}.propertyIsEnumerable.call(e,t)&&(o[t]=e[t])}return o}(e,n);return t?r:c.jsx(ae,d(d({component:h},o),{},{children:r}))};function Qe(e){var n=u(),r=n.i18n,o=(n._,e.extension),s=o.name,l=o.lang,f=o.versionName,h=o.isInstalled,S=o.hasUpdate,w=o.isObsolete,C=o.pkgName,E=o.iconUrl,I=o.isNsfw,k=o.repo,_=e.handleUpdate,T=e.showSourceRepo,A=e.forcedState,M=a(O.useState(de(h,w,S)),2),P=M[0],U=M[1],N=null!=A?A:P;O.useEffect(function(){U(de(h,w,S))},[de(h,w,S)]);var R=function(){var e=i(t().m(function e(n){var r,o;return t().w(function(e){for(;;)switch(e.p=e.n){case 0:return r=ye[n],o=je[n],e.p=1,U(o),e.n=2,xe(C,w,n);case 2:U(r),_(),e.n=4;break;case 3:e.p=3,e.v,U(de(h,w,S));case 4:return e.a(2)}},e,null,[[1,3]])}));return function(n){return e.apply(this,arguments)}}();return c.jsx(se,{children:c.jsx(Je,{disabled:!h,to:g.extension.childRoutes.info.path(C),children:c.jsxs(ie,{children:[c.jsx(oe,{iconUrl:p.getValidImgUrlFor(E),alt:s,slots:{spinnerImageProps:{ignoreQueue:!0}}}),c.jsxs(j,{sx:{justifyContent:"center",flexGrow:1,flexShrink:1,wordBreak:"break-word"},children:[c.jsx(x,{variant:"h6",component:"h3",children:s}),c.jsxs(x,{variant:"caption",children:[h?"".concat(y(l)," "):"",f,I&&c.jsx(x,{variant:"caption",color:"error",children:" 18+"})]}),T&&c.jsx(x,{variant:"caption",children:k})]}),h&&c.jsx(v,{title:r._({id:"Tz0i8g"}),children:c.jsx(b,d(d({color:"inherit"},re.preventRippleProp()),{},{children:c.jsx(D,{})}))}),c.jsx(m,{variant:"outlined",sx:{color:N===ge.OBSOLETE?"red":"inherit",flexShrink:0},onClick:function(e){e.preventDefault(),function(){switch(N){case pe.INSTALL:case pe.UPDATE:case pe.UNINSTALL:R(N).catch(L("ExtensionCard:handleButtonClick(".concat(N,")")));break;case he.OBSOLETE:R(pe.UNINSTALL).catch(L("ExtensionCard:handleButtonClick(".concat(N,")")))}}()},children:r._(fe[N])})]})})})}var Ye=0,Ze=1,$e=function(e){var n=e.groupName,t=e.isFirstItem,r=e.groupExtensionIds,o=e.isUpdateGroup,i=e.updatingExtensionIds,s=e.setUpdatingExtensionIds,a=e.handleExtensionUpdate,l=u(),f=l.i18n;l._;return c.jsxs(Oe,{isFirstItem:t,sx:{flexDirection:"row",justifyContent:"space-between",alignItems:"center",pr:1},children:[c.jsx(x,{variant:"h5",component:"h2",children:le(n)}),o&&c.jsx(m,{disabled:!!i.length,variant:"contained",onClick:function(){s(r),p.updateExtensions(r,{update:!0}).response.then(function(){return a()}).catch(function(e){return w(V.t(d(d({},we[pe.UPDATE]),{},{values:{count:r.length}})),"error",C(e))}).finally(function(){return s([])})},children:f._({id:"yRCx2T"})})]},n)};function en(e){var n,r,o=e.tabsMenuHeight,s=u(),l=s.i18n,d=s._,f=p.useGetServerSettings({notifyOnNetworkStatusChange:!0}),y=f.data,S=f.loading,I=f.error,k=f.refetch,T=a(p.useExtensionListFetch(),2),A=T[0],M=T[1],P=M.data,U=M.loading,N=M.error,R=E().settings,G=R.browseLanguages,D=R.showNsfw,V=z(function(e){return w(l._({id:"cBoXe4"}),"error",C(e))}),K=a(B(H.QUERY,F),1)[0],W=a(O.useState([]),2),X=W[0],q=W[1],J=a(O.useState({}),2),Q=J[0],Y=J[1],Z=S||U,$=null!=I?I:N,ee=!(null==y||!y.settings.extensionRepos.length),ne=(null!==(n=null==y?void 0:y.settings.extensionRepos.length)&&void 0!==n?n:0)>1,te=null==P||null===(r=P.fetchExtensions)||void 0===r?void 0:r.extensions,re=O.useMemo(function(){return me(null!=te?te:[])},[te]),oe=O.useMemo(function(){return ve(null!=te?te:[],{selectedLanguages:G,showNsfw:D,query:K})},[te,G,D,K]),ie=O.useMemo(function(){return be(oe)},[oe]),se=O.useMemo(function(){return ie.map(function(e){return e[Ze].length})},[ie]),ae=O.useMemo(function(){return ie.map(function(e){return a(e,2)[1]}).flat(1)},[ie]),ue=Ie.useCreateGroupedComputeItemKey(se,O.useCallback(function(e){return ie[e][Ye]},[ie]),O.useCallback(function(e){return ae[e].pkgName},[ae])),le=O.useCallback(function(){return Y({})},[]),de=function(e){e.name.toLowerCase().endsWith("apk")?(w(l._({id:"K04htz"}),"info"),p.installExternalExtension(e).response.then(function(){le(),w(l._({id:"LGq1dg"}),"success")}).catch(function(e){return w(l._({id:"amOoxI"}),"error",C(e))})):w(l._({id:"f7vOnJ"}),"error")};return O.useEffect(function(){A()},[Q]),Ce(c.jsxs(c.Fragment,{children:[c.jsx(Ae,{}),c.jsx(v,{title:l._({id:"lpVYKJ"}),children:c.jsx(b,{onClick:function(){var e=document.createElement("input");e.style.display="none",e.type="file",e.onchange=function(){var n,t=null===(n=e.files)||void 0===n?void 0:n[0];t&&de(t)},document.documentElement.appendChild(e),e.click(),document.documentElement.removeChild(e)},color:"inherit",children:c.jsx(Te,{})})}),c.jsx(qe,{selectedLanguages:G,setSelectedLanguages:function(e){return V("browseLanguages",e)},languages:re})]}),[d,G,re]),Ne("drop",function(){var e=i(t().m(function e(n){var r;return t().w(function(e){for(;;)switch(e.n){case 0:return n.preventDefault(),e.n=1,Le(n);case 1:r=e.v,de(r[0]);case 2:return e.a(2)}},e)}));return function(n){return e.apply(this,arguments)}}()),Ne("dragover",function(e){e.preventDefault()}),Z?c.jsx(_,{}):$?c.jsx(ce,{message:l._({id:"6m5aox"}),messageExtra:C($),retry:function(){I&&k().catch(L("Extensions::refetchServerSettings")),N&&A().catch(L("Extensions::refetchExtensions"))}}):!(null!=te&&te.length||ee)?c.jsxs(j,{sx:{alignItems:"center",justifyContent:"center",rowGap:"10px",paddingTop:"20px"},children:[c.jsx(x,{children:l._({id:"BMwO25"})}),c.jsx(m,{component:h,variant:"contained",to:g.settings.childRoutes.browse.path,children:l._({id:"Tz0i8g"})})]}):c.jsx(Ee,{persistKey:"extensions",heightToSubtract:o,overscan:.5*window.innerHeight,groupCounts:se,groupContent:function(e){var n=a(ie[e],2),t=n[0],r=n[1],o=t===Se.UPDATE_PENDING;return c.jsx($e,{groupName:t,isFirstItem:0===e,groupExtensionIds:r.map(function(e){return e.pkgName}),isUpdateGroup:o,updatingExtensionIds:X,setUpdatingExtensionIds:q,handleExtensionUpdate:le})},computeItemKey:ue,itemContent:function(e){var n=ae[e];return c.jsx(ke,{children:c.jsx(Qe,{extension:n,handleUpdate:le,showSourceRepo:ne,forcedState:X.includes(n.pkgName)?he.UPDATING:void 0})})}})}var nn=o(c.jsx("path",{d:"M14.94 4.66h-4.72l2.36-2.36zm-4.69 14.71h4.66l-2.33 2.33zM6.1 6.27 1.6 17.73h1.84l.92-2.45h5.11l.92 2.45h1.84L7.74 6.27zm-1.13 7.37 1.94-5.18 1.94 5.18zm10.76 2.5h6.12v1.59h-8.53v-1.29l5.92-8.56h-5.88v-1.6h8.3v1.26z"})),tn=o(c.jsx("path",{d:"M20 10V8h-4V4h-2v4h-4V4H8v4H4v2h4v4H4v2h4v4h2v-4h4v4h2v-4h4v-2h-4v-4zm-6 4h-4v-4h4z"})),rn=function(e){var n=e.id,t=e.name,r=e.lang,o=e.iconUrl,i=e.mangaCount,s=u(),a=s.i18n,l=(s._,0===Number(n)?a._({id:"LECJgZ"}):t);return c.jsx(se,{children:c.jsx(ae,{component:h,to:g.migrate.path(n),children:c.jsxs(ie,{sx:{justifyContent:"space-between"},children:[c.jsxs(K,{sx:{display:"flex",gap:1},children:[c.jsx(oe,{iconUrl:p.getValidImgUrlFor(o),alt:l,slots:{spinnerImageProps:{ignoreQueue:!0}}}),c.jsxs(K,{sx:{display:"flex",flexDirection:"column",justifyContent:"center"},children:[c.jsx(x,{variant:"h6",component:"h3",children:l}),c.jsx(x,{variant:"caption",sx:{display:"block"},children:le(r)})]})]}),c.jsx(ze,{sx:{borderRadius:1},size:"small",label:i})]})})})},on=function(e){var n=e.tabsMenuHeight,t=u(),r=t.i18n,o=(t._,W().appBarHeight),i=E().settings.migrateSortSettings,s=z(function(e){return w(r._({id:"cBoXe4"}),"error",C(e))}),a=i.sortBy,l=i.sortOrder,f=p.useGetMigratableSources({notifyOnNetworkStatusChange:!0}),g=f.data,h=f.loading,x=f.error,y=f.refetch,m=O.useMemo(function(){return function(e,n){var t=n.sortBy,r=n.sortOrder;if(!e)return[];var o={};e.forEach(function(e){var n,t=e.sourceId,r=e.source,i=null!==(n=o[t])&&void 0!==n?n:d({},d({id:t,name:t,lang:"unknown",iconUrl:null,mangaCount:0},r));o[t]=d(d({},i),{},{mangaCount:i.mangaCount+1})});var i=Object.values(o).toSorted(function(e,n){switch(t){case Q.SOURCE_NAME:return e.name.localeCompare(n.name);case Q.MANGA_COUNT:return e.mangaCount-n.mangaCount;default:throw new Error('Unexpected "sortBy" "'.concat(t,'"'))}});switch(r){case Y.ASC:return i;case Y.DESC:return i.toReversed();default:throw new Error('Unexpected "sortOrder" "'.concat(r,'"'))}}(null==g?void 0:g.mangas.nodes,i)},[null==g?void 0:g.mangas.nodes,i]);return h?c.jsx(_,{}):x?c.jsx(ce,{message:r._({id:"6m5aox"}),messageExtra:C(x),retry:function(){return y().catch(L("Migration::refetch"))}}):c.jsxs(c.Fragment,{children:[c.jsxs(j,{sx:{position:"sticky",top:"".concat(o+n,"px"),flexDirection:"row",justifyContent:"end",alignItems:"center",gap:1,p:1,backgroundColor:"background.default",zIndex:1},children:[c.jsx(v,{title:r._(X[a]),children:c.jsx(b,{color:"inherit",onClick:function(){return s("migrateSortSettings",{sortBy:(a+1)%2,sortOrder:l})},children:a?c.jsx(tn,{}):c.jsx(nn,{})})}),c.jsx(v,{title:r._(q[l]),children:c.jsx(b,{color:"inherit",onClick:function(){return s("migrateSortSettings",{sortBy:a,sortOrder:(l+1)%2})},children:l?c.jsx(Fe,{}):c.jsx(He,{})})})]}),c.jsx(J,{sx:{p:0},children:m.map(function(e){return c.jsx(ke,{children:c.jsx(rn,d({},e))},e.id)})})]})}}}})}();
