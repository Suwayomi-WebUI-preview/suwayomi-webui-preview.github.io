import{u as Se,e as Te,cw as je,f as S,cA as Ne,U as ke,cB as ye,j as a,o as ve,p as Ee,q as _e,i as Ae,ac as $e,g as te,k as Oe,b as ee,T as De,cC as Ue,aE as oe,cD as Ve,cE as Ie,w as Je,B as ae,m as ne,F as Me}from"./index-BKuQKJJ1.js";import{C as Be}from"./CheckboxInput-o4yRiI2x.js";import{L as re}from"./Link-BxOAhTBC.js";class $ extends Error{constructor(e,r){super("".concat(e," at position ").concat(r)),this.position=r}}const pe=32,Re=10,we=9,Ce=13,We=160,ze=8192,Fe=8202,Pe=8239,Qe=8287,Le=12288;function qe(n){return/^[0-9A-Fa-f]$/.test(n)}function T(n){return n>="0"&&n<="9"}function Ke(n){return n>=" "}function K(n){return",:[]/{}()\n+".includes(n)}function ue(n){return n>="a"&&n<="z"||n>="A"&&n<="Z"||n==="_"||n==="$"}function ce(n){return n>="a"&&n<="z"||n>="A"&&n<="Z"||n==="_"||n==="$"||n>="0"&&n<="9"}const le=/^(http|https|ftp|mailto|file|data|irc):\/\/$/,fe=/^[A-Za-z0-9-._~:/?#@!$&'()*+;=]$/;function de(n){return",[]/{}\n+".includes(n)}function he(n){return Z(n)||Ze.test(n)}const Ze=/^[[{\w-]$/;function He(n){return n==="\n"||n==="\r"||n==="	"||n==="\b"||n==="\f"}function j(n,e){const r=n.charCodeAt(e);return r===pe||r===Re||r===we||r===Ce}function Xe(n,e){const r=n.charCodeAt(e);return r===pe||r===we||r===Ce}function Ye(n,e){const r=n.charCodeAt(e);return r===We||r>=ze&&r<=Fe||r===Pe||r===Qe||r===Le}function Z(n){return be(n)||ie(n)}function be(n){return n==='"'||n==="“"||n==="”"}function ge(n){return n==='"'}function ie(n){return n==="'"||n==="‘"||n==="’"||n==="`"||n==="´"}function me(n){return n==="'"}function I(n,e){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;const N=n.lastIndexOf(e);return N!==-1?n.substring(0,N)+(r?"":n.substring(N+1)):n}function d(n,e){let r=n.length;if(!j(n,r-1))return n+e;for(;j(n,r-1);)r--;return n.substring(0,r)+e+n.substring(r)}function Ge(n,e,r){return n.substring(0,e)+n.substring(e+r)}function xe(n){return/[,\n][ \t\r]*$/.test(n)}const en={"\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","	":"\\t"},nn={'"':'"',"\\":"\\","/":"/",b:"\b",f:"\f",n:"\n",r:"\r",t:"	"};function rn(n){let e=0,r="";B(["```","[```","{```"]),C()||q(),B(["```","```]","```}"]);const O=b(",");for(O&&o(),he(n[e])&&xe(r)?(O||(r=d(r,",")),H()):O&&(r=I(r,","));n[e]==="}"||n[e]==="]";)e++,o();if(e>=n.length)return r;Y();function C(){o();const i=W()||z()||g()||f()||P()||Q(!1)||V();return o(),i}function o(){let i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;const s=e;let t=M(i);do t=k(),t&&(t=M(i));while(t);return e>s}function M(i){const s=i?j:Xe;let t="";for(;;)if(s(n,e))t+=n[e],e++;else if(Ye(n,e))t+=" ",e++;else break;return t.length>0?(r+=t,!0):!1}function k(){if(n[e]==="/"&&n[e+1]==="*"){for(;e<n.length&&!sn(n,e);)e++;return e+=2,!0}if(n[e]==="/"&&n[e+1]==="/"){for(;e<n.length&&n[e]!=="\n";)e++;return!0}return!1}function B(i){if(D(i)){if(ue(n[e]))for(;e<n.length&&ce(n[e]);)e++;return o(),!0}return!1}function D(i){M(!0);for(const s of i){const t=e+s.length;if(n.slice(e,t)===s)return e=t,!0}return!1}function b(i){return n[e]===i?(r+=n[e],e++,!0):!1}function y(i){return n[e]===i?(e++,!0):!1}function R(){return y("\\")}function U(){return o(),n[e]==="."&&n[e+1]==="."&&n[e+2]==="."?(e+=3,o(),y(","),!0):!1}function W(){if(n[e]==="{"){r+="{",e++,o(),y(",")&&o();let i=!0;for(;e<n.length&&n[e]!=="}";){let s;if(i?(s=!0,i=!1):(s=b(","),s||(r=d(r,",")),o()),U(),!(g()||Q(!0))){n[e]==="}"||n[e]==="{"||n[e]==="]"||n[e]==="["||n[e]===void 0?r=I(r,","):G();break}o();const _=b(":"),p=e>=n.length;_||(he(n[e])||p?r=d(r,":"):l()),C()||(_||p?r+="null":l())}return n[e]==="}"?(r+="}",e++):r=d(r,"}"),!0}return!1}function z(){if(n[e]==="["){r+="[",e++,o(),y(",")&&o();let i=!0;for(;e<n.length&&n[e]!=="]";)if(i?i=!1:b(",")||(r=d(r,",")),U(),!C()){r=I(r,",");break}return n[e]==="]"?(r+="]",e++):r=d(r,"]"),!0}return!1}function H(){let i=!0,s=!0;for(;s;)i?i=!1:b(",")||(r=d(r,",")),s=C();s||(r=I(r,",")),r="[\n".concat(r,"\n]")}function g(){let i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:-1,t=n[e]==="\\";if(t&&(e++,t=!0),Z(n[e])){const _=ge(n[e])?ge:me(n[e])?me:ie(n[e])?ie:be,p=e,A=r.length;let u='"';for(e++;;){if(e>=n.length){const c=L(e-1);return!i&&K(n.charAt(c))?(e=p,r=r.substring(0,A),g(!0)):(u=d(u,'"'),r+=u,!0)}if(e===s)return u=d(u,'"'),r+=u,!0;if(_(n[e])){const c=e,x=u.length;if(u+='"',e++,r+=u,o(!1),i||e>=n.length||K(n[e])||Z(n[e])||T(n[e]))return F(),!0;const w=L(c-1),se=n.charAt(w);if(se===",")return e=p,r=r.substring(0,A),g(!1,w);if(K(se))return e=p,r=r.substring(0,A),g(!0);r=r.substring(0,A),e=c+1,u="".concat(u.substring(0,x),"\\").concat(u.substring(x))}else if(i&&de(n[e])){if(n[e-1]===":"&&le.test(n.substring(p+1,e+2)))for(;e<n.length&&fe.test(n[e]);)u+=n[e],e++;return u=d(u,'"'),r+=u,F(),!0}else if(n[e]==="\\"){const c=n.charAt(e+1);if(nn[c]!==void 0)u+=n.slice(e,e+2),e+=2;else if(c==="u"){let w=2;for(;w<6&&qe(n[e+w]);)w++;w===6?(u+=n.slice(e,e+6),e+=6):e+w>=n.length?e=n.length:m()}else u+=c,e+=2}else{const c=n.charAt(e);c==='"'&&n[e-1]!=="\\"?(u+="\\".concat(c),e++):He(c)?(u+=en[c],e++):(Ke(c)||X(c),u+=c,e++)}t&&R()}}return!1}function F(){let i=!1;for(o();n[e]==="+";){i=!0,e++,o(),r=I(r,'"',!0);const s=r.length;g()?r=Ge(r,s,1):r=d(r,'"')}return i}function f(){const i=e;if(n[e]==="-"){if(e++,v())return E(i),!0;if(!T(n[e]))return e=i,!1}for(;T(n[e]);)e++;if(n[e]==="."){if(e++,v())return E(i),!0;if(!T(n[e]))return e=i,!1;for(;T(n[e]);)e++}if(n[e]==="e"||n[e]==="E"){if(e++,(n[e]==="-"||n[e]==="+")&&e++,v())return E(i),!0;if(!T(n[e]))return e=i,!1;for(;T(n[e]);)e++}if(!v())return e=i,!1;if(e>i){const s=n.slice(i,e),t=/^0\d/.test(s);return r+=t?'"'.concat(s,'"'):s,!0}return!1}function P(){return h("true","true")||h("false","false")||h("null","null")||h("True","true")||h("False","false")||h("None","null")}function h(i,s){return n.slice(e,e+i.length)===i?(r+=s,e+=i.length,!0):!1}function Q(i){const s=e;if(ue(n[e])){for(;e<n.length&&ce(n[e]);)e++;let t=e;for(;j(n,t);)t++;if(n[t]==="(")return e=t+1,C(),n[e]===")"&&(e++,n[e]===";"&&e++),!0}for(;e<n.length&&!de(n[e])&&!Z(n[e])&&(!i||n[e]!==":");)e++;if(n[e-1]===":"&&le.test(n.substring(s,e+2)))for(;e<n.length&&fe.test(n[e]);)e++;if(e>s){for(;j(n,e-1)&&e>0;)e--;const t=n.slice(s,e);return r+=t==="undefined"?"null":JSON.stringify(t),n[e]==='"'&&e++,!0}}function V(){if(n[e]==="/"){const i=e;for(e++;e<n.length&&(n[e]!=="/"||n[e-1]==="\\");)e++;return e++,r+='"'.concat(n.substring(i,e),'"'),!0}}function L(i){let s=i;for(;s>0&&j(n,s);)s--;return s}function v(){return e>=n.length||K(n[e])||j(n,e)}function E(i){r+="".concat(n.slice(i,e),"0")}function X(i){throw new $("Invalid character ".concat(JSON.stringify(i)),e)}function Y(){throw new $("Unexpected character ".concat(JSON.stringify(n[e])),e)}function q(){throw new $("Unexpected end of json string",n.length)}function G(){throw new $("Object key expected",e)}function l(){throw new $("Colon expected",e)}function m(){const i=n.slice(e,e+6);throw new $('Invalid unicode character "'.concat(i,'"'),e)}}function sn(n,e){return n[e]==="*"&&n[e+1]==="/"}const J={create:{title:{id:"VKRRxU"},button:{id:"aP3N/0"},action:{id:"oZj+FS"},success:{id:"RNJWgy"},failure:{id:"RVEnxc"}},edit:{title:{id:"JkEyR8"},button:{id:"tfDRzk"},action:{id:"u4BJ9a"},success:{id:"rSftVe"},failure:{id:"+b+yzq"}},save_dynamic:{title:{id:"Bs1P1+"},button:{id:"tfDRzk"},action:{id:"oZj+FS"},success:{id:"RNJWgy"},failure:{id:"RVEnxc"}}},un=({mode:n,appTheme:e,isVisible:r,onExitComplete:N,onSubmit:O,onDismiss:C})=>{const{i18n:o,_:M}=Se(),{settings:{customThemes:k},request:{loading:B,error:D,refetch:b}}=Te(),{setAppTheme:y,dynamicColor:R,appTheme:U,shouldUsePureBlackMode:W,themeMode:z}=je(),H=S.useMemo(()=>({id:"",getName:()=>"",isCustom:!0,muiTheme:Ne(ye(U,k).muiTheme,R,W,ke.getThemeMode(z))}),[U,k,R,W,z]),g=e!=null?e:H,F=Me(l=>{throw l}),[f,P]=S.useState(g),[h,Q]=S.useState(!1),[V,L]=S.useState(!1),[v,E]=S.useState(!1),[X,Y]=S.useState(["create","save_dynamic"].includes(n)),[q,G]=S.useState(!1);return a.jsxs(ve,{open:r,onTransitionExited:N,fullWidth:!0,maxWidth:"md",children:[a.jsx(Ee,{children:o._(J[n].title)}),a.jsxs(_e,{children:[B&&a.jsx(Ae,{}),D&&a.jsx($e,{message:o._({id:"6m5aox"}),messageExtra:te(D),retry:()=>b().catch(Oe("ThemeCreationDialog::refetch"))}),!D&&a.jsxs(ee,{sx:{gap:2,whiteSpace:"pre-line"},children:[a.jsx(De,{children:a.jsx(Ue,{id:"HbJDke",components:{0:a.jsx(re,{href:"https://mui.com/material-ui/customization/how-to-customize/",target:"_blank",rel:"noreferrer"}),1:a.jsx("br",{}),2:a.jsx(re,{href:"https://mui.com/material-ui/customization/palette/#color-schemes",target:"_blank",rel:"noreferrer"}),3:a.jsx("br",{}),4:a.jsx("br",{}),5:a.jsx(re,{href:"https://zenoo.github.io/mui-theme-creator/",target:"_blank",rel:"noreferrer"}),6:a.jsx("br",{}),7:a.jsx("br",{})}})}),a.jsx(oe,{disabled:n==="edit",label:o._({id:"6YtxFj"}),value:f.getName(),error:h,helperText:h&&o._({id:"sXKEIt"}),onChange:l=>{const m=l.target.value.trim(),i=m.length<=32,s=Ve(m,k);Q(!i||!s),P({...f,id:l.target.value,getName:()=>l.target.value})}}),a.jsx(oe,{label:o._({id:"FEr96N"}),multiline:!0,error:V,helperText:V&&o._({id:"NyvzvH"}),defaultValue:JSON.stringify(f.muiTheme,null,2),onChange:l=>{const m="invalid",i=(()=>{try{return rn(l.target.value)}catch(A){return m}})(),s=Ie(i),t=i===m||!s,_=JSON.stringify(s)!==JSON.stringify(g.muiTheme);Y(n==="create"?!0:_),L(t),!t&&JSON.stringify(s)!==JSON.stringify(f.muiTheme)&&P({...f,muiTheme:s})}})]})]}),a.jsx(Je,{children:a.jsxs(ee,{sx:{width:"100%"},children:[a.jsx(Be,{sx:{margin:0},size:"small",label:o._({id:"nUQ3m/"}),checked:q,onChange:(l,m)=>G(m)}),a.jsxs(ee,{sx:{flexDirection:"row",justifyContent:"end"},children:[a.jsx(ae,{autoFocus:!0,onClick:()=>C(),color:"primary",children:o._({id:"dEgA5A"})}),a.jsx(ae,{disabled:V||h||v||!X||!f.id.length,onClick:()=>{ne(o._(J[n].action),"info"),E(!0),F("customThemes",{...k,[f.id]:f}).then(()=>{ne(o._(J[n].success),"success"),q&&y(f.getName()),O()}).catch(l=>ne(o._(J[n].failure),"error",te(l))).finally(()=>E(!1))},color:"primary",children:o._(J[n].button)})]})]})})]})};export{un as T};
