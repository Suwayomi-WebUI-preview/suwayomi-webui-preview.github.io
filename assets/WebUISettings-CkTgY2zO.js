import{u as C,r as h,f as A,m as U,g as p,j as e,M as j,s as f,v as _,bO as b,e as N,i as T,k as E,bP as V,bQ as P,bR as W,b6 as y,bS as F,F as M}from"./index-ZE1rjjwW.js";import{N as B}from"./NumberSetting-CMI5UIHz.js";import{u as O,g as R}from"./usePersistedValue-B9vr4ddk.js";import{S as I}from"./Switch-RWr7_DBi.js";import{S as v}from"./SelectSetting-C-7QSbNw.js";import{E as D}from"./EmptyViewAbsoluteCentered-o28tLxDU.js";import{u as q}from"./useAppTitle-BS-n0Bj4.js";import"./Slider-CGhhGNO8.js";import"./SwitchBase-DhK_X3zI.js";import"./Select-D5CzkJnt.js";const H=({disabled:t=!1,updateCheckInterval:g})=>{const{t:n}=C(),l=!!g,[m]=h.useUpdateServerSettings(),[i,S]=O("lastUpdateCheckInterval",b.default,g,R),d=A.useCallback(r=>{S(r===0?i:r),m({variables:{input:{settings:{webUIUpdateCheckInterval:r}}}}).catch(u=>U(n("global.error.label.failed_to_save_changes"),"error",p(u)))},[i]),c=r=>{d(r?i:0)};return e.jsxs(j,{children:[e.jsxs(f,{children:[e.jsx(_,{primary:n("settings.webui.auto_update.label.title")}),e.jsx(I,{disabled:t,edge:"end",checked:l,onChange:r=>c(r.target.checked)})]}),e.jsx(B,{settingTitle:n("settings.webui.auto_update.label.interval"),settingValue:n("library.settings.global_update.auto_update.interval.label.value",{hours:i}),value:i,minValue:b.min,maxValue:b.max,defaultValue:b.default,showSlider:!0,valueUnit:n("global.time.hour_short"),handleUpdate:d,disabled:t||!l})]})},ae=()=>{const{t}=C();q(t("settings.webui.title.webui"));const{settings:{webUIInformAvailableUpdate:g},loading:n,request:{error:l,refetch:m}}=N(),i=M(a=>U(t("global.error.label.failed_to_save_changes"),"error",p(a))),{data:S,loading:d,error:c,refetch:r}=h.useGetServerSettings({notifyOnNetworkStatusChange:!0}),[u]=h.useUpdateServerSettings(),o=(a,L)=>{a==="webUIChannel"&&h.graphQLClient.client.cache.evict({fieldName:"checkForWebUIUpdate"}),u({variables:{input:{settings:{[a]:L}}}}).catch(k=>U(t("global.error.label.failed_to_save_changes"),"error",p(k)))};if(n||d)return e.jsx(T,{});const x=l!=null?l:c;if(x)return e.jsx(D,{message:t("global.error.label.failed_to_load_data"),messageExtra:p(x),retry:()=>{l&&m().catch(E()),c&&r().catch(E())}});const s=S.settings,w=s.webUIFlavor===V.Custom;return e.jsxs(j,{sx:{pt:0},children:[e.jsx(v,{settingName:t("settings.webui.flavor.label.title"),value:s.webUIFlavor,values:P,handleChange:a=>o("webUIFlavor",a)}),e.jsxs(f,{children:[e.jsx(_,{primary:t("settings.webui.label.initial_open_browser")}),e.jsx(I,{edge:"end",checked:s.initialOpenInBrowserEnabled,onChange:a=>o("initialOpenInBrowserEnabled",a.target.checked)})]}),e.jsx(v,{settingName:t("settings.webui.interface.label.title"),value:s.webUIInterface,values:W,handleChange:a=>o("webUIInterface",a)}),e.jsx(y,{settingName:t("settings.webui.electron_path.label.title"),dialogDescription:t("settings.webui.electron_path.label.description"),value:s.electronPath,settingDescription:s.electronPath.length?s.electronPath:t("global.label.default"),handleChange:a=>o("electronPath",a)}),e.jsx(v,{settingName:t("settings.webui.channel.label.title"),value:s.webUIChannel,values:F,handleChange:a=>o("webUIChannel",a),disabled:w}),e.jsx(H,{disabled:w,updateCheckInterval:s.webUIUpdateCheckInterval}),!s.webUIUpdateCheckInterval&&e.jsxs(f,{children:[e.jsx(_,{primary:t("global.update.settings.inform.label.title"),secondary:t("global.update.settings.inform.label.description")}),e.jsx(I,{edge:"end",checked:g,onChange:a=>i("webUIInformAvailableUpdate",a.target.checked)})]})]})};export{ae as WebUISettings};
