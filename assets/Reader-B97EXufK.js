import{cz as Sr,e as i,cA as gt,cB as Pe,cu as D,j as t,D as Ht,ac as m,n as Vt,cC as Xr,cD as F,cE as qe,a as We,cF as wt,cG as Oe,cH as ye,cI as Yr,cJ as st,cK as Ft,S as L,o as z,T as Xe,aT as Kr,cL as Zr,aV as qr,c7 as yt,Y as Ue,a6 as zt,cM as be,C as $,cN as Rr,cO as ue,z as Ge,cP as N,bG as de,cQ as we,cR as Jr,b as kt,d as Qr,ck as es,cS as ts,cT as rs,cU as ss,cl as ns,cq as os,ad as Je,cV as Zt,aW as Ye,cW as qt,cX as br,c as ge,bK as ut,A as Xt,L as Ot,u as W,bT as Er,cY as Tr,ao as Rt,af as bt,a3 as Et,bW as as,ai as is,B as Ke,cZ as cs,c_ as Jt,c$ as jr,d0 as Wt,d1 as Cr,d2 as ls,d3 as ds,d4 as Qt,d5 as wr,d6 as ht,d7 as Be,cs as tt,d8 as Ve,k as Or,I as ce,Z as He,d9 as Ut,da as ke,bU as us,bV as gs,bg as hs,g as Dt,aM as xs,db as Yt,a4 as fs,a5 as ps,m as Dr,dc as dt,dd as It,a9 as er,de as Lt,df as ms,dg as Pt,dh as vs,di as Tt,dj as Ss,dk as Ir,dl as Rs,dm as Fe,b2 as _e,dn as bs,dp as Ze,dq as rt,dr as Es,ds as Lr,dt as Ts,du as js,r as Gt,dv as pt,dw as Cs,dx as ws,i as vt,dy as Os,dz as Ds,h as Ar,dA as _r,dB as Is,p as Br,dC as tr,M as rr,dD as Ls,dE as As,dF as _s,dG as lt,dH as ee,dI as sr,dJ as nr,dK as Bs,dL as St,dM as ys,dN as ks,dO as or,dP as Ps,dQ as Ns,f as Ms,dR as Hs,ar as Vs,dS as Fs,dT as Ws,dU as Us}from"./index-aZAYJyS4.js";import{R as Gs,S as $s,D as zs,a as Xs,b as Ys,c as Ks}from"./ReaderSettingsTabs-hYtmSOwq.js";import{L as $t}from"./Link-CIwD0-FI.js";import{S as yr}from"./Select-u1iTZi9_.js";import{d as kr,b as Zs,B as qs,F as Pr}from"./CustomButtonIcon-ma9qqLRB.js";import{a as Nr,I as Mr,T as Js}from"./TextField-ClbYey5i.js";import{K as Qs}from"./MUI.util-r5Z85em7.js";import{I as en}from"./InputAdornment-DKLmFJDj.js";import{O as tn}from"./OpenInNew-CgBzjpsa.js";import{D as rn}from"./Download-CujgmOGc.js";import{D as sn}from"./Delete-wbeWzB8q.js";import{D as nn}from"./ChapterCardMetadata-Ip78TzrF.js";import{F as on}from"./Favorite-Ch42vqv1.js";import{a as an,F as cn,g as ln}from"./useManageMangaLibraryState-DKawus2Y.js";import{C as dn}from"./CheckboxInput-Ddg4rXVG.js";import{E as jt}from"./EmptyViewAbsoluteCentered-DuhzzeXt.js";import"./TabsMenu-D2cG8kPd.js";import"./Tabs-5szzQSUL.js";import"./Trans-ttp0s1wx.js";import"./Slider-HPaQ0izz.js";import"./ListSubheader-DaZwWy2j.js";import"./Add-C-d3BbGn.js";import"./Card-CH9zzWdx.js";import"./CardActionArea-CfoAtrDw.js";import"./CardContent-588ia9mS.js";import"./Checkbox-SY-r-XU9.js";import"./formControlState-Dq1zat_P.js";import"./useFormControl-CwrE9AbN.js";import"./SwitchBase-CsUv9__Y.js";import"./ThreeStateCheckboxInput-DBdoRAju.js";import"./FormGroup-UBPjwweh.js";const un=e=>{const{activeScopes:s,enableScope:n,disableScope:o}=Sr(),r=i.useRef([]);i.useEffect(()=>e?(r.current=[...s],n(gt.NONE),r.current.forEach(o),()=>{o(gt.NONE),r.current.forEach(n)}):()=>{},[e])},gn=({isOpen:e,close:s})=>{const{manga:n}=Pe(),o=D.useSettings();un(e);const[r,a]=i.useState(0),[l,d]=i.useState(!1);return!n||!e?null:t.jsx(Ht,{open:e,maxWidth:"md",fullWidth:!0,onClose:s,hideBackdrop:r===Xr.FILTER,sx:{...m(l,{opacity:.75})},children:t.jsx(Vt,{sx:{p:0},children:t.jsx(Gs,{activeTab:r,setActiveTab:a,settings:o,updateSetting:(...c)=>D.updateSetting(n,...c),deleteSetting:(...c)=>D.deleteSetting(n,...c),setTransparent:d})})})},hn=({isDesktop:e,scrollbarXSize:s,readerNavBarWidth:n,isMaximized:o,currentPageIndex:r,pages:a,totalPages:l,progressBarType:d,shouldShowPageNumber:c,readingDirection:x})=>{const u=i.useMemo(()=>{const h=ye(r,a).name,g="/",p="".concat(h).concat(g).concat(l);return x===st.LTR?p:Yr(p,g)},[r,a,l,x]);return!c||o||e&&d===Ft.STANDARD||o&&d===Ft.HIDDEN?null:t.jsx(L,{sx:{position:"fixed",left:n,right:0,bottom:h=>"max(calc(".concat(h.spacing(1)," + ").concat(s,"px), env(safe-area-inset-bottom))"),alignItems:"center",transition:h=>"left 0.".concat(h.transitions.duration.shortest,"s")},children:t.jsx(z,{sx:{p:.5,borderRadius:1,backgroundColor:"rgba(0, 0, 0, 0.3)"},children:t.jsx(Xe,{sx:{color:"white"},children:u})})})},xn=F(hn,[D.useOverlayMode,qe,We,wt,Oe,D.useSettingsWithoutDefaultFlag],["isDesktop","scrollbarXSize","readerNavBarWidth","isMaximized","currentPageIndex","pages","totalPages","progressBarType","shouldShowPageNumber","readingDirection"]);function ar(e){return e.substring(2).toLowerCase()}function fn(e,s){return s.documentElement.clientWidth<e.clientX||s.documentElement.clientHeight<e.clientY}function pn(e){const{children:s,disableReactTree:n=!1,mouseEvent:o="onClick",onClickAway:r,touchEvent:a="onTouchEnd"}=e,l=i.useRef(!1),d=i.useRef(null),c=i.useRef(!1),x=i.useRef(!1);i.useEffect(()=>(setTimeout(()=>{c.current=!0},0),()=>{c.current=!1}),[]);const u=Kr(Zr(s),d),h=qr(f=>{const v=x.current;x.current=!1;const T=yt(d.current);if(!c.current||!d.current||"clientX"in f&&fn(f,T))return;if(l.current){l.current=!1;return}let b;f.composedPath?b=f.composedPath().includes(d.current):b=!T.documentElement.contains(f.target)||d.current.contains(f.target),!b&&(n||!v)&&r(f)}),g=f=>v=>{x.current=!0;const T=s.props[f];T&&T(v)},p={ref:u};return a!==!1&&(p[a]=g(a)),i.useEffect(()=>{if(a!==!1){const f=ar(a),v=yt(d.current),T=()=>{l.current=!0};return v.addEventListener(f,h),v.addEventListener("touchmove",T),()=>{v.removeEventListener(f,h),v.removeEventListener("touchmove",T)}}},[h,a]),o!==!1&&(p[o]=g(o)),i.useEffect(()=>{if(o!==!1){const f=ar(o),v=yt(d.current);return v.addEventListener(f,h),()=>{v.removeEventListener(f,h)}}},[h,o]),i.cloneElement(s,p)}const ir=Ue(Xe)({boxSizing:"content-box",display:"flex",justifyContent:"center",alignItems:"center",overflow:"hidden",textAlign:"center",userSelect:"none",cursor:"pointer"}),mn=Ue(L,{shouldForwardProp:zt(["progressBarPosition"])})(({theme:e,progressBarPosition:s})=>({position:"fixed",pointerEvents:"all",...m(be(s).isHorizontal,{justifyContent:"flex-end",bottom:0,right:0}),...m(be(s).isVertical,{top:0,bottom:0}),...m(be(s).isLeft,{alignItems:e.direction==="ltr"?"flex-start":"flex-end"}),...m(be(s).isRight,{alignItems:e.direction==="ltr"?"flex-end":"flex-start"})})),vn=Ue(L)(({theme:e})=>({flexDirection:"row",justifyContent:"center",alignItems:"center",gap:e.spacing(.5)})),Sn=Ue(L)({flexDirection:"row",flexGrow:1,overflow:"hidden"}),Rn=Ue(z,{shouldForwardProp:zt(["currentPagesIndex","pagesLength","progressBarPosition"])})(({currentPagesIndex:e,pagesLength:s,progressBarPosition:n})=>({position:"absolute",pointerEvents:"none",...m(be(n).isHorizontal,{left:0,width:"".concat((e+1)/s*100,"%"),height:"100%"}),...m(be(n).isVertical,{top:0,width:"100%",height:"".concat((e+1)/s*100,"%")})})),bn=({pageName:e,currentPagesIndex:s,pagesLength:n,isDragging:o,boxProps:r,children:a,progressBarPosition:l})=>t.jsx($,{title:e,slotProps:{tooltip:{sx:{backgroundColor:"primary.main",color:"primary.contrastText"}}},placement:Rr[l],children:t.jsx(z,{...r,sx:{position:"absolute",cursor:o?"grabbing":"grab",...m(be(l).isHorizontal,{left:"".concat(Math.max(0,s-1)/(n-1)*100,"%"),width:"calc(100% / ".concat(n-1,")"),height:"100%"}),...m(be(l).isVertical,{top:"".concat(Math.max(0,s-1)/(n-1)*100,"%"),width:"100%",height:"calc(100% / ".concat(n-1,")")}),...r==null?void 0:r.sx},children:a})}),En=Ue(L)({position:"relative",flexDirection:"row",flexGrow:1}),Tn=i.memo(Ue(z,{shouldForwardProp:zt(["isFirstPage","isLastPage"])})(({isFirstPage:e,isLastPage:s})=>({flexGrow:1,height:"100%",cursor:"pointer",borderLeftWidth:e?0:void 0,borderRightWidth:s?0:void 0}))),jn=i.memo(({page:e,pagesIndex:s,isCurrentPage:n,isLeadingPage:o,isTrailingPage:r,totalPages:a,showDraggingStyle:l,primaryPageLoadState:d,secondaryPageLoadState:c,createProgressBarSlot:x,...u})=>{const h=i.useMemo(()=>x(e,s,d,c,n,o,r,a,l),[x,e,s,d,c,n,o,r,a,l]);return t.jsx(Tn,{...u,isFirstPage:s===0,isLastPage:s===a-1,children:h})}),Cn=({totalPages:e,pages:s,pageLoadStates:n,currentPageIndex:o,slotProps:r,slots:a,createProgressBarSlot:l,progressBarPosition:d,readingMode:c,isDragging:x,setIsDragging:u,openPage:h,direction:g,fullSegmentClicks:p})=>{var M,_,B,U,y,G,H,A,q,he,le,X,Y,k,se,J,De,me,xe,fe,Ee,Z,ve,Ie,pe,Ne,$e,Qe,Te,Se,K,Le;const f=i.useRef(null),v=i.useRef(void 0),[T,b]=i.useState(0),R=i.useRef(null);Ge(R,i.useCallback(()=>{const P=R.current;if(!P)return;const{paddingLeft:Q,paddingRight:re}=getComputedStyle(P),je=6,ne=P.clientWidth-parseFloat(Q)-parseFloat(re),V=c===N.DOUBLE_PAGE?ne*2+je:ne;b(V)},[c]));const S=i.useMemo(()=>ye(o,s).pagesIndex,[o,s]),O=be(d).isHorizontal,E=i.useMemo(()=>ye(o,s),[o,s]),j=i.useCallback((...P)=>de(P[0],P[1],g),[g]);ue.useHandleProgressDragging(h,f,x,E,s,d,j,p);const I=P=>{if(!f.current)return;const Q="touches"in P;h(we(Jr(Q?P.touches[0]:P,f.current,s,O,p,j)),void 0,!1),clearTimeout(v.current),v.current=setTimeout(()=>u(!0),250)},C=()=>{u(!1),clearTimeout(v.current)};return t.jsx(mn,{...r==null?void 0:r.container,progressBarPosition:d,children:t.jsxs(vn,{...r==null?void 0:r.progressBarRoot,children:[t.jsx(ir,{...(M=r==null?void 0:r.progressBarPageTexts)==null?void 0:M.base,...(_=r==null?void 0:r.progressBarPageTexts)==null?void 0:_.current,sx:[{width:"".concat(T,"px")},...Array.isArray((U=(B=r==null?void 0:r.progressBarPageTexts)==null?void 0:B.base)==null?void 0:U.sx)?(H=(G=(y=r==null?void 0:r.progressBarPageTexts)==null?void 0:y.base)==null?void 0:G.sx)!=null?H:[]:[(q=(A=r==null?void 0:r.progressBarPageTexts)==null?void 0:A.base)==null?void 0:q.sx],...Array.isArray((le=(he=r==null?void 0:r.progressBarPageTexts)==null?void 0:he.current)==null?void 0:le.sx)?(k=(Y=(X=r==null?void 0:r.progressBarPageTexts)==null?void 0:X.current)==null?void 0:Y.sx)!=null?k:[]:[(J=(se=r==null?void 0:r.progressBarPageTexts)==null?void 0:se.current)==null?void 0:J.sx]],onClick:()=>h("previous","ltr",!1),children:E.name}),t.jsx(pn,{onClickAway:()=>u(!1),children:t.jsxs(En,{...r==null?void 0:r.progressBarSlotsActionArea,onMouseDown:I,onMouseUp:C,onTouchStart:I,onTouchEnd:C,children:[t.jsxs(Sn,{ref:f,...r==null?void 0:r.progressBarSlotsContainer,children:[s.map((P,Q)=>i.createElement(jn,{...r==null?void 0:r.progressBarSlot,key:P.primary.index,page:P,pagesIndex:Q,isCurrentPage:Q===S,isLeadingPage:Q<S,isTrailingPage:Q>S,totalPages:s.length,primaryPageLoadState:n[P.primary.index].loaded,secondaryPageLoadState:P.secondary?n[P.secondary.index].loaded:void 0,createProgressBarSlot:l,showDraggingStyle:Q===S&&x})),t.jsx(Rn,{...r==null?void 0:r.progressBarReadPages,currentPagesIndex:E.pagesIndex,pagesLength:s.length,progressBarPosition:d})]}),t.jsx(bn,{boxProps:r==null?void 0:r.progressBarCurrentPageSlot,pageName:E.name,currentPagesIndex:E.pagesIndex,pagesLength:s.length,isDragging:x,progressBarPosition:d,children:a==null?void 0:a.progressBarCurrentPage})]})}),t.jsx(ir,{ref:R,...(De=r==null?void 0:r.progressBarPageTexts)==null?void 0:De.base,...(me=r==null?void 0:r.progressBarPageTexts)==null?void 0:me.total,sx:[{minWidth:"unset"},...Array.isArray((fe=(xe=r==null?void 0:r.progressBarPageTexts)==null?void 0:xe.base)==null?void 0:fe.sx)?(ve=(Z=(Ee=r==null?void 0:r.progressBarPageTexts)==null?void 0:Ee.base)==null?void 0:Z.sx)!=null?ve:[]:[(pe=(Ie=r==null?void 0:r.progressBarPageTexts)==null?void 0:Ie.base)==null?void 0:pe.sx],...Array.isArray(($e=(Ne=r==null?void 0:r.progressBarPageTexts)==null?void 0:Ne.total)==null?void 0:$e.sx)?(Se=(Te=(Qe=r==null?void 0:r.progressBarPageTexts)==null?void 0:Qe.total)==null?void 0:Te.sx)!=null?Se:[]:[(Le=(K=r==null?void 0:r.progressBarPageTexts)==null?void 0:K.total)==null?void 0:Le.sx]],onClick:()=>h("next","ltr",!1),children:e})]})})},Hr=F(i.memo(Cn),[wt,()=>({openPage:ue.useOpenPage()}),Oe,D.useSettingsWithoutDefaultFlag],["isDragging","setIsDragging","openPage","pages","pageLoadStates","totalPages","currentPageIndex","readingMode"]),wn=i.forwardRef(({direction:e,...s},n)=>{const[o]=kt("appTheme","default"),[r]=kt("themeMode",os.SYSTEM),[a]=kt("pureBlackMode",!1),{settings:{customThemes:l}}=Qr(),d=i.useMemo(()=>es(r,ts(o,l),a,e),[r,o,l,a,e]);return t.jsx(rs,{value:ss[e],children:t.jsx(ns,{theme:d,children:t.jsx(z,{...s,ref:n,dir:e})})})}),Vr=F(wn,[()=>({direction:D.useGetThemeDirection()})],["direction"]),Fr=i.memo(({pageName:e,progressBarPosition:s,slotProps:n,children:o})=>{var r;return t.jsx($,{...n==null?void 0:n.tooltip,title:e,placement:Rr[s],children:t.jsx(z,{...n==null?void 0:n.box,sx:{width:"100%",height:"100%",...(r=n==null?void 0:n.box)==null?void 0:r.sx},children:o})})}),On=i.memo(({pageName:e,primaryPageLoadState:s,secondaryPageLoadState:n,progressBarPosition:o,isCurrentPage:r,isLeadingPage:a,showDraggingStyle:l})=>{const d=Je();return t.jsx(Fr,{pageName:e,progressBarPosition:o,slotProps:{box:{sx:{cursor:"pointer",backgroundColor:Zt(d.palette.background.paper,.2),...d.applyStyles("dark",{backgroundColor:qt(d.palette.background.paper,.1)}),...m(s&&(n==null||n),{backgroundColor:Zt(d.palette.background.paper,.35),...d.applyStyles("dark",{backgroundColor:qt(d.palette.background.paper,.25)})})}},tooltip:{slotProps:r?{tooltip:{sx:{backgroundColor:"primary.main",color:"primary.contrastText"}}}:void 0}},children:t.jsx(z,{sx:{width:"100%",height:"100%",...m(a,{backgroundColor:Ye(d.palette.primary.main,.5)}),...m(r,{cursor:l?"grabbing":"grab",pointer:"grabbing",borderRadius:2,backgroundColor:"primary.dark",...d.applyStyles("dark",{backgroundColor:"primary.light"})})}})})}),Dn=({readerNavBarWidth:e,isMaximized:s,setIsMaximized:n,isDragging:o,progressBarType:r,progressBarSize:a,progressBarPosition:l,progressBarPositionAutoVertical:d,readerDirection:c,scrollbarXSize:x,scrollbarYSize:u,totalPages:h})=>{const g=Je(),[,p]=i.useState({});Ge(window.document.documentElement,i.useCallback(()=>p({}),[]));const f=br(l,d,u,e+x),{isBottom:v,isLeft:T,isRight:b,isVertical:R,isHorizontal:S}=be(f),O=!!h,E=r===Ft.HIDDEN,j=!s&&!o;return t.jsx(Vr,{children:t.jsx(Hr,{direction:S?c:"ltr",progressBarPosition:f,fullSegmentClicks:!0,createProgressBarSlot:i.useCallback((I,C,M,_,B,U,y,G,H)=>t.jsx(On,{pageName:I.name,primaryPageLoadState:M,secondaryPageLoadState:_,progressBarPosition:f,isCurrentPage:B,isLeadingPage:U,showDraggingStyle:H}),[f]),slotProps:{container:{sx:{overflow:"hidden",transition:"all 0.".concat(g.transitions.duration.shortest,"s"),...m(S,{minHeight:"100px",...m(g.direction==="ltr",{left:c==="ltr"?e:u,right:c==="rtl"?e:u}),...m(g.direction==="rtl",{left:c==="rtl"?e:u,right:c==="ltr"?e:u})}),...m(R,{minWidth:"100px",bottom:"".concat(x,"px")}),...m(v,{bottom:"".concat(x,"px")}),...m(T,{...m(g.direction==="ltr",{left:c==="ltr"?e:"unset",right:c==="rtl"?e:"unset"}),...m(g.direction==="rtl",{right:c==="rtl"?u:"unset",left:c==="ltr"?u:"unset"})}),...m(b,{...m(g.direction==="ltr",{right:c==="ltr"?u:"unset",left:c==="rtl"?u:"unset"}),...m(g.direction==="rtl",{left:c==="rtl"?e:"unset",right:c==="ltr"?e:"unset"})}),...m(j,{opacity:E?0:.85}),...m(!O,{pointerEvents:"none"})},onMouseEnter:()=>n(!0),onMouseLeave:()=>n(!1)},progressBarRoot:{sx:{gap:0,transition:"all 0.1s ease-in-out",backgroundColor:"background.paper",...m(R,{flexDirection:"column",height:"100%"}),...m(j,{backgroundColor:"unset",pointerEvents:"none",...m(S,{px:2}),...m(R,{py:2}),...m(v,{pb:.25}),...m(T,{...m(g.direction==="ltr",{pl:c==="ltr"?.25:0,pr:c==="rtl"?.25:0}),...m(g.direction==="rtl",{pr:c==="rtl"?.25:0,pl:c==="ltr"?.25:0})}),...m(b,{...m(g.direction==="ltr",{pr:c==="ltr"?.25:0,pl:c==="rtl"?.25:0}),...m(g.direction==="rtl",{pl:c==="rtl"?.25:0,pr:c==="ltr"?.25:0})})})}},progressBarSlotsContainer:{sx:{gap:.25,borderRadius:2,transition:"height 0.1s ease-in-out",...m(S,{height:"20px"}),...m(R,{flexDirection:"column",width:"20px"}),...m(j,{...m(S,{height:"".concat(a,"px")}),...m(R,{width:"".concat(a,"px")})})}},progressBarReadPages:{sx:{display:"none"}},progressBarCurrentPageSlot:{sx:{display:"none"}},progressBarPageTexts:{base:{sx:{px:1,py:1.5,transition:"all 0.1s ease-in-out",...m(j,{transform:"scale(0)",p:0,minWidth:0,maxWidth:0,minHeight:0,maxHeight:0})}}}}})})},In=F(i.memo(Dn),[We,wt,D.useSettingsWithoutDefaultFlag,()=>({readerDirection:D.useGetThemeDirection()}),qe,Oe],["readerNavBarWidth","isMaximized","setIsMaximized","isDragging","progressBarType","progressBarSize","progressBarPosition","progressBarPositionAutoVertical","readerDirection","scrollbarXSize","scrollbarYSize","totalPages"]),Ln=ge(t.jsx("path",{fillRule:"evenodd",d:"M16 9V4h1c.55 0 1-.45 1-1s-.45-1-1-1H7c-.55 0-1 .45-1 1s.45 1 1 1h1v5c0 1.66-1.34 3-3 3v2h5.97v7l1 1 1-1v-7H19v-2c-1.66 0-3-1.34-3-3"})),An=ge(t.jsx("path",{d:"M14 4v5c0 1.12.37 2.16 1 3H9c.65-.86 1-1.9 1-3V4zm3-2H7c-.55 0-1 .45-1 1s.45 1 1 1h1v5c0 1.66-1.34 3-3 3v2h5.97v7l1 1 1-1v-7H19v-2c-1.66 0-3-1.34-3-3V4h1c.55 0 1-.45 1-1s-.45-1-1-1"})),_n=Ue(L)({width:"400px",minWidth:"400px",maxWidth:"400px",height:"100vh",overflowY:"auto"}),Bn=i.memo(({mangaId:e,mangaTitle:s,chapterTitle:n,scanlator:o})=>t.jsxs(L,{children:[t.jsx($,{title:s,placement:"right",children:t.jsx(ut,{lines:3,variant:"h6",component:"h1",sx:{textAlign:"center"},children:t.jsx($t,{component:Ot,to:Xt.manga.path(e),sx:{textDecoration:"none",color:"inherit"},children:s})})}),t.jsx($,{title:n,placement:"right",children:t.jsx(ut,{lines:4,variant:"body1",component:"h2",sx:{textAlign:"center"},children:n})}),o&&t.jsx($,{title:o,placement:"right",children:t.jsx(ut,{lines:4,variant:"body2",component:"h3",color:"textDisabled",sx:{textAlign:"center"},children:o})})]})),yn=ge(t.jsx("path",{d:"M15.41 16.59 10.83 12l4.58-4.59L14 6l-6 6 6 6z"})),kn=ge(t.jsx("path",{d:"M8.59 16.59 13.17 12 8.59 7.41 10 6l6 6-6 6z"})),Ct=({title:e,type:s,disabled:n,...o})=>t.jsx($,{title:e,disabled:n,children:t.jsx(kr,{sx:{flexBasis:"15%"},variant:"contained",disabled:n,...o,children:s==="previous"?t.jsx(yn,{}):t.jsx(kn,{})})}),Pn=({currentPageIndex:e,pages:s,readingDirection:n,openPage:o})=>{const{t:r}=W(),a=Er(),l=i.useMemo(()=>ye(e,s),[e,s]),d=Tr[n];return t.jsxs(L,{sx:{flexDirection:"row",gap:1},dir:"ltr",children:[t.jsx(Ct,{type:"previous",title:r(a("reader.button.previous_page","reader.button.next_page",d)),disabled:a(!l.primary.index,we(l)===we(s.slice(-1)[0]),d),onClick:()=>o("previous",void 0,!1)}),t.jsxs(Nr,{sx:{flexBasis:"70%",flexGrow:0,flexShrink:0},children:[t.jsx(Mr,{id:"reader-nav-bar-desktop-page-select",children:r("reader.page_info.label.page")}),t.jsx(yr,{labelId:"reader-nav-bar-desktop-page-select",label:r("reader.page_info.label.page"),value:we(l),onChange:c=>o(c.target.value,void 0,!1),children:s.map(c=>t.jsx(Rt,{value:we(c),children:c.name},we(c)))})]}),t.jsx(Ct,{type:"next",title:r(a("reader.button.next_page","reader.button.previous_page",d)),disabled:a(we(l)===we(s.slice(-1)[0]),!l.primary.index,d),onClick:()=>o("next",void 0,!1)})]})},Nn=F(i.memo(Pn),[Oe,()=>({openPage:ue.useOpenPage()}),D.useSettingsWithoutDefaultFlag],["currentPageIndex","pages","readingDirection","openPage"]),Mn=()=>{},Wr=({currentChapter:e,chapters:s,style:n})=>{const o=i.useMemo(()=>e&&s.findIndex(r=>r.id===e.id),[e,s]);return t.jsx(Qs,{style:{height:"calc(".concat(s.length," * 100px)"),...n},initialTopMostItemIndex:o!=null?o:0,totalCount:s.length,computeItemKey:r=>s[r].id,itemContent:r=>t.jsx(Zs,{mode:"reader",chapter:s[r],showChapterNumber:!1,selected:null,onSelect:Mn,selectable:!1,isActiveChapter:r===o},s[r].id),increaseViewportBy:400})},Hn=({currentChapter:e,previousChapter:s,nextChapter:n,chapters:o=[],readerThemeDirection:r,openChapter:a})=>{var c,x;const{t:l}=W(),d=bt({variant:"popover",popupId:"reader-nav-bar-desktop-chapter-list"});return i.useLayoutEffect(()=>{d.close()},[e==null?void 0:e.id]),t.jsxs(L,{sx:{flexDirection:"row",gap:1},dir:"ltr",children:[t.jsx(Ct,{type:"previous",title:l(de("reader.button.previous_chapter","reader.button.next_chapter",r)),onClick:()=>{a(de("previous","next",r))},disabled:de(!s,!n,r)}),t.jsxs(Nr,{sx:{flexBasis:"70%",flexGrow:0,flexShrink:0},children:[t.jsx(Mr,{id:"reader-nav-bar-desktop-chapter-select",children:l("chapter.title_one")}),t.jsx(yr,{...Et(d),open:d.isOpen,value:(c=e==null?void 0:e.id)!=null?c:0,MenuProps:{sx:{visibility:"hidden"}},label:l("chapter.title_one"),labelId:"reader-nav-bar-desktop-chapter-select",children:t.jsx(Rt,{value:(x=e==null?void 0:e.id)!=null?x:0,children:e?"#".concat(e.chapterNumber," ").concat(e.name):""},e==null?void 0:e.id)})]}),t.jsx(Ct,{component:Ot,type:"next",title:l(de("reader.button.next_chapter","reader.button.previous_chapter",r)),onClick:()=>{a(de("next","previous",r))},disabled:de(!n,!s,r)}),t.jsx(as,{...is(d),anchorOrigin:{vertical:"bottom",horizontal:"left"},children:t.jsx(z,{sx:{mb:1},children:t.jsx(Wr,{style:{width:"500px",maxWidth:"90vw",minHeight:"150px",maxHeight:"300px"},currentChapter:e,chapters:o})})})]})},Vn=F(i.memo(Hn),[()=>({readerThemeDirection:D.useGetThemeDirection()}),()=>({openChapter:ue.useOpenChapter()})],["readerThemeDirection","openChapter"]),Fn=ge(t.jsx("path",{d:"M17 4h3c1.1 0 2 .9 2 2v2h-2V6h-3zM4 8V6h3V4H4c-1.1 0-2 .9-2 2v2zm16 8v2h-3v2h3c1.1 0 2-.9 2-2v-2zM7 18H4v-2H2v2c0 1.1.9 2 2 2h3zM18 8H6v8h12z"})),Ur=(e,s,n)=>{const r=(e+1)%s.length===0;if(!(n&&r))return s[(e+1)%s.length]},Kt=({tooltip:e,value:s,defaultValue:n,values:o,setValue:r,valueToDisplayData:a,isDefaultable:l,onDefault:d,defaultIcon:c})=>{const{t:x}=W(),u=s===void 0,h=i.useMemo(()=>u?-1:o.indexOf(s),[s,o]);return t.jsx($,{title:e,children:u?t.jsx(Ke,{onClick:()=>r(o[0]),sx:{justifyContent:"start",textTransform:"unset",flexGrow:1},variant:"contained",startIcon:c,size:"large",children:n===void 0?x("global.label.default"):t.jsx($s,{i18nKey:"settings.default_value",value:a[n].isTitleString?a[n].title:x(a[n].title)})}):t.jsx(Ke,{onClick:()=>{const g=Ur(h,o,l);if(g===void 0){d==null||d();return}r(g)},sx:{justifyContent:"start",textTransform:"unset",flexGrow:1},variant:"contained",startIcon:a[s].icon,size:"large",children:a[s].isTitleString?a[s].title:x(a[s].title)})})},Wn=({pageScaleMode:e,shouldStretchPage:s,updateSetting:n,...o})=>{const{t:r}=W();return t.jsxs(L,{sx:{flexDirection:"row",gap:1},children:[t.jsx(Kt,{...o,tooltip:r("reader.settings.page_scale.title"),value:e.isDefault?void 0:e.value,defaultValue:e.isDefault?e.value:void 0,values:jr,setValue:a=>n("pageScaleMode",a),valueToDisplayData:Jt,defaultIcon:Jt[e.value].icon}),cs[e.value]&&t.jsx($,{title:r("reader.settings.page_scale.stretch"),children:t.jsx(kr,{onClick:()=>n("shouldStretchPage",!s.value),sx:{px:void 0},variant:"contained",color:s.value?"secondary":"primary",children:t.jsx(Fn,{})})})]})},Un=({readingMode:e,setReadingMode:s,...n})=>{const{t:o}=W();return t.jsx(Kt,{...n,tooltip:o("reader.settings.label.reading_mode"),value:e.isDefault?void 0:e.value,defaultValue:e.isDefault?e.value:void 0,values:Cr,setValue:s,valueToDisplayData:Wt,defaultIcon:Wt[e.value].icon})},Gn=()=>t.jsx(ls,{children:t.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",stroke:"currentColor",strokeWidth:"2",viewBox:"0 0 24 24",children:t.jsx("path",{d:"M2 4h6a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H2m20 0h-6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h6M2 12h20m-3-3 3 3-3 3M5 9l-3 3 3 3"})})}),$n=({readingMode:e,shouldOffsetDoubleSpreads:s,setShouldOffsetDoubleSpreads:n})=>{const{t:o}=W();return ds(e)?t.jsx(Ke,{sx:{justifyContent:"start",textTransform:"unset"},size:"large",onClick:()=>n(!s),color:s?"secondary":"primary",variant:"contained",startIcon:t.jsx(Gn,{}),children:o("reader.settings.label.offset_double_spread")}):null},zn=({readingDirection:e,setReadingDirection:s,...n})=>{const{t:o}=W();return t.jsx(Kt,{...n,tooltip:o("reader.settings.label.reading_direction"),value:e.isDefault?void 0:e.value,defaultValue:e.isDefault?e.value:void 0,values:wr,setValue:s,valueToDisplayData:Qt,defaultIcon:Qt[e.value].icon})},Xn=ge(t.jsx("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2m-1 14H9V8h2zm4 0h-2V8h2z"})),Yn=ge(t.jsx("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2m-2 14.5v-9l6 4.5z"})),Kn=({autoScroll:e,setAutoScroll:s})=>{const{t:n}=W(),{isActive:o,toggleActive:r}=ht(),a=i.useRef(void 0);return t.jsxs(L,{sx:{flexDirection:"row",gap:1},children:[t.jsx(Ke,{sx:{justifyContent:"start",textTransform:"unset",flexGrow:1},size:"large",onClick:r,color:o?"secondary":"primary",variant:"contained",startIcon:o?t.jsx(Xn,{}):t.jsx(Yn,{}),children:n("reader.settings.auto_scroll.title")}),t.jsx(Js,{value:e.value,type:"number",size:"small",onBlur:l=>{const d=tt(+l.target.value,Be.min,Be.max);d!==e.value&&(clearTimeout(a.current),s({...e,value:d},!0))},onChange:l=>{const d=tt(+l.target.value,Be.min,Be.max);s({...e,value:d},!1),clearTimeout(a.current),a.current=setTimeout(()=>s({...e,value:d},!0),1e3)},slotProps:{input:{inputProps:Be,endAdornment:t.jsx(en,{position:"end",children:n("global.time.seconds.second",{count:e.value})})}}})]})},Zn=({manga:e,readingMode:s,shouldOffsetDoubleSpreads:n,pageScaleMode:o,shouldStretchPage:r,readingDirection:a,autoScroll:l,openSettings:d})=>{const{t:c}=W(),x=D.useCreateUpdateSetting(e!=null?e:Ve),u=D.useCreateDeleteSetting(e!=null?e:Ve);return t.jsxs(L,{sx:{gap:1},children:[t.jsx(Un,{readingMode:s,setReadingMode:h=>x("readingMode",h),isDefaultable:!0,onDefault:()=>u("readingMode")}),t.jsx($n,{readingMode:s.value,shouldOffsetDoubleSpreads:n.value,setShouldOffsetDoubleSpreads:h=>x("shouldOffsetDoubleSpreads",h)}),t.jsx(Wn,{pageScaleMode:o,shouldStretchPage:r,updateSetting:x,isDefaultable:!0,onDefault:()=>u("pageScaleMode")}),t.jsx(zn,{readingDirection:a,setReadingDirection:h=>x("readingDirection",h),isDefaultable:!0,onDefault:()=>u("readingDirection")}),t.jsx(Kn,{autoScroll:l,setAutoScroll:(...h)=>x("autoScroll",...h)}),t.jsx(Ke,{onClick:()=>d(),size:"large",sx:{justifyContent:"start",textTransform:"none"},variant:"contained",startIcon:t.jsx(Or,{}),children:c("reader.settings.title.reader")})]})},qn=F(Zn,[Pe,D.useSettings],["manga","readingMode","shouldOffsetDoubleSpreads","pageScaleMode","shouldStretchPage","readingDirection","autoScroll"]),Jn=ge(t.jsx("path",{d:"M12 5V1L7 6l5 5V7c3.31 0 6 2.69 6 6s-2.69 6-6 6-6-2.69-6-6H4c0 4.42 3.58 8 8 8s8-3.58 8-8-3.58-8-8-8"})),cr={...Ve,title:"Fallback",inLibrary:!1},Qn=({manga:e})=>{const{inLibrary:s}=e!=null?e:cr,{t:n}=W(),{CategorySelectComponent:o,updateLibraryState:r}=an(e!=null?e:cr,!0);return t.jsxs(t.Fragment,{children:[t.jsx($,{title:n(s?"manga.action.library.remove.label.action":"manga.button.add_to_library"),children:t.jsx(ce,{onClick:r,color:"inherit",children:s?t.jsx(on,{}):t.jsx(cn,{})})}),o]})},Gr=F(i.memo(Qn),[Pe],["manga"]),eo=ge(t.jsx("path",{d:"M17 3H7c-1.1 0-1.99.9-1.99 2L5 21l7-3 7 3V5c0-1.1-.9-2-2-2m0 15-5-2.18L7 18V5h10z"})),to=({id:e,isBookmarked:s})=>{const{t:n}=W(),o=s?"unbookmark":"bookmark";return t.jsx($,{title:n(Ut[o].action.single),children:t.jsx(ce,{onClick:()=>He.performAction(o,[e],{}),color:"inherit",children:s?t.jsx(qs,{}):t.jsx(eo,{})})})},$r=i.memo(to),ro=({currentChapter:e})=>{var o;const{t:s}=W(),n=He.useDownloadStatusFromCache((o=e==null?void 0:e.id)!=null?o:-1);return e&&He.isDownloaded(e)?t.jsx($,{title:s(Ut.delete.action.single),children:t.jsx(ce,{onClick:()=>He.performAction("delete",[e.id],{}),color:"inherit",children:t.jsx(sn,{})})}):n?t.jsx(nn,{chapterId:n.chapter.id}):t.jsx($,{title:s(Ut.download.action.single),disabled:!e,children:t.jsx(ce,{disabled:!e,onClick:()=>{var r;return He.performAction("download",[(r=e==null?void 0:e.id)!=null?r:-1],{})},color:"inherit",children:t.jsx(rn,{})})})},so=i.memo(({currentChapter:e,pageLoadStates:s,setPageLoadStates:n,setRetryFailedPagesKeyPrefix:o})=>{const{id:r,isBookmarked:a,realUrl:l}=e!=null?e:Pr,{t:d}=W(),c=i.useRef(0),x=i.useMemo(()=>s.some(u=>u.error),[s]);return t.jsxs(L,{sx:{flexDirection:"row",justifyContent:"center",gap:1},children:[t.jsx(Gr,{}),t.jsx($r,{id:r,isBookmarked:a}),t.jsx($,{title:d("reader.button.retry_load_pages"),disabled:!x,children:t.jsx(ce,{onClick:()=>{n(u=>u.map(h=>({url:h.url,loaded:h.loaded}))),o("".concat(c.current)),c.current=(c.current+1)%1e3},disabled:!x,color:"inherit",children:t.jsx(Jn,{})})}),t.jsx(ro,{currentChapter:e}),t.jsx($,{title:d("chapter.action.label.open_on_source"),disabled:!l,children:t.jsx(ce,{disabled:!l,href:l!=null?l:"",rel:"noreferrer",target:"_blank",color:"inherit",children:t.jsx(tn,{})})})]})}),no=F(so,[ke,Oe],["currentChapter","pageLoadStates","setPageLoadStates","setRetryFailedPagesKeyPrefix"]),oo=({exit:e})=>{const{t:s}=W(),n=Er();return t.jsx($,{title:s("reader.button.exit"),children:t.jsx(ce,{sx:{marginRight:2},onClick:e,color:"inherit",children:n(t.jsx(us,{}),t.jsx(gs,{}))})})},zr=F(i.memo(oo),[()=>({exit:D.useExit()})],["exit"]),ao=(e,s)=>{const n=i.useRef(s),o=i.useRef(s);return o.current!==n.current&&!e&&(n.current=!1),o.current!==s&&(n.current=o.current,o.current=s),n.current},io=({isVisible:e,openSettings:s,setReaderNavBarWidth:n,manga:o,chapters:r,currentChapter:a,previousChapter:l,nextChapter:d,isStaticNav:c})=>{const{t:x}=W(),u=D.useCreateUpdateSetting(o!=null?o:Ve),[h,g]=i.useState();Ge(h,i.useCallback(()=>{c&&n(h.offsetWidth)},[h,c])),i.useLayoutEffect(()=>()=>n(0),[]);const v=ao(e,c)&&e?0:void 0;return t.jsx(hs,{variant:c?"permanent":"persistent",open:e||c,transitionDuration:v,SlideProps:{unmountOnExit:!0},PaperProps:{ref:T=>g(T)},children:t.jsxs(_n,{sx:{backgroundColor:"background.paper",pointerEvents:"all"},children:[t.jsxs(L,{sx:{p:2,gap:2,backgroundColor:"action.hover"},children:[t.jsxs(L,{sx:{flexDirection:"row",justifyContent:"space-between",alignItems:"center"},children:[t.jsx(zr,{}),t.jsx($,{title:x("reader.settings.label.static_navigation"),children:t.jsx(ce,{onClick:()=>{n(0),u("isStaticNav",!c)},color:c?"primary":"inherit",children:c?t.jsx(Ln,{}):t.jsx(An,{})})})]}),o&&a?t.jsxs(t.Fragment,{children:[t.jsx(Bn,{mangaId:o.id,mangaTitle:o.title,chapterTitle:a.name,scanlator:a.scanlator}),t.jsx(no,{})]}):t.jsx(Dt,{})]}),t.jsxs(L,{sx:{p:2,gap:2},children:[t.jsxs(L,{sx:{gap:1},children:[t.jsx(Nn,{}),t.jsx(Vn,{chapters:r,currentChapter:a,nextChapter:d,previousChapter:l})]}),t.jsx(xs,{}),t.jsx(qn,{openSettings:s})]})]})})},co=F(i.memo(io),[We,Pe,ke,Oe,D.useSettingsWithoutDefaultFlag],["setReaderNavBarWidth","manga","chapters","currentChapter","previousChapter","nextChapter","isStaticNav"]),lo={...Ve,title:""},uo=i.forwardRef(({isVisible:e,manga:s,currentChapter:n,scrollbarYSize:o},r)=>{const{t:a}=W(),l=bt({popupId:"reader-overlay-more-menu",variant:"popover"}),{id:d,title:c}=s!=null?s:lo,{id:x,name:u,realUrl:h,isBookmarked:g}=n!=null?n:Pr;return t.jsx(Yt,{direction:"down",in:e,ref:r,children:t.jsxs(L,{sx:{flexDirection:"row",alignItems:"center",position:"fixed",top:0,left:0,right:"".concat(o,"px"),p:2,pt:p=>"max(env(safe-area-inset-top), ".concat(p.spacing(2),")"),backgroundColor:p=>Ye(p.palette.background.paper,.95),pointerEvents:"all",boxShadow:2},children:[t.jsx(zr,{}),t.jsx(L,{sx:{flexGrow:1},children:s&&n?t.jsxs(t.Fragment,{children:[t.jsx($,{title:c,children:t.jsx(ut,{lines:1,component:"h1",variant:"h5",children:t.jsx($t,{component:Ot,to:Xt.manga.path(d),sx:{textDecoration:"none",color:"inherit"},children:c})})}),t.jsx($,{title:u,children:t.jsx(ut,{lines:1,children:u})})]}):t.jsx(Dt,{})}),t.jsx(Gr,{}),t.jsx($r,{id:x,isBookmarked:g}),t.jsx(ce,{...Et(l),color:"inherit",children:t.jsx(ln,{})}),t.jsxs(fs,{...ps(l),children:[t.jsx(Rt,{component:$t,disabled:!h,href:h!=null?h:"",rel:"noreferrer",target:"_blank",children:a("chapter.action.label.open_on_source")}),t.jsx(Rt,{disabled:!h,onClick:async()=>{await navigator.clipboard.writeText(c),Dr(a("global.label.copied_clipboard"),"info")},children:a("global.label.share")})]})]})})}),go=F(i.memo(uo),[Pe,ke,qe],["manga","currentChapter","scrollbarYSize"]),ho=ge(t.jsx("path",{d:"m21.81 12.74-.82-.63v-.22l.8-.63c.16-.12.2-.34.1-.51l-.85-1.48c-.07-.13-.21-.2-.35-.2q-.075 0-.15.03l-.95.38c-.08-.05-.11-.07-.19-.11l-.15-1.01c-.03-.21-.2-.36-.4-.36h-1.71c-.2 0-.37.15-.4.34l-.14 1.01c-.03.02-.07.03-.1.05l-.09.06-.95-.38q-.075-.03-.15-.03c-.14 0-.27.07-.35.2l-.85 1.48c-.1.17-.06.39.1.51l.8.63v.23l-.8.63c-.16.12-.2.34-.1.51l.85 1.48c.07.13.21.2.35.2q.075 0 .15-.03l.95-.37c.08.05.12.07.2.11l.15 1.01c.03.2.2.34.4.34h1.71c.2 0 .37-.15.4-.34l.15-1.01c.03-.02.07-.03.1-.05l.09-.06.95.38q.075.03.15.03c.14 0 .27-.07.35-.2l.85-1.48c.1-.17.06-.39-.1-.51M18 13.5c-.83 0-1.5-.67-1.5-1.5s.67-1.5 1.5-1.5 1.5.67 1.5 1.5-.67 1.5-1.5 1.5M17 17h2v4c0 1.1-.9 2-2 2H7c-1.1 0-2-.9-2-2V3c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2v4h-2V6H7v12h10z"})),xo=ge(t.jsx("path",{d:"M4 10.5c-.83 0-1.5.67-1.5 1.5s.67 1.5 1.5 1.5 1.5-.67 1.5-1.5-.67-1.5-1.5-1.5m0-6c-.83 0-1.5.67-1.5 1.5S3.17 7.5 4 7.5 5.5 6.83 5.5 6 4.83 4.5 4 4.5m0 12c-.83 0-1.5.68-1.5 1.5s.68 1.5 1.5 1.5 1.5-.68 1.5-1.5-.67-1.5-1.5-1.5M7 19h14v-2H7zm0-6h14v-2H7zm0-8v2h14V5z"})),lr=ge(t.jsx("path",{d:"M6 6h2v12H6zm3.5 6 8.5 6V6z"})),dr=ge(t.jsx("path",{d:"m6 18 8.5-6L6 6zM16 6v12h2V6z"})),fo={display:"flex",alignItems:"center",justifyContent:"end",position:"relative",backgroundColor:"background.default"},ur="3px",po=i.memo(({isTrailingPage:e,pagesIndex:s,totalPages:n,isVertical:o,isHorizontal:r})=>{const a="".concat(s/(n-1)*100,"%");return t.jsx(z,{sx:{position:"absolute",...m(o,{top:a,left:"50%"}),...m(r,{top:"50%",left:a}),transform:"translate(-50%, -50%)",width:ur,height:ur,borderRadius:100,backgroundColor:"background.paper",...m(e,{backgroundColor:"primary.main"}),zIndex:1}})}),mo=i.memo(({pageName:e,isTrailingPage:s,isCurrentPage:n,pagesIndex:o,totalPages:r,isVertical:a,isHorizontal:l})=>t.jsx(Fr,{pageName:e,progressBarPosition:dt.BOTTOM,slotProps:{box:{sx:fo}},children:!n&&t.jsx(po,{isTrailingPage:s,pagesIndex:o,totalPages:r,isVertical:a,isHorizontal:l})})),vo={[dt.BOTTOM]:"up",[dt.LEFT]:"right",[dt.RIGHT]:"left",[dt.AUTO]:"left"},So=({previousChapter:e,nextChapter:s,isVisible:n,setIsMaximized:o,isDragging:r,currentPageIndex:a,pages:l,direction:d,progressBarPosition:c,progressBarPositionAutoVertical:x,topOffset:u=0,bottomOffset:h=0,scrollbarXSize:g})=>{const p=ue.useOpenChapter(),[,f]=i.useState({});Ge(window.document.documentElement,i.useCallback(()=>f({}),[]));const v=br(c,x,u+h,g),{isLeft:T,isRight:b,isVertical:R,isHorizontal:S}=be(v),O=S?d:"ltr",E=i.useMemo(()=>ye(a,l).pagesIndex,[a,l]),j=i.useMemo(()=>({container:{sx:{flexGrow:1,position:"relative",display:"flex",justifyItems:"center",alignItems:"stretch",backgroundColor:C=>Ye(C.palette.background.paper,.85),borderRadius:100,boxShadow:2}},progressBarRoot:{sx:{flexGrow:1,gap:0,...m(R,{flexDirection:"column"}),...m(S,{alignItems:"stretch"})}},progressBarSlotsActionArea:{sx:{alignItems:"center",cursor:"pointer",...m(R,{width:"100%",flexDirection:"column",px:2}),...m(S,{height:"100%",py:2})}},progressBarSlotsContainer:{sx:{borderRadius:100,backgroundColor:"background.default",...m(R,{flexDirection:"column",py:1}),...m(S,{px:1})}},progressBarSlot:{sx:{...m(R,{width:"20px"}),...m(S,{height:"20px"})}},progressBarCurrentPageSlot:{sx:{display:"flex",zIndex:1,cursor:"inherit",...m(R,{justifyContent:"center"}),...m(S,{alignItems:"center"})}},progressBarPageTexts:{base:{sx:{...m(R,{py:1}),...m(S,{px:1})}}}}),[R,S]),I=i.useMemo(()=>({progressBarCurrentPage:t.jsx(z,{sx:{position:"absolute",...m(R,{top:"calc(100% - 6px)",...m(E===0,{top:"0"}),width:"75%",height:"6px"}),...m(S,{left:"calc(100% - 0px)",...m(E===0,{left:"0"}),width:"6px",height:"75%"}),backgroundColor:"primary.main",borderRadius:100,cursor:r?"grabbing":"grab"}})}),[E,l.length,r,R,S]);return i.useLayoutEffect(()=>(o(n),()=>o(!1)),[n]),t.jsx(Yt,{direction:vo[v],in:n,children:t.jsx(Vr,{sx:{position:"relative",display:"flex",alignItems:"end",height:"100%",pointerEvents:"none",...m(T,{justifyContent:d==="ltr"?"start":"end"}),...m(b,{justifyContent:d==="ltr"?"end":"start"})},children:t.jsxs(L,{sx:{p:2,gap:1,pointerEvents:"all",alignItems:"center",...m(R,{height:"100%",flexDirection:"column"}),...m(S,{width:"100%",flexDirection:"row"})},children:[t.jsx(ce,{onClick:()=>p("previous"),disabled:!e,sx:{backgroundColor:C=>Ye(C.palette.background.paper,.85),boxShadow:2},children:de(t.jsx(lr,{sx:{...m(R,{transform:"rotate(90deg)"})}}),t.jsx(dr,{sx:{...m(R,{transform:"rotate(90deg)"})}}),O)}),t.jsx(Hr,{direction:O,progressBarPosition:v,fullSegmentClicks:!1,createProgressBarSlot:i.useCallback((C,M,_,B,U,y,G,H)=>t.jsx(mo,{pageName:C.name,isTrailingPage:G,isCurrentPage:U,pagesIndex:M,totalPages:H,isVertical:R,isHorizontal:S}),[R,S]),slotProps:{...j,progressBarReadPages:{sx:{backgroundColor:"primary.main",...m(R,{width:"20px",height:"".concat(Math.max(0,ye(a,l).pagesIndex)/(l.length-1)*100,"%"),borderRadius:"400px 400px 0 0"}),...m(S,{width:"".concat(Math.max(0,ye(a,l).pagesIndex)/(l.length-1)*100,"%"),height:"20px",borderRadius:"400px 0 0 400px"})}}},slots:I}),t.jsx(ce,{onClick:()=>p("next"),disabled:!s,sx:{backgroundColor:C=>Ye(C.palette.background.paper,.85),boxShadow:2},children:de(t.jsx(dr,{sx:{...m(R,{transform:"rotate(90deg)"})}}),t.jsx(lr,{sx:{...m(R,{transform:"rotate(90deg)"})}}),O)})]})})})},Ro=F(i.memo(So),[ke,It,wt,Oe,()=>({direction:D.useGetThemeDirection()}),D.useSettingsWithoutDefaultFlag,qe],["previousChapter","nextChapter","isVisible","setIsMaximized","isDragging","currentPageIndex","pages","direction","progressBarPosition","progressBarPositionAutoVertical","scrollbarXSize"]),bo=({manga:e,readingMode:s,readingDirection:n,autoScroll:o,isActive:r,toggleActive:a})=>{const{t:l}=W(),d=D.useCreateDeleteSetting(e!=null?e:Ve);return e?t.jsxs(L,{sx:{gap:2},children:[t.jsx(zs,{}),t.jsx(Xs,{readingMode:s,setReadingMode:c=>D.updateSetting(e,"readingMode",c),isDefaultable:!0,onDefault:()=>d("readingMode")}),t.jsx(Ys,{readingDirection:n,setReadingDirection:c=>D.updateSetting(e,"readingDirection",c),isDefaultable:!0,onDefault:()=>d("readingDirection")}),t.jsx(dn,{label:l("reader.settings.auto_scroll.title"),checked:r,onChange:()=>a()}),t.jsx(Ks,{autoScroll:o,setAutoScroll:(...c)=>D.updateSetting(e,"autoScroll",...c)})]}):null},Eo=F(i.memo(bo),[Pe,D.useSettings,ht],["manga","readingMode","readingDirection","autoScroll","isActive","toggleActive"]),To=({openSettings:e,isVisible:s,currentChapter:n,chapters:o,scrollbarXSize:r,scrollbarYSize:a,topOffset:l=0})=>{const{t:d}=W(),c=bt({variant:"dialog",popupId:"reader-chapter-list-dialog"}),x=bt({variant:"dialog",popupId:"reader-quick-settings-dialog"}),[u,h]=i.useState(0),g=i.useRef(null);return Ge(g,i.useCallback(()=>{var p,f;return h((f=(p=g.current)==null?void 0:p.clientHeight)!=null?f:0)},[u])),i.useLayoutEffect(()=>{c.close()},[n==null?void 0:n.id]),t.jsxs(t.Fragment,{children:[t.jsxs(L,{sx:{position:"fixed",right:"".concat(a,"px"),bottom:0,left:0,height:"calc(100% - ".concat(l,"px)")},children:[t.jsx(Ro,{topOffset:l,bottomOffset:u}),t.jsx(Yt,{direction:"up",in:s,children:t.jsx(L,{ref:g,sx:{alignItems:"center",backgroundColor:p=>Ye(p.palette.background.paper,.95),pb:"max(".concat(r,"px, env(safe-area-inset-bottom))"),boxShadow:2,pointerEvents:"all"},children:t.jsxs(L,{sx:{width:"50%",flexDirection:"row",p:2,gap:1,justifyContent:"space-evenly",alignItems:"center"},children:[t.jsx($,{title:d("reader.button.chapter_list"),children:t.jsx(ce,{...Et(c),color:"inherit",children:t.jsx(xo,{})})}),t.jsx($,{title:d("reader.settings.title.quick_settings"),children:t.jsx(ce,{...Et(x),color:"inherit",children:t.jsx(ho,{})})}),t.jsx($,{title:d("settings.title"),children:t.jsx(ce,{onClick:e,color:"inherit",children:t.jsx(Or,{})})})]})})})]}),c.isOpen&&t.jsx(Ht,{...er(c),fullWidth:!0,maxWidth:"md",scroll:"paper",children:t.jsx(Vt,{sx:{p:0,pb:1},children:t.jsx(Wr,{style:{minHeight:"15vh",maxHeight:"75vh"},currentChapter:n,chapters:o})})}),x.isOpen&&t.jsx(Ht,{...er(x),fullWidth:!0,maxWidth:"md",scroll:"paper",children:t.jsx(Vt,{children:t.jsx(Eo,{})})})]})},jo=F(i.memo(To),[ke,qe],["currentChapter","chapters","scrollbarXSize","scrollbarYSize"]),Co=({isVisible:e,isDesktop:s,isMobile:n})=>{const[o,r]=i.useState(!1),[a,l]=i.useState(0),d=i.useRef(null);return Ge(d,i.useCallback(()=>{var c,x;return l((x=(c=d.current)==null?void 0:c.clientHeight)!=null?x:0)},[n])),t.jsxs(z,{sx:{position:"absolute",width:"100%",height:"100%",pointerEvents:"none",zIndex:1},children:[s&&t.jsxs(t.Fragment,{children:[t.jsx(In,{}),t.jsx(co,{isVisible:e,openSettings:()=>r(!0)})]}),n&&t.jsxs(t.Fragment,{children:[t.jsx(go,{ref:d,isVisible:e}),t.jsx(jo,{openSettings:()=>r(!0),isVisible:e,topOffset:a})]}),t.jsx(gn,{isOpen:o,close:()=>r(!1)}),t.jsx(xn,{})]})},wo=F(i.memo(Co),[D.useOverlayMode],["isDesktop","isMobile"]),gr="reader-tap-zone-layout-canvas",Oo=({readerNavBarWidth:e,showPreview:s,tapZoneLayout:n,tapZoneInvertMode:o,readingDirection:r})=>{const a=Je(),[l,d]=i.useState(0),[c,x]=i.useState(0),[u,h]=i.useState(null);Ge(u,i.useCallback(()=>{var p,f;d((p=u==null?void 0:u.clientWidth)!=null?p:0),x((f=u==null?void 0:u.clientHeight)!=null?f:0)},[u]));const g=ms.getOrCreateCanvas(n,l,c,a.typography.h3,{vertical:o.vertical,horizontal:o.horizontal,isRTL:r===st.RTL});return i.useLayoutEffect(()=>{const p=document.getElementById(gr);p==null||p.replaceChildren(g)},[g,s]),t.jsx(z,{ref:h,sx:{position:"fixed",top:0,left:e,right:0,bottom:0,pointerEvents:"none"},children:s&&t.jsx("div",{id:gr})})},Do=F(Oo,[We,Lt,D.useSettingsWithoutDefaultFlag],["readerNavBarWidth","showPreview","tapZoneLayout","tapZoneInvertMode","readingDirection"]),Io=({readerNavBarWidth:e,customFilter:{rgba:{value:{red:s,green:n,blue:o,alpha:r,blendMode:a},enabled:l}}})=>l?t.jsx(z,{sx:{position:"fixed",top:0,left:e,right:0,bottom:0,pointerEvents:"none",background:"rgba(".concat(s," ").concat(n," ").concat(o," / ").concat(r,"%)"),mixBlendMode:"".concat(a)}}):null,Lo=F(Io,[We,D.useSettingsWithoutDefaultFlag],["readerNavBarWidth","customFilter"]),hr=2,xr=1,ze=0,ae=0,ie=1,Ao=(e,s=Pt.XY)=>{const[n,o]=i.useState(!1),r=i.useRef(void 0),a=i.useRef([0,0,0]),l=i.useRef([0,0,0]),d=i.useRef([0,0,0]),c=i.useRef([0,0]),x=i.useRef(void 0);return i.useEffect(()=>{const u=e==null?void 0:e.current;if(!u)return()=>{};const h=()=>{r.current||(r.current=getComputedStyle(u));const j=r.current.direction==="rtl",I=r.current.flexDirection==="row-reverse";return j||!j&&I},g=()=>(r.current||(r.current=getComputedStyle(u)),r.current.flexDirection==="column-reverse"),p=s!==Pt.Y,f=s!==Pt.X,v=()=>clearInterval(x.current),T=()=>{const j=(Y,k,se)=>(Y[ze]-Y[hr])/(k[ze]-k[hr])*1e3/se,I=[p?j(a.current,d.current,u.clientWidth):0,f?j(l.current,d.current,u.clientHeight):0],C=p&&f?Math.sqrt(I[ae]**2+I[ie]**2):Math.abs(f?I[ie]:I[ae]),M=[I[ae]/C,I[ie]/C],_=tt(1.2*C,-12,12),B=(Date.now()-d.current[ze])/1e3,U=_-14.278*B+75.24*B**2/_-149.72*B**3/_/_;if(!(_!==0&&U>0&&!Number.isNaN(_))){v();return}const G=(Y,k)=>Y*k*(_*B-7.1397*B**2+25.08*B**3/_-37.43*B**4/_/_),H=[G(u.clientWidth,M[ae]),G(u.clientHeight,M[ie])],A=[u.scrollWidth-u.clientWidth,u.scrollHeight-u.clientHeight],q=[tt(c.current[ae]-H[ae],h()?-A[ae]:0,A[ae]),tt(c.current[ie]-H[ie],g()?-A[ie]:0,A[ie])],he=q[ae]!==0||q[ae]!==A[ae],le=q[ie]!==0||q[ie]!==A[ie];he||le||v(),p&&(u.scrollLeft=q[ae]),f&&(u.scrollTop=q[ie])};let b=!1;const R=j=>{if(b)return!0;const I=[u.clientHeight<u.scrollHeight,u.clientWidth<u.scrollWidth],C=[Math.abs(a.current[ze]-j.pageX)>0,Math.abs(l.current[ze]-j.pageY)>0];return I[ae]&&C[ae]||I[ie]&&C[ie]},S=j=>{R(j)&&(b=!0,o(!0),a.current=[...a.current.slice(1),j.pageX],l.current=[...l.current.slice(1),j.pageY],d.current=[...d.current.slice(1),Date.now()],p&&(u.scrollLeft+=a.current[ze]-a.current[xr]),f&&(u.scrollTop+=l.current[ze]-l.current[xr]))},O=()=>{u.removeEventListener("mousemove",S),u.removeEventListener("mouseup",O),setTimeout(()=>{b=!1,o(!1)},0),c.current=[u.scrollLeft,u.scrollTop],x.current=setInterval(T,16)},E=j=>{j.button===0&&(j.preventDefault(),a.current=[j.pageX,j.pageX,j.pageX],l.current=[j.pageY,j.pageY,j.pageY],d.current=[Date.now()-2,Date.now()-1,Date.now()],u.addEventListener("mousemove",S),u.addEventListener("mouseup",O),v())};return u.addEventListener("mousedown",E),u.addEventListener("wheel",v),()=>{u.removeEventListener("mousedown",E),u.removeEventListener("wheel",v),v()}},[e,s]),n},_o=(e,s)=>{i.useEffect(()=>{if(e){s.pause();return}s.resume()},[e,s.isPaused])},Bo=(e,s,n,o,r)=>{i.useEffect(()=>{var l,d;const a=()=>{e&&s(!1),n&&o(!1)};return(l=r.current)==null||l.addEventListener("wheel",a),(d=r.current)==null||d.addEventListener("touchmove",a),()=>{var c,x;(c=r.current)==null||c.removeEventListener("wheel",a),(x=r.current)==null||x.removeEventListener("touchmove",a)}},[e,n])},yo=(e,s,n)=>{i.useEffect(()=>{if(e!==N.CONTINUOUS_HORIZONTAL)return()=>{};if(!n.current)return()=>{};const o=r=>{var a,l;if(r.preventDefault(),r.shiftKey){(a=n.current)==null||a.scrollBy({top:r.deltaY});return}(l=n.current)==null||l.scrollBy({left:s===st.LTR?r.deltaY:r.deltaY*-1})};return n.current.addEventListener("wheel",o),()=>{var r;return(r=n.current)==null?void 0:r.removeEventListener("wheel",o)}},[e,s])},ko=e=>{const s=i.useRef(void 0);i.useEffect(()=>{const n=r=>{const a=e.current;a&&(a.style.cursor=r?"default":"none")},o=()=>{n(!0),clearTimeout(s.current),s.current=setTimeout(()=>{n(!1)},5e3)};return o(),window.addEventListener("mousemove",o),()=>{n(!0),window.removeEventListener("mousemove",o),clearTimeout(s.current)}},[])},Po=(e,s,n,o,r)=>{i.useLayoutEffect(()=>{var a;s||(a=r.current)==null||a.scrollTo(vs(r.current,n,o),0)},[e])},No=(e,s,n,o,r,a,l,d,c,x)=>{i.useLayoutEffect(()=>{if(e==null)return;const u=ye(e,n);if(l){const p=e>s?Tt.PREVIOUS:Tt.NEXT,f=d.current[u.pagesIndex];f==null||f.scrollIntoView({block:"start",inline:Ss(p,c,x)})}const h=we(u),g=h===o-1;r(null),a(h,!g,g)},[e])},Mo=(e,s,n,o,r,a,l)=>{const[d,c]=i.useState(l===N.DOUBLE_PAGE);i.useLayoutEffect(()=>{if(d&&l!==N.DOUBLE_PAGE){c(!1);const h=Ir(n);o(h),r(h.map(({primary:{url:g}})=>({url:g,isSpread:!1})));return}l===N.DOUBLE_PAGE&&(d||a(we(ye(e,s))),o(s),c(l===N.DOUBLE_PAGE))},[s,l])},Nt=({title:e,name:s,scanlator:n,backgroundColor:o})=>{const r=Je(),a=r.palette.getContrastText(Es(r.palette,Lr[o])),l=Ye(a,.5);return s?t.jsxs(L,{children:[t.jsx(Xe,{color:a,children:e}),t.jsx(Xe,{color:a,variant:"h6",component:"h1",children:s}),n&&t.jsx(Xe,{variant:"body2",color:l,children:n})]}):null},Ho=({type:e,transitionPageMode:s,readingMode:n,backgroundColor:o,manga:r,currentChapterName:a,currentChapterScanlator:l,previousChapterName:d,previousChapterScanlator:c,nextChapterName:x,nextChapterScanlator:u,scrollbarXSize:h,scrollbarYSize:g,readerNavBarWidth:p,handleBack:f})=>{var O;const{t:v}=W(),T=e===Fe.PREVIOUS,b=e===Fe.NEXT,R=!!a&&!d,S=!!a&&!x;return bs(e,s,n)?t.jsx(L,{sx:{justifyContent:"center",alignItems:"center",...m(!rt(n),{width:"100%",height:"100%"}),...m(rt(n),{position:"sticky",...m(Ze(n),{left:0,maxWidth:"calc(100vw - ".concat(g,"px - ").concat(p,"px)"),minHeight:"calc(100vh - ".concat(h,"px)")}),...m(n===N.CONTINUOUS_HORIZONTAL,{top:0,minWidth:"calc(100vw - ".concat(g,"px - ").concat(p,"px)"),maxHeight:"calc(100vh - ".concat(h,"px)")})})},children:t.jsxs(L,{sx:{gap:2,maxWidth:E=>"calc(100vw - ".concat(g,"px - ").concat(p,"px - ").concat(E.spacing(2),")"),maxHeight:"calc(100vh - ".concat(h,"px)"),width:"max-content",p:1},children:[T&&R&&t.jsx(Xe,{variant:"h6",children:v("reader.transition_page.first_chapter")}),t.jsxs(L,{sx:{gap:5},children:[T&&!R&&t.jsx(Nt,{title:v("reader.transition_page.previous"),name:d,scanlator:c,backgroundColor:o}),!!a&&t.jsx(Nt,{title:v(T?"reader.transition_page.current":"reader.transition_page.finished"),name:a,scanlator:l,backgroundColor:o}),b&&!S&&t.jsx(Nt,{title:v("reader.transition_page.next"),name:x,scanlator:u,backgroundColor:o})]}),b&&S&&t.jsx(Xe,{variant:"h6",children:v("reader.transition_page.last_chapter")}),(T&&R||b&&S)&&t.jsxs(L,{sx:{flexDirection:"row",flexWrap:"wrap",gap:1},children:[t.jsx(Ke,{sx:{flexGrow:1},onClick:E=>{E.stopPropagation(),f()},variant:"contained",children:v("reader.transition_page.exit.previous_page")}),t.jsx(Ke,{sx:{flexGrow:1},component:Ot,onClick:E=>{E.stopPropagation()},variant:"contained",to:Xt.manga.path((O=r==null?void 0:r.id)!=null?O:-1),children:v("reader.transition_page.exit.manga_page")})]})]})}):null},fr=F(i.memo(Ho),[Pe,({chapterId:e})=>{const{chapters:s}=ke(),n=i.useMemo(()=>s.findIndex(l=>l.id===e),[e,s]),o=s[n],r=i.useMemo(()=>s[n+1],[n,s]),a=i.useMemo(()=>s[n-1],[n,s]);return{currentChapterName:o==null?void 0:o.name,currentChapterScanlator:o==null?void 0:o.scanlator,previousChapterName:r==null?void 0:r.name,previousChapterScanlator:r==null?void 0:r.name,nextChapterName:a==null?void 0:a.name,nextChapterScanlator:a==null?void 0:a.scanlator}},qe,We,Oe,D.useSettingsWithoutDefaultFlag,({chapterId:e,type:s})=>{const n=Rs(),{chapters:o}=ke(),r=i.useMemo(()=>o.findIndex(u=>u.id===e),[e,o]),a=r===0,l=r===o.length-1,d=s===Fe.PREVIOUS&&l,c=s===Fe.NEXT&&a;return{handleBack:d||c?n:_e}}],["manga","currentChapterName","currentChapterScanlator","previousChapterName","previousChapterScanlator","nextChapterName","nextChapterScanlator","scrollbarXSize","scrollbarYSize","readerNavBarWidth","backgroundColor","transitionPageMode","readingMode","handleBack"]),Vo=(e,s,n,o,r,a,l,d,c,x,u,h,g,p,f,v,T,b)=>{var S,O;const R=i.useRef(void 0);i.useLayoutEffect(()=>{var _;const E=(_=s.data)==null?void 0:_.fetchChapterPages;if(!E)return;const{pages:j}=E,I=j.length?j:[""],C=Ts(n,o!=null?o:0,I.length-1),M=R.current!==(E==null?void 0:E.pages);if(M){R.current=E.pages;const B=Ir(I);c(!0),h(B),g(I),p(B.map(({primary:{url:U}})=>({url:U,loaded:!1}))),f(B.map(({primary:{url:U}})=>({url:U,isSpread:!1})))}else h(r),p(a),f(l);u(E.pages.length),g(I),v(C),T(C),x(B=>({...B,isCurrentChapterReady:d||M})),b(Fe.NONE)},[(O=(S=s.data)==null?void 0:S.fetchChapterPages)==null?void 0:O.pages,e])},pr=0,mt="-10px",Fo=(e,s,n)=>{if(!rt(s))return;const o=Tr[n],r="0px ".concat(mt," 0px 0px"),a="0px 0px 0px ".concat(mt);return Ze(s)?e==="first"?"0px 0px ".concat(mt," 0px"):"".concat(mt," 0px 0px 0px"):e==="first"?de(r,a,o):de(a,r,o)},Wo=(e,s,n,o)=>e===st.LTR?{start:n>=o,end:s<0}:{start:s<0,end:n>=o},Uo=(e,{top:s,right:n,bottom:o,left:r},a,l)=>{const d=window.innerWidth-l,c=window.innerHeight-a;return{[N.CONTINUOUS_VERTICAL]:{start:o>=c,end:s<0},[N.CONTINUOUS_HORIZONTAL]:Wo(e,r,n,d)}},Go=({[N.CONTINUOUS_VERTICAL]:e,[N.CONTINUOUS_HORIZONTAL]:s},n)=>Ze(n)?e.start||e.end:s.start||s.end,$o=({[N.CONTINUOUS_VERTICAL]:e,[N.CONTINUOUS_HORIZONTAL]:s},n)=>Ze(n)?e:s,mr=(e,s,n,o,r,a,l,d,c,x,u,h)=>{js(c,i.useCallback(g=>{if(!rt(a)||n===void 0)return;const p=g[g.length-1],f=Uo(l,p.target.getBoundingClientRect(),x,u),{start:v,end:T}=$o(f,a),b=p.intersectionRatio<=pr;if(!Go(f,a))return;const R=e==="first"&&v&&!r,S=e==="last"&&!o&&T;if(R||e==="last"&&T&&b){d(n,!r,!1);return}S&&d(s,!1,!1)},[e,s,n,o,r,a,l,d,x,u]),i.useMemo(()=>({root:h,threshold:[pr],rootMargin:Fo(e,a,l),ignoreInitialObserve:!0}),[e,a,l]))},zo=({readingMode:e,readingDirection:s,chapterId:n,previousChapterId:o,nextChapterId:r,isPreviousChapterVisible:a,isCurrentChapter:l,isNextChapterVisible:d,imageWrapper:c,openChapter:x,scrollbarXSize:u,scrollbarYSize:h,scrollElement:g})=>(mr("first",n,o,l,a,e,s,x,c,u,h,g),mr("last",n,r,l,d,e,s,x,c,u,h,g),null),Xo=F(i.memo(zo),[()=>({openChapter:ue.useOpenChapter()})],["openChapter"]),Yo=({currentPageIndex:e,setPages:s,setPageLoadStates:n,setTotalPages:o,setCurrentPageIndex:r,updateCurrentPageIndex:a,setPageToScrollToIndex:l,transitionPageMode:d,retryFailedPagesKeyPrefix:c,setTransitionPageMode:x,readingMode:u,readerWidth:h,pageScaleMode:g,shouldOffsetDoubleSpreads:p,readingDirection:f,imagePreLoadAmount:v,pageGap:T,chapterId:b,previousChapterId:R,nextChapterId:S,isPreviousChapterVisible:O,isNextChapterVisible:E,lastPageRead:j,isInitialChapter:I,isCurrentChapter:C,isPreviousChapter:M,isNextChapter:_,isLeadingChapter:B,isTrailingChapter:U,isPreloadMode:y,imageRefs:G,scrollIntoView:H,setReaderStateChapters:A,resumeMode:q,customFilter:he,shouldStretchPage:le,scrollbarXSize:X,scrollbarYSize:Y,readerNavBarWidth:k,onSizeChange:se,minWidth:J,minHeight:De,scrollElement:me})=>{const{t:xe}=W(),{direction:fe}=Je(),[Ee,Z]=Gt.useGetChapterPagesFetch(b!=null?b:-1),[ve,Ie]=i.useState(!1),[pe,Ne]=i.useState(pt.totalPages),[$e,Qe]=i.useState(pt.pageUrls),[Te,Se]=i.useState(pt.pages),[K,Le]=i.useState(pt.pageLoadStates),[P,Q]=i.useState(K.map(({url:w})=>({url:w,isSpread:!1}))),re=i.useRef(null),je=i.useRef(C),ne=i.useRef(Te.map(()=>null)),V=i.useRef(null),Ae=i.useMemo(()=>!!!pe||!(pe===P.length)?Te:u===N.DOUBLE_PAGE?Cs($e,P,p,f):Te,[P,u,p,f,pe]),nt=i.useMemo(()=>ws(u),[u]),ot=f===st.LTR,Re=rt(u),Me=!Re&&!C||y,xt=!Re&&C,at=!Me&&(xt||Re&&(I||B)),it=!Me&&(xt||Re&&(I||U));je.current=C,C&&(G.current=ne.current);const ct=i.useCallback(()=>{b&&(Ie(!1),Ee({variables:{input:{chapterId:b}}}).catch(vt()))},[Ee,b]),At=i.useMemo(()=>Os(Ae,P,Q,K,w=>{je.current&&n(w),Le(w)},u),[Ae,u]),_t=i.useMemo(()=>Ds(w=>{je.current&&n(w),Le(w)}),[]);i.useEffect(()=>{ct()},[b]),Ge(re,i.useCallback(w=>{const{clientWidth:Ce,clientHeight:et}=w[0].target;se(Ce,et,b)},[se,re.current,b]));const oe=(w,Ce,et,ft=!1)=>{(ft||!ve)&&Ce(w),C&&et(w)};return Vo(C,Z,q,j,Ae,K,P,ve,Ie,w=>oe(w,_e,A),w=>oe(w,Ne,o),w=>oe(w,Se,s),w=>oe(w,Qe,_e),w=>oe(w,Le,n),w=>oe(w,Q,_e),w=>oe(w,_e,r),w=>{(I&&!ve||H)&&(l(w),A(Ce=>({...Ce,visibleChapters:{...Ce.visibleChapters,scrollIntoView:!1,resumeMode:void 0}})))},w=>oe(w,_e,x)),Mo(e,Ae,$e,w=>oe(w,Se,s,!0),w=>oe(w,Q,_e,!0),w=>oe(w,_e,a),u),Re||C||M||_?Z.error?Me?null:t.jsx(z,{sx:{minHeight:"100%",minWidth:"100%",display:"grid",placeItems:"center",position:"relative"},children:t.jsx(jt,{message:xe("global.error.label.failed_to_load_data"),messageExtra:Ar(Z.error),retry:()=>{ct()}})}):Z.loading||!ve?Me?null:t.jsx(z,{sx:{minHeight:"100%",minWidth:"100%",display:"grid",placeItems:"center"},children:t.jsx(Dt,{})}):b!=null&&!pe?Me?null:t.jsx(z,{sx:{minWidth:"100%",minHeight:"100%",position:"relative"},children:t.jsx(jt,{message:xe("reader.error.label.no_pages_found"),retry:ct})}):t.jsxs(L,{ref:re,sx:{width:"fit-content",height:"fit-content",margin:"auto",flexWrap:"nowrap",...m(u===N.CONTINUOUS_HORIZONTAL,{minHeight:De}),...m(Ze(u),{minWidth:J}),...m(Me,{maxWidth:0,maxHeight:0,minWidth:"unset",minHeight:"unset",overflow:"hidden",margin:"unset"}),...m(Ze(u)&&_r(h,g),{alignItems:"center"}),...m(u===N.CONTINUOUS_HORIZONTAL,{...m(fe==="ltr",{flexDirection:ot?"row":"row-reverse"}),...m(fe==="rtl",{flexDirection:ot?"row-reverse":"row"})})},children:[!y&&t.jsx(Xo,{readingMode:u,readingDirection:f,chapterId:b,previousChapterId:R,nextChapterId:S,isCurrentChapter:C,isPreviousChapterVisible:O,isNextChapterVisible:E,imageWrapper:V.current,scrollbarXSize:X,scrollbarYSize:Y,scrollElement:me}),at&&t.jsx(fr,{chapterId:b,type:Fe.PREVIOUS}),t.jsx(nt,{ref:V,totalPages:pe,currentPageIndex:e,pages:Ae,transitionPageMode:d,pageLoadStates:K,retryFailedPagesKeyPrefix:c,imageRefs:ne,onLoad:At,onError:_t,isCurrentChapter:C,isPreviousChapter:M,isNextChapter:_,readingMode:u,imagePreLoadAmount:v,readingDirection:f,pageScaleMode:g,pageGap:T,customFilter:he,shouldStretchPage:le,readerWidth:h,scrollbarXSize:X,scrollbarYSize:Y,readerNavBarWidth:k,isPreloadMode:y,resumeMode:q,handleAsInitialRender:H}),it&&t.jsx(fr,{chapterId:b,type:Fe.NEXT})]}):null},Ko=i.memo(Yo),Zo=(e,s,n,o,r,a,l,d)=>{const c=i.useRef({left:0,top:0,visibleElement:void 0,visibleElementLeft:0,visibleElementTop:0}),x=i.useRef(a);i.useEffect(()=>{const g=e.current;if(!g)return()=>{};const p=()=>{var v,T;const{visibleElement:f}=c.current;c.current={...c.current,left:g.scrollLeft,top:g.scrollTop,visibleElementLeft:(v=f==null?void 0:f.offsetLeft)!=null?v:0,visibleElementTop:(T=f==null?void 0:f.offsetTop)!=null?T:0}};return g.addEventListener("scroll",p),()=>g.removeEventListener("scroll",p)},[]);const u=i.useCallback(()=>{const g=e.current,{left:p,top:f,visibleElement:v,visibleElementLeft:T,visibleElementTop:b}=c.current;if(!g||!r||!v)return;const R=p-T+v.offsetLeft,S=f-b+v.offsetTop;g.scrollTo(R,S)},[r]);i.useLayoutEffect(()=>{const g=e.current;if(!g)return()=>{};const p=(b,R,S)=>Array.from(b).filter(O=>O instanceof HTMLElement).flatMap(O=>(R(O),Array.from(O.querySelectorAll("img")))).forEach(S),f=new ResizeObserver(u),v=new IntersectionObserver(b=>{const R=b.filter(S=>S.isIntersecting).shift();!R||!(R.target instanceof HTMLElement)||(c.current={...c.current,visibleElement:R.target,visibleElementLeft:R.target.offsetLeft,visibleElementTop:R.target.offsetTop})}),T=new MutationObserver(b=>{for(const R of b)p(R.addedNodes,S=>f.observe(S),S=>v.observe(S)),p(R.removedNodes,S=>f.unobserve(S),S=>v.unobserve(S))});return T.observe(g,{childList:!0}),()=>{T.disconnect(),f.disconnect(),v.disconnect()}},[u]);const h=i.useCallback(()=>{r&&Is(d)&&l(s)},[r,s,d]);i.useEffect(()=>(window.addEventListener("resize",h),()=>window.removeEventListener("resize",h)),[h]),i.useEffect(()=>{x.current!==a&&(x.current=a,h())},[h,a]),i.useLayoutEffect(()=>{l(s)},[n,o])},qo={[N.SINGLE_PAGE]:lt.X,[N.DOUBLE_PAGE]:lt.X,[N.CONTINUOUS_VERTICAL]:lt.Y,[N.CONTINUOUS_HORIZONTAL]:lt.X,[N.WEBTOON]:lt.Y},Jo=i.forwardRef(({currentPageIndex:e,pageToScrollToIndex:s,setPageToScrollToIndex:n,pages:o,totalPages:r,setPages:a,setPageLoadStates:l,setTotalPages:d,setCurrentPageIndex:c,transitionPageMode:x,retryFailedPagesKeyPrefix:u,setTransitionPageMode:h,readingMode:g,readingDirection:p,readerWidth:f,pageScaleMode:v,shouldOffsetDoubleSpreads:T,imagePreLoadAmount:b,pageGap:R,customFilter:S,shouldStretchPage:O,readerNavBarWidth:E,setScrollbarXSize:j,setScrollbarYSize:I,isVisible:C,setIsVisible:M,updateCurrentPageIndex:_,showPreview:B,setShowPreview:U,initialChapter:y,currentChapter:G,chapters:H,visibleChapters:A,setReaderStateChapters:q,isCurrentChapterReady:he},le)=>{var Q;const{direction:X}=Je(),{resumeMode:Y=tr.START}=(Q=Br().state)!=null?Q:{resumeMode:tr.START},k=i.useRef(null);i.useImperativeHandle(le,()=>k.current);const se=Ze(g),J=rt(g),De=Ao(k),me=ht();i.useEffect(()=>me.setScrollRef(k),[]);const xe=rr.useGetScrollbarSize("width",k.current),fe=rr.useGetScrollbarSize("height",k.current);i.useLayoutEffect(()=>{j(xe),I(fe)},[xe,fe]);const Ee=ue.useHandleClick(k.current),Z=i.useRef(o.map(()=>null)),[{minChapterViewWidth:ve,minChapterViewHeight:Ie,minChapterSizeSourceChapterId:pe},Ne]=i.useState({minChapterViewWidth:0,minChapterViewHeight:0,minChapterSizeSourceChapterId:-1}),[,$e]=i.useState({}),Qe=qo[g],Te=p===st.LTR,Se=i.useMemo(()=>H.findIndex(re=>re.id===(y==null?void 0:y.id)),[H,y==null?void 0:y.id]),K=i.useMemo(()=>H.slice(Math.max(0,Se-A.trailing),Math.min(H.length,Se+A.leading+1)),[H,Se,A.trailing,A.leading]),Le=i.useMemo(()=>K.findIndex(re=>re.id===(G==null?void 0:G.id)),[G,K]),P=i.useCallback((re,je,ne)=>{if(!J)return;const V=ne===pe;if(se){if(!V&&ve>=re)return;Ne({minChapterViewWidth:re,minChapterViewHeight:0,minChapterSizeSourceChapterId:ne});return}(V||Ie<je)&&Ne({minChapterViewWidth:0,minChapterViewHeight:je,minChapterSizeSourceChapterId:ne})},[J,se,ve,Ie,pe]);if(No(s,e,o,r,n,_,J,Z,X,p),Po(e,J,X,p,k),ko(k),yo(g,p,k),Bo(C,M,B,U,k),_o(C,me),Zo(k,e,g,p,J,E,n,v),i.useLayoutEffect(()=>{Ne({minChapterViewWidth:0,minChapterViewHeight:0,minChapterSizeSourceChapterId:-1}),$e({})},[g]),!y||!G)throw new Error("ReaderViewer: illegal state - initialChapter and currentChapter should not be undefined");return t.jsx(L,{ref:k,sx:{width:"100%",height:"100%",overflow:"auto",flexWrap:"nowrap",...m(se&&_r(f,v),{alignItems:"center"}),...m(!se,{...m(X==="ltr",{flexDirection:Te?"row":"row-reverse"}),...m(X==="rtl",{flexDirection:Te?"row-reverse":"row"})})},onClick:re=>!De&&Ee(re),onScroll:()=>ue.updateCurrentPageOnScroll(Z,r-1,_,Qe,p),children:K.map((re,je)=>{var w,Ce,et,ft;const ne=Math.max(0,K.length-je-1),V=K[ne],Ae=(w=K[ne+1])!=null?w:H[Se+A.leading+1],nt=(Ce=K[ne-1])!=null?Ce:H[Se-A.trailing-1],ot=V.id===y.id,Re=V.id===G.id,Me=V.id===((et=K[Le+1])==null?void 0:et.id),xt=V.id===((ft=K[Le-1])==null?void 0:ft.id),at=y.sourceOrder>V.sourceOrder,it=y.sourceOrder<V.sourceOrder,ct=A.lastLeadingChapterSourceOrder===V.sourceOrder,At=A.lastTrailingChapterSourceOrder===V.sourceOrder,_t=ct&&A.isLeadingChapterPreloadMode||At&&A.isTrailingChapterPreloadMode,oe=Ls(ne,K,A),Bt=V.id===pe;return t.jsx(Ko,{chapterId:V.id,previousChapterId:Ae==null?void 0:Ae.id,nextChapterId:nt==null?void 0:nt.id,isPreviousChapterVisible:oe.previous,isNextChapterVisible:oe.next,lastPageRead:tt(V.lastPageRead,0,V.pageCount-1),currentPageIndex:_s(e,V,G,Re,he,at,it,A),isInitialChapter:ot,isCurrentChapter:Re,isPreviousChapter:Me,isNextChapter:xt,isLeadingChapter:at,isTrailingChapter:it,isPreloadMode:_t,imageRefs:Z,setPages:a,setPageLoadStates:l,setTotalPages:d,setCurrentPageIndex:c,setPageToScrollToIndex:n,transitionPageMode:x,retryFailedPagesKeyPrefix:u,readingMode:g,readerWidth:f,pageScaleMode:v,shouldOffsetDoubleSpreads:T,readingDirection:p,updateCurrentPageIndex:Re?_:_e,scrollIntoView:Re&&A.scrollIntoView,resumeMode:As(Re,ot,at,it,A.resumeMode,Y),setReaderStateChapters:q,setTransitionPageMode:h,pageGap:R,imagePreLoadAmount:b,customFilter:S,shouldStretchPage:O,scrollbarXSize:xe,scrollbarYSize:fe,readerNavBarWidth:E,onSizeChange:P,minWidth:Bt?0:ve,minHeight:Bt?0:Ie,scrollElement:k.current},V.id)})})}),Qo=F(i.memo(Jo),[Oe,D.useSettingsWithoutDefaultFlag,qe,It,()=>({updateCurrentPageIndex:ue.useUpdateCurrentPageIndex()}),Lt,ke,We],["currentPageIndex","pageToScrollToIndex","setPageToScrollToIndex","pages","totalPages","setPages","setPageLoadStates","setTotalPages","setCurrentPageIndex","retryFailedPagesKeyPrefix","setTransitionPageMode","readingMode","readingDirection","readerWidth","pageScaleMode","shouldOffsetDoubleSpreads","imagePreLoadAmount","pageGap","customFilter","shouldStretchPage","readerNavBarWidth","transitionPageMode","setScrollbarXSize","setScrollbarYSize","isVisible","setIsVisible","updateCurrentPageIndex","showPreview","setShowPreview","initialChapter","currentChapter","chapters","visibleChapters","setReaderStateChapters","isCurrentChapterReady"]),ea=Object.fromEntries(Object.values(gt).map(e=>[e,{scopes:e}])),te=(...e)=>{const[s,n,o,r]=e;return Bs(s,n,{...o,...ea.reader},r)},Mt=(e,s,n,o,r,a,l)=>{if(a){e(n,r[0]);return}const d=Ur(r.indexOf(o),r,l);if(d===void 0){s(n);return}e(n,d)},ta=({scrollElementRef:e})=>{const{direction:s}=Je(),n=D.useGetThemeDirection(),{enableScope:o,disableScope:r}=Sr(),{manga:a}=Pe(),{isVisible:l,setIsVisible:d}=It(),{hotkeys:c,pageScaleMode:x,shouldStretchPage:u,shouldOffsetDoubleSpreads:h,readingMode:g,readingDirection:p,autoScroll:f,scrollAmount:v}=D.useSettings(),T=ht(),{setShowPreview:b}=Lt(),R=D.useExit(),S=ue.useOpenChapter(),O=ue.useOpenPage(),E=D.useCreateUpdateSetting(a!=null?a:Ve),j=D.useCreateDeleteSetting(a!=null?a:Ve);return te(c[ee.PREVIOUS_PAGE],()=>O("previous"),[O]),te(c[ee.NEXT_PAGE],()=>O("next"),[O]),te(c[ee.SCROLL_BACKWARD],()=>e.current&&ue.scroll(sr.BACKWARD,nr[g.value],g.value,p.value,s,e.current,S,d,b,v),{preventDefault:!0},[g.value,p.value,s,S,v]),te(c[ee.SCROLL_FORWARD],()=>e.current&&ue.scroll(sr.FORWARD,nr[g.value],g.value,p.value,s,e.current,S,d,b,v),{preventDefault:!0},[g.value,p.value,s,S,v]),te(c[ee.PREVIOUS_CHAPTER],()=>S(de("previous","next",n)),[S,n]),te(c[ee.NEXT_CHAPTER],()=>S(de("next","previous",n)),[S,n]),te(c[ee.TOGGLE_MENU],()=>d(!l),[l]),te(c[ee.CYCLE_SCALE_TYPE],()=>{Mt(E,j,"pageScaleMode",x.value,jr,x.isDefault,!0)},[E,j,x.value,x.isDefault]),te(c[ee.STRETCH_IMAGE],()=>E("shouldStretchPage",!u.value),[E,u.value]),te(c[ee.OFFSET_SPREAD_PAGES],()=>E("shouldOffsetDoubleSpreads",!h.value),[E,h.value]),te(c[ee.CYCLE_READING_MODE],()=>{Mt(E,j,"readingMode",g.value,Cr,g.isDefault,!0)},[E,j,g.value,g.isDefault]),te(c[ee.CYCLE_READING_DIRECTION],()=>{Mt(E,j,"readingDirection",p.value,wr,p.isDefault,!0)},[E,j,p.value,p.isDefault]),te(c[ee.TOGGLE_AUTO_SCROLL],T.toggleActive,{preventDefault:!0},[T.toggleActive]),te(c[ee.AUTO_SCROLL_SPEED_DECREASE],()=>E("autoScroll",{...f,value:Math.min(Be.max,f.value+Be.step)}),[E,f.value]),te(c[ee.AUTO_SCROLL_SPEED_INCREASE],()=>E("autoScroll",{...f,value:Math.max(Be.min,f.value-Be.step)}),[E,f.value]),te(c[ee.EXIT_READER],R,[R]),i.useEffect(()=>(o(gt.READER),()=>r(gt.READER)),[]),null},ra=(e,s,n,o,r,a,l,d,c,x,u,h)=>{i.useEffect(()=>()=>{e(void 0),s(St),n(0),o(null),r(0),a([ys("",0)]),l([]),d([{url:"",loaded:!1}]),c(Fe.NONE),x(!1),u(ks),h()},[])},sa=(e,s,n,o,r,a)=>{var l;i.useEffect(()=>{var f;const d=(f=e.data)==null?void 0:f.manga;if(!d||s.loading||s.error)return;const c=or(d,n),x=Ps(d,c.shouldUseAutoWebtoonMode,c.readingMode),u={...n,readingMode:x?N.WEBTOON:n.readingMode},h=x?N.WEBTOON:c.readingMode.value,g=Ns("global",{meta:o},u,void 0,h),p=or(d,g);r(p),a(!0)},[(l=e.data)==null?void 0:l.manga,n])},vr=5e3,na=(e,s,n,o,r,a,l,d,c)=>{const{t:x}=W(),u=i.useRef(void 0),h=i.useRef(void 0),g=i.useRef(void 0),p=i.useRef(!0);i.useEffect(()=>{if(e||s||!n)return;const f=JSON.stringify(o)!==JSON.stringify(u.current);l&&f&&Dr(x(Wt[o.value].title),{autoHideDuration:vr}),u.current=o;const T=JSON.stringify(r)!==JSON.stringify(h.current)||JSON.stringify(a)!==JSON.stringify(g.current);d&&T&&(c(!0),p.current&&setTimeout(()=>c(!1),vr)),h.current=r,g.current=a,p.current=!1},[e,s,n,o.value,o.isDefault,r.value,r.isDefault,a.value,a.isDefault])},oa=(e,s,n,o,r,a)=>{var u;const l=Ms(),d=Br().state,{updateInitialChapter:c}=d!=null?d:{},x=c?void 0:n;i.useEffect(()=>{var S,O;const h=(S=e.data)==null?void 0:S.chapters.nodes,g=h?(O=h[h.length-s])!=null?O:null:void 0,p=x!=null?x:g,f=o!=null?o:g,v=h&&g&&He.getNextChapter(g,h,{offset:Tt.NEXT,skipDupe:a,skipDupeChapter:f}),T=h&&g&&He.getNextChapter(g,h,{offset:Tt.PREVIOUS,skipDupe:a,skipDupeChapter:f}),b=!h||!f?[]:a?He.removeDuplicates(f,h):h,R=p!=null&&p.id!==(x==null?void 0:x.id);R&&l("",{replace:!0,state:{...d,updateInitialChapter:void 0}}),r(E=>{var I,C,M;const j=(g==null?void 0:g.id)!==((I=E.currentChapter)==null?void 0:I.id);return{...E,mangaChapters:h!=null?h:[],chapters:b,initialChapter:p,chapterForDuplicatesHandling:f,currentChapter:g,nextChapter:v,previousChapter:T,isCurrentChapterReady:j?!1:E.isCurrentChapterReady,visibleChapters:R?{...St.visibleChapters,lastLeadingChapterSourceOrder:(C=p==null?void 0:p.sourceOrder)!=null?C:St.visibleChapters.lastLeadingChapterSourceOrder,lastTrailingChapterSourceOrder:(M=p==null?void 0:p.sourceOrder)!=null?M:St.visibleChapters.lastTrailingChapterSourceOrder,isLeadingChapterPreloadMode:!1,isTrailingChapterPreloadMode:!1}:E.visibleChapters}})},[(u=e.data)==null?void 0:u.chapters.nodes,s,a,x])},aa=({setTitle:e,setOverride:s,readerNavBarWidth:n,isVisible:o,setIsVisible:r,manga:a,setManga:l,shouldSkipDupChapters:d,backgroundColor:c,readingMode:x,tapZoneLayout:u,tapZoneInvertMode:h,shouldShowReadingModePreview:g,shouldShowTapZoneLayoutPreview:p,setSettings:f,initialChapter:v,chapterForDuplicatesHandling:T,currentChapter:b,setReaderStateChapters:R,setTotalPages:S,setCurrentPageIndex:O,setPageToScrollToIndex:E,setPages:j,setPageUrls:I,setPageLoadStates:C,setTransitionPageMode:M,cancelAutoScroll:_,setShowPreview:B})=>{var xe,fe,Ee;const{t:U}=W(),y=i.useRef(null),[G,H]=i.useState(!1),{chapterSourceOrder:A,mangaId:q}=Vs(),he=Number(A),le=Number(q),X=Gt.useGetManga(Fs,le),Y=Gt.useGetMangaChapters(Ws,le),{metadata:k,settings:se,request:J}=Us(),De=b===void 0||!G||X.loading||Y.loading||J.loading,me=(fe=(xe=X.error)!=null?xe:Y.error)!=null?fe:J.error;return i.useLayoutEffect(()=>{if(!a||!b){e(U("reader.title",{mangaId:le,chapterIndex:he}));return}e("".concat(a.title,": ").concat(b.name))},[U,le,he,a,b]),i.useEffect(()=>{var Z;l((Z=X.data)==null?void 0:Z.manga)},[(Ee=X.data)==null?void 0:Ee.manga]),ra(l,R,O,E,S,j,I,C,M,r,f,_),sa(X,J,se,k,f,H),na(De,me,G,x,u,h,g,p,B),oa(Y,he,v,T,R,d),i.useLayoutEffect(()=>(s({status:!0,value:t.jsxs(z,{sx:{position:"absolute"},children:[t.jsx(ta,{scrollElementRef:y}),t.jsx(wo,{isVisible:o}),!y.current&&t.jsx(z,{onClick:()=>r(!o),sx:{position:"fixed",top:0,left:0,width:"100vw",height:"100vh",background:"transparent"}})]})}),()=>s({status:!1,value:null})),[o,r,y.current]),me?t.jsx(jt,{message:U("global.error.label.failed_to_load_data"),messageExtra:Ar(me),retry:()=>{X.error&&X.refetch().catch(vt()),J.error&&J.refetch().catch(vt()),Y.error&&Y.refetch().catch(vt())}}):De?t.jsx(z,{sx:{height:"100vh",width:"100vw",display:"grid",placeItems:"center"},children:t.jsx(Dt,{})}):b===null?t.jsx(jt,{message:U("reader.error.label.chapter_not_found")}):!a||!b?null:t.jsxs(z,{sx:{position:"relative",display:"flex",flexDirection:"column",width:"calc(100vw - ".concat(n,"px)"),height:"100vh",marginLeft:"".concat(n,"px"),transition:Z=>"width 0.".concat(Z.transitions.duration.shortest,"s, margin-left 0.").concat(Z.transitions.duration.shortest,"s"),overflow:"auto",backgroundColor:Lr[c]},children:[t.jsx(Qo,{ref:y}),t.jsx(Do,{}),t.jsx(Lo,{})]})},Ma=F(i.memo(aa),[We,It,Pe,ke,Hs,()=>{const{shouldSkipDupChapters:e,backgroundColor:s,shouldShowReadingModePreview:n,shouldShowTapZoneLayoutPreview:o}=D.useSettingsWithoutDefaultFlag();return{shouldSkipDupChapters:e,backgroundColor:s,shouldShowReadingModePreview:n,shouldShowTapZoneLayoutPreview:o}},()=>{const{readingMode:e,tapZoneLayout:s,tapZoneInvertMode:n}=D.useSettings();return{readingMode:e,tapZoneLayout:s,tapZoneInvertMode:n}},Oe,()=>({cancelAutoScroll:ht().cancel}),Lt],["setTitle","setOverride","readerNavBarWidth","isVisible","setIsVisible","manga","setManga","shouldSkipDupChapters","backgroundColor","readingMode","tapZoneLayout","tapZoneInvertMode","shouldShowReadingModePreview","shouldShowTapZoneLayoutPreview","setSettings","initialChapter","chapterForDuplicatesHandling","currentChapter","setReaderStateChapters","setTotalPages","setCurrentPageIndex","setPageToScrollToIndex","setPages","setPageUrls","setPageLoadStates","setTransitionPageMode","cancelAutoScroll","setShowPreview"]);export{Ma as Reader};
