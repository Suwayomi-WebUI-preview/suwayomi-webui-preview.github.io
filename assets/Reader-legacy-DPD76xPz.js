!function(){function e(t){return e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e(t)}var t=["page","pagesIndex","isCurrentPage","isLeadingPage","isTrailingPage","totalPages","showDraggingStyle","primaryPageLoadState","secondaryPageLoadState","createProgressBarSlot"],r=["direction"],n=["title","type","disabled"],i=["pageScaleMode","shouldStretchPage","updateSetting"],a=["readingMode","setReadingMode"],o=["readingDirection","setReadingDirection"];function s(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=y(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,i=function(){};return{s:i,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,s=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return o=e.done,e},e:function(e){s=!0,a=e},f:function(){try{o||null==r.return||r.return()}finally{if(s)throw a}}}}function u(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(-1!==t.indexOf(n))continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],-1===t.indexOf(r)&&{}.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function l(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */var e,t,r="function"==typeof Symbol?Symbol:{},n=r.iterator||"@@iterator",i=r.toStringTag||"@@toStringTag";function a(r,n,i,a){var u=n&&n.prototype instanceof s?n:s,l=Object.create(u.prototype);return c(l,"_invoke",function(r,n,i){var a,s,u,l=0,c=i||[],d=!1,p={p:0,n:0,v:e,a:g,f:g.bind(e,4),d:function(t,r){return a=t,s=0,u=e,p.n=r,o}};function g(r,n){for(s=r,u=n,t=0;!d&&l&&!i&&t<c.length;t++){var i,a=c[t],g=p.p,f=a[2];r>3?(i=f===n)&&(u=a[(s=a[4])?5:(s=3,3)],a[4]=a[5]=e):a[0]<=g&&((i=r<2&&g<a[1])?(s=0,p.v=n,p.n=a[1]):g<f&&(i=r<3||a[0]>n||n>f)&&(a[4]=r,a[5]=n,p.n=f,s=0))}if(i||r>1)return o;throw d=!0,n}return function(i,c,f){if(l>1)throw TypeError("Generator is already running");for(d&&1===c&&g(c,f),s=c,u=f;(t=s<2?e:u)||!d;){a||(s?s<3?(s>1&&(p.n=-1),g(s,u)):p.n=u:p.v=u);try{if(l=2,a){if(s||(i="next"),t=a[i]){if(!(t=t.call(a,u)))throw TypeError("iterator result is not an object");if(!t.done)return t;u=t.value,s<2&&(s=0)}else 1===s&&(t=a.return)&&t.call(a),s<2&&(u=TypeError("The iterator does not provide a '"+i+"' method"),s=1);a=e}else if((t=(d=p.n<0)?u:r.call(n,p))!==o)break}catch(t){a=e,s=1,u=t}finally{l=1}}return{value:t,done:d}}}(r,i,a),!0),l}var o={};function s(){}function u(){}function d(){}t=Object.getPrototypeOf;var p=[][n]?t(t([][n]())):(c(t={},n,function(){return this}),t),g=d.prototype=s.prototype=Object.create(p);function f(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,d):(e.__proto__=d,c(e,i,"GeneratorFunction")),e.prototype=Object.create(g),e}return u.prototype=d,c(g,"constructor",d),c(d,"constructor",u),u.displayName="GeneratorFunction",c(d,i,"GeneratorFunction"),c(g),c(g,i,"Generator"),c(g,n,function(){return this}),c(g,"toString",function(){return"[object Generator]"}),(l=function(){return{w:a,m:f}})()}function c(e,t,r,n){var i=Object.defineProperty;try{i({},"",{})}catch(e){i=0}c=function(e,t,r,n){function a(t,r){c(e,t,function(e){return this._invoke(t,r,e)})}t?i?i(e,t,{value:r,enumerable:!n,configurable:!n,writable:!n}):e[t]=r:(a("next",0),a("throw",1),a("return",2))},c(e,t,r,n)}function d(e,t,r,n,i,a,o){try{var s=e[a](o),u=s.value}catch(e){return void r(e)}s.done?t(u):Promise.resolve(u).then(n,i)}function p(e){return function(){var t=this,r=arguments;return new Promise(function(n,i){var a=e.apply(t,r);function o(e){d(a,n,i,o,s,"next",e)}function s(e){d(a,n,i,o,s,"throw",e)}o(void 0)})}}function g(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function f(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,C(n.key),n)}}function h(e,t,r){return t&&f(e.prototype,t),r&&f(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function v(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function x(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?v(Object(r),!0).forEach(function(t){m(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):v(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function m(e,t,r){return(t=C(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function C(t){var r=function(t,r){if("object"!=e(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var i=n.call(t,r||"default");if("object"!=e(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(t)}(t,"string");return"symbol"==e(r)?r:r+""}function b(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,i,a,o,s=[],u=!0,l=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=a.call(r)).done)&&(s.push(n.value),s.length!==t);u=!0);}catch(e){l=!0,i=e}finally{try{if(!u&&null!=r.return&&(o=r.return(),Object(o)!==o))return}finally{if(l)throw i}}return s}}(e,t)||y(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function S(e){return function(e){if(Array.isArray(e))return P(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||y(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function y(e,t){if(e){if("string"==typeof e)return P(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?P(e,t):void 0}}function P(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}System.register(["./index-legacy-CUnK-uKs.js","./ReaderSettingsTabs-legacy-D9ZD242U.js","./Strings-legacy-CzJ32ydF.js","./Chapters-legacy-BMMufp5w.js","./PushPin-legacy-D7Fk3u3D.js","./PushPinOutlined-legacy-BEnmWOkq.js","./Link-legacy-8ALhrQG9.js","./Select-legacy-BmFwfe0A.js","./useManageMangaLibraryState-legacy-DYkTsb7N.js","./index-legacy-DC-r6H-w.js","./ChapterListCard-legacy-Euu332AH.js","./Download-legacy-CYffmSaG.js","./Delete-legacy-oSLvVVxb.js","./ChapterCardMetadata-legacy-BPDZzG6q.js","./IconWebView-legacy-DhY3CM7e.js","./Mangas-legacy-SeU7d9Xj.js","./CheckboxInput-legacy-jjl0YKR4.js","./EmptyViewAbsoluteCentered-legacy-C2Z9tuIi.js","./SpinnerImage-legacy-BODsrBgT.js","./use-window-event-legacy-CXyyP92h.js","./use-merged-ref-legacy-B3aIIEKQ.js","./useAppTitle-legacy-lHl282PM.js","./TabsMenu-legacy-CIkOsxDs.js","./Tabs-legacy-BUEsIiMK.js","./Slider-legacy-kxQu5pvr.js","./ListSubheader-legacy-D94bX_-T.js","./Add-legacy-D38VbSh9.js","./DateHelper-legacy-CgPuLrsb.js","./Asserts-legacy-CWE3_MKu.js","./ThreeStateCheckboxInput-legacy-BZ99zV7_.js","./Checkbox-legacy-CTXdYQjq.js","./SwitchBase-legacy-DY-n4Mme.js","./FormGroup-legacy-BY1DGxh2.js","./DoneAll-legacy-C3j2lcRZ.js","./MUI.util-legacy-D9xMlHDR.js","./ListCardContent-legacy-X3-1AFbU.js","./Card-legacy-mH9qdf4G.js","./CardActionArea-legacy-B0iMO830.js","./Refresh-legacy-DJ7_YOAt.js","./Image-legacy-BTQyWm4f.js"],function(e,c){"use strict";var d,f,v,C,y,P,j,w,T,I,E,M,D,R,O,L,k,A,N,B,_,W,H,V,z,U,F,G,X,Z,K,Y,q,J,Q,$,ee,te,re,ne,ie,ae,oe,se,ue,le,ce,de,pe,ge,fe,he,ve,xe,me,Ce,be,Se,ye,Pe,je,we,Te,Ie,Ee,Me,De,Re,Oe,Le,ke,Ae,Ne,Be,_e,We,He,Ve,ze,Ue,Fe,Ge,Xe,Ze,Ke,Ye,qe,Je,Qe,$e,et,tt,rt,nt,it,at,ot,st,ut,lt,ct,dt,pt,gt,ft,ht,vt,xt,mt,Ct,bt,St,yt,Pt,jt,wt,Tt,It,Et,Mt,Dt,Rt,Ot,Lt,kt,At,Nt,Bt,_t,Wt,Ht,Vt,zt,Ut,Ft,Gt,Xt,Zt,Kt,Yt,qt,Jt,Qt,$t,er,tr,rr,nr,ir,ar,or,sr,ur,lr,cr,dr,pr,gr,fr,hr,vr,xr,mr,Cr,br,Sr,yr,Pr,jr,wr,Tr,Ir,Er,Mr,Dr,Rr,Or,Lr,kr,Ar,Nr,Br,_r,Wr,Hr,Vr,zr,Ur,Fr,Gr,Xr,Zr,Kr,Yr,qr,Jr,Qr;return{setters:[function(e){d=e.eu,f=e.f,v=e.ev,C=e.j,y=e.o,P=e.b4,j=e.q,w=e.eq,T=e.J,I=e.dP,E=e.eb,M=e.b,D=e.H,R=e.T,O=e.b9,L=e.ew,k=e.a9,A=e.ab,N=e._,B=e.ag,_=e.C,W=e.ex,H=e.e5,V=e.ey,z=e.G,U=e.ek,F=e.ez,G=e.eA,X=e.k,Z=e.aF,K=e.dU,Y=e.by,q=e.dM,J=e.e,Q=e.c2,$=e.cF,ee=e.dR,te=e.dS,re=e.Q,ne=e.dv,ie=e.cz,ae=e.eB,oe=e.eC,se=e.dw,ue=e.a8,le=e.eD,ce=e.ba,de=e.eE,pe=e.aZ,ge=e.A,fe=e.L,he=e.c,ve=e.u,xe=e.a_,me=e.as,Ce=e.at,be=e.ar,Se=e.cs,ye=e.aC,Pe=e.b2,je=e.b3,we=e.B,Te=e.e8,Ie=e.e6,Ee=e.e7,Me=e.e1,De=e.e2,Re=e.ea,Oe=e.eF,Le=e.eG,ke=e.aE,Ae=e.ei,Ne=e.ay,Be=e.dO,_e=e.x,We=e.I,He=e.r,Ve=e.a$,ze=e.b0,Ue=e.ao,Fe=e.i,Ge=e.aA,Xe=e.eH,Ze=e.bB,Ke=e.bj,Ye=e.m,qe=e.dN,Je=e.aD,Qe=e.eI,$e=e.cR,et=e.bG,tt=e.eJ,rt=e.eK,nt=e.bQ,it=e.g,at=e.dT,ot=e.ah,st=e.c3,ut=e.U,lt=e.en,ct=e.an,dt=e.eL,pt=e.h,gt=e.aG,ft=e.eM,ht=e.eN},function(e){vt=e.b,xt=e.R,mt=e.a,Ct=e.w,bt=e.c,St=e.d,yt=e.e,Pt=e.g,jt=e.f,wt=e.i,Tt=e.h,It=e.j,Et=e.k,Mt=e.l,Dt=e.m,Rt=e.n,Ot=e.o,Lt=e.p,kt=e.q,At=e.r,Nt=e.s,Bt=e.t,_t=e.v,Wt=e.x,Ht=e.y,Vt=e.z,zt=e.S,Ut=e.A,Ft=e.B,Gt=e.C,Xt=e.D,Zt=e.E,Kt=e.F,Yt=e.G,qt=e.H,Jt=e.I,Qt=e.J,$t=e.K,er=e.L,tr=e.M,rr=e.N,nr=e.O,ir=e.P,ar=e.Q,or=e.T,sr=e.U,ur=e.V,lr=e.W,cr=e.X,dr=e.Y,pr=e.Z,gr=e._,fr=e.$,hr=e.a0,vr=e.a1,xr=e.a2,mr=e.a3,Cr=e.a4,br=e.a5,Sr=e.a6,yr=e.a7},function(e){Pr=e.r},function(e){jr=e.a,wr=e.C,Tr=e.F},function(e){Ir=e.P},function(e){Er=e.P},function(e){Mr=e.L},function(e){Dr=e.S},function(e){Rr=e.C,Or=e.u,Lr=e.F,kr=e.M,Ar=e.f,Nr=e.l},function(e){Br=e.q},function(e){_r=e.C,Wr=e.B,Hr=e.I},function(e){Vr=e.D},function(e){zr=e.D},function(e){Ur=e.D},function(e){Fr=e.F,Gr=e.I},function(e){Xr=e.F},function(e){Zr=e.C},function(e){Kr=e.E},function(e){Yr=e.u},function(e){qr=e.u},function(e){Jr=e.u},function(e){Qr=e.u},null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null],execute:function(){var c=function(e){var t,r,n,i,a,o,s=e.isOpen,u=e.close,l=vt(function(e){return e.settings});t=s,r=d(),n=r.activeScopes,i=r.enableScope,a=r.disableScope,o=f.useRef([]),f.useEffect(function(){return t?(o.current=S(n),i(v.NONE),o.current.forEach(a),function(){a(v.NONE),o.current.forEach(i)}):function(){}},[t]);var c=b(f.useState(0),2),p=c[0],g=c[1],h=b(f.useState(!1),2),m=h[0],T=h[1];return s?C.jsx(y,{open:s,maxWidth:"md",fullWidth:!0,onClose:u,hideBackdrop:p===w.FILTER,sx:x({},P(m,{opacity:.75})),children:C.jsx(j,{sx:{p:0},children:C.jsx(xt,{activeTab:p,setActiveTab:g,settings:l,updateSetting:function(){var e;return(e=mt).updateSetting.apply(e,arguments)},deleteSetting:function(){var e;return(e=mt).deleteSetting.apply(e,arguments)},setTransparent:T})})}):null},$r=Ct(function(e){var t=e.isDesktop,r=e.readerNavBarWidth,n=bt(function(e){return e.scrollbar}),i=St(function(e){return{currentPageIndex:e.pages.currentPageIndex,pages:e.pages.pages,totalPages:e.pages.totalPages}}),a=i.currentPageIndex,o=i.pages,s=i.totalPages,u=vt(function(e){return{readingDirection:e.settings.readingDirection.value,shouldShowPageNumber:e.settings.shouldShowPageNumber,progressBarType:e.settings.progressBarType}}),l=u.readingDirection,c=u.shouldShowPageNumber,d=u.progressBarType,p=yt(function(e){return e.progressBar.isMaximized}),g=f.useMemo(function(){var e=Pt(a,o).name,t="".concat(e).concat("/").concat(s);return l===I.LTR?t:Pr(t,"/")},[a,o,s,l]);return c?p||t&&d===E.STANDARD||p&&d===E.HIDDEN?null:C.jsx(M,{sx:{position:"fixed",left:r,right:0,bottom:function(e){return"max(calc(".concat(e.spacing(1)," + ").concat(n.xSize,"px), env(safe-area-inset-bottom))")},alignItems:"center",transition:function(e){return"left 0.".concat(e.transitions.duration.shortest,"s")}},children:C.jsx(D,{sx:{p:.5,borderRadius:1,backgroundColor:"rgba(0, 0, 0, 0.3)"},children:C.jsx(R,{sx:{color:"white"},children:g})})}):null},[mt.useOverlayMode,T],["isDesktop","readerNavBarWidth"]);function en(e){return e.substring(2).toLowerCase()}function tn(e){var t=e.children,r=e.disableReactTree,n=void 0!==r&&r,i=e.mouseEvent,a=void 0===i?"onClick":i,o=e.onClickAway,s=e.touchEvent,u=void 0===s?"onTouchEnd":s,l=f.useRef(!1),c=f.useRef(null),d=f.useRef(!1),p=f.useRef(!1);f.useEffect(function(){return setTimeout(function(){d.current=!0},0),function(){d.current=!1}},[]);var g=O(L(t),c),h=k(function(e){var t=p.current;p.current=!1;var r=A(c.current);!d.current||!c.current||"clientX"in e&&function(e,t){return t.documentElement.clientWidth<e.clientX||t.documentElement.clientHeight<e.clientY}(e,r)||(l.current?l.current=!1:(e.composedPath?e.composedPath().includes(c.current):!r.documentElement.contains(e.target)||c.current.contains(e.target))||!n&&t||o(e))}),v=function(e){return function(r){p.current=!0;var n=t.props[e];n&&n(r)}},x={ref:g};return!1!==u&&(x[u]=v(u)),f.useEffect(function(){if(!1!==u){var e=en(u),t=A(c.current),r=function(){l.current=!0};return t.addEventListener(e,h),t.addEventListener("touchmove",r),function(){t.removeEventListener(e,h),t.removeEventListener("touchmove",r)}}},[h,u]),!1!==a&&(x[a]=v(a)),f.useEffect(function(){if(!1!==a){var e=en(a),t=A(c.current);return t.addEventListener(e,h),function(){t.removeEventListener(e,h)}}},[h,a]),f.cloneElement(t,x)}var rn=N(R)({boxSizing:"content-box",display:"flex",justifyContent:"center",alignItems:"center",overflow:"hidden",textAlign:"center",userSelect:"none",cursor:"pointer",WebkitTapHighlightColor:"transparent"}),nn=N(M,{shouldForwardProp:B(["progressBarPosition"])})(function(e){var t=e.theme,r=e.progressBarPosition;return x(x(x(x(x({position:"fixed",pointerEvents:"all",touchAction:"none"},P(jt(r).isHorizontal,{justifyContent:"flex-end",bottom:0,right:0})),P(jt(r).isVertical,{top:0,bottom:0})),P(jt(r).isLeft,{alignItems:"ltr"===t.direction?"flex-start":"flex-end"})),P(jt(r).isRight,{alignItems:"ltr"===t.direction?"flex-end":"flex-start"})),{},{WebkitTapHighlightColor:"transparent"})}),an=N(M)(function(e){return{flexDirection:"row",justifyContent:"center",alignItems:"center",gap:e.theme.spacing(.5)}}),on=N(M)({flexDirection:"row",flexGrow:1,overflow:"hidden"}),sn=N(D,{shouldForwardProp:B(["currentPagesIndex","pagesLength","progressBarPosition"])})(function(e){var t=e.currentPagesIndex,r=e.pagesLength,n=e.progressBarPosition;return x(x({position:"absolute",pointerEvents:"none"},P(jt(n).isHorizontal,{left:0,width:"".concat((t+1)/r*100,"%"),height:"100%"})),P(jt(n).isVertical,{top:0,width:"100%",height:"".concat((t+1)/r*100,"%")}))}),un=function(e){var t=e.pageName,r=e.currentPagesIndex,n=e.pagesLength,i=e.isDragging,a=e.boxProps,o=e.children,s=e.progressBarPosition;return C.jsx(_,{title:t,slotProps:{tooltip:{sx:{backgroundColor:"primary.main",color:"primary.contrastText"}}},placement:W[s],disableTouchListener:!0,children:C.jsx(D,x(x({},a),{},{sx:x(x(x({position:"absolute",cursor:i?"grabbing":"grab"},P(jt(s).isHorizontal,{left:"".concat(Math.max(0,r-1)/(n-1)*100,"%"),width:"calc(100% / ".concat(n-1,")"),height:"100%"})),P(jt(s).isVertical,{top:"".concat(Math.max(0,r-1)/(n-1)*100,"%"),width:"100%",height:"calc(100% / ".concat(n-1,")")})),null==a?void 0:a.sx),children:o}))})},ln=N(M)({position:"relative",flexDirection:"row",flexGrow:1}),cn=m(m(m(m(m({},H.EDGE,[{rect:[0,0,100,33.33],type:V.NEXT},{rect:[0,33.33,33.33,66.66],type:V.NEXT},{rect:[66.66,33.33,33.33,66.66],type:V.NEXT},{rect:[33.33,33.33,33.33,33.33],type:V.MENU},{rect:[33.33,66.66,33.33,33.33],type:V.PREVIOUS}]),H.KINDLE,[{rect:[0,0,100,33.33],type:V.MENU},{rect:[0,33.33,33.33,66.66],type:V.PREVIOUS},{rect:[33.33,33.33,66.66,66.66],type:V.NEXT}]),H.L_SHAPE,[{rect:[0,0,100,33.33],type:V.PREVIOUS},{rect:[0,33.33,33.33,33.33],type:V.PREVIOUS},{rect:[33.33,33.33,33.33,33.33],type:V.MENU},{rect:[66.66,33.33,33.33,33.33],type:V.NEXT},{rect:[0,66.66,100,33.33],type:V.NEXT}]),H.RIGHT_LEFT,[{rect:[0,0,33.33,100],type:V.PREVIOUS},{rect:[33.33,0,33.33,100],type:V.MENU},{rect:[66.66,0,33.33,100],type:V.NEXT}]),H.DISABLED,[{rect:[0,0,100,100],type:V.MENU}]),dn=m(m(m({},V.PREVIOUS,{text:{id:"DHhJ7s"},color:"rgba(255, 114, 118, .5)"}),V.NEXT,{text:{id:"hXzOVo"},color:"rgba(144, 238, 144, .5)"}),V.MENU,{text:{id:"zucql+"},color:"rgba(0, 0, 0, .5)"}),pn=function(){return h(function e(){g(this,e)},null,[{key:"invertRect",value:function(e,t){var r=t.vertical,n=t.horizontal,i=t.isRTL,a=r?this.invertVertical(e):e,o=n?this.invertHorizontal(a):a;return i?this.invertHorizontal(o):o}},{key:"getRegions",value:function(e,t){var r=this;return cn[e].map(function(e){var n=e.type,i=e.rect;return{type:n,rect:r.invertRect(i,t)}})}},{key:"isCanvasReusable",value:function(e,t,r,n,i){var a,o=this.layout===e,s=this.width===t,u=this.height===r,l=!!this.canvas,c=this.language===z.locale,d=(null===(a=this.invertMode)||void 0===a?void 0:a.vertical)===i.vertical&&this.invertMode.horizontal===i.horizontal&&this.invertMode.isRTL===i.isRTL,p=this.fontStyle===n;return l&&s&&u&&o&&c&&d&&p}},{key:"drawCanvas",value:function(e,t,r,n,i){i.forEach(function(i){var a=i.type,o=b(i.rect,4),s=o[0],u=o[1],l=o[2],c=o[3],d=dn[a],p=d.text,g=d.color,f=z._(p),h=function(e,t){return e/100*t},v=h(s,t),x=h(u,r),m=h(l,t),C=h(c,r),S=function(e,t){return.5*(e+t)+.5*e},y=S(v,m),P=S(x,C);e.beginPath(),e.rect(v,x,m,C),e.fillStyle=g,e.strokeStyle=g,e.lineWidth=.1,e.stroke(),e.fill(),e.strokeStyle="black",e.textAlign="center",e.textBaseline="middle",e.font="".concat(n.fontSize," ").concat(n.fontFamily),e.strokeStyle="black",e.lineWidth=3,e.strokeText(f,y,P),e.lineWidth=1,e.fillStyle="white",e.fillText(f,y,P)})}},{key:"getOrCreateCanvas",value:function(e,t,r,n,i){if(this.isCanvasReusable(e,t,r,n,i))return this.canvas;var a=document.createElement("canvas"),o=a.getContext("2d");o.canvas.width=t,o.canvas.height=r;var s=this.getRegions(e,i);return this.drawCanvas(o,t,r,n,s),this.layout=e,this.canvas=a,this.width=t,this.height=r,this.language=z.locale,this.invertMode=i,this.regions=s,this.fontStyle=n,a}},{key:"doesRegionContainPos",value:function(e,t,r){var n=b(e.rect,4),i=n[0],a=n[1],o=n[2],s=n[3];return t>=i&&t<=i+o&&r>=a&&r<=a+s}},{key:"getAction",value:function(e,t){var r,n=this,i=e/this.width*100,a=t/this.height*100,o=null===(r=this.regions)||void 0===r?void 0:r.find(function(e){return n.doesRegionContainPos(e,i,a)});return o?o.type:V.MENU}}])}();m(pn,"layout",null),m(pn,"canvas",null),m(pn,"width",null),m(pn,"height",null),m(pn,"language",null),m(pn,"invertMode",null),m(pn,"regions",null),m(pn,"fontStyle",null),m(pn,"invertVertical",function(e){var t=b(e,4),r=t[0],n=t[1],i=t[2],a=t[3];return[r,100-(n+a),i,a]}),m(pn,"invertHorizontal",function(e){var t=b(e,4),r=t[0],n=t[1],i=t[2];return[100-(r+i),n,i,t[3]]});var gn=function(){function e(){g(this,e)}return h(e,null,[{key:"scroll",value:function(t,r,n,i,a,o){var s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:U.LARGE;if(a){var u=K[i],l=F().direction===u,c=wt(n),d=Math.abs(a.scrollTop)<=1,p=Math.floor(a.scrollTop)===a.scrollHeight-a.clientHeight||Math.ceil(a.scrollTop)===a.scrollHeight-a.clientHeight,g=Math.abs(a.scrollLeft)<=1,f=a.scrollWidth-a.clientWidth-Math.floor(Math.abs(a.scrollLeft))<=1||a.scrollWidth-a.clientWidth-Math.ceil(Math.abs(a.scrollLeft))<=1,h=l?g:f,v=l?f:g,m=s/100,C=function(e,t,r){if(e===G.X){if(t===te.BACKWARD)return"ltr"===r?-1:1;if(t===te.FORWARD)return"ltr"===r?1:-1}return t===te.BACKWARD?-1:1}(r,t,u),b=function(e,t){return e+t*m*C};Tt().setIsVisible(!1),o(!1);var S=function(r,n,i){r&&t===te.BACKWARD&&c?e.openChapter("previous"):n&&t===te.FORWARD&&c?e.openChapter("next"):a.scroll(x(x({},i),{},{behavior:"smooth"}))};switch(r){case G.X:S(h,v,{left:b(a.scrollLeft,a.clientWidth)});break;case G.Y:S(d,p,{top:b(a.scrollTop,a.clientHeight)});break;default:throw new Error('Unexpected "ScrollDirection" ('.concat(r,")"))}}}},{key:"openChapter",value:function(t){var r=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],i=It(),a=i.currentChapter,o=i.previousChapter,s=i.nextChapter,u=i.chapters,c=i.visibleChapters,d=c.lastLeadingChapterSourceOrder,g=c.lastTrailingChapterSourceOrder,f=i.setReaderStateChapters,h=Et(),v=h.shouldInformAboutMissingChapter,x=h.shouldInformAboutScanlatorChange,m=h.shouldUseInfiniteScroll;if(a){var C="number"==typeof t,b="previous"===t;if(C||b&&!!o||!b&&!!s){var S=function(){var i=p(l().m(function i(){var c,p,h,S,y;return l().w(function(i){for(;;)switch(i.p=i.n){case 0:if(c=function(){return C?u.find(function(e){return e.id===t}):b?o:s}()){i.n=1;break}return i.a(2);case 1:if(p=c.sourceOrder<a.sourceOrder,i.p=2,!r){i.n=3;break}return i.n=3,e.checkNextChapterConsistency(p?"previous":"next",a,c,v,x);case 3:h=d<=c.sourceOrder&&g>=c.sourceOrder,(S=m&&(!n||h))&&f(function(e){return Bt(p,e,c.sourceOrder,n,!p&&void 0,!!p&&void 0)}),mt.navigateToChapter(c,{resumeMode:_t(C||!S,p),updateInitialChapter:!S}),i.n=5;break;case 4:i.p=4,y=i.v,X("ReaderControls#useOpenChapter#doOpenChapter:")(y);case 5:return i.a(2)}},i,null,[[2,4]])}));return function(){return i.apply(this,arguments)}}();S().catch(X("ReaderControls#useOpenChapter"))}}}},{key:"checkNextChapterConsistency",value:(t=p(l().m(function e(t,r,n,i,a){var o,s,u,c,d,p,g,f;return l().w(function(e){for(;;)switch(e.n){case 0:if(r&&n){e.n=1;break}return e.a(2);case 1:if(o=jr.getGap(r,n),s=!a||r.scanlator===n.scanlator,u=!i||!o,!s||!u){e.n=2;break}return e.a(2);case 2:return c={previous:{scanlator:{id:"dDQ7od"},chapter_number:{id:"P0p2jp"}},next:{scanlator:{id:"AwNAqo"},chapter_number:{id:"jN+b67"}}},d=s?"":z.t(x(x({},c[t].scanlator),{},{values:{nextScanlator:n.scanlator,currentScanlator:r.scanlator}})),p=u?"":z.t(x(x({},c[t].chapter_number),{},{values:{count:o,nextChapter:"#".concat(n.chapterNumber," ").concat(n.name),currentChapter:"#".concat(r.chapterNumber," ").concat(r.name)}})),g=s||u?"":"\n\n",f="".concat(d).concat(g).concat(p),e.n=3,Z.show({title:z._({id:"Mx1mqC"}),message:f,actions:{confirm:{title:z._({id:"1TNIig"})}}});case 3:return e.a(2)}},e)})),function(e,r,n,i,a){return t.apply(this,arguments)})},{key:"openPage",value:function(t,r){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],i=Mt(),a=i.currentPageIndex,o=i.setPageToScrollToIndex,s=i.pages,u=i.transitionPageMode,l=i.setTransitionPageMode,c=Et(),d=c.readingDirection,p=c.readingMode,g=c.shouldShowTransitionPage,f=K[d.value],h=Y(t,"previous"===t?"next":"previous",null!=r?r:f),v=Pt(a,s),x=Dt("previous",v.pagesIndex,s),m=Dt("next",v.pagesIndex,s),C=Rt(s[0]),b=Rt(s[s.length-1]),S=0===v.primary.index,y=a===b,P=Ot(u,p.value),j=wt(p.value);n&&(Tt().setIsVisible(!1),Lt().setShowPreview(!1));var w=function(){return l(q.NONE)};if("number"==typeof t)return o(t),void w();var T=j&&P,I=!j&&u===q.PREVIOUS||T,E=!j&&u===q.NEXT||T;if(!S||g&&!I||"previous"!==h||!It().previousChapter)if(y&&(!g||E)&&"next"===h&&!!It().nextChapter)e.openChapter("next");else{var M="previous"===h,D="next"===h;if(P&&!j&&(I&&D||E&&M))return w(),void o(I?C:b);(S&&M||y&&D)&&!j?l(M?q.PREVIOUS:q.NEXT):o(M?x:m)}else e.openChapter("previous")}},{key:"useUpdateCurrentPageIndex",value:function(){var t=mt.useUpdateChapter(),r=J().settings.downloadAheadLimit;return f.useCallback(function(n){var i=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],a=arguments.length>2&&void 0!==arguments[2]&&arguments[2],o=Mt(),s=o.currentPageIndex,u=o.setCurrentPageIndex,l=It(),c=l.currentChapter,d=l.chapters,p=l.previousChapter,g=l.nextChapter,f=l.visibleChapters,h=l.setReaderStateChapters;if((n!==s||a)&&(u(n),c)){var v=jr.getNextChapters(c,d,{offset:Q.NEXT}),x=s>n?Q.PREVIOUS:Q.NEXT;mt.downloadAhead(c,g,v,n,r),mt.preloadChapter(n,c.pageCount,x===Q.NEXT?g:p,f.lastLeadingChapterSourceOrder,f.lastTrailingChapterSourceOrder,h,x);var m=function(){var e=Wt(c.id);if(e){var r=a?e.pageCount-1:n,i=r===e.pageCount-1;t({lastPageRead:r,isRead:!!i||void 0})}};clearTimeout(e.updateCurrentPageTimeout),i?e.updateCurrentPageTimeout=setTimeout(m,$(1).seconds.inWholeMilliseconds):m()}},[r])}},{key:"updateCurrentPageOnScroll",value:function(e,t,r,n,i){var a,o,s,u=K[i],l=null!==(a=null===(o=kt().autoScroll.scrollRef)||void 0===o||null===(o=o.current)||void 0===o?void 0:o.getBoundingClientRect().x)&&void 0!==a?a:0,c=Y(l+1,window.innerWidth+1,u),d=e.current.findIndex(function(e){return e&&At(e,n,{truncateValues:!0,thresholds:{bottom:1,left:Y(0,c,u),right:Y(c,0,u)}})}),p=null===(s=e.current)||void 0===s?void 0:s[e.current.length-1],g=p&&Nt(p,n,i);-1!==d&&(g?r(d,!1,!0):r(d,d!==t))}},{key:"handleClick",value:function(t,r){if(t){var n=Et(),i=n.readingMode,a=n.readingDirection,o=n.isStaticNav,s=n.scrollAmount,u=r.currentTarget.getBoundingClientRect(),l=r.clientX-u.left,c=r.clientY-u.top,d=pn.getAction(l,c);Lt().setShowPreview(!1);var p=wt(i.value),g=i.value===ee.CONTINUOUS_HORIZONTAL?G.X:G.Y;switch(d){case V.MENU:Tt().setIsVisible(o||!Tt().isVisible);break;case V.PREVIOUS:case V.NEXT:p?e.scroll(d===V.PREVIOUS?te.BACKWARD:te.FORWARD,g,i.value,a.value,t,Lt().setShowPreview,s):e.openPage(d===V.PREVIOUS?"previous":"next","ltr");break;default:throw new Error('Unexpected "TapZoneRegionType" ('.concat(d,")"))}}}},{key:"useHandleProgressDragging",value:function(t,r,n,i,a,o,s){f.useEffect(function(){if(!r)return function(){};var u=jt(a).isHorizontal,l=function(r){if(t.current){var a=Rt(Ht(r,t.current,i,u,s,o));Rt(n)!==a&&e.openPage(a,void 0,!1)}},c=function(e){l(e)},d=function(e){e.touches.length>0&&l(e.touches[0])};return document.addEventListener("mousemove",c,{passive:!0}),document.addEventListener("touchmove",d,{passive:!0}),function(){document.removeEventListener("mousemove",c),document.removeEventListener("touchmove",d)}},[r,n,i,a])}}]);var t}();m(gn,"updateCurrentPageTimeout",void 0);var fn=f.memo(N(D,{shouldForwardProp:B(["isFirstPage","isLastPage"])})(function(e){return{flexGrow:1,height:"100%",cursor:"pointer",borderLeftWidth:e.isFirstPage?0:void 0,borderRightWidth:e.isLastPage?0:void 0}})),hn=f.memo(function(e){var r=e.page,n=e.pagesIndex,i=e.isCurrentPage,a=e.isLeadingPage,o=e.isTrailingPage,s=e.totalPages,l=e.showDraggingStyle,c=e.primaryPageLoadState,d=e.secondaryPageLoadState,p=e.createProgressBarSlot,g=u(e,t),h=f.useMemo(function(){return p(r,n,c,d,i,a,o,s,l)},[p,r,n,c,d,i,a,o,s,l]);return C.jsx(fn,x(x({},g),{},{isFirstPage:0===n,isLastPage:n===s-1,children:h}))}),vn=function(e){var t,r,n,i,a,o,s,u,l,c,d,p,g,h,v,m,y,P,j,w,T=e.slotProps,I=e.slots,E=e.createProgressBarSlot,M=e.progressBarPosition,D=e.direction,R=e.fullSegmentClicks,O=St(function(e){return{pages:e.pages.pages,pageLoadStates:e.pages.pageLoadStates,totalPages:e.pages.totalPages,currentPageIndex:e.pages.currentPageIndex}}),L=O.pages,k=O.pageLoadStates,A=O.totalPages,N=O.currentPageIndex,B=vt(function(e){return e.settings.readingMode.value}),_=yt(function(e){return{isDragging:e.progressBar.isDragging,setIsDragging:e.progressBar.setIsDragging}}),W=_.isDragging,H=_.setIsDragging,V=f.useRef(null),z=f.useRef(void 0),U=b(f.useState(0),2),F=U[0],G=U[1],X=f.useRef(null);re(X,f.useCallback(function(){var e=X.current;if(e){var t=getComputedStyle(e),r=t.paddingLeft,n=t.paddingRight,i=e.clientWidth-parseFloat(r)-parseFloat(n),a=B===ee.DOUBLE_PAGE?2*i+6:i;G(a)}},[B]));var Z=f.useMemo(function(){return Pt(N,L).pagesIndex},[N,L]),K=jt(M).isHorizontal,q=f.useMemo(function(){return Pt(N,L)},[N,L]),J=f.useCallback(function(){return Y(arguments.length<=0?void 0:arguments[0],arguments.length<=1?void 0:arguments[1],D)},[D]);gn.useHandleProgressDragging(V,W,q,L,M,J,R);var Q=function(e){if(V.current){var t="touches"in e;gn.openPage(Rt(Ht(t?e.touches[0]:e,V.current,L,K,R,J)),void 0,!1),clearTimeout(z.current),z.current=setTimeout(function(){return H(!0)},250)}},$=function(){H(!1),clearTimeout(z.current)};return C.jsx(nn,x(x({},null==T?void 0:T.container),{},{progressBarPosition:M,children:C.jsxs(an,x(x({},null==T?void 0:T.progressBarRoot),{},{children:[C.jsx(rn,x(x(x({},null==T||null===(t=T.progressBarPageTexts)||void 0===t?void 0:t.base),null==T||null===(r=T.progressBarPageTexts)||void 0===r?void 0:r.current),{},{sx:[{width:"".concat(F,"px")}].concat(S(Array.isArray(null==T||null===(n=T.progressBarPageTexts)||void 0===n||null===(n=n.base)||void 0===n?void 0:n.sx)?null!==(i=null==T||null===(a=T.progressBarPageTexts)||void 0===a||null===(a=a.base)||void 0===a?void 0:a.sx)&&void 0!==i?i:[]:[null==T||null===(o=T.progressBarPageTexts)||void 0===o||null===(o=o.base)||void 0===o?void 0:o.sx]),S(Array.isArray(null==T||null===(s=T.progressBarPageTexts)||void 0===s||null===(s=s.current)||void 0===s?void 0:s.sx)?null!==(u=null==T||null===(l=T.progressBarPageTexts)||void 0===l||null===(l=l.current)||void 0===l?void 0:l.sx)&&void 0!==u?u:[]:[null==T||null===(c=T.progressBarPageTexts)||void 0===c||null===(c=c.current)||void 0===c?void 0:c.sx])),onClick:function(){return gn.openPage("previous","ltr",!1)},children:q.name})),C.jsx(tn,{onClickAway:function(){return H(!1)},children:C.jsxs(ln,x(x({},null==T?void 0:T.progressBarSlotsActionArea),{},{onMouseDown:Q,onMouseUp:$,onTouchStart:Q,onTouchEnd:$,children:[C.jsxs(on,x(x({ref:V},null==T?void 0:T.progressBarSlotsContainer),{},{children:[L.map(function(e,t){return f.createElement(hn,x(x({},null==T?void 0:T.progressBarSlot),{},{key:e.primary.index,page:e,pagesIndex:t,isCurrentPage:t===Z,isLeadingPage:t<Z,isTrailingPage:t>Z,totalPages:L.length,primaryPageLoadState:k[e.primary.index].loaded,secondaryPageLoadState:e.secondary?k[e.secondary.index].loaded:void 0,createProgressBarSlot:E,showDraggingStyle:t===Z&&W}))}),C.jsx(sn,x(x({},null==T?void 0:T.progressBarReadPages),{},{currentPagesIndex:q.pagesIndex,pagesLength:L.length,progressBarPosition:M}))]})),C.jsx(un,{boxProps:null==T?void 0:T.progressBarCurrentPageSlot,pageName:q.name,currentPagesIndex:q.pagesIndex,pagesLength:L.length,isDragging:W,progressBarPosition:M,children:null==I?void 0:I.progressBarCurrentPage})]}))}),C.jsx(rn,x(x(x({ref:X},null==T||null===(d=T.progressBarPageTexts)||void 0===d?void 0:d.base),null==T||null===(p=T.progressBarPageTexts)||void 0===p?void 0:p.total),{},{sx:[{minWidth:"unset"}].concat(S(Array.isArray(null==T||null===(g=T.progressBarPageTexts)||void 0===g||null===(g=g.base)||void 0===g?void 0:g.sx)?null!==(h=null==T||null===(v=T.progressBarPageTexts)||void 0===v||null===(v=v.base)||void 0===v?void 0:v.sx)&&void 0!==h?h:[]:[null==T||null===(m=T.progressBarPageTexts)||void 0===m||null===(m=m.base)||void 0===m?void 0:m.sx]),S(Array.isArray(null==T||null===(y=T.progressBarPageTexts)||void 0===y||null===(y=y.total)||void 0===y?void 0:y.sx)?null!==(P=null==T||null===(j=T.progressBarPageTexts)||void 0===j||null===(j=j.total)||void 0===j?void 0:j.sx)&&void 0!==P?P:[]:[null==T||null===(w=T.progressBarPageTexts)||void 0===w||null===(w=w.total)||void 0===w?void 0:w.sx])),onClick:function(){return gn.openPage("next","ltr",!1)},children:A}))]}))}))},xn=f.memo(vn),mn=Ct(function(e){var t=e.direction,n=u(e,r),i=J().settings,a=i.customThemes,o=i.appTheme,s=i.themeMode,l=i.shouldUsePureBlackMode,c=f.useMemo(function(){return ne(s,ie(o,a),l,t)},[s,o,a,l,t]);return C.jsx(ae,{value:oe[t],children:C.jsx(se,{theme:c,children:C.jsx(D,x(x({},n),{},{dir:t}))})})},[function(){return{direction:mt.useGetThemeDirection()}}],["direction"]),Cn=f.memo(function(e){var t,r=e.pageName,n=e.progressBarPosition,i=e.slotProps,a=e.children;return C.jsx(_,x(x({},null==i?void 0:i.tooltip),{},{title:r,placement:W[n],disableTouchListener:!0,children:C.jsx(D,x(x({},null==i?void 0:i.box),{},{sx:x({width:"100%",height:"100%"},null==i||null===(t=i.box)||void 0===t?void 0:t.sx),children:a}))}))}),bn=f.memo(function(e){var t=e.pageName,r=e.primaryPageLoadState,n=e.secondaryPageLoadState,i=e.progressBarPosition,a=e.isCurrentPage,o=e.isLeadingPage,s=e.showDraggingStyle,u=ue();return C.jsx(Cn,{pageName:t,progressBarPosition:i,slotProps:{box:{sx:x(x({cursor:"pointer",backgroundColor:le(u.palette.background.paper,.2)},u.applyStyles("dark",{backgroundColor:de(u.palette.background.paper,.1)})),P(r&&(null==n||n),x({backgroundColor:le(u.palette.background.paper,.35)},u.applyStyles("dark",{backgroundColor:de(u.palette.background.paper,.25)}))))},tooltip:{slotProps:a?{tooltip:{sx:{backgroundColor:"primary.main",color:"primary.contrastText"}}}:void 0}},children:C.jsx(D,{sx:x(x({width:"100%",height:"100%"},P(o,{backgroundColor:ce(u.palette.primary.main,.5)})),P(a,x({cursor:s?"grabbing":"grab",pointer:"grabbing",borderRadius:2,backgroundColor:"primary.dark"},u.applyStyles("dark",{backgroundColor:"primary.light"}))))})})}),Sn=function(e){var t=e.readerNavBarWidth,r=e.readerDirection,n=ue(),i=bt(function(e){return e.scrollbar}),a=St(function(e){return e.pages.totalPages}),o=vt(function(e){return{progressBarType:e.settings.progressBarType,progressBarSize:e.settings.progressBarSize,progressBarPosition:e.settings.progressBarPosition,progressBarPositionAutoVertical:e.settings.progressBarPositionAutoVertical}}),s=o.progressBarType,u=o.progressBarSize,l=o.progressBarPosition,c=o.progressBarPositionAutoVertical,d=yt(function(e){return{isMaximized:e.progressBar.isMaximized,setIsMaximized:e.progressBar.setIsMaximized,isDragging:e.progressBar.isDragging}}),p=d.isMaximized,g=d.setIsMaximized,h=d.isDragging,v=b(f.useState({}),2)[1];re(window.document.documentElement,f.useCallback(function(){return v({})},[]));var m=Vt(l,c,i.ySize,t+i.xSize),S=jt(m),y=S.isBottom,j=S.isLeft,w=S.isRight,T=S.isVertical,I=S.isHorizontal,M=!!a,D=s===E.HIDDEN,R=!p&&!h;return C.jsx(mn,{children:C.jsx(xn,{direction:I?r:"ltr",progressBarPosition:m,fullSegmentClicks:!0,createProgressBarSlot:f.useCallback(function(e,t,r,n,i,a,o,s,u){return C.jsx(bn,{pageName:e.name,primaryPageLoadState:r,secondaryPageLoadState:n,progressBarPosition:m,isCurrentPage:i,isLeadingPage:a,showDraggingStyle:u})},[m]),slotProps:{container:{sx:x(x(x(x(x(x(x({overflow:"hidden",transition:"all 0.".concat(n.transitions.duration.shortest,"s")},P(I,x(x({minHeight:"100px"},P("ltr"===n.direction,{left:"ltr"===r?t:i.ySize,right:"rtl"===r?t:i.ySize})),P("rtl"===n.direction,{left:"rtl"===r?t:i.ySize,right:"ltr"===r?t:i.ySize})))),P(T,{minWidth:"100px",bottom:"".concat(i.xSize,"px")})),P(y,{bottom:"".concat(i.xSize,"px")})),P(j,x(x({},P("ltr"===n.direction,{left:"ltr"===r?t:"unset",right:"rtl"===r?t:"unset"})),P("rtl"===n.direction,{right:"rtl"===r?i.ySize:"unset",left:"ltr"===r?i.ySize:"unset"})))),P(w,x(x({},P("ltr"===n.direction,{right:"ltr"===r?i.ySize:"unset",left:"rtl"===r?i.ySize:"unset"})),P("rtl"===n.direction,{left:"rtl"===r?t:"unset",right:"ltr"===r?t:"unset"})))),P(R,{opacity:D?0:.85})),P(!M,{pointerEvents:"none"})),onMouseEnter:function(){return g(!0)},onMouseLeave:function(){return g(!1)}},progressBarRoot:{sx:x(x({gap:0,transition:"all 0.1s ease-in-out",backgroundColor:"background.paper"},P(T,{flexDirection:"column",height:"100%"})),P(R,x(x(x(x(x({backgroundColor:"unset",pointerEvents:"none"},P(I,{px:2})),P(T,{py:2})),P(y,{pb:.25})),P(j,x(x({},P("ltr"===n.direction,{pl:"ltr"===r?.25:0,pr:"rtl"===r?.25:0})),P("rtl"===n.direction,{pr:"rtl"===r?.25:0,pl:"ltr"===r?.25:0})))),P(w,x(x({},P("ltr"===n.direction,{pr:"ltr"===r?.25:0,pl:"rtl"===r?.25:0})),P("rtl"===n.direction,{pl:"rtl"===r?.25:0,pr:"ltr"===r?.25:0}))))))},progressBarSlotsContainer:{sx:x(x(x({gap:.25,borderRadius:2,transition:"height 0.1s ease-in-out"},P(I,{height:"20px"})),P(T,{flexDirection:"column",width:"20px"})),P(R,x(x({},P(I,{height:"".concat(u,"px")})),P(T,{width:"".concat(u,"px")}))))},progressBarReadPages:{sx:{display:"none"}},progressBarCurrentPageSlot:{sx:{display:"none"}},progressBarPageTexts:{base:{sx:x({px:1,py:1.5,transition:"all 0.1s ease-in-out"},P(R,{transform:"scale(0)",p:0,minWidth:0,maxWidth:0,minHeight:0,maxHeight:0}))}}}})})},yn=Ct(f.memo(Sn),[T,function(){return{readerDirection:mt.useGetThemeDirection()}}],["readerNavBarWidth","readerDirection"]),Pn=N(M)({width:"400px",minWidth:"400px",maxWidth:"400px",height:"100vh",overflowY:"auto"}),jn=f.memo(function(e){var t=e.mangaId,r=e.mangaTitle,n=e.chapterTitle,i=e.scanlator;return C.jsxs(M,{children:[C.jsx(_,{title:r,placement:"right",children:C.jsx(pe,{lines:3,variant:"h6",component:"h1",sx:{textAlign:"center"},children:C.jsx(Mr,{component:fe,to:ge.manga.path(t),sx:{textDecoration:"none",color:"inherit"},children:r})})}),C.jsx(_,{title:n,placement:"right",children:C.jsx(pe,{lines:4,variant:"body1",component:"h2",sx:{textAlign:"center"},children:n})}),i&&C.jsx(_,{title:i,placement:"right",children:C.jsx(pe,{lines:4,variant:"body2",component:"h3",color:"textDisabled",sx:{textAlign:"center"},children:i})})]})}),wn=he(C.jsx("path",{d:"M15.41 16.59 10.83 12l4.58-4.59L14 6l-6 6 6 6z"})),Tn=he(C.jsx("path",{d:"M8.59 16.59 13.17 12 8.59 7.41 10 6l6 6-6 6z"})),In=function(e){var t=e.title,r=e.type,i=e.disabled,a=u(e,n);return C.jsx(_,{title:t,disabled:i,children:C.jsx(Rr,x(x({sx:{flexBasis:"15%"},variant:"contained",disabled:i},a),{},{children:"previous"===r?C.jsx(wn,{}):C.jsx(Tn,{})}))})},En=function(){var e=ve(),t=e.i18n,r=(e._,xe()),n=St(function(e){return{currentPageIndex:e.pages.currentPageIndex,pages:e.pages.pages}}),i=n.currentPageIndex,a=n.pages,o=vt(function(e){return e.settings.readingDirection.value}),s=f.useMemo(function(){return Pt(i,a)},[i,a]),u=K[o];return C.jsxs(M,{sx:{flexDirection:"row",gap:1},dir:"ltr",children:[C.jsx(In,{type:"previous",title:r(t._({id:"aHKcKc"}),t._({id:"/dqduX"}),u),disabled:r(!s.primary.index,Rt(s)===Rt(a.slice(-1)[0]),u),onClick:function(){return gn.openPage("previous",void 0,!1)}}),C.jsxs(me,{sx:{flexBasis:"70%",flexGrow:0,flexShrink:0},children:[C.jsx(Ce,{id:"reader-nav-bar-desktop-page-select",children:t._({id:"6WdDG7"})}),C.jsx(Dr,{labelId:"reader-nav-bar-desktop-page-select",label:t._({id:"6WdDG7"}),value:Rt(s),onChange:function(e){return gn.openPage(e.target.value,void 0,!1)},children:a.map(function(e){return C.jsx(be,{value:Rt(e),children:e.name},Rt(e))})})]}),C.jsx(In,{type:"next",title:r(t._({id:"/dqduX"}),t._({id:"aHKcKc"}),u),disabled:r(Rt(s)===Rt(a.slice(-1)[0]),!s.primary.index,u),onClick:function(){return gn.openPage("next",void 0,!1)}})]})},Mn=f.memo(En),Dn=function(){},Rn=function(e){var t=e.currentChapterId,r=e.chapters,n=e.style,i=f.useMemo(function(){return void 0===t?0:r.findIndex(function(e){return e.id===t})},[t,r]);return C.jsx(Br,{style:x({height:"calc(".concat(r.length," * 100px)")},n),initialTopMostItemIndex:i,totalCount:r.length,computeItemKey:function(e){return r[e].id},itemContent:function(e){return C.jsx(_r,{index:e,chapters:r,isSortDesc:!0,mode:"reader",showChapterNumber:!1,selected:null,onSelect:Dn,selectable:!1,isActiveChapter:e===i})},increaseViewportBy:400})},On=function(e){var t=e.currentChapterId,r=e.currentChapterName,n=e.currentChapterNumber,i=e.previousChapter,a=e.nextChapter,o=e.chapters,s=void 0===o?[]:o,u=e.readerThemeDirection,l=ve(),c=l.i18n,d=(l._,Se({variant:"popover",popupId:"reader-nav-bar-desktop-chapter-list"}));return f.useLayoutEffect(function(){d.close()},[t]),C.jsxs(M,{sx:{flexDirection:"row",gap:1},dir:"ltr",children:[C.jsx(In,{type:"previous",title:Y(c._({id:"S9gT2s"}),c._({id:"05zAhA"}),u),onClick:function(){gn.openChapter(Y("previous","next",u))},disabled:Y(!i,!a,u)}),C.jsxs(me,{sx:{flexBasis:"70%",flexGrow:0,flexShrink:0},children:[C.jsx(Ce,{id:"reader-nav-bar-desktop-chapter-select",children:c._({id:"QIei5D"})}),C.jsx(Dr,x(x({},ye(d)),{},{open:d.isOpen,value:null!=t?t:0,MenuProps:{sx:{visibility:"hidden"}},label:c._({id:"QIei5D"}),labelId:"reader-nav-bar-desktop-chapter-select",children:C.jsx(be,{value:null!=t?t:0,children:void 0!==n?"#".concat(n," ").concat(r):""},t)}))]}),C.jsx(In,{component:fe,type:"next",title:Y(c._({id:"05zAhA"}),c._({id:"S9gT2s"}),u),onClick:function(){gn.openChapter(Y("next","previous",u))},disabled:Y(!a,!i,u)}),C.jsx(Pe,x(x({},je(d)),{},{anchorOrigin:{vertical:"bottom",horizontal:"left"},children:C.jsx(D,{sx:{mb:1},children:C.jsx(Rn,{style:{width:"500px",maxWidth:"90vw",minHeight:"150px",maxHeight:"300px"},currentChapterId:t,chapters:s})})}))]})},Ln=Ct(f.memo(On),[function(){return{readerThemeDirection:mt.useGetThemeDirection()}}],["readerThemeDirection"]),kn=he(C.jsx("path",{d:"M17 4h3c1.1 0 2 .9 2 2v2h-2V6h-3zM4 8V6h3V4H4c-1.1 0-2 .9-2 2v2zm16 8v2h-3v2h3c1.1 0 2-.9 2-2v-2zM7 18H4v-2H2v2c0 1.1.9 2 2 2h3zM18 8H6v8h12z"})),An=function(e,t,r){var n=(e+1)%t.length;if(!(!!r&&0===n))return t[(e+1)%t.length]},Nn=function(e){var t=e.tooltip,r=e.value,n=e.defaultValue,i=e.values,a=e.setValue,o=e.valueToDisplayData,s=e.isDefaultable,u=e.onDefault,l=e.defaultIcon,c=ve(),d=c.i18n,p=(c._,void 0===r),g=f.useMemo(function(){return p?-1:i.indexOf(r)},[r,i]);return C.jsx(_,{title:t,children:p?C.jsx(we,{onClick:function(){return a(i[0])},sx:{justifyContent:"start",textTransform:"unset",flexGrow:1},variant:"contained",startIcon:l,size:"large",children:void 0===n?d._({id:"ovBPCi"}):C.jsx(zt,{superscript:"(".concat(d._({id:"ovBPCi"}),")"),text:o[n].isTitleString?o[n].title:d._(o[n].title)})}):C.jsx(we,{onClick:function(){var e=An(g,i,s);void 0!==e?a(e):null==u||u()},sx:{justifyContent:"start",textTransform:"unset",flexGrow:1},variant:"contained",startIcon:o[r].icon,size:"large",children:o[r].isTitleString?o[r].title:d._(o[r].title)})})},Bn=function(e){var t=e.pageScaleMode,r=e.shouldStretchPage,n=e.updateSetting,a=u(e,i),o=ve(),s=o.i18n;o._;return C.jsxs(M,{sx:{flexDirection:"row",gap:1},children:[C.jsx(Nn,x(x({},a),{},{tooltip:s._({id:"h1Kv7C"}),value:t.isDefault?void 0:t.value,defaultValue:t.isDefault?t.value:void 0,values:Ee,setValue:function(e){return n("pageScaleMode",e)},valueToDisplayData:Ie,defaultIcon:Ie[t.value].icon})),Te[t.value]&&C.jsx(_,{title:s._({id:"RrbZW2"}),children:C.jsx(Rr,{onClick:function(){return n("shouldStretchPage",!r.value)},sx:{px:void 0},variant:"contained",color:r.value?"secondary":"primary",children:C.jsx(kn,{})})})]})},_n=function(e){var t=e.readingMode,r=e.setReadingMode,n=u(e,a),i=ve(),o=i.i18n;i._;return C.jsx(Nn,x(x({},n),{},{tooltip:o._({id:"n1QGhW"}),value:t.isDefault?void 0:t.value,defaultValue:t.isDefault?t.value:void 0,values:De,setValue:r,valueToDisplayData:Me,defaultIcon:Me[t.value].icon}))},Wn=function(){return C.jsx(Re,{children:C.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",stroke:"currentColor",strokeWidth:"2",viewBox:"0 0 24 24",children:C.jsx("path",{d:"M2 4h6a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H2m20 0h-6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h6M2 12h20m-3-3 3 3-3 3M5 9l-3 3 3 3"})})})},Hn=function(e){var t=e.readingMode,r=e.shouldOffsetDoubleSpreads,n=e.setShouldOffsetDoubleSpreads,i=ve(),a=i.i18n;i._;return Ut(t)?C.jsx(we,{sx:{justifyContent:"start",textTransform:"unset"},size:"large",onClick:function(){return n(!r)},color:r?"secondary":"primary",variant:"contained",startIcon:C.jsx(Wn,{}),children:a._({id:"GSVtIx"})}):null},Vn=function(e){var t=e.readingDirection,r=e.setReadingDirection,n=u(e,o),i=ve(),a=i.i18n;i._;return C.jsx(Nn,x(x({},n),{},{tooltip:a._({id:"Ap8Ipr"}),value:t.isDefault?void 0:t.value,defaultValue:t.isDefault?t.value:void 0,values:Le,setValue:r,valueToDisplayData:Oe,defaultIcon:Oe[t.value].icon}))},zn=he(C.jsx("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2m-1 14H9V8h2zm4 0h-2V8h2z"})),Un=he(C.jsx("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2m-2 14.5v-9l6 4.5z"})),Fn=function(e){var t=e.autoScroll,r=e.setAutoScroll,n=ve(),i=n.i18n,a=(n._,Ft(function(e){return{isActive:e.autoScroll.isActive,toggleActive:e.autoScroll.toggleActive}})),o=a.isActive,s=a.toggleActive,u=f.useRef(void 0);return C.jsxs(M,{sx:{flexDirection:"row",gap:1},children:[C.jsx(we,{sx:{justifyContent:"start",textTransform:"unset",flexGrow:1},size:"large",onClick:s,color:o?"secondary":"primary",variant:"contained",startIcon:o?C.jsx(zn,{}):C.jsx(Un,{}),children:i._({id:"IFC5U2"})}),C.jsx(ke,{value:t.value,type:"number",size:"small",onBlur:function(e){var n=Be(+e.target.value,Ae.min,Ae.max);n!==t.value&&(clearTimeout(u.current),r(x(x({},t),{},{value:n}),!0))},onChange:function(e){var n=Be(+e.target.value,Ae.min,Ae.max);r(x(x({},t),{},{value:n}),!1),clearTimeout(u.current),u.current=setTimeout(function(){return r(x(x({},t),{},{value:n}),!0)},$(1).seconds.inWholeMilliseconds)},slotProps:{input:{inputProps:Ae,endAdornment:C.jsx(Ne,{position:"end",children:i._({id:"QyVTg4",values:{0:t.value}})})}}})]})},Gn=function(e){var t=e.openSettings,r=ve(),n=r.i18n,i=(r._,vt(function(e){return{readingMode:e.settings.readingMode,shouldOffsetDoubleSpreads:e.settings.shouldOffsetDoubleSpreads,pageScaleMode:e.settings.pageScaleMode,shouldStretchPage:e.settings.shouldStretchPage,readingDirection:e.settings.readingDirection,autoScroll:e.settings.autoScroll}})),a=i.readingMode,o=i.shouldOffsetDoubleSpreads,s=i.pageScaleMode,u=i.shouldStretchPage,l=i.readingDirection,c=i.autoScroll;return C.jsxs(M,{sx:{gap:1},children:[C.jsx(_n,{readingMode:a,setReadingMode:function(e){return mt.updateSetting("readingMode",e)},isDefaultable:!0,onDefault:function(){return mt.deleteSetting("readingMode")}}),C.jsx(Hn,{readingMode:a.value,shouldOffsetDoubleSpreads:o.value,setShouldOffsetDoubleSpreads:function(e){return mt.updateSetting("shouldOffsetDoubleSpreads",e)}}),C.jsx(Bn,{pageScaleMode:s,shouldStretchPage:u,updateSetting:mt.updateSetting,isDefaultable:!0,onDefault:function(){return mt.deleteSetting("pageScaleMode")}}),C.jsx(Vn,{readingDirection:l,setReadingDirection:function(e){return mt.updateSetting("readingDirection",e)},isDefaultable:!0,onDefault:function(){return mt.deleteSetting("readingDirection")}}),C.jsx(Fn,{autoScroll:c,setAutoScroll:function(){for(var e,t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return(e=mt).updateSetting.apply(e,["autoScroll"].concat(r))}}),C.jsx(we,{onClick:function(){return t()},size:"large",sx:{justifyContent:"start",textTransform:"none"},variant:"contained",startIcon:C.jsx(_e,{}),children:n._({id:"Tz0i8g"})})]})},Xn=f.memo(Gn),Zn=he(C.jsx("path",{d:"M12 5V1L7 6l5 5V7c3.31 0 6 2.69 6 6s-2.69 6-6 6-6-2.69-6-6H4c0 4.42 3.58 8 8 8s8-3.58 8-8-3.58-8-8-8"})),Kn=x(x({},Xr),{},{title:"Fallback",inLibrary:!1}),Yn=f.memo(function(){var e=Gt(function(e){return e.manga}),t=(null!=e?e:Kn).inLibrary,r=ve(),n=r.i18n,i=(r._,Or(null!=e?e:Kn,!0).updateLibraryState);return C.jsx(_,{title:t?n._({id:"mfwy3x"}):n._({id:"RsaYWP"}),children:C.jsx(We,{onClick:i,color:"inherit",children:t?C.jsx(Fr,{}):C.jsx(Lr,{})})})}),qn=he(C.jsx("path",{d:"M17 3H7c-1.1 0-1.99.9-1.99 2L5 21l7-3 7 3V5c0-1.1-.9-2-2-2m0 15-5-2.18L7 18V5h10z"})),Jn=function(e){var t=e.id,r=e.isBookmarked,n=ve(),i=n.i18n,a=(n._,r?"unbookmark":"bookmark");return C.jsx(_,{title:i._(wr[a].action.single),children:C.jsx(We,{onClick:function(){return jr.performAction(a,[t],{})},color:"inherit",children:r?C.jsx(Wr,{}):C.jsx(qn,{})})})},Qn=f.memo(Jn),$n=function(e){var t=e.id,r=void 0===t?-1:t,n=e.isDownloaded,i=ve(),a=i.i18n,o=(i._,jr.useDownloadStatusFromCache(r)),s=void 0===r;return void 0!==r&&n?C.jsx(_,{title:a._(wr.delete.action.single),children:C.jsx(We,{onClick:function(){return jr.performAction("delete",[r],{})},color:"inherit",children:C.jsx(zr,{})})}):o?C.jsx(Ur,{chapterId:o.chapter.id}):C.jsx(_,{title:a._(wr.download.action.single),disabled:s,children:C.jsx(We,{disabled:s,onClick:function(){return jr.performAction("download",[r],{})},color:"inherit",children:C.jsx(Vr,{})})})},ei=f.memo(function(){var e=Xt(function(e){var t,r,n,i,a,o,s,u;return{id:null!==(t=null===(r=e.chapters.currentChapter)||void 0===r?void 0:r.id)&&void 0!==t?t:Tr.id,isDownloaded:null!==(n=null===(i=e.chapters.currentChapter)||void 0===i?void 0:i.isDownloaded)&&void 0!==n?n:Tr.isDownloaded,isBookmarked:null!==(a=null===(o=e.chapters.currentChapter)||void 0===o?void 0:o.isBookmarked)&&void 0!==a?a:Tr.isBookmarked,realUrl:null!==(s=null===(u=e.chapters.currentChapter)||void 0===u?void 0:u.realUrl)&&void 0!==s?s:Tr.realUrl}}),t=e.id,r=e.isDownloaded,n=e.isBookmarked,i=e.realUrl,a=ve(),o=a.i18n,s=(a._,St(function(e){return{pageLoadStates:e.pages.pageLoadStates,setPageLoadStates:e.pages.setPageLoadStates,setRetryFailedPagesKeyPrefix:e.pages.setRetryFailedPagesKeyPrefix}})),u=s.pageLoadStates,l=s.setPageLoadStates,c=s.setRetryFailedPagesKeyPrefix,d=f.useRef(0),p=f.useMemo(function(){return u.some(function(e){return e.error})},[u]);return C.jsxs(M,{sx:{flexDirection:"row",justifyContent:"center",gap:1},children:[C.jsx(Yn,{}),C.jsx(Qn,{id:t,isBookmarked:n}),C.jsx(_,{title:o._({id:"KJJKF7"}),disabled:!p,children:C.jsx(We,{onClick:function(){l(function(e){return e.map(function(e){return{url:e.url,loaded:e.loaded}})}),c("".concat(d.current)),d.current=(d.current+1)%1e3},disabled:!p,color:"inherit",children:C.jsx(Zn,{})})}),C.jsx($n,{id:t,isDownloaded:r}),C.jsx(_,{title:o._({id:"ZdWg0V"}),disabled:!i,children:C.jsx(We,{disabled:!i,href:null!=i?i:"",rel:"noreferrer",target:"_blank",color:"inherit",children:C.jsx(Hr,{})})}),C.jsx(_,{title:o._({id:"Xrk3+q"}),disabled:!i,children:C.jsx(We,{disabled:!i,href:i?He.getWebviewUrl(i):"",rel:"noreferrer",target:"_blank",color:"inherit",children:C.jsx(Gr,{})})})]})}),ti=function(e){var t=e.exit,r=ve(),n=r.i18n,i=(r._,xe());return C.jsx(_,{title:n._({id:"2mxCGH"}),children:C.jsx(We,{sx:{marginRight:2},onClick:t,color:"inherit",children:i(C.jsx(Ve,{}),C.jsx(ze,{}))})})},ri=Ct(f.memo(ti),[function(){return{exit:mt.useExit()}}],["exit"]),ni=function(e){var t=e.isVisible,r=e.openSettings,n=e.setReaderNavBarWidth,i=ve(),a=i.i18n,o=(i._,Gt(function(e){return e.manga})),s=Xt(function(e){var t,r,n,i;return{chapters:e.chapters.chapters,currentChapterId:null===(t=e.chapters.currentChapter)||void 0===t?void 0:t.id,currentChapterName:null===(r=e.chapters.currentChapter)||void 0===r?void 0:r.name,currentChapterNumber:null===(n=e.chapters.currentChapter)||void 0===n?void 0:n.chapterNumber,currentChapterScanlator:null===(i=e.chapters.currentChapter)||void 0===i?void 0:i.scanlator,previousChapter:e.chapters.previousChapter,nextChapter:e.chapters.nextChapter}}),u=s.chapters,l=s.currentChapterId,c=s.currentChapterName,d=s.currentChapterNumber,p=s.currentChapterScanlator,g=s.previousChapter,h=s.nextChapter,v=vt(function(e){return e.settings.isStaticNav}),x=b(f.useState(),2),m=x[0],S=x[1];re(m,f.useCallback(function(){v&&n(m.offsetWidth)},[m,v])),f.useLayoutEffect(function(){return function(){return n(0)}},[]);var y=function(e,t){var r=f.useRef(t),n=f.useRef(t);return n.current!==r.current&&!e&&(r.current=!1),n.current!==t&&(r.current=n.current,n.current=t),r.current}(t,v),P=y&&t?0:void 0;return C.jsx(Ue,{variant:v?"permanent":"persistent",open:t||v,transitionDuration:P,SlideProps:{unmountOnExit:!0},PaperProps:{ref:function(e){return S(e)}},children:C.jsxs(Pn,{sx:{backgroundColor:"background.paper",pointerEvents:"all"},children:[C.jsxs(M,{sx:{p:2,gap:2,backgroundColor:"action.hover"},children:[C.jsxs(M,{sx:{flexDirection:"row",justifyContent:"space-between",alignItems:"center"},children:[C.jsx(ri,{}),C.jsx(_,{title:a._({id:"JqpUAG"}),children:C.jsx(We,{onClick:function(){n(0),mt.updateSetting("isStaticNav",!v)},color:v?"primary":"inherit",children:v?C.jsx(Ir,{}):C.jsx(Er,{})})})]}),o&&void 0!==l?C.jsxs(C.Fragment,{children:[C.jsx(jn,{mangaId:o.id,mangaTitle:o.title,chapterTitle:null!=c?c:"",scanlator:p}),C.jsx(ei,{})]}):C.jsx(Fe,{})]}),C.jsxs(M,{sx:{p:2,gap:2},children:[C.jsxs(M,{sx:{gap:1},children:[C.jsx(Mn,{}),C.jsx(Ln,{chapters:u,currentChapterId:l,currentChapterName:c,currentChapterNumber:d,nextChapter:h,previousChapter:g})]}),C.jsx(Ge,{}),C.jsx(Xn,{openSettings:r})]})]})})},ii=Ct(f.memo(ni),[T],["setReaderNavBarWidth"]),ai=x(x({},Xr),{},{title:""}),oi=function(e){var t,r=e.isVisible,n=e.ref,i=ve(),a=i.i18n,o=(i._,Se({popupId:"reader-overlay-more-menu",variant:"popover"})),s=Xt(function(e){return e.chapters.currentChapter}),u=Gt(function(e){return e.manga}),c=bt(function(e){return e.scrollbar}),d=null!=u?u:ai,g=d.id,f=d.title,h=null!=s?s:Tr,v=h.id,m=h.name,b=h.realUrl,S=h.isBookmarked;return C.jsx(Xe,{direction:"down",in:r,ref:n,children:C.jsxs(M,{sx:{flexDirection:"row",alignItems:"center",position:"fixed",top:0,left:0,right:"".concat(c.ySize,"px"),p:2,pt:function(e){return"max(env(safe-area-inset-top), ".concat(e.spacing(2),")")},backgroundColor:function(e){return ce(e.palette.background.paper,.95)},pointerEvents:"all",boxShadow:2},children:[C.jsx(ri,{}),C.jsx(M,{sx:{flexGrow:1},children:u&&s?C.jsxs(C.Fragment,{children:[C.jsx(_,{title:f,children:C.jsx(pe,{lines:1,component:"h1",variant:"h5",children:C.jsx(Mr,{component:fe,to:ge.manga.path(g),sx:{textDecoration:"none",color:"inherit"},children:f})})}),C.jsx(_,{title:m,children:C.jsx(pe,{lines:1,children:m})})]}):C.jsx(Fe,{})}),C.jsx(Yn,{}),C.jsx(Qn,{id:v,isBookmarked:S}),C.jsx(We,x(x({},ye(o)),{},{color:"inherit",children:C.jsx(kr,{})})),C.jsxs(Ze,x(x({},Ke(o)),{},{children:[C.jsx(be,{component:Mr,disabled:!b,href:null!=b?b:"",rel:"noreferrer",target:"_blank",children:a._({id:"ZdWg0V"})}),C.jsx(be,{component:Mr,disabled:!b,href:b?He.getWebviewUrl(b):"",rel:"noreferrer",target:"_blank",children:a._({id:"Xrk3+q"})}),C.jsx(be,{disabled:!b,onClick:(t=p(l().m(function e(){return l().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,navigator.clipboard.writeText(f);case 1:Ye(a._({id:"FxVG/l"}),"info");case 2:return e.a(2)}},e)})),function(){return t.apply(this,arguments)}),children:a._({id:"Z8lGw6"})})]}))]})})},si=f.memo(oi),ui=he(C.jsx("path",{d:"m21.81 12.74-.82-.63v-.22l.8-.63c.16-.12.2-.34.1-.51l-.85-1.48c-.07-.13-.21-.2-.35-.2q-.075 0-.15.03l-.95.38c-.08-.05-.11-.07-.19-.11l-.15-1.01c-.03-.21-.2-.36-.4-.36h-1.71c-.2 0-.37.15-.4.34l-.14 1.01c-.03.02-.07.03-.1.05l-.09.06-.95-.38q-.075-.03-.15-.03c-.14 0-.27.07-.35.2l-.85 1.48c-.1.17-.06.39.1.51l.8.63v.23l-.8.63c-.16.12-.2.34-.1.51l.85 1.48c.07.13.21.2.35.2q.075 0 .15-.03l.95-.37c.08.05.12.07.2.11l.15 1.01c.03.2.2.34.4.34h1.71c.2 0 .37-.15.4-.34l.15-1.01c.03-.02.07-.03.1-.05l.09-.06.95.38q.075.03.15.03c.14 0 .27-.07.35-.2l.85-1.48c.1-.17.06-.39-.1-.51M18 13.5c-.83 0-1.5-.67-1.5-1.5s.67-1.5 1.5-1.5 1.5.67 1.5 1.5-.67 1.5-1.5 1.5M17 17h2v4c0 1.1-.9 2-2 2H7c-1.1 0-2-.9-2-2V3c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2v4h-2V6H7v12h10z"})),li=he(C.jsx("path",{d:"M4 10.5c-.83 0-1.5.67-1.5 1.5s.67 1.5 1.5 1.5 1.5-.67 1.5-1.5-.67-1.5-1.5-1.5m0-6c-.83 0-1.5.67-1.5 1.5S3.17 7.5 4 7.5 5.5 6.83 5.5 6 4.83 4.5 4 4.5m0 12c-.83 0-1.5.68-1.5 1.5s.68 1.5 1.5 1.5 1.5-.68 1.5-1.5-.67-1.5-1.5-1.5M7 19h14v-2H7zm0-6h14v-2H7zm0-8v2h14V5z"})),ci=he(C.jsx("path",{d:"M6 6h2v12H6zm3.5 6 8.5 6V6z"})),di=he(C.jsx("path",{d:"m6 18 8.5-6L6 6zM16 6v12h2V6z"})),pi={display:"flex",alignItems:"center",justifyContent:"end",position:"relative",backgroundColor:"background.default"},gi=f.memo(function(e){var t=e.isTrailingPage,r=e.pagesIndex,n=e.totalPages,i=e.isVertical,a=e.isHorizontal,o="".concat(r/(n-1)*100,"%");return C.jsx(D,{sx:x(x(x(x({position:"absolute"},P(i,{top:o,left:"50%"})),P(a,{top:"50%",left:o})),{},{transform:"translate(-50%, -50%)",width:"3px",height:"3px",borderRadius:100,backgroundColor:"background.paper"},P(t,{backgroundColor:"primary.main"})),{},{zIndex:1})})}),fi=f.memo(function(e){var t=e.pageName,r=e.isTrailingPage,n=e.isCurrentPage,i=e.pagesIndex,a=e.totalPages,o=e.isVertical,s=e.isHorizontal;return C.jsx(Cn,{pageName:t,progressBarPosition:qe.BOTTOM,slotProps:{box:{sx:pi}},children:!n&&C.jsx(gi,{isTrailingPage:r,pagesIndex:i,totalPages:a,isVertical:o,isHorizontal:s})})}),hi=m(m(m(m({},qe.BOTTOM,"up"),qe.LEFT,"right"),qe.RIGHT,"left"),qe.AUTO,"left"),vi=function(e){var t=e.direction,r=e.topOffset,n=void 0===r?0:r,i=e.bottomOffset,a=void 0===i?0:i,o=bt(function(e){return e.scrollbar}),s=Zt(function(e){return e.overlay.isVisible}),u=St(function(e){return{currentPageIndex:e.pages.currentPageIndex,pages:e.pages.pages}}),l=u.currentPageIndex,c=u.pages,d=Xt(function(e){return{previousChapter:e.chapters.previousChapter,nextChapter:e.chapters.nextChapter}}),p=d.previousChapter,g=d.nextChapter,h=vt(function(e){return{progressBarPosition:e.settings.progressBarPosition,progressBarPositionAutoVertical:e.settings.progressBarPositionAutoVertical}}),v=h.progressBarPosition,m=h.progressBarPositionAutoVertical,S=yt(function(e){return{setIsMaximized:e.progressBar.setIsMaximized,isDragging:e.progressBar.isDragging}}),y=S.setIsMaximized,j=S.isDragging,w=b(f.useState({}),2)[1];re(window.document.documentElement,f.useCallback(function(){return w({})},[]));var T=Vt(v,m,n+a,o.xSize),I=jt(T),E=I.isLeft,R=I.isRight,O=I.isVertical,L=I.isHorizontal,k=L?t:"ltr",A=f.useMemo(function(){return Pt(l,c).pagesIndex},[l,c]),N=f.useMemo(function(){return{container:{sx:{flexGrow:1,position:"relative",display:"flex",justifyItems:"center",alignItems:"stretch",backgroundColor:function(e){return ce(e.palette.background.paper,.85)},borderRadius:100,boxShadow:2}},progressBarRoot:{sx:x(x({flexGrow:1,gap:0},P(O,{flexDirection:"column"})),P(L,{alignItems:"stretch"}))},progressBarSlotsActionArea:{sx:x(x({alignItems:"center",cursor:"pointer"},P(O,{width:"100%",flexDirection:"column",px:2})),P(L,{height:"100%",py:2}))},progressBarSlotsContainer:{sx:x(x({borderRadius:100,backgroundColor:"background.default"},P(O,{flexDirection:"column",py:1})),P(L,{px:1}))},progressBarSlot:{sx:x(x({},P(O,{width:"20px"})),P(L,{height:"20px"}))},progressBarCurrentPageSlot:{sx:x(x({display:"flex",zIndex:1,cursor:"inherit"},P(O,{justifyContent:"center"})),P(L,{alignItems:"center"}))},progressBarPageTexts:{base:{sx:x(x({},P(O,{py:1})),P(L,{px:1}))}}}},[O,L]),B=f.useMemo(function(){return{progressBarCurrentPage:C.jsx(D,{sx:x(x(x({position:"absolute"},P(O,x(x({top:"calc(100% - 6px)"},P(0===A,{top:"0"})),{},{width:"75%",height:"6px"}))),P(L,x(x({left:"calc(100% - 0px)"},P(0===A,{left:"0"})),{},{width:"6px",height:"75%"}))),{},{backgroundColor:"primary.main",borderRadius:100,cursor:j?"grabbing":"grab"})})}},[A,c.length,j,O,L]);return f.useLayoutEffect(function(){return y(s),function(){return y(!1)}},[s]),C.jsx(Xe,{direction:hi[T],in:s,children:C.jsx(mn,{sx:x(x({position:"relative",display:"flex",alignItems:"end",height:"100%",pointerEvents:"none"},P(E,{justifyContent:"ltr"===t?"start":"end"})),P(R,{justifyContent:"ltr"===t?"end":"start"})),children:C.jsxs(M,{sx:x(x({p:2,gap:1,pointerEvents:"all",alignItems:"center"},P(O,{height:"100%",flexDirection:"column"})),P(L,{width:"100%",flexDirection:"row"})),children:[C.jsx(We,{onClick:function(){return gn.openChapter("previous")},disabled:!p,sx:{backgroundColor:function(e){return ce(e.palette.background.paper,.85)},boxShadow:2},children:Y(C.jsx(ci,{sx:x({},P(O,{transform:"rotate(90deg)"}))}),C.jsx(di,{sx:x({},P(O,{transform:"rotate(90deg)"}))}),k)}),C.jsx(xn,{direction:k,progressBarPosition:T,fullSegmentClicks:!1,createProgressBarSlot:f.useCallback(function(e,t,r,n,i,a,o,s){return C.jsx(fi,{pageName:e.name,isTrailingPage:o,isCurrentPage:i,pagesIndex:t,totalPages:s,isVertical:O,isHorizontal:L})},[O,L]),slotProps:x(x({},N),{},{progressBarReadPages:{sx:x(x({backgroundColor:"primary.main"},P(O,{width:"20px",height:"".concat(Math.max(0,Pt(l,c).pagesIndex)/(c.length-1)*100,"%"),borderRadius:"400px 400px 0 0"})),P(L,{width:"".concat(Math.max(0,Pt(l,c).pagesIndex)/(c.length-1)*100,"%"),height:"20px",borderRadius:"400px 0 0 400px"}))}}),slots:B}),C.jsx(We,{onClick:function(){return gn.openChapter("next")},disabled:!g,sx:{backgroundColor:function(e){return ce(e.palette.background.paper,.85)},boxShadow:2},children:Y(C.jsx(di,{sx:x({},P(O,{transform:"rotate(90deg)"}))}),C.jsx(ci,{sx:x({},P(O,{transform:"rotate(90deg)"}))}),k)})]})})})},xi=Ct(f.memo(vi),[function(){return{direction:mt.useGetThemeDirection()}}],["direction"]),mi=function(){var e=ve(),t=e.i18n,r=(e._,Ft(function(e){return{isActive:e.autoScroll.isActive,toggleActive:e.autoScroll.toggleActive}})),n=r.isActive,i=r.toggleActive,a=vt(function(e){return{readingMode:e.settings.readingMode,readingDirection:e.settings.readingDirection,autoScroll:e.settings.autoScroll}}),o=a.readingMode,s=a.readingDirection,u=a.autoScroll;return C.jsxs(M,{sx:{gap:2},children:[C.jsx(Kt,{}),C.jsx(Yt,{readingMode:o,setReadingMode:function(e){return mt.updateSetting("readingMode",e)},isDefaultable:!0,onDefault:function(){return mt.deleteSetting("readingMode")}}),C.jsx(qt,{readingDirection:s,setReadingDirection:function(e){return mt.updateSetting("readingDirection",e)},isDefaultable:!0,onDefault:function(){return mt.deleteSetting("readingDirection")}}),C.jsx(Zr,{label:t._({id:"IFC5U2"}),checked:n,onChange:function(){return i()}}),C.jsx(Jt,{autoScroll:u,setAutoScroll:function(){for(var e,t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return(e=mt).updateSetting.apply(e,["autoScroll"].concat(r))}})]})},Ci=f.memo(mi),bi=function(e){var t=e.openSettings,r=e.isVisible,n=e.topOffset,i=void 0===n?0:n,a=ve(),o=a.i18n,s=(a._,Xt(function(e){var t;return{currentChapterId:null===(t=e.chapters.currentChapter)||void 0===t?void 0:t.id,chapters:e.chapters.chapters}})),u=s.currentChapterId,l=s.chapters,c=Se({variant:"dialog",popupId:"reader-chapter-list-dialog"}),d=Se({variant:"dialog",popupId:"reader-quick-settings-dialog"}),p=bt(function(e){return e.scrollbar}),g=b(f.useState(0),2),h=g[0],v=g[1],m=f.useRef(null);return re(m,f.useCallback(function(){var e,t;return v(null!==(e=null===(t=m.current)||void 0===t?void 0:t.clientHeight)&&void 0!==e?e:0)},[h])),f.useLayoutEffect(function(){c.close()},[u]),C.jsxs(C.Fragment,{children:[C.jsxs(M,{sx:{position:"fixed",right:"".concat(p.ySize,"px"),bottom:0,left:0,height:"calc(100% - ".concat(i,"px)")},children:[C.jsx(xi,{topOffset:i,bottomOffset:h}),C.jsx(Xe,{direction:"up",in:r,children:C.jsx(M,{ref:m,sx:{alignItems:"center",backgroundColor:function(e){return ce(e.palette.background.paper,.95)},pb:"max(".concat(p.xSize,"px, env(safe-area-inset-bottom))"),boxShadow:2,pointerEvents:"all"},children:C.jsxs(M,{sx:{width:"50%",flexDirection:"row",p:2,gap:1,justifyContent:"space-evenly",alignItems:"center"},children:[C.jsx(_,{title:o._({id:"S0FwRL"}),children:C.jsx(We,x(x({},ye(c)),{},{color:"inherit",children:C.jsx(li,{})}))}),C.jsx(_,{title:o._({id:"iJSg+d"}),children:C.jsx(We,x(x({},ye(d)),{},{color:"inherit",children:C.jsx(ui,{})}))}),C.jsx(_,{title:o._({id:"Tz0i8g"}),children:C.jsx(We,{onClick:t,color:"inherit",children:C.jsx(_e,{})})})]})})})]}),c.isOpen&&C.jsx(y,x(x({},Je(c)),{},{fullWidth:!0,maxWidth:"md",scroll:"paper",children:C.jsx(j,{sx:{p:0,pb:1},children:C.jsx(Rn,{style:{minHeight:"15vh",maxHeight:"75vh"},currentChapterId:u,chapters:l})})})),d.isOpen&&C.jsx(y,x(x({},Je(d)),{},{fullWidth:!0,maxWidth:"md",scroll:"paper",children:C.jsx(j,{children:C.jsx(Ci,{})})}))]})},Si=f.memo(bi),yi=function(e){var t=e.isDesktop,r=e.isMobile,n=Zt(function(e){return e.overlay.isVisible}),i=b(f.useState(!1),2),a=i[0],o=i[1],s=b(f.useState(0),2),u=s[0],l=s[1],d=f.useRef(null);return re(d,f.useCallback(function(){var e,t;return l(null!==(e=null===(t=d.current)||void 0===t?void 0:t.clientHeight)&&void 0!==e?e:0)},[r])),C.jsxs(D,{sx:{position:"absolute",width:"100%",height:"100%",pointerEvents:"none",zIndex:1},children:[t&&C.jsxs(C.Fragment,{children:[C.jsx(yn,{}),C.jsx(ii,{isVisible:n,openSettings:function(){return o(!0)}})]}),r&&C.jsxs(C.Fragment,{children:[C.jsx(si,{ref:d,isVisible:n}),C.jsx(Si,{openSettings:function(){return o(!0)},isVisible:n,topOffset:u})]}),C.jsx(c,{isOpen:a,close:function(){return o(!1)}}),C.jsx($r,{})]})},Pi=Ct(f.memo(yi),[mt.useOverlayMode],["isDesktop","isMobile"]),ji="reader-tap-zone-layout-canvas",wi=Ct(function(e){var t=e.readerNavBarWidth,r=ue(),n=vt(function(e){return{tapZoneLayout:e.settings.tapZoneLayout.value,tapZoneInvertMode:e.settings.tapZoneInvertMode.value,readingDirection:e.settings.readingDirection.value}}),i=n.tapZoneLayout,a=n.tapZoneInvertMode,o=n.readingDirection,s=Qt(function(e){return e.tapZone.showPreview}),u=b(f.useState(0),2),l=u[0],c=u[1],d=b(f.useState(0),2),p=d[0],g=d[1],h=b(f.useState(null),2),v=h[0],x=h[1];re(v,f.useCallback(function(){var e,t;c(null!==(e=null==v?void 0:v.clientWidth)&&void 0!==e?e:0),g(null!==(t=null==v?void 0:v.clientHeight)&&void 0!==t?t:0)},[v]));var m=pn.getOrCreateCanvas(i,l,p,r.typography.h3,{vertical:a.vertical,horizontal:a.horizontal,isRTL:o===I.RTL});return f.useLayoutEffect(function(){var e=document.getElementById(ji);null==e||e.replaceChildren(m)},[m,s]),C.jsx(D,{ref:x,sx:{position:"fixed",top:0,left:t,right:0,bottom:0,pointerEvents:"none"},children:s&&C.jsx("div",{id:ji})})},[T],["readerNavBarWidth"]),Ti=Ct(function(e){var t=e.readerNavBarWidth,r=vt(function(e){return e.settings.customFilter.rgba}),n=r.value,i=n.red,a=n.green,o=n.blue,s=n.alpha,u=n.blendMode;return r.enabled?C.jsx(D,{sx:{position:"fixed",top:0,left:t,right:0,bottom:0,pointerEvents:"none",background:"rgba(".concat(i," ").concat(a," ").concat(o," / ").concat(s,"%)"),mixBlendMode:"".concat(u)}}):null},[T],["readerNavBarWidth"]),Ii=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:G.XY,r=b(f.useState(!1),2),n=r[0],i=r[1],a=f.useRef(void 0),o=f.useRef([0,0,0]),s=f.useRef([0,0,0]),u=f.useRef([0,0,0]),l=f.useRef([0,0]),c=f.useRef(void 0),d=f.useRef([0,0]),p=f.useRef([0,0]);return f.useEffect(function(){var r=null==e?void 0:e.current;if(!r)return function(){};var n=function(){a.current||(a.current=getComputedStyle(r));var e="rtl"===a.current.direction,t="row-reverse"===a.current.flexDirection;return e||!e&&t},g=t!==G.Y,f=t!==G.X,h=function(){void 0!==c.current&&(cancelAnimationFrame(c.current),c.current=void 0)},v=!1,x=function(e){(function(e){if(v)return!0;var t=[r.clientHeight<r.scrollHeight,r.clientWidth<r.scrollWidth],n=[Math.abs(o.current[0]-e.pageX)>0,Math.abs(s.current[0]-e.pageY)>0];return t[0]&&n[0]||t[1]&&n[1]})(e)&&(v=!0,i(!0),o.current=[].concat(S(o.current.slice(1)),[e.pageX]),s.current=[].concat(S(s.current.slice(1)),[e.pageY]),u.current=[].concat(S(u.current.slice(1)),[Date.now()]),g&&(r.scrollLeft=p.current[0]-(e.pageX-d.current[0])),f&&(r.scrollTop=p.current[1]-(e.pageY-d.current[1])))},m=function(){r.removeEventListener("mousemove",x),r.removeEventListener("mouseup",m),setTimeout(function(){v=!1,i(!1)},0),l.current=[r.scrollLeft,r.scrollTop];var e=function(){!function(){var e=function(e,t,r){return(e[0]-e[2])/(t[0]-t[2])*1e3/r},t=[g?e(o.current,u.current,r.clientWidth):0,f?e(s.current,u.current,r.clientHeight):0],i=g&&f?Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2)):f?Math.abs(t[1]):Math.abs(t[0]),c=[t[0]/i,t[1]/i],d=Be(1.2*i,-12,12),p=(Date.now()-u.current[0])/1e3,v=d-14.278*p+75.24*Math.pow(p,2)/d-149.72*Math.pow(p,3)/d/d;if(0!==d&&v>0&&!Number.isNaN(d)){var x=function(e,t){return e*t*(d*p-7.1397*Math.pow(p,2)+25.08*Math.pow(p,3)/d-37.43*Math.pow(p,4)/d/d)},m=[x(r.clientWidth,c[0]),x(r.clientHeight,c[1])],C=[r.scrollWidth-r.clientWidth,r.scrollHeight-r.clientHeight],b=[Be(l.current[0]-m[0],n()?-C[0]:0,C[0]),Be(l.current[1]-m[1],(a.current||(a.current=getComputedStyle(r)),"column-reverse"===a.current.flexDirection?-C[1]:0),C[1])];0!==b[0]||b[0]!==C[0]||0!==b[1]||b[1]!==C[1]||h(),g&&(r.scrollLeft=b[0]),f&&(r.scrollTop=b[1])}else h()}(),c.current=requestAnimationFrame(e)};c.current=requestAnimationFrame(e)},C=function(e){0===e.button&&(e.preventDefault(),d.current=[e.pageX,e.pageY],p.current=[r.scrollLeft,r.scrollTop],o.current=[e.pageX,e.pageX,e.pageX],s.current=[e.pageY,e.pageY,e.pageY],u.current=[Date.now()-2,Date.now()-1,Date.now()],r.addEventListener("mousemove",x,{passive:!0}),r.addEventListener("mouseup",m),h())};return r.addEventListener("mousedown",C),r.addEventListener("wheel",h,{passive:!0}),function(){r.removeEventListener("mousedown",C),r.removeEventListener("wheel",h),h()}},[e,t]),n},Ei=function(e){var t=e.title,r=e.name,n=e.scanlator,i=e.backgroundColor,a=ue(),o=a.palette.getContrastText(tt(a.palette,rt[i])),s=ce(o,.5);return r?C.jsxs(M,{children:[C.jsx(R,{color:o,children:t}),C.jsx(R,{color:o,variant:"h6",component:"h1",children:r}),n&&C.jsx(R,{variant:"body2",color:s,children:n})]}):null},Mi=function(e){var t,r=e.type,n=e.currentChapterName,i=e.currentChapterScanlator,a=e.previousChapterName,o=e.previousChapterScanlator,s=e.nextChapterName,u=e.nextChapterScanlator,l=e.readerNavBarWidth,c=e.handleBack,d=ve(),p=d.i18n,g=(d._,Gt(function(e){return e.manga})),f=bt(function(e){return e.scrollbar}),h=St(function(e){return e.pages.transitionPageMode}),v=vt(function(e){return{readingMode:e.settings.readingMode.value,backgroundColor:e.settings.backgroundColor,shouldShowTransitionPage:e.settings.shouldShowTransitionPage}}),m=v.readingMode,b=v.backgroundColor,S=v.shouldShowTransitionPage,y=r===q.PREVIOUS,j=r===q.NEXT,w=!!n&&!a,T=!!n&&!s,I=w&&r===q.PREVIOUS,E=T&&r===q.NEXT;return(S||(I||E))&&rr(r,h,m)?C.jsx(M,{sx:x(x({justifyContent:"center",alignItems:"center"},P(!wt(m),{width:"100%",height:"100%"})),P(wt(m),x(x({position:"sticky"},P(nr(m),{left:0,maxWidth:"calc(100vw - ".concat(f.ySize,"px - ").concat(l,"px)"),minHeight:"calc(100vh - ".concat(f.xSize,"px)")})),P(m===ee.CONTINUOUS_HORIZONTAL,{top:0,minWidth:"calc(100vw - ".concat(f.ySize,"px - ").concat(l,"px)"),maxHeight:"calc(100vh - ".concat(f.xSize,"px)")})))),children:C.jsxs(M,{sx:{gap:2,maxWidth:function(e){return"calc(100vw - ".concat(f.ySize,"px - ").concat(l,"px - ").concat(e.spacing(2),")")},maxHeight:"calc(100vh - ".concat(f.xSize,"px)"),width:"max-content",p:1},children:[y&&w&&C.jsx(R,{variant:"h6",children:p._({id:"eijoLF"})}),C.jsxs(M,{sx:{gap:5},children:[y&&!w&&C.jsx(Ei,{title:p._({id:"VHnO5x"}),name:a,scanlator:o,backgroundColor:b}),!!n&&C.jsx(Ei,{title:y?p._({id:"q/XX3T"}):p._({id:"A9r9ns"}),name:n,scanlator:i,backgroundColor:b}),j&&!T&&C.jsx(Ei,{title:p._({id:"3J7a7o"}),name:s,scanlator:u,backgroundColor:b})]}),j&&T&&C.jsx(R,{variant:"h6",children:p._({id:"STQqww"})}),(y&&w||j&&T)&&C.jsxs(M,{sx:{flexDirection:"row",flexWrap:"wrap",gap:1},children:[C.jsx(we,{sx:{flexGrow:1},onClick:function(e){e.stopPropagation(),c()},variant:"contained",children:p._({id:"+4RFej"})}),C.jsx(we,{sx:{flexGrow:1},component:fe,onClick:function(e){e.stopPropagation()},variant:"contained",to:ge.manga.path(null!==(t=null==g?void 0:g.id)&&void 0!==t?t:-1),children:p._({id:"+YP7mg"})})]})]})}):null},Di=Ct(f.memo(Mi),[function(e){var t=e.chapterId,r=Xt(function(e){return e.chapters.chapters}),n=f.useMemo(function(){return r.findIndex(function(e){return e.id===t})},[t,r]),i=r[n],a=f.useMemo(function(){return r[n+1]},[n,r]),o=f.useMemo(function(){return r[n-1]},[n,r]);return{currentChapterName:null==i?void 0:i.name,currentChapterScanlator:null==i?void 0:i.scanlator,previousChapterName:null==a?void 0:a.name,previousChapterScanlator:null==a?void 0:a.name,nextChapterName:null==o?void 0:o.name,nextChapterScanlator:null==o?void 0:o.scanlator}},T,function(e){var t=e.chapterId,r=e.type,n=$e(),i=Xt(function(e){return e.chapters.chapters}),a=f.useMemo(function(){return i.findIndex(function(e){return e.id===t})},[t,i]),o=0===a,s=a===i.length-1,u=r===q.PREVIOUS&&s,l=r===q.NEXT&&o;return{handleBack:u||l?n:et}}],["currentChapterName","currentChapterScanlator","previousChapterName","previousChapterScanlator","nextChapterName","nextChapterScanlator","readerNavBarWidth","handleBack"]),Ri="-10px",Oi=function(e,t,r){if(wt(t)){var n=K[r],i="0px ".concat(Ri," 0px 0px"),a="0px 0px 0px ".concat(Ri);return nr(t)?"first"===e?"0px 0px ".concat(Ri," 0px"):"".concat(Ri," 0px 0px 0px"):"first"===e?Y(i,a,n):Y(a,i,n)}},Li=function(e,t,r,n){var i=t.top,a=t.right,o=t.bottom,s=t.left,u=window.innerWidth-n,l=window.innerHeight-r;return m(m({},ee.CONTINUOUS_VERTICAL,{start:o>=l,end:i<0}),ee.CONTINUOUS_HORIZONTAL,function(e,t,r,n){return e===I.LTR?{start:r>=n,end:t<0}:{start:t<0,end:r>=n}}(e,s,a,u))},ki=function(e,t,r,n,i,a,o){var s=vt(function(e){return{readingMode:e.settings.readingMode.value,readingDirection:e.settings.readingDirection.value,shouldUseInfiniteScroll:e.settings.shouldUseInfiniteScroll,shouldShowTransitionPage:e.settings.shouldShowTransitionPage}}),u=s.readingMode,l=s.readingDirection,c=s.shouldUseInfiniteScroll,d=s.shouldShowTransitionPage;f.useEffect(function(){var t=wt(u),a=nr(u);if(d||!o||!t||!c||!n||i||void 0===r)return function(){};var s=function(){var t=0===o.scrollLeft,n=o.scrollLeft===o.scrollWidth-o.clientWidth,i=0===o.scrollTop,s=o.scrollTop===o.scrollHeight-o.clientHeight;("first"===e&&(a?i:t)||"last"===e&&(a?s:n))&&gn.openChapter(r,void 0,!1)};return o.addEventListener("scroll",s,{passive:!0}),function(){return o.removeEventListener("scroll",s)}},[u,o,d,c,n,i,r]),Yr(a,f.useCallback(function(a){if(c&&wt(u)&&void 0!==r&&(d||i)){var o=a[a.length-1],s=Li(l,o.target.getBoundingClientRect(),ar().xSize,ar().ySize),p=function(e,t){var r=e[ee.CONTINUOUS_VERTICAL],n=e[ee.CONTINUOUS_HORIZONTAL];return nr(t)?r:n}(s,u),g=p.start,f=p.end,h=o.intersectionRatio<=0;if(function(e,t){var r=e[ee.CONTINUOUS_VERTICAL],n=e[ee.CONTINUOUS_HORIZONTAL];return nr(t)?r.start||r.end:n.start||n.end}(s,u)){var v="last"===e&&!n&&f;"first"===e&&g&&!i||"last"===e&&f&&h?gn.openChapter(r,!i,!1):v&&gn.openChapter(t,!1,!1)}}},[e,t,r,n,i,u,l,c,d]),f.useMemo(function(){return{root:o,threshold:[0],rootMargin:Oi(e,u,l),ignoreInitialObserve:!0}},[e,u,l]))},Ai=function(e){var t=e.chapterId,r=e.previousChapterId,n=e.nextChapterId,i=e.isPreviousChapterVisible,a=e.isCurrentChapter,o=e.isNextChapterVisible,s=e.imageWrapper,u=e.scrollElement;return ki("first",t,r,a,i,s,u),ki("last",t,n,a,o,s,u),null},Ni=f.memo(Ai),Bi=function(e){var t=e.currentPageIndex,r=e.setPages,n=e.setPageLoadStates,i=e.setTotalPages,a=e.setCurrentPageIndex,o=e.updateCurrentPageIndex,s=e.setPageToScrollToIndex,u=e.transitionPageMode,l=e.retryFailedPagesKeyPrefix,c=e.setTransitionPageMode,d=e.readingMode,p=e.readerWidth,g=e.pageScaleMode,h=e.shouldOffsetDoubleSpreads,v=e.readingDirection,m=e.imagePreLoadAmount,S=e.pageGap,y=e.chapterId,j=e.previousChapterId,w=e.nextChapterId,T=e.isPreviousChapterVisible,E=e.isNextChapterVisible,R=e.lastPageRead,O=e.isInitialChapter,L=e.isCurrentChapter,k=e.isPreviousChapter,A=e.isNextChapter,N=e.isLeadingChapter,B=e.isTrailingChapter,_=e.isPreloadMode,W=e.imageRefs,H=e.scrollIntoView,V=e.resumeMode,z=e.customFilter,U=e.shouldStretchPage,F=e.readerNavBarWidth,G=e.onSizeChange,Z=e.minWidth,K=e.minHeight,Y=e.scrollElement,J=ve(),Q=J.i18n,$=(J._,ue().direction),te=b(He.useGetChapterPagesFetch(null!=y?y:-1),2),ne=te[0],ie=te[1],ae=b(f.useState(!1),2),oe=ae[0],se=ae[1],le=b(f.useState(or.totalPages),2),ce=le[0],de=le[1],pe=b(f.useState(or.pageUrls),2),ge=pe[0],fe=pe[1],he=b(f.useState(or.pages),2),xe=he[0],me=he[1],Ce=b(f.useState(or.pageLoadStates),2),be=Ce[0],Se=Ce[1],ye=b(f.useState(be.map(function(e){return{url:e.url,isSpread:!1}})),2),Pe=ye[0],je=ye[1],we=f.useRef(null),Te=f.useRef(L),Ie=f.useRef(xe.map(function(){return null})),Ee=f.useRef(null),Me=f.useMemo(function(){return!ce?xe:ce===Pe.length&&d===ee.DOUBLE_PAGE?sr(ge,Pe,h,v):xe},[Pe,d,h,v,ce]),De=f.useMemo(function(){return ur(d)},[d]),Re=v===I.LTR,Oe=wt(d),Le=!Oe&&!L||_,ke=!Oe&&L,Ae=!Le&&(ke||Oe&&(O||N)),Ne=!Le&&(ke||Oe&&(O||B));Te.current=L,L&&(W.current=Ie.current);var Be=f.useCallback(function(){y&&(se(!1),ne({variables:{input:{chapterId:y}}}).catch(X("ReaderChapterViewer(".concat(y,")::fetchPages"))))},[ne,y]),_e=f.useMemo(function(){return lr(Me,je,function(e){Te.current&&n(e),Se(e)},d)},[Me,d]),We=f.useMemo(function(){return cr(function(e){Te.current&&n(e),Se(e)})},[]);f.useEffect(function(){Be()},[y]),re(we,f.useCallback(function(e){var t=e[0].target,r=t.clientWidth,n=t.clientHeight;G(r,n,y)},[G,we.current,y]));var Ve=function(e,t,r){!(arguments.length>3&&void 0!==arguments[3]&&arguments[3])&&oe||t(e),L&&r(e)};return function(e,t,r,n,i,a,o,s,u,l,c,d,p,g,h,v,m,C){var b,S=f.useRef(void 0);f.useLayoutEffect(function(){var e,f=null===(e=t.data)||void 0===e?void 0:e.fetchChapterPages;if(f){var b=f.pages,y=(b.length?b:[""]).map(function(e){var t;return nt.addParams(e,{sourceId:null===(t=kt().manga)||void 0===t?void 0:t.sourceId})}),P=ir(r,null!=n?n:0,y.length-1),j=S.current!==(null==f?void 0:f.pages);if(j){S.current=f.pages;var w=tr(y);u(!0),d(w),p(y),g(w.map(function(e){return{url:e.primary.url,loaded:!1}})),h(w.map(function(e){return{url:e.primary.url,isSpread:!1}}))}else d(i),g(a),h(o);c(f.pages.length),p(y),v(P),m(P),l(function(e){return x(x({},e),{},{isCurrentChapterReady:s||j})}),C(q.NONE)}},[null===(b=t.data)||void 0===b||null===(b=b.fetchChapterPages)||void 0===b?void 0:b.pages,e])}(L,ie,V,R,Me,be,Pe,oe,se,function(e){return Ve(e,et,It().setReaderStateChapters)},function(e){return Ve(e,de,i)},function(e){return Ve(e,me,r)},function(e){return Ve(e,fe,et)},function(e){return Ve(e,Se,n)},function(e){return Ve(e,je,et)},function(e){return Ve(e,et,a)},function(e){(O&&!oe||H)&&(s(e),It().setReaderStateChapters(function(e){return x(x({},e),{},{visibleChapters:x(x({},e.visibleChapters),{},{scrollIntoView:!1,resumeMode:void 0})})}))},function(e){return Ve(e,et,c)}),function(e,t,r,n,i,a,o){var s=b(f.useState(o===ee.DOUBLE_PAGE),2),u=s[0],l=s[1];f.useLayoutEffect(function(){if(u&&o!==ee.DOUBLE_PAGE){l(!1);var s=tr(r);return n(s),void i(s.map(function(e){return{url:e.primary.url,isSpread:!1}}))}o===ee.DOUBLE_PAGE&&(u||a(Rt(Pt(e,t))),n(t),l(o===ee.DOUBLE_PAGE))},[t,o])}(t,Me,ge,function(e){return Ve(e,me,r,!0)},function(e){return Ve(e,je,et,!0)},function(e){return Ve(e,et,o)},d),Oe||L||k||A?ie.error?Le?null:C.jsx(D,{sx:{minHeight:"100%",minWidth:"100%",display:"grid",placeItems:"center",position:"relative"},children:C.jsx(Kr,{message:Q._({id:"6m5aox"}),messageExtra:it(ie.error),retry:function(){Be()}})}):ie.loading||!oe?Le?null:C.jsx(D,{sx:{minHeight:"100%",minWidth:"100%",display:"grid",placeItems:"center"},children:C.jsx(Fe,{})}):null==y||ce?C.jsxs(M,{ref:we,sx:x(x(x(x(x({width:"fit-content",height:"fit-content",margin:"auto",flexWrap:"nowrap"},P(d===ee.CONTINUOUS_HORIZONTAL,{minHeight:K})),P(nr(d),{minWidth:Z})),P(Le,{maxWidth:0,maxHeight:0,minWidth:"unset",minHeight:"unset",overflow:"hidden",margin:"unset"})),P(nr(d)&&dr(p,g),{alignItems:"center"})),P(d===ee.CONTINUOUS_HORIZONTAL,x(x({},P("ltr"===$,{flexDirection:Re?"row":"row-reverse"})),P("rtl"===$,{flexDirection:Re?"row-reverse":"row"})))),children:[!_&&C.jsx(Ni,{chapterId:y,previousChapterId:j,nextChapterId:w,isCurrentChapter:L,isPreviousChapterVisible:T,isNextChapterVisible:E,imageWrapper:Ee.current,scrollElement:Y}),Ae&&C.jsx(Di,{chapterId:y,type:q.PREVIOUS}),C.jsx(De,{ref:Ee,totalPages:ce,currentPageIndex:t,pages:Me,transitionPageMode:u,pageLoadStates:be,retryFailedPagesKeyPrefix:l,imageRefs:Ie,onLoad:_e,onError:We,isCurrentChapter:L,isPreviousChapter:k,isNextChapter:A,readingMode:d,imagePreLoadAmount:m,readingDirection:v,pageScaleMode:g,pageGap:S,customFilter:z,shouldStretchPage:U,readerWidth:p,readerNavBarWidth:F,isPreloadMode:_,resumeMode:V,handleAsInitialRender:H}),Ne&&C.jsx(Di,{chapterId:y,type:q.NEXT})]}):Le?null:C.jsx(D,{sx:{minWidth:"100%",minHeight:"100%",position:"relative"},children:C.jsx(Kr,{message:Q._({id:"Oo/WWc"}),retry:Be})}):null},_i=f.memo(Bi),Wi=function(e,t,r){f.useLayoutEffect(function(){r(t)},[e])},Hi=function(e,t,r,n){var i=f.useRef({width:window.innerWidth,height:window.innerHeight}),a=f.useRef(!1),o=f.useRef(void 0),s=f.useRef(null),u=f.useCallback(function(){var u=i.current,l=u.width,c=u.height;i.current={width:window.innerWidth,height:window.innerHeight},a.current||(a.current=!0,s.current=n),function(e,t,r,n){if(!wt(e))return!1;var i=gr(t),a=fr(t),o=r!==window.innerWidth,s=n!==window.innerHeight;return i&&o||a&&s}(e,t,l,c)&&(r(s.current),clearTimeout(o.current),o.current=setTimeout(function(){a.current=!1,s.current=null},50))},[e,t,n]);qr("resize",u)},Vi=function(e){var t=f.useRef({left:0,top:0,visibleElement:void 0,visibleElementLeft:0,visibleElementTop:0});return f.useEffect(function(){var r=e.current;if(!r)return function(){};var n=function(){var e,n,i=t.current.visibleElement;t.current=x(x({},t.current),{},{left:r.scrollLeft,top:r.scrollTop,visibleElementLeft:null!==(e=null==i?void 0:i.offsetLeft)&&void 0!==e?e:0,visibleElementTop:null!==(n=null==i?void 0:i.offsetTop)&&void 0!==n?n:0})};return r.addEventListener("scroll",n,{passive:!0}),function(){return r.removeEventListener("scroll",n)}},[]),f.useEffect(function(){var r=e.current;if(!r)return function(){};var n=function(e,t){return Array.from(e).filter(function(e){return e instanceof HTMLElement}).flatMap(function(e){return e instanceof HTMLImageElement?[e]:Array.from(e.querySelectorAll("img"))}).forEach(t)},i=new IntersectionObserver(function(e){var r=e.find(function(e){return e.isIntersecting});(null==r?void 0:r.target)instanceof HTMLElement&&(t.current=x(x({},t.current),{},{visibleElement:r.target,visibleElementLeft:r.target.offsetLeft,visibleElementTop:r.target.offsetTop}))}),a=new MutationObserver(function(e){var t,r=s(e);try{for(r.s();!(t=r.n()).done;){var a=t.value;n(a.addedNodes,function(e){return i.observe(e)}),n(a.removedNodes,function(e){return i.unobserve(e)})}}catch(o){r.e(o)}finally{r.f()}});return a.observe(r,{childList:!0,subtree:!0}),function(){a.disconnect(),i.disconnect()}},[]),t},zi=function(e,t,r,n,i,a,o,u,l,c,d,p){!function(e,t,r,n,i,a,o){var u=Vi(e),l=function(){var t=e.current,s=u.current,l=s.left,c=s.top,d=s.visibleElementLeft,p=s.visibleElementTop,g=s.visibleElement;if(!t||!o||!g)return!1;var f=pr(r,i,a),h=0===n;if(f.previous||!h)return!1;var v=l-d+g.offsetLeft,x=c-p+g.offsetTop;return t.scrollTo(v,x),!0};f.useEffect(function(){var t=e.current;if(!t||!o)return function(){};var r=!1,n=function(e,t){Array.from(e).filter(function(e){return e instanceof HTMLElement}).flatMap(function(e){return e instanceof HTMLImageElement?[e]:Array.from(e.querySelectorAll("img"))}).forEach(t)},i=new ResizeObserver(function(){r||(r=l())&&i.disconnect()}),a=new MutationObserver(function(e){var t,r=s(e);try{for(r.s();!(t=r.n()).done;){var a=t.value;n(a.addedNodes,function(e){return i.observe(e)}),n(a.removedNodes,function(e){return i.unobserve(e)})}}catch(o){r.e(o)}finally{r.f()}});return a.observe(t,{childList:!0,subtree:!0}),function(){a.disconnect(),i.disconnect()}},[t]),f.useLayoutEffect(function(){l()},[t])}(e,t,r,n,i,a,wt(o)),function(e,t){var r=Vi(e),n=wt(t),i=nr(t);f.useEffect(function(){var t=e.current;if(!t||!n)return function(){};var a=function(e,t){return Array.from(e).filter(function(e){return e instanceof HTMLElement}).flatMap(function(e){return e instanceof HTMLImageElement?[e]:Array.from(e.querySelectorAll("img"))}).forEach(t)},o=new ResizeObserver(function(e){var n=r.current,a=n.left,o=n.top,s=n.visibleElement,u=n.visibleElementLeft,l=n.visibleElementTop;if(s&&e.filter(function(e){return e.target instanceof HTMLElement&&!(!e.target.clientWidth&&!e.target.clientHeight)&&(i?e.target.offsetTop<o:Math.abs(e.target.offsetLeft)<Math.abs(a))}).length){var c=a-u+s.offsetLeft,d=o-l+s.offsetTop;t.scrollTo(c,d)}}),u=new MutationObserver(function(e){var t,r=s(e);try{for(r.s();!(t=r.n()).done;){var n=t.value;a(n.addedNodes,function(e){return o.observe(e)}),a(n.removedNodes,function(e){return o.unobserve(e)})}}catch(i){r.e(i)}finally{r.f()}});return u.observe(t,{childList:!0,subtree:!0}),function(){u.disconnect(),o.disconnect()}},[n,i])}(e,o),Hi(o,c,l,n),Wi(u,n,l),Wi(o,n,l),Wi(c,n,l),Wi(d,n,l),Wi("".concat(p.value,"_").concat(p.enabled),n,l)},Ui=m(m(m(m(m({},ee.SINGLE_PAGE,at.X),ee.DOUBLE_PAGE,at.X),ee.CONTINUOUS_VERTICAL,at.Y),ee.CONTINUOUS_HORIZONTAL,at.X),ee.WEBTOON,at.Y),Fi=function(e){var t,r=e.readerNavBarWidth,n=e.updateCurrentPageIndex,i=e.ref,a=ue().direction,o=Zt(function(e){return e.overlay.isVisible}),s=St(function(e){return{currentPageIndex:e.pages.currentPageIndex,pageToScrollToIndex:e.pages.pageToScrollToIndex,setPageToScrollToIndex:e.pages.setPageToScrollToIndex,pages:e.pages.pages,totalPages:e.pages.totalPages,setPages:e.pages.setPages,setPageLoadStates:e.pages.setPageLoadStates,setTotalPages:e.pages.setTotalPages,setCurrentPageIndex:e.pages.setCurrentPageIndex,transitionPageMode:e.pages.transitionPageMode,retryFailedPagesKeyPrefix:e.pages.retryFailedPagesKeyPrefix,setTransitionPageMode:e.pages.setTransitionPageMode}}),u=s.currentPageIndex,l=s.pageToScrollToIndex,c=s.setPageToScrollToIndex,d=s.pages,p=s.totalPages,g=s.setPages,h=s.setPageLoadStates,v=s.setTotalPages,m=s.setCurrentPageIndex,S=s.transitionPageMode,y=s.retryFailedPagesKeyPrefix,j=s.setTransitionPageMode,w=Xt(function(e){return{initialChapter:e.chapters.initialChapter,currentChapter:e.chapters.currentChapter,chapters:e.chapters.chapters,visibleChapters:e.chapters.visibleChapters,setReaderStateChapters:e.chapters.setReaderStateChapters,isCurrentChapterReady:e.chapters.isCurrentChapterReady}}),T=w.initialChapter,E=w.currentChapter,D=w.chapters,R=w.visibleChapters,O=w.isCurrentChapterReady,L=vt(function(e){return{readingMode:e.settings.readingMode.value,readingDirection:e.settings.readingDirection.value,readerWidth:e.settings.readerWidth.value,pageScaleMode:e.settings.pageScaleMode.value,shouldOffsetDoubleSpreads:e.settings.shouldOffsetDoubleSpreads.value,imagePreLoadAmount:e.settings.imagePreLoadAmount,pageGap:e.settings.pageGap.value,customFilter:e.settings.customFilter,shouldStretchPage:e.settings.shouldStretchPage.value,isStaticNav:e.settings.isStaticNav}}),k=L.readingMode,A=L.readingDirection,N=L.readerWidth,B=L.pageScaleMode,_=L.shouldOffsetDoubleSpreads,W=L.imagePreLoadAmount,H=L.pageGap,V=L.customFilter,z=L.shouldStretchPage,U=L.isStaticNav,F=Qt(function(e){return{showPreview:e.tapZone.showPreview,setShowPreview:e.tapZone.setShowPreview}}),G=F.showPreview,X=F.setShowPreview,Z=(null!==(t=ot().state)&&void 0!==t?t:{resumeMode:st.START}).resumeMode,K=void 0===Z?st.START:Z,Y=f.useRef(null),q=Jr(i,Y),J=nr(k),Q=wt(k),te=Ii(Y),re=Ft(function(e){return{isPaused:e.autoScroll.isPaused,pause:e.autoScroll.pause,resume:e.autoScroll.resume,setScrollRef:e.autoScroll.setScrollRef}});f.useEffect(function(){return re.setScrollRef(Y.current)},[]);var ne=ut.useGetScrollbarSize("width",Y.current),ie=ut.useGetScrollbarSize("height",Y.current);f.useLayoutEffect(function(){var e=kt().scrollbar;e.setXSize(ne),e.setYSize(ie)},[ne,ie]);var ae=f.useRef(d.map(function(){return null})),oe=b(f.useState({minChapterViewWidth:0,minChapterViewHeight:0,minChapterSizeSourceChapterId:-1}),2),se=oe[0],le=se.minChapterViewWidth,ce=se.minChapterViewHeight,de=se.minChapterSizeSourceChapterId,pe=oe[1],ge=b(f.useState({}),2)[1],fe=Ui[k],he=A===I.LTR,ve=f.useMemo(function(){return D.findIndex(function(e){return e.id===(null==T?void 0:T.id)})},[D,null==T?void 0:T.id]),xe=f.useMemo(function(){return D.slice(Math.max(0,ve-R.trailing),Math.min(D.length,ve+R.leading+1))},[D,ve,R.trailing,R.leading]),me=f.useMemo(function(){return xe.findIndex(function(e){return e.id===(null==E?void 0:E.id)})},[E,xe]),Ce=f.useCallback(function(e,t,r){if(Q){var n=r===de;if(J){if(!n&&le>=e)return;pe({minChapterViewWidth:e,minChapterViewHeight:0,minChapterSizeSourceChapterId:r})}else(n||ce<t)&&pe({minChapterViewWidth:0,minChapterViewHeight:t,minChapterSizeSourceChapterId:r})}},[Q,J,le,ce,de]);if(function(e,t,r,n,i,a,o,s,u){f.useLayoutEffect(function(){if(null!=e){var l=Pt(e,t);if(a){var c=o.current[l.pagesIndex];null==c||c.scrollIntoView({block:"start",inline:er(s,u)})}var d=Rt(l),p=d===r-1;n(null),i(d,!p,p)}},[e])}(l,d,p,c,n,Q,ae,a,A),function(e,t,r,n,i){f.useLayoutEffect(function(){var e;t||null===(e=i.current)||void 0===e||e.scrollTo($t(i.current,r,n),0)},[e])}(u,Q,a,A,Y),function(e){var t=f.useRef(void 0);f.useEffect(function(){var r=function(t){var r=e.current;r&&(r.style.cursor=t?"default":"none")},n=function(){r(!0),clearTimeout(t.current),t.current=setTimeout(function(){r(!1)},$(5).seconds.inWholeMilliseconds)};return n(),window.addEventListener("mousemove",n,{passive:!0}),function(){r(!0),window.removeEventListener("mousemove",n),clearTimeout(t.current)}},[])}(Y),function(e,t,r){f.useEffect(function(){var n=r.current;if(e!==ee.CONTINUOUS_HORIZONTAL)return function(){};if(!n)return function(){};var i=function(e){Math.abs(e.deltaX)>Math.abs(e.deltaY)||Qe.isTrackPadLike()||(e.preventDefault(),e.shiftKey?n.scrollBy({top:e.deltaY}):n.scrollBy({left:t===I.LTR?e.deltaY:-1*e.deltaY}))};return n.addEventListener("wheel",i),function(){return n.removeEventListener("wheel",i)}},[e,t])}(k,A,Y),function(e,t,r,n){f.useEffect(function(){var i,a,o=function(){e&&Tt().setIsVisible(!1),t&&r(!1)};return null===(i=n.current)||void 0===i||i.addEventListener("wheel",o,{passive:!0}),null===(a=n.current)||void 0===a||a.addEventListener("touchmove",o,{passive:!0}),function(){var e,t;null===(e=n.current)||void 0===e||e.removeEventListener("wheel",o),null===(t=n.current)||void 0===t||t.removeEventListener("touchmove",o)}},[e,t])}(o,G,X,Y),function(e,t,r,n,i){f.useEffect(function(){!e||i?n():r()},[e,t,i])}(o,re.isPaused,re.pause,re.resume,U),zi(Y,null==E?void 0:E.id,me,u,xe,R,k,A,c,B,z,N),f.useLayoutEffect(function(){pe({minChapterViewWidth:0,minChapterViewHeight:0,minChapterSizeSourceChapterId:-1}),ge({})},[k]),!T||!E)throw new Error("ReaderViewer: illegal state - initialChapter and currentChapter should not be undefined");return C.jsx(M,{ref:q,sx:x(x({width:"100%",height:"100%",overflow:"auto",flexWrap:"nowrap"},P(J&&dr(N,B),{alignItems:"center"})),P(!J,x(x({},P("ltr"===a,{flexDirection:he?"row":"row-reverse"})),P("rtl"===a,{flexDirection:he?"row-reverse":"row"})))),onClick:function(e){return!te&&gn.handleClick(Y.current,e)},onScroll:function(){return gn.updateCurrentPageOnScroll(ae,p-1,n,fe,A)},children:xe.map(function(e,t){var i,a,o,s,l=Math.max(0,xe.length-t-1),d=xe[l],p=null!==(i=xe[l+1])&&void 0!==i?i:D[ve+R.leading+1],f=null!==(a=xe[l-1])&&void 0!==a?a:D[ve-R.trailing-1],x=d.id===T.id,b=d.id===E.id,P=d.id===(null===(o=xe[me+1])||void 0===o?void 0:o.id),w=d.id===(null===(s=xe[me-1])||void 0===s?void 0:s.id),I=T.sourceOrder>d.sourceOrder,M=T.sourceOrder<d.sourceOrder,L=R.lastLeadingChapterSourceOrder===d.sourceOrder,U=R.lastTrailingChapterSourceOrder===d.sourceOrder,F=L&&R.isLeadingChapterPreloadMode||U&&R.isTrailingChapterPreloadMode,G=pr(l,xe,R),X=d.id===de;return C.jsx(_i,{chapterId:d.id,previousChapterId:null==p?void 0:p.id,nextChapterId:null==f?void 0:f.id,isPreviousChapterVisible:G.previous,isNextChapterVisible:G.next,lastPageRead:Be(d.lastPageRead,0,d.pageCount-1),currentPageIndex:vr(u,d,E,b,O,I,M,R),isInitialChapter:x,isCurrentChapter:b,isPreviousChapter:P,isNextChapter:w,isLeadingChapter:I,isTrailingChapter:M,isPreloadMode:F,imageRefs:ae,setPages:g,setPageLoadStates:h,setTotalPages:v,setCurrentPageIndex:m,setPageToScrollToIndex:c,transitionPageMode:S,retryFailedPagesKeyPrefix:y,readingMode:k,readerWidth:N,pageScaleMode:B,shouldOffsetDoubleSpreads:_,readingDirection:A,updateCurrentPageIndex:b?n:et,scrollIntoView:b&&R.scrollIntoView,resumeMode:hr(b,x,I,M,R.resumeMode,K),setTransitionPageMode:j,pageGap:H,imagePreLoadAmount:W,customFilter:V,shouldStretchPage:z,readerNavBarWidth:r,onSizeChange:Ce,minWidth:X?0:le,minHeight:X?0:ce,scrollElement:Y.current},d.id)})})},Gi=Ct(f.memo(Fi),[function(){return{updateCurrentPageIndex:gn.useUpdateCurrentPageIndex()}},T],["readerNavBarWidth","updateCurrentPageIndex"]),Xi=Object.fromEntries(Object.values(v).map(function(e){return[e,{scopes:e}]})),Zi=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var n=t[0],i=t[1],a=t[2],o=t[3];return ct(n,i,x(x({preventDefault:!0},a),Xi.reader),o)},Ki=function(e,t,r,n,i){if(n)mt.updateSetting(e,r[0]);else{var a=An(r.indexOf(t),r,i);void 0===a?mt.deleteSetting(e):mt.updateSetting(e,a)}},Yi=function(e){var t=e.scrollElementRef,r=mt.useGetThemeDirection(),n=d(),i=n.enableScope,a=n.disableScope,o=vt(function(e){return{hotkeys:e.settings.hotkeys}}).hotkeys,s=mt.useExit();return Zi(o[lt.PREVIOUS_PAGE],function(){return gn.openPage("previous")}),Zi(o[lt.NEXT_PAGE],function(){return gn.openPage("next")}),Zi(o[lt.SCROLL_BACKWARD],function(){var e=xr(),r=Et(),n=r.readingMode,i=r.readingDirection,a=r.scrollAmount;e.isActive?e.setDirection(te.BACKWARD):t.current&&gn.scroll(te.BACKWARD,dt[n.value],n.value,i.value,t.current,Lt().setShowPreview,a)}),Zi(o[lt.SCROLL_FORWARD],function(){var e=xr(),r=Et(),n=r.readingMode,i=r.readingDirection,a=r.scrollAmount;e.isActive?e.setDirection(te.FORWARD):t.current&&gn.scroll(te.FORWARD,dt[n.value],n.value,i.value,t.current,Lt().setShowPreview,a)}),Zi(o[lt.PREVIOUS_CHAPTER],function(){return gn.openChapter(Y("previous","next",r))},[r]),Zi(o[lt.NEXT_CHAPTER],function(){return gn.openChapter(Y("next","previous",r))},[r]),Zi(o[lt.TOGGLE_MENU],function(){return Tt().setIsVisible(!Tt().isVisible)}),Zi(o[lt.CYCLE_SCALE_TYPE],function(){Ki("pageScaleMode",Et().pageScaleMode.value,Ee,Et().pageScaleMode.isDefault,!0)},[]),Zi(o[lt.STRETCH_IMAGE],function(){return mt.updateSetting("shouldStretchPage",!Et().shouldStretchPage.value)}),Zi(o[lt.OFFSET_SPREAD_PAGES],function(){return mt.updateSetting("shouldOffsetDoubleSpreads",!Et().shouldOffsetDoubleSpreads.value)}),Zi(o[lt.CYCLE_READING_MODE],function(){Ki("readingMode",Et().readingMode.value,De,Et().readingMode.isDefault,!0)}),Zi(o[lt.CYCLE_READING_DIRECTION],function(){Ki("readingDirection",Et().readingDirection.value,Le,Et().readingDirection.isDefault,!0)}),Zi(o[lt.TOGGLE_AUTO_SCROLL],function(){return xr().toggleActive()},{}),Zi(o[lt.AUTO_SCROLL_SPEED_DECREASE],function(){return mt.updateSetting("autoScroll",x(x({},Et().autoScroll),{},{value:Math.min(Ae.max,Et().autoScroll.value+Ae.step)}))}),Zi(o[lt.AUTO_SCROLL_SPEED_INCREASE],function(){return mt.updateSetting("autoScroll",x(x({},Et().autoScroll),{},{value:Math.max(Ae.min,Et().autoScroll.value-Ae.step)}))}),Zi(o[lt.EXIT_READER],s,[s]),f.useEffect(function(){return i(v.READER),function(){return a(v.READER)}},[]),null},qi=$(5).seconds.inWholeMilliseconds,Ji=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=Math.max(e*t,1),a=r?-i:i;return n?-1*a:a},Qi=function(e,t,r){return e*(t/100)/r};function $i(e,t,r,n,i){if(i(),e){var a,o=function(e){var t=e-(null!=a?a:e);a=e,n(t),r(requestAnimationFrame(o),"animationFrame")};r(requestAnimationFrame(o),"animationFrame")}else r(setInterval(function(){n(t)},t),"interval")}var ea=function(e){var t=e.themeDirection,r=e.combinedDirection,n=Ft(function(e){return{scrollRef:e.autoScroll.scrollRef,direction:e.autoScroll.direction}}),i=n.scrollRef,a=n.direction,o=vt(function(e){return{readingMode:e.settings.readingMode.value,autoScroll:e.settings.autoScroll}}),s=o.readingMode,u=o.autoScroll,l=s===ee.CONTINUOUS_HORIZONTAL&&t!==r?Y(a===te.BACKWARD,a===te.FORWARD,r):a===te.BACKWARD,c=wt(s),d=f.useCallback(function(){gn.openPage("next","ltr")},[]),p=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:G.Y,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:100,i=arguments.length>4&&void 0!==arguments[4]&&arguments[4],a=arguments.length>5&&void 0!==arguments[5]&&arguments[5],o="function"==typeof e,s=f.useRef(void 0),u=f.useRef(void 0),l=f.useRef(-1),c=b(f.useState(!1),2),d=c[0],p=c[1],g=b(f.useState(!1),2),h=g[0],v=g[1],x=b(f.useState({width:window.innerWidth,height:window.innerHeight}),2),m=x[0],C=x[1];re(document.documentElement,f.useCallback(function(){var e=window.innerWidth,t=window.innerHeight;m.width===e&&m.height===t||C({width:e,height:t})},[]));var S=f.useCallback(function(){clearTimeout(u.current),cancelAnimationFrame(l.current)},[]),y=f.useCallback(function(){p(!0)},[]),P=f.useCallback(function(){p(!1),v(!1),S()},[]),j=f.useCallback(function(){d?P():y()},[d]),w=f.useCallback(function(){v(!0)},[]),T=f.useCallback(function(){v(!1)},[]);return f.useEffect(function(){if(!e||!d)return function(){};if(h)return S(),function(){};var c=1e3*t;if(o)return $i(!1,c,function(e){u.current=e},e,S),function(){return S()};var p=e.current;if(!p)return function(){};s.current||(s.current=getComputedStyle(p));var g="rtl"===s.current.direction,f=r!==G.Y,v=r!==G.X,x=Qi(window.innerWidth,n,c),m=Qi(window.innerHeight,n,c);return $i(a,c,function(e,t){switch(t){case"interval":u.current=e;break;case"animationFrame":l.current=e;break;default:throw new Error('Unexpected "type" ('.concat(t,")"))}},function(e){p.scrollBy({top:Number(v)*Ji(m,e,!1,i),left:Number(f)*Ji(x,e,g,i),behavior:a?void 0:"smooth"})},S),function(){return S()}},[e,t,n,m,d,h,i,a]),f.useMemo(function(){return{isActive:d,isPaused:h,start:y,cancel:P,toggleActive:j,pause:w,resume:T}},[d,h,y,P,j,w,T])}(c?i:d,u.value,dt[s],U.MEDIUM,l,u.smooth);return f.useEffect(function(){var e=xr();e.setIsActive(p.isActive),e.setIsPaused(p.isPaused),e.setStart(p.start),e.setCancel(p.cancel),e.setToggleActive(p.toggleActive),e.setPause(p.pause),e.setResume(p.resume)},[p]),null},ta=Ct(f.memo(ea),[function(){return{themeDirection:ue().direction}},function(){return{combinedDirection:mt.useGetThemeDirection()}}],["themeDirection","combinedDirection"]),ra=function(e){var t,r,n,i=e.setOverride,a=e.readerNavBarWidth,o=ve(),s=o.i18n,u=(o._,Gt(function(e){return e.manga})),l=Xt(function(e){return{mangaChapters:e.chapters.mangaChapters,initialChapter:e.chapters.initialChapter,chapterForDuplicatesHandling:e.chapters.chapterForDuplicatesHandling,currentChapter:e.chapters.currentChapter}}),c=l.mangaChapters,d=l.initialChapter,p=l.chapterForDuplicatesHandling,g=l.currentChapter,h=vt(function(e){return{shouldSkipDupChapters:e.settings.shouldSkipDupChapters,shouldSkipFilteredChapters:e.settings.shouldSkipFilteredChapters,backgroundColor:e.settings.backgroundColor,readingMode:e.settings.readingMode,tapZoneLayout:e.settings.tapZoneLayout,tapZoneInvertMode:e.settings.tapZoneInvertMode,shouldShowReadingModePreview:e.settings.shouldShowReadingModePreview,shouldShowTapZoneLayoutPreview:e.settings.shouldShowTapZoneLayoutPreview,setSettings:e.settings.setSettings}}),v=h.shouldSkipDupChapters,m=h.shouldSkipFilteredChapters,S=h.backgroundColor,y=h.readingMode,P=h.tapZoneLayout,j=h.tapZoneInvertMode,w=h.shouldShowReadingModePreview,T=h.shouldShowTapZoneLayoutPreview,I=h.setSettings,E=Qt(function(e){return e.tapZone.setShowPreview}),M=f.useRef(null),R=b(f.useState(!1),2),O=R[0],L=R[1],k=gt(),A=k.chapterSourceOrder,N=k.mangaId,B=Number(A),_=Number(N),W=He.useGetManga(ft,_),H=He.useGetMangaChapters(ht,_);Qr(u&&g?"".concat(u.title,": ").concat(g.name):s._({id:"H7O2dc",values:{mangaId:_,chapterSourceOrder:B}}));var V=yr(),z=V.metadata,U=V.settings,F=V.request,G=Nr(null!=u?u:Xr),Z=void 0===g||!O||W.loading||H.loading||F.loading,K=null!==(t=null!==(r=W.error)&&void 0!==r?r:H.error)&&void 0!==t?t:F.error;return f.useEffect(function(){var e;kt().setManga(null===(e=W.data)||void 0===e?void 0:e.manga)},[null===(n=W.data)||void 0===n?void 0:n.manga]),f.useEffect(function(){return function(){kt().reset()}},[]),function(e,t,r,n,i,a){var o;f.useEffect(function(){var o,s=null===(o=e.data)||void 0===o?void 0:o.manga;if(s&&!t.loading&&!t.error){var u=mr(s,r),l=Cr(s,u.shouldUseAutoWebtoonMode,u.readingMode),c=x(x({},r),{},{readingMode:l?ee.WEBTOON:r.readingMode}),d=l?ee.WEBTOON:u.readingMode.value,p=br("global",{meta:n},c,void 0,d),g=mr(s,p);i(g),a(!0)}},[null===(o=e.data)||void 0===o?void 0:o.manga,r])}(W,F,U,z,I,L),function(e,t,r,n,i,a,o,s,u){var l=ve(),c=l.i18n,d=(l._,f.useRef(void 0)),p=f.useRef(void 0),g=f.useRef(void 0),h=f.useRef(!0);f.useEffect(function(){if(!e&&!t&&r){var l=JSON.stringify(n)!==JSON.stringify(d.current);o&&l&&Ye(c._(Me[n.value].title),{autoHideDuration:qi}),d.current=n;var f=JSON.stringify(i)!==JSON.stringify(p.current)||JSON.stringify(a)!==JSON.stringify(g.current);s&&f&&(u(!0),h.current&&setTimeout(function(){return u(!1)},qi)),p.current=i,g.current=a,h.current=!1}},[e,t,r,n.value,n.isDefault,i.value,i.isDefault,a.value,a.isDefault])}(Z,K,O,y,P,j,w,T,E),function(e,t,r,n,i,a,o,s){var u,l=pt(),c=ot().state,d=(null!=c?c:{}).updateInitialChapter?void 0:n;f.useEffect(function(){var n,u,p=null===(n=e.data)||void 0===n?void 0:n.chapters.nodes,g=p?null!==(u=p[p.length-t])&&void 0!==u?u:null:void 0,f=null!=d?d:g,h=null!=i?i:g,v=function(){if(!p||!h)return[];var e=o?Ar(null!=r?r:p,s):p;return(a?jr.removeDuplicates(h,e):e).map(function(e){return Wt(e.id)})}(),m=g&&jr.getNextChapter(g,v,{offset:Q.NEXT}),C=g&&jr.getNextChapter(g,v,{offset:Q.PREVIOUS}),b=null!=f&&f.id!==(null==d?void 0:d.id);b&&l("",{replace:!0,state:x(x({},c),{},{updateInitialChapter:void 0})}),It().setReaderStateChapters(function(e){var t,r,n,i,a=(null==g?void 0:g.id)!==(null===(t=e.currentChapter)||void 0===t?void 0:t.id);return x(x({},e),{},{mangaChapters:null!==(r=e.mangaChapters)&&void 0!==r?r:p,chapters:v,initialChapter:f,chapterForDuplicatesHandling:h,currentChapter:g,nextChapter:m,previousChapter:C,isCurrentChapterReady:!a&&e.isCurrentChapterReady,visibleChapters:b?x(x({},Sr.chapters.visibleChapters),{},{lastLeadingChapterSourceOrder:null!==(n=null==f?void 0:f.sourceOrder)&&void 0!==n?n:Sr.chapters.visibleChapters.lastLeadingChapterSourceOrder,lastTrailingChapterSourceOrder:null!==(i=null==f?void 0:f.sourceOrder)&&void 0!==i?i:Sr.chapters.visibleChapters.lastTrailingChapterSourceOrder,isLeadingChapterPreloadMode:!1,isTrailingChapterPreloadMode:!1,scrollIntoView:!!e.initialChapter}):e.visibleChapters})})},[null===(u=e.data)||void 0===u?void 0:u.chapters.nodes,t,a,o,d,s])}(H,B,c,d,p,v,m,G),f.useLayoutEffect(function(){return i({status:!0,value:C.jsxs(D,{sx:{position:"absolute"},children:[C.jsx(Yi,{scrollElementRef:M}),C.jsx(Pi,{}),!M.current&&C.jsx(D,{onClick:function(){return Tt().setIsVisible(!Tt().isVisible)},sx:{position:"fixed",top:0,left:0,width:"100vw",height:"100vh",background:"transparent"}})]})}),function(){return i({status:!1,value:null})}},[M.current]),K?C.jsx(Kr,{message:s._({id:"6m5aox"}),messageExtra:it(K),retry:function(){W.error&&W.refetch().catch(X("Reader::refetchManga")),F.error&&F.refetch().catch(X("Reader::refetchDefaultSettings")),H.error&&H.refetch().catch(X("Reader::refetchChapters"))}}):Z?C.jsx(D,{sx:{height:"100vh",width:"100vw",display:"grid",placeItems:"center"},children:C.jsx(Fe,{})}):null===g?C.jsx(Kr,{message:s._({id:"aU8Fbq"})}):u&&g?C.jsxs(D,{sx:{position:"relative",display:"flex",flexDirection:"column",minWidth:"calc(100vw - ".concat(a,"px)"),maxWidth:"calc(100vw - ".concat(a,"px)"),width:"calc(100vw - ".concat(a,"px)"),height:"100vh",marginLeft:"".concat(a,"px"),transition:function(e){return"width 0.".concat(e.transitions.duration.shortest,"s, margin-left 0.").concat(e.transitions.duration.shortest,"s")},overflow:"auto",backgroundColor:rt[S]},children:[C.jsx(Gi,{ref:M}),C.jsx(wi,{}),C.jsx(Ti,{}),C.jsx(ta,{})]}):null};e("Reader",Ct(f.memo(ra),[T],["setOverride","readerNavBarWidth"]))}}})}();
