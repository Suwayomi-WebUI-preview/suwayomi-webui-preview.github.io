import{c as Y,j as e,u as k,b as l,B as $,aC as W,C as v,bO as G,a1 as Q,aq as N,f as U,c$ as X,d0 as J,G as y,I as E,cR as Z,a5 as ee,d1 as D,m as g,g as j,e as V,d2 as te,i as z,aM as ae,k as H,F,d3 as se,R as re,d4 as p,M as A,s as f,v as C,aA as T,c_ as ie,d5 as oe,d6 as L,l as ne,d7 as M,d8 as le}from"./index-LuRfpAul.js";import{S as R}from"./Select-BydMHwoW.js";import{N as de}from"./NumberSetting-Bifm9KJA.js";import{T as O}from"./CreateThemeDialog-oQj3KI9-.js";import{C as ce}from"./CheckCircle-DnxvzzEv.js";import{D as me}from"./Delete-C39Fxflk.js";import{E as he}from"./Edit-7Eod3aSi.js";import{C as pe}from"./Card-Cn142Txi.js";import{C as ge}from"./CardActionArea-CfK54VWb.js";import{E as xe}from"./EmptyViewAbsoluteCentered-CG8OzJNr.js";import{u as ue}from"./useAppTitle-BLkwhwB5.js";import{S}from"./Switch-8iFQuNmO.js";import{L as je}from"./Link-EgZtWGSp.js";import{L as B}from"./ListSubheader-DJ4RXog7.js";import"./Slider--oKI9R4X.js";import"./CheckboxInput-DNi2D9mP.js";import"./Checkbox-BZmjBZWi.js";import"./SwitchBase-8hP1GUdL.js";import"./Trans-CXVK19fM.js";const be=Y(e.jsx("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2m5 11h-4v4h-2v-4H7v-2h4V7h2v4h4z"})),fe=()=>{const{t}=k();return e.jsxs(l,{sx:{alignItems:"center",gap:1,minWidth:"150px",maxWidth:"150px"},children:[e.jsx($,{sx:{width:"100%",height:"225px"},variant:"contained",size:"large",onClick:()=>{W.show(O,{mode:"create"})},children:e.jsx(be,{fontSize:"large"})}),e.jsx(v,{title:t("settings.appearance.theme.create.title"),placement:"top",children:e.jsx(G,{sx:{maxWidth:"100%"},children:t("settings.appearance.theme.create.title")})})]})},P=ee(y)(()=>({width:"15px",height:"20px"})),Ce=({appTheme:t,onDelete:r})=>{const{getName:x}=t,{t:i}=k(),b=Q(),{themeMode:u,setAppTheme:d,appTheme:s,shouldUsePureBlackMode:o}=N(),m=t.id===s,h=U.useMemo(()=>X(u,t,o),[t,u,o]);return e.jsxs(l,{sx:{justifyContent:"center",alignItems:"center",minWidth:"150px",maxWidth:"150px",gap:1},children:[e.jsx(J,{theme:h,children:e.jsxs(pe,{sx:{width:"100%",height:"225px",position:"relative"},children:[e.jsx(y,{sx:{position:"absolute",top:0,right:0,bottom:0,left:0,border:"4px solid",borderColor:m?h.palette.primary.light:h.palette.grey[100],zIndex:1,pointerEvents:"none",borderRadius:1,...b.applyStyles("dark",{borderColor:m?h.palette.primary.light:h.palette.grey[900]})}}),e.jsx(ge,{sx:{height:"100%",backgroundColor:"background.default"},onClick:()=>{if(!D.hasMissing(t.muiTheme)){d(t.id);return}g(i("settings.appearance.theme.select.fonts.loading"),"info"),D.load(t.muiTheme).then(()=>d(t.id)).catch(_=>g(i("settings.appearance.theme.select.fonts.error"),"error",j(_)))},children:e.jsxs(l,{sx:{height:"100%",m:0},children:[e.jsxs(l,{sx:{height:"100%",gap:2,p:2},children:[e.jsxs(l,{sx:{maxHeight:"20px",flexDirection:"row",justifyContent:"space-between",alignItems:"flex-start"},children:[e.jsx(y,{sx:{width:"65%",height:"20px",backgroundColor:"primary.dark",borderRadius:1}}),e.jsxs(l,{sx:{alignItems:"center",gap:1,mt:-.25},children:[m&&e.jsx(ce,{sx:{visibility:m?"visible":"hidden",color:"primary.light"}}),!m&&t.isCustom&&e.jsx(E,{onClick:n=>{n.preventDefault(),n.stopPropagation(),r()},component:"div",size:"small",sx:{mt:-.5},children:e.jsx(v,{title:i("global.button.delete"),placement:"auto",children:e.jsx(me,{})})}),t.isCustom&&e.jsx(E,{onClick:n=>{n.preventDefault(),n.stopPropagation(),W.show(O,{mode:"edit",appTheme:t})},component:"div",size:"small",children:e.jsx(v,{title:i("global.button.edit"),placement:"auto",children:e.jsx(he,{})})})]})]}),e.jsx(Z,{sx:{width:"55%",height:"65%",p:1,borderRadius:1},children:e.jsxs(l,{sx:{width:"max-content",flexDirection:"row",overflow:"hidden",borderRadius:1},children:[e.jsx(P,{sx:{backgroundColor:"primary.main"}}),e.jsx(P,{sx:{backgroundColor:"secondary.main"}})]})})]}),e.jsxs(l,{sx:{height:"25%",backgroundColor:"background.paper",alignItems:"center",flexDirection:"row",gap:2,p:2},children:[e.jsx(y,{sx:{width:"20px",height:"20px",borderRadius:"50%",backgroundColor:"primary.main"}}),e.jsx(y,{sx:{flexGrow:1,height:"20px",borderRadius:1,backgroundColor:"primary.light"}})]})]})})]})}),e.jsx(v,{title:x(),placement:"top",children:e.jsx(G,{sx:{maxWidth:"100%"},children:x()})})]})},ye=()=>{const{t}=k(),{settings:{customThemes:r},request:{loading:x,error:i,refetch:b}}=V(),u=U.useMemo(()=>[...te,...Object.values(r).map(s=>({...s,getName:()=>s.id}))],[r]),d=F(s=>{throw s});return x?e.jsx(z,{}):i?e.jsx(ae,{message:t("global.error.label.failed_to_load_data"),messageExtra:j(i),retry:()=>b().catch(H())}):e.jsxs(l,{sx:{flexDirection:"row",flexWrap:"no-wrap",alignItems:"start",overflowX:"auto",gap:1,mx:2},children:[e.jsx(fe,{}),u.map(s=>e.jsx(Ce,{appTheme:s,onDelete:()=>{g(t("settings.appearance.theme.delete.action",{theme:s.getName()}),"info"),d("customThemes",Object.fromEntries(Object.entries(r).filter(([o])=>o!==s.id))).then(()=>g(t("settings.appearance.theme.delete.success",{theme:s.getName()}),"success")).catch(o=>g(t("settings.appearance.theme.delete.failure",{theme:s.getName()}),"error",j(o)))}},s.id))]})},Ve=()=>{const{t,i18n:r}=k(),{themeMode:x,setThemeMode:i,shouldUsePureBlackMode:b,setShouldUsePureBlackMode:u}=N(),{mode:d,setMode:s}=se(),o=d!=null?d:x;ue(t("settings.appearance.title"));const{settings:{mangaThumbnailBackdrop:m,mangaDynamicColorSchemes:h,mangaGridItemWidth:n},request:{loading:_,error:I,refetch:K}}=V(),w=F(a=>g(t("global.error.label.failed_to_save_changes"),"error",j(a))),q=re.getThemeMode(o)===p.DARK;return _?e.jsx(z,{}):I?e.jsx(xe,{message:t("global.error.label.failed_to_load_data"),messageExtra:j(I),retry:()=>K().catch(H())}):e.jsxs(A,{subheader:e.jsx(B,{component:"div",id:"appearance-theme",children:t("settings.appearance.theme.title")}),children:[e.jsxs(f,{children:[e.jsx(C,{primary:t("settings.appearance.theme.mode")}),e.jsxs(R,{value:o,onChange:a=>{const c=a.target.value;i(c),s(c),ie.local.setItem(oe,c,!0)},children:[e.jsx(T,{value:p.SYSTEM,children:t("global.label.system")},p.SYSTEM),e.jsx(T,{value:p.DARK,children:t("global.label.dark")},p.DARK),e.jsx(T,{value:p.LIGHT,children:t("global.label.light")},p.LIGHT)]})]}),e.jsx(ye,{}),q&&e.jsxs(f,{children:[e.jsx(C,{primary:t("settings.appearance.theme.pure_black_mode")}),e.jsx(S,{checked:b,onChange:(a,c)=>u(c)})]}),e.jsxs(A,{subheader:e.jsx(B,{component:"div",id:"appearance-theme",children:t("global.label.display")}),children:[e.jsxs(f,{children:[e.jsx(C,{primary:t("global.language.label.language"),secondary:e.jsxs(e.Fragment,{children:[e.jsxs("span",{children:[t("settings.label.language_description")," "]}),e.jsx(je,{href:"https://hosted.weblate.org/projects/suwayomi/suwayomi-webui",target:"_blank",rel:"noreferrer",children:t("global.language.title.weblate")})]})}),e.jsx(R,{value:L.includes(r.language)?r.language:"en",onChange:({target:{value:a}})=>r.changeLanguage(a,c=>{c&&g(t("global.language.error.load"),"error",j(c))}),children:L.map(a=>e.jsx(T,{value:a,children:ne(a)},a))})]}),e.jsx(de,{settingTitle:t("settings.label.manga_item_width"),settingValue:"px: ".concat(n),value:n,defaultValue:le.mangaGridItemWidth,minValue:M.min,maxValue:M.max,stepSize:M.step,valueUnit:"px",showSlider:!0,handleUpdate:a=>w("mangaGridItemWidth",a)}),e.jsxs(f,{children:[e.jsx(C,{primary:t("settings.appearance.manga_thumbnail_backdrop.title"),secondary:t("settings.appearance.manga_thumbnail_backdrop.description")}),e.jsx(S,{edge:"end",checked:m,onChange:a=>w("mangaThumbnailBackdrop",a.target.checked)})]}),e.jsxs(f,{children:[e.jsx(C,{primary:t("settings.appearance.manga_dynamic_color_schemes.title"),secondary:t("settings.appearance.manga_dynamic_color_schemes.description")}),e.jsx(S,{edge:"end",checked:h,onChange:a=>w("mangaDynamicColorSchemes",a.target.checked)})]})]})]})};export{Ve as Appearance};
