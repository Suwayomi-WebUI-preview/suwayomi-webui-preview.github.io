!function(){function e(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */var n,t,a="function"==typeof Symbol?Symbol:{},o=a.iterator||"@@iterator",i=a.toStringTag||"@@toStringTag";function c(e,a,o,i){var c=a&&a.prototype instanceof u?a:u,l=Object.create(c.prototype);return r(l,"_invoke",function(e,r,a){var o,i,c,u=0,l=a||[],g=!1,f={p:0,n:0,v:n,a:d,f:d.bind(n,4),d:function(e,r){return o=e,i=0,c=n,f.n=r,s}};function d(e,r){for(i=e,c=r,t=0;!g&&u&&!a&&t<l.length;t++){var a,o=l[t],d=f.p,p=o[2];e>3?(a=p===r)&&(c=o[(i=o[4])?5:(i=3,3)],o[4]=o[5]=n):o[0]<=d&&((a=e<2&&d<o[1])?(i=0,f.v=r,f.n=o[1]):d<p&&(a=e<3||o[0]>r||r>p)&&(o[4]=e,o[5]=r,f.n=p,i=0))}if(a||e>1)return s;throw g=!0,r}return function(a,l,p){if(u>1)throw TypeError("Generator is already running");for(g&&1===l&&d(l,p),i=l,c=p;(t=i<2?n:c)||!g;){o||(i?i<3?(i>1&&(f.n=-1),d(i,c)):f.n=c:f.v=c);try{if(u=2,o){if(i||(a="next"),t=o[a]){if(!(t=t.call(o,c)))throw TypeError("iterator result is not an object");if(!t.done)return t;c=t.value,i<2&&(i=0)}else 1===i&&(t=o.return)&&t.call(o),i<2&&(c=TypeError("The iterator does not provide a '"+a+"' method"),i=1);o=n}else if((t=(g=f.n<0)?c:e.call(r,f))!==s)break}catch(t){o=n,i=1,c=t}finally{u=1}}return{value:t,done:g}}}(e,o,i),!0),l}var s={};function u(){}function l(){}function g(){}t=Object.getPrototypeOf;var f=[][o]?t(t([][o]())):(r(t={},o,function(){return this}),t),d=g.prototype=u.prototype=Object.create(f);function p(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,g):(e.__proto__=g,r(e,i,"GeneratorFunction")),e.prototype=Object.create(d),e}return l.prototype=g,r(d,"constructor",g),r(g,"constructor",l),l.displayName="GeneratorFunction",r(g,i,"GeneratorFunction"),r(d),r(d,i,"Generator"),r(d,o,function(){return this}),r(d,"toString",function(){return"[object Generator]"}),(e=function(){return{w:c,m:p}})()}function r(e,n,t,a){var o=Object.defineProperty;try{o({},"",{})}catch(e){o=0}r=function(e,n,t,a){function i(n,t){r(e,n,function(e){return this._invoke(n,t,e)})}n?o?o(e,n,{value:t,enumerable:!a,configurable:!a,writable:!a}):e[n]=t:(i("next",0),i("throw",1),i("return",2))},r(e,n,t,a)}function n(e,r,n,t,a,o,i){try{var c=e[o](i),s=c.value}catch(e){return void n(e)}c.done?r(s):Promise.resolve(s).then(t,a)}function t(e){return function(){var r=this,t=arguments;return new Promise(function(a,o){var i=e.apply(r,t);function c(e){n(i,a,o,c,s,"next",e)}function s(e){n(i,a,o,c,s,"throw",e)}c(void 0)})}}System.register(["./index-legacy-DQ1iGzzW.js","./EmptyViewAbsoluteCentered-legacy-BWYCa2k2.js","./Trackers-legacy-DfsJOIZ_.js","./AvatarSpinner-legacy-Nng3JxY1.js","./LoginDialog-legacy-bXMgTslI.js","./ListItemAvatar-legacy-DlY7oNyV.js","./Chip-legacy-MzwKmAcL.js","./useAppTitle-legacy-BqJ7Dori.js","./Switch-legacy-XNwRn-lG.js","./ListSubheader-legacy-TK6wYyY8.js","./SpinnerImage-legacy-BYgvLFez.js","./Refresh-legacy-DMf-xSir.js","./SwitchBase-legacy-hlruH7CB.js"],function(r,n){"use strict";var a,o,i,c,s,u,l,g,f,d,p,h,m,y,v,k,b,j,w,x,_,S,L,I,P;return{setters:[function(e){a=e.u,o=e.j,i=e.aQ,c=e.r,s=e.v,u=e.bZ,l=e.b9,g=e.m,f=e.g,d=e.e,p=e.Y,h=e.k,m=e.i,y=e.M,v=e.s,k=e.F},function(e){b=e.E},function(e){j=e.T},function(e){w=e.A},function(e){x=e.C},function(e){_=e.L},function(e){S=e.C},function(e){L=e.u},function(e){I=e.S},function(e){P=e.L},null,null,null],execute:function(){var n=function(r){var n=r.tracker,d=a().t,p=!n.isLoggedIn&&!!n.authUrl,h=function(){var r=t(e().m(function r(){var t;return e().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,e.n=1,c.logoutFromTracker(n.id).response;case 1:e.n=3;break;case 2:e.p=2,t=e.v,g(d("tracking.action.logout.label.failure",{name:n.name}),"error",f(t));case 3:return e.a(2)}},r,null,[[0,2]])}));return function(){return r.apply(this,arguments)}}(),m=function(){var r=t(e().m(function r(t,a){var o,i;return e().w(function(e){for(;;)switch(e.p=e.n){case 0:if(!p){e.n=1;break}return o={redirectUrl:"".concat(window.location.origin,"/tracker/login/oauth"),clientName:"Suwayomi-WebUI",trackerId:n.id,trackerName:n.name},window.open("".concat(n.authUrl,"&state=").concat(JSON.stringify(o)),"_self"),e.a(2);case 1:return e.p=1,e.n=2,c.loginTrackerCredentials(n.id,t,a).response;case 2:e.n=4;break;case 3:e.p=3,i=e.v,g(d("tracking.action.login.label.failure",{name:n.name}),"error",f(i));case 4:return e.a(2)}},r,null,[[1,3]])}));return function(e,n){return r.apply(this,arguments)}}(),y=function(){var r=t(e().m(function r(a,o){var i,c;return e().w(function(r){for(;;)switch(r.n){case 0:if(!p){r.n=1;break}return i={redirectUrl:"".concat(window.location.origin,"/tracker/login/oauth"),clientName:"Suwayomi-WebUI",trackerId:n.id,trackerName:n.name},window.open("".concat(n.authUrl,"&state=").concat(JSON.stringify(i)),"_self"),r.a(2);case 1:return c=x.showControlled({title:d(j.isLoggedIn(n)?"tracking.settings.dialog.title.log_out":"tracking.settings.dialog.title.log_in",{name:n.name}),isLoading:!1,isLoggedIn:j.isLoggedIn(n),username:a,password:o,loginLogout:function(){var r=t(e().m(function r(t,a){var o,i,s;return e().w(function(e){for(;;)switch(e.p=e.n){case 0:if(c.update({isLoading:!0,loginLogout:l}),!j.isLoggedIn(n)){e.n=5;break}return e.p=1,e.n=2,h();case 2:c.submit(),e.n=4;break;case 3:e.p=3,i=e.v,g(d("tracking.action.logout.label.failure",{name:n.name}),"error",f(i));case 4:return e.a(2);case 5:return e.p=5,e.n=6,m(t,a);case 6:c.submit(),e.n=9;break;case 7:return e.p=7,s=e.v,g(d("tracking.action.login.label.failure",{name:n.name}),"error",f(s)),o="__retry__",e.n=8,Promise.race([c.promise,Promise.resolve(o)]);case 8:e.v===o&&y(t,a);case 9:return e.a(2)}},r,null,[[5,7],[1,3]])}));return function(e,n){return r.apply(this,arguments)}}()},{id:"tracker-login-dialog"}),r.n=2,c.promise;case 2:return r.a(2)}},r)}));return function(e,n){return r.apply(this,arguments)}}();return o.jsxs(i,{onClick:function(){return y()},children:[o.jsx(_,{sx:{paddingRight:"20px"},children:o.jsx(w,{alt:"".concat(n.name),iconUrl:c.getValidImgUrlFor(n.icon),slots:{avatarProps:{variant:"rounded",sx:{width:64,height:64}},spinnerImageProps:{ignoreQueue:!0}}})}),o.jsx(s,{primary:n.name}),j.isLoggedIn(n)&&o.jsx(u,{children:o.jsx(S,{label:d("global.label.logged_in"),color:"success"})})]})};r("TrackingSettings",function(){var e,r=a().t;L(r("tracking.title"));var t=d(),i=t.settings,u=i.updateProgressAfterReading,l=i.updateProgressManualMarkRead,j=t.loading,w=t.request,x=w.error,_=w.refetch,S=k(function(e){return g(r("global.error.label.failed_to_save_changes"),"error",f(e))}),O=c.useGetTrackerList(p,{notifyOnNetworkStatusChange:!0}),T=O.data,C=O.loading,N=O.error,U=O.refetch,A=null!==(e=null==T?void 0:T.trackers.nodes)&&void 0!==e?e:[],F=j||C,G=null!=x?x:N;return G?o.jsx(b,{message:r("global.error.label.failed_to_load_data"),messageExtra:f(G),retry:function(){x&&_().catch(h()),N&&U().catch(h())}}):F?o.jsx(m,{}):o.jsxs(o.Fragment,{children:[o.jsxs(y,{sx:{pt:0},children:[o.jsxs(v,{children:[o.jsx(s,{primary:r("tracking.settings.label.update_progress_reading")}),o.jsx(I,{edge:"end",checked:u,onChange:function(e){return S("updateProgressAfterReading",e.target.checked)}})]}),o.jsxs(v,{children:[o.jsx(s,{primary:r("tracking.settings.label.update_progress_manual"),secondary:r("tracking.settings.label.update_progress_reading_description")}),o.jsx(I,{edge:"end",checked:l,onChange:function(e){return S("updateProgressManualMarkRead",e.target.checked)}})]})]}),o.jsx(y,{subheader:o.jsx(P,{component:"div",id:"tracking-trackers",children:r("tracking.settings.title.trackers")}),children:A.map(function(e){return o.jsx(n,{tracker:e},e.id)})})]})})}}})}();
