!function(){function e(r){return e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e(r)}function r(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */var e,s,n="function"==typeof Symbol?Symbol:{},a=n.iterator||"@@iterator",i=n.toStringTag||"@@toStringTag";function o(r,n,a,i){var o=n&&n.prototype instanceof d?n:d,c=Object.create(o.prototype);return t(c,"_invoke",function(r,t,n){var a,i,o,d=0,c=n||[],u=!1,g={p:0,n:0,v:e,a:v,f:v.bind(e,4),d:function(r,t){return a=r,i=0,o=e,g.n=t,l}};function v(r,t){for(i=r,o=t,s=0;!u&&d&&!n&&s<c.length;s++){var n,a=c[s],v=g.p,h=a[2];r>3?(n=h===t)&&(o=a[(i=a[4])?5:(i=3,3)],a[4]=a[5]=e):a[0]<=v&&((n=r<2&&v<a[1])?(i=0,g.v=t,g.n=a[1]):v<h&&(n=r<3||a[0]>t||t>h)&&(a[4]=r,a[5]=t,g.n=h,i=0))}if(n||r>1)return l;throw u=!0,t}return function(n,c,h){if(d>1)throw TypeError("Generator is already running");for(u&&1===c&&v(c,h),i=c,o=h;(s=i<2?e:o)||!u;){a||(i?i<3?(i>1&&(g.n=-1),v(i,o)):g.n=o:g.v=o);try{if(d=2,a){if(i||(n="next"),s=a[n]){if(!(s=s.call(a,o)))throw TypeError("iterator result is not an object");if(!s.done)return s;o=s.value,i<2&&(i=0)}else 1===i&&(s=a.return)&&s.call(a),i<2&&(o=TypeError("The iterator does not provide a '"+n+"' method"),i=1);a=e}else if((s=(u=g.n<0)?o:r.call(t,g))!==l)break}catch(s){a=e,i=1,o=s}finally{d=1}}return{value:s,done:u}}}(r,a,i),!0),c}var l={};function d(){}function c(){}function u(){}s=Object.getPrototypeOf;var g=[][a]?s(s([][a]())):(t(s={},a,function(){return this}),s),v=u.prototype=d.prototype=Object.create(g);function h(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,u):(e.__proto__=u,t(e,i,"GeneratorFunction")),e.prototype=Object.create(v),e}return c.prototype=u,t(v,"constructor",u),t(u,"constructor",c),c.displayName="GeneratorFunction",t(u,i,"GeneratorFunction"),t(v),t(v,i,"Generator"),t(v,a,function(){return this}),t(v,"toString",function(){return"[object Generator]"}),(r=function(){return{w:o,m:h}})()}function t(e,r,s,n){var a=Object.defineProperty;try{a({},"",{})}catch(e){a=0}t=function(e,r,s,n){function i(r,s){t(e,r,function(e){return this._invoke(r,s,e)})}r?a?a(e,r,{value:s,enumerable:!n,configurable:!n,writable:!n}):e[r]=s:(i("next",0),i("throw",1),i("return",2))},t(e,r,s,n)}function s(r,t,s){return(t=function(r){var t=function(r,t){if("object"!=e(r)||!r)return r;var s=r[Symbol.toPrimitive];if(void 0!==s){var n=s.call(r,t||"default");if("object"!=e(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(r)}(r,"string");return"symbol"==e(t)?t:t+""}(t))in r?Object.defineProperty(r,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):r[t]=s,r}function n(e,r,t,s,n,a,i){try{var o=e[a](i),l=o.value}catch(e){return void t(e)}o.done?r(l):Promise.resolve(l).then(s,n)}function a(e,r){return function(e){if(Array.isArray(e))return e}(e)||function(e,r){var t=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var s,n,a,i,o=[],l=!0,d=!1;try{if(a=(t=t.call(e)).next,0===r){if(Object(t)!==t)return;l=!1}else for(;!(l=(s=a.call(t)).done)&&(o.push(s.value),o.length!==r);l=!0);}catch(e){d=!0,n=e}finally{try{if(!l&&null!=t.return&&(i=t.return(),Object(i)!==i))return}finally{if(d)throw n}}return o}}(e,r)||function(e,r){if(e){if("string"==typeof e)return i(e,r);var t={}.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?i(e,r):void 0}}(e,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function i(e,r){(null==r||r>e.length)&&(r=e.length);for(var t=0,s=Array(r);t<r;t++)s[t]=e[t];return s}System.register(["./index-legacy-BFV3W1wI.js","./NumberSetting-legacy-CdvENV8G.js","./SelectSetting-legacy-5Am7-gcu.js","./EmptyViewAbsoluteCentered-legacy-CRudOer9.js","./useAppTitle-legacy-xHiuq49H.js","./Switch-legacy-D3Bi5O9M.js","./ListSubheader-legacy-DgZp2xRZ.js","./Trans-legacy-D1g1ruDv.js","./Link-legacy-CGv10krC.js","./Slider-legacy-XRd03Fro.js","./Select-legacy-CMUzS8_u.js","./SwitchBase-legacy-DHfSUwrt.js"],function(e,t){"use strict";var i,o,l,d,c,u,g,v,h,f,p,y,m,b,x,j,S,k,_,w,P,C,U,T,N,V,E,O,F,z,A,D,L,I,M;return{setters:[function(e){i=e.u,o=e.a,l=e.r,d=e.b,c=e.j,u=e.H,g=e.by,v=e.o,h=e.p,f=e.y,p=e.e,y=e.g,m=e.f,b=e.bz,x=e.b0,j=e.bA,S=e.bB,k=e.bC,_=e.aH,w=e.bD,P=e.bE,C=e.bF,U=e.bG,T=e.bH,N=e.m,V=e.as,E=e.bI},function(e){O=e.N},function(e){F=e.S},function(e){z=e.E},function(e){A=e.u},function(e){D=e.S},function(e){L=e.L},function(e){I=e.T},function(e){M=e.L},null,null,null],execute:function(){var t=function(e){return 0===e?V("global.label.never"):V("settings.server.misc.log_files.file_cleanup.value",{days:e,count:e})};e("ServerSettings",function(){var e,V,B=i().t;A(B("settings.server.title.server"));var R=o(),G=R.settings.serverInformAvailableUpdate,H=R.loading,q=R.request,K=q.error,$=q.refetch,W=f(function(e){return N(B("global.error.label.failed_to_save_changes"),"error",y(e))}),Y=l.useGetServerSettings({notifyOnNetworkStatusChange:!0}),J=Y.data,Q=Y.loading,X=Y.error,Z=Y.refetch,ee=a(l.useUpdateServerSettings(),1)[0],re=function(){var e,t=(e=r().m(function e(t,n,a){var i;return r().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,e.n=1,ee({variables:{input:{settings:s({},t,n)}}});case 1:null==a||a(!0),e.n=3;break;case 2:e.p=2,i=e.v,N(B("global.error.label.failed_to_save_changes"),"error",y(i)),null==a||a(!1);case 3:return e.a(2)}},e,null,[[0,2]])}),function(){var r=this,t=arguments;return new Promise(function(s,a){var i=e.apply(r,t);function o(e){n(i,s,a,o,l,"next",e)}function l(e){n(i,s,a,o,l,"throw",e)}o(void 0)})});return function(e,r,s){return t.apply(this,arguments)}}(),te=d.useMemo(function(){return c.jsxs(u,{subheader:c.jsx(L,{component:"div",id:"server-settings-client",children:B("global.label.client")}),children:[c.jsx(g,{}),c.jsxs(v,{children:[c.jsx(h,{primary:B("global.update.settings.inform.label.title"),secondary:B("global.update.settings.inform.label.description")}),c.jsx(D,{edge:"end",checked:G,onChange:function(e){return W("serverInformAvailableUpdate",e.target.checked)}})]})]})},[G]);if(H||Q)return c.jsxs(c.Fragment,{children:[te,c.jsx(p,{})]});var se=null!=K?K:X;if(se)return c.jsxs(c.Fragment,{children:[te,c.jsx(z,{message:B("global.error.label.failed_to_load_data"),messageExtra:y(se),retry:function(){K&&$().catch(m()),X&&Z().catch(m())}})]});var ne=J.settings,ae=!(null!==(e=ne.authUsername)&&void 0!==e&&e.trim()&&null!==(V=ne.authPassword)&&void 0!==V&&V.trim()),ie=ne.databaseType===b.H2;return c.jsxs(u,{sx:{pt:0},children:[te,c.jsxs(u,{subheader:c.jsx(L,{component:"div",id:"server-settings-server-address",children:B("settings.server.address.server.title")}),children:[c.jsx(x,{settingName:B("settings.server.address.server.label.ip"),handleChange:function(e){return re("ip",e)},value:ne.ip,placeholder:"0.0.0.0"}),c.jsx(O,{settingTitle:B("settings.server.address.server.label.port"),settingValue:ne.port.toString(),handleUpdate:function(e){return re("port",e)},value:ne.port,defaultValue:4567,valueUnit:B("settings.server.address.server.label.port")})]}),c.jsxs(u,{subheader:c.jsx(L,{component:"div",id:"server-settings-socks-proxy",children:B("settings.server.socks_proxy.title")}),children:[c.jsxs(v,{children:[c.jsx(h,{primary:B("settings.server.socks_proxy.label.enable")}),c.jsx(D,{edge:"end",checked:ne.socksProxyEnabled,onChange:function(e){return re("socksProxyEnabled",e.target.checked)}})]}),c.jsx(F,{settingName:B("settings.server.socks_proxy.label.version"),value:ne.socksProxyVersion,values:[[4,{text:"4"}],[5,{text:"5"}]],handleChange:function(e){return re("socksProxyVersion",e)}}),c.jsx(x,{settingName:B("settings.server.socks_proxy.label.host"),value:ne.socksProxyHost,handleChange:function(e){return re("socksProxyHost",e)}}),c.jsx(x,{settingName:B("settings.server.socks_proxy.label.port"),value:ne.socksProxyPort,handleChange:function(e){return re("socksProxyPort",e)}}),c.jsx(x,{settingName:B("settings.server.socks_proxy.label.username"),value:ne.socksProxyUsername,handleChange:function(e){return re("socksProxyUsername",e)}}),c.jsx(x,{settingName:B("settings.server.socks_proxy.label.password"),value:ne.socksProxyPassword,handleChange:function(e){return re("socksProxyPassword",e)},isPassword:!0})]}),c.jsxs(u,{subheader:c.jsx(L,{component:"div",id:"server-settings-auth",children:B("settings.server.auth.title")}),children:[c.jsx(F,{settingName:B("settings.server.auth.label.title"),value:ne.authMode,values:j,handleChange:function(e){re("authMode",e,function(r){r&&(e!==S.UiLogin&&E.removeTokens(),E.setAuthRequired(e===S.UiLogin))})},disabled:ae}),c.jsx(x,{settingName:B("settings.server.auth.label.username"),value:ne.authUsername,validate:function(e){return ne.authMode===S.None||!!e.trim()},handleChange:function(e){return re("authUsername",e)}}),c.jsx(x,{settingName:B("settings.server.auth.label.password"),value:ne.authPassword,isPassword:!0,validate:function(e){return ne.authMode===S.None||!!e.trim()},handleChange:function(e){return re("authPassword",e)}}),ne.authMode===S.UiLogin&&c.jsxs(c.Fragment,{children:[c.jsx(x,{settingName:B("settings.server.auth.jwt.audience"),value:ne.jwtAudience,handleChange:function(e){return re("jwtAudience",e)}}),c.jsx(O,{settingTitle:B("settings.server.auth.jwt.access_token_expiry"),settingValue:_(ne.jwtTokenExpiry).minutes.humanize(),value:_(ne.jwtTokenExpiry).minutes.inWholeMinutes,valueUnit:B("global.time.minutes.minute_other"),defaultValue:k.default,minValue:k.min,maxValue:k.max,handleUpdate:function(e){return re("jwtTokenExpiry",_(e).minutes.toISOString())},showSlider:!0}),c.jsx(O,{settingTitle:B("settings.server.auth.jwt.refresh_token_expiry"),settingValue:_(ne.jwtRefreshExpiry).days.humanize(),value:_(ne.jwtRefreshExpiry).days.inWholeDays,valueUnit:B("global.time.days.day_other"),defaultValue:w.default,minValue:w.min,maxValue:w.max,handleUpdate:function(e){return re("jwtRefreshExpiry",_(e).days.toISOString())},showSlider:!0})]})]}),c.jsxs(u,{subheader:c.jsx(L,{component:"div",id:"server-settings-clouadflare-bypass",children:B("settings.server.cloudflare.title")}),children:[c.jsxs(v,{children:[c.jsx(h,{primary:B("settings.server.cloudflare.flaresolverr.enabled.label.title"),secondary:c.jsxs(I,{i18nKey:"settings.server.cloudflare.flaresolverr.enabled.label.description",children:["See"," ",c.jsx(M,{href:"https://github.com/FlareSolverr/FlareSolverr?tab=readme-ov-file#installation",target:"_blank",rel:"noreferrer",children:"FlareSolverr"})," ","for information on how to set it up"]})}),c.jsx(D,{edge:"end",checked:ne.flareSolverrEnabled,onChange:function(e){return re("flareSolverrEnabled",e.target.checked)}})]}),c.jsx(x,{settingName:B("settings.server.cloudflare.flaresolverr.url.label.title"),dialogDescription:B("settings.server.cloudflare.flaresolverr.url.label.description"),value:ne.flareSolverrUrl,handleChange:function(e){return re("flareSolverrUrl",e)}}),c.jsx(O,{settingTitle:B("settings.server.cloudflare.flaresolverr.timeout.label.title"),settingValue:B("global.time.seconds.value",{count:ne.flareSolverrTimeout}),dialogDescription:B("settings.server.cloudflare.flaresolverr.timeout.label.description"),value:ne.flareSolverrTimeout,defaultValue:60,minValue:20,maxValue:300,stepSize:1,showSlider:!0,valueUnit:B("global.time.seconds.second_other"),handleUpdate:function(e){return re("flareSolverrTimeout",e)}}),c.jsx(x,{settingName:B("settings.server.cloudflare.flaresolverr.session.name.label.title"),value:ne.flareSolverrSessionName,handleChange:function(e){return re("flareSolverrSessionName",e)}}),c.jsx(O,{settingTitle:B("settings.server.cloudflare.flaresolverr.session.ttl.label.title"),settingValue:B("global.time.minutes.value",{count:ne.flareSolverrSessionTtl}),dialogDescription:B("settings.server.cloudflare.flaresolverr.session.ttl.label.description"),value:ne.flareSolverrSessionTtl,defaultValue:15,minValue:1,maxValue:60,stepSize:1,showSlider:!0,valueUnit:B("global.time.minutes.minute_other"),handleUpdate:function(e){return re("flareSolverrSessionTtl",e)}}),c.jsxs(v,{children:[c.jsx(h,{primary:B("settings.server.cloudflare.flaresolverr.response_fallback.label.title"),secondary:B("settings.server.cloudflare.flaresolverr.response_fallback.label.description")}),c.jsx(D,{edge:"end",checked:ne.flareSolverrAsResponseFallback,onChange:function(e){return re("flareSolverrAsResponseFallback",e.target.checked)}})]})]}),c.jsxs(u,{subheader:c.jsx(L,{component:"div",id:"server-settings-opds",children:B("settings.server.opds.title")}),children:[c.jsxs(v,{children:[c.jsx(h,{primary:B("settings.server.opds.binary_file_sizes.label.title"),secondary:B("settings.server.opds.binary_file_sizes.label.description")}),c.jsx(D,{edge:"end",checked:ne.opdsUseBinaryFileSizes,onChange:function(e){return re("opdsUseBinaryFileSizes",e.target.checked)}})]}),c.jsx(O,{settingTitle:B("settings.server.opds.items_per_page.label.title"),settingValue:ne.opdsItemsPerPage.toString(),dialogDescription:B("settings.server.opds.items_per_page.label.description"),value:ne.opdsItemsPerPage,defaultValue:50,minValue:10,maxValue:5e3,stepSize:10,showSlider:!0,valueUnit:B("settings.server.opds.items_per_page.label.unit_other"),handleUpdate:function(e){return re("opdsItemsPerPage",e)}}),c.jsxs(v,{children:[c.jsx(h,{primary:B("settings.server.opds.enable_page_read_progress.label.title"),secondary:B("settings.server.opds.enable_page_read_progress.label.description")}),c.jsx(D,{edge:"end",checked:ne.opdsEnablePageReadProgress,onChange:function(e){return re("opdsEnablePageReadProgress",e.target.checked)}})]}),c.jsxs(v,{children:[c.jsx(h,{primary:B("settings.server.opds.mark_as_read_on_download.label.title"),secondary:B("settings.server.opds.mark_as_read_on_download.label.description")}),c.jsx(D,{edge:"end",checked:ne.opdsMarkAsReadOnDownload,onChange:function(e){return re("opdsMarkAsReadOnDownload",e.target.checked)}})]}),c.jsxs(v,{children:[c.jsx(h,{primary:B("settings.server.opds.show_only_unread_chapters.label.title"),secondary:B("settings.server.opds.show_only_unread_chapters.label.description")}),c.jsx(D,{edge:"end",checked:ne.opdsShowOnlyUnreadChapters,onChange:function(e){return re("opdsShowOnlyUnreadChapters",e.target.checked)}})]}),c.jsxs(v,{children:[c.jsx(h,{primary:B("settings.server.opds.show_only_downloaded_chapters.label.title"),secondary:B("settings.server.opds.show_only_downloaded_chapters.label.description")}),c.jsx(D,{edge:"end",checked:ne.opdsShowOnlyDownloadedChapters,onChange:function(e){return re("opdsShowOnlyDownloadedChapters",e.target.checked)}})]}),c.jsx(F,{settingName:B("settings.server.opds.chapter_sort_order.label.title"),dialogDescription:B("settings.server.opds.chapter_sort_order.label.description"),value:ne.opdsChapterSortOrder,values:[[P.Asc,{text:B("global.sort.label.asc")}],[P.Desc,{text:B("global.sort.label.desc")}]],handleChange:function(e){return re("opdsChapterSortOrder",e)}})]}),c.jsxs(u,{subheader:c.jsx(L,{component:"div",id:"server-settings-koreader-sync",children:B("settings.server.koreader.sync.title")}),children:[c.jsx(x,{settingName:B("settings.server.koreader.sync.server_address"),handleChange:function(e){return re("koreaderSyncServerUrl",e)},value:ne.koreaderSyncServerUrl,placeholder:"http://localhost:17200"}),c.jsx(x,{settingName:B("settings.server.koreader.sync.username"),value:ne.koreaderSyncUsername,handleChange:function(e){return re("koreaderSyncUsername",e)}}),c.jsx(x,{settingName:B("settings.server.koreader.sync.user_key"),value:ne.koreaderSyncUserkey,handleChange:function(e){return re("koreaderSyncUserkey",e)},isPassword:!0}),c.jsx(x,{settingName:B("settings.server.koreader.sync.device_id"),value:ne.koreaderSyncDeviceId,handleChange:function(e){return re("koreaderSyncDeviceId",e)}}),c.jsx(F,{settingName:B("settings.server.koreader.sync.check_sum_method.title"),value:ne.koreaderSyncChecksumMethod,values:[[C.Binary,{text:B("settings.server.koreader.sync.check_sum_method.binary")}],[C.Filename,{text:B("settings.server.koreader.sync.check_sum_method.filename")}]],handleChange:function(e){return re("koreaderSyncChecksumMethod",e)}}),c.jsx(F,{settingName:B("settings.server.koreader.sync.strategy.title"),value:ne.koreaderSyncStrategy,values:[[U.Disabled,{text:B("settings.server.koreader.sync.strategy.disabled")}],[U.Prompt,{text:B("settings.server.koreader.sync.strategy.prompt")}],[U.Silent,{text:B("settings.server.koreader.sync.strategy.silent")}],[U.Send,{text:B("settings.server.koreader.sync.strategy.send")}],[U.Receive,{text:B("settings.server.koreader.sync.strategy.receive")}]],handleChange:function(e){return re("koreaderSyncStrategy",e)}}),c.jsx(O,{settingTitle:B("settings.server.koreader.sync.tolerance.title"),dialogDescription:B("settings.server.koreader.sync.tolerance.description"),settingValue:ne.koreaderSyncPercentageTolerance.toString(),value:ne.koreaderSyncPercentageTolerance,defaultValue:T.default,minValue:T.min,maxValue:T.max,stepSize:T.step,valueUnit:"",handleUpdate:function(e){return re("koreaderSyncPercentageTolerance",e)}})]}),c.jsxs(u,{subheader:c.jsx(L,{component:"div",id:"server-settings-database",children:B("settings.server.database.title")}),children:[c.jsx(F,{settingName:B("settings.server.database.type.title"),value:ne.databaseType,values:[[b.H2,{text:B("settings.server.database.type.h2")}],[b.Postgresql,{text:B("settings.server.database.type.postgresql")}]],handleChange:function(e){return re("databaseType",e)}}),c.jsx(x,{settingName:B("settings.server.database.address"),handleChange:function(e){return re("databaseUrl",e)},value:ne.databaseUrl,placeholder:"postgresql://localhost:5432/suwayomi",disabled:ie}),c.jsx(x,{settingName:B("settings.server.database.username"),value:ne.databaseUsername,handleChange:function(e){return re("databaseUsername",e)},disabled:ie}),c.jsx(x,{settingName:B("settings.server.database.password"),value:ne.databasePassword,handleChange:function(e){return re("databasePassword",e)},disabled:ie,isPassword:!0})]}),c.jsxs(u,{subheader:c.jsx(L,{component:"div",id:"server-settings-misc",children:B("settings.server.misc.title")}),children:[c.jsxs(v,{children:[c.jsx(h,{primary:B("settings.server.misc.log_level.label.server")}),c.jsx(D,{edge:"end",checked:ne.debugLogsEnabled,onChange:function(e){return re("debugLogsEnabled",e.target.checked)}})]}),c.jsxs(v,{children:[c.jsx(h,{primary:B("settings.server.misc.tray_icon.label.title"),secondary:B("settings.server.misc.tray_icon.label.description")}),c.jsx(D,{edge:"end",checked:ne.systemTrayEnabled,onChange:function(e){return re("systemTrayEnabled",e.target.checked)}})]}),c.jsx(O,{settingTitle:B("settings.server.misc.log_files.file_cleanup.title"),settingValue:t(ne.maxLogFiles),value:ne.maxLogFiles,valueUnit:B("global.date.label.day_one"),handleUpdate:function(e){return re("maxLogFiles",e)}}),c.jsx(x,{settingName:B("settings.server.misc.log_files.file_size.title"),value:ne.maxLogFileSize,dialogDescription:B("settings.server.misc.log_files.file_size.description"),validate:function(e){return!!e.match(/^[0-9]+(|kb|KB|mb|MB|gb|GB)$/g)},handleChange:function(e){return re("maxLogFileSize",e)}}),c.jsx(x,{settingName:B("settings.server.misc.log_files.total_size.title"),value:ne.maxLogFolderSize,dialogDescription:B("settings.server.misc.log_files.total_size.description"),validate:function(e){return!!e.match(/^[0-9]+(|kb|KB|mb|MB|gb|GB)$/g)},handleChange:function(e){return re("maxLogFolderSize",e)}})]})]})})}}})}();
