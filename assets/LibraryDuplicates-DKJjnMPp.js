import{u as f,d as x,G as L,c as a,N as M,j as u,a as G,k as j}from"./index-DoPHSvD2.js";import{M as E}from"./MangaGrid-Bj2FkeOE.js";import{G as v}from"./GridLayouts-jyEAr5Pd.js";import"./index-OkDh7pBl.js";import"./useManageMangaLibraryState-DgpV7a14.js";import"./CardContent-CDJswldz.js";import"./Avatar-E9eZ4lsI.js";import"./TextField-DNgJoY7o.js";import"./InputAdornment-B_VOiAO2.js";import"./SpinnerImage-QWudGzLs.js";import"./Collapse-DPzaQk5m.js";import"./Link-C6jf0ICd.js";import"./ListPreference-CtJAtyXS.js";import"./Checkbox-C3acb9E7.js";import"./SwitchBase-BW4HniC2.js";import"./NumberSetting-CzvgGT8U.js";import"./Info-v3XTjq6g.js";import"./useMobilePicker-BZfUxbmW.js";import"./Chip-CoaUGrat.js";import"./SelectSetting-D6vWw_L-.js";import"./Select-DAJ_ySzf.js";import"./CheckboxInput-CCl6cmXH.js";import"./metadataServerSettings-BpNSfY5a.js";import"./metadata-pNRG_XKl.js";import"./Mangas-kV-ePVio.js";import"./Chapters-D1HEY9lE.js";import"./ThreeStateCheckboxInput-DdfX0Vu_.js";import"./Delete-C-AxNQho.js";import"./Sync-qLKsivqz.js";import"./PlayArrow-Dcb9rQ3i.js";import"./StyledFab-C3OQw_ma.js";import"./ViewModule-CQjoQHyE.js";const er=()=>{const{t:e}=f(),[s,c]=x("libraryDuplicatesGridLayout",L.List),{setTitle:i,setAction:p}=a.useContext(M);a.useEffect(()=>(i(e("library.settings.advanced.duplicates.label.title")),p(u.jsx(v,{gridLayout:s,onChange:c})),()=>{i(""),p(null)}),[e,s]);const{data:t,loading:l,error:o,refetch:d}=G.useGetMangas({condition:{inLibrary:!0}}),g=a.useMemo(()=>{var m;const y=(m=t==null?void 0:t.mangas.nodes)!=null?m:[],b=Object.groupBy(y,({title:r})=>r);return Object.entries(b).filter(([,r])=>{var n;return((n=r==null?void 0:r.length)!=null?n:0)>1}).map(([,r])=>r!=null?r:[]).flat()},[t==null?void 0:t.mangas.nodes]);return u.jsx(E,{mangas:g,hasNextPage:!1,loadMore:()=>{},message:e(o?"manga.error.label.request_failure":"library.error.label.empty"),messageExtra:o==null?void 0:o.message,isLoading:l,retry:o?()=>d().catch(j()):void 0,gridLayout:s})};export{er as LibraryDuplicates};
