!function(){function e(r){return e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e(r)}function r(r,s,t){return(s=function(r){var s=function(r,s){if("object"!=e(r)||!r)return r;var t=r[Symbol.toPrimitive];if(void 0!==t){var n=t.call(r,s||"default");if("object"!=e(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===s?String:Number)(r)}(r,"string");return"symbol"==e(s)?s:s+""}(s))in r?Object.defineProperty(r,s,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[s]=t,r}function s(e,r){return function(e){if(Array.isArray(e))return e}(e)||function(e,r){var s=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=s){var t,n,l,a,o=[],i=!0,d=!1;try{if(l=(s=s.call(e)).next,0===r){if(Object(s)!==s)return;i=!1}else for(;!(i=(t=l.call(s)).done)&&(o.push(t.value),o.length!==r);i=!0);}catch(e){d=!0,n=e}finally{try{if(!i&&null!=s.return&&(a=s.return(),Object(a)!==a))return}finally{if(d)throw n}}return o}}(e,r)||function(e,r){if(e){if("string"==typeof e)return t(e,r);var s={}.toString.call(e).slice(8,-1);return"Object"===s&&e.constructor&&(s=e.constructor.name),"Map"===s||"Set"===s?Array.from(e):"Arguments"===s||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(s)?t(e,r):void 0}}(e,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function t(e,r){(null==r||r>e.length)&&(r=e.length);for(var s=0,t=Array(r);s<r;s++)t[s]=e[s];return t}System.register(["./index-legacy-DfhsVRUU.js","./TextSetting-legacy-DD0AHpBq.js","./NumberSetting-legacy-CJ7oLYQ0.js","./SelectSetting-legacy-CvfjqzGV.js","./EmptyViewAbsoluteCentered-legacy-UgopXCkG.js","./useAppTitle-legacy-a3aZPwNe.js","./Switch-legacy-C7YvY7BA.js","./ListSubheader-legacy-BdhXNYHA.js","./Trans-legacy-BI3ELlYd.js","./Link-legacy-C4vUIF1R.js","./PasswordTextField-legacy-BMcq3iW1.js","./VisibilityOff-legacy-TXt6TCQQ.js","./TextField-legacy-Cup2HIyY.js","./useFormControl-legacy-BD_z9TSJ.js","./formControlState-legacy-eu0RN9F_.js","./InputAdornment-legacy-DO4-92Zw.js","./Slider-legacy-MPOAXz0l.js","./Select-legacy-CTdO28U2.js","./SwitchBase-legacy-Cqu9bDxt.js"],function(e,t){"use strict";var n,l,a,o,i,d,c,u,g,h,v,p,f,m,b,y,x,S,j,_,k,P,w,C,U,F,T;return{setters:[function(e){n=e.u,l=e.a,a=e.r,o=e.av,i=e.b,d=e.j,c=e.F,u=e.o,g=e.p,h=e.w,v=e.e,p=e.g,f=e.f,m=e.bA,b=e.bB,y=e.bC,x=e.m,S=e.ax},function(e){j=e.T},function(e){_=e.N},function(e){k=e.S},function(e){P=e.E},function(e){w=e.u},function(e){C=e.S},function(e){U=e.L},function(e){F=e.T},function(e){T=e.L},null,null,null,null,null,null,null,null,null],execute:function(){var t=function(e){return 0===e?S("global.label.never"):S("settings.server.misc.log_files.file_cleanup.value",{days:e,count:e})};e("ServerSettings",function(){var e=n().t;w(e("settings.server.title.server"));var S,E=l(),N=E.settings.serverInformAvailableUpdate,A=E.loading,L=E.request,O=L.error,z=L.refetch,V=h(function(r){return x(e("global.error.label.failed_to_save_changes"),"error",p(r))}),D=a.useGetServerSettings({notifyOnNetworkStatusChange:!0}),M=D.data,B=D.loading,R=D.error,I=D.refetch,H=s(a.useUpdateServerSettings(),1)[0],$=s(o("serverBaseURL",window.location.origin),2),G=$[0],K=$[1],q={ip:(S=M.settings).ip,port:S.port,socksProxyEnabled:S.socksProxyEnabled,socksProxyVersion:S.socksProxyVersion,socksProxyHost:S.socksProxyHost,socksProxyPort:S.socksProxyPort,socksProxyUsername:S.socksProxyUsername,socksProxyPassword:S.socksProxyPassword,debugLogsEnabled:S.debugLogsEnabled,systemTrayEnabled:S.systemTrayEnabled,maxLogFiles:S.maxLogFiles,maxLogFileSize:S.maxLogFileSize,maxLogFolderSize:S.maxLogFolderSize,authMode:S.authMode,authUsername:S.authUsername,authPassword:S.authPassword,flareSolverrEnabled:S.flareSolverrEnabled,flareSolverrTimeout:S.flareSolverrTimeout,flareSolverrUrl:S.flareSolverrUrl,flareSolverrSessionName:S.flareSolverrSessionName,flareSolverrSessionTtl:S.flareSolverrSessionTtl,flareSolverrAsResponseFallback:S.flareSolverrAsResponseFallback,opdsUseBinaryFileSizes:S.opdsUseBinaryFileSizes,opdsItemsPerPage:S.opdsItemsPerPage,opdsEnablePageReadProgress:S.opdsEnablePageReadProgress,opdsMarkAsReadOnDownload:S.opdsMarkAsReadOnDownload,opdsShowOnlyUnreadChapters:S.opdsShowOnlyUnreadChapters,opdsShowOnlyDownloadedChapters:S.opdsShowOnlyDownloadedChapters,opdsChapterSortOrder:S.opdsChapterSortOrder},W=!q.authUsername.trim()||!q.authPassword.trim(),X=function(e){var r=e.replaceAll(/(\/)+$/g,"");K(r),a.reset()},Y=function(s,t){H({variables:{input:{settings:r({},s,t)}}}).catch(function(r){return x(e("global.error.label.failed_to_save_changes"),"error",p(r))})},J=i.useMemo(function(){return d.jsxs(c,{subheader:d.jsx(U,{component:"div",id:"server-settings-client",children:e("global.label.client")}),children:[d.jsx(j,{settingName:e("settings.about.server.label.address"),handleChange:X,value:G,placeholder:"http://localhost:4567"}),d.jsxs(u,{children:[d.jsx(g,{primary:e("global.update.settings.inform.label.title"),secondary:e("global.update.settings.inform.label.description")}),d.jsx(C,{edge:"end",checked:N,onChange:function(e){return V("serverInformAvailableUpdate",e.target.checked)}})]})]})},[G,N]);if(A||B)return d.jsxs(d.Fragment,{children:[J,d.jsx(v,{})]});var Q=null!=O?O:R;return Q?d.jsxs(d.Fragment,{children:[J,d.jsx(P,{message:e("global.error.label.failed_to_load_data"),messageExtra:p(Q),retry:function(){O&&z().catch(f()),R&&I().catch(f())}})]}):d.jsxs(c,{sx:{pt:0},children:[J,d.jsxs(c,{subheader:d.jsx(U,{component:"div",id:"server-settings-server-address",children:e("settings.server.address.server.title")}),children:[d.jsx(j,{settingName:e("settings.server.address.server.label.ip"),handleChange:function(e){return Y("ip",e)},value:q.ip,placeholder:"0.0.0.0"}),d.jsx(_,{settingTitle:e("settings.server.address.server.label.port"),settingValue:q.port.toString(),handleUpdate:function(e){return Y("port",e)},value:q.port,defaultValue:4567,valueUnit:e("settings.server.address.server.label.port")})]}),d.jsxs(c,{subheader:d.jsx(U,{component:"div",id:"server-settings-socks-proxy",children:e("settings.server.socks_proxy.title")}),children:[d.jsxs(u,{children:[d.jsx(g,{primary:e("settings.server.socks_proxy.label.enable")}),d.jsx(C,{edge:"end",checked:q.socksProxyEnabled,onChange:function(e){return Y("socksProxyEnabled",e.target.checked)}})]}),d.jsx(k,{settingName:e("settings.server.socks_proxy.label.version"),value:q.socksProxyVersion,values:[[4,{text:"4"}],[5,{text:"5"}]],handleChange:function(e){return Y("socksProxyVersion",e)}}),d.jsx(j,{settingName:e("settings.server.socks_proxy.label.host"),value:q.socksProxyHost,handleChange:function(e){return Y("socksProxyHost",e)}}),d.jsx(j,{settingName:e("settings.server.socks_proxy.label.port"),value:q.socksProxyPort,handleChange:function(e){return Y("socksProxyPort",e)}}),d.jsx(j,{settingName:e("settings.server.socks_proxy.label.username"),value:q.socksProxyUsername,handleChange:function(e){return Y("socksProxyUsername",e)}}),d.jsx(j,{settingName:e("settings.server.socks_proxy.label.password"),value:q.socksProxyPassword,handleChange:function(e){return Y("socksProxyPassword",e)},isPassword:!0})]}),d.jsxs(c,{subheader:d.jsx(U,{component:"div",id:"server-settings-auth",children:e("settings.server.auth.title")}),children:[d.jsx(k,{settingName:e("settings.server.auth.label.title"),value:q.authMode,values:m,handleChange:function(e){return Y("authMode",e)},disabled:W}),d.jsx(j,{settingName:e("settings.server.auth.label.username"),value:q.authUsername,validate:function(e){return q.authMode===b.None||!!e.trim()},handleChange:function(e){return Y("authUsername",e)}}),d.jsx(j,{settingName:e("settings.server.auth.label.password"),value:q.authPassword,isPassword:!0,validate:function(e){return q.authMode===b.None||!!e.trim()},handleChange:function(e){return Y("authPassword",e)}})]}),d.jsxs(c,{subheader:d.jsx(U,{component:"div",id:"server-settings-clouadflare-bypass",children:e("settings.server.cloudflare.title")}),children:[d.jsxs(u,{children:[d.jsx(g,{primary:e("settings.server.cloudflare.flaresolverr.enabled.label.title"),secondary:d.jsxs(F,{i18nKey:"settings.server.cloudflare.flaresolverr.enabled.label.description",children:["See"," ",d.jsx(T,{href:"https://github.com/FlareSolverr/FlareSolverr?tab=readme-ov-file#installation",target:"_blank",rel:"noreferrer",children:"FlareSolverr"})," ","for information on how to set it up"]})}),d.jsx(C,{edge:"end",checked:q.flareSolverrEnabled,onChange:function(e){return Y("flareSolverrEnabled",e.target.checked)}})]}),d.jsx(j,{settingName:e("settings.server.cloudflare.flaresolverr.url.label.title"),dialogDescription:e("settings.server.cloudflare.flaresolverr.url.label.description"),value:q.flareSolverrUrl,handleChange:function(e){return Y("flareSolverrUrl",e)}}),d.jsx(_,{settingTitle:e("settings.server.cloudflare.flaresolverr.timeout.label.title"),settingValue:e("global.time.seconds.value",{count:q.flareSolverrTimeout}),dialogDescription:e("settings.server.cloudflare.flaresolverr.timeout.label.description"),value:q.flareSolverrTimeout,defaultValue:60,minValue:20,maxValue:300,stepSize:1,showSlider:!0,valueUnit:e("global.time.seconds.second_other"),handleUpdate:function(e){return Y("flareSolverrTimeout",e)}}),d.jsx(j,{settingName:e("settings.server.cloudflare.flaresolverr.session.name.label.title"),value:q.flareSolverrSessionName,handleChange:function(e){return Y("flareSolverrSessionName",e)}}),d.jsx(_,{settingTitle:e("settings.server.cloudflare.flaresolverr.session.ttl.label.title"),settingValue:e("global.time.minutes.value",{count:q.flareSolverrSessionTtl}),dialogDescription:e("settings.server.cloudflare.flaresolverr.session.ttl.label.description"),value:q.flareSolverrSessionTtl,defaultValue:15,minValue:1,maxValue:60,stepSize:1,showSlider:!0,valueUnit:e("global.time.minutes.minute_other"),handleUpdate:function(e){return Y("flareSolverrSessionTtl",e)}}),d.jsxs(u,{children:[d.jsx(g,{primary:e("settings.server.cloudflare.flaresolverr.response_fallback.label.title"),secondary:e("settings.server.cloudflare.flaresolverr.response_fallback.label.description")}),d.jsx(C,{edge:"end",checked:q.flareSolverrAsResponseFallback,onChange:function(e){return Y("flareSolverrAsResponseFallback",e.target.checked)}})]})]}),d.jsxs(c,{subheader:d.jsx(U,{component:"div",id:"server-settings-opds",children:e("settings.server.opds.title")}),children:[d.jsxs(u,{children:[d.jsx(g,{primary:e("settings.server.opds.binary_file_sizes.label.title"),secondary:e("settings.server.opds.binary_file_sizes.label.description")}),d.jsx(C,{edge:"end",checked:q.opdsUseBinaryFileSizes,onChange:function(e){return Y("opdsUseBinaryFileSizes",e.target.checked)}})]}),d.jsx(_,{settingTitle:e("settings.server.opds.items_per_page.label.title"),settingValue:q.opdsItemsPerPage.toString(),dialogDescription:e("settings.server.opds.items_per_page.label.description"),value:q.opdsItemsPerPage,defaultValue:50,minValue:10,maxValue:5e3,stepSize:10,showSlider:!0,valueUnit:e("settings.server.opds.items_per_page.label.unit_other"),handleUpdate:function(e){return Y("opdsItemsPerPage",e)}}),d.jsxs(u,{children:[d.jsx(g,{primary:e("settings.server.opds.enable_page_read_progress.label.title"),secondary:e("settings.server.opds.enable_page_read_progress.label.description")}),d.jsx(C,{edge:"end",checked:q.opdsEnablePageReadProgress,onChange:function(e){return Y("opdsEnablePageReadProgress",e.target.checked)}})]}),d.jsxs(u,{children:[d.jsx(g,{primary:e("settings.server.opds.mark_as_read_on_download.label.title"),secondary:e("settings.server.opds.mark_as_read_on_download.label.description")}),d.jsx(C,{edge:"end",checked:q.opdsMarkAsReadOnDownload,onChange:function(e){return Y("opdsMarkAsReadOnDownload",e.target.checked)}})]}),d.jsxs(u,{children:[d.jsx(g,{primary:e("settings.server.opds.show_only_unread_chapters.label.title"),secondary:e("settings.server.opds.show_only_unread_chapters.label.description")}),d.jsx(C,{edge:"end",checked:q.opdsShowOnlyUnreadChapters,onChange:function(e){return Y("opdsShowOnlyUnreadChapters",e.target.checked)}})]}),d.jsxs(u,{children:[d.jsx(g,{primary:e("settings.server.opds.show_only_downloaded_chapters.label.title"),secondary:e("settings.server.opds.show_only_downloaded_chapters.label.description")}),d.jsx(C,{edge:"end",checked:q.opdsShowOnlyDownloadedChapters,onChange:function(e){return Y("opdsShowOnlyDownloadedChapters",e.target.checked)}})]}),d.jsx(k,{settingName:e("settings.server.opds.chapter_sort_order.label.title"),dialogDescription:e("settings.server.opds.chapter_sort_order.label.description"),value:q.opdsChapterSortOrder,values:[[y.Asc,{text:e("global.sort.label.asc")}],[y.Desc,{text:e("global.sort.label.desc")}]],handleChange:function(e){return Y("opdsChapterSortOrder",e)}})]}),d.jsxs(c,{subheader:d.jsx(U,{component:"div",id:"server-settings-misc",children:e("settings.server.misc.title")}),children:[d.jsxs(u,{children:[d.jsx(g,{primary:e("settings.server.misc.log_level.label.server")}),d.jsx(C,{edge:"end",checked:q.debugLogsEnabled,onChange:function(e){return Y("debugLogsEnabled",e.target.checked)}})]}),d.jsxs(u,{children:[d.jsx(g,{primary:e("settings.server.misc.tray_icon.label.title"),secondary:e("settings.server.misc.tray_icon.label.description")}),d.jsx(C,{edge:"end",checked:q.systemTrayEnabled,onChange:function(e){return Y("systemTrayEnabled",e.target.checked)}})]}),d.jsx(_,{settingTitle:e("settings.server.misc.log_files.file_cleanup.title"),settingValue:t(q.maxLogFiles),value:q.maxLogFiles,valueUnit:e("global.date.label.day_one"),handleUpdate:function(e){return Y("maxLogFiles",e)}}),d.jsx(j,{settingName:e("settings.server.misc.log_files.file_size.title"),value:q.maxLogFileSize,dialogDescription:e("settings.server.misc.log_files.file_size.description"),validate:function(e){return!!e.match(/^[0-9]+(|kb|KB|mb|MB|gb|GB)$/g)},handleChange:function(e){return Y("maxLogFileSize",e)}}),d.jsx(j,{settingName:e("settings.server.misc.log_files.total_size.title"),value:q.maxLogFolderSize,dialogDescription:e("settings.server.misc.log_files.total_size.description"),validate:function(e){return!!e.match(/^[0-9]+(|kb|KB|mb|MB|gb|GB)$/g)},handleChange:function(e){return Y("maxLogFolderSize",e)}})]})]})})}}})}();
