import{u as F,f as n,t as d,S as M,n as C,j as e,C as A,I as O,o as w,p as D,q as P,s as y,v as E,H as U,r as H,ak as W,w as V,B as I,al as X,m as $,g as z}from"./index-BHSjYlPs.js";import{F as K}from"./FilterList-FIjacPt8.js";import{q as N}from"./index-meQ0C4l3.js";import{t as Q}from"./Extensions.utils-V2-LMGpP.js";import{L as R}from"./ListCardAvatar-D5cNMM5K.js";import{S as _}from"./Switch-xY4-er_T.js";import{L as G}from"./ListItemAvatar-CB1c0XJs.js";const re=({selectedLanguages:p,setSelectedLanguages:k,languages:u,sources:l})=>{const{i18n:r,_:J}=F(),[c,m]=n.useState({}),[i,h]=n.useState(d(p)),[B,g]=n.useState(!1),T=n.useMemo(()=>M.groupByLanguage(l),[l]),x=n.useMemo(()=>d([...i.toSorted(C),...u.toSorted(C)]),[u,i]),S=()=>{g(!1),m({}),h(d(p))},b=()=>{g(!1),Promise.all(Object.entries(c).map(([t,s])=>X(l.find(o=>o.id===t),"isEnabled",s))).catch(t=>$(r._({id:"cBoXe4"}),"error",z(t))),m({}),k(d(i))},v=(t,s)=>{h(s?[...i,t]:i.toSpliced(i.indexOf(t),1))};return e.jsxs(e.Fragment,{children:[e.jsx(A,{title:r._({id:"Tz0i8g"}),children:e.jsx(O,{onClick:()=>g(!0),"aria-label":"display more actions",edge:"end",color:"inherit",children:e.jsx(K,{})})}),e.jsxs(w,{fullWidth:!0,maxWidth:"xs",open:B,onClose:S,children:[e.jsx(D,{children:r._({id:"tEL3Xq"})}),e.jsx(P,{dividers:!0,sx:{padding:0},children:e.jsx(N,{style:{height:x.length*54,minHeight:"25vh",maxHeight:"50vh"},data:x,increaseViewportBy:400,computeItemKey:t=>x[t],itemContent:(t,s)=>{var f;const o=(f=T[s])!=null?f:[],j=i.includes(s);return e.jsxs(e.Fragment,{children:[e.jsxs(y,{children:[e.jsx(E,{primary:Q(s)}),e.jsx(_,{checked:j,onChange:a=>v(s,a.target.checked)})]}),j&&!!o.length&&e.jsx(U,{sx:{ml:1},children:o.map(a=>{var L;return e.jsxs(y,{children:[e.jsx(G,{sx:{minWidth:32,mr:1},children:e.jsx(R,{iconUrl:H.getValidImgUrlFor(a.iconUrl),alt:a.name,slots:{avatarProps:{sx:{width:32,height:32}},spinnerImageProps:{ignoreQueue:!0}}})}),e.jsx(E,{primary:a.name}),e.jsx(_,{checked:(L=c[a.id])!=null?L:W(a).isEnabled,onChange:q=>m({...c,[a.id]:q.target.checked})})]},a.id)})})]})}})}),e.jsxs(V,{children:[e.jsx(I,{autoFocus:!0,onClick:S,color:"primary",children:r._({id:"dEgA5A"})}),e.jsx(I,{onClick:b,color:"primary",children:r._({id:"aP3N/0"})})]})]})]})};export{re as S};
