!function(){function t(e){return t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},t(e)}function e(e,n,r){return(n=function(e){var n=function(e,n){if("object"!=t(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var a=r.call(e,n||"default");if("object"!=t(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===n?String:Number)(e)}(e,"string");return"symbol"==t(n)?n:n+""}(n))in e?Object.defineProperty(e,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[n]=r,e}function n(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,a,o,i,l=[],u=!0,c=!1;try{if(o=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=o.call(n)).done)&&(l.push(r.value),l.length!==e);u=!0);}catch(t){c=!0,a=t}finally{try{if(!u&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(c)throw a}}return l}}(t,e)||function(t,e){if(t){if("string"==typeof t)return r(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function r(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}System.register(["./index-legacy-CeziNlv-.js","./EmptyViewAbsoluteCentered-legacy-Ox0H0oG4.js","./UpdateChecker-legacy-nPYEZIsM.js","./Virtuoso.util-legacy-Bt6-USN4.js","./ChapterCardMetadata-legacy-PKKkU1zB.js","./ChapterDownloadButton-legacy-B6LFmHaX.js","./ChapterDownloadRetryButton-legacy-CWnW6rNa.js","./ListCardContent-legacy-DVBm1KIu.js","./Card-legacy-g5lkNCl0.js","./CardActionArea-legacy-CStHnAWB.js","./Progress-legacy-DfTqqiss.js","./MUI.util-legacy-C7ed77k1.js","./ListCardAvatar-legacy-f5ctGSBt.js","./Avatar-legacy-DGF9pC7g.js","./Download-legacy-BpE0vwwC.js","./CardContent-legacy-DDaHxtZW.js"],(function(t,r){"use strict";var a,o,i,l,u,c,s,d,f,p,y,m,g,h,b,j,v,x,C,S,w,A,I,U,T,k,L,O,P;return{setters:[function(t){a=t.e,o=t.j,i=t._,l=t.A,u=t.L,c=t.o,s=t.u,d=t.a,f=t.r,p=t.h,y=t.i,m=t.T,g=t.G,h=t.bk,b=t.g},function(t){j=t.E},function(t){v=t.U},function(t){x=t.V,C=t.a,S=t.S,w=t.b},function(t){A=t.C,I=t.D},function(t){U=t.C,T=t.a},function(t){k=t.C},function(t){L=t.L},function(t){O=t.C},function(t){P=t.C},null,null,null,null,null,null],execute:function(){var r=a.memo((function(t){var e=t.chapter,n=e.manga;return o.jsx(O,{children:o.jsx(P,{component:u,to:l.reader.path(e.manga.id,e.sourceOrder),state:i.getReaderOpenChapterLocationState(e),sx:{color:function(t){return t.palette.text[e.isRead?"disabled":"primary"]}},children:o.jsxs(L,{sx:{justifyContent:"space-between"},children:[o.jsxs(c,{sx:{display:"flex",flexGrow:1,gap:1},children:[o.jsx(U,{mangaId:n.id,mangaTitle:n.title,thumbnailUrl:n.thumbnailUrl,thumbnailUrlLastFetched:n.thumbnailUrlLastFetched}),o.jsx(A,{title:n.title,secondaryText:e.name})]}),o.jsx(I,{chapterId:e.id}),o.jsx(k,{chapterId:e.id}),o.jsx(T,{chapterId:e.id,isDownloaded:e.isDownloaded})]})})})}));t("Updates",(function(){var t,l=s().t,u=d().appBarHeight,c=d(),A=c.setTitle,I=c.setAction,U=f.useGetRecentlyUpdatedChapters(void 0,{fetchPolicy:"cache-and-network",notifyOnNetworkStatusChange:!0}),T=U.data,k=U.loading,L=U.error,O=U.fetchMore,P=U.refetch,R=!(null==T||!T.chapters.pageInfo.hasNextPage),D=null==T?void 0:T.chapters.pageInfo.endCursor,E=null!==(t=null==T?void 0:T.chapters.nodes)&&void 0!==t?t:[],G=a.useMemo((function(){return Object.entries(i.groupByDate(E,"fetchedAt"))}),[E]),M=a.useMemo((function(){return G.map((function(t){return t[x.ITEMS].length}))}),[G]),_=x.useCreateGroupedComputeItemKey(M,a.useCallback((function(t){return G[t][x.GROUP]}),[G]),a.useCallback((function(t){return E[t].id}),[E])),F=a.useRef(null),B=n(a.useState(0),2),V=B[0],H=B[1];a.useLayoutEffect((function(){var t,e;H(null!==(t=null===(e=F.current)||void 0===e?void 0:e.clientHeight)&&void 0!==t?t:0)}),[F.current]);var K=f.useGetLastGlobalUpdateTimestamp({fetchPolicy:"cache-only"}).data,N=null==K?void 0:K.lastUpdateTimestamp.timestamp;a.useLayoutEffect((function(){return A(l("updates.title")),I(o.jsx(v,{})),function(){A(""),I(null)}}),[l,N]);var z=a.useCallback((function(){R&&O({variables:{offset:E.length}})}),[R,D]);return L?o.jsx(j,{message:l("global.error.label.failed_to_load_data"),messageExtra:p(L),retry:function(){return P().catch(y())}}):k||0!==E.length?o.jsxs(o.Fragment,{children:[o.jsx(m,{ref:F,sx:{position:"sticky",top:u,zIndex:g,backgroundColor:"background.default",marginLeft:"10px",paddingTop:function(t){return e({},t.breakpoints.up("sm"),{paddingTop:"6px"})}},children:l("library.settings.global_update.label.last_update",{date:N?h.format(+N):"-"})}),o.jsx(C,{heightToSubtract:V,components:{Footer:function(){return k?o.jsx(b,{usePadding:!0}):null}},overscan:.5*window.innerHeight,endReached:z,groupCounts:M,groupContent:function(t){return o.jsx(w,{isFirstItem:0===t,children:o.jsx(m,{variant:"h5",component:"h2",children:G[t][x.GROUP]})})},computeItemKey:_,itemContent:function(t){return o.jsx(S,{children:o.jsx(r,{chapter:E[t]})})}})]}):o.jsx(j,{message:l("updates.error.label.no_updates_available")})}))}}}))}();
