import{j as e,b as x,r as f,T as d,aV as k,u,l as C,bt as T,G as I,B as v,a as A,d as y,S as j,C as P,I as _,A as M,L as N,x as B,m as w,g as L,aF as G,f as U,n as D,i as R,k as S}from"./index-BjiAJMwJ.js";import{u as F}from"./useAppTitle-DVJH46DH.js";import{E as V}from"./EmptyViewAbsoluteCentered-BG01vTz6.js";import{a as H}from"./Asserts-B9U4WVql.js";import{S as O}from"./SpinnerImage-BMIy5vTx.js";import{M as q}from"./Metadata-0kw-gdJ2.js";import{I as z,b as m,u as K,a as Q,g as W,t as Y}from"./Extensions.utils-C5zR9A4A.js";import{M as J}from"./MUI.util-CEodEA2f.js";import{L as X}from"./ListCardContent-Cze7oEyu.js";import{S as Z}from"./StyledGroupItemWrapper-CErlBrQa.js";import{C as $}from"./Card-BYTjY99T.js";import{C as ee}from"./CardActionArea-BvyAdQFj.js";import{S as te}from"./Switch-gDa4_ZJb.js";import"./Refresh-DBvQFCkR.js";import"./Image-DuK5Z77O.js";import"./Strings-CAV0u705.js";import"./SwitchBase-vvWnSNDS.js";const ae=({name:r,pkgName:o,iconUrl:a,repo:t})=>e.jsxs(x,{sx:{alignItems:"center"},children:[e.jsx(O,{alt:r,src:f.getValidImgUrlFor(a),ignoreQueue:!0}),e.jsx(d,{variant:"h5",component:"h2",children:r}),e.jsx(d,{variant:"body2",color:"textSecondary",children:o.replace("eu.kanade.tachiyomi.extension.","")}),t&&e.jsx(d,{variant:"body2",color:"textSecondary",children:t})]}),h=({addDivider:r=!0,...o})=>{var a;return e.jsxs(e.Fragment,{children:[e.jsx(q,{...o,stackProps:{...o.stackProps,sx:{...(a=o.stackProps)==null?void 0:a.sx,flexDirection:"column-reverse",alignItems:"center",flexGrow:1,flexBasis:0}},titleProps:{...o.titleProps,variant:"body2"}}),r&&e.jsx(k,{orientation:"vertical",sx:{height:"25px"}})]})},se=({versionName:r,lang:o,isNsfw:a})=>{const{t}=u();return e.jsxs(x,{sx:{flexDirection:"row",justifyContent:"space-between",alignItems:"center"},children:[e.jsx(h,{title:t("global.label.version"),value:r}),e.jsx(h,{title:t("global.language.label.language"),value:C(o)}),a&&e.jsx(h,{title:t("extension.label.age_rating"),value:"18+",valueProps:{color:"error"}})]})},E=({pkgName:r,isInstalled:o,isObsolete:a,hasUpdate:t})=>{const s=T(),{t:i}=u(),n=W(o,a,t);return e.jsx(I,{sx:{px:1,flexGrow:1,flexBasis:0},children:e.jsx(v,{sx:{width:"100%",color:n===Q.OBSOLETE?"red":"inherit"},variant:"outlined",size:"large",onClick:async()=>{const c=t&&!a?m.UPDATE:m.UNINSTALL;try{await K(r,a,c),c===m.UNINSTALL&&s()}catch(g){}},children:i(z[n])})})},re=r=>{const{id:o,isConfigurable:a}=r,{t}=u(),{isEnabled:s}=A(r),i=y(r,n=>w(t("global.error.label.failed_to_save_changes"),"error",L(n)));return e.jsx(Z,{sx:{px:0},children:e.jsx($,{children:e.jsx(ee,{onClick:()=>i("isEnabled",!s),children:e.jsxs(X,{children:[e.jsx(d,{variant:"h6",component:"h3",sx:{flexGrow:1},children:Y(j.getLanguage(r))}),a&&e.jsx(P,{title:t("settings.title"),children:e.jsx(_,{component:N,to:M.sources.childRoutes.configure.path(o),color:"inherit",onClick:n=>n.stopPropagation(),...J.preventRippleProp(),children:e.jsx(B,{})})}),e.jsx(te,{checked:s})]})})})},o)},Le=()=>{var g;const{t:r}=u(),{pkgName:o}=G();F(r("source.extension_info.title"));const a=f.useGetExtension(o),t=f.useGetSourceList(),{extension:s}=(g=a.data)!=null?g:{},i=U.useMemo(()=>{var l;return(l=t.data)!=null&&l.sources?t.data.sources.nodes.filter(p=>p.extension.pkgName===(s==null?void 0:s.pkgName)).sort((p,b)=>D(j.getLanguage(p),j.getLanguage(b))):[]},[s==null?void 0:s.pkgName,t.data]),n=a.loading||t.loading,c=a.error||t.error;return n?e.jsx(R,{}):c?e.jsx(V,{message:r("global.error.label.failed_to_load_data"),messageExtra:L(a.error),retry:()=>{a.error&&a.refetch().catch(S()),t.error&&t.refetch().catch(S())}}):(H(s),e.jsxs(x,{sx:{gap:2},children:[e.jsx(ae,{...s}),e.jsx(se,{...s}),e.jsxs(x,{sx:{flexDirection:"row"},children:[e.jsx(E,{...s,isInstalled:!0,hasUpdate:!1}),s.hasUpdate&&e.jsx(E,{...s})]}),e.jsx(I,{sx:{px:1},children:i.map(l=>e.jsx(re,{...l},l.id))})]}))};export{Le as ExtensionInfo};
