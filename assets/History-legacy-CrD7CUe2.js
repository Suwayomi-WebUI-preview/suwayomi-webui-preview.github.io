System.register(["./index-legacy-BDtkv6-m.js","./Virtuoso.util-legacy-COFWWOjC.js","./ChapterDownloadRetryButton-legacy-CBTnZMlv.js","./Avatar-legacy-eEmWqeLs.js"],(function(e,t){"use strict";var n,a,r,o,s,i,l,u,c,d,h,f,g,m,p,x,j,y,b,C,v,R,I,w,O,L,P,S;return{setters:[function(e){n=e.i,a=e.j,r=e.C,o=e.a,s=e.ag,i=e.A,l=e.L,u=e.b,c=e.B,d=e.bP,h=e.bR,f=e.bS,g=e.R,m=e.u,p=e.g,x=e.r,j=e.E,y=e.n,b=e.o,C=e.T,v=e.m},function(e){R=e.V,I=e.a,w=e.S,O=e.b},function(e){L=e.C,P=e.a,S=e.b},null],execute:function(){var t=n.memo((function(e){var t=e.chapter,n=t.manga;return a.jsx(r,{children:a.jsx(o,{component:l,to:i.reader.path(t.manga.id,t.sourceOrder),state:s.getReaderOpenChapterLocationState(t),sx:{color:function(e){return e.palette.text[t.isRead?"disabled":"primary"]}},children:a.jsxs(u,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:1.5},children:[a.jsxs(c,{sx:{display:"flex",flexGrow:1},children:[a.jsx(L,{mangaId:n.id,mangaTitle:n.title,thumbnailUrl:n.thumbnailUrl,thumbnailUrlLastFetched:n.thumbnailUrlLastFetched}),a.jsx(d,{title:n.title,secondaryText:"".concat(t.name," â€” ").concat(h.format(f(Number(t.lastReadAt)).valueOf()))})]}),a.jsx(g,{chapterId:t.id}),a.jsx(P,{chapterId:t.id}),a.jsx(S,{chapterId:t.id,isDownloaded:t.isDownloaded})]})})})}));e("History",(function(){var e,r=m().t,o=p().setTitle,i=x.useGetRecentlyReadChapters(void 0,{fetchPolicy:"cache-and-network",notifyOnNetworkStatusChange:!0}),l=i.data,u=i.loading,c=i.error,d=i.fetchMore,h=i.refetch,f=!(null==l||!l.chapters.pageInfo.hasNextPage),g=null==l?void 0:l.chapters.pageInfo.endCursor,L=null!==(e=null==l?void 0:l.chapters.nodes)&&void 0!==e?e:[],P=n.useMemo((function(){return Object.entries(s.groupByDate(L,"lastReadAt"))}),[L]),S=n.useMemo((function(){return P.map((function(e){return e[R.ITEMS].length}))}),[P]),U=R.useCreateGroupedComputeItemKey(S,n.useCallback((function(e){return P[e][R.GROUP]}),[P]),n.useCallback((function(e){return L[e].id}),[L]));n.useLayoutEffect((function(){return o(r("history.title")),function(){o("")}}),[r]);var k=n.useCallback((function(){f&&d({variables:{offset:L.length}})}),[f,g]);return c?a.jsx(j,{message:r("global.error.label.failed_to_load_data"),messageExtra:y(c),retry:function(){return h().catch(b())}}):u||0!==L.length?a.jsx(I,{style:{height:"undefined"},components:{Footer:function(){return u?a.jsx(v,{usePadding:!0}):null}},overscan:.5*window.innerHeight,endReached:k,groupCounts:S,groupContent:function(e){return a.jsx(O,{isFirstItem:0===e,children:a.jsx(C,{variant:"h5",component:"h2",children:P[e][R.GROUP]})})},computeItemKey:U,itemContent:function(e){return a.jsx(w,{children:a.jsx(t,{chapter:L[e]})})}}):a.jsx(j,{message:r("history.error.label.no_history_available")})}))}}}));
