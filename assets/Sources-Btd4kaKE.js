var v=Object.defineProperty;var E=(t,e,a)=>e in t?v(t,e,{enumerable:!0,configurable:!0,writable:!0,value:a}):t[e]=a;var S=(t,e,a)=>E(t,typeof e!="symbol"?e+"":e,a);import{bn as m,i as M,z as C,e as l,F as P,E as b,D as u,bm as A,bk as D,aB as N,bl as y}from"./index-B9sXdsff.js";const B={savedSearches:void 0,isPinned:!1,isEnabled:!0},L=t=>({...t,savedSearches:t.savedSearches?JSON.stringify(t.savedSearches):void 0}),U=t=>{var e;return{...t,savedSearches:(e=C(t.savedSearches))!=null?e:void 0}},f=(t,e)=>U(P("source",{...t,meta:b(t.meta)},L(B),void 0,e)),g=t=>f(t),q=t=>{const e=f(t,l.useEffect);return l.useMemo(()=>e,[t])},h=async(t,e,a)=>m(t,[[e,L({[e]:a})[e]]]),x=(t,e=M())=>(a,o)=>h(t,a,o).catch(e),s=class s{static isLocalSource(e){return e.id===s.LOCAL_SOURCE_ID}static getLanguage(e){return s.isLocalSource(e)?u.OTHER:e.lang}static getLanguages(e){return[...new Set(e.map(s.getLanguage))]}static groupByLanguage(e){const a=Object.groupBy(e,i=>g(i).isPinned?u.PINNED:s.getLanguage(i)),n=Object.entries(a).toSorted(([i],[c])=>{const d=i===u.PINNED,r=c===u.PINNED;return d?-1:r?1:A(i,c)}).map(([i,c])=>[i,(c!=null?c:[]).toSorted((d,r)=>d.displayName.localeCompare(r.displayName))]);return Object.fromEntries(n)}static filter(e,{showNsfw:a,languages:o,keepLocalSource:n,pinned:i,enabled:c}={}){const d=D(N(o!=null?o:[]));return e.filter(r=>a===void 0||a||!r.isNsfw||n&&s.isLocalSource(r)).filter(r=>!o||d.includes(y(s.getLanguage(r)))||n&&s.isLocalSource(r)).filter(r=>i===void 0||!i||g(r).isPinned||n&&s.isLocalSource(r)).filter(r=>c===void 0||!c||g(r).isEnabled||n&&s.isLocalSource(r))}static areFromMultipleRepos(e){var o;const a=(o=e.find(n=>!!n.extension.repo))==null?void 0:o.extension.repo;return!a||!e.length?!1:e.some(n=>n.extension.repo!==a&&!s.isLocalSource(n))}static getLastUsedSource(e,a){return a.find(o=>o.id===e)}};S(s,"LOCAL_SOURCE_ID","0");let p=s;export{p as S,x as c,g,q as u};
