import{b2 as f,a as _,aA as w,b1 as T,b3 as k,c as b,y as R,X as C,j as e,B as S,n as P,u as L,l as D,au as u,a0 as p,_ as x}from"./index-iYBf07xu.js";import{N as H}from"./NumberSetting-DWyeHZNp.js";import{S as M}from"./SpinnerImage-rh6L9MsI.js";import{S as W}from"./Select-DN5XInwK.js";import{S as m}from"./Switch-CQM43pyM.js";const N=()=>({staticNav:!1,showPageNumber:!0,loadNextOnEnding:!1,skipDupChapters:!0,fitPageToWindow:!0,scalePage:!1,readerType:"ContinuesVertical",offsetFirstPage:!1,readerWidth:50}),j=(t,i=N(),s=!0)=>k({meta:t},i,s),z=(t,i,s)=>j(t,i,s),E=({meta:t}={},i,s)=>z(f(t),i,s),A=()=>{const t=_.useGetGlobalMeta({notifyOnNetworkStatusChange:!0}),{data:i,loading:s}=t,o=f(i==null?void 0:i.metas.nodes),l=j(o);return{metadata:o,settings:l,loading:s,request:t}},B=async(t,i,s)=>{const o=()=>Array.isArray(t)?t:t.meta,l=f(o()),r=j(l,{staticNav:void 0,showPageNumber:void 0,loadNextOnEnding:void 0,skipDupChapters:void 0,fitPageToWindow:void 0,scalePage:void 0,readerType:void 0,offsetFirstPage:void 0,readerWidth:void 0},!1),c=E({meta:o()},s),g=Object.entries(r).filter(h=>h[1]===void 0),d=[];if(g.forEach(h=>{const a=h[0];d.push([a,c[a]])}),!!g.length){if(i==="manga"){await w(t,d);return}await T(d)}},y=t=>["ContinuesHorizontalLTR","ContinuesHorizontalRTL"].includes(t);function F(t){const i=t.readerType==="ContinuesVertical",s=y(t.readerType),[o,l]=b.useState(0);P(document.documentElement,b.useCallback(()=>l(window.innerHeight-document.documentElement.clientHeight),[]));const r={margin:0,width:"".concat(t.readerWidth,"%"),objectFit:"contain"},c={marginBottom:"15px"},g={width:void 0,minHeight:"calc(100vh - ".concat(o,"px)"),maxHeight:"calc(100vh - ".concat(o,"px)"),marginLeft:"7px",marginRight:"7px"},d={width:void 0,height:void 0,minWidth:t.scalePage?"calc(100vw - (100vw - 100%))":void 0,maxWidth:"calc(100vw - (100vw - 100%))",minHeight:t.scalePage?"calc(100vh - ".concat(o,"px)"):void 0,maxHeight:"calc(100vh - ".concat(o,"px)")};return{...r,...s?g:void 0,...i?c:void 0,...t.fitPageToWindow&&!s?d:void 0}}const G=b.forwardRef((t,i)=>{const{src:s,index:o,onImageLoad:l,settings:r}=t,c=R(),g=C(c.breakpoints.down("md")),d=F(r),h=["DoubleRTL","DoubleLTR"].includes(r.readerType);return e.jsx(S,{ref:i,sx:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",minWidth:h?"100%":void 0},children:e.jsx(M,{src:s,onImageLoad:l,alt:"Page #".concat(o),spinnerStyle:{...d,height:"100vh",width:g?"100vw":y(r.readerType)?"50vw":"calc(100% * 0.5)",backgroundColor:"#525252"},imgStyle:d})})});function Q({staticNav:t,loadNextOnEnding:i,readerType:s,showPageNumber:o,skipDupChapters:l,setSettingValue:r,fitPageToWindow:c,scalePage:g,offsetFirstPage:d,readerWidth:h}){const{t:a}=L(),v=!y(s);return e.jsxs(D,{sx:{pt:0},children:[e.jsxs(u,{children:[e.jsx(p,{primary:a("reader.settings.label.static_navigation")}),e.jsx(m,{edge:"end",checked:t,onChange:n=>r("staticNav",n.target.checked)})]}),e.jsxs(u,{children:[e.jsx(p,{primary:a("reader.settings.label.show_page_number")}),e.jsx(m,{edge:"end",checked:o,onChange:n=>r("showPageNumber",n.target.checked)})]}),e.jsxs(u,{children:[e.jsx(p,{primary:a("reader.settings.label.load_next_chapter")}),e.jsx(m,{edge:"end",checked:i,onChange:n=>r("loadNextOnEnding",n.target.checked)})]}),e.jsxs(u,{children:[e.jsx(p,{primary:a("reader.settings.label.skip_dup_chapters")}),e.jsx(m,{edge:"end",checked:l,onChange:n=>r("skipDupChapters",n.target.checked)})]}),v&&e.jsxs(u,{children:[e.jsx(p,{primary:a("reader.settings.label.fit_page_to_window")}),e.jsx(m,{edge:"end",checked:c,onChange:n=>r("fitPageToWindow",n.target.checked)})]}),v&&c&&e.jsxs(u,{children:[e.jsx(p,{primary:a("reader.settings.label.scale_page")}),e.jsx(m,{edge:"end",checked:g,onChange:n=>r("scalePage",n.target.checked)})]}),(s==="DoubleLTR"||s==="DoubleRTL")&&e.jsxs(u,{children:[e.jsx(p,{primary:a("reader.settings.label.offset_first_page")}),e.jsx(m,{edge:"end",checked:d,onChange:n=>r("offsetFirstPage",n.target.checked)})]}),v&&!c&&e.jsx(H,{settingTitle:a("reader.settings.label.reader_width"),settingValue:"".concat(h,"%"),value:h,minValue:10,maxValue:100,defaultValue:50,valueUnit:"%",showSlider:!0,handleUpdate:n=>r("readerWidth",n),handleLiveUpdate:n=>r("readerWidth",n,!1),listItemTextSx:{display:"flex",alignItems:"center",justifyContent:"space-between"}}),e.jsxs(u,{children:[e.jsx(p,{primary:a("reader.settings.label.reader_type")}),e.jsxs(W,{variant:"standard",value:s,onChange:n=>r("readerType",n.target.value),sx:{p:0},children:[e.jsx(x,{value:"SingleLTR",children:a("reader.settings.reader_type.label.single_page_ltr")}),e.jsx(x,{value:"SingleRTL",children:a("reader.settings.reader_type.label.single_page_rtl")}),e.jsx(x,{value:"DoubleLTR",children:a("reader.settings.reader_type.label.double_page_ltr")}),e.jsx(x,{value:"DoubleRTL",children:a("reader.settings.reader_type.label.double_page_rtl")}),e.jsx(x,{value:"Webtoon",children:a("reader.settings.reader_type.label.webtoon")}),e.jsx(x,{value:"ContinuesVertical",children:a("reader.settings.reader_type.label.continuous_vertical")}),e.jsx(x,{value:"ContinuesHorizontalLTR",children:a("reader.settings.reader_type.label.continuous_horizontal_ltr")}),e.jsx(x,{value:"ContinuesHorizontalRTL",children:a("reader.settings.reader_type.label.continuous_horizontal_rtl")})]})]})]})}export{G as P,Q as R,N as a,B as c,E as g,F as i,A as u};
