import{D as r,al as b,aA as h,aB as P,aC as d,aD as B,U as p,aE as C,u as f,e as D,aF as _,j as s,C as j,I as G,l as y,n as R,o as v,aG as k,at as F,a1 as K,B as m}from"./index-jpRqaJdL.js";import{F as M}from"./FilterList-66AL4OR2.js";import{K as H}from"./index-DHze8ium.js";import{S as X}from"./Switch-DquRehAV.js";var o=(e=>(e.UPDATE="UPDATE",e.UNINSTALL="UNINSTALL",e.INSTALL="INSTALL",e))(o||{}),g=(e=>(e.OBSOLETE="OBSOLETE",e.UPDATING="UPDATING",e.UNINSTALLING="UNINSTALLING",e.INSTALLING="INSTALLING",e))(g||{});const i={...o,...g};var l=(e=>(e.INSTALLED="INSTALLED",e.UPDATE_PENDING="UPDATE_PENDING",e.OBSOLETE="OBSOLETE",e))(l||{});const Z={[o.UPDATE]:g.UPDATING,[o.UNINSTALL]:g.UNINSTALLING,[o.INSTALL]:g.INSTALLING},$={[o.UPDATE]:o.UNINSTALL,[o.UNINSTALL]:o.INSTALL,[o.INSTALL]:o.UNINSTALL},ee={[i.UNINSTALL]:"extension.action.label.uninstall",[i.INSTALL]:"extension.action.label.install",[i.UPDATE]:"extension.action.label.update",[i.OBSOLETE]:"extension.state.label.obsolete",[i.UPDATING]:"extension.state.label.updating",[i.UNINSTALLING]:"extension.state.label.uninstalling",[i.INSTALLING]:"extension.state.label.installing"},te={[o.UPDATE]:"extension.label.update_failed",[o.INSTALL]:"extension.label.installation_failed",[o.UNINSTALL]:"extension.label.uninstallation_failed"},w={[l.INSTALLED]:"extension.state.label.installed",[l.UPDATE_PENDING]:"extension.state.label.update_pending",[l.OBSOLETE]:"extension.state.label.obsolete",[r.ALL]:"extension.language.all",[r.OTHER]:"extension.language.other",[r.LOCAL_SOURCE]:"extension.language.other",[r.PINNED]:"global.label.pinned",[r.LAST_USED_SOURCE]:"global.label.last_used"},ae=(e,n,L)=>n?i.OBSOLETE:L?i.UPDATE:e?i.UNINSTALL:i.INSTALL,W=e=>[l.INSTALLED,l.UPDATE_PENDING,l.OBSOLETE].includes(e),Y=e=>W(e)||[r.ALL,r.OTHER,r.LOCAL_SOURCE,r.PINNED,r.LAST_USED_SOURCE].includes(e),z=e=>Y(e)?b(w[e]):h(e);function ne(e){const n=Object.groupBy(e,a=>a.isInstalled?a.hasUpdate?l.UPDATE_PENDING:a.isObsolete?l.OBSOLETE:l.INSTALLED:a.lang);return Object.entries(n).toSorted(([a],[t])=>{const T=Object.values(l),N=T.includes(a),E=l.OBSOLETE===a,S=l.UPDATE_PENDING===a,u=T.includes(t),O=l.OBSOLETE===t,U=l.UPDATE_PENDING===t;return E||N&&!u||S&&!O?-1:O||!N&&u||!S&&U?1:C(a,t)}).map(([a,t])=>[a,(t!=null?t:[]).toSorted((T,N)=>T.name.localeCompare(N.name))]).filter(([,a])=>!!a.length)}const se=e=>[...new Set(e.map(n=>n.lang))],le=(e,{selectedLanguages:n,showNsfw:L,query:c}={})=>{const a=P(d(n!=null?n:[]));return e.filter(t=>!n||a.includes(B(t.lang))||t.isInstalled).filter(t=>L===void 0||L||!t.isNsfw).filter(t=>c==null||p(t.name).includes(p(c)))};function oe(e){const{t:n}=f(),{selectedLanguages:L,setSelectedLanguages:c,languages:a}=e,[t,T]=D.useState(d(L)),[N,E]=D.useState(!1),S=D.useMemo(()=>d([...t.toSorted(_),...a.toSorted(_)]),[a,t]),u=()=>{E(!1),T(d(L))},O=()=>{E(!1),c(d(t))},U=(A,I)=>{T(I?[...t,A]:t.toSpliced(t.indexOf(A),1))};return s.jsxs(s.Fragment,{children:[s.jsx(j,{title:n("settings.title"),children:s.jsx(G,{onClick:()=>E(!0),"aria-label":"display more actions",edge:"end",color:"inherit",children:s.jsx(M,{})})}),s.jsxs(y,{fullWidth:!0,maxWidth:"xs",open:N,onClose:u,children:[s.jsx(R,{children:n("global.language.title.enabled_languages")}),s.jsx(v,{dividers:!0,sx:{padding:0},children:s.jsx(H,{style:{height:S.length*54,minHeight:"25vh",maxHeight:"50vh"},data:S,increaseViewportBy:400,computeItemKey:A=>S[A],itemContent:(A,I)=>s.jsxs(k,{children:[s.jsx(F,{primary:z(I)}),s.jsx(X,{checked:t.includes(I),onChange:x=>U(I,x.target.checked)})]})})}),s.jsxs(K,{children:[s.jsx(m,{autoFocus:!0,onClick:u,color:"primary",children:n("global.button.cancel")}),s.jsx(m,{onClick:O,color:"primary",children:n("global.button.ok")})]})]})]})}export{g as E,ee as I,oe as L,i as a,o as b,Z as c,$ as d,te as e,se as f,ae as g,le as h,ne as i,l as j,z as t};
