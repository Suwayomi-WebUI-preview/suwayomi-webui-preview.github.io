var Ar=Object.defineProperty;var br=(e,t,r)=>t in e?Ar(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;var We=(e,t,r)=>br(e,typeof t!="symbol"?t+"":t,r);import{r as X,f as E,bJ as lt,dG as y,bI as yr,dH as fe,dI as Ir,bH as Or,dJ as Qt,dK as Cr,dL as jr,ds as Dr,j as i,H as J,b3 as P,dM as pe,c2 as W,dN as ae,dO as H,c1 as ee,a6 as dt,dP as Y,dQ as N,dR as C,ak as ue,dS as wr,bF as le,aX as Be,dT as we,bx as Me,dU as er,dV as Mr,dW as ft,dX as Lr,k as pt,e as Nr,dY as xt,dZ as Ur,d_ as mt,bl as $r,m as St,g as vt,G as Et,d$ as B,cR as Br,h as kr,A as Gr,e0 as xe,b as v,T as b,u as m,B as te,C as ke,e1 as tr,e2 as rr,e3 as Fr,e4 as Vr,e5 as oe,e6 as Hr,e7 as zr,e8 as Wr,c as ce,I as nr,e9 as Ye,ay as Yr,ea as sr,eb as me,ec as Ke,ed as Kr,ee as _e,ef as M,eg as Xr,eh as Zr,ei as Jr,ej as qr,ek as he,el as Xe,Y as Qr,em as en,o as tn,p as rn,q as nn,cC as sn,w as on,cs as an,aA as cn,en as w,eo as ln,ep as Rt,eq as de}from"./index-ChwTeEsl.js";import{T as dn}from"./TabsMenu-Cb-vMwYR.js";import{a as F}from"./Chapters-BwBqMYka.js";import{a as un,G as Tt,F as Pt}from"./Mangas-BAjrFXCq.js";import{S as _n}from"./SpinnerImage-CwT1u4HC.js";import{r as hn}from"./Strings-CAV0u705.js";import{T as gn,a as se}from"./Tabs-BIJQ7TcH.js";import{S as fn}from"./Slider-BM2C_8xC.js";import{C as O}from"./CheckboxInput-C_VIPzi0.js";import{L as pn}from"./ListSubheader-CE7T6ljJ.js";import{A as xn}from"./Add-BKLBqsiu.js";const or=(e,t,r)=>{var a;const n=jr(),s=n===Dr,o=Object.keys((a=r.meta)!=null?a:{}).filter(l=>{var d;return s?((d=l.match(/_/g))==null?void 0:d.length)===1:l.startsWith("".concat(Cr,"_").concat(n,"_"))}).map(l=>Qt(l));return Object.fromEntries(Object.entries(t).map(([l,d])=>{if(fe.includes(l))return[l,d];const u=e==="manga"&&!o.includes(l);return[l,{value:d,isDefault:u}]}))},et=e=>({...e,tapZoneInvertMode:JSON.stringify(e.tapZoneInvertMode),customFilter:JSON.stringify(e.customFilter),readerWidth:JSON.stringify(e.readerWidth),hotkeys:JSON.stringify(e.hotkeys),autoScroll:JSON.stringify(e.autoScroll)}),At=or("global",y,{meta:et(y)}),ir=(e,t,r=y,n,s)=>yr(e,t,r,s!==void 0?[s.toString()]:void 0,n);function ar(e,t,r=y,n,s){const o=ir(e,t,r,n,s);return or(e,o,t)}const mn=(e,t,r,n)=>ar("manga",{...e,meta:lt(e.meta,s=>!fe.includes(Qt(s)))},t,r,n),ti=(e,t)=>mn(e,t),ri=e=>{const t=X.useGetGlobalMeta({notifyOnNetworkStatusChange:!0}),{data:r,loading:n}=t,s=E.useMemo(()=>lt(r==null?void 0:r.metas.nodes),[r==null?void 0:r.metas.nodes]),o=E.useMemo(()=>({meta:s}),[s]),c=ir("global",o,void 0,E.useEffect,e),a=E.useMemo(()=>c,[o,e]);return E.useMemo(()=>({metadata:s,settings:a,loading:n,request:t}),[s,a,n,t])},Sn=e=>{const t=X.useGetGlobalMeta({notifyOnNetworkStatusChange:!0}),{data:r,loading:n}=t,s=E.useMemo(()=>lt(r==null?void 0:r.metas.nodes),[r==null?void 0:r.metas.nodes]),o=E.useMemo(()=>({meta:s}),[s]),c=ar("global",o,void 0,E.useEffect,e),a=E.useMemo(()=>c,[o,e]);return E.useMemo(()=>({metadata:s,settings:a,loading:n,request:t}),[s,a,n,t])},vn=async(e,t,r,n=!1,s)=>n||fe.includes(t)?Ir([[t,et({[t]:r})[t]]],s!==void 0?[s==null?void 0:s.toString()]:void 0):Or(e,[[t,et({[t]:r})[t]]],s!==void 0?[s==null?void 0:s.toString()]:void 0),bt=e=>e===W.END?Number.MAX_SAFE_INTEGER:-1,En=({currentPageIndex:e,pages:t,transitionPageMode:r,imageRefs:n,createPage:s,slots:o,readingMode:c,imagePreLoadAmount:a,isCurrentChapter:l,isPreviousChapter:d,isNextChapter:_,customFilter:u,pageScaleMode:g,shouldStretchPage:h,readerWidth:S,readerNavBarWidth:p,resumeMode:x,handleAsInitialRender:f,ref:T})=>{var L,D,k,K;const R=E.useRef(bt(x));f&&(R.current=bt(x));const A=E.useMemo(()=>As(e,t,R.current,a,c,l,d,_),[e,t,a,c,l,d,_]);E.useEffect(()=>{l&&(R.current=e)},[A,l]);const I=E.useCallback((ze,be)=>{n.current[ze]=be},[n]);return i.jsx(J,{ref:T,...o==null?void 0:o.boxProps,sx:[{width:"fit-content",height:"fit-content"},...Array.isArray((L=o==null?void 0:o.boxProps)==null?void 0:L.sx)?(k=(D=o==null?void 0:o.boxProps)==null?void 0:D.sx)!=null?k:[]:[(K=o==null?void 0:o.boxProps)==null?void 0:K.sx],P(!q(c)&&bs(r,c),{visibility:"hidden",width:0,height:0,m:0,p:0})],children:t.map((ze,be)=>s(ze,be,A.includes(be),[pe.NONE,pe.BOTH].includes(r),I,c,u,g,h,S,p))})},Ge=E.memo(En),Rn=({onLoad:e,onError:t,pageLoadStates:r,retryFailedPagesKeyPrefix:n,isPreloadMode:s,...o})=>{const{currentPageIndex:c,totalPages:a}=o;return i.jsx(Ge,{...o,createPage:(l,d,_,u,g,...h)=>Te(l,d,!0,r[l.primary.index].loaded,s,e,t,_,u&&_&&c===l.primary.index,c,a,...h,r[l.primary.index].error?n:void 0),slots:{boxProps:{sx:{margin:"auto"}}}})},Tn=E.memo(Rn),ut=(e,t)=>{const r=t.findIndex(({primary:s,secondary:o})=>[s.index,o==null?void 0:o.index].includes(e));return{...t[ae(r,0,t.length-1)],pagesIndex:r}},cr=e=>{var t,r;return(r=(t=e.secondary)==null?void 0:t.index)!=null?r:e.primary.index},ni=(e,t,r)=>{const n=e==="previous"?ee.PREVIOUS:ee.NEXT;return cr(r[ae(t+n,0,r.length-1)])},si=(e,t,r,n,s,o)=>{const c=n?e.clientX:e.clientY,{paddingTop:a,paddingBottom:l,paddingLeft:d,paddingRight:_}=getComputedStyle(t),u=t.getBoundingClientRect(),g=n?parseFloat(d)+parseFloat(_):parseFloat(a)+parseFloat(l),h=n?u.left:u.top,p=(n?u.width:u.height)-g,x=c-h-g/2,f=r.length-+!s,T=p/f,R=Math.floor(x/T),A=(R+(s?1:.5))*T,I=x<=A?R:R+1,L=Math.max(0,I),D=Math.min(L,r.length-1),k=o(D,r.length-1-D);return r[k]},oi=e=>{const t=e===H.BOTTOM,r=e===H.LEFT,n=e===H.RIGHT;return{isBottom:t,isLeft:r,isRight:n,isHorizontal:t,isVertical:r||n}},yt=(e,t,r)=>{const n=r===Y.LTR;return e==="first"?t==="ltr"?n?"right":"left":n?"left":"right":t==="ltr"?n?"left":"right":n?"right":"left"},Pn=({onLoad:e,onError:t,pageLoadStates:r,retryFailedPagesKeyPrefix:n,isPreloadMode:s,...o})=>{const{currentPageIndex:c,pages:a,totalPages:l,readingDirection:d,pageScaleMode:_}=o,{direction:u}=dt(),g=E.useMemo(()=>ut(c,a),[c,a]),h=d===Y.LTR;return i.jsx(Ge,{...o,createPage:(S,p,x,f,T,...R)=>{const{primary:A,secondary:I}=S,L=cr(g),D=!!I,k=g.primary.index===A.index,K=!!I&&L===I.index;return i.jsxs(E.Fragment,{children:[Te(S,p,!0,r[A.index].loaded,s,e,t,x,f&&k&&x,g.primary.index,l,...R,r[A.index].error?n:void 0,D?yt("first",u,d):void 0,D),D&&Te({...S,primary:{...S.secondary}},p,!1,r[I.index].loaded,s,e,t,x,f&&K&&x,L,l,...R,r[I.index].error?n:void 0,yt("second",u,d),!0)]},"".concat(A.url,"_").concat(I==null?void 0:I.url))},slots:{boxProps:{sx:{...P(_===N.ORIGINAL,{margin:"auto"}),width:"100%",minWidth:"fit-content",height:"100%",minHeight:"fit-content",display:"flex",flexDirection:"row",flexWrap:"nowrap",...P(u==="ltr",{flexDirection:h?"row":"row-reverse"}),...P(u==="rtl",{flexDirection:h?"row-reverse":"row"})}}}})},An=E.memo(Pn),bn=({onLoad:e,onError:t,pageLoadStates:r,retryFailedPagesKeyPrefix:n,isPreloadMode:s,...o})=>{const{currentPageIndex:c,totalPages:a,readingMode:l,pageGap:d}=o,u=l===C.WEBTOON?0:d;return i.jsx(Ge,{...o,createPage:(g,h,S,p,x,...f)=>Te(g,h,!0,r[g.primary.index].loaded,s,e,t,S||r[g.primary.index].loaded,!s,c,a,...f,r[g.primary.index].error?n:void 0,void 0,void 0,g.primary.index!==0?u:0,x),slots:{boxProps:{sx:{margin:"auto"}}}})},yn=E.memo(bn),In=({onLoad:e,onError:t,pageLoadStates:r,retryFailedPagesKeyPrefix:n,isPreloadMode:s,...o})=>{const{currentPageIndex:c,totalPages:a,pageGap:l,readingDirection:d}=o,{direction:_}=dt(),u=d===Y.LTR;return i.jsx(Ge,{...o,createPage:(g,h,S,p,x,...f)=>Te(g,h,!0,r[g.primary.index].loaded,s,e,t,S||r[g.primary.index].loaded,!s,c,a,...f,r[g.primary.index].error?n:void 0,void 0,void 0,void 0,x),slots:{boxProps:{sx:{my:"auto",display:"flex",flexWrap:"nowrap",alignItems:"center",gap:"".concat(l,"px"),...P(_==="ltr",{flexDirection:u?"row":"row-reverse",justifyContent:u?"flex-start":"flex-end"}),...P(_==="rtl",{flexDirection:u?"row-reverse":"row",justifyContent:u?"flex-end":"flex-start"})}}}})},On=E.memo(In),Cn=e=>e===C.DOUBLE_PAGE,_t=e=>[N.WIDTH,N.SCREEN].includes(e),ii=e=>_t(e),ai=e=>[N.HEIGHT,N.SCREEN].includes(e),lr=(e,t)=>!!(e!=null&&e.enabled)&&_t(t),jn=(e,t)=>{if(lr(e,t))return e==null?void 0:e.value},q=e=>[C.CONTINUOUS_VERTICAL,C.CONTINUOUS_HORIZONTAL,C.WEBTOON].includes(e),De=e=>[C.CONTINUOUS_VERTICAL,C.WEBTOON].includes(e),ci=(e,t,r)=>t&&r.isDefault&&un.isLongStripType(e),li=e=>{switch(e){case C.SINGLE_PAGE:return Tn;case C.DOUBLE_PAGE:return An;case C.CONTINUOUS_VERTICAL:case C.WEBTOON:return yn;case C.CONTINUOUS_HORIZONTAL:return On;default:throw new Error('Unexpected "ReadingMode" ('.concat(e,")"))}},di=(e,t,r=0,n=0)=>e!==H.AUTO?e:window.innerHeight-r>window.innerWidth-n?t:H.BOTTOM,It=e=>{let t;const r=new Set,n=(d,_)=>{const u=typeof d=="function"?d(t):d;if(!Object.is(u,t)){const g=t;t=(_!=null?_:typeof u!="object"||u===null)?u:Object.assign({},t,u),r.forEach(h=>h(t,g))}},s=()=>t,a={setState:n,getState:s,getInitialState:()=>l,subscribe:d=>(r.add(d),()=>r.delete(d))},l=t=e(n,s,a);return a},Dn=e=>e?It(e):It,wn=e=>e;function Mn(e,t=wn){const r=ue.useSyncExternalStore(e.subscribe,ue.useCallback(()=>t(e.getState()),[e,t]),ue.useCallback(()=>t(e.getInitialState()),[e,t]));return ue.useDebugValue(r),r}const Ot=e=>{const t=Dn(e),r=n=>Mn(t,n);return Object.assign(r,t),r},Ln=e=>e?Ot(e):Ot,Ct={BASE_URL:"./",DEV:!1,LEGACY:!1,MODE:"production",PROD:!0,SSR:!1,VITE_SERVER_URL_DEFAULT:"http://localhost:4567"},Se=new Map,ye=e=>{const t=Se.get(e);return t?Object.fromEntries(Object.entries(t.stores).map(([r,n])=>[r,n.getState()])):{}},Nn=(e,t,r)=>{if(e===void 0)return{type:"untracked",connection:t.connect(r)};const n=Se.get(r.name);if(n)return{type:"tracked",store:e,...n};const s={connection:t.connect(r),stores:{}};return Se.set(r.name,s),{type:"tracked",store:e,...s}},Un=(e,t)=>{if(t===void 0)return;const r=Se.get(e);r&&(delete r.stores[t],Object.keys(r.stores).length===0&&Se.delete(e))},$n=e=>{var t,r;if(!e)return;const n=e.split("\n"),s=n.findIndex(c=>c.includes("api.setState"));if(s<0)return;const o=((t=n[s+1])==null?void 0:t.trim())||"";return(r=/.+ (.+) .+/.exec(o))==null?void 0:r[1]},Bn=(e,t={})=>(r,n,s)=>{const{enabled:o,anonymousActionType:c,store:a,...l}=t;let d;try{d=(o!=null?o:(Ct?"production":void 0)!=="production")&&window.__REDUX_DEVTOOLS_EXTENSION__}catch(p){}if(!d)return e(r,n,s);const{connection:_,...u}=Nn(a,d,l);let g=!0;s.setState=(p,x,f)=>{const T=r(p,x);if(!g)return T;const R=f===void 0?{type:c||$n(new Error().stack)||"anonymous"}:typeof f=="string"?{type:f}:f;return a===void 0?(_==null||_.send(R,n()),T):(_==null||_.send({...R,type:"".concat(a,"/").concat(R.type)},{...ye(l.name),[a]:s.getState()}),T)},s.devtools={cleanup:()=>{_&&typeof _.unsubscribe=="function"&&_.unsubscribe(),Un(l.name,a)}};const h=(...p)=>{const x=g;g=!1,r(...p),g=x},S=e(s.setState,n,s);if(u.type==="untracked"?_==null||_.init(S):(u.stores[u.store]=s,_==null||_.init(Object.fromEntries(Object.entries(u.stores).map(([p,x])=>[p,p===u.store?S:x.getState()])))),s.dispatchFromDevtools&&typeof s.dispatch=="function"){let p=!1;const x=s.dispatch;s.dispatch=(...f)=>{(Ct?"production":void 0)!=="production"&&f[0].type==="__setState"&&!p&&(console.warn('[zustand devtools middleware] "__setState" action type is reserved to set state from the devtools. Avoid using it.'),p=!0),x(...f)}}return _.subscribe(p=>{var x;switch(p.type){case"ACTION":if(typeof p.payload!="string"){console.error("[zustand devtools middleware] Unsupported action format");return}return Ze(p.payload,f=>{if(f.type==="__setState"){if(a===void 0){h(f.state);return}Object.keys(f.state).length!==1&&console.error('\n                    [zustand devtools middleware] Unsupported __setState action format.\n                    When using \'store\' option in devtools(), the \'state\' should have only one key, which is a value of \'store\' that was passed in devtools(),\n                    and value of this only key should be a state object. Example: { "type": "__setState", "state": { "abc123Store": { "foo": "bar" } } }\n                    ');const T=f.state[a];if(T==null)return;JSON.stringify(s.getState())!==JSON.stringify(T)&&h(T);return}s.dispatchFromDevtools&&typeof s.dispatch=="function"&&s.dispatch(f)});case"DISPATCH":switch(p.payload.type){case"RESET":return h(S),a===void 0?_==null?void 0:_.init(s.getState()):_==null?void 0:_.init(ye(l.name));case"COMMIT":if(a===void 0){_==null||_.init(s.getState());return}return _==null?void 0:_.init(ye(l.name));case"ROLLBACK":return Ze(p.state,f=>{if(a===void 0){h(f),_==null||_.init(s.getState());return}h(f[a]),_==null||_.init(ye(l.name))});case"JUMP_TO_STATE":case"JUMP_TO_ACTION":return Ze(p.state,f=>{if(a===void 0){h(f);return}JSON.stringify(s.getState())!==JSON.stringify(f[a])&&h(f[a])});case"IMPORT_STATE":{const{nextLiftedState:f}=p.payload,T=(x=f.computedStates.slice(-1)[0])==null?void 0:x.state;if(!T)return;h(a===void 0?T:T[a]),_==null||_.send(null,f);return}case"PAUSE_RECORDING":return g=!g}return}}),S},kn=Bn,Ze=(e,t)=>{let r;try{r=JSON.parse(e)}catch(n){console.error("[zustand devtools middleware] Could not parse the received json",n)}r!==void 0&&t(r)};var dr=Symbol.for("immer-nothing"),jt=Symbol.for("immer-draftable"),U=Symbol.for("immer-state");function V(e,...t){throw new Error("[Immer] minified error nr: ".concat(e,". Full error at: https://bit.ly/3cXEKWf"))}var ve=Object.getPrototypeOf;function ie(e){return!!e&&!!e[U]}function re(e){var t;return e?ur(e)||Array.isArray(e)||!!e[jt]||!!((t=e.constructor)!=null&&t[jt])||Pe(e)||Ve(e):!1}var Gn=Object.prototype.constructor.toString(),Dt=new WeakMap;function ur(e){if(!e||typeof e!="object")return!1;const t=Object.getPrototypeOf(e);if(t===null||t===Object.prototype)return!0;const r=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;if(r===Object)return!0;if(typeof r!="function")return!1;let n=Dt.get(r);return n===void 0&&(n=Function.toString.call(r),Dt.set(r,n)),n===Gn}function Le(e,t,r=!0){Fe(e)===0?(r?Reflect.ownKeys(e):Object.keys(e)).forEach(s=>{t(s,e[s],e)}):e.forEach((n,s)=>t(s,n,e))}function Fe(e){const t=e[U];return t?t.type_:Array.isArray(e)?1:Pe(e)?2:Ve(e)?3:0}function tt(e,t){return Fe(e)===2?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function _r(e,t,r){const n=Fe(e);n===2?e.set(t,r):n===3?e.add(r):e[t]=r}function Fn(e,t){return e===t?e!==0||1/e===1/t:e!==e&&t!==t}function Pe(e){return e instanceof Map}function Ve(e){return e instanceof Set}function Q(e){return e.copy_||e.base_}function rt(e,t){if(Pe(e))return new Map(e);if(Ve(e))return new Set(e);if(Array.isArray(e))return Array.prototype.slice.call(e);const r=ur(e);if(t===!0||t==="class_only"&&!r){const n=Object.getOwnPropertyDescriptors(e);delete n[U];let s=Reflect.ownKeys(n);for(let o=0;o<s.length;o++){const c=s[o],a=n[c];a.writable===!1&&(a.writable=!0,a.configurable=!0),(a.get||a.set)&&(n[c]={configurable:!0,writable:!0,enumerable:a.enumerable,value:e[c]})}return Object.create(ve(e),n)}else{const n=ve(e);if(n!==null&&r)return{...e};const s=Object.create(n);return Object.assign(s,e)}}function ht(e,t=!1){return He(e)||ie(e)||!re(e)||(Fe(e)>1&&Object.defineProperties(e,{set:Ie,add:Ie,clear:Ie,delete:Ie}),Object.freeze(e),t&&Object.values(e).forEach(r=>ht(r,!0))),e}function Vn(){V(2)}var Ie={value:Vn};function He(e){return e===null||typeof e!="object"?!0:Object.isFrozen(e)}var Hn={};function ne(e){const t=Hn[e];return t||V(0,e),t}var Ee;function hr(){return Ee}function zn(e,t){return{drafts_:[],parent_:e,immer_:t,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function wt(e,t){t&&(ne("Patches"),e.patches_=[],e.inversePatches_=[],e.patchListener_=t)}function nt(e){st(e),e.drafts_.forEach(Wn),e.drafts_=null}function st(e){e===Ee&&(Ee=e.parent_)}function Mt(e){return Ee=zn(Ee,e)}function Wn(e){const t=e[U];t.type_===0||t.type_===1?t.revoke_():t.revoked_=!0}function Lt(e,t){t.unfinalizedDrafts_=t.drafts_.length;const r=t.drafts_[0];return e!==void 0&&e!==r?(r[U].modified_&&(nt(t),V(4)),re(e)&&(e=Ne(t,e),t.parent_||Ue(t,e)),t.patches_&&ne("Patches").generateReplacementPatches_(r[U].base_,e,t.patches_,t.inversePatches_)):e=Ne(t,r,[]),nt(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),e!==dr?e:void 0}function Ne(e,t,r){if(He(t))return t;const n=e.immer_.shouldUseStrictIteration(),s=t[U];if(!s)return Le(t,(o,c)=>Nt(e,s,t,o,c,r),n),t;if(s.scope_!==e)return t;if(!s.modified_)return Ue(e,s.base_,!0),s.base_;if(!s.finalized_){s.finalized_=!0,s.scope_.unfinalizedDrafts_--;const o=s.copy_;let c=o,a=!1;s.type_===3&&(c=new Set(o),o.clear(),a=!0),Le(c,(l,d)=>Nt(e,s,o,l,d,r,a),n),Ue(e,o,!1),r&&e.patches_&&ne("Patches").generatePatches_(s,r,e.patches_,e.inversePatches_)}return s.copy_}function Nt(e,t,r,n,s,o,c){if(s==null||typeof s!="object"&&!c)return;const a=He(s);if(!(a&&!c)){if(ie(s)){const l=o&&t&&t.type_!==3&&!tt(t.assigned_,n)?o.concat(n):void 0,d=Ne(e,s,l);if(_r(r,n,d),ie(d))e.canAutoFreeze_=!1;else return}else c&&r.add(s);if(re(s)&&!a){if(!e.immer_.autoFreeze_&&e.unfinalizedDrafts_<1||t&&t.base_&&t.base_[n]===s&&a)return;Ne(e,s),(!t||!t.scope_.parent_)&&typeof n!="symbol"&&(Pe(r)?r.has(n):Object.prototype.propertyIsEnumerable.call(r,n))&&Ue(e,s)}}}function Ue(e,t,r=!1){!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&ht(t,r)}function Yn(e,t){const r=Array.isArray(e),n={type_:r?1:0,scope_:t?t.scope_:hr(),modified_:!1,finalized_:!1,assigned_:{},parent_:t,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1};let s=n,o=gt;r&&(s=[n],o=Re);const{revoke:c,proxy:a}=Proxy.revocable(s,o);return n.draft_=a,n.revoke_=c,a}var gt={get(e,t){if(t===U)return e;const r=Q(e);if(!tt(r,t))return Kn(e,r,t);const n=r[t];return e.finalized_||!re(n)?n:n===Je(e.base_,t)?(qe(e),e.copy_[t]=it(n,e)):n},has(e,t){return t in Q(e)},ownKeys(e){return Reflect.ownKeys(Q(e))},set(e,t,r){const n=gr(Q(e),t);if(n!=null&&n.set)return n.set.call(e.draft_,r),!0;if(!e.modified_){const s=Je(Q(e),t),o=s==null?void 0:s[U];if(o&&o.base_===r)return e.copy_[t]=r,e.assigned_[t]=!1,!0;if(Fn(r,s)&&(r!==void 0||tt(e.base_,t)))return!0;qe(e),ot(e)}return e.copy_[t]===r&&(r!==void 0||t in e.copy_)||Number.isNaN(r)&&Number.isNaN(e.copy_[t])||(e.copy_[t]=r,e.assigned_[t]=!0),!0},deleteProperty(e,t){return Je(e.base_,t)!==void 0||t in e.base_?(e.assigned_[t]=!1,qe(e),ot(e)):delete e.assigned_[t],e.copy_&&delete e.copy_[t],!0},getOwnPropertyDescriptor(e,t){const r=Q(e),n=Reflect.getOwnPropertyDescriptor(r,t);return n&&{writable:!0,configurable:e.type_!==1||t!=="length",enumerable:n.enumerable,value:r[t]}},defineProperty(){V(11)},getPrototypeOf(e){return ve(e.base_)},setPrototypeOf(){V(12)}},Re={};Le(gt,(e,t)=>{Re[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}});Re.deleteProperty=function(e,t){return Re.set.call(this,e,t,void 0)};Re.set=function(e,t,r){return gt.set.call(this,e[0],t,r,e[0])};function Je(e,t){const r=e[U];return(r?Q(r):e)[t]}function Kn(e,t,r){var s;const n=gr(t,r);return n?"value"in n?n.value:(s=n.get)==null?void 0:s.call(e.draft_):void 0}function gr(e,t){if(!(t in e))return;let r=ve(e);for(;r;){const n=Object.getOwnPropertyDescriptor(r,t);if(n)return n;r=ve(r)}}function ot(e){e.modified_||(e.modified_=!0,e.parent_&&ot(e.parent_))}function qe(e){e.copy_||(e.copy_=rt(e.base_,e.scope_.immer_.useStrictShallowCopy_))}var Xn=class{constructor(e){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.useStrictIteration_=!0,this.produce=(t,r,n)=>{if(typeof t=="function"&&typeof r!="function"){const o=r;r=t;const c=this;return function(l=o,...d){return c.produce(l,_=>r.call(this,_,...d))}}typeof r!="function"&&V(6),n!==void 0&&typeof n!="function"&&V(7);let s;if(re(t)){const o=Mt(this),c=it(t,void 0);let a=!0;try{s=r(c),a=!1}finally{a?nt(o):st(o)}return wt(o,n),Lt(s,o)}else if(!t||typeof t!="object"){if(s=r(t),s===void 0&&(s=t),s===dr&&(s=void 0),this.autoFreeze_&&ht(s,!0),n){const o=[],c=[];ne("Patches").generateReplacementPatches_(t,s,o,c),n(o,c)}return s}else V(1,t)},this.produceWithPatches=(t,r)=>{if(typeof t=="function")return(c,...a)=>this.produceWithPatches(c,l=>t(l,...a));let n,s;return[this.produce(t,r,(c,a)=>{n=c,s=a}),n,s]},typeof(e==null?void 0:e.autoFreeze)=="boolean"&&this.setAutoFreeze(e.autoFreeze),typeof(e==null?void 0:e.useStrictShallowCopy)=="boolean"&&this.setUseStrictShallowCopy(e.useStrictShallowCopy),typeof(e==null?void 0:e.useStrictIteration)=="boolean"&&this.setUseStrictIteration(e.useStrictIteration)}createDraft(e){re(e)||V(8),ie(e)&&(e=Zn(e));const t=Mt(this),r=it(e,void 0);return r[U].isManual_=!0,st(t),r}finishDraft(e,t){const r=e&&e[U];(!r||!r.isManual_)&&V(9);const{scope_:n}=r;return wt(n,t),Lt(void 0,n)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}setUseStrictIteration(e){this.useStrictIteration_=e}shouldUseStrictIteration(){return this.useStrictIteration_}applyPatches(e,t){let r;for(r=t.length-1;r>=0;r--){const s=t[r];if(s.path.length===0&&s.op==="replace"){e=s.value;break}}r>-1&&(t=t.slice(r+1));const n=ne("Patches").applyPatches_;return ie(e)?n(e,t):this.produce(e,s=>n(s,t))}};function it(e,t){const r=Pe(e)?ne("MapSet").proxyMap_(e,t):Ve(e)?ne("MapSet").proxySet_(e,t):Yn(e,t);return(t?t.scope_:hr()).drafts_.push(r),r}function Zn(e){return ie(e)||V(10,e),fr(e)}function fr(e){if(!re(e)||He(e))return e;const t=e[U];let r,n=!0;if(t){if(!t.modified_)return t.base_;t.finalized_=!0,r=rt(e,t.scope_.immer_.useStrictShallowCopy_),n=t.scope_.immer_.shouldUseStrictIteration()}else r=rt(e,!0);return Le(r,(s,o)=>{_r(r,s,fr(o))},n),t&&(t.finalized_=!1),r}var Jn=new Xn,qn=Jn.produce;const Qn=e=>(t,r,n)=>(n.setState=(s,o,...c)=>{const a=typeof s=="function"?qn(s):s;return t(a,o,...c)},e(n.setState,r,n)),es=Qn,Ut=e=>Symbol.iterator in e,$t=e=>"entries"in e,Bt=(e,t)=>{const r=e instanceof Map?e:new Map(e.entries()),n=t instanceof Map?t:new Map(t.entries());if(r.size!==n.size)return!1;for(const[s,o]of r)if(!n.has(s)||!Object.is(o,n.get(s)))return!1;return!0},ts=(e,t)=>{const r=e[Symbol.iterator](),n=t[Symbol.iterator]();let s=r.next(),o=n.next();for(;!s.done&&!o.done;){if(!Object.is(s.value,o.value))return!1;s=r.next(),o=n.next()}return!!s.done&&!!o.done};function rs(e,t){return Object.is(e,t)?!0:typeof e!="object"||e===null||typeof t!="object"||t===null||Object.getPrototypeOf(e)!==Object.getPrototypeOf(t)?!1:Ut(e)&&Ut(t)?$t(e)&&$t(t)?Bt(e,t):ts(e,t):Bt({entries:()=>Object.entries(e)},{entries:()=>Object.entries(t)})}function Z(e){const t=ue.useRef(void 0);return r=>{const n=e(r);return rs(t.current,n)?t.current:t.current=n}}const kt={isVisible:!1},ns=(...[e,t,r])=>({overlay:{isVisible:kt.isVisible,setIsVisible:n=>t(s=>{s.overlay.isVisible=n},void 0,e("setIsVisible")),reset:()=>({overlay:{...r().overlay,...kt}})}}),Gt={isActive:!1,isPaused:!1,start:le,cancel:le,toggleActive:le,pause:le,resume:le,invert:!1,direction:wr.FORWARD,scrollRef:void 0},ss=(...[e,t,r])=>({autoScroll:{...Gt,reset:()=>({autoScroll:{...r().autoScroll,...Gt}}),setIsActive:n=>t(s=>{s.autoScroll.isActive=n},void 0,e("setIsActive")),setIsPaused:n=>t(s=>{s.autoScroll.isPaused=n},void 0,e("setIsPaused")),setStart:n=>t(s=>{s.autoScroll.start=n},void 0,e("setStart")),setCancel:n=>t(s=>{s.autoScroll.cancel=n},void 0,e("setCancel")),setToggleActive:n=>t(s=>{s.autoScroll.toggleActive=n},void 0,e("setToggleActive")),setPause:n=>t(s=>{s.autoScroll.pause=n},void 0,e("setPause")),setResume:n=>t(s=>{s.autoScroll.resume=n},void 0,e("setResume")),setInvert:n=>t(s=>{s.autoScroll.invert=n},void 0,e("setInvert")),setDirection:n=>t(s=>{s.autoScroll.direction=n},void 0,e("setDirection")),setScrollRef:n=>t(s=>{if(!n){s.autoScroll.scrollRef=void 0;return}const o=E.createRef();o.current=n,s.autoScroll.scrollRef=o},void 0,e("setScrollRef"))}}),Ft={isMaximized:!1,isDragging:!1},os=(...[e,t,r])=>({progressBar:{...Ft,setIsMaximized:n=>t(s=>{s.progressBar.isMaximized=n},void 0,e("setIsMaximized")),setIsDragging:n=>t(s=>{s.progressBar.isDragging=n},void 0,e("setIsDragging")),reset:()=>({progressBar:{...r().progressBar,...Ft}})}}),Vt={showPreview:!1},is=(...[e,t,r])=>({tapZone:{...Vt,setShowPreview:n=>t(s=>{s.tapZone.showPreview=n},void 0,e("setShowPreview")),reset:()=>({tapZone:{...r().tapZone,...Vt}})}}),Ht={totalPages:0,currentPageIndex:0,pageToScrollToIndex:null,pageUrls:[],pageSpreadStates:[{url:"",isSpread:!1}],pageLoadStates:[{url:"",loaded:!1}],pages:[{name:"1",primary:{index:0,alt:"Page #1",url:"".concat(X.getBaseUrl())}}],transitionPageMode:pe.NONE,retryFailedPagesKeyPrefix:""},as=(...[e,t,r])=>({pages:{...Ht,reset:()=>({pages:{...r().pages,...Ht}}),setCurrentPageIndex:n=>t(s=>{s.pages.currentPageIndex=n},void 0,e("setCurrentPageIndex")),setPageToScrollToIndex:n=>t(s=>{s.pages.pageToScrollToIndex=n},void 0,e("setPageToScrollToIndex")),setTotalPages:n=>t(s=>{s.pages.totalPages=n},void 0,e("setTotalPages")),setPageUrls:n=>t(s=>{s.pages.pageUrls=n},void 0,e("setPageUrls")),setPageSpreadStates:n=>t(s=>{if(typeof n=="function"){s.pages.pageSpreadStates=n(r().pages.pageSpreadStates);return}s.pages.pageSpreadStates=n},void 0,e("setPageSpreadStates")),setPageLoadStates:n=>t(s=>{if(typeof n=="function"){s.pages.pageLoadStates=n(r().pages.pageLoadStates);return}s.pages.pageLoadStates=n},void 0,e("setPageLoadStates")),setPages:n=>t(s=>{s.pages.pages=n},void 0,e("setPages")),setTransitionPageMode:n=>t(s=>{s.pages.transitionPageMode=n},void 0,e("setTransitionPageMode")),setRetryFailedPagesKeyPrefix:n=>t(s=>{s.pages.retryFailedPagesKeyPrefix=n},void 0,e("setRetryFailedPagesKeyPrefix"))}}),zt={chapters:{mangaChapters:void 0,chapters:[],chapterForDuplicatesHandling:void 0,initialChapter:void 0,currentChapter:void 0,nextChapter:void 0,previousChapter:void 0,isCurrentChapterReady:!1,visibleChapters:{leading:0,trailing:0,lastLeadingChapterSourceOrder:99999,lastTrailingChapterSourceOrder:-1,isLeadingChapterPreloadMode:!0,isTrailingChapterPreloadMode:!0,scrollIntoView:!1,resumeMode:void 0}}},cs=(...[e,t,r])=>({chapters:{...zt.chapters,reset:()=>({chapters:{...r().chapters,...zt.chapters}}),setReaderStateChapters:n=>t(s=>{if(typeof n=="function"){s.chapters={...r().chapters,...n(r().chapters)};return}s.chapters={...r().chapters,...n}},void 0,e("setReaderStateChapters"))}});class $e{static createActionName(...t){const r=t.slice(0,-1),n=t.slice(-1)[0];return"".concat(r.join(":"),"/").concat(n)}static createActionNameCreator(t,r=$e.createActionName){return(...n)=>r(t,...n)}}const ls=["scrollRef"],Oe={manga:void 0,scrollbar:{xSize:0,ySize:0}},j=Ln()(kn(es((e,t,r)=>{const n=$e.createActionNameCreator("reader"),s=o=>$e.createActionNameCreator(o,n);return{...Oe,reset:()=>e(()=>({...t(),...Oe,scrollbar:{...t().scrollbar,...Oe.scrollbar},settings:{...t().settings,...At},...t().overlay.reset(),...t().autoScroll.reset(),...t().pages.reset(),...t().chapters.reset(),...t().progressBar.reset(),...t().tapZone.reset()}),void 0,n("reset")),setManga:o=>e(c=>{c.manga=o},void 0,n("setManga")),scrollbar:{...Oe.scrollbar,setXSize:o=>e(c=>{c.scrollbar.xSize=o},void 0,n("scrollbar","setXSize")),setYSize:o=>e(c=>{c.scrollbar.ySize=o},void 0,n("scrollbar","setYSize"))},settings:{...At,setSettings:o=>e(c=>{c.settings={...t().settings,...o}},void 0,n("settings","setSettings"))},...ns(s("overlay"),e,t,r),...ss(s("autoScroll"),e,t,r),...as(s("pages"),e,t,r),...cs(s("chapters"),e,t,r),...os(s("progressBar"),e,t,r),...is(s("tapZone"),e,t,r)}}),{name:"ReaderStore",anonymousActionType:"reader/action",serialize:{replacer:(e,t)=>ls.includes(e)?null:t}})),ui=e=>j(Z(e)),Ce=()=>j.getState(),ds=e=>j(Z(t=>e(t.scrollbar))),_i=()=>j.getState().scrollbar,Qe=e=>j(Z(t=>e(t.settings))),Wt=()=>j.getState().settings,hi=e=>j(Z(t=>e(t.overlay))),gi=()=>j.getState().overlay,fi=e=>j(Z(t=>e(t.autoScroll))),pi=()=>j.getState().autoScroll,xi=e=>j(Z(t=>e(t.pages))),Yt=()=>j.getState().pages,mi=e=>j(Z(t=>e(t.chapters))),Kt=()=>j.getState().chapters,Si=e=>j(Z(t=>e(t.progressBar))),vi=()=>j.getState().progressBar,Ei=e=>j(Z(t=>e(t.tapZone))),je=()=>j.getState().tapZone,us=e=>Object.keys(e).map(t=>{const r=t,n=e[r];switch(r){case"brightness":case"contrast":case"saturate":return n.enabled?"".concat(r,"(").concat(n.value/100,")"):"";case"hue":return n.enabled?"hue-rotate(".concat(n.value,"deg)"):"";case"rgba":return"";case"sepia":case"grayscale":case"invert":return n?"".concat(r,"(").concat(Number(n),")"):"";default:throw new Error('Unexpected "CustomFilter" ('.concat(r,")"))}}).join(" "),_s=({pageIndex:e,pagesIndex:t,isPrimaryPage:r,display:n,doublePage:s=!1,position:o,marginTop:c,shouldLoad:a,readingMode:l,customFilter:d,pageScaleMode:_,shouldStretchPage:u,readerWidth:g,onLoad:h,onError:S,setRef:p,readerNavBarWidth:x,isLoaded:f,...T})=>{const{src:R}=T,A=Be.useIsTabletWidth(),I=ds(K=>K),L=E.useCallback(()=>h==null?void 0:h(t,R,r),[h,t,R,r]),D=E.useCallback(()=>S==null?void 0:S(e,R),[S,e,R]),k=E.useCallback(K=>p==null?void 0:p(t,K),[t,p]);return!n&&!a?null:i.jsx(_n,{...T,onLoad:L,onError:D,shouldLoad:a,shouldDecode:!0,ref:k,spinnerStyle:{backgroundColor:"background.paper",...fs(l,u,_,g,x+I.ySize,I.xSize,s,A),...P(!n,{display:"none"}),...Xt(s,o)},imgStyle:{...xs(l,u,_,s,g,x+I.ySize,I.xSize),filter:us(d),objectFit:"contain",objectPosition:o,userSelect:"none",...Xt(s,o),...P(c!==void 0,{mt:"".concat(c,"px")}),display:"block",...P(!n,{display:"none"}),...P(!f,{margin:"unset"})},hideImgStyle:{visibility:"hidden",minWidth:0,minHeight:0,width:0,height:0}})},hs=E.memo(_s),gs=(e,t,r,n)=>{if(lr(r,e)){const s=r.value;return t?s/100/2:s/100}return t?.5:1},fs=(e,t,r,n,s,o,c,a)=>{const d=R=>"calc(".concat(R," - ").concat(s,"px)"),_=(R,A)=>d("".concat(ae(A!=null?A:R,Math.min(R,A!=null?A:9e3),R),"vw")),u=jn(n,r),g=d("".concat(Math.min(100,u!=null?u:9e3),"vw")),h="calc(100vh - ".concat(o,"px)"),S=a?g:_(40,u),p=a?h:"85vh",f={...{[C.SINGLE_PAGE]:{minWidth:S,minHeight:p},[C.DOUBLE_PAGE]:{minWidth:a?"50vw":_(35,u?u/2:void 0),minHeight:p},[C.CONTINUOUS_VERTICAL]:{minWidth:S,minHeight:"100vh"},[C.CONTINUOUS_HORIZONTAL]:{minWidth:S,minHeight:p},[C.WEBTOON]:{minWidth:S,minHeight:"100vh"}}[e],height:"unset"},T=c?"calc(".concat(d("".concat(u!=null?u:100,"vw"))," / 2)"):g;switch(r){case N.WIDTH:return{...f,...P(t,{minWidth:T})};case N.HEIGHT:return{...f,...P(t,{minHeight:h,...P(De(e),{minHeight:"100vh"})})};case N.SCREEN:return{...f,...P(t,{minWidth:T,minHeight:h,...P(De(e),{minHeight:"100vh"})})};case N.ORIGINAL:return{...f,...P(De(e),{height:void 0})};default:throw new Error('Unexpected "PageScaleMode" ('.concat(r,")"))}},ps=(e,t,r,n,s,o)=>{const c="calc((100vw - ".concat(s,"px) * ").concat(e,")"),a="calc(100vh - ".concat(o,"px)");switch(n){case N.WIDTH:return{minWidth:0,...P(q(t),{minWidth:"unset"}),...P(r,{minWidth:c}),maxWidth:c};case N.HEIGHT:return{minHeight:0,...P(q(t),{minHeight:"unset"}),...P(r,{minHeight:a}),maxHeight:a};case N.SCREEN:return{minWidth:0,minHeight:0,...P(q(t),{minWidth:"unset",minHeight:"unset"}),...P(r,{minWidth:c,minHeight:a,...P(t===C.CONTINUOUS_HORIZONTAL,{minWidth:"unset",minHeight:a}),...P(De(t),{minWidth:c,minHeight:"unset"})}),maxWidth:c,maxHeight:a};case N.ORIGINAL:return{};default:throw new Error('Unexpected "PageScaleMode" ('.concat(n,")"))}},xs=(e,t,r,n,s,o,c)=>{const a=gs(r,n,s);return ps(a,e,t,r,o,c)},Xt=(e,t)=>({m:"auto",...P(e,{...P(t==="right",{mr:"unset "}),...P(t==="left",{ml:"unset "})})}),at=(e,t)=>({index:t,alt:"Page #".concat(t+1),url:"".concat(X.getBaseUrl()).concat(e)}),ms=(e,t)=>({name:"".concat(t+1),primary:at(e,t)}),Ri=e=>e.map(ms),Ss=(e,t,r,n,s,o)=>{if(n||!s||o)return Number.MAX_SAFE_INTEGER;const c=Math.abs(t-e),a=r-c;return t<e?a-1:a},Te=({primary:{index:e,alt:t,url:r}},n,s,o,c,a,l,d,_,u,g,h,S,p,x,f,T,R,A,I,L,D)=>i.jsx(hs,{setRef:D,pageIndex:e,pagesIndex:n,isPrimaryPage:s,src:r,alt:t,display:_,priority:Ss(u,e,g,o,d,c),position:A,onLoad:a,onError:l,doublePage:I,shouldLoad:d,retryKeyPrefix:R,marginTop:L,isLoaded:o,readingMode:h,customFilter:S,pageScaleMode:p,shouldStretchPage:x,readerWidth:f,readerNavBarWidth:T},r),pr=(e,{truncateValues:t,thresholds:r}={truncateValues:!1,thresholds:{}})=>{const{top:n,bottom:s,left:o,right:c}=e.getBoundingClientRect(),a=R=>t?Math.trunc(R):R,l=a(n),d=a(s),_=a(o),u=a(c),g={top:0,bottom:0,left:0,right:0,...r},h=_>=g.left&&_<=window.innerWidth,S=u>=g.right&&u<=window.innerWidth,p=_<=0&&u>=window.innerWidth,x=l>=g.top&&l<=window.innerHeight,f=d>=g.bottom&&d<=window.innerHeight,T=l<=0&&d>=window.innerHeight;return{isLeftInViewport:h,isRightInViewport:S,isFillingWidthViewportCompletely:p,isTopInViewport:x,isBottomInViewport:f,isFillingHeightViewportCompletely:T}},Ti=(e,t,r)=>{const{isLeftInViewport:n,isRightInViewport:s,isFillingWidthViewportCompletely:o,isTopInViewport:c,isBottomInViewport:a,isFillingHeightViewportCompletely:l}=pr(e,r),d=n||s||o,_=c||a||l;switch(t){case we.X:return d;case we.Y:return _;default:throw new Error('unexpected "type" ('.concat(t,")"))}},Pi=(e,t,r)=>{const{isLeftInViewport:n,isRightInViewport:s,isBottomInViewport:o}=pr(e);switch(t){case we.X:return r===Y.LTR?s:n;case we.Y:return o;default:throw new Error('unexpected "type" ('.concat(t,")"))}},Ai=(e,t,r,n)=>{const s=[],o=t.map((c,a)=>a+t.slice(0,a).filter(({isSpread:l})=>l).length);return e.forEach((c,a)=>{var D;const d=!(o[a]%2),_=(d?1:-1)*(r?-1:1),u=a+_,g=a<u,h=a===0,S=a===e.length-1,p=g&&!S,x=t[a].isSpread,f=!!((D=t[u])!=null&&D.isSpread),A=!(x||f)&&!(h&&r);if(!g&&A){const k=s[s.length-1];s[s.length-1]={...k,secondary:at(c,a)};return}const I="-",L="".concat(a+1).concat(p&&A?"".concat(I).concat(u+1):"");s.push({name:n===Y.LTR?L:hn(L,I),primary:at(c,a)})}),s},vs=e=>e.height/e.width<1,Es=0,Rs=1,Ts=(e,t,r,n)=>e?n:t||r?ae(Rs,Es,n):0,Ps=2,As=(e,t,r,n,s,o,c,a)=>{if(!o&&!c&&!a)return[];const l=ut(e,t).pagesIndex,d=Ts(o,c,a,n),_=r<=e&&!c?1:-1,u=Math.max(0,l-Math.min(Ps,d)*_),g=q(s)?e:u,h=l+d*_,S=Math.max(1,Math.abs(h-g)+Number(o));return Array(S).fill(1).map((p,x)=>g+x*_)},bi=(e,t,r)=>[pe.BOTH,e].includes(t)||q(r),bs=(e,t)=>e!==pe.NONE||q(t),yi=(e,t)=>{const r=er[t];return e==="ltr"?Me("start","end",r):Me("end","start",r)},Ii=(e,t,r)=>{const n=er[r];return t==="ltr"?Me(0,e.scrollWidth,n):Me(-e.scrollWidth,0,n)},xr=(e,t)=>t===void 0||t.url!==e,ys=(e,t,r)=>e===W.START?0:e===W.END?r:ae(t,0,r),ge=e=>F.getFromCache(e,Mr,"CHAPTER_READER_FIELDS"),Is=(e,t,r,n,s,o,c)=>{if(!(!!n.isRead&&!!s))return[];const l=[e,...r][s-1];if(!l)return[];const _=(c?F.addDuplicates([l],t):[l]).map(({id:u})=>ge(u)).filter(u=>u!==null).filter(u=>F.isDeletable(u,o));return _.length?F.getIds(_):[]},mr=(e,t,r=ee.NEXT)=>{const n=(e+1)/t;return r===ee.PREVIOUS?n<.75:n>.25},Os=(e,t,r,n,s)=>{const o=ge(e.id);if(!o||!t)return[];if(!(!!s&&o.isDownloaded&&mr(n,o.pageCount)))return[];const l=ge(t.id);return l!=null&&l.isDownloaded?F.getNonRead(r).map(_=>ge(_.id)).filter(_=>!!_).slice(-s).filter(_=>!_.isDownloaded).map(_=>_.id).filter(_=>!F.isDownloading(_)):[]},Oi=(e,t,r,n)=>(s,o,c=!0)=>{if(s>e.length-1)return;const a=e[s],{index:l}=c?a.primary:a.secondary;if(n===C.DOUBLE_PAGE){const d=new Image;d.onload=()=>{const _=vs(d);_&&t(u=>{const g=u[l];return g===void 0||g.url!==o||g.isSpread===_?u:u.toSpliced(l,1,{url:o,isSpread:_})})},d.crossOrigin="anonymous",d.src=o}r(d=>{const _=d[l];return xr(o,_)||_.loaded?d:d.toSpliced(l,1,{url:_.url,loaded:!0})})},Ci=(e,t)=>{if(e)return t?W.END:W.START},ji=e=>(t,r)=>{e(n=>{const s=n[t];return xr(r,s)?n:n.toSpliced(t,1,{...s,loaded:!1,error:!0})})},Cs=(e,t,r,n,s,o)=>{const{leading:c,trailing:a,lastLeadingChapterSourceOrder:l,lastTrailingChapterSourceOrder:d}=t.visibleChapters,_=e&&r<l,u=!e&&r>d;return{...t,visibleChapters:{...t.visibleChapters,leading:c+Number(_),trailing:a+Number(u),lastLeadingChapterSourceOrder:_?r:l,lastTrailingChapterSourceOrder:u?r:d,isLeadingChapterPreloadMode:s!==void 0?s:t.visibleChapters.isLeadingChapterPreloadMode,isTrailingChapterPreloadMode:o!==void 0?o:t.visibleChapters.isTrailingChapterPreloadMode,scrollIntoView:n,resumeMode:e?W.END:W.START}}},Di=(e,t,r,n,s,o,c,a)=>{if(n){if(s)return ae(e,0,t.pageCount-1);if(a.scrollIntoView&&a.resumeMode!==void 0)return ys(a.resumeMode,0,t.pageCount-1);if(o)return Math.max(0,t.pageCount-1);if(c)return 0}return t.sourceOrder<r.sourceOrder?Math.max(t.pageCount-1,0):0},wi=(e,t,r,n,s,o)=>e&&s!==void 0?s:t?o:r?W.END:n?W.START:W.START,Mi=(e,t,r)=>{const n=!!t[e+1],o=e+1>=t.length-1&&r.isLeadingChapterPreloadMode,c=n&&!o,a=!!t[e-1],d=e-1<=0&&r.isTrailingChapterPreloadMode;return{previous:c,next:a&&!d}},js={ltr:"rtl",rtl:"ltr"},Ds={ltr:Y.LTR,rtl:Y.RTL},G=class G{static getOrCreateChapterUpdateQueue(t){return G.chapterUpdateQueues.has(t)||G.chapterUpdateQueues.set(t,new ft(1)),G.chapterUpdateQueues.get(t)}static navigateToChapter(t,r){Lr.navigate(F.getReaderUrl(t),{replace:!0,state:r})}static downloadAhead(t,r,n,s,o){const c="".concat(t.id,"_").concat(r==null?void 0:r.id,"_").concat(s,"_").concat(o);G.downloadAheadQueue.enqueue(c,async()=>{const a=Os(t,r,n,s,o);if(a.length)try{await F.download(a)}catch(l){pt("ReaderService::useUpdateCurrentPageIndex: download ahead")(l)}})}static preloadChapter(t,r,n,s,o,c){if(!n)return;const a=c===ee.PREVIOUS,l=c===ee.NEXT;!(a&&s<=n.sourceOrder||l&&o>=n.sourceOrder)&&mr(t,r,c)&&Kt().setReaderStateChapters(u=>Cs(a,u,n.sourceOrder,!1,a?!0:void 0,l?!0:void 0))}static useUpdateChapter(){const{settings:{deleteChaptersWhileReading:t,deleteChaptersWithBookmark:r,updateProgressAfterReading:n}}=Nr();return E.useCallback(s=>{const{manga:o}=Ce(),{currentChapter:c,mangaChapters:a,chapters:l}=Kt(),{shouldSkipDupChapters:d}=Wt();if(!o||!c||!a)return;const _=F.getNextChapters(c,l,{offset:ee.PREVIOUS}),u=async()=>{const g=F.getIds(d?F.addDuplicates([c],a):[c]),h=Is(c,a,_,s,t,r,d);(h.length||g.some(p=>{const x=ge(p);return x?s.isRead!==void 0&&s.isRead!==x.isRead||s.lastPageRead!==void 0&&s.lastPageRead!==x.lastPageRead||s.isBookmarked!==void 0&&s.isBookmarked!==x.isBookmarked:!1}))&&await X.updateChapters(g,{...s,chapterIdsToDelete:h,trackProgressMangaId:n&&s.isRead&&o.trackRecords.totalCount?o.id:void 0},{errorPolicy:"all"}).response.catch(pt("ReaderService::useUpdateChapter"))};G.getOrCreateChapterUpdateQueue(c.id).enqueue("".concat(c.id),u)},[t,r,n])}static useGetThemeDirection(){const{direction:t}=dt(),r=Qe(n=>n.readingDirection.value);return Ds[t]===r?t:js[t]}static setOffsetDoubleSpreads(t){var u;const{pages:r,currentPageIndex:n,pageSpreadStates:s}=Yt(),{readingMode:o}=Wt(),c=o.value===C.DOUBLE_PAGE,a=!!((u=s[n])!=null&&u.isSpread);if(!(c&&!a)){G.updateSetting("shouldOffsetDoubleSpreads",t);return}const d=ut(n,r),_=t?d.primary.index:n;Yt().setCurrentPageIndex(_),G.updateSetting("shouldOffsetDoubleSpreads",t)}static updateSetting(t,r,n=!0,s=!1,o){const{manga:c}=Ce(),a=c!=null?c:s?Tt:c;if(!a||a.id===Pt.id)return;const l=xt(t,o!==void 0?[o==null?void 0:o.toString()]:void 0),{cache:d}=X.graphQLClient.client;if(s||fe.includes(t)){const u=d.writeFragment({fragment:Ur,data:{__typename:"GlobalMetaType",key:l,value:JSON.stringify(r)}});d.modify({fields:{metas(g,{readField:h}){return{...g,nodes:mt(l,g==null?void 0:g.nodes,h,()=>u)}}}})}else{const u=d.writeFragment({fragment:$r,data:{__typename:"MangaMetaType",mangaId:a.id,key:l,value:JSON.stringify(r)}});d.modify({id:d.identify({__typename:"MangaType",id:a.id}),fields:{meta(g,{readField:h}){return mt(l,g,h,()=>u)}}})}n&&vn(a,t,r,s,o).catch(u=>St(Et._({id:"sFl1CR"}),"error",vt(u)))}static deleteSetting(t,r=!1,n){const{manga:s}=Ce(),o=s!=null?s:r?Tt:s;if(!o||o.id===Pt.id)return;const c=xt(t,n!==void 0?[n]:void 0),{cache:a}=X.graphQLClient.client,l=r||fe.includes(t);l?a.evict({id:a.identify({__typename:"GlobalMetaType",key:c})}):a.evict({id:a.identify({__typename:"MangaMetaType",mangaId:o.id,key:c})}),(l?()=>X.deleteGlobalMeta(c).response:()=>X.deleteMangaMeta(o.id,c).response)().catch(_=>St(Et._({id:"sFl1CR"}),"error",vt(_)))}static useOverlayMode(){const t=Be.useIsTouchDevice(),r=Qe(l=>l.overlayMode),n=r===B.AUTO,s=r===B.DESKTOP,o=r===B.MOBILE,c=s||n&&!t,a=o||n&&t;return{mode:c?B.DESKTOP:B.MOBILE,isDesktop:c,isMobile:a}}static useExit(){const t=Qe(o=>o.exitMode),r=Br(),n=kr(),s=E.useCallback(()=>{const{manga:o}=Ce();return o?n(Gr.manga.path(o.id)):()=>{}},[]);switch(t){case xe.PREVIOUS:return r;case xe.MANGA:return s;default:throw new Error('Unexpected "exitMode" ('.concat(t,")"))}}};We(G,"downloadAheadQueue",new ft(1)),We(G,"chapterUpdateQueues",new Map);let ct=G;const ws=({superscript:e,text:t})=>i.jsxs(v,{sx:{flexDirection:"row",gap:.25},children:[t,i.jsx(b,{variant:"caption",sx:{fontSize:"x-small",opacity:.75},children:e})]}),Ms=({value:e,values:t,defaultValue:r,setValue:n,valueToDisplayData:s,isDefaultable:o,onDefault:c})=>{const{i18n:a,_:l}=m();return i.jsxs(v,{sx:{flexDirection:"row",flexWrap:"wrap",gap:1},children:[o&&i.jsx(te,{onClick:c,variant:e===void 0?"contained":"outlined",children:a._({id:"ovBPCi"})},"default"),t.map(d=>{const _=e===void 0&&d===r,u=s[d].isTitleString?s[d].title:a._(s[d].title);return i.jsx(ke,{title:_?a._({id:"D5zldB"}):"",children:i.jsx(te,{onClick:()=>n(d),variant:d===e?"contained":"outlined",startIcon:s[d].icon,children:_?i.jsx(ws,{superscript:"*",text:u}):u})},d)})]})},$=({label:e,description:t,...r})=>i.jsxs(v,{children:[i.jsx(b,{children:e}),t&&i.jsx(b,{variant:"body2",color:"textDisabled",children:t}),i.jsx(Ms,{...r})]}),Sr=({readingMode:e,setReadingMode:t,...r})=>{const{i18n:n,_:s}=m();return i.jsx($,{...r,label:n._({id:"n1QGhW"}),value:e.isDefault?void 0:e.value,defaultValue:e.isDefault?e.value:void 0,values:rr,setValue:t,valueToDisplayData:tr})},Ls={[Y.LTR]:{title:{id:"1zAee9"},icon:i.jsx(Vr,{})},[Y.RTL]:{title:{id:"isgNhH"},icon:i.jsx(Fr,{})}},Ns=Object.values(Y).filter(e=>typeof e=="number"),Us=({readingDirection:e,setReadingDirection:t,...r})=>{const{i18n:n,_:s}=m();return i.jsx($,{...r,label:n._({id:"Ap8Ipr"}),value:e.isDefault?void 0:e.value,defaultValue:e.isDefault?e.value:void 0,values:Ns,setValue:t,valueToDisplayData:Ls})},$s={[oe.EDGE]:{title:{id:"izD9nz"},icon:null},[oe.KINDLE]:{title:{id:"/x81ME"},icon:null},[oe.L_SHAPE]:{title:{id:"WdxF/E"},icon:null},[oe.RIGHT_LEFT]:{title:{id:"Uiadsw"},icon:null},[oe.DISABLED]:{title:{id:"E/QGRL"},icon:null}},Bs=Object.values(oe).filter(e=>typeof e=="number"),ks=({tapZoneLayout:e,setTapZoneLayout:t,...r})=>{const{i18n:n,_:s}=m();return i.jsx($,{...r,label:n._({id:"KHYK7w"}),value:e.isDefault?void 0:e.value,defaultValue:e.isDefault?e.value:void 0,values:Bs,setValue:t,valueToDisplayData:$s})};var vr=function(e){return e[e.NONE=0]="NONE",e[e.HORIZONTAL=1]="HORIZONTAL",e[e.VERTICAL=2]="VERTICAL",e[e.BOTH=3]="BOTH",e}(vr||{});const Gs={0:{title:{id:"EdQY6l"},icon:null},1:{title:{id:"pzu7v4"},icon:null},2:{title:{id:"mX/isJ"},icon:null},3:{title:{id:"njBeMm"},icon:null}},Fs=Object.values(vr).filter(e=>typeof e=="number"),Vs={0:{vertical:!1,horizontal:!1},1:{vertical:!1,horizontal:!0},2:{vertical:!0,horizontal:!1},3:{vertical:!0,horizontal:!0}},Hs=({vertical:e,horizontal:t})=>e&&t?3:e?2:t?1:0,zs=({tapZoneInvertMode:e,setTapZoneInvertMode:t,...r})=>{const{i18n:n,_:s}=m(),o=Hs(e.value);return i.jsx($,{...r,label:n._({id:"VS8gSt"}),value:e.isDefault?void 0:o,defaultValue:e.isDefault?o:void 0,values:Fs,setValue:c=>t(Vs[c]),valueToDisplayData:Gs})},Ws=({pageScaleMode:e,setPageScaleMode:t,...r})=>{const{i18n:n,_:s}=m();return i.jsx($,{...r,label:n._({id:"h1Kv7C"}),value:e.isDefault?void 0:e.value,defaultValue:e.isDefault?e.value:void 0,values:zr,setValue:t,valueToDisplayData:Hr})},Ys=({pageScaleMode:e,shouldStretchPage:t,setShouldStretchPage:r})=>{const{i18n:n,_:s}=m();return Wr[e]?i.jsx(J,{children:i.jsx(te,{onClick:()=>r(!t),variant:t?"contained":"outlined",children:n._({id:"RrbZW2"})})}):null},Zt=ce(i.jsx("path",{d:"M12 5V2L8 6l4 4V7c3.31 0 6 2.69 6 6 0 2.97-2.17 5.43-5 5.91v2.02c3.95-.49 7-3.85 7-7.93 0-4.42-3.58-8-8-8m-6 8c0-1.65.67-3.15 1.76-4.24L6.34 7.34C4.9 8.79 4 10.79 4 13c0 4.08 3.05 7.44 7 7.93v-2.02c-2.83-.48-5-2.94-5-5.91"})),Ae=({asIconButton:e,...t})=>{const{i18n:r,_:n}=m();return e?i.jsx(ke,{title:r._({id:"OfhWJH"}),children:i.jsx(nr,{color:"inherit",...t,children:i.jsx(Zt,{})})}):i.jsx(te,{startIcon:i.jsx(Zt,{}),...t,children:r._({id:"OfhWJH"})})},z=({label:e,value:t,onDefault:r,slotProps:n})=>{var s,o,c;return i.jsxs(v,{sx:{flexDirection:"row",gap:2,alignItems:"center"},children:[i.jsxs(v,{sx:{flexBasis:"25%"},children:[i.jsx(b,{...n==null?void 0:n.label,sx:{...(s=n==null?void 0:n.label)==null?void 0:s.sx},children:e}),i.jsx(b,{...n==null?void 0:n.value,sx:{...(o=n==null?void 0:n.value)==null?void 0:o.sx},children:t})]}),i.jsx(fn,{...n==null?void 0:n.slider,sx:{flexBasis:"75%",...(c=n==null?void 0:n.slider)==null?void 0:c.sx}}),r&&i.jsx(Ae,{asIconButton:!0,onClick:r})]})},Ks=({pageGap:e,readingMode:t,isDefaultable:r,onDefault:n,updateSetting:s})=>{const{i18n:o,_:c}=m();return t.value!==C.WEBTOON&&q(t.value)?i.jsx(z,{label:o._({id:"UBmH1j"}),value:"".concat(e.value).concat(o._({id:"qdSiBE"})),onDefault:r?n:void 0,slotProps:{slider:{defaultValue:y.pageGap,value:e.value,step:Ye.step,min:Ye.min,max:Ye.max,onChange:(l,d)=>{s(d,!1)},onChangeCommitted:(l,d)=>{s(d,!0)}}}}):null},Xs=({readerWidth:e,pageScaleMode:t,isDefaultable:r,onDefault:n,updateSetting:s,setTransparent:o})=>{const{i18n:c,_:a}=m();return _t(t)?i.jsxs(v,{children:[i.jsxs(v,{sx:{flexDirection:"row",justifyContent:"space-between"},children:[i.jsx(O,{label:c._({id:"0eF80K"}),checked:e.enabled,onChange:(l,d)=>s("readerWidth",{...e,enabled:d},!0)}),r&&i.jsx(Ae,{onClick:n,variant:"outlined"})]}),e.enabled&&i.jsx(z,{label:c._({id:"Rh3JNI"}),value:"".concat(e.value,"%"),slotProps:{slider:{defaultValue:y.readerWidth.value,value:e.value,step:1,min:10,max:100,onChange:(l,d)=>{o==null||o(!0),s("readerWidth",{...e,value:d},!1)},onChangeCommitted:(l,d)=>{o==null||o(!1),s("readerWidth",{...e,value:d},!0)}}}})]}):null},Zs=({areDefaultSettings:e})=>{const{i18n:t,_:r}=m();return!Be.useIsTouchDevice()||e?null:i.jsx(v,{sx:{alignItems:"end"},children:i.jsx(b,{variant:"caption",children:t._({id:"mQmQfR"})})})},Js=({profile:e,title:t,updateSetting:r,isSeriesMode:n,...s})=>{const{settings:o}=Sn(e),c=E.useMemo(()=>({...o,readingMode:{value:e,isDefault:!0}}),[o,e]);return i.jsxs(v,{sx:{gap:2},children:[n?i.jsx(b,{children:t}):i.jsx(pn,{component:"div",id:"".concat(e,"-settings"),children:t}),i.jsx(v,{sx:{px:+!n*2},children:i.jsx(Rr,{...s,settings:c,updateSetting:(a,l,d)=>r(a,l,d,!0,e)})})]})},Er=({profiles:e=rr,readingMode:t,...r})=>{const{updateSetting:n,isSeriesMode:s}=r,{i18n:o,_:c}=m();return i.jsxs(v,{sx:{gap:2,pb:+!s*2},children:[t!==void 0&&i.jsx(v,{sx:{pt:2,px:2},children:i.jsx(Sr,{readingMode:t,setReadingMode:a=>n("readingMode",a)})}),e.map(a=>i.jsx(Js,{profile:a,title:o._(tr[a].title),...r},a))]})},Rr=({settings:e,updateSetting:t,isDefaultable:r,onDefault:n,isSeriesMode:s,setTransparent:o})=>{const{i18n:c,_:a}=m();return i.jsxs(v,{sx:{gap:2},children:[i.jsx(Zs,{areDefaultSettings:!r}),s&&i.jsxs(i.Fragment,{children:[i.jsx(b,{children:c._({id:"8pkf23"})}),i.jsx(Sr,{readingMode:e.readingMode,setReadingMode:l=>t("readingMode",l),isDefaultable:r,onDefault:()=>n==null?void 0:n("readingMode")})]}),i.jsx(Ks,{pageGap:e.pageGap,readingMode:e.readingMode,isDefaultable:r,onDefault:()=>n==null?void 0:n("pageGap"),updateSetting:(...l)=>t("pageGap",...l)}),i.jsx(Us,{readingDirection:e.readingDirection,setReadingDirection:l=>t("readingDirection",l),isDefaultable:r,onDefault:()=>n==null?void 0:n("readingDirection")}),i.jsx(ks,{tapZoneLayout:e.tapZoneLayout,setTapZoneLayout:l=>{je().setShowPreview(!0),t("tapZoneLayout",l)},isDefaultable:r,onDefault:()=>{je().setShowPreview(!0),n==null||n("tapZoneLayout")}}),i.jsx(zs,{tapZoneInvertMode:e.tapZoneInvertMode,setTapZoneInvertMode:l=>{je().setShowPreview(!0),t("tapZoneInvertMode",l)},isDefaultable:r,onDefault:()=>{je().setShowPreview(!0),n==null||n("tapZoneInvertMode")}}),i.jsx(Ws,{pageScaleMode:e.pageScaleMode,setPageScaleMode:l=>t("pageScaleMode",l),isDefaultable:r,onDefault:()=>n==null?void 0:n("pageScaleMode")}),i.jsx(Ys,{pageScaleMode:e.pageScaleMode.value,shouldStretchPage:e.shouldStretchPage.value,setShouldStretchPage:l=>t("shouldStretchPage",l)}),i.jsx(Xs,{readerWidth:e.readerWidth.value,pageScaleMode:e.pageScaleMode.value,isDefaultable:r,onDefault:()=>n==null?void 0:n("readerWidth"),updateSetting:(...l)=>t(...l),setTransparent:o}),s&&i.jsxs(i.Fragment,{children:[i.jsx(Yr,{}),i.jsx(Er,{profiles:[e.readingMode.value],updateSetting:t,isSeriesMode:s,setTransparent:o})]})]})},qs=()=>i.jsx(sr,{children:i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:i.jsx("path",{fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M4 15h16"})})}),Qs=()=>i.jsx(sr,{children:i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:i.jsx("path",{fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M4 15h16M7 15v-5m10 5v-5M4 9h16"})})}),eo={[me.HIDDEN]:{title:{id:"D+zLDD"},icon:i.jsx(qs,{})},[me.STANDARD]:{title:{id:"TJBHlP"},icon:i.jsx(Qs,{})}},to=Object.values(me).filter(e=>typeof e=="number"),ro=({overlayMode:e,progressBarType:t,setProgressBarType:r})=>{const{i18n:n,_:s}=m();return e!==B.DESKTOP?null:i.jsx($,{label:n._({id:"748T9C"}),value:t,values:to,setValue:r,valueToDisplayData:eo})},no=({overlayMode:e,progressBarType:t,progressBarSize:r,setProgressBarSize:n,onDefault:s})=>{const{i18n:o,_:c}=m();return e===B.DESKTOP&&t===me.STANDARD?i.jsx(z,{label:o._({id:"BOS/KV"}),value:"".concat(r).concat(o._({id:"qdSiBE"})),onDefault:s,slotProps:{slider:{defaultValue:y.progressBarSize,value:r,step:Ke.step,min:Ke.min,max:Ke.max,onChange:(l,d)=>{n(d,!1)},onChangeCommitted:(l,d)=>{n(d,!0)}}}}):null},so=ce(i.jsx("path",{d:"M6.23 20.23 8 22l10-10L8 2 6.23 3.77 14.46 12z"})),Jt=ce(i.jsx("path",{d:"M17.77 3.77 16 2 6 12l10 10 1.77-1.77L9.54 12z"})),Tr=ce([i.jsx("path",{d:"M19.03 3.56c-1.67-1.39-3.74-2.3-6.03-2.51v2.01c1.73.19 3.31.88 4.61 1.92zM11 3.06V1.05c-2.29.2-4.36 1.12-6.03 2.51l1.42 1.42C7.69 3.94 9.27 3.25 11 3.06M4.98 6.39 3.56 4.97C2.17 6.64 1.26 8.71 1.05 11h2.01c.19-1.73.88-3.31 1.92-4.61M20.94 11h2.01c-.21-2.29-1.12-4.36-2.51-6.03l-1.42 1.42c1.04 1.3 1.73 2.88 1.92 4.61M7 12l3.44 1.56L12 17l1.56-3.44L17 12l-3.44-1.56L12 7l-1.56 3.44z"},"0"),i.jsx("path",{d:"M12 21c-3.11 0-5.85-1.59-7.46-4H7v-2H1v6h2v-2.7c1.99 2.84 5.27 4.7 9 4.7 4.87 0 9-3.17 10.44-7.56l-1.96-.45C19.25 18.48 15.92 21 12 21"},"1")]),qt={[H.AUTO]:{title:{id:"R9Khdg"},icon:i.jsx(Tr,{})},[H.BOTTOM]:{title:{id:"zsiX7I"},icon:i.jsx(Jt,{sx:{transform:"rotate(90deg)"}})},[H.LEFT]:{title:{id:"UlKSMd"},icon:i.jsx(so,{})},[H.RIGHT]:{title:{id:"nOPbWJ"},icon:i.jsx(Jt,{})}},oo=Object.values(H).filter(e=>typeof e=="number"),io=Object.values(Kr),ao=({progressBarPosition:e,progressBarPositionAutoVertical:t,updateSetting:r})=>{const{i18n:n,_:s}=m(),o=e===H.AUTO;return i.jsxs(i.Fragment,{children:[i.jsx($,{label:n._({id:"xffhMO"}),value:e,values:oo,setValue:c=>r("progressBarPosition",c),valueToDisplayData:qt}),o&&i.jsx($,{label:n._({id:"/y++43"}),value:t,values:io,setValue:c=>r("progressBarPositionAutoVertical",c),valueToDisplayData:qt})]})},co=ce(i.jsx("path",{d:"M15.5 1h-8C6.12 1 5 2.12 5 3.5v17C5 21.88 6.12 23 7.5 23h8c1.38 0 2.5-1.12 2.5-2.5v-17C18 2.12 16.88 1 15.5 1m-4 21c-.83 0-1.5-.67-1.5-1.5s.67-1.5 1.5-1.5 1.5.67 1.5 1.5-.67 1.5-1.5 1.5m4.5-4H7V4h9z"})),lo=ce(i.jsx("path",{d:"M20 18c1.1 0 1.99-.9 1.99-2L22 6c0-1.1-.9-2-2-2H4c-1.1 0-2 .9-2 2v10c0 1.1.9 2 2 2H0v2h24v-2zM4 6h16v10H4z"})),uo={[B.AUTO]:{title:{id:"R9Khdg"},icon:i.jsx(Tr,{})},[B.DESKTOP]:{title:{id:"BBqGS9"},icon:i.jsx(lo,{})},[B.MOBILE]:{title:{id:"dMsM20"},icon:i.jsx(co,{})}},_o=Object.values(B).filter(e=>typeof e=="number"),ho=({overlayMode:e,setOverlayMode:t})=>{const{i18n:r,_:n}=m();return i.jsx($,{label:r._({id:"qtoYko"}),value:e,values:_o,setValue:t,valueToDisplayData:uo})},go={[_e.THEME]:{title:{id:"FEr96N"},icon:null},[_e.BLACK]:{title:{id:"THokF3"},icon:null},[_e.GRAY]:{title:{id:"qS5//Q"},icon:null},[_e.WHITE]:{title:{id:"5Ex+AP"},icon:null}},fo=Object.values(_e).filter(e=>typeof e=="number"),po=({backgroundColor:e,updateSetting:t})=>{const{i18n:r,_:n}=m();return i.jsx($,{label:r._({id:"MLZyiY"}),value:e,values:fo,setValue:t,valueToDisplayData:go})},xo=({overlayMode:e,settings:t,updateSetting:r,onDefault:n})=>{const{i18n:s,_:o}=m();return i.jsxs(v,{sx:{gap:2},children:[i.jsx(ho,{overlayMode:t.overlayMode,setOverlayMode:c=>r("overlayMode",c)}),i.jsx(po,{backgroundColor:t.backgroundColor,updateSetting:c=>r("backgroundColor",c)}),i.jsx(ro,{overlayMode:e,progressBarType:t.progressBarType,setProgressBarType:c=>r("progressBarType",c)}),i.jsx(no,{overlayMode:e,progressBarType:t.progressBarType,progressBarSize:t.progressBarSize,setProgressBarSize:(...c)=>r("progressBarSize",...c),onDefault:()=>n==null?void 0:n("progressBarSize")}),i.jsx(ao,{progressBarPosition:t.progressBarPosition,progressBarPositionAutoVertical:t.progressBarPositionAutoVertical,updateSetting:r}),(t.progressBarType===me.HIDDEN||e===B.MOBILE)&&i.jsx(O,{label:s._({id:"T+guOL"}),checked:t.shouldShowPageNumber,onChange:(c,a)=>r("shouldShowPageNumber",a)})]})},mo=({brightness:e,updateSetting:t})=>{const{i18n:r,_:n}=m();return i.jsxs(v,{children:[i.jsx(O,{label:r._({id:"3+2y0V"}),checked:e.enabled,onChange:(s,o)=>t("brightness",{...e,enabled:o},!0)}),e.enabled&&i.jsx(z,{label:r._({id:"3+2y0V"}),value:e.value,onDefault:()=>t("brightness",{...e,value:y.customFilter.brightness.value},!0),slotProps:{slider:{defaultValue:y.customFilter.brightness.value,value:e.value,step:M.brightness.step,min:M.brightness.min,max:M.brightness.max,onChange:(s,o)=>{t("brightness",{...e,value:o},!1)},onChangeCommitted:(s,o)=>{t("brightness",{...e,value:o},!0)}}}})]})},So=({contrast:e,updateSetting:t})=>{const{i18n:r,_:n}=m();return i.jsxs(v,{children:[i.jsx(O,{label:r._({id:"ab93Te"}),checked:e.enabled,onChange:(s,o)=>t("contrast",{...e,enabled:o},!0)}),e.enabled&&i.jsx(z,{label:r._({id:"ab93Te"}),value:e.value,onDefault:()=>t("contrast",{...e,value:y.customFilter.contrast.value},!0),slotProps:{slider:{defaultValue:y.customFilter.contrast.value,value:e.value,step:M.contrast.step,min:M.contrast.min,max:M.contrast.max,onChange:(s,o)=>{t("contrast",{...e,value:o},!1)},onChangeCommitted:(s,o)=>{t("contrast",{...e,value:o},!0)}}}})]})},vo=({saturate:e,updateSetting:t})=>{const{i18n:r,_:n}=m();return i.jsxs(v,{children:[i.jsx(O,{label:r._({id:"V9+aMw"}),checked:e.enabled,onChange:(s,o)=>t("saturate",{...e,enabled:o},!0)}),e.enabled&&i.jsx(z,{label:r._({id:"V9+aMw"}),value:e.value,onDefault:()=>t("saturate",{...e,value:y.customFilter.saturate.value},!0),slotProps:{slider:{defaultValue:y.customFilter.saturate.value,value:e.value,step:M.saturate.step,min:M.saturate.min,max:M.saturate.max,onChange:(s,o)=>{t("saturate",{...e,value:o},!1)},onChangeCommitted:(s,o)=>{t("saturate",{...e,value:o},!0)}}}})]})},Eo=({hue:e,updateSetting:t})=>{const{i18n:r,_:n}=m();return i.jsxs(v,{children:[i.jsx(O,{label:r._({id:"JEFMWQ"}),checked:e.enabled,onChange:(s,o)=>t("hue",{...e,enabled:o},!0)}),e.enabled&&i.jsx(z,{label:r._({id:"JEFMWQ"}),value:e.value,onDefault:()=>t("hue",{...e,value:y.customFilter.hue.value},!0),slotProps:{slider:{defaultValue:y.customFilter.hue.value,value:e.value,step:M.hue.step,min:M.hue.min,max:M.hue.max,onChange:(s,o)=>{t("hue",{...e,value:o},!1)},onChangeCommitted:(s,o)=>{t("hue",{...e,value:o},!0)}}}})]})},Ro={red:{id:"wRTiSD"},green:{id:"VmkjGB"},blue:{id:"Zn5crm"},alpha:{id:"mqm0Hp"}},To=({rgba:e,updateSetting:t})=>{const{i18n:r,_:n}=m();return i.jsxs(v,{children:[i.jsx(O,{label:r._({id:"+rW/I9"}),checked:e.enabled,onChange:(s,o)=>t("rgba",{...e,enabled:o},!0)}),e.enabled&&i.jsxs(v,{sx:{gap:1},children:[Object.entries(e.value).map(([s,o])=>s==="blendMode"?null:i.jsx(z,{label:r._(Ro[s]),value:o,onDefault:()=>t("rgba",{...e,value:{...e.value,[s]:y.customFilter.rgba.value[s]}},!0),slotProps:{slider:{value:o,defaultValue:y.customFilter.rgba.value[s],step:M.rgba[s].step,min:M.rgba[s].min,max:M.rgba[s].max,onChange:(c,a)=>{t("rgba",{...e,value:{...e.value,[s]:a}},!1)},onChangeCommitted:(c,a)=>{t("rgba",{...e,value:{...e.value,[s]:a}},!0)}}}},s)),i.jsx($,{label:r._({id:"csv16z"}),value:e.value.blendMode,values:Zr,setValue:s=>t("rgba",{...e,value:{...e.value,blendMode:s}},!0),valueToDisplayData:Xr})]})]})},Po=({sepia:e,updateSetting:t})=>{const{i18n:r,_:n}=m();return i.jsx(v,{children:i.jsx(O,{label:r._({id:"SFDRbG"}),checked:e,onChange:(s,o)=>t(o)})})},Ao=({grayscale:e,updateSetting:t})=>{const{i18n:r,_:n}=m();return i.jsx(v,{children:i.jsx(O,{label:r._({id:"jDeFIG"}),checked:e,onChange:(s,o)=>t(o)})})},bo=({invert:e,updateSetting:t})=>{const{i18n:r,_:n}=m();return i.jsx(v,{children:i.jsx(O,{label:r._({id:"ACNGjp"}),checked:e,onChange:(s,o)=>t(o)})})},yo=({settings:{customFilter:e},updateSetting:t,onDefault:r,setTransparent:n})=>{const s=(o,c)=>{t("customFilter",o,c),n==null||n(c===void 0?!1:!c)};return i.jsxs(v,{sx:{gap:2},children:[i.jsx(mo,{brightness:e.brightness,updateSetting:(o,c,a)=>s({...e,[o]:c},a)}),i.jsx(So,{contrast:e.contrast,updateSetting:(o,c,a)=>s({...e,[o]:c},a)}),i.jsx(vo,{saturate:e.saturate,updateSetting:(o,c,a)=>s({...e,[o]:c},a)}),i.jsx(Eo,{hue:e.hue,updateSetting:(o,c,a)=>s({...e,[o]:c},a)}),i.jsx(To,{rgba:e.rgba,updateSetting:(o,c,a)=>s({...e,[o]:c},a)}),i.jsx(Po,{sepia:e.sepia,updateSetting:o=>s({...e,sepia:o})}),i.jsx(Ao,{grayscale:e.grayscale,updateSetting:o=>s({...e,grayscale:o})}),i.jsx(bo,{invert:e.invert,updateSetting:o=>s({...e,invert:o})}),i.jsx(v,{sx:{alignItems:"end"},children:i.jsx(Ae,{onClick:()=>r==null?void 0:r("customFilter"),variant:"outlined"})})]})},Io={[xe.PREVIOUS]:{title:{id:"DHhJ7s"},icon:null},[xe.MANGA]:{title:{id:"uB8LjK"},icon:null}},Oo=Object.values(xe).filter(e=>typeof e=="number"),Co=({exitMode:e,setExitMode:t})=>{const{i18n:r,_:n}=m();return i.jsx($,{label:r._({id:"dg7Dm2"}),value:e,values:Oo,setValue:t,valueToDisplayData:Io})},jo=({autoScroll:e,setAutoScroll:t})=>{const{i18n:r,_:n}=m();return i.jsxs(i.Fragment,{children:[i.jsx(O,{label:r._({id:"Tl3N0W"}),checked:e.smooth,onChange:(s,o)=>t({...e,smooth:o},!0)}),i.jsx(z,{label:r._({id:"IhlXcK"}),value:r._({id:"RRgNMe",values:{0:e.value}}),onDefault:()=>t({...e,value:y.autoScroll.value},!0),slotProps:{slider:{defaultValue:y.customFilter.saturate.value,value:e.value,...Jr,onChange:(s,o)=>{t({...e,value:o},!1)},onChangeCommitted:(s,o)=>{t({...e,value:o},!0)}}}})]})},Do={[he.TINY]:{title:{id:"D/xnlN"},icon:null},[he.SMALL]:{title:{id:"4Revpc"},icon:null},[he.MEDIUM]:{title:{id:"agPptk"},icon:null},[he.LARGE]:{title:{id:"k7rCa/"},icon:null}},wo=Object.values(he).filter(e=>typeof e=="number"),Mo=({scrollAmount:e,setScrollAmount:t})=>{const{i18n:r,_:n}=m();return i.jsxs(i.Fragment,{children:[i.jsx($,{label:r._({id:"txAJtk"}),value:e,values:wo,setValue:s=>t(s,!0),valueToDisplayData:Do}),i.jsx(z,{label:r._({id:"Gg3jnH"}),value:"".concat(e,"%"),onDefault:()=>t(y.scrollAmount,!0),slotProps:{slider:{defaultValue:y.scrollAmount,value:e,...qr,onChange:(s,o)=>{t(o,!1)},onChangeCommitted:(s,o)=>{t(o,!0)}}}})]})},Lo=({settings:e,updateSetting:t,onDefault:r,isDefaultable:n})=>{const{i18n:s,_:o}=m();return i.jsxs(v,{sx:{gap:2},children:[i.jsx(Co,{exitMode:e.exitMode,setExitMode:c=>t("exitMode",c)}),i.jsx(Mo,{scrollAmount:e.scrollAmount,setScrollAmount:(c,a)=>t("scrollAmount",c,a)}),i.jsx(O,{label:s._({id:"sjmndi"}),checked:e.shouldSkipDupChapters,onChange:(c,a)=>t("shouldSkipDupChapters",a)}),i.jsx(O,{label:i.jsxs(J,{children:[i.jsx(b,{children:s._({id:"HB6DOG"})}),n&&i.jsx(b,{variant:"body2",color:"textDisabled",children:s._({id:"Nyj0Xj"})})]}),checked:e.shouldSkipFilteredChapters,onChange:(c,a)=>t("shouldSkipFilteredChapters",a),disabled:n}),(Cn(e.readingMode.value)||!n)&&i.jsx(O,{label:s._({id:"GSVtIx"}),checked:e.shouldOffsetDoubleSpreads.value,onChange:(c,a)=>t("shouldOffsetDoubleSpreads",a)}),i.jsx(O,{label:i.jsxs(J,{children:[i.jsx(b,{children:s._({id:"rGFDEn"})}),i.jsx(b,{variant:"body2",color:"textDisabled",children:s._({id:"Rd3UzG"})})]}),checked:e.shouldUseInfiniteScroll,onChange:(c,a)=>t("shouldUseInfiniteScroll",a)}),i.jsx(O,{label:i.jsxs(J,{children:[i.jsx(b,{children:s._({id:"RvZJsb"})}),i.jsx(b,{variant:"body2",color:"textDisabled",children:s._({id:"qqCjXP"})})]}),checked:e.shouldShowReadingModePreview,onChange:(c,a)=>t("shouldShowReadingModePreview",a)}),i.jsx(O,{label:i.jsxs(J,{children:[i.jsx(b,{children:s._({id:"CfMzBU"})}),i.jsx(b,{variant:"body2",color:"textDisabled",children:s._({id:"0h+zMK"})})]}),checked:e.shouldShowTapZoneLayoutPreview,onChange:(c,a)=>t("shouldShowTapZoneLayoutPreview",a)}),i.jsx(O,{label:i.jsxs(J,{children:[i.jsx(b,{children:s._({id:"blybnC"})}),i.jsx(b,{variant:"body2",color:"textDisabled",children:s._({id:"mUFLa0"})})]}),checked:e.shouldUseAutoWebtoonMode,onChange:(c,a)=>t("shouldUseAutoWebtoonMode",a)}),i.jsx(O,{label:s._({id:"rbXbhb"}),checked:e.shouldShowTransitionPage,onChange:(c,a)=>t("shouldShowTransitionPage",a)}),i.jsx(O,{label:s._({id:"XGqMul"}),checked:e.shouldInformAboutMissingChapter,onChange:(c,a)=>t("shouldInformAboutMissingChapter",a)}),i.jsx(O,{label:s._({id:"HIzS0G"}),checked:e.shouldInformAboutScanlatorChange,onChange:(c,a)=>t("shouldInformAboutScanlatorChange",a)}),i.jsx(jo,{autoScroll:e.autoScroll,setAutoScroll:(...c)=>t("autoScroll",...c)}),i.jsx(z,{label:s._({id:"plKWgh"}),value:e.imagePreLoadAmount,onDefault:()=>r==null?void 0:r("imagePreLoadAmount"),slotProps:{slider:{defaultValue:y.imagePreLoadAmount,value:e.imagePreLoadAmount,step:Xe.step,min:Xe.min,max:Xe.max,onChange:(c,a)=>{t("imagePreLoadAmount",a,!1)},onChangeCommitted:(c,a)=>{t("imagePreLoadAmount",a,!0)}}}})]})},No=Qr(b)(({theme:e})=>({display:"inline-block",padding:"0.2em 0.4em",fontSize:"0.85em",lineHeight:"1.4",color:e.palette.text.primary,backgroundColor:e.palette.background.paper,border:"1px solid ".concat(e.palette.divider),borderRadius:"3px",boxShadow:"inset 0 -1px 0 ".concat(e.palette.divider),fontFamily:"monospace, monospace"})),Pr=({keys:e,removeKey:t})=>{const{i18n:r,_:n}=m();return i.jsx(v,{sx:{flexDirection:"row",flexWrap:"wrap",gap:1},children:e.map((s,o)=>i.jsxs(E.Fragment,{children:[i.jsx(ke,{title:r._({id:"cnGeoo"}),hidden:!t,children:i.jsx(v,{sx:{flexDirection:"row",flexWrap:"wrap",gap:.5,cursor:t?"pointer":void 0},onClick:()=>t==null?void 0:t(s),children:s.split("+").map((c,a,l)=>i.jsxs(E.Fragment,{children:[i.jsx(No,{children:c}),a===l.length-1?"":"+"]},c))})}),o===e.length-1?"":","]},s))})},Uo=({onClose:e,onCreate:t,existingKeys:r})=>{const{i18n:n,_:s}=m(),[o,{start:c,stop:a,resetKeys:l}]=en(),d=[[...o].join("+")],_=d.some(u=>r.map(g=>g.toLowerCase()).includes(u.toLowerCase()));return E.useEffect(()=>(c(),()=>{a()}),[]),i.jsxs(tn,{open:!0,onClose:e,fullWidth:!0,children:[i.jsx(rn,{children:n._({id:"Y5/RTg"})}),i.jsxs(nn,{children:[i.jsx(v,{sx:{flexDirection:"row",gap:1},children:i.jsx(sn,{id:"+3CabJ",values:{0:o.size?i.jsx(Pr,{keys:d}):i.jsx(b,{children:n._({id:"Iae/Ei"})})}})}),_&&i.jsx(b,{color:"error",children:n._({id:"IX31GV"})})]}),i.jsx(on,{children:i.jsxs(v,{direction:"row",sx:{justifyContent:"space-between",width:"100%"},children:[i.jsx(te,{onClick:l,children:n._({id:"OfhWJH"})}),i.jsxs(v,{direction:"row",children:[i.jsx(te,{onClick:e,children:n._({id:"dEgA5A"})}),i.jsx(te,{disabled:_,onClick:()=>{e(),t(d)},children:n._({id:"hYgDIe"})})]})]})})]})},$o={[w.PREVIOUS_PAGE]:{id:"aHKcKc"},[w.NEXT_PAGE]:{id:"/dqduX"},[w.SCROLL_BACKWARD]:{id:"hTwRFX"},[w.SCROLL_FORWARD]:{id:"gD+bj5"},[w.PREVIOUS_CHAPTER]:{id:"S9gT2s"},[w.NEXT_CHAPTER]:{id:"05zAhA"},[w.TOGGLE_MENU]:{id:"4gAX8s"},[w.CYCLE_SCALE_TYPE]:{id:"ep1O8c"},[w.STRETCH_IMAGE]:{id:"mAlazW"},[w.OFFSET_SPREAD_PAGES]:{id:"+bIiFB"},[w.CYCLE_READING_MODE]:{id:"j75WfO"},[w.CYCLE_READING_DIRECTION]:{id:"aSq7q3"},[w.TOGGLE_AUTO_SCROLL]:{id:"A+Rlxa"},[w.AUTO_SCROLL_SPEED_INCREASE]:{id:"y9O1X7"},[w.AUTO_SCROLL_SPEED_DECREASE]:{id:"BmzMzm"},[w.EXIT_READER]:{id:"2mxCGH"}},Bo=({hotkey:e,keys:t,existingKeys:r,updateSetting:n})=>{const{i18n:s,_:o}=m(),c=an({popupId:"reader-setting-record-hotkey",variant:"dialog"});return i.jsxs(i.Fragment,{children:[i.jsxs(v,{sx:{flexDirection:"row",alignItems:"center",gap:1},children:[i.jsx(b,{sx:{flexGrow:1},children:s._($o[e])}),i.jsx(Pr,{keys:t,removeKey:a=>n(t.filter(l=>l!==a))}),i.jsx(ke,{title:s._({id:"m16xKo"}),children:i.jsx(nr,{...cn(c),color:"inherit",children:i.jsx(xn,{})})}),i.jsx(Ae,{asIconButton:!0,onClick:()=>n(y.hotkeys[e])})]}),c.isOpen&&i.jsx(Uo,{onClose:c.close,onCreate:a=>n([...t,...a]),existingKeys:r})]})},ko=({settings:e,updateSetting:t,onDefault:r})=>{const{i18n:n,_:s}=m();return i.jsxs(v,{sx:{gap:2},children:[i.jsx(v,{sx:{alignItems:"end"},children:i.jsx(b,{variant:"caption",children:n._({id:"jSx2E1"})})}),ln.map(o=>i.jsx(Bo,{hotkey:o,keys:e.hotkeys[o],existingKeys:Object.values(e.hotkeys).flat(),updateSetting:c=>t("hotkeys",{...e.hotkeys,[o]:c})},o)),i.jsx(v,{sx:{alignItems:"end"},children:i.jsx(Ae,{onClick:()=>r==null?void 0:r("hotkeys"),variant:"outlined"})})]})},Go=(e,t,r)=>E.memo(({ref:n,...s})=>{const o=t.reduce((l,d)=>({...l,...d(s)}),{}),c=Object.fromEntries(Object.entries(o).filter(([l])=>r.includes(l))),a={...s,...c};return i.jsx(e,{...a,ref:n})}),Fo=({activeTab:e,setActiveTab:t,areDefaultSettings:r,settings:n,updateSetting:s,deleteSetting:o,mode:c,setTransparent:a})=>{const{i18n:l,_:d}=m(),_=Be.useIsTouchDevice();return i.jsxs(i.Fragment,{children:[i.jsx(dn,{value:e,onChange:(u,g)=>t(g),sx:{...P(!!r,{zIndex:2}),...P(!r,{backgroundColor:"background.paper",backgroundImage:"var(--Paper-overlay)"})},children:Object.values(Rt).map(({id:u,label:g,supportsTouchDevices:h})=>!h&&_?null:i.jsx(gn,{value:u,label:l._(g),sx:{flexGrow:1,maxWidth:"unset",textTransform:"none"}},u))}),i.jsx(J,{sx:{p:r?void 0:2,overflowX:"hidden"},children:Object.values(Rt).map(({id:u,supportsTouchDevices:g})=>{if(!g&&_)return null;switch(u){case de.LAYOUT:return r?i.jsx(se,{index:u,currentIndex:e,children:i.jsx(Er,{readingMode:n.readingMode,updateSetting:(...h)=>s(...h)})},u):i.jsx(se,{index:u,currentIndex:e,children:i.jsx(Rr,{settings:n,updateSetting:(...h)=>s(...h),isDefaultable:!r,onDefault:(...h)=>o==null?void 0:o(...h),isSeriesMode:!0,setTransparent:a})},u);case de.GENERAL:return i.jsx(se,{index:u,currentIndex:e,sx:{p:r?2:void 0},children:i.jsx(xo,{overlayMode:c,settings:n,updateSetting:(...h)=>s(...h),isDefaultable:!r,onDefault:(...h)=>o==null?void 0:o(...h)})},u);case de.FILTER:return i.jsx(se,{index:u,currentIndex:e,sx:{p:r?2:void 0},children:i.jsx(yo,{settings:n,updateSetting:(...h)=>s(...h),isDefaultable:!0,onDefault:(...h)=>o==null?void 0:o(...h),setTransparent:a})},u);case de.BEHAVIOUR:return i.jsx(se,{index:u,currentIndex:e,sx:{p:r?2:void 0},children:i.jsx(Lo,{settings:n,updateSetting:(...h)=>s(...h),isDefaultable:!r,onDefault:(...h)=>o==null?void 0:o(...h)})},u);case de.HOTKEYS:return i.jsx(se,{index:u,currentIndex:e,sx:{p:r?2:void 0},children:i.jsx(ko,{settings:n,updateSetting:(...h)=>s(...h),isDefaultable:!0,onDefault:(...h)=>o==null?void 0:o(...h)})},u);default:throw new Error('Unexpected "ReaderSettingTab" ('.concat(u,")"))}})})]})},Li=Go(Fo,[ct.useOverlayMode],["mode"]);export{Mi as $,di as A,Cn as B,fi as C,pi as D,ui as E,mi as F,hi as G,Zs as H,Sr as I,Us as J,jo as K,Ei as L,Ii as M,yi as N,Ri as O,bi as P,De as Q,Li as R,ws as S,ys as T,_i as U,Ht as V,Ai as W,li as X,Oi as Y,ji as Z,lr as _,ct as a,ii as a0,ai as a1,wi as a2,Di as a3,ti as a4,ci as a5,ir as a6,zt as a7,ri as a8,Qe as b,ds as c,xi as d,Si as e,oi as f,ut as g,gi as h,q as i,je as j,Kt as k,Wt as l,Yt as m,ni as n,cr as o,bs as p,Ce as q,Ti as r,Pi as s,Cs as t,Sn as u,Ci as v,Go as w,ge as x,si as y,vi as z};
