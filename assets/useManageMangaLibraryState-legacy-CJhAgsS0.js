!function(){var e,n=["title","Icon"],t=["children"],r=["children","onClose"];function o(e,n){return n||(n=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(n)}}))}function a(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */var e,n,t="function"==typeof Symbol?Symbol:{},r=t.iterator||"@@iterator",o=t.toStringTag||"@@toStringTag";function u(t,r,o,a){var u=r&&r.prototype instanceof l?r:l,s=Object.create(u.prototype);return i(s,"_invoke",function(t,r,o){var a,i,u,l=0,s=o||[],d=!1,f={p:0,n:0,v:e,a:v,f:v.bind(e,4),d:function(n,t){return a=n,i=0,u=e,f.n=t,c}};function v(t,r){for(i=t,u=r,n=0;!d&&l&&!o&&n<s.length;n++){var o,a=s[n],v=f.p,g=a[2];t>3?(o=g===r)&&(u=a[(i=a[4])?5:(i=3,3)],a[4]=a[5]=e):a[0]<=v&&((o=t<2&&v<a[1])?(i=0,f.v=r,f.n=a[1]):v<g&&(o=t<3||a[0]>r||r>g)&&(a[4]=t,a[5]=r,f.n=g,i=0))}if(o||t>1)return c;throw d=!0,r}return function(o,s,g){if(l>1)throw TypeError("Generator is already running");for(d&&1===s&&v(s,g),i=s,u=g;(n=i<2?e:u)||!d;){a||(i?i<3?(i>1&&(f.n=-1),v(i,u)):f.n=u:f.v=u);try{if(l=2,a){if(i||(o="next"),n=a[o]){if(!(n=n.call(a,u)))throw TypeError("iterator result is not an object");if(!n.done)return n;u=n.value,i<2&&(i=0)}else 1===i&&(n=a.return)&&n.call(a),i<2&&(u=TypeError("The iterator does not provide a '"+o+"' method"),i=1);a=e}else if((n=(d=f.n<0)?u:t.call(r,f))!==c)break}catch(n){a=e,i=1,u=n}finally{l=1}}return{value:n,done:d}}}(t,o,a),!0),s}var c={};function l(){}function s(){}function d(){}n=Object.getPrototypeOf;var f=[][r]?n(n([][r]())):(i(n={},r,function(){return this}),n),v=d.prototype=l.prototype=Object.create(f);function g(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,d):(e.__proto__=d,i(e,o,"GeneratorFunction")),e.prototype=Object.create(v),e}return s.prototype=d,i(v,"constructor",d),i(d,"constructor",s),s.displayName="GeneratorFunction",i(d,o,"GeneratorFunction"),i(v),i(v,o,"Generator"),i(v,r,function(){return this}),i(v,"toString",function(){return"[object Generator]"}),(a=function(){return{w:u,m:g}})()}function i(e,n,t,r){var o=Object.defineProperty;try{o({},"",{})}catch(e){o=0}i=function(e,n,t,r){if(n)o?o(e,n,{value:t,enumerable:!r,configurable:!r,writable:!r}):e[n]=t;else{function a(n,t){i(e,n,function(e){return this._invoke(n,t,e)})}a("next",0),a("throw",1),a("return",2)}},i(e,n,t,r)}function u(e,n,t,r,o,a,i){try{var u=e[a](i),c=u.value}catch(e){return void t(e)}u.done?n(c):Promise.resolve(c).then(r,o)}function c(e){return function(){var n=this,t=arguments;return new Promise(function(r,o){var a=e.apply(n,t);function i(e){u(a,r,o,i,c,"next",e)}function c(e){u(a,r,o,i,c,"throw",e)}i(void 0)})}}function l(e,n){for(var t=0;t<n.length;t++){var r=n[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,y(r.key),r)}}function s(e){return function(e){if(Array.isArray(e))return v(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||f(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function d(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){var t=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var r,o,a,i,u=[],c=!0,l=!1;try{if(a=(t=t.call(e)).next,0===n){if(Object(t)!==t)return;c=!1}else for(;!(c=(r=a.call(t)).done)&&(u.push(r.value),u.length!==n);c=!0);}catch(e){l=!0,o=e}finally{try{if(!c&&null!=t.return&&(i=t.return(),Object(i)!==i))return}finally{if(l)throw o}}return u}}(e,n)||f(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function f(e,n){if(e){if("string"==typeof e)return v(e,n);var t={}.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?v(e,n):void 0}}function v(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=Array(n);t<n;t++)r[t]=e[t];return r}function g(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),t.push.apply(t,r)}return t}function b(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?g(Object(t),!0).forEach(function(n){m(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):g(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}function m(e,n,t){return(n=y(n))in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function y(e){var n=function(e,n){if("object"!=h(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,n||"default");if("object"!=h(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===n?String:Number)(e)}(e,"string");return"symbol"==h(n)?n:n+""}function p(e,n){if(null==e)return{};var t,r,o=function(e,n){if(null==e)return{};var t={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==n.indexOf(r))continue;t[r]=e[r]}return t}(e,n);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)t=a[r],-1===n.indexOf(t)&&{}.propertyIsEnumerable.call(e,t)&&(o[t]=e[t])}return o}function h(e){return h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},h(e)}System.register(["./index-legacy-XH4M4Y4l.js","./ThreeStateCheckboxInput-legacy-eznoKRHo.js","./CheckboxInput-legacy-vhUTTjFi.js","./FormGroup-legacy-Cb9-DoSp.js"],function(i,u){"use strict";var f,v,g,y,w,x,C,j,S,k,O,T,M,E,I,L,P,_,A,R,D,F,N,z,B,G,K,U,H,V,W,X,Y,q,$,J;return{setters:[function(e){f=e.b,v=e.c,g=e.j,y=e.aD,w=e.aE,x=e.p,C=e.ax,j=e.B,S=e.a7,k=e.u,O=e.r,T=e.ec,M=e.i,E=e.k,I=e.n,L=e.q,P=e.S,_=e.A,A=e.L,R=e.ed,D=e.W,F=e.m,N=e.g,z=e.$,B=e.f,G=e.ee,K=e.O,U=e.ef,H=e.P,V=e.d,W=e.ba,X=e.cg,Y=e.eg},function(e){q=e.T},function(e){$=e.C},function(e){J=e.F}],execute:function(){i({V:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},t=n.threshold,r=void 0===t?400:t,o=n.captureEvent,a=void 0!==o&&o,i=n.detect,c=void 0===i?u.Pointer:i,l=n.cancelOnMovement,s=void 0!==l&&l,d=n.cancelOutsideElement,v=void 0===d||d,g=n.filterEvents,b=n.onStart,m=n.onMove,y=n.onFinish,p=n.onCancel,h=f.useRef(!1),w=f.useRef(!1),x=f.useRef(),C=f.useRef(),j=f.useRef(e),S=f.useRef(null),k=f.useCallback(function(e){return function(n){w.current||re(n)&&(void 0!==g&&!g(n)||(a&&n.persist(),null==b||b(n,{context:e}),S.current=oe(n),w.current=!0,x.current=n.currentTarget,C.current=setTimeout(function(){j.current&&(j.current(n,{context:e}),h.current=!0)},r)))}},[a,g,b,r]),O=f.useCallback(function(e){return function(n,t){re(n)&&w.current&&(S.current=null,a&&n.persist(),h.current?null==y||y(n,{context:e}):w.current&&(null==p||p(n,{context:e,reason:null!=t?t:Q.CancelledByRelease})),h.current=!1,w.current=!1,void 0!==C.current&&clearTimeout(C.current))}},[a,y,p]),T=f.useCallback(function(e){return function(n){if(re(n)&&(null==m||m(n,{context:e}),!1!==s&&S.current)){var t=oe(n);if(t){var r=!0===s?25:s,o={x:Math.abs(t.x-S.current.x),y:Math.abs(t.y-S.current.y)};(o.x>r||o.y>r)&&O(e)(n,Q.CancelledByMovement)}}}},[O,s,m]),M=f.useCallback(function(n){if(null===e)return{};switch(c){case u.Mouse:var t={onMouseDown:k(n),onMouseMove:T(n),onMouseUp:O(n)};return v&&(t.onMouseLeave=function(e){O(n)(e,Q.CancelledOutsideElement)}),t;case u.Touch:return{onTouchStart:k(n),onTouchMove:T(n),onTouchEnd:O(n)};case u.Pointer:var r={onPointerDown:k(n),onPointerMove:T(n),onPointerUp:O(n)};return v&&(r.onPointerLeave=function(e){return O(n)(e,Q.CancelledOutsideElement)}),r}},[e,O,v,c,T,k]);return f.useEffect(function(){function e(e){var n=function(e){return{target:e.target,currentTarget:e.currentTarget,nativeEvent:e,persist:function(){}}}(e);O()(n)}return window.addEventListener("mouseup",e),window.addEventListener("touchend",e),window.addEventListener("pointerup",e),function(){window.removeEventListener("mouseup",e),window.removeEventListener("touchend",e),window.removeEventListener("pointerup",e)}},[O]),f.useEffect(function(){return function(){void 0!==C.current&&clearTimeout(C.current)}},[]),f.useEffect(function(){j.current=e},[e]),M},f:function(e,n){var t=be(e,n);return ge(t,n)},n:be});var u=function(e){return e.Mouse="mouse",e.Touch="touch",e.Pointer="pointer",e}(u||{}),Q=function(e){return e.CancelledByMovement="cancelled-by-movement",e.CancelledByRelease="cancelled-by-release",e.CancelledOutsideElement="cancelled-outside-element",e}(Q||{}),Z=["mousedown","mousemove","mouseup","mouseleave","mouseout"],ee=["touchstart","touchmove","touchend","touchcancel"],ne=["pointerdown","pointermove","pointerup","pointerleave","pointerout"];function te(e){var n;return ee.includes(null==(n=null==e?void 0:e.nativeEvent)?void 0:n.type)||"touches"in e}function re(e){return function(e){var n;return Z.includes(null==(n=null==e?void 0:e.nativeEvent)?void 0:n.type)}(e)||te(e)||function(e){var n=e.nativeEvent;return!!n&&(ne.includes(null==n?void 0:n.type)||"pointerId"in n)}(e)}function oe(e){var n,t=te(e)?null==(n=null==e?void 0:e.touches)?void 0:n[0]:e;return function(e){return"object"==h(e)&&null!==e&&"pageX"in e&&"number"==typeof e.pageX&&"pageY"in e&&"number"==typeof e.pageY}(t)?{x:t.pageX,y:t.pageY}:null}i("h",v(g.jsx("path",{d:"M19 5v14H5V5zm0-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2"}))),i("R",v(g.jsx("path",{d:"m1.79 12 5.58 5.59L5.96 19 .37 13.41zm.45-7.78L12.9 14.89l-1.28 1.28L7.44 12l-1.41 1.41L11.62 19l2.69-2.69 4.89 4.89 1.41-1.41L3.65 2.81zm14.9 9.27L23.62 7 22.2 5.59l-6.48 6.48zM17.96 7l-1.41-1.41-3.65 3.66 1.41 1.41z"}))),i("D",v(g.jsx("path",{d:"M9 16.2 4.8 12l-1.4 1.4L9 19 21 7l-1.4-1.4z"}))),i("F",v(g.jsx("path",{d:"M16.5 3c-1.74 0-3.41.81-4.5 2.09C10.91 3.81 9.24 3 7.5 3 4.42 3 2 5.42 2 8.5c0 3.78 3.4 6.86 8.55 11.54L12 21.35l1.45-1.32C18.6 15.36 22 12.28 22 8.5 22 5.42 19.58 3 16.5 3m-4.4 15.55-.1.1-.1-.1C7.14 14.24 4 11.39 4 8.5 4 6.5 5.5 5 7.5 5c1.54 0 3.04.99 3.57 2.36h1.87C13.46 5.99 14.96 5 16.5 5c2 0 3.5 1.5 3.5 3.5 0 2.89-3.14 5.74-7.9 10.05"}))),i("g",function(e){var t=e.title,r=e.Icon,o=p(e,n);return g.jsxs(y,b(b({},o),{},{children:[g.jsx(w,{children:g.jsx(r,{fontSize:"small"})}),g.jsx(x,{children:t})]}))}),i("j",function(e,n){return function(t,r){var o=r>0?" (".concat(r,")"):"";return"".concat(C(n[t].action[e?"single":"selected"])).concat(o)}}),i("e",function(e){return function(){return!e||arguments.length>0&&void 0!==arguments[0]&&arguments[0]}}),i("k",function(e){return function(n){return!e&&n}}),i("C",f.forwardRef(function(e,n){var r=e.children,o=p(e,t);return g.jsx(j,b(b({ref:n},o),{},{sx:b({minWidth:"unset",px:"10px"},o.sx),children:r}))})),i("l",v(g.jsx("path",{d:"M12 8c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2m0 2c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2m0 6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2"}))),i("M",function(e){var n=e.children,t=e.onClose,o=p(e,r),a=d(f.useState(!1),2),i=a[0],u=a[1];return g.jsx(S,b(b({},o),{},{open:o.open,onClose:t,sx:{visibility:!o.open||i?"hidden":"visible"},children:n(function(){t({},"backdropClick"),u(!1)},u)}))});var ae=i("u",function(e,n){var t,r=n.itemIds,o=void 0===r?[]:r,a=n.keyCount,i=void 0===a?e:a,u=n.currentKey,c=n.initialState,l=void 0===c?{}:c,v=d(f.useState(l),2),g=v[0],y=v[1],p=f.useRef(void 0),h=s(new Set(Object.values(g).flat())),w=h.length===e,x=!h.length,C=null!==(t=g[u])&&void 0!==t?t:[],j=C.length===i,S=0===C.length;S&&(p.current=void 0);var k=f.useCallback(function(e,n){var t,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=r.selectRange,i=void 0!==a&&a,c=r.key,l=void 0===c?u:c,d=!n,f=null!==(t=p.current)&&void 0!==t?t:{},v=f.id,g=f.key;p.current={id:e,key:l};var h=i&&l===g&&void 0!==v,w=h?o.indexOf(v):-1,x=h?o.indexOf(e):-1,C=h?o.slice(Math.min(w,x),Math.max(w,x)+1):[e];y(d?function(e){var n,t;return b(b({},e),{},m({},l,null!==(n=null===(t=e[l])||void 0===t?void 0:t.filter(function(e){return!C.includes(e)}))&&void 0!==n?n:[]))}:function(e){var n;return b(b({},e),{},m({},l,s(new Set([].concat(s(null!==(n=e[l])&&void 0!==n?n:[]),s(C))))))})},[u,o]),O=f.useCallback(function(e,n){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:u;switch(e){case!0:y(function(e){return b(b({},e),{},m({},t,s(n)))});break;case!1:y(function(e){return b(b({},e),{},m({},t,[]))})}},[u]),T=f.useCallback(function(e,n){y(function(t){return b(b({},t),{},m({},e,s(n)))})},[]),M=f.useCallback(function(e){return g[e]},[g]),E=f.useCallback(function(){y({})},[]),I=f.useCallback(function(){E(),y(l)},[E,l]);return{selectedItemIds:h,keySelectedItemIds:C,handleSelection:k,handleSelectAll:O,areAllItemsSelected:w,areNoItemsSelected:x,areAllItemsForKeySelected:j,areNoItemsForKeySelected:S,setSelectionForKey:T,getSelectionForKey:M,clearSelection:E,reset:I}}),ie=function(){return function(e,n,t){return n&&l(e.prototype,n),t&&l(e,t),Object.defineProperty(e,"prototype",{writable:!1}),e}(function e(){!function(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}(this,e)},null,[{key:"getIds",value:function(e){return e.map(function(e){return e.id})}},{key:"getUserCreated",value:function(e){return e.filter(function(e){return 0!==e.id})}},{key:"getDefaults",value:function(e){return e.filter(function(e){return e.default})}}])}(),ue=function(e,n,t,r){return!!n.includes(e)||(r||!t.includes(e))&&void 0};function ce(e){var n=k().t,t=e.open,r=e.onClose,o=e.mangaId,a=e.mangaIds,i=e.addToLibrary,u=void 0!==i&&i,c=void 0!==o,l=null!=a?a:[o],v=d(f.useState(!1),2),b=v[0],m=v[1],y=function(e){var n=O.useGetManga(R,null!=e?e:-1,{skip:void 0===e}).data;return f.useMemo(function(){return void 0!==e&&n?ie.getIds(n.manga.categories.nodes):[]},[null==n?void 0:n.manga.categories.nodes,e])}(o),p=O.useGetCategories(T).data,h=null==p?void 0:p.categories.nodes,w=f.useMemo(function(){return ie.getUserCreated(null!=h?h:[])},[h]),x=f.useMemo(function(){return u?ie.getIds(ie.getDefaults(w)):[]},[w]),C=ae(w.length,{currentKey:"categoriesToAdd",initialState:{categoriesToAdd:[].concat(s(y),s(x)),categoriesToRemove:[]}}),S=C.handleSelection,G=C.setSelectionForKey,K=C.getSelectionForKey;f.useEffect(function(){G("categoriesToAdd",[].concat(s(y),s(x))),G("categoriesToRemove",[])},[y]);var U=K("categoriesToAdd"),H=K("categoriesToRemove"),V=function(){G("categoriesToAdd",y),G("categoriesToRemove",[]),r(!1)};return g.jsxs(M,{sx:{".MuiDialog-paper":{maxHeight:435,width:"80%"}},maxWidth:"xs",open:t,onClose:V,children:[g.jsx(E,{children:n("category.title.set_categories")}),g.jsx(I,{dividers:!0,children:g.jsxs(J,{children:[0===w.length&&g.jsx("span",{children:n("category.error.no_categories_found.label.info")}),w.map(function(e){return g.jsx(q,{checked:ue(e.id,U,H,c),onChange:function(n){S(e.id,!1,{key:"categoriesToAdd"}),S(e.id,!1,{key:"categoriesToRemove"}),n&&S(e.id,!0,{key:"categoriesToAdd"}),!1===n&&S(e.id,!0,{key:"categoriesToRemove"})},label:e.name},e.id)})]})}),g.jsx(L,{children:g.jsxs(P,{sx:{width:"100%"},children:[u&&g.jsx($,{sx:{margin:0},size:"small",label:n("global.button.dont_show_dialog_again"),onChange:function(e){return m(e.target.checked)}}),g.jsxs(P,{direction:"row",sx:{justifyContent:"space-between",alignItems:"end",width:"100%"},children:[g.jsx(j,{component:A,to:_.settings.childRoutes.categories.path,children:n(w.length?"global.button.edit":"global.button.create")}),g.jsxs(P,{direction:"row",children:[g.jsx(j,{autoFocus:!0,onClick:V,color:"primary",children:n("global.button.cancel")}),!!w.length&&g.jsx(j,{onClick:function(){var e=c?U.filter(function(e){return!y.includes(e)}):U,t=c?y.filter(function(e){return!U.includes(e)}):H;r(!0,e,t),b&&D("showAddToLibraryCategorySelectDialog",!1).catch(function(e){return F(n("search.error.label.failed_to_save_settings"),"error",N(e))}),(!!e.length||!!t.length)&&(u||z.performAction("change_categories",l,{changeCategoriesPatch:{addToCategories:e,removeFromCategories:t}}).catch(B()))},color:"primary",children:n("global.button.ok")})]})]})]})})]})}var le=i("d",function(e){var n=e.mangaId,t=e.mangaIds,r=e.onClose,o=e.addToLibrary,a=d(f.useState(!1),2),i=a[0],u=a[1],c=f.useMemo(function(){return i?g.jsx(ce,{open:i,onClose:function(){u(!1);for(var e=arguments.length,n=new Array(e),t=0;t<e;t++)n[t]=arguments[t];null==r||r.apply(void 0,n)},mangaId:n,mangaIds:t,addToLibrary:o}):null},[n,t,o,r,i]);return{openCategorySelect:u,CategorySelectComponent:c}}),se=b({},U),de=function(e){return b(b({},e),{},{excludedScanlators:JSON.stringify(e.excludedScanlators)})},fe=function(e,n,t){return function(e){return K("manga",e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:se,void 0,arguments.length>2?arguments[2]:void 0)}(b(b({},e),{},{meta:H(e.meta)}),n,t)},ve=(i("m",function(e,n){return fe(e,n)}),function(){var e=c(a().m(function e(n,t,r){return a().w(function(e){for(;;)if(0===e.n)return e.a(2,G(n,[[t,de(m({},t,r))[t]]]))},e)}));return function(n,t,r){return e.apply(this,arguments)}}());var ge=function(e,n){var t=n.sortBy,r=n.reverse,o=s(e);switch(t){case"source":o.sort(function(e,n){return e.sourceOrder-n.sourceOrder});break;case"fetchedAt":o.sort(function(e,n){var t,r;return Number(null!==(t=e.fetchedAt)&&void 0!==t?t:0)-Number(null!==(r=n.fetchedAt)&&void 0!==r?r:0)});break;case"chapterNumber":o.sort(function(e,n){return e.chapterNumber-n.chapterNumber});break;case"uploadedAt":o.sort(function(e,n){var t,r;return Number(null!==(t=e.uploadDate)&&void 0!==t?t:0)-Number(null!==(r=n.uploadDate)&&void 0!==r?r:0)})}return r&&o.reverse(),o};function be(e,n){return e.filter(function(e){return function(e,n){var t=n.isRead;switch(e){case!0:return!t;case!1:return t;default:return!0}}(n.unread,e)&&function(e,n){var t=n.isDownloaded;switch(e){case!0:return t;case!1:return!t;default:return!0}}(n.downloaded,e)&&function(e,n){var t=n.isBookmarked;switch(e){case!0:return t;case!1:return!t;default:return!0}}(n.bookmarked,e)&&(t=n.excludedScanlators,!(r=e.scanlator)||!t.includes(r));var t,r})}i("i",function(e){var n=e.unread,t=e.downloaded,r=e.bookmarked,o=e.excludedScanlators;return null!=n||null!=t||null!=r||!!o.length}),i("a",function(e){var n,t,r,o=(r=fe(n=e,t,f.useEffect),f.useMemo(function(){return r},[n,t])),a=o.unread,i=o.downloaded,u=o.bookmarked,c=o.reverse,l=o.sortBy,s=o.showChapterNumber,d=o.excludedScanlators;return f.useMemo(function(){return{unread:a,downloaded:i,bookmarked:u,reverse:c,sortBy:l,showChapterNumber:s,excludedScanlators:d}},[a,i,u,c,l,s,d])}),i("b",function(e){return function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:B();return function(t,r){return ve(e,t,r).catch(n)}}(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:B())}),i("c",function(n){var t,r,i=arguments.length>1&&void 0!==arguments[1]&&arguments[1],u=k().t,l=V(),s=d(f.useState(!!n.inLibrary),2),v=s[0],g=s[1],b=f.useCallback(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];e&&O.updateManga(n.id,{updateManga:{inLibrary:!0},updateMangaCategories:{addToCategories:t,removeFromCategories:r}}).response.then(function(){return F(u("library.info.label.added_to_library"),"success")}).then(function(){return g(!0)}).catch(function(e){F(u("library.error.label.add_to_library"),"error",N(e))})},[n.id]),m=f.useCallback(c(a().m(function e(){return a().w(function(e){for(;;)switch(e.n){case 0:if(!i){e.n=1;break}return e.n=1,W({title:u("global.label.are_you_sure"),message:u("manga.action.library.remove.dialog.label.message",{title:n.title}),actions:{confirm:{title:u("global.button.remove")}}});case 1:return e.n=2,z.removeFromLibrary([n.id],!0);case 2:g(!1);case 3:return e.a(2)}},e)})),[n.id,i]),y=le({mangaId:n.id,addToLibrary:!0,onClose:b}),p=y.openCategorySelect,h=y.CategorySelectComponent,w=f.useCallback(function(){var e=function(){var t=c(a().m(function t(){var r,o,i,c,s,d,f,g;return a().w(function(t){for(;;)switch(t.p=t.n){case 0:if(!v){t.n=1;break}return m().catch(B()),t.a(2);case 1:return t.p=1,t.n=2,Y();case 2:o=t.v.showAddToLibraryCategorySelectDialog,t.n=4;break;case 3:return t.p=3,d=t.v,F(u("global.error.label.failed_to_load_data"),"error",N(d)),t.a(2);case 4:return t.p=4,t.n=5,O.getCategories(T).response;case 5:i=t.v,t.n=7;break;case 6:return t.p=6,f=t.v,F(u("category.error.label.request_failure"),"error",N(f)),t.a(2);case 7:return c=ie.getUserCreated(i.data.categories.nodes),t.p=8,t.n=9,z.getDuplicateLibraryMangas(n.title).response;case 9:s=t.v,t.n=11;break;case 10:return t.p=10,g=t.v,t.n=11,W({title:u("global.error.label.failed_to_load_data"),message:u("manga.action.library.add.dialog.duplicate.label.failure",{error:N(g)}),actions:{extra:{show:!0,title:u("global.button.retry"),contain:!0},confirm:{title:u("global.button.add")}},onExtra:function(){return e().catch(B())}});case 11:if(!(null===(r=s)||void 0===r?void 0:r.data.mangas.totalCount)){t.n=12;break}return t.n=12,W({title:u("global.label.are_you_sure"),message:u("manga.action.library.add.dialog.duplicate.label.info"),actions:{extra:{show:!0,title:u("migrate.dialog.action.button.show_entry"),contain:!0},confirm:{title:u("global.button.add")}},onExtra:function(){return l(_.manga.path(s.data.mangas.nodes[0].id))}});case 12:if(o&&!!c.length){t.n=13;break}return b(!0,ie.getIds(ie.getDefaults(c))),t.a(2);case 13:p(!0);case 14:return t.a(2)}},t,null,[[8,10],[4,6],[1,3]])}));return function(){return t.apply(this,arguments)}}();e().catch(B())},[v,m,b]);return{CategorySelectComponent:h,updateLibraryState:w,isInLibrary:null!==(t=null===(r=z.getFromCache(n.id,X(e||(e=o(["\n                    fragment MangaInLibraryState on MangaType {\n                        inLibrary\n                    }\n                "]))),"MangaInLibraryState"))||void 0===r?void 0:r.inLibrary)&&void 0!==t?t:v}})}}})}();
