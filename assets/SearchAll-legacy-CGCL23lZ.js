!function(){function e(e){return function(e){if(Array.isArray(e))return t(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||n(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function r(e,r){return function(e){if(Array.isArray(e))return e}(e)||function(e,r){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var t,a,o,s,l=[],u=!0,i=!1;try{if(o=(n=n.call(e)).next,0===r){if(Object(n)!==n)return;u=!1}else for(;!(u=(t=o.call(n)).done)&&(l.push(t.value),l.length!==r);u=!0);}catch(e){i=!0,a=e}finally{try{if(!u&&null!=n.return&&(s=n.return(),Object(s)!==s))return}finally{if(i)throw a}}return l}}(e,r)||n(e,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function n(e,r){if(e){if("string"==typeof e)return t(e,r);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?t(e,r):void 0}}function t(e,r){(null==r||r>e.length)&&(r=e.length);for(var n=0,t=Array(r);n<r;n++)t[n]=e[n];return t}System.register(["./index-legacy-CGEKhvW_.js","./AppbarSearch-legacy-BXi0e--U.js","./LanguageSelect-legacy-BGnPSV0S.js","./useDebounce-legacy-UrpV7V6W.js","./BaseMangaGrid-legacy-ADqbKYxz.js","./Sources-legacy-BZgWuj4L.js","./ChaptersDownloadActionMenuItems-legacy-BYgTVRrL.js","./Trackers-legacy-CN_LuGVd.js","./Avatar-legacy-B1ikuPre.js","./CheckCircle-legacy-5lA7g_x4.js","./ListPreference-legacy-gF2BPq74.js","./NumberSetting-legacy-C_vgyR7M.js","./useMobilePicker-legacy-BQsoWXX2.js","./Chip-legacy-CoNqmvn_.js","./SelectSetting-legacy-BUqOHnVh.js","./FilterList-legacy-rn6G3f5o.js","./MangaGrid-legacy-Drs3NUxH.js","./Sync-legacy-BBHH30p2.js","./PlayArrow-legacy-3dDFGco3.js","./StyledFab-legacy-DXlE3cc1.js"],(function(n,t){"use strict";var a,o,s,l,u,i,c,g,d,f,h,y,m,j,S,v,p,b,x,w,L,A,M,R,C,I,k,E,F;return{setters:[function(e){a=e.u,o=e.g,s=e.x,l=e.h,u=e.s,i=e.i,c=e.r,g=e.k,d=e.j,f=e.n,h=e.E,y=e.o,m=e.p,j=e.B,S=e.aR,v=e.C,p=e.a,b=e.A,x=e.L,w=e.T,L=e.b1},function(e){A=e.u,M=e.A,R=e.S},function(e){C=e.L,I=e.t},function(e){k=e.u},function(e){E=e.B},function(e){F=e.S},null,null,null,null,null,null,null,null,null,null,null,null,null,null],execute:function(){var t=function(e,r){return e.displayName.localeCompare(r.displayName)},N=S.memo((function(e){var n,t,o=e.source,s=e.onSearchRequestFinished,l=e.searchString,u=e.emptyQuery,i=e.mode,f=a().t,h=o.id,j=o.displayName,S=o.lang,A=g.useRef(l),M=g.useRef((function(){}));A.current!==l&&(A.current=l,M.current(new Error("SourceSearchPreview(".concat(h,", ").concat(j,"): search string changed"))));var R=r(c.useSourceSearch(h,null!=l?l:"",void 0,1,{skipRequest:!l,addAbortSignal:!0}),2),C=R[0],k=R[1][0],F=k.data,N=k.isLoading,_=k.error,P=k.abortRequest;M.current=P;var T,q=null!==(n=null==F||null===(t=F.fetchSourceManga)||void 0===t?void 0:t.mangas)&&void 0!==n?n:[],O=!_&&!N&&!q.length;return g.useEffect((function(){s(o,N,!O,!l)}),[N,O,l]),_?T=f("search.error.label.source_search_failed"):O&&(T=f("manga.error.label.no_mangas_found")),!N&&!l||u?null:d.jsxs(d.Fragment,{children:[d.jsx(v,{sx:{mb:1},children:d.jsxs(p,{component:x,to:"".concat(b.sources.childRoutes.browse.path(h),"?query=").concat(l),sx:{p:3},children:[d.jsx(w,{variant:"h5",children:j}),d.jsx(w,{variant:"caption",children:I(S)})]})}),T?d.jsx(L,{sx:{alignItems:"start",height:void 0},noFaces:!0,message:T,messageExtra:y(_),retry:_?function(){return C(1).catch(m("SourceSearchPreview(".concat(o.id,")::refetch")))}:void 0}):d.jsx(E,{gridWrapperProps:{sx:{px:0}},mangas:q,isLoading:N,hasNextPage:!1,loadMore:function(){},horizontal:!0,noFaces:!0,message:T,inLibraryIndicator:!0,mode:i})]})}));n("SearchAll",(function(){var n=a().t,S=o(),v=S.setTitle,p=S.setAction,b=s(),x=b.pathname,w=b.state,L=x.startsWith("/migrate/source"),I=null==w?void 0:w.mangaTitle,E=r(A("query",R),1)[0],_=k(E,1e3),P=r(l("shownSourceLangs",u()),2),T=P[0],q=P[1],O=i().settings.showNsfw,B=c.useGetSourceList({notifyOnNetworkStatusChange:!0}),G=B.data,Q=B.loading,W=B.error,D=B.refetch,U=g.useMemo((function(){var e;return null!==(e=null==G?void 0:G.sources.nodes)&&void 0!==e?e:[]}),[null==G?void 0:G.sources.nodes]),$=g.useMemo((function(){return F.filter(U,{showNsfw:O,languages:T,keepLocalSource:!0})}),[U,T]),z=g.useMemo((function(){return e($).toSorted(t)}),[$]),J=r(g.useState(new Map),2),K=J[0],V=J[1],X=k(K,500),Y=g.useMemo((function(){return F.getLanguages(U)}),[U]),H=g.useMemo((function(){return e(z).sort((function(e,r){return function(e,r,n){var t,a,o,s,l=!(null!==(t=n.get(e.id))&&void 0!==t&&t.isLoading),u=!(null!==(a=n.get(r.id))&&void 0!==a&&a.isLoading);if(l&&!u)return-1;if(!l&&u)return 1;if(!l&&!u)return 0;var i=!(null!==(o=n.get(e.id))&&void 0!==o&&o.hasResults),c=!(null!==(s=n.get(r.id))&&void 0!==s&&s.hasResults);return i&&!c?1:c&&!i?-1:0}(e,r,X)}))}),[z,X]),Z=g.useCallback((function(e,r,n,t){var a=e.id;V((function(e){var o=new Map(e);return o.set(a,{isLoading:r,hasResults:n,emptySearch:t}),o}))}),[V]);return g.useLayoutEffect((function(){return v(n(L?"migrate.search.title":"search.title.global_search",{title:I})),p(d.jsxs(d.Fragment,{children:[d.jsx(M,{isClosable:!1}),d.jsx(C,{selectedLanguages:T,setSelectedLanguages:q,languages:Y})]})),function(){v(""),p(null)}}),[n,T,q,U]),Q?d.jsx(f,{}):W?d.jsx(h,{message:n("global.error.label.failed_to_load_data"),messageExtra:y(W),retry:function(){return D().catch(m())}}):d.jsx(j,{sx:{p:1},children:H.map((function(e,r){return d.jsx(j,{sx:{pb:r+1!==H.length?2:0},children:d.jsx(N,{source:e,onSearchRequestFinished:Z,searchString:_,emptyQuery:!E,mode:L?"migrate.select":"source"})},e.id)}))})}))}}}))}();
