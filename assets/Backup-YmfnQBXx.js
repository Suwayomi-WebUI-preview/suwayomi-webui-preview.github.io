import{c as k,a3 as X,a4 as se,ac as ct,a2 as y,j as l,_ as ue,$ as de,s as _,T as ut,a5 as re,a6 as ie,b as be,aD as o,o as Ot,I as dt,a7 as Bt,aE as _t,aF as mt,Q as pt,ag as bt,ad as Le,aG as ft,p as Et,u as gt,aB as He,V as Ue,aH as Ae,J as ht,au as kt,at as Tt,av as Ct,N as At,X as $t,a as Se,aI as Xe,n as ve,h as Ht,E as Ut,k as zt,v as Fe,U as Wt,aJ as qt,an as Je,S as Ze,L as et,H as tt}from"./index-CcDVmPxM.js";import{f as st}from"./file-selector-Bfr_Pyb2.js";import{P as Gt}from"./Progress-5mbYU9Yc.js";import{T as Yt}from"./TextSetting-dEVP3PPB.js";import{N as ot}from"./NumberSetting-BpaBLGeg.js";import{c as Ee,u as Kt,s as Qt,a as Xt,b as ye,d as Jt,P as Zt,e as es,f as ts,g as ss,h as os,i as ge,j as we,k as ze,l as De,m as fe,n as ns,S as as,o as rs,p as We,q as is,r as qe,t as Ge,v as Ye,w as Oe,D as xt,x as Be,M as ls,y as _e,z as cs,A as vt,C as us,B as yt,E as ds,F as wt,G as ms,H as ps,L as bs,I as fs}from"./useMobilePicker-CQlhaP1M.js";import{T as gs}from"./TextField-G2U-r_0j.js";import"./PasswordTextField-mC7ZS3gW.js";import"./InputAdornment-DMoHV6D6.js";import"./Info-Cl4r3ZKF.js";import"./Chip-CC-plB02.js";const Ke=({adapter:e,value:t,props:r})=>{if(t===null)return null;const{minTime:s,maxTime:i,minutesStep:n,shouldDisableTime:c,disableIgnoringDatePartForTimeValidation:p=!1,disablePast:u,disableFuture:m,timezone:h}=r,d=e.utils.date(void 0,h),g=Ee(p,e.utils);switch(!0){case!e.utils.isValid(t):return"invalidDate";case!!(s&&g(s,t)):return"minTime";case!!(i&&g(t,i)):return"maxTime";case!!(m&&e.utils.isAfter(t,d)):return"disableFuture";case!!(u&&e.utils.isBefore(t,d)):return"disablePast";case!!(c&&c(t,"hours")):return"shouldDisableTime-hours";case!!(c&&c(t,"minutes")):return"shouldDisableTime-minutes";case!!(c&&c(t,"seconds")):return"shouldDisableTime-seconds";case!!(n&&e.utils.getMinutes(t)%n!==0):return"minutesStep";default:return null}},hs=e=>{const t=Kt(e),{forwardedProps:r,internalProps:s}=Qt(t,"time");return Xt({forwardedProps:r,internalProps:s,valueManager:ye,fieldValueManager:Jt,validator:Ke,valueType:"time"})},ks=["slots","slotProps","InputProps","inputProps"],St=k.forwardRef(function(t,r){var T;const s=X({props:t,name:"MuiTimeField"}),{slots:i,slotProps:n,InputProps:c,inputProps:p}=s,u=se(s,ks),m=s,h=(T=i==null?void 0:i.textField)!=null?T:t.enableAccessibleFieldDOMStructure?Zt:gs,d=ct({elementType:h,externalSlotProps:n==null?void 0:n.textField,externalForwardedProps:u,ownerState:m,additionalProps:{ref:r}});d.inputProps=y({},p,d.inputProps),d.InputProps=y({},c,d.InputProps);const g=hs(d),a=es(g),f=ts(y({},a,{slots:i,slotProps:n}));return l.jsx(h,y({},f))});function Ts(e){return de("MuiPickersToolbarText",e)}const nt=ue("MuiPickersToolbarText",["root","selected"]),Cs=["className","selected","value"],xs=e=>{const{classes:t,selected:r}=e;return ie({root:["root",r&&"selected"]},Ts,t)},vs=_(ut,{name:"MuiPickersToolbarText",slot:"Root",overridesResolver:(e,t)=>[t.root,{["&.".concat(nt.selected)]:t.selected}]})(({theme:e})=>({transition:e.transitions.create("color"),color:(e.vars||e).palette.text.secondary,["&.".concat(nt.selected)]:{color:(e.vars||e).palette.text.primary}})),Mt=k.forwardRef(function(t,r){const s=X({props:t,name:"MuiPickersToolbarText"}),{className:i,value:n}=s,c=se(s,Cs),p=xs(s);return l.jsx(vs,y({ref:r,className:re(i,p.root),component:"span"},c,{children:n}))}),ys=["align","className","selected","typographyClassName","value","variant","width"],ws=e=>{const{classes:t}=e;return ie({root:["root"]},ss,t)},Ss=_(be,{name:"MuiPickersToolbarButton",slot:"Root",overridesResolver:(e,t)=>t.root})({padding:0,minWidth:16,textTransform:"none"}),Ie=k.forwardRef(function(t,r){const s=X({props:t,name:"MuiPickersToolbarButton"}),{align:i,className:n,selected:c,typographyClassName:p,value:u,variant:m,width:h}=s,d=se(s,ys),g=ws(s);return l.jsx(Ss,y({variant:"text",ref:r,className:re(n,g.root)},h?{sx:{width:h}}:{},d,{children:l.jsx(Mt,{align:i,className:p,variant:m,value:u,selected:c})}))});function Ms(e){return de("MuiTimePickerToolbar",e)}const Ve=ue("MuiTimePickerToolbar",["root","separator","hourMinuteLabel","hourMinuteLabelLandscape","hourMinuteLabelReverse","ampmSelection","ampmLandscape","ampmLabel"]),Ps=["ampm","ampmInClock","value","isLandscape","onChange","view","onViewChange","views","disabled","readOnly","className"],Ds=e=>{const{theme:t,isLandscape:r,classes:s}=e,i={root:["root"],separator:["separator"],hourMinuteLabel:["hourMinuteLabel",r&&"hourMinuteLabelLandscape",t.direction==="rtl"&&"hourMinuteLabelReverse"],ampmSelection:["ampmSelection",r&&"ampmLandscape"],ampmLabel:["ampmLabel"]};return ie(i,Ms,s)},Is=_(os,{name:"MuiTimePickerToolbar",slot:"Root",overridesResolver:(e,t)=>t.root})({}),Vs=_(Mt,{name:"MuiTimePickerToolbar",slot:"Separator",overridesResolver:(e,t)=>t.separator})({outline:0,margin:"0 4px 0 2px",cursor:"default"}),Pt=_("div",{name:"MuiTimePickerToolbar",slot:"HourMinuteLabel",overridesResolver:(e,t)=>[{["&.".concat(Ve.hourMinuteLabelLandscape)]:t.hourMinuteLabelLandscape,["&.".concat(Ve.hourMinuteLabelReverse)]:t.hourMinuteLabelReverse},t.hourMinuteLabel]})(({theme:e})=>y({display:"flex",justifyContent:"flex-end",alignItems:"flex-end"},e.direction==="rtl"&&{flexDirection:"row-reverse"},{variants:[{props:{isLandscape:!0},style:{marginTop:"auto"}}]}));Pt.propTypes={as:o.elementType,ownerState:o.object.isRequired,sx:o.oneOfType([o.arrayOf(o.oneOfType([o.func,o.object,o.bool])),o.func,o.object])};const Dt=_("div",{name:"MuiTimePickerToolbar",slot:"AmPmSelection",overridesResolver:(e,t)=>[{[".".concat(Ve.ampmLabel)]:t.ampmLabel},{["&.".concat(Ve.ampmLandscape)]:t.ampmLandscape},t.ampmSelection]})({display:"flex",flexDirection:"column",marginRight:"auto",marginLeft:12,["& .".concat(Ve.ampmLabel)]:{fontSize:17},variants:[{props:{isLandscape:!0},style:{margin:"4px 0 auto",flexDirection:"row",justifyContent:"space-around",flexBasis:"100%"}}]});Dt.propTypes={as:o.elementType,ownerState:o.object.isRequired,sx:o.oneOfType([o.arrayOf(o.oneOfType([o.func,o.object,o.bool])),o.func,o.object])};function js(e){const t=X({props:e,name:"MuiTimePickerToolbar"}),{ampm:r,ampmInClock:s,value:i,isLandscape:n,onChange:c,view:p,onViewChange:u,views:m,disabled:h,readOnly:d,className:g}=t,a=se(t,Ps),f=ge(),T=we(),L=Ot(),j=!!(r&&!s&&m.includes("hours")),{meridiemMode:I,handleMeridiemChange:M}=ze(i,r,c),E=N=>r?f.format(N,"hours12h"):f.format(N,"hours24h"),P=t,w=Ds(y({},P,{theme:L})),C=l.jsx(Vs,{tabIndex:-1,value:":",variant:"h3",selected:!1,className:w.separator});return l.jsxs(Is,y({landscapeDirection:"row",toolbarTitle:T.timePickerToolbarTitle,isLandscape:n,ownerState:P,className:re(w.root,g)},a,{children:[l.jsxs(Pt,{className:w.hourMinuteLabel,ownerState:P,children:[De(m,"hours")&&l.jsx(Ie,{tabIndex:-1,variant:"h3",onClick:()=>u("hours"),selected:p==="hours",value:i?E(i):"--"}),De(m,["hours","minutes"])&&C,De(m,"minutes")&&l.jsx(Ie,{tabIndex:-1,variant:"h3",onClick:()=>u("minutes"),selected:p==="minutes",value:i?f.format(i,"minutes"):"--"}),De(m,["minutes","seconds"])&&C,De(m,"seconds")&&l.jsx(Ie,{variant:"h3",onClick:()=>u("seconds"),selected:p==="seconds",value:i?f.format(i,"seconds"):"--"})]}),j&&l.jsxs(Dt,{className:w.ampmSelection,ownerState:P,children:[l.jsx(Ie,{disableRipple:!0,variant:"subtitle2",selected:I==="am",typographyClassName:w.ampmLabel,value:fe(f,"am"),onClick:d?void 0:()=>M("am"),disabled:h}),l.jsx(Ie,{disableRipple:!0,variant:"subtitle2",selected:I==="pm",typographyClassName:w.ampmLabel,value:fe(f,"pm"),onClick:d?void 0:()=>M("pm"),disabled:h})]})]}))}function It(e,t){var c,p,u,m;const r=ge(),s=X({props:e,name:t}),i=(c=s.ampm)!=null?c:r.is12HourCycleInCurrentLocale(),n=k.useMemo(()=>{var h;return((h=s.localeText)==null?void 0:h.toolbarTitle)==null?s.localeText:y({},s.localeText,{timePickerToolbarTitle:s.localeText.toolbarTitle})},[s.localeText]);return y({},s,{ampm:i,localeText:n},ns({views:s.views,openTo:s.openTo,defaultViews:["hours","minutes"],defaultOpenTo:"hours"}),{disableFuture:(p=s.disableFuture)!=null?p:!1,disablePast:(u=s.disablePast)!=null?u:!1,slots:y({toolbar:js},s.slots),slotProps:y({},s.slotProps,{toolbar:y({ampm:i,ampmInClock:s.ampmInClock},(m=s.slotProps)==null?void 0:m.toolbar)})})}function Ns(e){return de("MuiTimeClock",e)}ue("MuiTimeClock",["root","arrowSwitcher"]);const Me=220,ae=36,je={x:Me/2,y:Me/2},Vt={x:je.x,y:0},Fs=Vt.x-je.x,Rs=Vt.y-je.y,Ls=e=>e*(180/Math.PI),jt=(e,t,r)=>{const s=t-je.x,i=r-je.y,n=Math.atan2(Fs,Rs)-Math.atan2(s,i);let c=Ls(n);c=Math.round(c/e)*e,c%=360;const p=Math.floor(c/e)||0,u=s**2+i**2,m=Math.sqrt(u);return{value:p,distance:m}},Os=(e,t,r=1)=>{const s=r*6;let{value:i}=jt(s,e,t);return i=i*r%60,i},Bs=(e,t,r)=>{const{value:s,distance:i}=jt(30,e,t);let n=s||12;return r?n%=12:i<Me/2-ae&&(n+=12,n%=24),n};function _s(e){return de("MuiClockPointer",e)}ue("MuiClockPointer",["root","thumb"]);const Es=["className","hasSelected","isInner","type","viewValue"],As=e=>{const{classes:t}=e;return ie({root:["root"],thumb:["thumb"]},_s,t)},$s=_("div",{name:"MuiClockPointer",slot:"Root",overridesResolver:(e,t)=>t.root})(({theme:e})=>({width:2,backgroundColor:(e.vars||e).palette.primary.main,position:"absolute",left:"calc(50% - 1px)",bottom:"50%",transformOrigin:"center bottom 0px",variants:[{props:{shouldAnimate:!0},style:{transition:e.transitions.create(["transform","height"])}}]})),Hs=_("div",{name:"MuiClockPointer",slot:"Thumb",overridesResolver:(e,t)=>t.thumb})(({theme:e})=>({width:4,height:4,backgroundColor:(e.vars||e).palette.primary.contrastText,borderRadius:"50%",position:"absolute",top:-21,left:"calc(50% - ".concat(ae/2,"px)"),border:"".concat((ae-4)/2,"px solid ").concat((e.vars||e).palette.primary.main),boxSizing:"content-box",variants:[{props:{hasSelected:!0},style:{backgroundColor:(e.vars||e).palette.primary.main}}]}));function Us(e){const t=X({props:e,name:"MuiClockPointer"}),{className:r,isInner:s,type:i,viewValue:n}=t,c=se(t,Es),p=k.useRef(i);k.useEffect(()=>{p.current=i},[i]);const u=y({},t,{shouldAnimate:p.current!==i}),m=As(u),h=()=>{let g=360/(i==="hours"?12:60)*n;return i==="hours"&&n>12&&(g-=360),{height:Math.round((s?.26:.4)*Me),transform:"rotateZ(".concat(g,"deg)")}};return l.jsx($s,y({style:h(),className:re(r,m.root),ownerState:u},c,{children:l.jsx(Hs,{ownerState:u,className:m.thumb})}))}function zs(e){return de("MuiClock",e)}ue("MuiClock",["root","clock","wrapper","squareMask","pin","amButton","pmButton","meridiemText"]);const Ws=e=>{const{classes:t}=e;return ie({root:["root"],clock:["clock"],wrapper:["wrapper"],squareMask:["squareMask"],pin:["pin"],amButton:["amButton"],pmButton:["pmButton"],meridiemText:["meridiemText"]},zs,t)},qs=_("div",{name:"MuiClock",slot:"Root",overridesResolver:(e,t)=>t.root})(({theme:e})=>({display:"flex",justifyContent:"center",alignItems:"center",margin:e.spacing(2)})),Gs=_("div",{name:"MuiClock",slot:"Clock",overridesResolver:(e,t)=>t.clock})({backgroundColor:"rgba(0,0,0,.07)",borderRadius:"50%",height:220,width:220,flexShrink:0,position:"relative",pointerEvents:"none"}),Ys=_("div",{name:"MuiClock",slot:"Wrapper",overridesResolver:(e,t)=>t.wrapper})({"&:focus":{outline:"none"}}),Ks=_("div",{name:"MuiClock",slot:"SquareMask",overridesResolver:(e,t)=>t.squareMask})({width:"100%",height:"100%",position:"absolute",pointerEvents:"auto",outline:0,touchAction:"none",userSelect:"none",variants:[{props:{disabled:!1},style:{"@media (pointer: fine)":{cursor:"pointer",borderRadius:"50%"},"&:active":{cursor:"move"}}}]}),Qs=_("div",{name:"MuiClock",slot:"Pin",overridesResolver:(e,t)=>t.pin})(({theme:e})=>({width:6,height:6,borderRadius:"50%",backgroundColor:(e.vars||e).palette.primary.main,position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)"})),Xs=_(dt,{name:"MuiClock",slot:"AmButton",overridesResolver:(e,t)=>t.amButton})(({theme:e})=>({zIndex:1,position:"absolute",bottom:8,left:8,paddingLeft:4,paddingRight:4,width:ae,variants:[{props:{meridiemMode:"am"},style:{backgroundColor:(e.vars||e).palette.primary.main,color:(e.vars||e).palette.primary.contrastText,"&:hover":{backgroundColor:(e.vars||e).palette.primary.light}}}]})),Js=_(dt,{name:"MuiClock",slot:"PmButton",overridesResolver:(e,t)=>t.pmButton})(({theme:e})=>({zIndex:1,position:"absolute",bottom:8,right:8,paddingLeft:4,paddingRight:4,width:ae,variants:[{props:{meridiemMode:"pm"},style:{backgroundColor:(e.vars||e).palette.primary.main,color:(e.vars||e).palette.primary.contrastText,"&:hover":{backgroundColor:(e.vars||e).palette.primary.light}}}]})),at=_(ut,{name:"MuiClock",slot:"meridiemText",overridesResolver:(e,t)=>t.meridiemText})({overflow:"hidden",whiteSpace:"nowrap",textOverflow:"ellipsis"});function Zs(e){const t=X({props:e,name:"MuiClock"}),{ampm:r,ampmInClock:s,autoFocus:i,children:n,value:c,handleMeridiemChange:p,isTimeDisabled:u,meridiemMode:m,minutesStep:h=1,onChange:d,selectedId:g,type:a,viewValue:f,disabled:T=!1,readOnly:L,className:j}=t,I=t,M=ge(),E=we(),P=k.useRef(!1),w=Ws(I),C=u(f,a),N=!r&&a==="hours"&&(f<1||f>12),F=(V,R)=>{T||L||u(V,a)||d(V,R)},B=(V,R)=>{let{offsetX:A,offsetY:G}=V;if(A===void 0){const oe=V.target.getBoundingClientRect();A=V.changedTouches[0].clientX-oe.left,G=V.changedTouches[0].clientY-oe.top}const O=a==="seconds"||a==="minutes"?Os(A,G,h):Bs(A,G,!!r);F(O,R)},b=V=>{P.current=!0,B(V,"shallow")},D=V=>{P.current&&(B(V,"finish"),P.current=!1)},U=V=>{V.buttons>0&&B(V.nativeEvent,"shallow")},ee=V=>{P.current&&(P.current=!1),B(V.nativeEvent,"finish")},he=k.useMemo(()=>a==="hours"?!0:f%5===0,[a,f]),me=a==="minutes"?h:1,q=k.useRef(null);Bt(()=>{i&&q.current.focus()},[i]);const ke=V=>{if(!P.current)switch(V.key){case"Home":F(0,"partial"),V.preventDefault();break;case"End":F(a==="minutes"?59:23,"partial"),V.preventDefault();break;case"ArrowUp":F(f+me,"partial"),V.preventDefault();break;case"ArrowDown":F(f-me,"partial"),V.preventDefault();break}};return l.jsxs(qs,{className:re(j,w.root),children:[l.jsxs(Gs,{className:w.clock,children:[l.jsx(Ks,{onTouchMove:b,onTouchEnd:D,onMouseUp:ee,onMouseMove:U,ownerState:{disabled:T},className:w.squareMask}),!C&&l.jsxs(k.Fragment,{children:[l.jsx(Qs,{className:w.pin}),c!=null&&l.jsx(Us,{type:a,viewValue:f,isInner:N,hasSelected:he})]}),l.jsx(Ys,{"aria-activedescendant":g,"aria-label":E.clockLabelText(a,c,M),ref:q,role:"listbox",onKeyDown:ke,tabIndex:0,className:w.wrapper,children:n})]}),r&&s&&l.jsxs(k.Fragment,{children:[l.jsx(Xs,{onClick:L?void 0:()=>p("am"),disabled:T||m===null,ownerState:I,className:w.amButton,title:fe(M,"am"),children:l.jsx(at,{variant:"caption",className:w.meridiemText,children:fe(M,"am")})}),l.jsx(Js,{disabled:T||m===null,onClick:L?void 0:()=>p("pm"),ownerState:I,className:w.pmButton,title:fe(M,"pm"),children:l.jsx(at,{variant:"caption",className:w.meridiemText,children:fe(M,"pm")})})]})]})}function eo(e){return de("MuiClockNumber",e)}const Re=ue("MuiClockNumber",["root","selected","disabled"]),to=["className","disabled","index","inner","label","selected"],so=e=>{const{classes:t,selected:r,disabled:s}=e;return ie({root:["root",r&&"selected",s&&"disabled"]},eo,t)},oo=_("span",{name:"MuiClockNumber",slot:"Root",overridesResolver:(e,t)=>[t.root,{["&.".concat(Re.disabled)]:t.disabled},{["&.".concat(Re.selected)]:t.selected}]})(({theme:e})=>({height:ae,width:ae,position:"absolute",left:"calc((100% - ".concat(ae,"px) / 2)"),display:"inline-flex",justifyContent:"center",alignItems:"center",borderRadius:"50%",color:(e.vars||e).palette.text.primary,fontFamily:e.typography.fontFamily,"&:focused":{backgroundColor:(e.vars||e).palette.background.paper},["&.".concat(Re.selected)]:{color:(e.vars||e).palette.primary.contrastText},["&.".concat(Re.disabled)]:{pointerEvents:"none",color:(e.vars||e).palette.text.disabled},variants:[{props:{inner:!0},style:y({},e.typography.body2,{color:(e.vars||e).palette.text.secondary})}]}));function Nt(e){const t=X({props:e,name:"MuiClockNumber"}),{className:r,disabled:s,index:i,inner:n,label:c,selected:p}=t,u=se(t,to),m=t,h=so(m),d=i%12/12*Math.PI*2-Math.PI/2,g=(Me-ae-2)/2*(n?.65:1),a=Math.round(Math.cos(d)*g),f=Math.round(Math.sin(d)*g);return l.jsx(oo,y({className:re(r,h.root),"aria-disabled":s?!0:void 0,"aria-selected":p?!0:void 0,role:"option",style:{transform:"translate(".concat(a,"px, ").concat(f+(Me-ae)/2,"px")},ownerState:m},u,{children:c}))}const no=({ampm:e,value:t,getClockNumberText:r,isDisabled:s,selectedId:i,utils:n})=>{const c=t?n.getHours(t):null,p=[],u=e?1:0,m=e?12:23,h=d=>c===null?!1:e?d===12?c===12||c===0:c===d||c-12===d:c===d;for(let d=u;d<=m;d+=1){let g=d.toString();d===0&&(g="00");const a=!e&&(d===0||d>12);g=n.formatNumber(g);const f=h(d);p.push(l.jsx(Nt,{id:f?i:void 0,index:d,inner:a,selected:f,disabled:s(d),label:g,"aria-label":r(g)},d))}return p},rt=({utils:e,value:t,isDisabled:r,getClockNumberText:s,selectedId:i})=>{const n=e.formatNumber;return[[5,n("05")],[10,n("10")],[15,n("15")],[20,n("20")],[25,n("25")],[30,n("30")],[35,n("35")],[40,n("40")],[45,n("45")],[50,n("50")],[55,n("55")],[0,n("00")]].map(([c,p],u)=>{const m=c===t;return l.jsx(Nt,{label:p,id:m?i:void 0,index:u+1,inner:!1,disabled:r(c),selected:m,"aria-label":s(p)},c)})},Qe=({value:e,referenceDate:t,utils:r,props:s,timezone:i})=>{const n=k.useMemo(()=>ye.getInitialReferenceValue({value:e,utils:r,props:s,referenceDate:t,granularity:as.day,timezone:i,getTodayDate:()=>rs(r,i,"date")}),[]);return e!=null?e:n},ao=["ampm","ampmInClock","autoFocus","slots","slotProps","value","defaultValue","referenceDate","disableIgnoringDatePartForTimeValidation","maxTime","minTime","disableFuture","disablePast","minutesStep","shouldDisableTime","showViewSwitcher","onChange","view","views","openTo","onViewChange","focusedView","onFocusedViewChange","className","disabled","readOnly","timezone"],ro=e=>{const{classes:t}=e;return ie({root:["root"],arrowSwitcher:["arrowSwitcher"]},Ns,t)},io=_(We,{name:"MuiTimeClock",slot:"Root",overridesResolver:(e,t)=>t.root})({display:"flex",flexDirection:"column",position:"relative"}),lo=_(is,{name:"MuiTimeClock",slot:"ArrowSwitcher",overridesResolver:(e,t)=>t.arrowSwitcher})({position:"absolute",right:12,top:15}),co=["hours","minutes"],uo=k.forwardRef(function(t,r){const s=ge(),i=X({props:t,name:"MuiTimeClock"}),{ampm:n=s.is12HourCycleInCurrentLocale(),ampmInClock:c=!1,autoFocus:p,slots:u,slotProps:m,value:h,defaultValue:d,referenceDate:g,disableIgnoringDatePartForTimeValidation:a=!1,maxTime:f,minTime:T,disableFuture:L,disablePast:j,minutesStep:I=1,shouldDisableTime:M,showViewSwitcher:E,onChange:P,view:w,views:C=co,openTo:N,onViewChange:F,focusedView:B,onFocusedViewChange:b,className:D,disabled:U,readOnly:ee,timezone:he}=i,me=se(i,ao),{value:q,handleValueChange:ke,timezone:V}=qe({name:"TimeClock",timezone:he,value:h,defaultValue:d,onChange:P,valueManager:ye}),R=Qe({value:q,referenceDate:g,utils:s,props:i,timezone:V}),A=we(),G=Ge(V),{view:O,setView:oe,previousView:J,nextView:Te,setValueAndGoToNextView:Q}=Ye({view:w,views:C,openTo:N,onViewChange:F,onChange:ke,focusedView:B,onFocusedViewChange:b}),{meridiemMode:te,handleMeridiemChange:Pe}=ze(R,n,Q),Y=k.useCallback((z,S)=>{const v=Ee(a,s),x=S==="hours"||S==="minutes"&&C.includes("seconds"),W=({start:H,end:K})=>!(T&&v(T,K)||f&&v(H,f)||L&&v(H,G)||j&&v(G,x?K:H)),xe=(H,K=1)=>{if(H%K!==0)return!1;if(M)switch(S){case"hours":return!M(s.setHours(R,H),"hours");case"minutes":return!M(s.setMinutes(R,H),"minutes");case"seconds":return!M(s.setSeconds(R,H),"seconds");default:return!1}return!0};switch(S){case"hours":{const H=Oe(z,te,n),K=s.setHours(R,H),$=s.setSeconds(s.setMinutes(K,0),0),Z=s.setSeconds(s.setMinutes(K,59),59);return!W({start:$,end:Z})||!xe(H)}case"minutes":{const H=s.setMinutes(R,z),K=s.setSeconds(H,0),$=s.setSeconds(H,59);return!W({start:K,end:$})||!xe(z,I)}case"seconds":{const H=s.setSeconds(R,z);return!W({start:H,end:H})||!xe(z)}default:throw new Error("not supported")}},[n,R,a,f,te,T,I,M,s,L,j,G,C]),ne=_t(),le=k.useMemo(()=>{switch(O){case"hours":{const z=(S,v)=>{const x=Oe(S,te,n);Q(s.setHours(R,x),v,"hours")};return{onChange:z,viewValue:s.getHours(R),children:no({value:q,utils:s,ampm:n,onChange:z,getClockNumberText:A.hoursClockNumberText,isDisabled:S=>U||Y(S,"hours"),selectedId:ne})}}case"minutes":{const z=s.getMinutes(R),S=(v,x)=>{Q(s.setMinutes(R,v),x,"minutes")};return{viewValue:z,onChange:S,children:rt({utils:s,value:z,onChange:S,getClockNumberText:A.minutesClockNumberText,isDisabled:v=>U||Y(v,"minutes"),selectedId:ne})}}case"seconds":{const z=s.getSeconds(R),S=(v,x)=>{Q(s.setSeconds(R,v),x,"seconds")};return{viewValue:z,onChange:S,children:rt({utils:s,value:z,onChange:S,getClockNumberText:A.secondsClockNumberText,isDisabled:v=>U||Y(v,"seconds"),selectedId:ne})}}default:throw new Error("You must provide the type for ClockView")}},[O,s,q,n,A.hoursClockNumberText,A.minutesClockNumberText,A.secondsClockNumberText,te,Q,R,Y,ne,U]),ce=i,Ce=ro(ce);return l.jsxs(io,y({ref:r,className:re(Ce.root,D),ownerState:ce},me,{children:[l.jsx(Zs,y({autoFocus:p!=null?p:!!B,ampmInClock:c&&C.includes("hours"),value:q,type:O,ampm:n,minutesStep:I,isTimeDisabled:Y,meridiemMode:te,handleMeridiemChange:Pe,selectedId:ne,disabled:U,readOnly:ee},le)),E&&l.jsx(lo,{className:Ce.arrowSwitcher,slots:u,slotProps:m,onGoToPrevious:()=>oe(J),isPreviousDisabled:!J,previousLabel:A.openPreviousView,onGoToNext:()=>oe(Te),isNextDisabled:!Te,nextLabel:A.openNextView,ownerState:ce})]}))});function mo(e){return de("MuiDigitalClock",e)}ue("MuiDigitalClock",["root","list","item"]);const po=["ampm","timeStep","autoFocus","slots","slotProps","value","defaultValue","referenceDate","disableIgnoringDatePartForTimeValidation","maxTime","minTime","disableFuture","disablePast","minutesStep","shouldDisableTime","onChange","view","openTo","onViewChange","focusedView","onFocusedViewChange","className","disabled","readOnly","views","skipDisabled","timezone"],bo=e=>{const{classes:t}=e;return ie({root:["root"],list:["list"],item:["item"]},mo,t)},fo=_(We,{name:"MuiDigitalClock",slot:"Root",overridesResolver:(e,t)=>t.root})({overflowY:"auto",width:"100%","@media (prefers-reduced-motion: no-preference)":{scrollBehavior:"auto"},maxHeight:xt,variants:[{props:{alreadyRendered:!0},style:{"@media (prefers-reduced-motion: no-preference)":{scrollBehavior:"smooth"}}}]}),go=_(mt,{name:"MuiDigitalClock",slot:"List",overridesResolver:(e,t)=>t.list})({padding:0}),ho=_(pt,{name:"MuiDigitalClock",slot:"Item",overridesResolver:(e,t)=>t.item})(({theme:e})=>({padding:"8px 16px",margin:"2px 4px","&:first-of-type":{marginTop:4},"&:hover":{backgroundColor:e.vars?"rgba(".concat(e.vars.palette.primary.mainChannel," / ").concat(e.vars.palette.action.hoverOpacity,")"):Be(e.palette.primary.main,e.palette.action.hoverOpacity)},"&.Mui-selected":{backgroundColor:(e.vars||e).palette.primary.main,color:(e.vars||e).palette.primary.contrastText,"&:focus-visible, &:hover":{backgroundColor:(e.vars||e).palette.primary.dark}},"&.Mui-focusVisible":{backgroundColor:e.vars?"rgba(".concat(e.vars.palette.primary.mainChannel," / ").concat(e.vars.palette.action.focusOpacity,")"):Be(e.palette.primary.main,e.palette.action.focusOpacity)}})),ko=k.forwardRef(function(t,r){var z;const s=ge(),i=k.useRef(null),n=bt(r,i),c=X({props:t,name:"MuiDigitalClock"}),{ampm:p=s.is12HourCycleInCurrentLocale(),timeStep:u=30,autoFocus:m,slots:h,slotProps:d,value:g,defaultValue:a,referenceDate:f,disableIgnoringDatePartForTimeValidation:T=!1,maxTime:L,minTime:j,disableFuture:I,disablePast:M,minutesStep:E=1,shouldDisableTime:P,onChange:w,view:C,openTo:N,onViewChange:F,focusedView:B,onFocusedViewChange:b,className:D,disabled:U,readOnly:ee,views:he=["hours"],skipDisabled:me=!1,timezone:q}=c,ke=se(c,po),{value:V,handleValueChange:R,timezone:A}=qe({name:"DigitalClock",timezone:q,value:g,defaultValue:a,onChange:w,valueManager:ye}),G=we(),O=Ge(A),oe=k.useMemo(()=>y({},c,{alreadyRendered:!!i.current}),[c]),J=bo(oe),Te=(z=h==null?void 0:h.digitalClockItem)!=null?z:ho,Q=ct({elementType:Te,externalSlotProps:d==null?void 0:d.digitalClockItem,ownerState:{},className:J.item}),te=Qe({value:V,referenceDate:f,utils:s,props:c,timezone:A}),Pe=Le(S=>R(S,"finish","hours")),{setValueAndGoToNextView:Y}=Ye({view:C,views:he,openTo:N,onViewChange:F,onChange:Pe,focusedView:B,onFocusedViewChange:b}),ne=Le(S=>{Y(S,"finish")});k.useEffect(()=>{if(i.current===null)return;const S=i.current.querySelector('[role="listbox"] [role="option"][tabindex="0"], [role="listbox"] [role="option"][aria-selected="true"]');if(!S)return;const v=S.offsetTop;(m||B)&&S.focus(),i.current.scrollTop=v-4});const le=k.useCallback(S=>{const v=Ee(T,s),x=()=>!(j&&v(j,S)||L&&v(S,L)||I&&v(S,O)||M&&v(O,S)),W=()=>s.getMinutes(S)%E!==0?!1:P?!P(S,"hours"):!0;return!x()||!W()},[T,s,j,L,I,O,M,E,P]),ce=k.useMemo(()=>{const S=s.startOfDay(te);return[S,...Array.from({length:Math.ceil(24*60/u)-1},(v,x)=>s.addMinutes(S,u*(x+1)))]},[te,u,s]),Ce=ce.findIndex(S=>s.isEqual(S,te));return l.jsx(fo,y({ref:n,className:re(J.root,D),ownerState:oe},ke,{children:l.jsx(go,{role:"listbox","aria-label":G.timePickerToolbarTitle,className:J.list,children:ce.map((S,v)=>{if(me&&le(S))return null;const x=s.isEqual(S,V),W=s.format(S,p?"fullTime12h":"fullTime24h"),xe=Ce===v||Ce===-1&&v===0?0:-1;return l.jsx(Te,y({onClick:()=>!ee&&ne(S),selected:x,disabled:U||le(S),disableRipple:ee,role:"option","aria-disabled":ee,"aria-selected":x,tabIndex:xe},Q,{children:W}),W)})})}))});function To(e){return de("MuiMultiSectionDigitalClock",e)}ue("MuiMultiSectionDigitalClock",["root"]);function Co(e){return de("MuiMultiSectionDigitalClockSection",e)}ue("MuiMultiSectionDigitalClockSection",["root","item"]);const xo=["autoFocus","onChange","className","disabled","readOnly","items","active","slots","slotProps","skipDisabled"],vo=e=>{const{classes:t}=e;return ie({root:["root"],item:["item"]},Co,t)},yo=_(mt,{name:"MuiMultiSectionDigitalClockSection",slot:"Root",overridesResolver:(e,t)=>t.root})(({theme:e})=>({maxHeight:xt,width:56,padding:0,overflow:"hidden","@media (prefers-reduced-motion: no-preference)":{scrollBehavior:"auto"},"@media (pointer: fine)":{"&:hover":{overflowY:"auto"}},"@media (pointer: none), (pointer: coarse)":{overflowY:"auto"},"&:not(:first-of-type)":{borderLeft:"1px solid ".concat((e.vars||e).palette.divider)},"&::after":{display:"block",content:'""',height:"calc(100% - 40px - 6px)"},variants:[{props:{alreadyRendered:!0},style:{"@media (prefers-reduced-motion: no-preference)":{scrollBehavior:"smooth"}}}]})),wo=_(pt,{name:"MuiMultiSectionDigitalClockSection",slot:"Item",overridesResolver:(e,t)=>t.item})(({theme:e})=>({padding:8,margin:"2px 4px",width:ls,justifyContent:"center","&:first-of-type":{marginTop:4},"&:hover":{backgroundColor:e.vars?"rgba(".concat(e.vars.palette.primary.mainChannel," / ").concat(e.vars.palette.action.hoverOpacity,")"):Be(e.palette.primary.main,e.palette.action.hoverOpacity)},"&.Mui-selected":{backgroundColor:(e.vars||e).palette.primary.main,color:(e.vars||e).palette.primary.contrastText,"&:focus-visible, &:hover":{backgroundColor:(e.vars||e).palette.primary.dark}},"&.Mui-focusVisible":{backgroundColor:e.vars?"rgba(".concat(e.vars.palette.primary.mainChannel," / ").concat(e.vars.palette.action.focusOpacity,")"):Be(e.palette.primary.main,e.palette.action.focusOpacity)}})),So=k.forwardRef(function(t,r){var w;const s=k.useRef(null),i=bt(r,s),n=k.useRef(null),c=X({props:t,name:"MuiMultiSectionDigitalClockSection"}),{autoFocus:p,onChange:u,className:m,disabled:h,readOnly:d,items:g,active:a,slots:f,slotProps:T,skipDisabled:L}=c,j=se(c,xo),I=k.useMemo(()=>y({},c,{alreadyRendered:!!s.current}),[c]),M=vo(I),E=(w=f==null?void 0:f.digitalClockSectionItem)!=null?w:wo;k.useEffect(()=>{if(s.current===null)return;const C=s.current.querySelector('[role="option"][tabindex="0"], [role="option"][aria-selected="true"]');if(a&&p&&C&&C.focus(),!C||n.current===C)return;n.current=C;const N=C.offsetTop;s.current.scrollTop=N-4});const P=g.findIndex(C=>C.isFocused(C.value));return l.jsx(yo,y({ref:i,className:re(M.root,m),ownerState:I,autoFocusItem:p&&a,role:"listbox"},j,{children:g.map((C,N)=>{var U;const F=(U=C.isDisabled)==null?void 0:U.call(C,C.value),B=h||F;if(L&&B)return null;const b=C.isSelected(C.value),D=P===N||P===-1&&N===0?0:-1;return l.jsx(E,y({onClick:()=>!d&&u(C.value),selected:b,disabled:B,disableRipple:d,role:"option","aria-disabled":d||B||void 0,"aria-label":C.ariaLabel,"aria-selected":b,tabIndex:D,className:M.item},T==null?void 0:T.digitalClockSectionItem,{children:C.label}),C.label)})}))}),Mo=({now:e,value:t,utils:r,ampm:s,isDisabled:i,resolveAriaLabel:n,timeStep:c,valueOrReferenceDate:p})=>{const u=t?r.getHours(t):null,m=[],h=(a,f)=>{const T=f!=null?f:u;return T===null?!1:s?a===12?T===12||T===0:T===a||T-12===a:T===a},d=a=>h(a,r.getHours(p)),g=s?11:23;for(let a=0;a<=g;a+=c){let f=r.format(r.setHours(e,a),s?"hours12h":"hours24h");const T=n(parseInt(f,10).toString());f=r.formatNumber(f),m.push({value:a,label:f,isSelected:h,isDisabled:i,isFocused:d,ariaLabel:T})}return m},it=({value:e,utils:t,isDisabled:r,timeStep:s,resolveLabel:i,resolveAriaLabel:n,hasValue:c=!0})=>{const p=m=>e===null?!1:c&&e===m,u=m=>e===m;return[...Array.from({length:Math.ceil(60/s)},(m,h)=>{const d=s*h;return{value:d,label:t.formatNumber(i(d)),isDisabled:r,isSelected:p,isFocused:u,ariaLabel:n(d.toString())}})]},Po=["ampm","timeSteps","autoFocus","slots","slotProps","value","defaultValue","referenceDate","disableIgnoringDatePartForTimeValidation","maxTime","minTime","disableFuture","disablePast","minutesStep","shouldDisableTime","onChange","view","views","openTo","onViewChange","focusedView","onFocusedViewChange","className","disabled","readOnly","skipDisabled","timezone"],Do=e=>{const{classes:t}=e;return ie({root:["root"]},To,t)},Io=_(We,{name:"MuiMultiSectionDigitalClock",slot:"Root",overridesResolver:(e,t)=>t.root})(({theme:e})=>({display:"flex",flexDirection:"row",width:"100%",borderBottom:"1px solid ".concat((e.vars||e).palette.divider)})),Vo=k.forwardRef(function(t,r){const s=ge(),i=X({props:t,name:"MuiMultiSectionDigitalClock"}),{ampm:n=s.is12HourCycleInCurrentLocale(),timeSteps:c,autoFocus:p,slots:u,slotProps:m,value:h,defaultValue:d,referenceDate:g,disableIgnoringDatePartForTimeValidation:a=!1,maxTime:f,minTime:T,disableFuture:L,disablePast:j,minutesStep:I=1,shouldDisableTime:M,onChange:E,view:P,views:w=["hours","minutes"],openTo:C,onViewChange:N,focusedView:F,onFocusedViewChange:B,className:b,disabled:D,readOnly:U,skipDisabled:ee=!1,timezone:he}=i,me=se(i,Po),{value:q,handleValueChange:ke,timezone:V}=qe({name:"MultiSectionDigitalClock",timezone:he,value:h,defaultValue:d,onChange:E,valueManager:ye}),R=we(),A=Ge(V),G=k.useMemo(()=>y({hours:1,minutes:5,seconds:5},c),[c]),O=Qe({value:q,referenceDate:g,utils:s,props:i,timezone:V}),oe=Le((v,x,W)=>ke(v,x,W)),J=k.useMemo(()=>!n||!w.includes("hours")||w.includes("meridiem")?w:[...w,"meridiem"],[n,w]),{view:Te,setValueAndGoToNextView:Q,focusedView:te}=Ye({view:P,views:J,openTo:C,onViewChange:N,onChange:oe,focusedView:F,onFocusedViewChange:B}),Pe=Le(v=>{Q(v,"finish","meridiem")}),{meridiemMode:Y,handleMeridiemChange:ne}=ze(O,n,Pe,"finish"),le=k.useCallback((v,x)=>{const W=Ee(a,s),xe=x==="hours"||x==="minutes"&&J.includes("seconds"),H=({start:$,end:Z})=>!(T&&W(T,Z)||f&&W($,f)||L&&W($,A)||j&&W(A,xe?Z:$)),K=($,Z=1)=>{if($%Z!==0)return!1;if(M)switch(x){case"hours":return!M(s.setHours(O,$),"hours");case"minutes":return!M(s.setMinutes(O,$),"minutes");case"seconds":return!M(s.setSeconds(O,$),"seconds");default:return!1}return!0};switch(x){case"hours":{const $=Oe(v,Y,n),Z=s.setHours(O,$),Ne=s.setSeconds(s.setMinutes(Z,0),0),Lt=s.setSeconds(s.setMinutes(Z,59),59);return!H({start:Ne,end:Lt})||!K($)}case"minutes":{const $=s.setMinutes(O,v),Z=s.setSeconds($,0),Ne=s.setSeconds($,59);return!H({start:Z,end:Ne})||!K(v,I)}case"seconds":{const $=s.setSeconds(O,v);return!H({start:$,end:$})||!K(v)}default:throw new Error("not supported")}},[n,O,a,f,Y,T,I,M,s,L,j,A,J]),ce=k.useCallback(v=>{switch(v){case"hours":return{onChange:x=>{const W=Oe(x,Y,n);Q(s.setHours(O,W),"finish","hours")},items:Mo({now:A,value:q,ampm:n,utils:s,isDisabled:x=>le(x,"hours"),timeStep:G.hours,resolveAriaLabel:R.hoursClockNumberText,valueOrReferenceDate:O})};case"minutes":return{onChange:x=>{Q(s.setMinutes(O,x),"finish","minutes")},items:it({value:s.getMinutes(O),utils:s,isDisabled:x=>le(x,"minutes"),resolveLabel:x=>s.format(s.setMinutes(A,x),"minutes"),timeStep:G.minutes,hasValue:!!q,resolveAriaLabel:R.minutesClockNumberText})};case"seconds":return{onChange:x=>{Q(s.setSeconds(O,x),"finish","seconds")},items:it({value:s.getSeconds(O),utils:s,isDisabled:x=>le(x,"seconds"),resolveLabel:x=>s.format(s.setSeconds(A,x),"seconds"),timeStep:G.seconds,hasValue:!!q,resolveAriaLabel:R.secondsClockNumberText})};case"meridiem":{const x=fe(s,"am"),W=fe(s,"pm");return{onChange:ne,items:[{value:"am",label:x,isSelected:()=>!!q&&Y==="am",isFocused:()=>!!O&&Y==="am",ariaLabel:x},{value:"pm",label:W,isSelected:()=>!!q&&Y==="pm",isFocused:()=>!!O&&Y==="pm",ariaLabel:W}]}}default:throw new Error("Unknown view: ".concat(v," found."))}},[A,q,n,s,G.hours,G.minutes,G.seconds,R.hoursClockNumberText,R.minutesClockNumberText,R.secondsClockNumberText,Y,Q,O,le,ne]),Ce=k.useMemo(()=>J.reduce((v,x)=>y({},v,{[x]:ce(x)}),{}),[J,ce]),z=i,S=Do(z);return l.jsx(Io,y({ref:r,className:re(S.root,b),ownerState:z,role:"group"},me,{children:Object.entries(Ce).map(([v,x])=>l.jsx(So,{items:x.items,onChange:x.onChange,active:Te===v,autoFocus:p!=null?p:te===v,disabled:D,readOnly:U,slots:u,slotProps:m,skipDisabled:ee,"aria-label":R.selectViewText(v)},v))}))}),$e=({view:e,onViewChange:t,focusedView:r,onFocusedViewChange:s,views:i,value:n,defaultValue:c,referenceDate:p,onChange:u,className:m,classes:h,disableFuture:d,disablePast:g,minTime:a,maxTime:f,shouldDisableTime:T,minutesStep:L,ampm:j,ampmInClock:I,slots:M,slotProps:E,readOnly:P,disabled:w,sx:C,autoFocus:N,showViewSwitcher:F,disableIgnoringDatePartForTimeValidation:B,timezone:b})=>l.jsx(uo,{view:e,onViewChange:t,focusedView:r&&_e(r)?r:null,onFocusedViewChange:s,views:i.filter(_e),value:n,defaultValue:c,referenceDate:p,onChange:u,className:m,classes:h,disableFuture:d,disablePast:g,minTime:a,maxTime:f,shouldDisableTime:T,minutesStep:L,ampm:j,ampmInClock:I,slots:M,slotProps:E,readOnly:P,disabled:w,sx:C,autoFocus:N,showViewSwitcher:F,disableIgnoringDatePartForTimeValidation:B,timezone:b}),jo=({view:e,onViewChange:t,focusedView:r,onFocusedViewChange:s,views:i,value:n,defaultValue:c,referenceDate:p,onChange:u,className:m,classes:h,disableFuture:d,disablePast:g,minTime:a,maxTime:f,shouldDisableTime:T,minutesStep:L,ampm:j,slots:I,slotProps:M,readOnly:E,disabled:P,sx:w,autoFocus:C,disableIgnoringDatePartForTimeValidation:N,timeSteps:F,skipDisabled:B,timezone:b})=>l.jsx(ko,{view:e,onViewChange:t,focusedView:r,onFocusedViewChange:s,views:i.filter(_e),value:n,defaultValue:c,referenceDate:p,onChange:u,className:m,classes:h,disableFuture:d,disablePast:g,minTime:a,maxTime:f,shouldDisableTime:T,minutesStep:L,ampm:j,slots:I,slotProps:M,readOnly:E,disabled:P,sx:w,autoFocus:C,disableIgnoringDatePartForTimeValidation:N,timeStep:F==null?void 0:F.minutes,skipDisabled:B,timezone:b}),lt=({view:e,onViewChange:t,focusedView:r,onFocusedViewChange:s,views:i,value:n,defaultValue:c,referenceDate:p,onChange:u,className:m,classes:h,disableFuture:d,disablePast:g,minTime:a,maxTime:f,shouldDisableTime:T,minutesStep:L,ampm:j,slots:I,slotProps:M,readOnly:E,disabled:P,sx:w,autoFocus:C,disableIgnoringDatePartForTimeValidation:N,timeSteps:F,skipDisabled:B,timezone:b})=>l.jsx(Vo,{view:e,onViewChange:t,focusedView:r,onFocusedViewChange:s,views:i.filter(_e),value:n,defaultValue:c,referenceDate:p,onChange:u,className:m,classes:h,disableFuture:d,disablePast:g,minTime:a,maxTime:f,shouldDisableTime:T,minutesStep:L,ampm:j,slots:I,slotProps:M,readOnly:E,disabled:P,sx:w,autoFocus:C,disableIgnoringDatePartForTimeValidation:N,timeSteps:F,skipDisabled:B,timezone:b}),No=(e,t,r)=>r?t.filter(s=>!cs(s)||s==="hours"):e?[...t,"meridiem"]:t,Fo=(e,t)=>{var r,s;return 24*60/(((r=e.hours)!=null?r:1)*((s=e.minutes)!=null?s:5))<=t};function Ro({thresholdToRenderTimeInASingleColumn:e,ampm:t,timeSteps:r,views:s}){const i=e!=null?e:24,n=y({hours:1,minutes:5,seconds:5},r),c=Fo(n,i);return{thresholdToRenderTimeInASingleColumn:i,timeSteps:n,shouldRenderTimeInASingleColumn:c,views:No(t,s,c)}}const Ft=k.forwardRef(function(t,r){var j,I,M,E,P,w;const s=we(),i=ge(),n=It(t,"MuiDesktopTimePicker"),{shouldRenderTimeInASingleColumn:c,views:p,timeSteps:u}=Ro(n),m=c?jo:lt,h=y({hours:m,minutes:m,seconds:m,meridiem:m},n.viewRenderers),d=(j=n.ampmInClock)!=null?j:!0,g=c?[]:["accept"],f=((I=h.hours)==null?void 0:I.name)===lt.name?p:p.filter(C=>C!=="meridiem"),T=y({},n,{ampmInClock:d,timeSteps:u,viewRenderers:h,format:vt(i,n),views:c?["hours"]:f,slots:y({field:St,openPickerIcon:us},n.slots),slotProps:y({},n.slotProps,{field:C=>{var N;return y({},ft((N=n.slotProps)==null?void 0:N.field,C),yt(n),{ref:r})},toolbar:y({hidden:!0,ampmInClock:d},(M=n.slotProps)==null?void 0:M.toolbar),actionBar:y({actions:g},(E=n.slotProps)==null?void 0:E.actionBar)})}),{renderPicker:L}=ds({props:T,valueManager:ye,valueType:"time",getOpenDialogAriaText:(w=(P=T.localeText)==null?void 0:P.openTimePickerDialogue)!=null?w:s.openTimePickerDialogue,validator:Ke});return L()});Ft.propTypes={ampm:o.bool,ampmInClock:o.bool,autoFocus:o.bool,className:o.string,closeOnSelect:o.bool,defaultValue:o.object,disabled:o.bool,disableFuture:o.bool,disableIgnoringDatePartForTimeValidation:o.bool,disableOpenPicker:o.bool,disablePast:o.bool,enableAccessibleFieldDOMStructure:o.any,format:o.string,formatDensity:o.oneOf(["dense","spacious"]),inputRef:wt,label:o.node,localeText:o.object,maxTime:o.object,minTime:o.object,minutesStep:o.number,name:o.string,onAccept:o.func,onChange:o.func,onClose:o.func,onError:o.func,onOpen:o.func,onSelectedSectionsChange:o.func,onViewChange:o.func,open:o.bool,openTo:o.oneOf(["hours","meridiem","minutes","seconds"]),orientation:o.oneOf(["landscape","portrait"]),readOnly:o.bool,reduceAnimations:o.bool,referenceDate:o.object,selectedSections:o.oneOfType([o.oneOf(["all","day","empty","hours","meridiem","minutes","month","seconds","weekDay","year"]),o.number]),shouldDisableTime:o.func,skipDisabled:o.bool,slotProps:o.object,slots:o.object,sx:o.oneOfType([o.arrayOf(o.oneOfType([o.func,o.object,o.bool])),o.func,o.object]),thresholdToRenderTimeInASingleColumn:o.number,timeSteps:o.shape({hours:o.number,minutes:o.number,seconds:o.number}),timezone:o.string,value:o.object,view:o.oneOf(["hours","meridiem","minutes","seconds"]),viewRenderers:o.shape({hours:o.func,meridiem:o.func,minutes:o.func,seconds:o.func}),views:o.arrayOf(o.oneOf(["hours","minutes","seconds"]).isRequired)};const Rt=k.forwardRef(function(t,r){var h,d,g,a;const s=we(),i=ge(),n=It(t,"MuiMobileTimePicker"),c=y({hours:$e,minutes:$e,seconds:$e},n.viewRenderers),p=(h=n.ampmInClock)!=null?h:!1,u=y({},n,{ampmInClock:p,viewRenderers:c,format:vt(i,n),slots:y({field:St},n.slots),slotProps:y({},n.slotProps,{field:f=>{var T;return y({},ft((T=n.slotProps)==null?void 0:T.field,f),yt(n),{ref:r})},toolbar:y({hidden:!1,ampmInClock:p},(d=n.slotProps)==null?void 0:d.toolbar)})}),{renderPicker:m}=ms({props:u,valueManager:ye,valueType:"time",getOpenDialogAriaText:(a=(g=u.localeText)==null?void 0:g.openTimePickerDialogue)!=null?a:s.openTimePickerDialogue,validator:Ke});return m()});Rt.propTypes={ampm:o.bool,ampmInClock:o.bool,autoFocus:o.bool,className:o.string,closeOnSelect:o.bool,defaultValue:o.object,disabled:o.bool,disableFuture:o.bool,disableIgnoringDatePartForTimeValidation:o.bool,disableOpenPicker:o.bool,disablePast:o.bool,enableAccessibleFieldDOMStructure:o.any,format:o.string,formatDensity:o.oneOf(["dense","spacious"]),inputRef:wt,label:o.node,localeText:o.object,maxTime:o.object,minTime:o.object,minutesStep:o.number,name:o.string,onAccept:o.func,onChange:o.func,onClose:o.func,onError:o.func,onOpen:o.func,onSelectedSectionsChange:o.func,onViewChange:o.func,open:o.bool,openTo:o.oneOf(["hours","minutes","seconds"]),orientation:o.oneOf(["landscape","portrait"]),readOnly:o.bool,reduceAnimations:o.bool,referenceDate:o.object,selectedSections:o.oneOfType([o.oneOf(["all","day","empty","hours","meridiem","minutes","month","seconds","weekDay","year"]),o.number]),shouldDisableTime:o.func,slotProps:o.object,slots:o.object,sx:o.oneOfType([o.arrayOf(o.oneOfType([o.func,o.object,o.bool])),o.func,o.object]),timezone:o.string,value:o.object,view:o.oneOf(["hours","minutes","seconds"]),viewRenderers:o.shape({hours:o.func,minutes:o.func,seconds:o.func}),views:o.arrayOf(o.oneOf(["hours","minutes","seconds"]).isRequired)};const Lo=["desktopModeMediaQuery"],Oo=k.forwardRef(function(t,r){const s=X({props:t,name:"MuiTimePicker"}),{desktopModeMediaQuery:i=ps}=s,n=se(s,Lo);return Et(i,{defaultMatches:!0})?l.jsx(Ft,y({ref:r},n)):l.jsx(Rt,y({ref:r},n))}),Bo=({settingName:e,value:t,defaultValue:r,handleChange:s})=>{const{t:i}=gt(),[n,c]=k.useState(!1),[p,u]=k.useState(t);k.useEffect(()=>{t&&u(t)},[t]);const m=k.useCallback(g=>{c(!1),g&&u(t)},[t]),h=k.useCallback(()=>m(!0),[m]),d=k.useCallback((g,a=!0)=>{a&&m(!1),t!==g&&s(g)},[t,s,m]);return l.jsxs(l.Fragment,{children:[l.jsx(He,{onClick:()=>c(!0),children:l.jsx(Ue,{primary:e,secondary:Ae(t,"HH:mm").format("LT"),secondaryTypographyProps:{style:{display:"flex",flexDirection:"column"}}})}),l.jsxs(ht,{open:n,onClose:m,children:[l.jsxs(kt,{children:[l.jsx(Tt,{sx:{paddingLeft:0},children:e}),l.jsx(bs,{dateAdapter:fs,adapterLocale:navigator.language,children:l.jsx(Oo,{value:Ae(p,"HH:mm"),defaultValue:Ae(r,"HH:mm"),format:"LT",onChange:g=>{var a;return u((a=g==null?void 0:g.format("HH:mm"))!=null?a:"00:00")}})})]}),l.jsxs(Ct,{children:[r!==void 0?l.jsx(be,{onClick:()=>{u(r),d(r,!1)},color:"primary",children:i("global.button.reset_to_default")}):null,l.jsx(be,{onClick:h,color:"primary",children:i("global.button.cancel")}),l.jsx(be,{onClick:()=>{d(p)},color:"primary",children:i("global.button.ok")})]})]})]})},_o=e=>({backupPath:e.backupPath,backupTime:e.backupTime,backupInterval:e.backupInterval,backupTTL:e.backupTTL}),Eo=e=>e===0?tt("global.label.never"):tt("settings.backup.automated.cleanup.label.value",{days:e,count:e});let pe;function Xo(){var B;const{t:e}=gt(),{setTitle:t,setAction:r}=k.useContext(At);k.useEffect(()=>(t(e("settings.backup.title")),r(null),()=>{t(""),r(null)}),[e]),$t("settings");const{data:s,loading:i,error:n,refetch:c}=Se.useGetServerSettings({notifyOnNetworkStatusChange:!0}),[p]=Se.useUpdateServerSettings(),{data:u}=Se.useGetBackupRestoreStatus(pe!=null?pe:"",{skip:!pe,pollInterval:1e3}),[m,h]=k.useState(null),[d,g]=k.useState(!1),[a,f]=k.useState(),[,T]=k.useState(0),L=(()=>{if(!(u!=null&&u.restoreStatus))return 0;const b=100*(u.restoreStatus.mangaProgress/u.restoreStatus.totalManga);return Number.isNaN(b)?0:b})(),j=(b,D)=>{p({variables:{input:{settings:{[b]:D}}}})};k.useEffect(()=>{if(!(u!=null&&u.restoreStatus))return;const b=u.restoreStatus.state===Xe.Success,D=u.restoreStatus.state===Xe.Failure;(b||D)&&(b&&ve(e("settings.backup.action.restore.label.success"),"success"),D&&ve(e("settings.backup.action.restore.error.label.failure"),"error"),pe=void 0,T(Date.now()))},[(B=u==null?void 0:u.restoreStatus)==null?void 0:B.state]);const I=()=>{h(null);const b=document.getElementById("backup-file");b&&(b.value="")},M=async b=>{try{const{data:{validateBackup:D}}=await Se.validateBackupFile(b,{fetchPolicy:"network-only"}).response;return D.missingSources.length||D.missingTrackers.length?(f(D),g(!0),!1):!0}catch(D){ve(e("settings.backup.action.validate.error.label.failure"),"error"),I()}return!1},E=async b=>{var D;try{ve(e("settings.backup.action.restore.label.in_progress"),"info"),pe=(D=(await Se.restoreBackupFile(b).response).data)==null?void 0:D.restoreBackup.id,T(Date.now())}catch(U){ve(e("settings.backup.action.restore.error.label.failure"),"error")}finally{I()}},P=async b=>{if(b.name.toLowerCase().endsWith("json")){ve(e("settings.backup.action.restore.error.label.legacy_backup_unsupported"),"error");return}if(!b.name.toLowerCase().match(/proto\.gz$|tachibk$/g)){ve(e("global.error.label.invalid_file_type"),"error");return}h(b),await M(b)&&await E(b)},w=async b=>{b.preventDefault();const D=await st(b);P(D[0])},C=b=>{b.preventDefault()},N=()=>{g(!1),I()};if(k.useEffect(()=>{document.addEventListener("drop",w),document.addEventListener("dragover",C);const b=async U=>{const ee=await st(U);P(ee[0])},D=document.getElementById("backup-file");return D==null||D.addEventListener("change",b),()=>{document.removeEventListener("drop",w),document.removeEventListener("dragover",C),D==null||D.removeEventListener("change",b)}},[]),i)return l.jsx(Ht,{});if(n)return l.jsx(Ut,{message:e("global.error.label.failed_to_load_data"),messageExtra:n.message,retry:()=>c().catch(zt())});const F=_o(s.settings);return l.jsxs(l.Fragment,{children:[l.jsxs(Fe,{sx:{padding:0},children:[l.jsx(He,{component:"a",href:Se.getExportBackupUrl(),download:!0,children:l.jsx(Ue,{primary:e("settings.backup.action.create.label.title"),secondary:e("settings.backup.action.create.label.description")})}),l.jsxs(He,{onClick:()=>{var b;return(b=document.getElementById("backup-file"))==null?void 0:b.click()},disabled:!!pe,children:[l.jsx(Ue,{primary:e("settings.backup.action.restore.label.title"),secondary:e("settings.backup.action.restore.label.description")}),pe?l.jsx(Wt,{children:l.jsx(Gt,{progress:L})}):null]}),l.jsxs(Fe,{subheader:l.jsx(qt,{component:"div",id:"backup-settings",children:"Automated backup"}),children:[l.jsx(Yt,{settingName:e("settings.backup.automated.location.label.title"),dialogDescription:e("settings.backup.automated.location.label.description"),value:F.backupPath,handleChange:b=>j("backupPath",b)}),l.jsx(Bo,{settingName:e("settings.backup.automated.label.time"),value:F.backupTime,defaultValue:"00:00",handleChange:b=>j("backupTime",b)}),l.jsx(ot,{settingTitle:e("settings.backup.automated.label.interval"),settingValue:e("global.date.value.label.day",{days:F.backupInterval,count:F.backupInterval}),value:F.backupInterval,defaultValue:1,minValue:1,maxValue:31,stepSize:1,valueUnit:e("global.date.label.day"),showSlider:!0,handleUpdate:b=>j("backupInterval",b)}),l.jsx(ot,{settingTitle:e("settings.backup.automated.cleanup.label.title"),settingValue:Eo(F.backupTTL),value:F.backupTTL,defaultValue:14,minValue:0,maxValue:1e3,stepSize:1,valueUnit:e("global.date.label.day"),showSlider:!0,handleUpdate:b=>j("backupTTL",b)})]})]}),l.jsx("input",{type:"file",id:"backup-file",style:{display:"none"}}),l.jsxs(ht,{open:d,children:[l.jsx(Tt,{children:e("settings.backup.action.validate.dialog.title")}),l.jsxs(kt,{dividers:!0,children:[!!(a!=null&&a.missingSources.length)&&l.jsx(Fe,{sx:{listStyleType:"initial",listStylePosition:"inside"},subheader:e("settings.backup.action.validate.dialog.content.label.missing_sources"),children:a==null?void 0:a.missingSources.map(({id:b,name:D})=>l.jsx(Je,{sx:{display:"list-item"},children:"".concat(D," (").concat(b,")")},b))}),!!(a!=null&&a.missingTrackers.length)&&l.jsx(Fe,{sx:{listStyleType:"initial",listStylePosition:"inside"},subheader:e("settings.backup.action.validate.dialog.content.label.missing_trackers"),children:a==null?void 0:a.missingTrackers.map(({name:b})=>l.jsx(Je,{sx:{display:"list-item"},children:"".concat(b)},b))})]}),l.jsx(Ct,{children:l.jsxs(Ze,{sx:{width:"100%"},direction:"row",justifyContent:"space-between",children:[!!(a!=null&&a.missingSources.length)&&l.jsx(be,{onClick:N,component:et,to:"/browse",autoFocus:!!(a!=null&&a.missingSources.length),variant:a!=null&&a.missingSources.length?"contained":"text",children:e("extension.action.label.install")}),!!(a!=null&&a.missingTrackers.length)&&l.jsx(be,{onClick:N,component:et,to:"/settings/trackingSettings",autoFocus:!!(a!=null&&a.missingTrackers.length),variant:a!=null&&a.missingTrackers.length?"contained":"text",children:e("global.button.log_in")}),l.jsxs(Ze,{direction:"row",children:[l.jsx(be,{onClick:N,children:e("global.button.cancel")}),l.jsx(be,{onClick:()=>{N(),E(m)},autoFocus:!(a!=null&&a.missingSources.length)&&!(a!=null&&a.missingTrackers.length),variant:!(a!=null&&a.missingSources.length)&&!(a!=null&&a.missingTrackers.length)?"contained":"text",children:e("global.button.restore")})]})]})})]})]})}export{Xo as Backup};
