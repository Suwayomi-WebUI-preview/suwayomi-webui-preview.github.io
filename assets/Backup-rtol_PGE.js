import{c as v,O as J,Q as se,a0 as rt,_ as y,j as i,H as ue,J as de,s as _,T as it,U as re,V as ie,b as xe,k as Nt,I as lt,W as Lt,ap as Ft,a3 as ct,a1 as Le,aq as ut,l as Ot,u as dt,an as He,y as Ue,D as mt,ag as pt,af as ft,ah as bt,N as Bt,A as _t,a as Se,ar as Je,m as Ce,g as At,E as Et,h as $t,o as Ae,x as Ht,as as Ut,ab as zt,L as Wt,t as Xe}from"./index-Zl59rTnr.js";import{f as Ze}from"./file-selector-CI8qUKgk.js";import{P as qt}from"./Progress-BgVdFcJg.js";import{T as Gt}from"./TextSetting-DikKBxMa.js";import{N as et}from"./NumberSetting-D95Za2Yx.js";import{d as Ee}from"./dayjs.min-ByUHsGI2.js";import{c as Yt}from"./language-CcP_OM1B.js";import{c as _e,u as Kt,s as Qt,a as Jt,b as ye,d as Xt,P as Zt,e as es,f as ts,g as ss,h as os,i as be,j as we,k as ze,l as De,m as fe,n as as,S as ns,o as rs,p as We,q as is,r as qe,t as Ge,v as Ye,w as Fe,D as gt,x as Oe,M as ls,y as Be,z as cs,A as ht,C as us,B as kt,E as ds,F as vt,G as ms,H as ps,L as fs,I as bs}from"./useMobilePicker-BrirqG1O.js";import{P as o}from"./Chip-DIc23AWH.js";import{T as gs,b as Tt}from"./TextField-lew-bJf8.js";import{M as Ct}from"./MenuItem-DWrnvo_k.js";import"./PasswordTextField-D4MXzy1a.js";import"./InputAdornment-C6brfzM8.js";import"./Info-CBdRtVcr.js";const Ke=({adapter:e,value:t,props:n})=>{if(t===null)return null;const{minTime:s,maxTime:r,minutesStep:a,shouldDisableTime:l,disableIgnoringDatePartForTimeValidation:m=!1,disablePast:c,disableFuture:d,timezone:g}=n,u=e.utils.date(void 0,g),h=_e(m,e.utils);switch(!0){case!e.utils.isValid(t):return"invalidDate";case!!(s&&h(s,t)):return"minTime";case!!(r&&h(t,r)):return"maxTime";case!!(d&&e.utils.isAfter(t,u)):return"disableFuture";case!!(c&&e.utils.isBefore(t,u)):return"disablePast";case!!(l&&l(t,"hours")):return"shouldDisableTime-hours";case!!(l&&l(t,"minutes")):return"shouldDisableTime-minutes";case!!(l&&l(t,"seconds")):return"shouldDisableTime-seconds";case!!(a&&e.utils.getMinutes(t)%a!==0):return"minutesStep";default:return null}},hs=e=>{const t=Kt(e),{forwardedProps:n,internalProps:s}=Qt(t,"time");return Jt({forwardedProps:n,internalProps:s,valueManager:ye,fieldValueManager:Xt,validator:Ke,valueType:"time"})},ks=["slots","slotProps","InputProps","inputProps"],xt=v.forwardRef(function(t,n){var k;const s=J({props:t,name:"MuiTimeField"}),{slots:r,slotProps:a,InputProps:l,inputProps:m}=s,c=se(s,ks),d=s,g=(k=r==null?void 0:r.textField)!=null?k:t.enableAccessibleFieldDOMStructure?Zt:gs,u=rt({elementType:g,externalSlotProps:a==null?void 0:a.textField,externalForwardedProps:c,ownerState:d,additionalProps:{ref:n}});u.inputProps=y({},m,u.inputProps),u.InputProps=y({},l,u.InputProps);const h=hs(u),p=es(h),f=ts(y({},p,{slots:r,slotProps:a}));return i.jsx(g,y({},f))});function vs(e){return de("MuiPickersToolbarText",e)}const tt=ue("MuiPickersToolbarText",["root","selected"]),Ts=["className","selected","value"],Cs=e=>{const{classes:t,selected:n}=e;return ie({root:["root",n&&"selected"]},vs,t)},xs=_(it,{name:"MuiPickersToolbarText",slot:"Root",overridesResolver:(e,t)=>[t.root,{["&.".concat(tt.selected)]:t.selected}]})(({theme:e})=>({transition:e.transitions.create("color"),color:(e.vars||e).palette.text.secondary,["&.".concat(tt.selected)]:{color:(e.vars||e).palette.text.primary}})),yt=v.forwardRef(function(t,n){const s=J({props:t,name:"MuiPickersToolbarText"}),{className:r,value:a}=s,l=se(s,Ts),m=Cs(s);return i.jsx(xs,y({ref:n,className:re(r,m.root),component:"span"},l,{children:a}))}),ys=["align","className","selected","typographyClassName","value","variant","width"],ws=e=>{const{classes:t}=e;return ie({root:["root"]},ss,t)},Ss=_(xe,{name:"MuiPickersToolbarButton",slot:"Root",overridesResolver:(e,t)=>t.root})({padding:0,minWidth:16,textTransform:"none"}),Ie=v.forwardRef(function(t,n){const s=J({props:t,name:"MuiPickersToolbarButton"}),{align:r,className:a,selected:l,typographyClassName:m,value:c,variant:d,width:g}=s,u=se(s,ys),h=ws(s);return i.jsx(Ss,y({variant:"text",ref:n,className:re(a,h.root)},g?{sx:{width:g}}:{},u,{children:i.jsx(yt,{align:r,className:m,variant:d,value:c,selected:l})}))});function Ms(e){return de("MuiTimePickerToolbar",e)}const Ve=ue("MuiTimePickerToolbar",["root","separator","hourMinuteLabel","hourMinuteLabelLandscape","hourMinuteLabelReverse","ampmSelection","ampmLandscape","ampmLabel"]),Ps=["ampm","ampmInClock","value","isLandscape","onChange","view","onViewChange","views","disabled","readOnly","className"],Ds=e=>{const{theme:t,isLandscape:n,classes:s}=e,r={root:["root"],separator:["separator"],hourMinuteLabel:["hourMinuteLabel",n&&"hourMinuteLabelLandscape",t.direction==="rtl"&&"hourMinuteLabelReverse"],ampmSelection:["ampmSelection",n&&"ampmLandscape"],ampmLabel:["ampmLabel"]};return ie(r,Ms,s)},Is=_(os,{name:"MuiTimePickerToolbar",slot:"Root",overridesResolver:(e,t)=>t.root})({}),Vs=_(yt,{name:"MuiTimePickerToolbar",slot:"Separator",overridesResolver:(e,t)=>t.separator})({outline:0,margin:"0 4px 0 2px",cursor:"default"}),wt=_("div",{name:"MuiTimePickerToolbar",slot:"HourMinuteLabel",overridesResolver:(e,t)=>[{["&.".concat(Ve.hourMinuteLabelLandscape)]:t.hourMinuteLabelLandscape,["&.".concat(Ve.hourMinuteLabelReverse)]:t.hourMinuteLabelReverse},t.hourMinuteLabel]})(({theme:e})=>y({display:"flex",justifyContent:"flex-end",alignItems:"flex-end"},e.direction==="rtl"&&{flexDirection:"row-reverse"},{variants:[{props:{isLandscape:!0},style:{marginTop:"auto"}}]}));wt.propTypes={as:o.elementType,ownerState:o.object.isRequired,sx:o.oneOfType([o.arrayOf(o.oneOfType([o.func,o.object,o.bool])),o.func,o.object])};const St=_("div",{name:"MuiTimePickerToolbar",slot:"AmPmSelection",overridesResolver:(e,t)=>[{[".".concat(Ve.ampmLabel)]:t.ampmLabel},{["&.".concat(Ve.ampmLandscape)]:t.ampmLandscape},t.ampmSelection]})({display:"flex",flexDirection:"column",marginRight:"auto",marginLeft:12,["& .".concat(Ve.ampmLabel)]:{fontSize:17},variants:[{props:{isLandscape:!0},style:{margin:"4px 0 auto",flexDirection:"row",justifyContent:"space-around",flexBasis:"100%"}}]});St.propTypes={as:o.elementType,ownerState:o.object.isRequired,sx:o.oneOfType([o.arrayOf(o.oneOfType([o.func,o.object,o.bool])),o.func,o.object])};function Rs(e){const t=J({props:e,name:"MuiTimePickerToolbar"}),{ampm:n,ampmInClock:s,value:r,isLandscape:a,onChange:l,view:m,onViewChange:c,views:d,disabled:g,readOnly:u,className:h}=t,p=se(t,Ps),f=be(),k=we(),M=Nt(),D=!!(n&&!s&&d.includes("hours")),{meridiemMode:V,handleMeridiemChange:P}=ze(r,n,l),A=F=>n?f.format(F,"hours12h"):f.format(F,"hours24h"),I=t,w=Ds(y({},I,{theme:M})),T=i.jsx(Vs,{tabIndex:-1,value:":",variant:"h3",selected:!1,className:w.separator});return i.jsxs(Is,y({landscapeDirection:"row",toolbarTitle:k.timePickerToolbarTitle,isLandscape:a,ownerState:I,className:re(w.root,h)},p,{children:[i.jsxs(wt,{className:w.hourMinuteLabel,ownerState:I,children:[De(d,"hours")&&i.jsx(Ie,{tabIndex:-1,variant:"h3",onClick:()=>c("hours"),selected:m==="hours",value:r?A(r):"--"}),De(d,["hours","minutes"])&&T,De(d,"minutes")&&i.jsx(Ie,{tabIndex:-1,variant:"h3",onClick:()=>c("minutes"),selected:m==="minutes",value:r?f.format(r,"minutes"):"--"}),De(d,["minutes","seconds"])&&T,De(d,"seconds")&&i.jsx(Ie,{variant:"h3",onClick:()=>c("seconds"),selected:m==="seconds",value:r?f.format(r,"seconds"):"--"})]}),D&&i.jsxs(St,{className:w.ampmSelection,ownerState:I,children:[i.jsx(Ie,{disableRipple:!0,variant:"subtitle2",selected:V==="am",typographyClassName:w.ampmLabel,value:fe(f,"am"),onClick:u?void 0:()=>P("am"),disabled:g}),i.jsx(Ie,{disableRipple:!0,variant:"subtitle2",selected:V==="pm",typographyClassName:w.ampmLabel,value:fe(f,"pm"),onClick:u?void 0:()=>P("pm"),disabled:g})]})]}))}function Mt(e,t){var l,m,c,d;const n=be(),s=J({props:e,name:t}),r=(l=s.ampm)!=null?l:n.is12HourCycleInCurrentLocale(),a=v.useMemo(()=>{var g;return((g=s.localeText)==null?void 0:g.toolbarTitle)==null?s.localeText:y({},s.localeText,{timePickerToolbarTitle:s.localeText.toolbarTitle})},[s.localeText]);return y({},s,{ampm:r,localeText:a},as({views:s.views,openTo:s.openTo,defaultViews:["hours","minutes"],defaultOpenTo:"hours"}),{disableFuture:(m=s.disableFuture)!=null?m:!1,disablePast:(c=s.disablePast)!=null?c:!1,slots:y({toolbar:Rs},s.slots),slotProps:y({},s.slotProps,{toolbar:y({ampm:r,ampmInClock:s.ampmInClock},(d=s.slotProps)==null?void 0:d.toolbar)})})}function js(e){return de("MuiTimeClock",e)}ue("MuiTimeClock",["root","arrowSwitcher"]);const Me=220,ne=36,Re={x:Me/2,y:Me/2},Pt={x:Re.x,y:0},Ns=Pt.x-Re.x,Ls=Pt.y-Re.y,Fs=e=>e*(180/Math.PI),Dt=(e,t,n)=>{const s=t-Re.x,r=n-Re.y,a=Math.atan2(Ns,Ls)-Math.atan2(s,r);let l=Fs(a);l=Math.round(l/e)*e,l%=360;const m=Math.floor(l/e)||0,c=s**2+r**2,d=Math.sqrt(c);return{value:m,distance:d}},Os=(e,t,n=1)=>{const s=n*6;let{value:r}=Dt(s,e,t);return r=r*n%60,r},Bs=(e,t,n)=>{const{value:s,distance:r}=Dt(30,e,t);let a=s||12;return n?a%=12:r<Me/2-ne&&(a+=12,a%=24),a};function _s(e){return de("MuiClockPointer",e)}ue("MuiClockPointer",["root","thumb"]);const As=["className","hasSelected","isInner","type","viewValue"],Es=e=>{const{classes:t}=e;return ie({root:["root"],thumb:["thumb"]},_s,t)},$s=_("div",{name:"MuiClockPointer",slot:"Root",overridesResolver:(e,t)=>t.root})(({theme:e})=>({width:2,backgroundColor:(e.vars||e).palette.primary.main,position:"absolute",left:"calc(50% - 1px)",bottom:"50%",transformOrigin:"center bottom 0px",variants:[{props:{shouldAnimate:!0},style:{transition:e.transitions.create(["transform","height"])}}]})),Hs=_("div",{name:"MuiClockPointer",slot:"Thumb",overridesResolver:(e,t)=>t.thumb})(({theme:e})=>({width:4,height:4,backgroundColor:(e.vars||e).palette.primary.contrastText,borderRadius:"50%",position:"absolute",top:-21,left:"calc(50% - ".concat(ne/2,"px)"),border:"".concat((ne-4)/2,"px solid ").concat((e.vars||e).palette.primary.main),boxSizing:"content-box",variants:[{props:{hasSelected:!0},style:{backgroundColor:(e.vars||e).palette.primary.main}}]}));function Us(e){const t=J({props:e,name:"MuiClockPointer"}),{className:n,isInner:s,type:r,viewValue:a}=t,l=se(t,As),m=v.useRef(r);v.useEffect(()=>{m.current=r},[r]);const c=y({},t,{shouldAnimate:m.current!==r}),d=Es(c),g=()=>{let h=360/(r==="hours"?12:60)*a;return r==="hours"&&a>12&&(h-=360),{height:Math.round((s?.26:.4)*Me),transform:"rotateZ(".concat(h,"deg)")}};return i.jsx($s,y({style:g(),className:re(n,d.root),ownerState:c},l,{children:i.jsx(Hs,{ownerState:c,className:d.thumb})}))}function zs(e){return de("MuiClock",e)}ue("MuiClock",["root","clock","wrapper","squareMask","pin","amButton","pmButton","meridiemText"]);const Ws=e=>{const{classes:t}=e;return ie({root:["root"],clock:["clock"],wrapper:["wrapper"],squareMask:["squareMask"],pin:["pin"],amButton:["amButton"],pmButton:["pmButton"],meridiemText:["meridiemText"]},zs,t)},qs=_("div",{name:"MuiClock",slot:"Root",overridesResolver:(e,t)=>t.root})(({theme:e})=>({display:"flex",justifyContent:"center",alignItems:"center",margin:e.spacing(2)})),Gs=_("div",{name:"MuiClock",slot:"Clock",overridesResolver:(e,t)=>t.clock})({backgroundColor:"rgba(0,0,0,.07)",borderRadius:"50%",height:220,width:220,flexShrink:0,position:"relative",pointerEvents:"none"}),Ys=_("div",{name:"MuiClock",slot:"Wrapper",overridesResolver:(e,t)=>t.wrapper})({"&:focus":{outline:"none"}}),Ks=_("div",{name:"MuiClock",slot:"SquareMask",overridesResolver:(e,t)=>t.squareMask})({width:"100%",height:"100%",position:"absolute",pointerEvents:"auto",outline:0,touchAction:"none",userSelect:"none",variants:[{props:{disabled:!1},style:{"@media (pointer: fine)":{cursor:"pointer",borderRadius:"50%"},"&:active":{cursor:"move"}}}]}),Qs=_("div",{name:"MuiClock",slot:"Pin",overridesResolver:(e,t)=>t.pin})(({theme:e})=>({width:6,height:6,borderRadius:"50%",backgroundColor:(e.vars||e).palette.primary.main,position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)"})),Js=_(lt,{name:"MuiClock",slot:"AmButton",overridesResolver:(e,t)=>t.amButton})(({theme:e})=>({zIndex:1,position:"absolute",bottom:8,left:8,paddingLeft:4,paddingRight:4,width:ne,variants:[{props:{meridiemMode:"am"},style:{backgroundColor:(e.vars||e).palette.primary.main,color:(e.vars||e).palette.primary.contrastText,"&:hover":{backgroundColor:(e.vars||e).palette.primary.light}}}]})),Xs=_(lt,{name:"MuiClock",slot:"PmButton",overridesResolver:(e,t)=>t.pmButton})(({theme:e})=>({zIndex:1,position:"absolute",bottom:8,right:8,paddingLeft:4,paddingRight:4,width:ne,variants:[{props:{meridiemMode:"pm"},style:{backgroundColor:(e.vars||e).palette.primary.main,color:(e.vars||e).palette.primary.contrastText,"&:hover":{backgroundColor:(e.vars||e).palette.primary.light}}}]})),st=_(it,{name:"MuiClock",slot:"meridiemText",overridesResolver:(e,t)=>t.meridiemText})({overflow:"hidden",whiteSpace:"nowrap",textOverflow:"ellipsis"});function Zs(e){const t=J({props:e,name:"MuiClock"}),{ampm:n,ampmInClock:s,autoFocus:r,children:a,value:l,handleMeridiemChange:m,isTimeDisabled:c,meridiemMode:d,minutesStep:g=1,onChange:u,selectedId:h,type:p,viewValue:f,disabled:k=!1,readOnly:M,className:D}=t,V=t,P=be(),A=we(),I=v.useRef(!1),w=Ws(V),T=c(f,p),F=!n&&p==="hours"&&(f<1||f>12),N=(j,L)=>{k||M||c(j,p)||u(j,L)},B=(j,L)=>{let{offsetX:E,offsetY:G}=j;if(E===void 0){const oe=j.target.getBoundingClientRect();E=j.changedTouches[0].clientX-oe.left,G=j.changedTouches[0].clientY-oe.top}const O=p==="seconds"||p==="minutes"?Os(E,G,g):Bs(E,G,!!n);N(O,L)},b=j=>{I.current=!0,B(j,"shallow")},R=j=>{I.current&&(B(j,"finish"),I.current=!1)},U=j=>{j.buttons>0&&B(j.nativeEvent,"shallow")},ee=j=>{I.current&&(I.current=!1),B(j.nativeEvent,"finish")},ge=v.useMemo(()=>p==="hours"?!0:f%5===0,[p,f]),me=p==="minutes"?g:1,q=v.useRef(null);Lt(()=>{r&&q.current.focus()},[r]);const he=j=>{if(!I.current)switch(j.key){case"Home":N(0,"partial"),j.preventDefault();break;case"End":N(p==="minutes"?59:23,"partial"),j.preventDefault();break;case"ArrowUp":N(f+me,"partial"),j.preventDefault();break;case"ArrowDown":N(f-me,"partial"),j.preventDefault();break}};return i.jsxs(qs,{className:re(D,w.root),children:[i.jsxs(Gs,{className:w.clock,children:[i.jsx(Ks,{onTouchMove:b,onTouchEnd:R,onMouseUp:ee,onMouseMove:U,ownerState:{disabled:k},className:w.squareMask}),!T&&i.jsxs(v.Fragment,{children:[i.jsx(Qs,{className:w.pin}),l!=null&&i.jsx(Us,{type:p,viewValue:f,isInner:F,hasSelected:ge})]}),i.jsx(Ys,{"aria-activedescendant":h,"aria-label":A.clockLabelText(p,l,P),ref:q,role:"listbox",onKeyDown:he,tabIndex:0,className:w.wrapper,children:a})]}),n&&s&&i.jsxs(v.Fragment,{children:[i.jsx(Js,{onClick:M?void 0:()=>m("am"),disabled:k||d===null,ownerState:V,className:w.amButton,title:fe(P,"am"),children:i.jsx(st,{variant:"caption",className:w.meridiemText,children:fe(P,"am")})}),i.jsx(Xs,{disabled:k||d===null,onClick:M?void 0:()=>m("pm"),ownerState:V,className:w.pmButton,title:fe(P,"pm"),children:i.jsx(st,{variant:"caption",className:w.meridiemText,children:fe(P,"pm")})})]})]})}function eo(e){return de("MuiClockNumber",e)}const Ne=ue("MuiClockNumber",["root","selected","disabled"]),to=["className","disabled","index","inner","label","selected"],so=e=>{const{classes:t,selected:n,disabled:s}=e;return ie({root:["root",n&&"selected",s&&"disabled"]},eo,t)},oo=_("span",{name:"MuiClockNumber",slot:"Root",overridesResolver:(e,t)=>[t.root,{["&.".concat(Ne.disabled)]:t.disabled},{["&.".concat(Ne.selected)]:t.selected}]})(({theme:e})=>({height:ne,width:ne,position:"absolute",left:"calc((100% - ".concat(ne,"px) / 2)"),display:"inline-flex",justifyContent:"center",alignItems:"center",borderRadius:"50%",color:(e.vars||e).palette.text.primary,fontFamily:e.typography.fontFamily,"&:focused":{backgroundColor:(e.vars||e).palette.background.paper},["&.".concat(Ne.selected)]:{color:(e.vars||e).palette.primary.contrastText},["&.".concat(Ne.disabled)]:{pointerEvents:"none",color:(e.vars||e).palette.text.disabled},variants:[{props:{inner:!0},style:y({},e.typography.body2,{color:(e.vars||e).palette.text.secondary})}]}));function It(e){const t=J({props:e,name:"MuiClockNumber"}),{className:n,disabled:s,index:r,inner:a,label:l,selected:m}=t,c=se(t,to),d=t,g=so(d),u=r%12/12*Math.PI*2-Math.PI/2,h=(Me-ne-2)/2*(a?.65:1),p=Math.round(Math.cos(u)*h),f=Math.round(Math.sin(u)*h);return i.jsx(oo,y({className:re(n,g.root),"aria-disabled":s?!0:void 0,"aria-selected":m?!0:void 0,role:"option",style:{transform:"translate(".concat(p,"px, ").concat(f+(Me-ne)/2,"px")},ownerState:d},c,{children:l}))}const ao=({ampm:e,value:t,getClockNumberText:n,isDisabled:s,selectedId:r,utils:a})=>{const l=t?a.getHours(t):null,m=[],c=e?1:0,d=e?12:23,g=u=>l===null?!1:e?u===12?l===12||l===0:l===u||l-12===u:l===u;for(let u=c;u<=d;u+=1){let h=u.toString();u===0&&(h="00");const p=!e&&(u===0||u>12);h=a.formatNumber(h);const f=g(u);m.push(i.jsx(It,{id:f?r:void 0,index:u,inner:p,selected:f,disabled:s(u),label:h,"aria-label":n(h)},u))}return m},ot=({utils:e,value:t,isDisabled:n,getClockNumberText:s,selectedId:r})=>{const a=e.formatNumber;return[[5,a("05")],[10,a("10")],[15,a("15")],[20,a("20")],[25,a("25")],[30,a("30")],[35,a("35")],[40,a("40")],[45,a("45")],[50,a("50")],[55,a("55")],[0,a("00")]].map(([l,m],c)=>{const d=l===t;return i.jsx(It,{label:m,id:d?r:void 0,index:c+1,inner:!1,disabled:n(l),selected:d,"aria-label":s(m)},l)})},Qe=({value:e,referenceDate:t,utils:n,props:s,timezone:r})=>{const a=v.useMemo(()=>ye.getInitialReferenceValue({value:e,utils:n,props:s,referenceDate:t,granularity:ns.day,timezone:r,getTodayDate:()=>rs(n,r,"date")}),[]);return e!=null?e:a},no=["ampm","ampmInClock","autoFocus","slots","slotProps","value","defaultValue","referenceDate","disableIgnoringDatePartForTimeValidation","maxTime","minTime","disableFuture","disablePast","minutesStep","shouldDisableTime","showViewSwitcher","onChange","view","views","openTo","onViewChange","focusedView","onFocusedViewChange","className","disabled","readOnly","timezone"],ro=e=>{const{classes:t}=e;return ie({root:["root"],arrowSwitcher:["arrowSwitcher"]},js,t)},io=_(We,{name:"MuiTimeClock",slot:"Root",overridesResolver:(e,t)=>t.root})({display:"flex",flexDirection:"column",position:"relative"}),lo=_(is,{name:"MuiTimeClock",slot:"ArrowSwitcher",overridesResolver:(e,t)=>t.arrowSwitcher})({position:"absolute",right:12,top:15}),co=["hours","minutes"],uo=v.forwardRef(function(t,n){const s=be(),r=J({props:t,name:"MuiTimeClock"}),{ampm:a=s.is12HourCycleInCurrentLocale(),ampmInClock:l=!1,autoFocus:m,slots:c,slotProps:d,value:g,defaultValue:u,referenceDate:h,disableIgnoringDatePartForTimeValidation:p=!1,maxTime:f,minTime:k,disableFuture:M,disablePast:D,minutesStep:V=1,shouldDisableTime:P,showViewSwitcher:A,onChange:I,view:w,views:T=co,openTo:F,onViewChange:N,focusedView:B,onFocusedViewChange:b,className:R,disabled:U,readOnly:ee,timezone:ge}=r,me=se(r,no),{value:q,handleValueChange:he,timezone:j}=qe({name:"TimeClock",timezone:ge,value:g,defaultValue:u,onChange:I,valueManager:ye}),L=Qe({value:q,referenceDate:h,utils:s,props:r,timezone:j}),E=we(),G=Ge(j),{view:O,setView:oe,previousView:X,nextView:ke,setValueAndGoToNextView:Q}=Ye({view:w,views:T,openTo:F,onViewChange:N,onChange:he,focusedView:B,onFocusedViewChange:b}),{meridiemMode:te,handleMeridiemChange:Pe}=ze(L,a,Q),Y=v.useCallback((z,S)=>{const x=_e(p,s),C=S==="hours"||S==="minutes"&&T.includes("seconds"),W=({start:H,end:K})=>!(k&&x(k,K)||f&&x(H,f)||M&&x(H,G)||D&&x(G,C?K:H)),Te=(H,K=1)=>{if(H%K!==0)return!1;if(P)switch(S){case"hours":return!P(s.setHours(L,H),"hours");case"minutes":return!P(s.setMinutes(L,H),"minutes");case"seconds":return!P(s.setSeconds(L,H),"seconds");default:return!1}return!0};switch(S){case"hours":{const H=Fe(z,te,a),K=s.setHours(L,H),$=s.setSeconds(s.setMinutes(K,0),0),Z=s.setSeconds(s.setMinutes(K,59),59);return!W({start:$,end:Z})||!Te(H)}case"minutes":{const H=s.setMinutes(L,z),K=s.setSeconds(H,0),$=s.setSeconds(H,59);return!W({start:K,end:$})||!Te(z,V)}case"seconds":{const H=s.setSeconds(L,z);return!W({start:H,end:H})||!Te(z)}default:throw new Error("not supported")}},[a,L,p,f,te,k,V,P,s,M,D,G,T]),ae=Ft(),le=v.useMemo(()=>{switch(O){case"hours":{const z=(S,x)=>{const C=Fe(S,te,a);Q(s.setHours(L,C),x,"hours")};return{onChange:z,viewValue:s.getHours(L),children:ao({value:q,utils:s,ampm:a,onChange:z,getClockNumberText:E.hoursClockNumberText,isDisabled:S=>U||Y(S,"hours"),selectedId:ae})}}case"minutes":{const z=s.getMinutes(L),S=(x,C)=>{Q(s.setMinutes(L,x),C,"minutes")};return{viewValue:z,onChange:S,children:ot({utils:s,value:z,onChange:S,getClockNumberText:E.minutesClockNumberText,isDisabled:x=>U||Y(x,"minutes"),selectedId:ae})}}case"seconds":{const z=s.getSeconds(L),S=(x,C)=>{Q(s.setSeconds(L,x),C,"seconds")};return{viewValue:z,onChange:S,children:ot({utils:s,value:z,onChange:S,getClockNumberText:E.secondsClockNumberText,isDisabled:x=>U||Y(x,"seconds"),selectedId:ae})}}default:throw new Error("You must provide the type for ClockView")}},[O,s,q,a,E.hoursClockNumberText,E.minutesClockNumberText,E.secondsClockNumberText,te,Q,L,Y,ae,U]),ce=r,ve=ro(ce);return i.jsxs(io,y({ref:n,className:re(ve.root,R),ownerState:ce},me,{children:[i.jsx(Zs,y({autoFocus:m!=null?m:!!B,ampmInClock:l&&T.includes("hours"),value:q,type:O,ampm:a,minutesStep:V,isTimeDisabled:Y,meridiemMode:te,handleMeridiemChange:Pe,selectedId:ae,disabled:U,readOnly:ee},le)),A&&i.jsx(lo,{className:ve.arrowSwitcher,slots:c,slotProps:d,onGoToPrevious:()=>oe(X),isPreviousDisabled:!X,previousLabel:E.openPreviousView,onGoToNext:()=>oe(ke),isNextDisabled:!ke,nextLabel:E.openNextView,ownerState:ce})]}))});function mo(e){return de("MuiDigitalClock",e)}ue("MuiDigitalClock",["root","list","item"]);const po=["ampm","timeStep","autoFocus","slots","slotProps","value","defaultValue","referenceDate","disableIgnoringDatePartForTimeValidation","maxTime","minTime","disableFuture","disablePast","minutesStep","shouldDisableTime","onChange","view","openTo","onViewChange","focusedView","onFocusedViewChange","className","disabled","readOnly","views","skipDisabled","timezone"],fo=e=>{const{classes:t}=e;return ie({root:["root"],list:["list"],item:["item"]},mo,t)},bo=_(We,{name:"MuiDigitalClock",slot:"Root",overridesResolver:(e,t)=>t.root})({overflowY:"auto",width:"100%","@media (prefers-reduced-motion: no-preference)":{scrollBehavior:"auto"},maxHeight:gt,variants:[{props:{alreadyRendered:!0},style:{"@media (prefers-reduced-motion: no-preference)":{scrollBehavior:"smooth"}}}]}),go=_(Tt,{name:"MuiDigitalClock",slot:"List",overridesResolver:(e,t)=>t.list})({padding:0}),ho=_(Ct,{name:"MuiDigitalClock",slot:"Item",overridesResolver:(e,t)=>t.item})(({theme:e})=>({padding:"8px 16px",margin:"2px 4px","&:first-of-type":{marginTop:4},"&:hover":{backgroundColor:e.vars?"rgba(".concat(e.vars.palette.primary.mainChannel," / ").concat(e.vars.palette.action.hoverOpacity,")"):Oe(e.palette.primary.main,e.palette.action.hoverOpacity)},"&.Mui-selected":{backgroundColor:(e.vars||e).palette.primary.main,color:(e.vars||e).palette.primary.contrastText,"&:focus-visible, &:hover":{backgroundColor:(e.vars||e).palette.primary.dark}},"&.Mui-focusVisible":{backgroundColor:e.vars?"rgba(".concat(e.vars.palette.primary.mainChannel," / ").concat(e.vars.palette.action.focusOpacity,")"):Oe(e.palette.primary.main,e.palette.action.focusOpacity)}})),ko=v.forwardRef(function(t,n){var z;const s=be(),r=v.useRef(null),a=ct(n,r),l=J({props:t,name:"MuiDigitalClock"}),{ampm:m=s.is12HourCycleInCurrentLocale(),timeStep:c=30,autoFocus:d,slots:g,slotProps:u,value:h,defaultValue:p,referenceDate:f,disableIgnoringDatePartForTimeValidation:k=!1,maxTime:M,minTime:D,disableFuture:V,disablePast:P,minutesStep:A=1,shouldDisableTime:I,onChange:w,view:T,openTo:F,onViewChange:N,focusedView:B,onFocusedViewChange:b,className:R,disabled:U,readOnly:ee,views:ge=["hours"],skipDisabled:me=!1,timezone:q}=l,he=se(l,po),{value:j,handleValueChange:L,timezone:E}=qe({name:"DigitalClock",timezone:q,value:h,defaultValue:p,onChange:w,valueManager:ye}),G=we(),O=Ge(E),oe=v.useMemo(()=>y({},l,{alreadyRendered:!!r.current}),[l]),X=fo(oe),ke=(z=g==null?void 0:g.digitalClockItem)!=null?z:ho,Q=rt({elementType:ke,externalSlotProps:u==null?void 0:u.digitalClockItem,ownerState:{},className:X.item}),te=Qe({value:j,referenceDate:f,utils:s,props:l,timezone:E}),Pe=Le(S=>L(S,"finish","hours")),{setValueAndGoToNextView:Y}=Ye({view:T,views:ge,openTo:F,onViewChange:N,onChange:Pe,focusedView:B,onFocusedViewChange:b}),ae=Le(S=>{Y(S,"finish")});v.useEffect(()=>{if(r.current===null)return;const S=r.current.querySelector('[role="listbox"] [role="option"][tabindex="0"], [role="listbox"] [role="option"][aria-selected="true"]');if(!S)return;const x=S.offsetTop;(d||B)&&S.focus(),r.current.scrollTop=x-4});const le=v.useCallback(S=>{const x=_e(k,s),C=()=>!(D&&x(D,S)||M&&x(S,M)||V&&x(S,O)||P&&x(O,S)),W=()=>s.getMinutes(S)%A!==0?!1:I?!I(S,"hours"):!0;return!C()||!W()},[k,s,D,M,V,O,P,A,I]),ce=v.useMemo(()=>{const S=s.startOfDay(te);return[S,...Array.from({length:Math.ceil(24*60/c)-1},(x,C)=>s.addMinutes(S,c*(C+1)))]},[te,c,s]),ve=ce.findIndex(S=>s.isEqual(S,te));return i.jsx(bo,y({ref:a,className:re(X.root,R),ownerState:oe},he,{children:i.jsx(go,{role:"listbox","aria-label":G.timePickerToolbarTitle,className:X.list,children:ce.map((S,x)=>{if(me&&le(S))return null;const C=s.isEqual(S,j),W=s.format(S,m?"fullTime12h":"fullTime24h"),Te=ve===x||ve===-1&&x===0?0:-1;return i.jsx(ke,y({onClick:()=>!ee&&ae(S),selected:C,disabled:U||le(S),disableRipple:ee,role:"option","aria-disabled":ee,"aria-selected":C,tabIndex:Te},Q,{children:W}),W)})})}))});function vo(e){return de("MuiMultiSectionDigitalClock",e)}ue("MuiMultiSectionDigitalClock",["root"]);function To(e){return de("MuiMultiSectionDigitalClockSection",e)}ue("MuiMultiSectionDigitalClockSection",["root","item"]);const Co=["autoFocus","onChange","className","disabled","readOnly","items","active","slots","slotProps","skipDisabled"],xo=e=>{const{classes:t}=e;return ie({root:["root"],item:["item"]},To,t)},yo=_(Tt,{name:"MuiMultiSectionDigitalClockSection",slot:"Root",overridesResolver:(e,t)=>t.root})(({theme:e})=>({maxHeight:gt,width:56,padding:0,overflow:"hidden","@media (prefers-reduced-motion: no-preference)":{scrollBehavior:"auto"},"@media (pointer: fine)":{"&:hover":{overflowY:"auto"}},"@media (pointer: none), (pointer: coarse)":{overflowY:"auto"},"&:not(:first-of-type)":{borderLeft:"1px solid ".concat((e.vars||e).palette.divider)},"&::after":{display:"block",content:'""',height:"calc(100% - 40px - 6px)"},variants:[{props:{alreadyRendered:!0},style:{"@media (prefers-reduced-motion: no-preference)":{scrollBehavior:"smooth"}}}]})),wo=_(Ct,{name:"MuiMultiSectionDigitalClockSection",slot:"Item",overridesResolver:(e,t)=>t.item})(({theme:e})=>({padding:8,margin:"2px 4px",width:ls,justifyContent:"center","&:first-of-type":{marginTop:4},"&:hover":{backgroundColor:e.vars?"rgba(".concat(e.vars.palette.primary.mainChannel," / ").concat(e.vars.palette.action.hoverOpacity,")"):Oe(e.palette.primary.main,e.palette.action.hoverOpacity)},"&.Mui-selected":{backgroundColor:(e.vars||e).palette.primary.main,color:(e.vars||e).palette.primary.contrastText,"&:focus-visible, &:hover":{backgroundColor:(e.vars||e).palette.primary.dark}},"&.Mui-focusVisible":{backgroundColor:e.vars?"rgba(".concat(e.vars.palette.primary.mainChannel," / ").concat(e.vars.palette.action.focusOpacity,")"):Oe(e.palette.primary.main,e.palette.action.focusOpacity)}})),So=v.forwardRef(function(t,n){var w;const s=v.useRef(null),r=ct(n,s),a=v.useRef(null),l=J({props:t,name:"MuiMultiSectionDigitalClockSection"}),{autoFocus:m,onChange:c,className:d,disabled:g,readOnly:u,items:h,active:p,slots:f,slotProps:k,skipDisabled:M}=l,D=se(l,Co),V=v.useMemo(()=>y({},l,{alreadyRendered:!!s.current}),[l]),P=xo(V),A=(w=f==null?void 0:f.digitalClockSectionItem)!=null?w:wo;v.useEffect(()=>{if(s.current===null)return;const T=s.current.querySelector('[role="option"][tabindex="0"], [role="option"][aria-selected="true"]');if(p&&m&&T&&T.focus(),!T||a.current===T)return;a.current=T;const F=T.offsetTop;s.current.scrollTop=F-4});const I=h.findIndex(T=>T.isFocused(T.value));return i.jsx(yo,y({ref:r,className:re(P.root,d),ownerState:V,autoFocusItem:m&&p,role:"listbox"},D,{children:h.map((T,F)=>{var U;const N=(U=T.isDisabled)==null?void 0:U.call(T,T.value),B=g||N;if(M&&B)return null;const b=T.isSelected(T.value),R=I===F||I===-1&&F===0?0:-1;return i.jsx(A,y({onClick:()=>!u&&c(T.value),selected:b,disabled:B,disableRipple:u,role:"option","aria-disabled":u||B||void 0,"aria-label":T.ariaLabel,"aria-selected":b,tabIndex:R,className:P.item},k==null?void 0:k.digitalClockSectionItem,{children:T.label}),T.label)})}))}),Mo=({now:e,value:t,utils:n,ampm:s,isDisabled:r,resolveAriaLabel:a,timeStep:l,valueOrReferenceDate:m})=>{const c=t?n.getHours(t):null,d=[],g=(p,f)=>{const k=f!=null?f:c;return k===null?!1:s?p===12?k===12||k===0:k===p||k-12===p:k===p},u=p=>g(p,n.getHours(m)),h=s?11:23;for(let p=0;p<=h;p+=l){let f=n.format(n.setHours(e,p),s?"hours12h":"hours24h");const k=a(parseInt(f,10).toString());f=n.formatNumber(f),d.push({value:p,label:f,isSelected:g,isDisabled:r,isFocused:u,ariaLabel:k})}return d},at=({value:e,utils:t,isDisabled:n,timeStep:s,resolveLabel:r,resolveAriaLabel:a,hasValue:l=!0})=>{const m=d=>e===null?!1:l&&e===d,c=d=>e===d;return[...Array.from({length:Math.ceil(60/s)},(d,g)=>{const u=s*g;return{value:u,label:t.formatNumber(r(u)),isDisabled:n,isSelected:m,isFocused:c,ariaLabel:a(u.toString())}})]},Po=["ampm","timeSteps","autoFocus","slots","slotProps","value","defaultValue","referenceDate","disableIgnoringDatePartForTimeValidation","maxTime","minTime","disableFuture","disablePast","minutesStep","shouldDisableTime","onChange","view","views","openTo","onViewChange","focusedView","onFocusedViewChange","className","disabled","readOnly","skipDisabled","timezone"],Do=e=>{const{classes:t}=e;return ie({root:["root"]},vo,t)},Io=_(We,{name:"MuiMultiSectionDigitalClock",slot:"Root",overridesResolver:(e,t)=>t.root})(({theme:e})=>({display:"flex",flexDirection:"row",width:"100%",borderBottom:"1px solid ".concat((e.vars||e).palette.divider)})),Vo=v.forwardRef(function(t,n){const s=be(),r=J({props:t,name:"MuiMultiSectionDigitalClock"}),{ampm:a=s.is12HourCycleInCurrentLocale(),timeSteps:l,autoFocus:m,slots:c,slotProps:d,value:g,defaultValue:u,referenceDate:h,disableIgnoringDatePartForTimeValidation:p=!1,maxTime:f,minTime:k,disableFuture:M,disablePast:D,minutesStep:V=1,shouldDisableTime:P,onChange:A,view:I,views:w=["hours","minutes"],openTo:T,onViewChange:F,focusedView:N,onFocusedViewChange:B,className:b,disabled:R,readOnly:U,skipDisabled:ee=!1,timezone:ge}=r,me=se(r,Po),{value:q,handleValueChange:he,timezone:j}=qe({name:"MultiSectionDigitalClock",timezone:ge,value:g,defaultValue:u,onChange:A,valueManager:ye}),L=we(),E=Ge(j),G=v.useMemo(()=>y({hours:1,minutes:5,seconds:5},l),[l]),O=Qe({value:q,referenceDate:h,utils:s,props:r,timezone:j}),oe=Le((x,C,W)=>he(x,C,W)),X=v.useMemo(()=>!a||!w.includes("hours")||w.includes("meridiem")?w:[...w,"meridiem"],[a,w]),{view:ke,setValueAndGoToNextView:Q,focusedView:te}=Ye({view:I,views:X,openTo:T,onViewChange:F,onChange:oe,focusedView:N,onFocusedViewChange:B}),Pe=Le(x=>{Q(x,"finish","meridiem")}),{meridiemMode:Y,handleMeridiemChange:ae}=ze(O,a,Pe,"finish"),le=v.useCallback((x,C)=>{const W=_e(p,s),Te=C==="hours"||C==="minutes"&&X.includes("seconds"),H=({start:$,end:Z})=>!(k&&W(k,Z)||f&&W($,f)||M&&W($,E)||D&&W(E,Te?Z:$)),K=($,Z=1)=>{if($%Z!==0)return!1;if(P)switch(C){case"hours":return!P(s.setHours(O,$),"hours");case"minutes":return!P(s.setMinutes(O,$),"minutes");case"seconds":return!P(s.setSeconds(O,$),"seconds");default:return!1}return!0};switch(C){case"hours":{const $=Fe(x,Y,a),Z=s.setHours(O,$),je=s.setSeconds(s.setMinutes(Z,0),0),jt=s.setSeconds(s.setMinutes(Z,59),59);return!H({start:je,end:jt})||!K($)}case"minutes":{const $=s.setMinutes(O,x),Z=s.setSeconds($,0),je=s.setSeconds($,59);return!H({start:Z,end:je})||!K(x,V)}case"seconds":{const $=s.setSeconds(O,x);return!H({start:$,end:$})||!K(x)}default:throw new Error("not supported")}},[a,O,p,f,Y,k,V,P,s,M,D,E,X]),ce=v.useCallback(x=>{switch(x){case"hours":return{onChange:C=>{const W=Fe(C,Y,a);Q(s.setHours(O,W),"finish","hours")},items:Mo({now:E,value:q,ampm:a,utils:s,isDisabled:C=>le(C,"hours"),timeStep:G.hours,resolveAriaLabel:L.hoursClockNumberText,valueOrReferenceDate:O})};case"minutes":return{onChange:C=>{Q(s.setMinutes(O,C),"finish","minutes")},items:at({value:s.getMinutes(O),utils:s,isDisabled:C=>le(C,"minutes"),resolveLabel:C=>s.format(s.setMinutes(E,C),"minutes"),timeStep:G.minutes,hasValue:!!q,resolveAriaLabel:L.minutesClockNumberText})};case"seconds":return{onChange:C=>{Q(s.setSeconds(O,C),"finish","seconds")},items:at({value:s.getSeconds(O),utils:s,isDisabled:C=>le(C,"seconds"),resolveLabel:C=>s.format(s.setSeconds(E,C),"seconds"),timeStep:G.seconds,hasValue:!!q,resolveAriaLabel:L.secondsClockNumberText})};case"meridiem":{const C=fe(s,"am"),W=fe(s,"pm");return{onChange:ae,items:[{value:"am",label:C,isSelected:()=>!!q&&Y==="am",isFocused:()=>!!O&&Y==="am",ariaLabel:C},{value:"pm",label:W,isSelected:()=>!!q&&Y==="pm",isFocused:()=>!!O&&Y==="pm",ariaLabel:W}]}}default:throw new Error("Unknown view: ".concat(x," found."))}},[E,q,a,s,G.hours,G.minutes,G.seconds,L.hoursClockNumberText,L.minutesClockNumberText,L.secondsClockNumberText,Y,Q,O,le,ae]),ve=v.useMemo(()=>X.reduce((x,C)=>y({},x,{[C]:ce(C)}),{}),[X,ce]),z=r,S=Do(z);return i.jsx(Io,y({ref:n,className:re(S.root,b),ownerState:z,role:"group"},me,{children:Object.entries(ve).map(([x,C])=>i.jsx(So,{items:C.items,onChange:C.onChange,active:ke===x,autoFocus:m!=null?m:te===x,disabled:R,readOnly:U,slots:c,slotProps:d,skipDisabled:ee,"aria-label":L.selectViewText(x)},x))}))}),$e=({view:e,onViewChange:t,focusedView:n,onFocusedViewChange:s,views:r,value:a,defaultValue:l,referenceDate:m,onChange:c,className:d,classes:g,disableFuture:u,disablePast:h,minTime:p,maxTime:f,shouldDisableTime:k,minutesStep:M,ampm:D,ampmInClock:V,slots:P,slotProps:A,readOnly:I,disabled:w,sx:T,autoFocus:F,showViewSwitcher:N,disableIgnoringDatePartForTimeValidation:B,timezone:b})=>i.jsx(uo,{view:e,onViewChange:t,focusedView:n&&Be(n)?n:null,onFocusedViewChange:s,views:r.filter(Be),value:a,defaultValue:l,referenceDate:m,onChange:c,className:d,classes:g,disableFuture:u,disablePast:h,minTime:p,maxTime:f,shouldDisableTime:k,minutesStep:M,ampm:D,ampmInClock:V,slots:P,slotProps:A,readOnly:I,disabled:w,sx:T,autoFocus:F,showViewSwitcher:N,disableIgnoringDatePartForTimeValidation:B,timezone:b}),Ro=({view:e,onViewChange:t,focusedView:n,onFocusedViewChange:s,views:r,value:a,defaultValue:l,referenceDate:m,onChange:c,className:d,classes:g,disableFuture:u,disablePast:h,minTime:p,maxTime:f,shouldDisableTime:k,minutesStep:M,ampm:D,slots:V,slotProps:P,readOnly:A,disabled:I,sx:w,autoFocus:T,disableIgnoringDatePartForTimeValidation:F,timeSteps:N,skipDisabled:B,timezone:b})=>i.jsx(ko,{view:e,onViewChange:t,focusedView:n,onFocusedViewChange:s,views:r.filter(Be),value:a,defaultValue:l,referenceDate:m,onChange:c,className:d,classes:g,disableFuture:u,disablePast:h,minTime:p,maxTime:f,shouldDisableTime:k,minutesStep:M,ampm:D,slots:V,slotProps:P,readOnly:A,disabled:I,sx:w,autoFocus:T,disableIgnoringDatePartForTimeValidation:F,timeStep:N==null?void 0:N.minutes,skipDisabled:B,timezone:b}),nt=({view:e,onViewChange:t,focusedView:n,onFocusedViewChange:s,views:r,value:a,defaultValue:l,referenceDate:m,onChange:c,className:d,classes:g,disableFuture:u,disablePast:h,minTime:p,maxTime:f,shouldDisableTime:k,minutesStep:M,ampm:D,slots:V,slotProps:P,readOnly:A,disabled:I,sx:w,autoFocus:T,disableIgnoringDatePartForTimeValidation:F,timeSteps:N,skipDisabled:B,timezone:b})=>i.jsx(Vo,{view:e,onViewChange:t,focusedView:n,onFocusedViewChange:s,views:r.filter(Be),value:a,defaultValue:l,referenceDate:m,onChange:c,className:d,classes:g,disableFuture:u,disablePast:h,minTime:p,maxTime:f,shouldDisableTime:k,minutesStep:M,ampm:D,slots:V,slotProps:P,readOnly:A,disabled:I,sx:w,autoFocus:T,disableIgnoringDatePartForTimeValidation:F,timeSteps:N,skipDisabled:B,timezone:b}),jo=(e,t,n)=>n?t.filter(s=>!cs(s)||s==="hours"):e?[...t,"meridiem"]:t,No=(e,t)=>{var n,s;return 24*60/(((n=e.hours)!=null?n:1)*((s=e.minutes)!=null?s:5))<=t};function Lo({thresholdToRenderTimeInASingleColumn:e,ampm:t,timeSteps:n,views:s}){const r=e!=null?e:24,a=y({hours:1,minutes:5,seconds:5},n),l=No(a,r);return{thresholdToRenderTimeInASingleColumn:r,timeSteps:a,shouldRenderTimeInASingleColumn:l,views:jo(t,s,l)}}const Vt=v.forwardRef(function(t,n){var D,V,P,A,I,w;const s=we(),r=be(),a=Mt(t,"MuiDesktopTimePicker"),{shouldRenderTimeInASingleColumn:l,views:m,timeSteps:c}=Lo(a),d=l?Ro:nt,g=y({hours:d,minutes:d,seconds:d,meridiem:d},a.viewRenderers),u=(D=a.ampmInClock)!=null?D:!0,h=l?[]:["accept"],f=((V=g.hours)==null?void 0:V.name)===nt.name?m:m.filter(T=>T!=="meridiem"),k=y({},a,{ampmInClock:u,timeSteps:c,viewRenderers:g,format:ht(r,a),views:l?["hours"]:f,slots:y({field:xt,openPickerIcon:us},a.slots),slotProps:y({},a.slotProps,{field:T=>{var F;return y({},ut((F=a.slotProps)==null?void 0:F.field,T),kt(a),{ref:n})},toolbar:y({hidden:!0,ampmInClock:u},(P=a.slotProps)==null?void 0:P.toolbar),actionBar:y({actions:h},(A=a.slotProps)==null?void 0:A.actionBar)})}),{renderPicker:M}=ds({props:k,valueManager:ye,valueType:"time",getOpenDialogAriaText:(w=(I=k.localeText)==null?void 0:I.openTimePickerDialogue)!=null?w:s.openTimePickerDialogue,validator:Ke});return M()});Vt.propTypes={ampm:o.bool,ampmInClock:o.bool,autoFocus:o.bool,className:o.string,closeOnSelect:o.bool,defaultValue:o.object,disabled:o.bool,disableFuture:o.bool,disableIgnoringDatePartForTimeValidation:o.bool,disableOpenPicker:o.bool,disablePast:o.bool,enableAccessibleFieldDOMStructure:o.any,format:o.string,formatDensity:o.oneOf(["dense","spacious"]),inputRef:vt,label:o.node,localeText:o.object,maxTime:o.object,minTime:o.object,minutesStep:o.number,name:o.string,onAccept:o.func,onChange:o.func,onClose:o.func,onError:o.func,onOpen:o.func,onSelectedSectionsChange:o.func,onViewChange:o.func,open:o.bool,openTo:o.oneOf(["hours","meridiem","minutes","seconds"]),orientation:o.oneOf(["landscape","portrait"]),readOnly:o.bool,reduceAnimations:o.bool,referenceDate:o.object,selectedSections:o.oneOfType([o.oneOf(["all","day","empty","hours","meridiem","minutes","month","seconds","weekDay","year"]),o.number]),shouldDisableTime:o.func,skipDisabled:o.bool,slotProps:o.object,slots:o.object,sx:o.oneOfType([o.arrayOf(o.oneOfType([o.func,o.object,o.bool])),o.func,o.object]),thresholdToRenderTimeInASingleColumn:o.number,timeSteps:o.shape({hours:o.number,minutes:o.number,seconds:o.number}),timezone:o.string,value:o.object,view:o.oneOf(["hours","meridiem","minutes","seconds"]),viewRenderers:o.shape({hours:o.func,meridiem:o.func,minutes:o.func,seconds:o.func}),views:o.arrayOf(o.oneOf(["hours","minutes","seconds"]).isRequired)};const Rt=v.forwardRef(function(t,n){var g,u,h,p;const s=we(),r=be(),a=Mt(t,"MuiMobileTimePicker"),l=y({hours:$e,minutes:$e,seconds:$e},a.viewRenderers),m=(g=a.ampmInClock)!=null?g:!1,c=y({},a,{ampmInClock:m,viewRenderers:l,format:ht(r,a),slots:y({field:xt},a.slots),slotProps:y({},a.slotProps,{field:f=>{var k;return y({},ut((k=a.slotProps)==null?void 0:k.field,f),kt(a),{ref:n})},toolbar:y({hidden:!1,ampmInClock:m},(u=a.slotProps)==null?void 0:u.toolbar)})}),{renderPicker:d}=ms({props:c,valueManager:ye,valueType:"time",getOpenDialogAriaText:(p=(h=c.localeText)==null?void 0:h.openTimePickerDialogue)!=null?p:s.openTimePickerDialogue,validator:Ke});return d()});Rt.propTypes={ampm:o.bool,ampmInClock:o.bool,autoFocus:o.bool,className:o.string,closeOnSelect:o.bool,defaultValue:o.object,disabled:o.bool,disableFuture:o.bool,disableIgnoringDatePartForTimeValidation:o.bool,disableOpenPicker:o.bool,disablePast:o.bool,enableAccessibleFieldDOMStructure:o.any,format:o.string,formatDensity:o.oneOf(["dense","spacious"]),inputRef:vt,label:o.node,localeText:o.object,maxTime:o.object,minTime:o.object,minutesStep:o.number,name:o.string,onAccept:o.func,onChange:o.func,onClose:o.func,onError:o.func,onOpen:o.func,onSelectedSectionsChange:o.func,onViewChange:o.func,open:o.bool,openTo:o.oneOf(["hours","minutes","seconds"]),orientation:o.oneOf(["landscape","portrait"]),readOnly:o.bool,reduceAnimations:o.bool,referenceDate:o.object,selectedSections:o.oneOfType([o.oneOf(["all","day","empty","hours","meridiem","minutes","month","seconds","weekDay","year"]),o.number]),shouldDisableTime:o.func,slotProps:o.object,slots:o.object,sx:o.oneOfType([o.arrayOf(o.oneOfType([o.func,o.object,o.bool])),o.func,o.object]),timezone:o.string,value:o.object,view:o.oneOf(["hours","minutes","seconds"]),viewRenderers:o.shape({hours:o.func,minutes:o.func,seconds:o.func}),views:o.arrayOf(o.oneOf(["hours","minutes","seconds"]).isRequired)};const Fo=["desktopModeMediaQuery"],Oo=v.forwardRef(function(t,n){const s=J({props:t,name:"MuiTimePicker"}),{desktopModeMediaQuery:r=ps}=s,a=se(s,Fo);return Ot(r,{defaultMatches:!0})?i.jsx(Vt,y({ref:n},a)):i.jsx(Rt,y({ref:n},a))}),Bo=({settingName:e,value:t,defaultValue:n,handleChange:s})=>{const{t:r,i18n:a}=dt(),[l,m]=v.useState(!1),[c,d]=v.useState(t),[g,u]=v.useState("en"),h=a.language;v.useEffect(()=>{Yt(h).then(M=>u(M?h:"en"))},[h]),v.useEffect(()=>{t&&d(t)},[t]);const p=v.useCallback(M=>{m(!1),M&&d(t)},[t]),f=v.useCallback(()=>p(!0),[p]),k=v.useCallback((M,D=!0)=>{D&&p(!1),t!==M&&s(M)},[t,s,p]);return i.jsxs(i.Fragment,{children:[i.jsx(He,{onClick:()=>m(!0),children:i.jsx(Ue,{primary:e,secondary:Ee(t,"HH:mm").locale(h).format("LT"),secondaryTypographyProps:{style:{display:"flex",flexDirection:"column"}}})}),i.jsxs(mt,{open:l,onClose:p,children:[i.jsxs(pt,{children:[i.jsx(ft,{sx:{paddingLeft:0},children:e}),i.jsx(fs,{dateAdapter:bs,adapterLocale:g,children:i.jsx(Oo,{value:Ee(c,"HH:mm"),defaultValue:Ee(n,"HH:mm"),format:"LT",onChange:M=>{var D;return d((D=M==null?void 0:M.format("HH:mm"))!=null?D:"00:00")}})})]}),i.jsxs(bt,{children:[n!==void 0?i.jsx(xe,{onClick:()=>{d(n),k(n,!1)},color:"primary",children:r("global.button.reset_to_default")}):null,i.jsx(xe,{onClick:f,color:"primary",children:r("global.button.cancel")}),i.jsx(xe,{onClick:()=>{k(c)},color:"primary",children:r("global.button.ok")})]})]})]})},_o=e=>({backupPath:e.backupPath,backupTime:e.backupTime,backupInterval:e.backupInterval,backupTTL:e.backupTTL}),Ao=e=>e===0?Xe("global.label.never"):Xe("settings.backup.automated.cleanup.label.value",{days:e,count:e});let pe;function ea(){var B;const{t:e}=dt(),{setTitle:t,setAction:n}=v.useContext(Bt);v.useEffect(()=>(t(e("settings.backup.title")),n(null),()=>{t(""),n(null)}),[e]),_t("settings");const{data:s,loading:r,error:a,refetch:l}=Se.useGetServerSettings({notifyOnNetworkStatusChange:!0}),[m]=Se.useUpdateServerSettings(),{data:c}=Se.useGetBackupRestoreStatus(pe!=null?pe:"",{skip:!pe,pollInterval:1e3}),[d,g]=v.useState(null),[u,h]=v.useState(!1),[p,f]=v.useState([]),[,k]=v.useState(0),M=(()=>{if(!(c!=null&&c.restoreStatus))return 0;const b=100*(c.restoreStatus.mangaProgress/c.restoreStatus.totalManga);return Number.isNaN(b)?0:b})(),D=(b,R)=>{m({variables:{input:{settings:{[b]:R}}}})};v.useEffect(()=>{if(!(c!=null&&c.restoreStatus))return;const b=c.restoreStatus.state===Je.Success,R=c.restoreStatus.state===Je.Failure;(b||R)&&(b&&Ce(e("settings.backup.action.restore.label.success"),"success"),R&&Ce(e("settings.backup.action.restore.error.label.failure"),"error"),pe=void 0,k(Date.now()))},[(B=c==null?void 0:c.restoreStatus)==null?void 0:B.state]);const V=()=>{g(null);const b=document.getElementById("backup-file");b&&(b.value="")},P=async b=>{try{const{data:{validateBackup:R}}=await Se.validateBackupFile(b,{fetchPolicy:"network-only"}).response;return R.missingSources.length?(f([...R.missingSources]),h(!0),!1):!0}catch(R){Ce(e("settings.backup.action.validate.error.label.failure"),"error"),V()}return!1},A=async b=>{var R;try{Ce(e("settings.backup.action.restore.label.in_progress"),"info"),pe=(R=(await Se.restoreBackupFile(b).response).data)==null?void 0:R.restoreBackup.id,k(Date.now())}catch(U){Ce(e("settings.backup.action.restore.error.label.failure"),"error")}finally{V()}},I=async b=>{if(b.name.toLowerCase().endsWith("json")){Ce(e("settings.backup.action.restore.error.label.legacy_backup_unsupported"),"error");return}if(!b.name.toLowerCase().match(/proto\.gz$|tachibk$/g)){Ce(e("global.error.label.invalid_file_type"),"error");return}g(b),await P(b)&&await A(b)},w=async b=>{b.preventDefault();const R=await Ze(b);I(R[0])},T=b=>{b.preventDefault()},F=()=>{h(!1),V()};if(v.useEffect(()=>{document.addEventListener("drop",w),document.addEventListener("dragover",T);const b=async U=>{const ee=await Ze(U);I(ee[0])},R=document.getElementById("backup-file");return R==null||R.addEventListener("change",b),()=>{document.removeEventListener("drop",w),document.removeEventListener("dragover",T),R==null||R.removeEventListener("change",b)}},[]),r)return i.jsx(At,{});if(a)return i.jsx(Et,{message:e("global.error.label.failed_to_load_data"),messageExtra:a.message,retry:()=>l().catch($t())});const N=_o(s.settings);return i.jsxs(i.Fragment,{children:[i.jsxs(Ae,{sx:{padding:0},children:[i.jsx(He,{component:"a",href:Se.getExportBackupUrl(),download:!0,children:i.jsx(Ue,{primary:e("settings.backup.action.create.label.title"),secondary:e("settings.backup.action.create.label.description")})}),i.jsxs(He,{onClick:()=>{var b;return(b=document.getElementById("backup-file"))==null?void 0:b.click()},disabled:!!pe,children:[i.jsx(Ue,{primary:e("settings.backup.action.restore.label.title"),secondary:e("settings.backup.action.restore.label.description")}),pe?i.jsx(Ht,{children:i.jsx(qt,{progress:M})}):null]}),i.jsxs(Ae,{subheader:i.jsx(Ut,{component:"div",id:"backup-settings",children:"Automated backup"}),children:[i.jsx(Gt,{settingName:e("settings.backup.automated.location.label.title"),dialogDescription:e("settings.backup.automated.location.label.description"),value:N.backupPath,handleChange:b=>D("backupPath",b)}),i.jsx(Bo,{settingName:e("settings.backup.automated.label.time"),value:N.backupTime,defaultValue:"00:00",handleChange:b=>D("backupTime",b)}),i.jsx(et,{settingTitle:e("settings.backup.automated.label.interval"),settingValue:e("global.date.value.label.day",{days:N.backupInterval,count:N.backupInterval}),value:N.backupInterval,defaultValue:1,minValue:1,maxValue:31,stepSize:1,valueUnit:e("global.date.label.day"),showSlider:!0,handleUpdate:b=>D("backupInterval",b)}),i.jsx(et,{settingTitle:e("settings.backup.automated.cleanup.label.title"),settingValue:Ao(N.backupTTL),value:N.backupTTL,defaultValue:14,minValue:0,maxValue:1e3,stepSize:1,valueUnit:e("global.date.label.day"),showSlider:!0,handleUpdate:b=>D("backupTTL",b)})]})]}),i.jsx("input",{type:"file",id:"backup-file",style:{display:"none"}}),i.jsxs(mt,{open:u,children:[i.jsx(ft,{children:e("settings.backup.action.validate.dialog.title")}),i.jsx(pt,{dividers:!0,children:i.jsx(Ae,{sx:{listStyleType:"initial",listStylePosition:"inside"},subheader:e("settings.backup.action.validate.dialog.content.label.missing_sources"),children:p.map(({id:b,name:R})=>i.jsx(zt,{sx:{display:"list-item"},children:"".concat(R," (").concat(b,")")},b))})}),i.jsxs(bt,{children:[i.jsx(xe,{onClick:F,children:e("global.button.cancel")}),i.jsx(xe,{onClick:F,component:Wt,to:"/extensions",autoFocus:!!p.length,variant:p.length?"contained":"text",children:e("extension.action.label.install")}),i.jsx(xe,{onClick:()=>{F(),A(d)},autoFocus:!p.length,variant:p.length?"text":"contained",children:e("global.button.restore")})]})]})]})}export{ea as Backup};
