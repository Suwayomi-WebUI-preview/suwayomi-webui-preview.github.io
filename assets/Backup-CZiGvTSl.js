import{f as C,aY as Z,j as l,a2 as E,T as pt,aZ as re,e as Ce,a_ as bt,I as ft,a$ as gt,ay as ht,b0 as Ae,b1 as o,aw as Et,u as kt,aQ as We,aA as qe,b2 as Le,ao as Ct,aK as Tt,aJ as vt,aM as xt,N as $t,c as Me,b3 as et,o as he,l as Ht,E as Ut,m as Oe,n as zt,w as Be,az as Wt,aV as qt,aL as tt,d as st,L as ot,A as nt,a9 as at}from"./index-DU51TenU.js";import{f as rt}from"./file-selector-CMpzCb7s.js";import{P as Gt}from"./Progress-COEBmUWR.js";import{T as Kt}from"./TextSetting-CLXkVrbN.js";import{N as it}from"./NumberSetting-CqDEqpp7.js";import{c as Ue,u as Yt,s as Qt,a as Jt,b as ye,d as Xt,_ as ne,P as Zt,e as wt,f as v,g as es,h as ts,i as de,j as me,k as ie,l as ss,m as os,n as ve,o as Se,p as Ge,q as Ie,r as Te,t as ns,v as as,S as rs,w as is,x as Ke,y as ls,z as Ye,A as Qe,B as Je,C as cs,D as Ee,E as yt,F as St,G as $e,M as us,H as He,I as ds,J as Mt,K as ms,L as Pt,N as Dt,O as ps,Q as Vt,R as bs,T as fs,U as gs,V as hs}from"./useMobilePicker-C-kmpNcM.js";import{T as ks}from"./TextField-DeB6wrZP.js";import"./PasswordTextField-De1BWcU1.js";import"./InputAdornment-CFW10Y78.js";import"./Info-yh-TQoaT.js";import"./Chip-BejE5hGD.js";const Xe=({adapter:e,value:t,props:r})=>{if(t===null)return null;const{minTime:s,maxTime:i,minutesStep:n,shouldDisableTime:c,disableIgnoringDatePartForTimeValidation:p=!1,disablePast:u,disableFuture:m,timezone:h}=r,d=e.utils.date(void 0,h),g=Ue(p,e.utils);switch(!0){case!e.utils.isValid(t):return"invalidDate";case!!(s&&g(s,t)):return"minTime";case!!(i&&g(t,i)):return"maxTime";case!!(m&&e.utils.isAfter(t,d)):return"disableFuture";case!!(u&&e.utils.isBefore(t,d)):return"disablePast";case!!(c&&c(t,"hours")):return"shouldDisableTime-hours";case!!(c&&c(t,"minutes")):return"shouldDisableTime-minutes";case!!(c&&c(t,"seconds")):return"shouldDisableTime-seconds";case!!(n&&e.utils.getMinutes(t)%n!==0):return"minutesStep";default:return null}},Cs=e=>{const t=Yt(e),{forwardedProps:r,internalProps:s}=Qt(t,"time");return Jt({forwardedProps:r,internalProps:s,valueManager:ye,fieldValueManager:Xt,validator:Xe,valueType:"time"})},Ts=["slots","slotProps","InputProps","inputProps"],It=C.forwardRef(function(t,r){var T;const s=Z({props:t,name:"MuiTimeField"}),{slots:i,slotProps:n,InputProps:c,inputProps:p}=s,u=ne(s,Ts),m=s,h=(T=i==null?void 0:i.textField)!=null?T:t.enableAccessibleFieldDOMStructure?Zt:ks,d=wt({elementType:h,externalSlotProps:n==null?void 0:n.textField,externalForwardedProps:u,ownerState:m,additionalProps:{ref:r}});d.inputProps=v({},p,d.inputProps),d.InputProps=v({},c,d.InputProps);const g=Cs(d),a=es(g),f=ts(v({},a,{slots:i,slotProps:n}));return l.jsx(h,v({},f))});function vs(e){return me("MuiPickersToolbarText",e)}const lt=de("MuiPickersToolbarText",["root","selected"]),xs=["className","selected","value"],ws=e=>{const{classes:t,selected:r}=e;return ie({root:["root",r&&"selected"]},vs,t)},ys=E(pt,{name:"MuiPickersToolbarText",slot:"Root",overridesResolver:(e,t)=>[t.root,{["&.".concat(lt.selected)]:t.selected}]})(({theme:e})=>({transition:e.transitions.create("color"),color:(e.vars||e).palette.text.secondary,["&.".concat(lt.selected)]:{color:(e.vars||e).palette.text.primary}})),jt=C.forwardRef(function(t,r){const s=Z({props:t,name:"MuiPickersToolbarText"}),{className:i,value:n}=s,c=ne(s,xs),p=ws(s);return l.jsx(ys,v({ref:r,className:re(i,p.root),component:"span"},c,{children:n}))}),Ss=["align","className","selected","typographyClassName","value","variant","width"],Ms=e=>{const{classes:t}=e;return ie({root:["root"]},ss,t)},Ps=E(Ce,{name:"MuiPickersToolbarButton",slot:"Root",overridesResolver:(e,t)=>t.root})({padding:0,minWidth:16,textTransform:"none"}),je=C.forwardRef(function(t,r){const s=Z({props:t,name:"MuiPickersToolbarButton"}),{align:i,className:n,selected:c,typographyClassName:p,value:u,variant:m,width:h}=s,d=ne(s,Ss),g=Ms(s);return l.jsx(Ps,v({variant:"text",ref:r,className:re(n,g.root)},h?{sx:{width:h}}:{},d,{children:l.jsx(jt,{align:i,className:p,variant:m,value:u,selected:c})}))});function Ds(e){return me("MuiTimePickerToolbar",e)}const Ne=de("MuiTimePickerToolbar",["root","separator","hourMinuteLabel","hourMinuteLabelLandscape","hourMinuteLabelReverse","ampmSelection","ampmLandscape","ampmLabel"]),Vs=["ampm","ampmInClock","value","isLandscape","onChange","view","onViewChange","views","disabled","readOnly","className"],Is=e=>{const{isLandscape:t,classes:r,isRtl:s}=e;return ie({root:["root"],separator:["separator"],hourMinuteLabel:["hourMinuteLabel",t&&"hourMinuteLabelLandscape",s&&"hourMinuteLabelReverse"],ampmSelection:["ampmSelection",t&&"ampmLandscape"],ampmLabel:["ampmLabel"]},Ds,r)},js=E(os,{name:"MuiTimePickerToolbar",slot:"Root",overridesResolver:(e,t)=>t.root})({}),Ns=E(jt,{name:"MuiTimePickerToolbar",slot:"Separator",overridesResolver:(e,t)=>t.separator})({outline:0,margin:"0 4px 0 2px",cursor:"default"}),Rs=E("div",{name:"MuiTimePickerToolbar",slot:"HourMinuteLabel",overridesResolver:(e,t)=>[{["&.".concat(Ne.hourMinuteLabelLandscape)]:t.hourMinuteLabelLandscape,["&.".concat(Ne.hourMinuteLabelReverse)]:t.hourMinuteLabelReverse},t.hourMinuteLabel]})({display:"flex",justifyContent:"flex-end",alignItems:"flex-end",variants:[{props:{isRtl:!0},style:{flexDirection:"row-reverse"}},{props:{isLandscape:!0},style:{marginTop:"auto"}}]}),Fs=E("div",{name:"MuiTimePickerToolbar",slot:"AmPmSelection",overridesResolver:(e,t)=>[{[".".concat(Ne.ampmLabel)]:t.ampmLabel},{["&.".concat(Ne.ampmLandscape)]:t.ampmLandscape},t.ampmSelection]})({display:"flex",flexDirection:"column",marginRight:"auto",marginLeft:12,["& .".concat(Ne.ampmLabel)]:{fontSize:17},variants:[{props:{isLandscape:!0},style:{margin:"4px 0 auto",flexDirection:"row",justifyContent:"space-around",flexBasis:"100%"}}]});function Ls(e){const t=Z({props:e,name:"MuiTimePickerToolbar"}),{ampm:r,ampmInClock:s,value:i,isLandscape:n,onChange:c,view:p,onViewChange:u,views:m,disabled:h,readOnly:d,className:g}=t,a=ne(t,Vs),f=ve(),T=Se(),L=bt(),R=!!(r&&!s&&m.includes("hours")),{meridiemMode:D,handleMeridiemChange:M}=Ge(i,r,c),O=F=>r?f.format(F,"hours12h"):f.format(F,"hours24h"),P=v({},t,{isRtl:L}),w=Is(P),k=l.jsx(Ns,{tabIndex:-1,value:":",variant:"h3",selected:!1,className:w.separator});return l.jsxs(js,v({landscapeDirection:"row",toolbarTitle:T.timePickerToolbarTitle,isLandscape:n,ownerState:P,className:re(w.root,g)},a,{children:[l.jsxs(Rs,{className:w.hourMinuteLabel,ownerState:P,children:[Ie(m,"hours")&&l.jsx(je,{tabIndex:-1,variant:"h3",onClick:()=>u("hours"),selected:p==="hours",value:i?O(i):"--"}),Ie(m,["hours","minutes"])&&k,Ie(m,"minutes")&&l.jsx(je,{tabIndex:-1,variant:"h3",onClick:()=>u("minutes"),selected:p==="minutes",value:i?f.format(i,"minutes"):"--"}),Ie(m,["minutes","seconds"])&&k,Ie(m,"seconds")&&l.jsx(je,{variant:"h3",onClick:()=>u("seconds"),selected:p==="seconds",value:i?f.format(i,"seconds"):"--"})]}),R&&l.jsxs(Fs,{className:w.ampmSelection,ownerState:P,children:[l.jsx(je,{disableRipple:!0,variant:"subtitle2",selected:D==="am",typographyClassName:w.ampmLabel,value:Te(f,"am"),onClick:d?void 0:()=>M("am"),disabled:h}),l.jsx(je,{disableRipple:!0,variant:"subtitle2",selected:D==="pm",typographyClassName:w.ampmLabel,value:Te(f,"pm"),onClick:d?void 0:()=>M("pm"),disabled:h})]})]}))}function Nt(e,t){var c,p,u,m;const r=ve(),s=Z({props:e,name:t}),i=(c=s.ampm)!=null?c:r.is12HourCycleInCurrentLocale(),n=C.useMemo(()=>{var h;return((h=s.localeText)==null?void 0:h.toolbarTitle)==null?s.localeText:v({},s.localeText,{timePickerToolbarTitle:s.localeText.toolbarTitle})},[s.localeText]);return v({},s,{ampm:i,localeText:n},ns({views:s.views,openTo:s.openTo,defaultViews:["hours","minutes"],defaultOpenTo:"hours"}),{disableFuture:(p=s.disableFuture)!=null?p:!1,disablePast:(u=s.disablePast)!=null?u:!1,slots:v({toolbar:Ls},s.slots),slotProps:v({},s.slotProps,{toolbar:v({ampm:i,ampmInClock:s.ampmInClock},(m=s.slotProps)==null?void 0:m.toolbar)})})}function Os(e){return me("MuiTimeClock",e)}de("MuiTimeClock",["root","arrowSwitcher"]);const Pe=220,ue=36,Re={x:Pe/2,y:Pe/2},Rt={x:Re.x,y:0},Bs=Rt.x-Re.x,_s=Rt.y-Re.y,As=e=>e*(180/Math.PI),Ft=(e,t,r)=>{const s=t-Re.x,i=r-Re.y,n=Math.atan2(Bs,_s)-Math.atan2(s,i);let c=As(n);c=Math.round(c/e)*e,c%=360;const p=Math.floor(c/e)||0,u=s**2+i**2,m=Math.sqrt(u);return{value:p,distance:m}},Es=(e,t,r=1)=>{const s=r*6;let{value:i}=Ft(s,e,t);return i=i*r%60,i},$s=(e,t,r)=>{const{value:s,distance:i}=Ft(30,e,t);let n=s||12;return r?n%=12:i<Pe/2-ue&&(n+=12,n%=24),n};function Hs(e){return me("MuiClockPointer",e)}de("MuiClockPointer",["root","thumb"]);const Us=["className","hasSelected","isInner","type","viewValue"],zs=e=>{const{classes:t}=e;return ie({root:["root"],thumb:["thumb"]},Hs,t)},Ws=E("div",{name:"MuiClockPointer",slot:"Root",overridesResolver:(e,t)=>t.root})(({theme:e})=>({width:2,backgroundColor:(e.vars||e).palette.primary.main,position:"absolute",left:"calc(50% - 1px)",bottom:"50%",transformOrigin:"center bottom 0px",variants:[{props:{shouldAnimate:!0},style:{transition:e.transitions.create(["transform","height"])}}]})),qs=E("div",{name:"MuiClockPointer",slot:"Thumb",overridesResolver:(e,t)=>t.thumb})(({theme:e})=>({width:4,height:4,backgroundColor:(e.vars||e).palette.primary.contrastText,borderRadius:"50%",position:"absolute",top:-21,left:"calc(50% - ".concat(ue/2,"px)"),border:"".concat((ue-4)/2,"px solid ").concat((e.vars||e).palette.primary.main),boxSizing:"content-box",variants:[{props:{hasSelected:!0},style:{backgroundColor:(e.vars||e).palette.primary.main}}]}));function Gs(e){const t=Z({props:e,name:"MuiClockPointer"}),{className:r,isInner:s,type:i,viewValue:n}=t,c=ne(t,Us),p=C.useRef(i);C.useEffect(()=>{p.current=i},[i]);const u=v({},t,{shouldAnimate:p.current!==i}),m=zs(u),h=()=>{let g=360/(i==="hours"?12:60)*n;return i==="hours"&&n>12&&(g-=360),{height:Math.round((s?.26:.4)*Pe),transform:"rotateZ(".concat(g,"deg)")}};return l.jsx(Ws,v({style:h(),className:re(r,m.root),ownerState:u},c,{children:l.jsx(qs,{ownerState:u,className:m.thumb})}))}function Ks(e){return me("MuiClock",e)}de("MuiClock",["root","clock","wrapper","squareMask","pin","amButton","pmButton","meridiemText","selected"]);const Ys=e=>{const{classes:t,meridiemMode:r}=e;return ie({root:["root"],clock:["clock"],wrapper:["wrapper"],squareMask:["squareMask"],pin:["pin"],amButton:["amButton",r==="am"&&"selected"],pmButton:["pmButton",r==="pm"&&"selected"],meridiemText:["meridiemText"]},Ks,t)},Qs=E("div",{name:"MuiClock",slot:"Root",overridesResolver:(e,t)=>t.root})(({theme:e})=>({display:"flex",justifyContent:"center",alignItems:"center",margin:e.spacing(2)})),Js=E("div",{name:"MuiClock",slot:"Clock",overridesResolver:(e,t)=>t.clock})({backgroundColor:"rgba(0,0,0,.07)",borderRadius:"50%",height:220,width:220,flexShrink:0,position:"relative",pointerEvents:"none"}),Xs=E("div",{name:"MuiClock",slot:"Wrapper",overridesResolver:(e,t)=>t.wrapper})({"&:focus":{outline:"none"}}),Zs=E("div",{name:"MuiClock",slot:"SquareMask",overridesResolver:(e,t)=>t.squareMask})({width:"100%",height:"100%",position:"absolute",pointerEvents:"auto",outline:0,touchAction:"none",userSelect:"none",variants:[{props:{disabled:!1},style:{"@media (pointer: fine)":{cursor:"pointer",borderRadius:"50%"},"&:active":{cursor:"move"}}}]}),eo=E("div",{name:"MuiClock",slot:"Pin",overridesResolver:(e,t)=>t.pin})(({theme:e})=>({width:6,height:6,borderRadius:"50%",backgroundColor:(e.vars||e).palette.primary.main,position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)"})),Lt=(e,t)=>({zIndex:1,bottom:8,paddingLeft:4,paddingRight:4,width:ue,variants:[{props:{meridiemMode:t},style:{backgroundColor:(e.vars||e).palette.primary.main,color:(e.vars||e).palette.primary.contrastText,"&:hover":{backgroundColor:(e.vars||e).palette.primary.light}}}]}),to=E(ft,{name:"MuiClock",slot:"AmButton",overridesResolver:(e,t)=>t.amButton})(({theme:e})=>v({},Lt(e,"am"),{position:"absolute",left:8})),so=E(ft,{name:"MuiClock",slot:"PmButton",overridesResolver:(e,t)=>t.pmButton})(({theme:e})=>v({},Lt(e,"pm"),{position:"absolute",right:8})),ct=E(pt,{name:"MuiClock",slot:"meridiemText",overridesResolver:(e,t)=>t.meridiemText})({overflow:"hidden",whiteSpace:"nowrap",textOverflow:"ellipsis"});function oo(e){const t=Z({props:e,name:"MuiClock"}),{ampm:r,ampmInClock:s,autoFocus:i,children:n,value:c,handleMeridiemChange:p,isTimeDisabled:u,meridiemMode:m,minutesStep:h=1,onChange:d,selectedId:g,type:a,viewValue:f,disabled:T=!1,readOnly:L,className:R}=t,D=t,M=ve(),O=Se(),P=C.useRef(!1),w=Ys(D),k=u(f,a),F=!r&&a==="hours"&&(f<1||f>12),V=(I,$)=>{T||L||u(I,a)||d(I,$)},A=(I,$)=>{let{offsetX:H,offsetY:W}=I;if(H===void 0){const _=I.target.getBoundingClientRect();H=I.changedTouches[0].clientX-_.left,W=I.changedTouches[0].clientY-_.top}const G=a==="seconds"||a==="minutes"?Es(H,W,h):$s(H,W,!!r);V(G,$)},b=I=>{P.current=!0,A(I,"shallow")},S=I=>{P.current&&(A(I,"finish"),P.current=!1)},U=I=>{I.buttons>0&&A(I.nativeEvent,"shallow")},te=I=>{P.current&&(P.current=!1),A(I.nativeEvent,"finish")},xe=C.useMemo(()=>a==="hours"?!0:f%5===0,[a,f]),pe=a==="minutes"?h:1,se=C.useRef(null);as(()=>{i&&se.current.focus()},[i]);const X=I=>{if(!P.current)switch(I.key){case"Home":V(0,"partial"),I.preventDefault();break;case"End":V(a==="minutes"?59:23,"partial"),I.preventDefault();break;case"ArrowUp":V(f+pe,"partial"),I.preventDefault();break;case"ArrowDown":V(f-pe,"partial"),I.preventDefault();break;case"Enter":case" ":V(f,"finish"),I.preventDefault();break}};return l.jsxs(Qs,{className:re(R,w.root),children:[l.jsxs(Js,{className:w.clock,children:[l.jsx(Zs,{onTouchMove:b,onTouchStart:b,onTouchEnd:S,onMouseUp:te,onMouseMove:U,ownerState:{disabled:T},className:w.squareMask}),!k&&l.jsxs(C.Fragment,{children:[l.jsx(eo,{className:w.pin}),c!=null&&l.jsx(Gs,{type:a,viewValue:f,isInner:F,hasSelected:xe})]}),l.jsx(Xs,{"aria-activedescendant":g,"aria-label":O.clockLabelText(a,c,M),ref:se,role:"listbox",onKeyDown:X,tabIndex:0,className:w.wrapper,children:n})]}),r&&s&&l.jsxs(C.Fragment,{children:[l.jsx(to,{onClick:L?void 0:()=>p("am"),disabled:T||m===null,ownerState:D,className:w.amButton,title:Te(M,"am"),children:l.jsx(ct,{variant:"caption",className:w.meridiemText,children:Te(M,"am")})}),l.jsx(so,{disabled:T||m===null,onClick:L?void 0:()=>p("pm"),ownerState:D,className:w.pmButton,title:Te(M,"pm"),children:l.jsx(ct,{variant:"caption",className:w.meridiemText,children:Te(M,"pm")})})]})]})}function no(e){return me("MuiClockNumber",e)}const _e=de("MuiClockNumber",["root","selected","disabled"]),ao=["className","disabled","index","inner","label","selected"],ro=e=>{const{classes:t,selected:r,disabled:s}=e;return ie({root:["root",r&&"selected",s&&"disabled"]},no,t)},io=E("span",{name:"MuiClockNumber",slot:"Root",overridesResolver:(e,t)=>[t.root,{["&.".concat(_e.disabled)]:t.disabled},{["&.".concat(_e.selected)]:t.selected}]})(({theme:e})=>({height:ue,width:ue,position:"absolute",left:"calc((100% - ".concat(ue,"px) / 2)"),display:"inline-flex",justifyContent:"center",alignItems:"center",borderRadius:"50%",color:(e.vars||e).palette.text.primary,fontFamily:e.typography.fontFamily,"&:focused":{backgroundColor:(e.vars||e).palette.background.paper},["&.".concat(_e.selected)]:{color:(e.vars||e).palette.primary.contrastText},["&.".concat(_e.disabled)]:{pointerEvents:"none",color:(e.vars||e).palette.text.disabled},variants:[{props:{inner:!0},style:v({},e.typography.body2,{color:(e.vars||e).palette.text.secondary})}]}));function Ot(e){const t=Z({props:e,name:"MuiClockNumber"}),{className:r,disabled:s,index:i,inner:n,label:c,selected:p}=t,u=ne(t,ao),m=t,h=ro(m),d=i%12/12*Math.PI*2-Math.PI/2,g=(Pe-ue-2)/2*(n?.65:1),a=Math.round(Math.cos(d)*g),f=Math.round(Math.sin(d)*g);return l.jsx(io,v({className:re(r,h.root),"aria-disabled":s?!0:void 0,"aria-selected":p?!0:void 0,role:"option",style:{transform:"translate(".concat(a,"px, ").concat(f+(Pe-ue)/2,"px")},ownerState:m},u,{children:c}))}const lo=({ampm:e,value:t,getClockNumberText:r,isDisabled:s,selectedId:i,utils:n})=>{const c=t?n.getHours(t):null,p=[],u=e?1:0,m=e?12:23,h=d=>c===null?!1:e?d===12?c===12||c===0:c===d||c-12===d:c===d;for(let d=u;d<=m;d+=1){let g=d.toString();d===0&&(g="00");const a=!e&&(d===0||d>12);g=n.formatNumber(g);const f=h(d);p.push(l.jsx(Ot,{id:f?i:void 0,index:d,inner:a,selected:f,disabled:s(d),label:g,"aria-label":r(g)},d))}return p},ut=({utils:e,value:t,isDisabled:r,getClockNumberText:s,selectedId:i})=>{const n=e.formatNumber;return[[5,n("05")],[10,n("10")],[15,n("15")],[20,n("20")],[25,n("25")],[30,n("30")],[35,n("35")],[40,n("40")],[45,n("45")],[50,n("50")],[55,n("55")],[0,n("00")]].map(([c,p],u)=>{const m=c===t;return l.jsx(Ot,{label:p,id:m?i:void 0,index:u+1,inner:!1,disabled:r(c),selected:m,"aria-label":s(p)},c)})},Ze=({value:e,referenceDate:t,utils:r,props:s,timezone:i})=>{const n=C.useMemo(()=>ye.getInitialReferenceValue({value:e,utils:r,props:s,referenceDate:t,granularity:rs.day,timezone:i,getTodayDate:()=>is(r,i,"date")}),[]);return e!=null?e:n},co=["ampm","ampmInClock","autoFocus","slots","slotProps","value","defaultValue","referenceDate","disableIgnoringDatePartForTimeValidation","maxTime","minTime","disableFuture","disablePast","minutesStep","shouldDisableTime","showViewSwitcher","onChange","view","views","openTo","onViewChange","focusedView","onFocusedViewChange","className","disabled","readOnly","timezone"],uo=e=>{const{classes:t}=e;return ie({root:["root"],arrowSwitcher:["arrowSwitcher"]},Os,t)},mo=E(Ke,{name:"MuiTimeClock",slot:"Root",overridesResolver:(e,t)=>t.root})({display:"flex",flexDirection:"column",position:"relative"}),po=E(ls,{name:"MuiTimeClock",slot:"ArrowSwitcher",overridesResolver:(e,t)=>t.arrowSwitcher})({position:"absolute",right:12,top:15}),bo=["hours","minutes"],fo=C.forwardRef(function(t,r){const s=ve(),i=Z({props:t,name:"MuiTimeClock"}),{ampm:n=s.is12HourCycleInCurrentLocale(),ampmInClock:c=!1,autoFocus:p,slots:u,slotProps:m,value:h,defaultValue:d,referenceDate:g,disableIgnoringDatePartForTimeValidation:a=!1,maxTime:f,minTime:T,disableFuture:L,disablePast:R,minutesStep:D=1,shouldDisableTime:M,showViewSwitcher:O,onChange:P,view:w,views:k=bo,openTo:F,onViewChange:V,focusedView:A,onFocusedViewChange:b,className:S,disabled:U,readOnly:te,timezone:xe}=i,pe=ne(i,co),{value:se,handleValueChange:X,timezone:I}=Ye({name:"TimeClock",timezone:xe,value:h,defaultValue:d,onChange:P,valueManager:ye}),$=Ze({value:se,referenceDate:g,utils:s,props:i,timezone:I}),H=Se(),W=Qe(I),{view:G,setView:_,previousView:be,nextView:Q,setValueAndGoToNextView:le}=Je({view:w,views:k,openTo:F,onViewChange:V,onChange:X,focusedView:A,onFocusedViewChange:b}),{meridiemMode:J,handleMeridiemChange:De}=Ge($,n,le),ce=C.useCallback((z,x)=>{const B=Ue(a,s),Y=x==="hours"||x==="minutes"&&k.includes("seconds"),j=({start:N,end:ee})=>!(T&&B(T,ee)||f&&B(N,f)||L&&B(N,W)||R&&B(W,Y?ee:N)),y=(N,ee=1)=>{if(N%ee!==0)return!1;if(M)switch(x){case"hours":return!M(s.setHours($,N),"hours");case"minutes":return!M(s.setMinutes($,N),"minutes");case"seconds":return!M(s.setSeconds($,N),"seconds");default:return!1}return!0};switch(x){case"hours":{const N=Ee(z,J,n),ee=s.setHours($,N),ge=s.setSeconds(s.setMinutes(ee,0),0),Ve=s.setSeconds(s.setMinutes(ee,59),59);return!j({start:ge,end:Ve})||!y(N)}case"minutes":{const N=s.setMinutes($,z),ee=s.setSeconds(N,0),ge=s.setSeconds(N,59);return!j({start:ee,end:ge})||!y(z,D)}case"seconds":{const N=s.setSeconds($,z);return!j({start:N,end:N})||!y(z)}default:throw new Error("not supported")}},[n,$,a,f,J,T,D,M,s,L,R,W,k]),K=cs(),we=C.useMemo(()=>{switch(G){case"hours":{const z=(x,B)=>{const Y=Ee(x,J,n);le(s.setHours($,Y),B,"hours")};return{onChange:z,viewValue:s.getHours($),children:lo({value:se,utils:s,ampm:n,onChange:z,getClockNumberText:H.hoursClockNumberText,isDisabled:x=>U||ce(x,"hours"),selectedId:K})}}case"minutes":{const z=s.getMinutes($),x=(B,Y)=>{le(s.setMinutes($,B),Y,"minutes")};return{viewValue:z,onChange:x,children:ut({utils:s,value:z,onChange:x,getClockNumberText:H.minutesClockNumberText,isDisabled:B=>U||ce(B,"minutes"),selectedId:K})}}case"seconds":{const z=s.getSeconds($),x=(B,Y)=>{le(s.setSeconds($,B),Y,"seconds")};return{viewValue:z,onChange:x,children:ut({utils:s,value:z,onChange:x,getClockNumberText:H.secondsClockNumberText,isDisabled:B=>U||ce(B,"seconds"),selectedId:K})}}default:throw new Error("You must provide the type for ClockView")}},[G,s,se,n,H.hoursClockNumberText,H.minutesClockNumberText,H.secondsClockNumberText,J,le,$,ce,K,U]),oe=i,fe=uo(oe);return l.jsxs(mo,v({ref:r,className:re(fe.root,S),ownerState:oe},pe,{children:[l.jsx(oo,v({autoFocus:p!=null?p:!!A,ampmInClock:c&&k.includes("hours"),value:se,type:G,ampm:n,minutesStep:D,isTimeDisabled:ce,meridiemMode:J,handleMeridiemChange:De,selectedId:K,disabled:U,readOnly:te},we)),O&&l.jsx(po,{className:fe.arrowSwitcher,slots:u,slotProps:m,onGoToPrevious:()=>_(be),isPreviousDisabled:!be,previousLabel:H.openPreviousView,onGoToNext:()=>_(Q),isNextDisabled:!Q,nextLabel:H.openNextView,ownerState:oe})]}))});function go(e){return me("MuiDigitalClock",e)}de("MuiDigitalClock",["root","list","item"]);const ho=["ampm","timeStep","autoFocus","slots","slotProps","value","defaultValue","referenceDate","disableIgnoringDatePartForTimeValidation","maxTime","minTime","disableFuture","disablePast","minutesStep","shouldDisableTime","onChange","view","openTo","onViewChange","focusedView","onFocusedViewChange","className","disabled","readOnly","views","skipDisabled","timezone"],ko=e=>{const{classes:t}=e;return ie({root:["root"],list:["list"],item:["item"]},go,t)},Co=E(Ke,{name:"MuiDigitalClock",slot:"Root",overridesResolver:(e,t)=>t.root})({overflowY:"auto",width:"100%","@media (prefers-reduced-motion: no-preference)":{scrollBehavior:"auto"},maxHeight:yt,variants:[{props:{alreadyRendered:!0},style:{"@media (prefers-reduced-motion: no-preference)":{scrollBehavior:"smooth"}}}]}),To=E(gt,{name:"MuiDigitalClock",slot:"List",overridesResolver:(e,t)=>t.list})({padding:0}),vo=E(ht,{name:"MuiDigitalClock",slot:"Item",overridesResolver:(e,t)=>t.item})(({theme:e})=>({padding:"8px 16px",margin:"2px 4px","&:first-of-type":{marginTop:4},"&:hover":{backgroundColor:e.vars?"rgba(".concat(e.vars.palette.primary.mainChannel," / ").concat(e.vars.palette.action.hoverOpacity,")"):Ae(e.palette.primary.main,e.palette.action.hoverOpacity)},"&.Mui-selected":{backgroundColor:(e.vars||e).palette.primary.main,color:(e.vars||e).palette.primary.contrastText,"&:focus-visible, &:hover":{backgroundColor:(e.vars||e).palette.primary.dark}},"&.Mui-focusVisible":{backgroundColor:e.vars?"rgba(".concat(e.vars.palette.primary.mainChannel," / ").concat(e.vars.palette.action.focusOpacity,")"):Ae(e.palette.primary.main,e.palette.action.focusOpacity)}})),xo=C.forwardRef(function(t,r){var z;const s=ve(),i=C.useRef(null),n=St(r,i),c=Z({props:t,name:"MuiDigitalClock"}),{ampm:p=s.is12HourCycleInCurrentLocale(),timeStep:u=30,autoFocus:m,slots:h,slotProps:d,value:g,defaultValue:a,referenceDate:f,disableIgnoringDatePartForTimeValidation:T=!1,maxTime:L,minTime:R,disableFuture:D,disablePast:M,minutesStep:O=1,shouldDisableTime:P,onChange:w,view:k,openTo:F,onViewChange:V,focusedView:A,onFocusedViewChange:b,className:S,disabled:U,readOnly:te,views:xe=["hours"],skipDisabled:pe=!1,timezone:se}=c,X=ne(c,ho),{value:I,handleValueChange:$,timezone:H}=Ye({name:"DigitalClock",timezone:se,value:g,defaultValue:a,onChange:w,valueManager:ye}),W=Se(),G=Qe(H),_=C.useMemo(()=>v({},c,{alreadyRendered:!!i.current}),[c]),be=ko(_),Q=(z=h==null?void 0:h.digitalClockItem)!=null?z:vo,le=wt({elementType:Q,externalSlotProps:d==null?void 0:d.digitalClockItem,ownerState:{},className:be.item}),J=Ze({value:I,referenceDate:f,utils:s,props:c,timezone:H}),De=$e(x=>$(x,"finish","hours")),{setValueAndGoToNextView:ce}=Je({view:k,views:xe,openTo:F,onViewChange:V,onChange:De,focusedView:A,onFocusedViewChange:b}),K=$e(x=>{ce(x,"finish")});C.useEffect(()=>{if(i.current===null)return;const x=i.current.querySelector('[role="listbox"] [role="option"][tabindex="0"], [role="listbox"] [role="option"][aria-selected="true"]');if(!x)return;const B=x.offsetTop;(m||A)&&x.focus(),i.current.scrollTop=B-4});const we=C.useCallback(x=>{const B=Ue(T,s),Y=()=>!(R&&B(R,x)||L&&B(x,L)||D&&B(x,G)||M&&B(G,x)),j=()=>s.getMinutes(x)%O!==0?!1:P?!P(x,"hours"):!0;return!Y()||!j()},[T,s,R,L,D,G,M,O,P]),oe=C.useMemo(()=>{const x=s.startOfDay(J);return[x,...Array.from({length:Math.ceil(24*60/u)-1},(B,Y)=>s.addMinutes(x,u*(Y+1)))]},[J,u,s]),fe=oe.findIndex(x=>s.isEqual(x,J));return l.jsx(Co,v({ref:n,className:re(be.root,S),ownerState:_},X,{children:l.jsx(To,{role:"listbox","aria-label":W.timePickerToolbarTitle,className:be.list,children:oe.map((x,B)=>{if(pe&&we(x))return null;const Y=s.isEqual(x,I),j=s.format(x,p?"fullTime12h":"fullTime24h"),y=fe===B||fe===-1&&B===0?0:-1;return l.jsx(Q,v({onClick:()=>!te&&K(x),selected:Y,disabled:U||we(x),disableRipple:te,role:"option","aria-disabled":te,"aria-selected":Y,tabIndex:y},le,{children:j}),j)})})}))});function wo(e){return me("MuiMultiSectionDigitalClock",e)}de("MuiMultiSectionDigitalClock",["root"]);function yo(e){return me("MuiMultiSectionDigitalClockSection",e)}de("MuiMultiSectionDigitalClockSection",["root","item"]);const So=["autoFocus","onChange","className","disabled","readOnly","items","active","slots","slotProps","skipDisabled"],Mo=e=>{const{classes:t}=e;return ie({root:["root"],item:["item"]},yo,t)},Po=E(gt,{name:"MuiMultiSectionDigitalClockSection",slot:"Root",overridesResolver:(e,t)=>t.root})(({theme:e})=>({maxHeight:yt,width:56,padding:0,overflow:"hidden","@media (prefers-reduced-motion: no-preference)":{scrollBehavior:"auto"},"@media (pointer: fine)":{"&:hover":{overflowY:"auto"}},"@media (pointer: none), (pointer: coarse)":{overflowY:"auto"},"&:not(:first-of-type)":{borderLeft:"1px solid ".concat((e.vars||e).palette.divider)},"&::after":{display:"block",content:'""',height:"calc(100% - 40px - 6px)"},variants:[{props:{alreadyRendered:!0},style:{"@media (prefers-reduced-motion: no-preference)":{scrollBehavior:"smooth"}}}]})),Do=E(ht,{name:"MuiMultiSectionDigitalClockSection",slot:"Item",overridesResolver:(e,t)=>t.item})(({theme:e})=>({padding:8,margin:"2px 4px",width:us,justifyContent:"center","&:first-of-type":{marginTop:4},"&:hover":{backgroundColor:e.vars?"rgba(".concat(e.vars.palette.primary.mainChannel," / ").concat(e.vars.palette.action.hoverOpacity,")"):Ae(e.palette.primary.main,e.palette.action.hoverOpacity)},"&.Mui-selected":{backgroundColor:(e.vars||e).palette.primary.main,color:(e.vars||e).palette.primary.contrastText,"&:focus-visible, &:hover":{backgroundColor:(e.vars||e).palette.primary.dark}},"&.Mui-focusVisible":{backgroundColor:e.vars?"rgba(".concat(e.vars.palette.primary.mainChannel," / ").concat(e.vars.palette.action.focusOpacity,")"):Ae(e.palette.primary.main,e.palette.action.focusOpacity)}})),Vo=C.forwardRef(function(t,r){var w;const s=C.useRef(null),i=St(r,s),n=C.useRef(null),c=Z({props:t,name:"MuiMultiSectionDigitalClockSection"}),{autoFocus:p,onChange:u,className:m,disabled:h,readOnly:d,items:g,active:a,slots:f,slotProps:T,skipDisabled:L}=c,R=ne(c,So),D=C.useMemo(()=>v({},c,{alreadyRendered:!!s.current}),[c]),M=Mo(D),O=(w=f==null?void 0:f.digitalClockSectionItem)!=null?w:Do;C.useEffect(()=>{if(s.current===null)return;const k=s.current.querySelector('[role="option"][tabindex="0"], [role="option"][aria-selected="true"]');if(a&&p&&k&&k.focus(),!k||n.current===k)return;n.current=k;const F=k.offsetTop;s.current.scrollTop=F-4});const P=g.findIndex(k=>k.isFocused(k.value));return l.jsx(Po,v({ref:i,className:re(M.root,m),ownerState:D,autoFocusItem:p&&a,role:"listbox"},R,{children:g.map((k,F)=>{var U;const V=(U=k.isDisabled)==null?void 0:U.call(k,k.value),A=h||V;if(L&&A)return null;const b=k.isSelected(k.value),S=P===F||P===-1&&F===0?0:-1;return l.jsx(O,v({onClick:()=>!d&&u(k.value),selected:b,disabled:A,disableRipple:d,role:"option","aria-disabled":d||A||void 0,"aria-label":k.ariaLabel,"aria-selected":b,tabIndex:S,className:M.item},T==null?void 0:T.digitalClockSectionItem,{children:k.label}),k.label)})}))}),Io=({now:e,value:t,utils:r,ampm:s,isDisabled:i,resolveAriaLabel:n,timeStep:c,valueOrReferenceDate:p})=>{const u=t?r.getHours(t):null,m=[],h=(a,f)=>{const T=f!=null?f:u;return T===null?!1:s?a===12?T===12||T===0:T===a||T-12===a:T===a},d=a=>h(a,r.getHours(p)),g=s?11:23;for(let a=0;a<=g;a+=c){let f=r.format(r.setHours(e,a),s?"hours12h":"hours24h");const T=n(parseInt(f,10).toString());f=r.formatNumber(f),m.push({value:a,label:f,isSelected:h,isDisabled:i,isFocused:d,ariaLabel:T})}return m},dt=({value:e,utils:t,isDisabled:r,timeStep:s,resolveLabel:i,resolveAriaLabel:n,hasValue:c=!0})=>{const p=m=>e===null?!1:c&&e===m,u=m=>e===m;return[...Array.from({length:Math.ceil(60/s)},(m,h)=>{const d=s*h;return{value:d,label:t.formatNumber(i(d)),isDisabled:r,isSelected:p,isFocused:u,ariaLabel:n(d.toString())}})]},jo=["ampm","timeSteps","autoFocus","slots","slotProps","value","defaultValue","referenceDate","disableIgnoringDatePartForTimeValidation","maxTime","minTime","disableFuture","disablePast","minutesStep","shouldDisableTime","onChange","view","views","openTo","onViewChange","focusedView","onFocusedViewChange","className","disabled","readOnly","skipDisabled","timezone"],No=e=>{const{classes:t}=e;return ie({root:["root"]},wo,t)},Ro=E(Ke,{name:"MuiMultiSectionDigitalClock",slot:"Root",overridesResolver:(e,t)=>t.root})(({theme:e})=>({display:"flex",flexDirection:"row",width:"100%",borderBottom:"1px solid ".concat((e.vars||e).palette.divider)})),Fo=C.forwardRef(function(t,r){const s=ve(),i=bt(),n=Z({props:t,name:"MuiMultiSectionDigitalClock"}),{ampm:c=s.is12HourCycleInCurrentLocale(),timeSteps:p,autoFocus:u,slots:m,slotProps:h,value:d,defaultValue:g,referenceDate:a,disableIgnoringDatePartForTimeValidation:f=!1,maxTime:T,minTime:L,disableFuture:R,disablePast:D,minutesStep:M=1,shouldDisableTime:O,onChange:P,view:w,views:k=["hours","minutes"],openTo:F,onViewChange:V,focusedView:A,onFocusedViewChange:b,className:S,disabled:U,readOnly:te,skipDisabled:xe=!1,timezone:pe}=n,se=ne(n,jo),{value:X,handleValueChange:I,timezone:$}=Ye({name:"MultiSectionDigitalClock",timezone:pe,value:d,defaultValue:g,onChange:P,valueManager:ye}),H=Se(),W=Qe($),G=C.useMemo(()=>v({hours:1,minutes:5,seconds:5},p),[p]),_=Ze({value:X,referenceDate:a,utils:s,props:n,timezone:$}),be=$e((j,y,N)=>I(j,y,N)),Q=C.useMemo(()=>!c||!k.includes("hours")||k.includes("meridiem")?k:[...k,"meridiem"],[c,k]),{view:le,setValueAndGoToNextView:J,focusedView:De}=Je({view:w,views:Q,openTo:F,onViewChange:V,onChange:be,focusedView:A,onFocusedViewChange:b}),ce=$e(j=>{J(j,"finish","meridiem")}),{meridiemMode:K,handleMeridiemChange:we}=Ge(_,c,ce,"finish"),oe=C.useCallback((j,y)=>{const N=Ue(f,s),ee=y==="hours"||y==="minutes"&&Q.includes("seconds"),ge=({start:q,end:ae})=>!(L&&N(L,ae)||T&&N(q,T)||R&&N(q,W)||D&&N(W,ee?ae:q)),Ve=(q,ae=1)=>{if(q%ae!==0)return!1;if(O)switch(y){case"hours":return!O(s.setHours(_,q),"hours");case"minutes":return!O(s.setMinutes(_,q),"minutes");case"seconds":return!O(s.setSeconds(_,q),"seconds");default:return!1}return!0};switch(y){case"hours":{const q=Ee(j,K,c),ae=s.setHours(_,q),Fe=s.setSeconds(s.setMinutes(ae,0),0),At=s.setSeconds(s.setMinutes(ae,59),59);return!ge({start:Fe,end:At})||!Ve(q)}case"minutes":{const q=s.setMinutes(_,j),ae=s.setSeconds(q,0),Fe=s.setSeconds(q,59);return!ge({start:ae,end:Fe})||!Ve(j,M)}case"seconds":{const q=s.setSeconds(_,j);return!ge({start:q,end:q})||!Ve(j)}default:throw new Error("not supported")}},[c,_,f,T,K,L,M,O,s,R,D,W,Q]),fe=C.useCallback(j=>{switch(j){case"hours":return{onChange:y=>{const N=Ee(y,K,c);J(s.setHours(_,N),"finish","hours")},items:Io({now:W,value:X,ampm:c,utils:s,isDisabled:y=>oe(y,"hours"),timeStep:G.hours,resolveAriaLabel:H.hoursClockNumberText,valueOrReferenceDate:_})};case"minutes":return{onChange:y=>{J(s.setMinutes(_,y),"finish","minutes")},items:dt({value:s.getMinutes(_),utils:s,isDisabled:y=>oe(y,"minutes"),resolveLabel:y=>s.format(s.setMinutes(W,y),"minutes"),timeStep:G.minutes,hasValue:!!X,resolveAriaLabel:H.minutesClockNumberText})};case"seconds":return{onChange:y=>{J(s.setSeconds(_,y),"finish","seconds")},items:dt({value:s.getSeconds(_),utils:s,isDisabled:y=>oe(y,"seconds"),resolveLabel:y=>s.format(s.setSeconds(W,y),"seconds"),timeStep:G.seconds,hasValue:!!X,resolveAriaLabel:H.secondsClockNumberText})};case"meridiem":{const y=Te(s,"am"),N=Te(s,"pm");return{onChange:we,items:[{value:"am",label:y,isSelected:()=>!!X&&K==="am",isFocused:()=>!!_&&K==="am",ariaLabel:y},{value:"pm",label:N,isSelected:()=>!!X&&K==="pm",isFocused:()=>!!_&&K==="pm",ariaLabel:N}]}}default:throw new Error("Unknown view: ".concat(j," found."))}},[W,X,c,s,G.hours,G.minutes,G.seconds,H.hoursClockNumberText,H.minutesClockNumberText,H.secondsClockNumberText,K,J,_,oe,we]),z=C.useMemo(()=>{if(!i)return Q;const y=Q.filter(N=>N!=="meridiem").toReversed();return Q.includes("meridiem")&&y.push("meridiem"),y},[i,Q]),x=C.useMemo(()=>Q.reduce((j,y)=>v({},j,{[y]:fe(y)}),{}),[Q,fe]),B=n,Y=No(B);return l.jsx(Ro,v({ref:r,className:re(Y.root,S),ownerState:B,role:"group"},se,{children:z.map(j=>l.jsx(Vo,{items:x[j].items,onChange:x[j].onChange,active:le===j,autoFocus:u!=null?u:De===j,disabled:U,readOnly:te,slots:m,slotProps:h,skipDisabled:xe,"aria-label":H.selectViewText(j)},j))}))}),ze=({view:e,onViewChange:t,focusedView:r,onFocusedViewChange:s,views:i,value:n,defaultValue:c,referenceDate:p,onChange:u,className:m,classes:h,disableFuture:d,disablePast:g,minTime:a,maxTime:f,shouldDisableTime:T,minutesStep:L,ampm:R,ampmInClock:D,slots:M,slotProps:O,readOnly:P,disabled:w,sx:k,autoFocus:F,showViewSwitcher:V,disableIgnoringDatePartForTimeValidation:A,timezone:b})=>l.jsx(fo,{view:e,onViewChange:t,focusedView:r&&He(r)?r:null,onFocusedViewChange:s,views:i.filter(He),value:n,defaultValue:c,referenceDate:p,onChange:u,className:m,classes:h,disableFuture:d,disablePast:g,minTime:a,maxTime:f,shouldDisableTime:T,minutesStep:L,ampm:R,ampmInClock:D,slots:M,slotProps:O,readOnly:P,disabled:w,sx:k,autoFocus:F,showViewSwitcher:V,disableIgnoringDatePartForTimeValidation:A,timezone:b}),Lo=({view:e,onViewChange:t,focusedView:r,onFocusedViewChange:s,views:i,value:n,defaultValue:c,referenceDate:p,onChange:u,className:m,classes:h,disableFuture:d,disablePast:g,minTime:a,maxTime:f,shouldDisableTime:T,minutesStep:L,ampm:R,slots:D,slotProps:M,readOnly:O,disabled:P,sx:w,autoFocus:k,disableIgnoringDatePartForTimeValidation:F,timeSteps:V,skipDisabled:A,timezone:b})=>l.jsx(xo,{view:e,onViewChange:t,focusedView:r,onFocusedViewChange:s,views:i.filter(He),value:n,defaultValue:c,referenceDate:p,onChange:u,className:m,classes:h,disableFuture:d,disablePast:g,minTime:a,maxTime:f,shouldDisableTime:T,minutesStep:L,ampm:R,slots:D,slotProps:M,readOnly:O,disabled:P,sx:w,autoFocus:k,disableIgnoringDatePartForTimeValidation:F,timeStep:V==null?void 0:V.minutes,skipDisabled:A,timezone:b}),mt=({view:e,onViewChange:t,focusedView:r,onFocusedViewChange:s,views:i,value:n,defaultValue:c,referenceDate:p,onChange:u,className:m,classes:h,disableFuture:d,disablePast:g,minTime:a,maxTime:f,shouldDisableTime:T,minutesStep:L,ampm:R,slots:D,slotProps:M,readOnly:O,disabled:P,sx:w,autoFocus:k,disableIgnoringDatePartForTimeValidation:F,timeSteps:V,skipDisabled:A,timezone:b})=>l.jsx(Fo,{view:e,onViewChange:t,focusedView:r,onFocusedViewChange:s,views:i.filter(He),value:n,defaultValue:c,referenceDate:p,onChange:u,className:m,classes:h,disableFuture:d,disablePast:g,minTime:a,maxTime:f,shouldDisableTime:T,minutesStep:L,ampm:R,slots:D,slotProps:M,readOnly:O,disabled:P,sx:w,autoFocus:k,disableIgnoringDatePartForTimeValidation:F,timeSteps:V,skipDisabled:A,timezone:b}),Oo=(e,t,r)=>r?t.filter(s=>!ds(s)||s==="hours"):e?[...t,"meridiem"]:t,Bo=(e,t)=>{var r,s;return 24*60/(((r=e.hours)!=null?r:1)*((s=e.minutes)!=null?s:5))<=t};function _o({thresholdToRenderTimeInASingleColumn:e,ampm:t,timeSteps:r,views:s}){const i=e!=null?e:24,n=v({hours:1,minutes:5,seconds:5},r),c=Bo(n,i);return{thresholdToRenderTimeInASingleColumn:i,timeSteps:n,shouldRenderTimeInASingleColumn:c,views:Oo(t,s,c)}}const Bt=C.forwardRef(function(t,r){var R,D,M,O,P,w;const s=Se(),i=ve(),n=Nt(t,"MuiDesktopTimePicker"),{shouldRenderTimeInASingleColumn:c,views:p,timeSteps:u}=_o(n),m=c?Lo:mt,h=v({hours:m,minutes:m,seconds:m,meridiem:m},n.viewRenderers),d=(R=n.ampmInClock)!=null?R:!0,g=c?[]:["accept"],f=((D=h.hours)==null?void 0:D.name)===mt.name?p:p.filter(k=>k!=="meridiem"),T=v({},n,{ampmInClock:d,timeSteps:u,viewRenderers:h,format:Mt(i,n),views:c?["hours"]:f,slots:v({field:It,openPickerIcon:ms},n.slots),slotProps:v({},n.slotProps,{field:k=>{var F;return v({},Pt((F=n.slotProps)==null?void 0:F.field,k),Dt(n),{ref:r})},toolbar:v({hidden:!0,ampmInClock:d},(M=n.slotProps)==null?void 0:M.toolbar),actionBar:v({actions:g},(O=n.slotProps)==null?void 0:O.actionBar)})}),{renderPicker:L}=ps({props:T,valueManager:ye,valueType:"time",getOpenDialogAriaText:(w=(P=T.localeText)==null?void 0:P.openTimePickerDialogue)!=null?w:s.openTimePickerDialogue,validator:Xe});return L()});Bt.propTypes={ampm:o.bool,ampmInClock:o.bool,autoFocus:o.bool,className:o.string,closeOnSelect:o.bool,defaultValue:o.object,disabled:o.bool,disableFuture:o.bool,disableIgnoringDatePartForTimeValidation:o.bool,disableOpenPicker:o.bool,disablePast:o.bool,enableAccessibleFieldDOMStructure:o.any,format:o.string,formatDensity:o.oneOf(["dense","spacious"]),inputRef:Vt,label:o.node,localeText:o.object,maxTime:o.object,minTime:o.object,minutesStep:o.number,name:o.string,onAccept:o.func,onChange:o.func,onClose:o.func,onError:o.func,onOpen:o.func,onSelectedSectionsChange:o.func,onViewChange:o.func,open:o.bool,openTo:o.oneOf(["hours","meridiem","minutes","seconds"]),orientation:o.oneOf(["landscape","portrait"]),readOnly:o.bool,reduceAnimations:o.bool,referenceDate:o.object,selectedSections:o.oneOfType([o.oneOf(["all","day","empty","hours","meridiem","minutes","month","seconds","weekDay","year"]),o.number]),shouldDisableTime:o.func,skipDisabled:o.bool,slotProps:o.object,slots:o.object,sx:o.oneOfType([o.arrayOf(o.oneOfType([o.func,o.object,o.bool])),o.func,o.object]),thresholdToRenderTimeInASingleColumn:o.number,timeSteps:o.shape({hours:o.number,minutes:o.number,seconds:o.number}),timezone:o.string,value:o.object,view:o.oneOf(["hours","meridiem","minutes","seconds"]),viewRenderers:o.shape({hours:o.func,meridiem:o.func,minutes:o.func,seconds:o.func}),views:o.arrayOf(o.oneOf(["hours","minutes","seconds"]).isRequired)};const _t=C.forwardRef(function(t,r){var h,d,g,a;const s=Se(),i=ve(),n=Nt(t,"MuiMobileTimePicker"),c=v({hours:ze,minutes:ze,seconds:ze},n.viewRenderers),p=(h=n.ampmInClock)!=null?h:!1,u=v({},n,{ampmInClock:p,viewRenderers:c,format:Mt(i,n),slots:v({field:It},n.slots),slotProps:v({},n.slotProps,{field:f=>{var T;return v({},Pt((T=n.slotProps)==null?void 0:T.field,f),Dt(n),{ref:r})},toolbar:v({hidden:!1,ampmInClock:p},(d=n.slotProps)==null?void 0:d.toolbar)})}),{renderPicker:m}=bs({props:u,valueManager:ye,valueType:"time",getOpenDialogAriaText:(a=(g=u.localeText)==null?void 0:g.openTimePickerDialogue)!=null?a:s.openTimePickerDialogue,validator:Xe});return m()});_t.propTypes={ampm:o.bool,ampmInClock:o.bool,autoFocus:o.bool,className:o.string,closeOnSelect:o.bool,defaultValue:o.object,disabled:o.bool,disableFuture:o.bool,disableIgnoringDatePartForTimeValidation:o.bool,disableOpenPicker:o.bool,disablePast:o.bool,enableAccessibleFieldDOMStructure:o.any,format:o.string,formatDensity:o.oneOf(["dense","spacious"]),inputRef:Vt,label:o.node,localeText:o.object,maxTime:o.object,minTime:o.object,minutesStep:o.number,name:o.string,onAccept:o.func,onChange:o.func,onClose:o.func,onError:o.func,onOpen:o.func,onSelectedSectionsChange:o.func,onViewChange:o.func,open:o.bool,openTo:o.oneOf(["hours","minutes","seconds"]),orientation:o.oneOf(["landscape","portrait"]),readOnly:o.bool,reduceAnimations:o.bool,referenceDate:o.object,selectedSections:o.oneOfType([o.oneOf(["all","day","empty","hours","meridiem","minutes","month","seconds","weekDay","year"]),o.number]),shouldDisableTime:o.func,slotProps:o.object,slots:o.object,sx:o.oneOfType([o.arrayOf(o.oneOfType([o.func,o.object,o.bool])),o.func,o.object]),timezone:o.string,value:o.object,view:o.oneOf(["hours","minutes","seconds"]),viewRenderers:o.shape({hours:o.func,minutes:o.func,seconds:o.func}),views:o.arrayOf(o.oneOf(["hours","minutes","seconds"]).isRequired)};const Ao=["desktopModeMediaQuery"],Eo=C.forwardRef(function(t,r){const s=Z({props:t,name:"MuiTimePicker"}),{desktopModeMediaQuery:i=fs}=s,n=ne(s,Ao);return Et(i,{defaultMatches:!0})?l.jsx(Bt,v({ref:r},n)):l.jsx(_t,v({ref:r},n))}),$o=({settingName:e,value:t,defaultValue:r,handleChange:s})=>{const{t:i}=kt(),[n,c]=C.useState(!1),[p,u]=C.useState(t);C.useEffect(()=>{t&&u(t)},[t]);const m=C.useCallback(g=>{c(!1),g&&u(t)},[t]),h=C.useCallback(()=>m(!0),[m]),d=C.useCallback((g,a=!0)=>{a&&m(!1),t!==g&&s(g)},[t,s,m]);return l.jsxs(l.Fragment,{children:[l.jsx(We,{onClick:()=>c(!0),children:l.jsx(qe,{primary:e,secondary:Le(t,"HH:mm").format("LT"),secondaryTypographyProps:{style:{display:"flex",flexDirection:"column"}}})}),l.jsxs(Ct,{open:n,onClose:m,children:[l.jsxs(Tt,{children:[l.jsx(vt,{sx:{paddingLeft:0},children:e}),l.jsx(gs,{dateAdapter:hs,adapterLocale:Le.locale(),children:l.jsx(Eo,{value:Le(p,"HH:mm"),defaultValue:Le(r,"HH:mm"),format:"LT",onChange:g=>{var a;return u((a=g==null?void 0:g.format("HH:mm"))!=null?a:"00:00")}})})]}),l.jsxs(xt,{children:[r!==void 0?l.jsx(Ce,{onClick:()=>{u(r),d(r,!1)},color:"primary",children:i("global.button.reset_to_default")}):null,l.jsx(Ce,{onClick:h,color:"primary",children:i("global.button.cancel")}),l.jsx(Ce,{onClick:()=>{d(p)},color:"primary",children:i("global.button.ok")})]})]})]})},Ho=e=>({backupPath:e.backupPath,backupTime:e.backupTime,backupInterval:e.backupInterval,backupTTL:e.backupTTL}),Uo=e=>e===0?at("global.label.never"):at("settings.backup.automated.cleanup.label.value",{days:e,count:e});let ke;function tn(){var A;const{t:e}=kt(),{setTitle:t,setAction:r}=C.useContext($t);C.useLayoutEffect(()=>(t(e("settings.backup.title")),r(null),()=>{t(""),r(null)}),[e]);const{data:s,loading:i,error:n,refetch:c}=Me.useGetServerSettings({notifyOnNetworkStatusChange:!0}),[p]=Me.useUpdateServerSettings(),{data:u}=Me.useGetBackupRestoreStatus(ke!=null?ke:"",{skip:!ke,pollInterval:1e3}),[m,h]=C.useState(null),[d,g]=C.useState(!1),[a,f]=C.useState(),[,T]=C.useState(0),L=(()=>{if(!(u!=null&&u.restoreStatus))return 0;const b=100*(u.restoreStatus.mangaProgress/u.restoreStatus.totalManga);return Number.isNaN(b)?0:b})(),R=(b,S)=>{p({variables:{input:{settings:{[b]:S}}}}).catch(U=>he(e("global.error.label.failed_to_save_changes"),"error",Oe(U)))};C.useEffect(()=>{if(!(u!=null&&u.restoreStatus))return;const b=u.restoreStatus.state===et.Success,S=u.restoreStatus.state===et.Failure;(b||S)&&(b&&he(e("settings.backup.action.restore.label.success"),"success"),S&&he(e("settings.backup.action.restore.error.label.failure"),"error"),ke=void 0,T(Date.now()))},[(A=u==null?void 0:u.restoreStatus)==null?void 0:A.state]);const D=()=>{h(null);const b=document.getElementById("backup-file");b&&(b.value="")},M=async b=>{try{const{data:{validateBackup:S}}=await Me.validateBackupFile(b,{fetchPolicy:"network-only"}).response;return S.missingSources.length||S.missingTrackers.length?(f(S),g(!0),!1):!0}catch(S){he(e("settings.backup.action.validate.error.label.failure"),"error",Oe(S)),D()}return!1},O=async b=>{var S;try{he(e("settings.backup.action.restore.label.in_progress"),"info"),ke=(S=(await Me.restoreBackupFile(b).response).data)==null?void 0:S.restoreBackup.id,T(Date.now())}catch(U){he(e("settings.backup.action.restore.error.label.failure"),"error",Oe(U))}finally{D()}},P=async b=>{if(b.name.toLowerCase().endsWith("json")){he(e("settings.backup.action.restore.error.label.legacy_backup_unsupported"),"error");return}if(!b.name.toLowerCase().match(/proto\.gz$|tachibk$/g)){he(e("global.error.label.invalid_file_type"),"error");return}h(b),await M(b)&&await O(b)},w=async b=>{b.preventDefault();const S=await rt(b);P(S[0])},k=b=>{b.preventDefault()},F=()=>{g(!1),D()};if(C.useEffect(()=>{document.addEventListener("drop",w),document.addEventListener("dragover",k);const b=async U=>{const te=await rt(U);P(te[0])},S=document.getElementById("backup-file");return S==null||S.addEventListener("change",b),()=>{document.removeEventListener("drop",w),document.removeEventListener("dragover",k),S==null||S.removeEventListener("change",b)}},[]),i)return l.jsx(Ht,{});if(n)return l.jsx(Ut,{message:e("global.error.label.failed_to_load_data"),messageExtra:Oe(n),retry:()=>c().catch(zt())});const V=Ho(s.settings);return l.jsxs(l.Fragment,{children:[l.jsxs(Be,{sx:{padding:0},children:[l.jsx(We,{component:"a",href:Me.getExportBackupUrl(),download:!0,children:l.jsx(qe,{primary:e("settings.backup.action.create.label.title"),secondary:e("settings.backup.action.create.label.description")})}),l.jsxs(We,{onClick:()=>{var b;return(b=document.getElementById("backup-file"))==null?void 0:b.click()},disabled:!!ke,children:[l.jsx(qe,{primary:e("settings.backup.action.restore.label.title"),secondary:e("settings.backup.action.restore.label.description")}),ke?l.jsx(Wt,{children:l.jsx(Gt,{progress:L})}):null]}),l.jsxs(Be,{subheader:l.jsx(qt,{component:"div",id:"backup-settings",children:"Automated backup"}),children:[l.jsx(Kt,{settingName:e("settings.backup.automated.location.label.title"),dialogDescription:e("settings.backup.automated.location.label.description"),value:V.backupPath,settingDescription:V.backupPath.length?V.backupPath:e("global.label.default"),handleChange:b=>R("backupPath",b)}),l.jsx($o,{settingName:e("settings.backup.automated.label.time"),value:V.backupTime,defaultValue:"00:00",handleChange:b=>R("backupTime",b)}),l.jsx(it,{settingTitle:e("settings.backup.automated.label.interval"),settingValue:e("global.date.value.label.day",{days:V.backupInterval,count:V.backupInterval}),value:V.backupInterval,defaultValue:1,minValue:1,maxValue:31,stepSize:1,valueUnit:e("global.date.label.day_one"),showSlider:!0,handleUpdate:b=>R("backupInterval",b)}),l.jsx(it,{settingTitle:e("settings.backup.automated.cleanup.label.title"),settingValue:Uo(V.backupTTL),value:V.backupTTL,defaultValue:14,minValue:0,maxValue:1e3,stepSize:1,valueUnit:e("global.date.label.day_one"),showSlider:!0,handleUpdate:b=>R("backupTTL",b)})]})]}),l.jsx("input",{type:"file",id:"backup-file",style:{display:"none"}}),l.jsxs(Ct,{open:d,children:[l.jsx(vt,{children:e("settings.backup.action.validate.dialog.title")}),l.jsxs(Tt,{dividers:!0,children:[!!(a!=null&&a.missingSources.length)&&l.jsx(Be,{sx:{listStyleType:"initial",listStylePosition:"inside"},subheader:e("settings.backup.action.validate.dialog.content.label.missing_sources"),children:a==null?void 0:a.missingSources.map(({id:b,name:S})=>l.jsx(tt,{sx:{display:"list-item"},children:"".concat(S," (").concat(b,")")},b))}),!!(a!=null&&a.missingTrackers.length)&&l.jsx(Be,{sx:{listStyleType:"initial",listStylePosition:"inside"},subheader:e("settings.backup.action.validate.dialog.content.label.missing_trackers"),children:a==null?void 0:a.missingTrackers.map(({name:b})=>l.jsx(tt,{sx:{display:"list-item"},children:"".concat(b)},b))})]}),l.jsx(xt,{children:l.jsxs(st,{direction:"row",sx:{justifyContent:"space-between",width:"100%"},children:[!!(a!=null&&a.missingSources.length)&&l.jsx(Ce,{onClick:F,component:ot,to:nt.browse.path,autoFocus:!!(a!=null&&a.missingSources.length),variant:a!=null&&a.missingSources.length?"contained":"text",children:e("extension.action.label.install")}),!!(a!=null&&a.missingTrackers.length)&&l.jsx(Ce,{onClick:F,component:ot,to:nt.tracker.path,autoFocus:!!(a!=null&&a.missingTrackers.length),variant:a!=null&&a.missingTrackers.length?"contained":"text",children:e("global.button.log_in")}),l.jsxs(st,{direction:"row",children:[l.jsx(Ce,{onClick:F,children:e("global.button.cancel")}),l.jsx(Ce,{onClick:()=>{F(),O(m)},autoFocus:!(a!=null&&a.missingSources.length)&&!(a!=null&&a.missingTrackers.length),variant:!(a!=null&&a.missingSources.length)&&!(a!=null&&a.missingTrackers.length)?"contained":"text",children:e("global.button.restore")})]})]})})]})]})}export{tn as Backup};
