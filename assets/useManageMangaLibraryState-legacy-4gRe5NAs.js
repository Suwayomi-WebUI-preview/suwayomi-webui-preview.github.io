!function(){var e,n=["title","Icon"],t=["children","onClose"];function r(e,n){return n||(n=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(n)}}))}function o(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */var e,n,t="function"==typeof Symbol?Symbol:{},r=t.iterator||"@@iterator",i=t.toStringTag||"@@toStringTag";function u(t,r,o,i){var u=r&&r.prototype instanceof l?r:l,s=Object.create(u.prototype);return a(s,"_invoke",function(t,r,o){var a,i,u,l=0,s=o||[],d=!1,f={p:0,n:0,v:e,a:v,f:v.bind(e,4),d:function(n,t){return a=n,i=0,u=e,f.n=t,c}};function v(t,r){for(i=t,u=r,n=0;!d&&l&&!o&&n<s.length;n++){var o,a=s[n],v=f.p,b=a[2];t>3?(o=b===r)&&(u=a[(i=a[4])?5:(i=3,3)],a[4]=a[5]=e):a[0]<=v&&((o=t<2&&v<a[1])?(i=0,f.v=r,f.n=a[1]):v<b&&(o=t<3||a[0]>r||r>b)&&(a[4]=t,a[5]=r,f.n=b,i=0))}if(o||t>1)return c;throw d=!0,r}return function(o,s,b){if(l>1)throw TypeError("Generator is already running");for(d&&1===s&&v(s,b),i=s,u=b;(n=i<2?e:u)||!d;){a||(i?i<3?(i>1&&(f.n=-1),v(i,u)):f.n=u:f.v=u);try{if(l=2,a){if(i||(o="next"),n=a[o]){if(!(n=n.call(a,u)))throw TypeError("iterator result is not an object");if(!n.done)return n;u=n.value,i<2&&(i=0)}else 1===i&&(n=a.return)&&n.call(a),i<2&&(u=TypeError("The iterator does not provide a '"+o+"' method"),i=1);a=e}else if((n=(d=f.n<0)?u:t.call(r,f))!==c)break}catch(n){a=e,i=1,u=n}finally{l=1}}return{value:n,done:d}}}(t,o,i),!0),s}var c={};function l(){}function s(){}function d(){}n=Object.getPrototypeOf;var f=[][r]?n(n([][r]())):(a(n={},r,function(){return this}),n),v=d.prototype=l.prototype=Object.create(f);function b(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,d):(e.__proto__=d,a(e,i,"GeneratorFunction")),e.prototype=Object.create(v),e}return s.prototype=d,a(v,"constructor",d),a(d,"constructor",s),s.displayName="GeneratorFunction",a(d,i,"GeneratorFunction"),a(v),a(v,i,"Generator"),a(v,r,function(){return this}),a(v,"toString",function(){return"[object Generator]"}),(o=function(){return{w:u,m:b}})()}function a(e,n,t,r){var o=Object.defineProperty;try{o({},"",{})}catch(e){o=0}a=function(e,n,t,r){if(n)o?o(e,n,{value:t,enumerable:!r,configurable:!r,writable:!r}):e[n]=t;else{function i(n,t){a(e,n,function(e){return this._invoke(n,t,e)})}i("next",0),i("throw",1),i("return",2)}},a(e,n,t,r)}function i(e,n,t,r,o,a,i){try{var u=e[a](i),c=u.value}catch(e){return void t(e)}u.done?n(c):Promise.resolve(c).then(r,o)}function u(e){return function(){var n=this,t=arguments;return new Promise(function(r,o){var a=e.apply(n,t);function u(e){i(a,r,o,u,c,"next",e)}function c(e){i(a,r,o,u,c,"throw",e)}u(void 0)})}}function c(e,n){for(var t=0;t<n.length;t++){var r=n[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,m(r.key),r)}}function l(e){return function(e){if(Array.isArray(e))return f(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||d(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function s(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){var t=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var r,o,a,i,u=[],c=!0,l=!1;try{if(a=(t=t.call(e)).next,0===n){if(Object(t)!==t)return;c=!1}else for(;!(c=(r=a.call(t)).done)&&(u.push(r.value),u.length!==n);c=!0);}catch(e){l=!0,o=e}finally{try{if(!c&&null!=t.return&&(i=t.return(),Object(i)!==i))return}finally{if(l)throw o}}return u}}(e,n)||d(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function d(e,n){if(e){if("string"==typeof e)return f(e,n);var t={}.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?f(e,n):void 0}}function f(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=Array(n);t<n;t++)r[t]=e[t];return r}function v(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),t.push.apply(t,r)}return t}function b(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?v(Object(t),!0).forEach(function(n){g(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):v(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}function g(e,n,t){return(n=m(n))in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function m(e){var n=function(e,n){if("object"!=p(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,n||"default");if("object"!=p(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===n?String:Number)(e)}(e,"string");return"symbol"==p(n)?n:n+""}function y(e,n){if(null==e)return{};var t,r,o=function(e,n){if(null==e)return{};var t={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==n.indexOf(r))continue;t[r]=e[r]}return t}(e,n);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)t=a[r],-1===n.indexOf(t)&&{}.propertyIsEnumerable.call(e,t)&&(o[t]=e[t])}return o}function p(e){return p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},p(e)}System.register(["./index-legacy-7oZR41XK.js","./ThreeStateCheckboxInput-legacy-CKbLMmeO.js","./CheckboxInput-legacy-BJpn_Wrp.js","./FormGroup-legacy-Bky7Y7HI.js"],function(a,i){"use strict";var d,f,v,m,h,w,C,j,S,x,k,O,T,M,I,E,L,_,P,A,R,F,D,N,z,B,G,K,U,V,q,H,X,Y,J,W;return{setters:[function(e){d=e.b,f=e.c,v=e.j,m=e.ar,h=e.as,w=e.p,C=e.al,j=e.a6,S=e.u,x=e.r,k=e.e6,O=e.i,T=e.k,M=e.n,I=e.q,E=e.S,L=e.B,_=e.A,P=e.L,A=e.e7,R=e.V,F=e.m,D=e.g,N=e._,z=e.f,B=e.e8,G=e.N,K=e.e9,U=e.O,V=e.d,q=e.b3,H=e.c8,X=e.ea},function(e){Y=e.T},function(e){J=e.C},function(e){W=e.F}],execute:function(){a({V:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},t=n.threshold,r=void 0===t?400:t,o=n.captureEvent,a=void 0!==o&&o,u=n.detect,c=void 0===u?i.Pointer:u,l=n.cancelOnMovement,s=void 0!==l&&l,f=n.cancelOutsideElement,v=void 0===f||f,b=n.filterEvents,g=n.onStart,m=n.onMove,y=n.onFinish,p=n.onCancel,h=d.useRef(!1),w=d.useRef(!1),C=d.useRef(),j=d.useRef(),S=d.useRef(e),x=d.useRef(null),k=d.useCallback(function(e){return function(n){w.current||te(n)&&(void 0!==b&&!b(n)||(a&&n.persist(),null==g||g(n,{context:e}),x.current=re(n),w.current=!0,C.current=n.currentTarget,j.current=setTimeout(function(){S.current&&(S.current(n,{context:e}),h.current=!0)},r)))}},[a,b,g,r]),O=d.useCallback(function(e){return function(n,t){te(n)&&w.current&&(x.current=null,a&&n.persist(),h.current?null==y||y(n,{context:e}):w.current&&(null==p||p(n,{context:e,reason:null!=t?t:$.CancelledByRelease})),h.current=!1,w.current=!1,void 0!==j.current&&clearTimeout(j.current))}},[a,y,p]),T=d.useCallback(function(e){return function(n){if(te(n)&&(null==m||m(n,{context:e}),!1!==s&&x.current)){var t=re(n);if(t){var r=!0===s?25:s,o={x:Math.abs(t.x-x.current.x),y:Math.abs(t.y-x.current.y)};(o.x>r||o.y>r)&&O(e)(n,$.CancelledByMovement)}}}},[O,s,m]),M=d.useCallback(function(n){if(null===e)return{};switch(c){case i.Mouse:var t={onMouseDown:k(n),onMouseMove:T(n),onMouseUp:O(n)};return v&&(t.onMouseLeave=function(e){O(n)(e,$.CancelledOutsideElement)}),t;case i.Touch:return{onTouchStart:k(n),onTouchMove:T(n),onTouchEnd:O(n)};case i.Pointer:var r={onPointerDown:k(n),onPointerMove:T(n),onPointerUp:O(n)};return v&&(r.onPointerLeave=function(e){return O(n)(e,$.CancelledOutsideElement)}),r}},[e,O,v,c,T,k]);return d.useEffect(function(){function e(e){var n=function(e){return{target:e.target,currentTarget:e.currentTarget,nativeEvent:e,persist:function(){}}}(e);O()(n)}return window.addEventListener("mouseup",e),window.addEventListener("touchend",e),window.addEventListener("pointerup",e),function(){window.removeEventListener("mouseup",e),window.removeEventListener("touchend",e),window.removeEventListener("pointerup",e)}},[O]),d.useEffect(function(){return function(){void 0!==j.current&&clearTimeout(j.current)}},[]),d.useEffect(function(){S.current=e},[e]),M},f:function(e,n){var t=be(e,n);return ve(t,n)},m:be});var i=function(e){return e.Mouse="mouse",e.Touch="touch",e.Pointer="pointer",e}(i||{}),$=function(e){return e.CancelledByMovement="cancelled-by-movement",e.CancelledByRelease="cancelled-by-release",e.CancelledOutsideElement="cancelled-outside-element",e}($||{}),Q=["mousedown","mousemove","mouseup","mouseleave","mouseout"],Z=["touchstart","touchmove","touchend","touchcancel"],ee=["pointerdown","pointermove","pointerup","pointerleave","pointerout"];function ne(e){var n;return Z.includes(null==(n=null==e?void 0:e.nativeEvent)?void 0:n.type)||"touches"in e}function te(e){return function(e){var n;return Q.includes(null==(n=null==e?void 0:e.nativeEvent)?void 0:n.type)}(e)||ne(e)||function(e){var n=e.nativeEvent;return!!n&&(ee.includes(null==n?void 0:n.type)||"pointerId"in n)}(e)}function re(e){var n,t=ne(e)?null==(n=null==e?void 0:e.touches)?void 0:n[0]:e;return function(e){return"object"==p(e)&&null!==e&&"pageX"in e&&"number"==typeof e.pageX&&"pageY"in e&&"number"==typeof e.pageY}(t)?{x:t.pageX,y:t.pageY}:null}a("C",f(v.jsx("path",{d:"M19 5v14H5V5zm0-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2"}))),a("R",f(v.jsx("path",{d:"m1.79 12 5.58 5.59L5.96 19 .37 13.41zm.45-7.78L12.9 14.89l-1.28 1.28L7.44 12l-1.41 1.41L11.62 19l2.69-2.69 4.89 4.89 1.41-1.41L3.65 2.81zm14.9 9.27L23.62 7 22.2 5.59l-6.48 6.48zM17.96 7l-1.41-1.41-3.65 3.66 1.41 1.41z"}))),a("D",f(v.jsx("path",{d:"M9 16.2 4.8 12l-1.4 1.4L9 19 21 7l-1.4-1.4z"}))),a("F",f(v.jsx("path",{d:"M16.5 3c-1.74 0-3.41.81-4.5 2.09C10.91 3.81 9.24 3 7.5 3 4.42 3 2 5.42 2 8.5c0 3.78 3.4 6.86 8.55 11.54L12 21.35l1.45-1.32C18.6 15.36 22 12.28 22 8.5 22 5.42 19.58 3 16.5 3m-4.4 15.55-.1.1-.1-.1C7.14 14.24 4 11.39 4 8.5 4 6.5 5.5 5 7.5 5c1.54 0 3.04.99 3.57 2.36h1.87C13.46 5.99 14.96 5 16.5 5c2 0 3.5 1.5 3.5 3.5 0 2.89-3.14 5.74-7.9 10.05"}))),a("g",function(e){var t=e.title,r=e.Icon,o=y(e,n);return v.jsxs(m,b(b({},o),{},{children:[v.jsx(h,{children:v.jsx(r,{fontSize:"small"})}),v.jsx(w,{children:t})]}))}),a("h",function(e,n){return function(t,r){var o=r>0?" (".concat(r,")"):"";return"".concat(C(n[t].action[e?"single":"selected"])).concat(o)}}),a("e",function(e){return function(){return!e||arguments.length>0&&void 0!==arguments[0]&&arguments[0]}}),a("j",function(e){return function(n){return!e&&n}}),a("k",f(v.jsx("path",{d:"M12 8c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2m0 2c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2m0 6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2"}))),a("M",function(e){var n=e.children,r=e.onClose,o=y(e,t),a=s(d.useState(!1),2),i=a[0],u=a[1];return v.jsx(j,b(b({},o),{},{open:o.open,onClose:r,sx:{visibility:!o.open||i?"hidden":"visible"},children:n(function(){r({},"backdropClick"),u(!1)},u)}))});var oe=a("u",function(e,n){var t,r=n.itemIds,o=void 0===r?[]:r,a=n.keyCount,i=void 0===a?e:a,u=n.currentKey,c=n.initialState,f=void 0===c?{}:c,v=s(d.useState(f),2),m=v[0],y=v[1],p=d.useRef(void 0),h=l(new Set(Object.values(m).flat())),w=h.length===e,C=!h.length,j=null!==(t=m[u])&&void 0!==t?t:[],S=j.length===i,x=0===j.length;x&&(p.current=void 0);var k=d.useCallback(function(e,n){var t,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=r.selectRange,i=void 0!==a&&a,c=r.key,s=void 0===c?u:c,d=!n,f=null!==(t=p.current)&&void 0!==t?t:{},v=f.id,m=f.key;p.current={id:e,key:s};var h=i&&s===m&&void 0!==v,w=h?o.indexOf(v):-1,C=h?o.indexOf(e):-1,j=h?o.slice(Math.min(w,C),Math.max(w,C)+1):[e];y(d?function(e){var n,t;return b(b({},e),{},g({},s,null!==(n=null===(t=e[s])||void 0===t?void 0:t.filter(function(e){return!j.includes(e)}))&&void 0!==n?n:[]))}:function(e){var n;return b(b({},e),{},g({},s,l(new Set([].concat(l(null!==(n=e[s])&&void 0!==n?n:[]),l(j))))))})},[u,o]),O=d.useCallback(function(e,n){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:u;switch(e){case!0:y(function(e){return b(b({},e),{},g({},t,l(n)))});break;case!1:y(function(e){return b(b({},e),{},g({},t,[]))})}},[u]),T=d.useCallback(function(e,n){y(function(t){return b(b({},t),{},g({},e,l(n)))})},[]),M=d.useCallback(function(e){return m[e]},[m]),I=d.useCallback(function(){y({})},[]),E=d.useCallback(function(){I(),y(f)},[I,f]);return{selectedItemIds:h,keySelectedItemIds:j,handleSelection:k,handleSelectAll:O,areAllItemsSelected:w,areNoItemsSelected:C,areAllItemsForKeySelected:S,areNoItemsForKeySelected:x,setSelectionForKey:T,getSelectionForKey:M,clearSelection:I,reset:E}}),ae=function(){return function(e,n,t){return n&&c(e.prototype,n),t&&c(e,t),Object.defineProperty(e,"prototype",{writable:!1}),e}(function e(){!function(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}(this,e)},null,[{key:"getIds",value:function(e){return e.map(function(e){return e.id})}},{key:"getUserCreated",value:function(e){return e.filter(function(e){return 0!==e.id})}},{key:"getDefaults",value:function(e){return e.filter(function(e){return e.default})}}])}(),ie=function(e,n,t,r){return!!n.includes(e)||(r||!t.includes(e))&&void 0};function ue(e){var n=S().t,t=e.open,r=e.onClose,o=e.mangaId,a=e.mangaIds,i=e.addToLibrary,u=void 0!==i&&i,c=void 0!==o,f=null!=a?a:[o],b=s(d.useState(!1),2),g=b[0],m=b[1],y=function(e){var n=x.useGetManga(A,null!=e?e:-1,{skip:void 0===e}).data;return d.useMemo(function(){return void 0!==e&&n?ae.getIds(n.manga.categories.nodes):[]},[null==n?void 0:n.manga.categories.nodes,e])}(o),p=x.useGetCategories(k).data,h=null==p?void 0:p.categories.nodes,w=d.useMemo(function(){return ae.getUserCreated(null!=h?h:[])},[h]),C=d.useMemo(function(){return u?ae.getIds(ae.getDefaults(w)):[]},[w]),j=oe(w.length,{currentKey:"categoriesToAdd",initialState:{categoriesToAdd:[].concat(l(y),l(C)),categoriesToRemove:[]}}),B=j.handleSelection,G=j.setSelectionForKey,K=j.getSelectionForKey;d.useEffect(function(){G("categoriesToAdd",[].concat(l(y),l(C))),G("categoriesToRemove",[])},[y]);var U=K("categoriesToAdd"),V=K("categoriesToRemove"),q=function(){G("categoriesToAdd",y),G("categoriesToRemove",[]),r(!1)};return v.jsxs(O,{sx:{".MuiDialog-paper":{maxHeight:435,width:"80%"}},maxWidth:"xs",open:t,onClose:q,children:[v.jsx(T,{children:n("category.title.set_categories")}),v.jsx(M,{dividers:!0,children:v.jsxs(W,{children:[0===w.length&&v.jsx("span",{children:n("category.error.no_categories_found.label.info")}),w.map(function(e){return v.jsx(Y,{checked:ie(e.id,U,V,c),onChange:function(n){B(e.id,!1,{key:"categoriesToAdd"}),B(e.id,!1,{key:"categoriesToRemove"}),n&&B(e.id,!0,{key:"categoriesToAdd"}),!1===n&&B(e.id,!0,{key:"categoriesToRemove"})},label:e.name},e.id)})]})}),v.jsx(I,{children:v.jsxs(E,{sx:{width:"100%"},children:[u&&v.jsx(J,{sx:{margin:0},size:"small",label:n("global.button.dont_show_dialog_again"),onChange:function(e){return m(e.target.checked)}}),v.jsxs(E,{direction:"row",sx:{justifyContent:"space-between",alignItems:"end",width:"100%"},children:[v.jsx(L,{component:P,to:_.settings.childRoutes.categories.path,children:n(w.length?"global.button.edit":"global.button.create")}),v.jsxs(E,{direction:"row",children:[v.jsx(L,{autoFocus:!0,onClick:q,color:"primary",children:n("global.button.cancel")}),!!w.length&&v.jsx(L,{onClick:function(){var e=c?U.filter(function(e){return!y.includes(e)}):U,t=c?y.filter(function(e){return!U.includes(e)}):V;r(!0,e,t),g&&R("showAddToLibraryCategorySelectDialog",!1).catch(function(e){return F(n("search.error.label.failed_to_save_settings"),"error",D(e))}),(!!e.length||!!t.length)&&(u||N.performAction("change_categories",f,{changeCategoriesPatch:{addToCategories:e,removeFromCategories:t}}).catch(z()))},color:"primary",children:n("global.button.ok")})]})]})]})})]})}var ce=a("d",function(e){var n=e.mangaId,t=e.mangaIds,r=e.onClose,o=e.addToLibrary,a=s(d.useState(!1),2),i=a[0],u=a[1],c=d.useMemo(function(){return i?v.jsx(ue,{open:i,onClose:function(){u(!1);for(var e=arguments.length,n=new Array(e),t=0;t<e;t++)n[t]=arguments[t];null==r||r.apply(void 0,n)},mangaId:n,mangaIds:t,addToLibrary:o}):null},[n,t,o,r,i]);return{openCategorySelect:u,CategorySelectComponent:c}}),le=b({},K),se=function(e){return b(b({},e),{},{excludedScanlators:JSON.stringify(e.excludedScanlators)})},de=function(e,n,t){return function(e){return G("manga",e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:le,void 0,arguments.length>2?arguments[2]:void 0)}(b(b({},e),{},{meta:U(e.meta)}),n,t)},fe=(a("l",function(e,n){return de(e,n)}),function(){var e=u(o().m(function e(n,t,r){return o().w(function(e){for(;;)if(0===e.n)return e.a(2,B(n,[[t,se(g({},t,r))[t]]]))},e)}));return function(n,t,r){return e.apply(this,arguments)}}());var ve=function(e,n){var t=n.sortBy,r=n.reverse,o=l(e);switch(t){case"source":o.sort(function(e,n){return e.sourceOrder-n.sourceOrder});break;case"fetchedAt":o.sort(function(e,n){var t,r;return Number(null!==(t=e.fetchedAt)&&void 0!==t?t:0)-Number(null!==(r=n.fetchedAt)&&void 0!==r?r:0)});break;case"chapterNumber":o.sort(function(e,n){return e.chapterNumber-n.chapterNumber});break;case"uploadedAt":o.sort(function(e,n){var t,r;return Number(null!==(t=e.uploadDate)&&void 0!==t?t:0)-Number(null!==(r=n.uploadDate)&&void 0!==r?r:0)})}return r&&o.reverse(),o};function be(e,n){return e.filter(function(e){return function(e,n){var t=n.isRead;switch(e){case!0:return!t;case!1:return t;default:return!0}}(n.unread,e)&&function(e,n){var t=n.isDownloaded;switch(e){case!0:return t;case!1:return!t;default:return!0}}(n.downloaded,e)&&function(e,n){var t=n.isBookmarked;switch(e){case!0:return t;case!1:return!t;default:return!0}}(n.bookmarked,e)&&(t=n.excludedScanlators,!(r=e.scanlator)||!t.includes(r));var t,r})}a("i",function(e){var n=e.unread,t=e.downloaded,r=e.bookmarked,o=e.excludedScanlators;return null!=n||null!=t||null!=r||!!o.length}),a("a",function(e){var n,t,r,o=(r=de(n=e,t,d.useEffect),d.useMemo(function(){return r},[n,t])),a=o.unread,i=o.downloaded,u=o.bookmarked,c=o.reverse,l=o.sortBy,s=o.showChapterNumber,f=o.excludedScanlators;return d.useMemo(function(){return{unread:a,downloaded:i,bookmarked:u,reverse:c,sortBy:l,showChapterNumber:s,excludedScanlators:f}},[a,i,u,c,l,s,f])}),a("b",function(e){return function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:z();return function(t,r){return fe(e,t,r).catch(n)}}(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:z())}),a("c",function(n){var t,a,i=arguments.length>1&&void 0!==arguments[1]&&arguments[1],c=S().t,l=V(),f=s(d.useState(!!n.inLibrary),2),v=f[0],b=f[1],g=d.useCallback(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];e&&x.updateManga(n.id,{updateManga:{inLibrary:!0},updateMangaCategories:{addToCategories:t,removeFromCategories:r}}).response.then(function(){return F(c("library.info.label.added_to_library"),"success")}).then(function(){return b(!0)}).catch(function(e){F(c("library.error.label.add_to_library"),"error",D(e))})},[n.id]),m=d.useCallback(u(o().m(function e(){return o().w(function(e){for(;;)switch(e.n){case 0:if(!i){e.n=1;break}return e.n=1,q({title:c("global.label.are_you_sure"),message:c("manga.action.library.remove.dialog.label.message",{title:n.title}),actions:{confirm:{title:c("global.button.remove")}}});case 1:return e.n=2,N.removeFromLibrary([n.id],!0);case 2:b(!1);case 3:return e.a(2)}},e)})),[n.id,i]),y=ce({mangaId:n.id,addToLibrary:!0,onClose:g}),p=y.openCategorySelect,h=y.CategorySelectComponent,w=d.useCallback(function(){var e=function(){var t=u(o().m(function t(){var r,a,i,u,s,d,f,b;return o().w(function(t){for(;;)switch(t.p=t.n){case 0:if(!v){t.n=1;break}return m().catch(z()),t.a(2);case 1:return t.p=1,t.n=2,X();case 2:a=t.v.showAddToLibraryCategorySelectDialog,t.n=4;break;case 3:return t.p=3,d=t.v,F(c("global.error.label.failed_to_load_data"),"error",D(d)),t.a(2);case 4:return t.p=4,t.n=5,x.getCategories(k).response;case 5:i=t.v,t.n=7;break;case 6:return t.p=6,f=t.v,F(c("category.error.label.request_failure"),"error",D(f)),t.a(2);case 7:return u=ae.getUserCreated(i.data.categories.nodes),t.p=8,t.n=9,N.getDuplicateLibraryMangas(n.title).response;case 9:s=t.v,t.n=11;break;case 10:return t.p=10,b=t.v,t.n=11,q({title:c("global.error.label.failed_to_load_data"),message:c("manga.action.library.add.dialog.duplicate.label.failure",{error:D(b)}),actions:{extra:{show:!0,title:c("global.button.retry"),contain:!0},confirm:{title:c("global.button.add")}},onExtra:function(){return e().catch(z())}});case 11:if(!(null===(r=s)||void 0===r?void 0:r.data.mangas.totalCount)){t.n=12;break}return t.n=12,q({title:c("global.label.are_you_sure"),message:c("manga.action.library.add.dialog.duplicate.label.info"),actions:{extra:{show:!0,title:c("migrate.dialog.action.button.show_entry"),contain:!0},confirm:{title:c("global.button.add")}},onExtra:function(){return l(_.manga.path(s.data.mangas.nodes[0].id))}});case 12:if(a&&!!u.length){t.n=13;break}return g(!0,ae.getIds(ae.getDefaults(u))),t.a(2);case 13:p(!0);case 14:return t.a(2)}},t,null,[[8,10],[4,6],[1,3]])}));return function(){return t.apply(this,arguments)}}();e().catch(z())},[v,m,g]);return{CategorySelectComponent:h,updateLibraryState:w,isInLibrary:null!==(t=null===(a=N.getFromCache(n.id,H(e||(e=r(["\n                    fragment MangaInLibraryState on MangaType {\n                        inLibrary\n                    }\n                "]))),"MangaInLibraryState"))||void 0===a?void 0:a.inLibrary)&&void 0!==t?t:v}})}}})}();
