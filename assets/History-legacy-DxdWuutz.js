System.register(["./index-legacy-Cvtb_HX5.js","./Virtuoso.util-legacy-B7y6Q-9B.js","./ChapterDownloadRetryButton-legacy-Bj0QT8Ai.js","./Avatar-legacy-B9O0_SbZ.js"],(function(e,t){"use strict";var n,a,r,o,s,i,l,u,c,d,h,f,m,g,p,x,j,y,b,C,v,I,R,w,O,U,L,k;return{setters:[function(e){n=e.i,a=e.j,r=e.C,o=e.a,s=e.ah,i=e.A,l=e.L,u=e.b,c=e.B,d=e.bU,h=e.bW,f=e.ba,m=e.V,g=e.u,p=e.g,x=e.r,j=e.E,y=e.n,b=e.o,C=e.T,v=e.m},function(e){I=e.V,R=e.a,w=e.S,O=e.b},function(e){U=e.C,L=e.a,k=e.b},null],execute:function(){var t=n.memo((function(e){var t=e.chapter,n=t.manga;return a.jsx(r,{children:a.jsx(o,{component:l,to:i.reader.path(t.manga.id,t.sourceOrder),state:s.getReaderOpenChapterLocationState(t),sx:{color:function(e){return e.palette.text[t.isRead?"disabled":"primary"]}},children:a.jsxs(u,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:1.5},children:[a.jsxs(c,{sx:{display:"flex",flexGrow:1},children:[a.jsx(U,{mangaId:n.id,mangaTitle:n.title,thumbnailUrl:n.thumbnailUrl,thumbnailUrlLastFetched:n.thumbnailUrlLastFetched}),a.jsx(d,{title:n.title,secondaryText:"".concat(t.name," â€” ").concat(h.format(f(Number(t.lastReadAt)).valueOf()))})]}),a.jsx(m,{chapterId:t.id}),a.jsx(L,{chapterId:t.id}),a.jsx(k,{chapterId:t.id,isDownloaded:t.isDownloaded})]})})})}));e("History",(function(){var e,r=g().t,o=p().setTitle,i=x.useGetRecentlyReadChapters(void 0,{fetchPolicy:"cache-and-network",notifyOnNetworkStatusChange:!0}),l=i.data,u=i.loading,c=i.error,d=i.fetchMore,h=i.refetch,f=!(null==l||!l.chapters.pageInfo.hasNextPage),m=null==l?void 0:l.chapters.pageInfo.endCursor,U=null!==(e=null==l?void 0:l.chapters.nodes)&&void 0!==e?e:[],L=n.useMemo((function(){return Object.entries(s.groupByDate(U,"lastReadAt"))}),[U]),k=n.useMemo((function(){return L.map((function(e){return e[I.ITEMS].length}))}),[L]),G=I.useCreateGroupedComputeItemKey(k,n.useCallback((function(e){return L[e][I.GROUP]}),[L]),n.useCallback((function(e){return U[e].id}),[U]));n.useLayoutEffect((function(){return o(r("history.title")),function(){o("")}}),[r]);var P=n.useCallback((function(){f&&d({variables:{offset:U.length}})}),[f,m]);return c?a.jsx(j,{message:r("global.error.label.failed_to_load_data"),messageExtra:y(c),retry:function(){return h().catch(b())}}):u||0!==U.length?a.jsx(R,{style:{height:"undefined"},components:{Footer:function(){return u?a.jsx(v,{usePadding:!0}):null}},overscan:.5*window.innerHeight,endReached:P,groupCounts:k,groupContent:function(e){return a.jsx(O,{isFirstItem:0===e,children:a.jsx(C,{variant:"h5",component:"h2",children:L[e][I.GROUP]})})},computeItemKey:G,itemContent:function(e){return a.jsx(w,{children:a.jsx(t,{chapter:U[e]})})}}):a.jsx(j,{message:r("history.error.label.no_history_available")})}))}}}));
