import{u as F,f as n,t as d,S as M,n as C,j as e,C as O,I as A,o as w,p as D,q as P,s as I,v as y,H as U,r as H,ak as W,w as V,B as E,al as X,m as $,g as z}from"./index-BeKqgGKZ.js";import{F as K}from"./FilterList-B-LFof2-.js";import{q as N}from"./index-BB0yw65F.js";import{t as Q}from"./Extensions.utils-KVaJruaX.js";import{L as R}from"./ListCardAvatar-BoNc-R4B.js";import{S as _}from"./Switch-DHyslwgU.js";import{L as G}from"./ListItemAvatar-CbRI09tg.js";const re=({selectedLanguages:p,setSelectedLanguages:k,languages:u,sources:l})=>{const{i18n:r,_:J}=F(),[c,m]=n.useState({}),[i,h]=n.useState(d(p)),[B,g]=n.useState(!1),T=n.useMemo(()=>M.groupByLanguage(l),[l]),x=n.useMemo(()=>d([...i.toSorted(C),...u.toSorted(C)]),[u,i]),S=()=>{g(!1),m({}),h(d(p))},b=()=>{g(!1),Promise.all(Object.entries(c).map(([t,s])=>X(l.find(o=>o.id===t),"isEnabled",s))).catch(t=>$(r._({id:"cBoXe4"}),"error",z(t))),m({}),k(d(i))},v=(t,s)=>{h(s?[...i,t]:i.toSpliced(i.indexOf(t),1))};return e.jsxs(e.Fragment,{children:[e.jsx(O,{title:r._({id:"Tz0i8g"}),children:e.jsx(A,{onClick:()=>g(!0),"aria-label":"display more actions",edge:"end",color:"inherit",children:e.jsx(K,{})})}),e.jsxs(w,{fullWidth:!0,maxWidth:"xs",open:B,onClose:S,children:[e.jsx(D,{children:r._({id:"tEL3Xq"})}),e.jsx(P,{dividers:!0,sx:{padding:0},children:e.jsx(N,{style:{height:x.length*54,minHeight:"25vh",maxHeight:"50vh"},data:x,increaseViewportBy:400,computeItemKey:t=>x[t],itemContent:(t,s)=>{var f;const o=(f=T[s])!=null?f:[],j=i.includes(s);return e.jsxs(e.Fragment,{children:[e.jsxs(I,{children:[e.jsx(y,{primary:Q(s)}),e.jsx(_,{checked:j,onChange:a=>v(s,a.target.checked)})]}),j&&!!o.length&&e.jsx(U,{sx:{ml:1},children:o.map(a=>{var L;return e.jsxs(I,{children:[e.jsx(G,{sx:{minWidth:32,mr:1},children:e.jsx(R,{iconUrl:H.getValidImgUrlFor(a.iconUrl),alt:a.name,slots:{avatarProps:{sx:{width:32,height:32}},spinnerImageProps:{ignoreQueue:!0}}})}),e.jsx(y,{primary:a.name}),e.jsx(_,{checked:(L=c[a.id])!=null?L:W(a).isEnabled,onChange:q=>m({...c,[a.id]:q.target.checked})})]},a.id)})})]})}})}),e.jsxs(V,{children:[e.jsx(E,{autoFocus:!0,onClick:S,color:"primary",children:r._({id:"dEgA5A"})}),e.jsx(E,{onClick:b,color:"primary",children:r._({id:"aP3N/0"})})]})]})]})};export{re as S};
