!function(){function e(t){return e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e(t)}var t=["index","isSortDesc","chapters"];function r(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function n(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach(function(t){o(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function o(t,r,n){return(r=function(t){var r=function(t,r){if("object"!=e(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var o=n.call(t,r||"default");if("object"!=e(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(t)}(t,"string");return"symbol"==e(r)?r:r+""}(r))in t?Object.defineProperty(t,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[r]=n,t}System.register(["./index-legacy-JflcMKyc.js","./useManageMangaLibraryState-legacy-uTW2ADBk.js","./DateHelper-legacy-Cv_WjdHY.js","./ChapterCardMetadata-legacy-D22wzAqk.js","./Delete-legacy-hq5Nwe6v.js","./Download-legacy-BllPrgfy.js","./DoneAll-legacy-BF-mXL8w.js","./Chapters-legacy-mE8bimb5.js","./IconWebView-legacy-BMztjrRa.js","./MUI.util-legacy-D9xMlHDR.js","./ListCardContent-legacy-DeWD_6rq.js","./Card-legacy-BZseXOb4.js","./CardActionArea-legacy-Cs6Rrb63.js","./Checkbox-legacy-Cothz8vj.js"],function(e,r){"use strict";var o,a,i,l,c,s,d,u,p,f,h,x,b,m,g,y,j,v,C,k,w,D,_,I,O,M,P,S,V,R,T,N,A,G,H,z,B,U,L,W,E,F,K,X,q;return{setters:[function(e){o=e.c,a=e.j,i=e.u,l=e.r,c=e.bn,s=e.e,d=e.f,u=e.k,p=e.a6,f=e.aX,h=e.az,x=e.b,b=e.b3,m=e.L,g=e.C,y=e.I,j=e.aA,v=e.bi,C=e.H,k=e.T,w=e.G},function(e){D=e.c,_=e.b,I=e.d,O=e.e,M=e.h,P=e.D,S=e.R,V=e.V,R=e.M,T=e.a},function(e){N=e.g},function(e){A=e.C,G=e.D},function(e){H=e.D},function(e){z=e.D},function(e){B=e.D},function(e){U=e.a,L=e.C},function(e){W=e.I},function(e){E=e.M},function(e){F=e.L},function(e){K=e.C},function(e){X=e.C},function(e){q=e.C}],execute:function(){var r=o(a.jsx("path",{d:"M21 7h-6V5h6zm-2 3.9c-.32.07-.66.1-1 .1-2.76 0-5-2.24-5-5 0-1.13.37-2.16 1-3H7c-1.1 0-2 .9-2 2v16l7-3 7 3z"})),Q=o(a.jsx("path",{d:"M21 7h-2v2h-2V7h-2V5h2V3h2v2h2zm-2 14-7-3-7 3V5c0-1.1.9-2 2-2h7c-.63.84-1 1.87-1 3 0 2.76 2.24 5 5 5 .34 0 .68-.03 1-.1z"})),J=o(a.jsx("path",{d:"M19 19H5V5h7V3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2v-7h-2zM14 3v2h3.59l-9.83 9.83 1.41 1.41L19 6.41V10h2V3z"})),Z=e("I",J),Y=e("a",function(e){var t,n,o,p=e.chapter,f=e.handleSelection,h=e.canBeDownloaded,x=void 0!==h&&h,b=e.selectedChapters,m=void 0===b?[]:b,g=e.onClose,y=e.selectable,j=void 0===y||y,v=i(),C=v.i18n,k=(v._,!!p),w=null!=p?p:{},V=w.isDownloaded,R=w.isRead,T=w.isBookmarked,N=null!==(n=null===(o=l.useGetMangaChapters(c,null!==(t=null==p?void 0:p.mangaId)&&void 0!==t?t:-1,{skip:!p,fetchPolicy:"cache-only"}).data)||void 0===o?void 0:o.chapters.nodes)&&void 0!==n?n:[],A=s().settings.deleteChaptersWithBookmark,G=O(k,L),E=D(k),F=M(k),K=d.useMemo(function(){return{downloadableChapters:U.getDownloadable(m),downloadedChapters:U.getDownloaded(m),unbookmarkedChapters:U.getNonBookmarked(m),bookmarkedChapters:U.getBookmarked(m),unreadChapters:U.getNonRead(m),readChapters:U.getRead(m)}},[m]),X=K.downloadableChapters,q=K.downloadedChapters,J=K.unbookmarkedChapters,Y=K.bookmarkedChapters,$=K.unreadChapters,ee=K.readChapters,te=function(e,t){var r,n="mark_prev_as_read"===e,o=n?"mark_as_read":e;if("delete"===o&&p&&!U.isDeletable(p,A))return void g();var a=function(){if(!p)return t;if(!n)return[p];var e=N.findIndex(function(e){return e.id===p.id});if(e+1>N.length-1)return[];var r=N.slice(e+1);return U.getNonRead(r)}();a.length?(U.performAction(o,U.getIds(a),{chapters:a,wasManuallyMarkedAsRead:!0,trackProgressMangaId:null===(r=a[0])||void 0===r?void 0:r.mangaId}).catch(u("ChapterActionMenuItems::performAction")),g()):g()};return a.jsxs(a.Fragment,{children:[k&&j&&a.jsx(_,{onClick:function(){null==f||f(p.id,!0),g()},Icon:I,title:C._({id:"rG3WVm"})}),k&&a.jsxs(a.Fragment,{children:[a.jsx(_,{Icon:Z,disabled:!p.realUrl,onClick:function(){window.open(p.realUrl,"_blank","noopener,noreferrer"),g()},title:C._({id:"ZdWg0V"})}),a.jsx(_,{Icon:W,disabled:!p.realUrl,onClick:function(){window.open(l.getWebviewUrl(p.realUrl),"_blank","noopener,noreferrer"),g()},title:C._({id:"Xrk3+q"})})]}),E(x)&&a.jsx(_,{Icon:z,disabled:F(!X.length),onClick:function(){return te("download",X)},title:G("download",X.length)}),E(V)&&a.jsx(_,{Icon:H,disabled:F(!q.length),onClick:function(){return te("delete",U.getDeletable(q,A))},title:G("delete",q.length)}),E(!T)&&a.jsx(_,{Icon:Q,disabled:F(!J.length),onClick:function(){return te("bookmark",J)},title:G("bookmark",J.length)}),E(T)&&a.jsx(_,{Icon:r,disabled:F(!Y.length),onClick:function(){return te("unbookmark",Y)},title:G("unbookmark",Y.length)}),E(!R)&&a.jsx(_,{Icon:P,disabled:F(!$.length),onClick:function(){return te("mark_as_read",$)},title:G("mark_as_read",$.length)}),E(R)&&a.jsx(_,{Icon:S,disabled:F(!ee.length),onClick:function(){return te("mark_as_unread",ee)},title:G("mark_as_unread",ee.length)}),k&&a.jsx(_,{onClick:function(){return te("mark_prev_as_read",[])},Icon:B,title:C._({id:"7phaC/"})})]})}),$=e("B",o(a.jsx("path",{d:"M17 3H7c-1.1 0-1.99.9-1.99 2L5 21l7-3 7 3V5c0-1.1-.9-2-2-2"}))),ee=d.memo(function(e){var t=i(),r=t.i18n,o=(t._,p()),l=f.usePreventMobileContextMenu(),c=d.useRef(null),s=e.mode,u=void 0===s?"manga.page":s,C=e.chapter,k=e.showChapterNumber,w=e.onSelect,D=e.selected,_=e.selectable,I=void 0===_||_,O=e.isActiveChapter,M=void 0!==O&&O,P=null!==D,S=C.isDownloaded,H=function(e){P&&(e.preventDefault(),e.stopPropagation(),w(C.id,!D,e.shiftKey))},z=function(e,t){e.stopPropagation(),e.preventDefault(),null==t||t(e)},B=V(function(e,t){var r=t.context;P||!c.current?(e.shiftKey=!0,H(e)):z(e,function(){return null==r?void 0:r(c.current)})});return a.jsx(h,{variant:"popover",popupId:"chapter-card-action-menu",children:function(e){var t;return a.jsxs(x,{sx:{pt:1,px:1},children:[a.jsx(K,{sx:n({},b("reader"===u&&M,{backgroundColor:"primary.main"})),children:a.jsx(X,n(n({component:m,to:U.getReaderUrl(C),onContextMenu:l,sx:f.preventMobileContextMenuSx(),style:{color:o.palette.text[C.isRead?"disabled":"primary"]},state:U.getReaderOpenChapterLocationState(C,!0),replace:"reader"===u,onClick:function(e){return H(e)}},B(e.open)),{},{children:a.jsxs(F,{children:[a.jsx(A,{title:k?"".concat(r._({id:"QIei5D"})," ").concat(C.chapterNumber):C.name,secondaryText:C.scanlator,ternaryText:"".concat(N(Number(null!==(t=C.uploadDate)&&void 0!==t?t:0),!0)).concat(S?" â€¢ ".concat(r._({id:"Vv4iDV"})):""),infoIcons:C.isBookmarked&&a.jsx($,{color:"reader"===u&&M?"secondary":"primary"}),slotProps:{title:{variant:"subtitle1",sx:b("reader"===u&&M,{color:o.palette.primary.contrastText})},secondaryText:{sx:b("reader"===u&&M,{color:o.palette.primary.contrastText})},ternaryText:{sx:b("reader"===u&&M,{color:o.palette.primary.contrastText})}}}),a.jsx(G,{chapterId:C.id,color:"reader"===u&&M?o.palette.primary.contrastText:void 0}),a.jsx(x,{sx:{minHeight:"48px"},children:null===D?a.jsx(g,{title:r._({id:"0zpgxV"}),children:a.jsx(y,n(n({ref:c},E.preventRippleProp(j(e),{onClick:function(e){return z(e)}})),{},{"aria-label":"more",sx:n({color:"inherit"},b("reader"===u&&M,{color:"primary.contrastText"})),children:a.jsx(R,{})}))}):a.jsx(g,{title:D?r._({id:"HlKgQk"}):r._({id:"rG3WVm"}),children:a.jsx(q,{checked:D})})})]})}))}),!P&&e.isOpen&&a.jsx(T,n(n({},v(e)),{},{children:function(e){return a.jsx(Y,{onClose:e,chapter:C,handleSelection:function(){return w(C.id,!0)},canBeDownloaded:U.isDownloadable(C),selectable:I})}}))]})}})}),te=function(e){var t=e.missingChaptersGap;return a.jsxs(x,{sx:{width:"100%",flexDirection:"row",justifyContent:"center",alignItems:"center",p:2,pt:3.5,pb:2.5},children:[a.jsx(C,{sx:{flexGrow:1,border:"1px solid",borderColor:function(e){return e.palette.text.secondary}}}),a.jsx(k,{sx:{px:2},variant:"body2",color:"textSecondary",children:w._({id:"xFU/Nr",values:{missingChapterCount:t}})}),a.jsx(C,{sx:{flexGrow:1,border:"1px solid",borderColor:function(e){return e.palette.text.secondary}}})]})};e("C",function(e){var r,o=e.index,i=e.isSortDesc,l=e.chapters,c=function(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(-1!==t.indexOf(n))continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],-1===t.indexOf(r)&&{}.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}(e,t),s=i?o+1:o-1,d=l[o],u=null!==(r=l[s])&&void 0!==r?r:{chapterNumber:0},p=U.getGap(d,u),f=p>0;return a.jsxs(x,{sx:b(!i,{flexDirection:"column-reverse"}),children:[a.jsx(ee,n(n({},c),{},{chapter:l[o]})),f&&a.jsx(te,{missingChaptersGap:p})]})})}}})}();
