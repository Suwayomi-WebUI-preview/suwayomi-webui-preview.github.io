!function(){function e(t){return e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e(t)}function t(e){return function(e){if(Array.isArray(e))return a(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||r(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function n(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,o,i,u=[],l=!0,c=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=o.call(n)).done)&&(u.push(r.value),u.length!==t);l=!0);}catch(e){c=!0,a=e}finally{try{if(!l&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(c)throw a}}return u}}(e,t)||r(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function r(e,t){if(e){if("string"==typeof e)return a(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?a(e,t):void 0}}function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){u(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function u(t,n,r){var a;return a=function(t,n){if("object"!=e(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var a=r.call(t,n||"default");if("object"!=e(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===n?String:Number)(t)}(n,"string"),(n="symbol"==e(a)?a:a+"")in t?Object.defineProperty(t,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[n]=r,t}System.register(["./index-legacy-B-narC8e.js","./AppbarSearch-legacy-C_9Mbk2K.js","./Favorite-legacy-CPofgGmv.js","./FilterList-legacy-Cx-gP7gB.js","./GridLayouts-legacy-C1-ITnT3.js","./SortRadioInput-legacy-INNnmHnC.js","./CheckboxInput-legacy--1YGreck.js","./TextField-legacy-Dzv_Jrsi.js","./Collapse-legacy-BLLxrA1W.js","./useDebounce-legacy-C3E6IKbF.js","./InputAdornment-legacy-Dz99rn05.js","./ThreeStateCheckboxInput-legacy-eAvFQHe9.js","./StyledFab-legacy-BPWyGJjh.js","./MangaGrid-legacy-BmbD5o5v.js","./metadataServerSettings-legacy-DQXQw-7k.js","./Link-legacy-DKRml8Tu.js","./useManageMangaLibraryState-legacy-CwWH7rPy.js","./index-legacy-DTDG2v2-.js","./CardContent-legacy-BLNErolH.js","./Avatar-legacy-qov0cBT_.js","./SpinnerImage-legacy-BKXUFJU-.js","./ListPreference-legacy-Bf3-r2zB.js","./Checkbox-legacy-BVe3qof7.js","./SwitchBase-legacy-rKyTOxRt.js","./NumberSetting-legacy-BM2j_UZr.js","./Info-legacy-PgpJv1n9.js","./useMobilePicker-legacy-CVO16U86.js","./Chip-legacy-q0YjxqMT.js","./SelectSetting-legacy-Bv7nxzpu.js","./Select-legacy-CLE_Gv6l.js","./Mangas-legacy-Bjibbi3u.js","./Chapters-legacy-BqhgnJ8D.js","./ViewModule-legacy-B-kH2E9v.js","./Delete-legacy-CbQa5cY6.js","./Sync-legacy-BhQiJAeY.js","./PlayArrow-legacy-BxIRgnGv.js","./metadata-legacy-jMvlPk1n.js"],(function(e,r){"use strict";var a,o,l,c,s,d,f,p,g,m,x,h,v,y,j,b,S,F,C,w,k,L,O,E,I,P,A,T,M,V,D,_,N,U,B,R,z,G,H,q,W,$,X,Z,J,K,Q,Y,ee,te,ne,re,ae;return{setters:[function(e){a=e.w,o=e.j,l=e.R,c=e.T,s=e.O,d=e.r,f=e.i,p=e.B,g=e.az,m=e.U,x=e.S,h=e.c,v=e.aS,y=e.an,j=e.u,b=e.b,S=e.s,F=e.N,C=e.V,w=e.e,k=e.aj,L=e.W,O=e.aT,E=e.aU,I=e.a,P=e.g,A=e.I,T=e.aV,M=e.aW,V=e.aX},function(e){D=e.d,_=e.u,N=e.A,U=e.S},function(e){B=e.d},function(e){R=e.d},function(e){z=e.G},function(e){G=e.S,H=e.O},function(e){q=e.C},function(e){W=e.a,$=e.I,X=e.M,Z=e.b},function(e){J=e.C},function(e){K=e.u},function(e){Q=e.I},function(e){Y=e.T},function(e){ee=e.S},function(e){te=e.M,ne=e.g},function(e){re=e.u},function(e){ae=e.L},null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null],execute:function(){function r(){var e=a(),t=e.options.SourcegridLayout,n=e.setOptions;return o.jsx(z,{gridLayout:t,onChange:function(e){n((function(t){return i(i({},t),{},{SourcegridLayout:e})}))}})}e("SourceMangas",(function(){var e,t,u,l,c=j().t,s=h.useContext(F),d=s.setTitle,f=s.setAction,p=C().sourceId,g=w(),m=k(),x=m.key,v=m.state,y=null!==(e=k().state)&&void 0!==e?e:{},b=y.contentType,S=void 0===b?0:b,D=y.clearCache,z=void 0!==D&&D;L("browse");var G=n(h.useState(!0),2),H=G[0],q=G[1];h.useEffect((function(){q(!1)}),[]);var W=re().settings.hideLibraryEntries,$=a().options,X=n(_("query",U),1)[0],Z=n(O("source-mangas-".concat(p,"-filters"),[]),2),J=Z[0],K=Z[1],Q=n(O("source-mangas-location-".concat(x,"-").concat(p,"-filters"),null!=J?J:[]),2),Y=Q[0],ee=Q[1],te=n(h.useState(Y),2),oe=te[0],ie=te[1],ue=n(O("source-mangas-".concat(p,"-content-type"),S),2),le=ue[0],ce=ue[1],se=n(O("source-mangas-location-".concat(x,"-").concat(p,"-content-type"),X?2:le),2),de=se[0],fe=se[1];h.useEffect((function(){return function(){K(void 0),ce(void 0)}}),[p]);var pe=h.useCallback((function(){E.session.setItem(ne(m),void 0,!1),window.scrollTo(0,0)}),[x]),ge=function(e){K(e),ee(e),pe()},me=function(e){ce(e),fe(e)},xe=n(Ae(p,de,X,Y,1,W),2),he=xe[0],ve=xe[1],ye=ve.data,je=ve.isLoading,be=ve.size,Se=ve.abortRequest,Fe=ve.filteredOutAllItemsOfFetchedPage,Ce=je||Fe,Ie=null!==(t=null==ye?void 0:ye.fetchSourceManga.mangas)&&void 0!==t?t:[],Te=null!==(u=null==ye?void 0:ye.fetchSourceManga.hasNextPage)&&void 0!==u&&u,Me=I.useGetSource(p).data,Ve=null==Me?void 0:Me.source,De=null!==(l=null==Ve?void 0:Ve.filters)&&void 0!==l?l:[],_e=Ce?void 0:c(Pe[de]),Ne="0"===p?o.jsxs(o.Fragment,{children:[o.jsxs("span",{children:[c("source.local_source.label.checkout")," "]}),o.jsx(ae,{href:"https://github.com/Suwayomi/Suwayomi-Server/wiki/Local-Source",target:"_blank",rel:"noreferrer",children:c("source.local_source.label.guide")})]}):void 0,Ue=h.useCallback((function(e,t){me(e),pe(),X&&!t&&g({pathname:""},{state:i(i({},v),{},{contentType:e})})}),[me,X,pe]);X&&2!==de&&Ue(2,X);var Be=h.useCallback((function(){Te&&he(be+1)}),[be,Te,de]),Re=h.useCallback((function(){ie([]),ge([])}),[p,de]);return h.useEffect((function(){Fe&&Te&&!je&&he(be+1)}),[Fe,je]),h.useEffect((function(){z&&(V.REVALIDATION.includes(p)&&I.clearBrowseCacheFor(p))}),[z]),h.useEffect((function(){return function(){2!==de||H||(Se(new Error("SourceMangas(".concat(p,"): search string changed"))),pe())}}),[X]),h.useEffect((function(){var e;return d(null!==(e=null==Ve?void 0:Ve.displayName)&&void 0!==e?e:c("source.title")),f(o.jsxs(o.Fragment,{children:[o.jsx(N,{}),o.jsx(r,{}),(null==Ve?void 0:Ve.isConfigurable)&&o.jsx(P,{title:c("settings.title"),children:o.jsx(A,{onClick:function(){return g("/sources/".concat(p,"/configure/"))},"aria-label":"display more actions",edge:"end",color:"inherit",size:"large",children:o.jsx(T,{})})})]})),function(){d(""),f(null)}}),[c,Ve]),o.jsxs(Ee,{hasContent:!!Ie.length,children:[o.jsxs(Le,{children:[o.jsx(Oe,{variant:0===de?"contained":"outlined",startIcon:o.jsx(B,{}),onClick:function(){return Ue(0)},children:c("global.button.popular")}),void 0===(null==Ve?void 0:Ve.supportsLatest)||Ve.supportsLatest?o.jsx(Oe,{disabled:!(null!=Ve&&Ve.supportsLatest),variant:1===de?"contained":"outlined",startIcon:o.jsx(M,{}),onClick:function(){return Ue(1)},children:c("global.button.latest")}):null,o.jsx(Oe,{variant:2===de?"contained":"outlined",startIcon:o.jsx(R,{}),onClick:function(){return Ue(2,X)},children:c("global.button.filter")})]}),o.jsx(ke,{mangas:Ie,hasNextPage:Te,loadMore:Be,message:_e,messageExtra:Ne,isLoading:Ce,gridLayout:$.SourcegridLayout},de),2===de&&o.jsx(we,{sourceFilter:De,updateFilterValue:ie,setTriggerUpdate:function(){ge(oe)},resetFilterValue:Re,update:oe})]})}));var oe=function(e){var r=e.state,a=e.name,i=e.position,u=e.group,c=e.updateFilterValue,s=e.update,d=n(l.useState(r),2),f=d[0],p=d[1];return void 0!==r?o.jsx(q,{label:a,checked:f,onChange:function(e){p(e.target.checked);var n=s.filter((function(e){return!(i===e.position&&u===e.group)}));c([].concat(t(n),[{type:"checkBoxState",position:i,state:e.target.checked,group:u}]))}}):null},ie=function(e){var t=e.name;return o.jsx(c,{sx:{mt:2},variant:"subtitle2",children:t},t)};var ue=function(e){return function(e,r,a,i,u,c,d){var f=n(l.useState(a),2),p=f[0],g=f[1];if(e){var m=e.map((function(e){return o.jsx(s,{value:e,children:e},"".concat(r," ").concat(e))}));return o.jsxs(W,{sx:{my:1},variant:"standard",children:[o.jsx($,{children:r}),o.jsx(X,{name:r,value:e[p],label:r,onChange:function(n){var r=e.indexOf("".concat(n.target.value));g(r);var a=c.filter((function(e){return!(i===e.position&&d===e.group)}));u([].concat(t(a),[{type:"selectState",position:i,state:r,group:d}]))},children:m})]})}return null}(e.values,e.name,e.state,e.position,e.updateFilterValue,e.update,e.group)},le={},ce=f;Object.defineProperty(le,"__esModule",{value:!0});var se=le.default=void 0,de=ce(d()),fe=o;se=le.default=(0,de.default)((0,fe.jsx)("path",{d:"m12 8-6 6 1.41 1.41L12 10.83l4.59 4.58L18 14z"}),"ExpandLess");var pe={},ge=f;Object.defineProperty(pe,"__esModule",{value:!0});var me=pe.default=void 0,xe=ge(d()),he=o;me=pe.default=(0,xe.default)((0,he.jsx)("path",{d:"M16.59 8.59 12 13.17 7.41 8.59 6 10l6 6 6-6z"}),"ExpandMore");var ve=function(e){var r=e.values,a=e.name,i=e.state,u=e.position,c=e.group,s=e.updateFilterValue,d=e.update,f=n(l.useState(i),2),h=f[0],v=f[1],y=n(l.useState(!1),2),j=y[0],b=y[1];if(r){return o.jsxs(p,{sx:{mx:-2},children:[o.jsxs(g,{onClick:function(){b(!j)},children:[o.jsx(m,{primary:a}),j?o.jsx(se,{}):o.jsx(me,{})]}),o.jsx(J,{in:j,children:o.jsx(x,{sx:{mx:4},children:r.map((function(e,n){return o.jsx(G,{label:e,checked:h.index===n,sortDescending:!h.ascending,onClick:function(){return function(e){var n=h;n.index===e?n.ascending=!n.ascending:n.ascending=!0,n.index=e,v(n);var r=d.filter((function(e){return!(u===e.position&&c===e.group)}));s([].concat(t(r),[{type:"sortState",position:u,state:n,group:c}]))}(n)}},"".concat(a," ").concat(e))}))})})]})}return null},ye=function(e){var r=e.state,a=e.name,i=e.position,u=e.group,c=e.updateFilterValue,s=e.update,d=n(l.useState(r||""),2),f=d[0],p=d[1],g=K(f,500);return h.useEffect((function(){var e=s.filter((function(e){return!(i===e.position&&u===e.group)}));c([].concat(t(e),[{type:"textState",position:i,state:g,group:u}]))}),[g]),void 0!==r?o.jsxs(W,{sx:{my:1},variant:"standard",children:[o.jsx($,{children:a}),o.jsx(Z,{name:a,value:f,onChange:function(e){var t=e.target.value;return p(t)},endAdornment:o.jsx(Q,{position:"end",children:o.jsx(D,{})})})]}):null},je=function(e){switch(e){case 0:return v.Ignore;case 1:return v.Include;case 2:return v.Exclude;default:throw new Error("Unexpected state number ".concat(e))}},be=function(e){var r=e.state,a=e.name,i=e.position,u=e.group,c=e.updateFilterValue,s=e.update,d=n(l.useState(function(e){switch(e){case v.Ignore:return 0;case v.Include:return 1;case v.Exclude:return 2;default:throw new Error("Unexpected TriState ".concat(e))}}(r)),2),f=d[0],p=d[1];return void 0!==r?o.jsx(Y,{label:a,checked:[void 0,!0,!1][f],onChange:function(e){return function(e){var n=void 0===e?0:e?1:2;p(n);var r=s.filter((function(e){return!(i===e.position&&u===e.group)}));c([].concat(t(r),[{type:"triState",position:i,state:je(n),group:u}]))}(e)}}):null},Se=function(e){var t=e.state,r=e.name,a=e.position,i=e.updateFilterValue,u=e.update,c=n(l.useState(!1),2),s=c[0],d=c[1];return o.jsxs(p,{sx:{mx:-2},children:[o.jsxs(g,{onClick:function(){return d(!s)},children:[o.jsx(m,{primary:r}),s?o.jsx(se,{}):o.jsx(me,{})]}),o.jsx(J,{in:s,children:o.jsx(x,{sx:{mx:4},children:o.jsx(Ce,{sourceFilter:t,group:a,updateFilterValue:i,update:u})})})]})},Fe=function(e){var t=e.name;return o.jsx(y,{sx:{my:1},textAlign:"center",children:t},t)};function Ce(e){var t=e.sourceFilter,n=e.group,r=e.updateFilterValue,a=e.update;return o.jsx(x,{children:t.map((function(e,t){var i,u,l,c,s,d=a.find((function(e){return e.group===n&&e.position===t}));switch(d=d?d.state:d,e.type){case"CheckBoxFilter":return o.jsx(oe,{name:e.name,state:null!==(i=d)&&void 0!==i?i:e.CheckBoxFilterDefault,position:t,group:n,updateFilterValue:r,update:a},"filters ".concat(e.name));case"GroupFilter":return o.jsx(Se,{name:e.name,state:e.filters,position:t,updateFilterValue:r,update:a},"filters ".concat(e.name));case"HeaderFilter":return o.jsx(ie,{name:e.name},"filters ".concat(e.name));case"SelectFilter":return o.jsx(ue,{name:e.name,values:e.values,state:null!=d?parseInt(d,10):e.SelectFilterDefault,position:t,group:n,updateFilterValue:r,update:a},"filters ".concat(e.name));case"SeparatorFilter":return o.jsx(Fe,{name:e.name},"filters ".concat(e.name));case"SortFilter":return o.jsx(ve,{name:e.name,values:e.values,state:null!==(u=d)&&void 0!==u?u:{ascending:null===(l=e.SortFilterDefault)||void 0===l?void 0:l.ascending,index:null===(c=e.SortFilterDefault)||void 0===c?void 0:c.index},position:t,group:n,updateFilterValue:r,update:a},"filters ".concat(e.name));case"TextFilter":return o.jsx(ye,{name:e.name,state:null!==(s=d)&&void 0!==s?s:e.TextFilterDefault,position:t,group:n,updateFilterValue:r,update:a},"filters ".concat(e.name));case"TriStateFilter":return o.jsx(be,{name:e.name,state:null!=d?d:e.TriStateFilterDefault,position:t,group:n,updateFilterValue:r,update:a},"filters ".concat(e.name));default:throw new Error('Unknown source filter "'.concat(e,'"'))}}))},"filters ".concat(n))}function we(e){var t=e.sourceFilter,r=e.updateFilterValue,a=e.resetFilterValue,i=e.setTriggerUpdate,u=e.update,l=j().t,c=n(h.useState(!1),2),s=c[0],d=c[1];return o.jsxs(o.Fragment,{children:[o.jsxs(ee,{onClick:function(){return d(!s)},variant:"extended",color:"primary",children:[o.jsx(R,{}),l("global.button.filter")]}),o.jsxs(H,{open:s,onClose:function(){return d(!1)},children:[o.jsxs(p,{sx:{display:"flex",p:2,pb:0},children:[o.jsx(b,{onClick:function(){a(0),d(!1)},children:l("global.button.reset")}),o.jsx(b,{sx:{marginLeft:"auto"},variant:"contained",onClick:function(){i(0),d(!1)},children:l("global.button.submit")})]}),o.jsx(p,{sx:{pb:2,mx:2},children:o.jsx(Ce,{sourceFilter:t,updateFilterValue:r,group:void 0,update:u})})]})]})}function ke(e){var t=j().t,n=e.mangas,r=e.isLoading,a=e.hasNextPage,i=e.loadMore,u=e.message,l=e.messageExtra,c=e.gridLayout,s=n,d=0===s.length&&n.length>0;return o.jsx(te,{mangas:s,isLoading:r,hasNextPage:a,loadMore:i,message:d?t("manga.error.label.no_matches"):u,messageExtra:l,gridLayout:c,inLibraryIndicator:!0,mode:"source"})}var Le=S("div")((function(e){var t=e.theme;return u({display:"flex",position:"fixed",top:"64px",width:"100%",zIndex:1,backgroundColor:t.palette.background.default},t.breakpoints.down("sm"),{top:"56px"})})),Oe=S(b)((function(){return{marginTop:"13px",marginBottom:"13px",marginLeft:"13px"}})),Ee=S(p,{shouldForwardProp:function(e){return"hasContent"!==e}})((function(e){var t=e.theme,n=e.hasContent;return u({marginTop:"calc(62.5px ".concat(n?"- 8px":"",")"),minHeight:"calc(100vh - 64px - 62.5px)",position:"relative"},t.breakpoints.down("sm"),{marginTop:"calc(62.5px - 8px ".concat(n?"- 8px":"",")"),minHeight:"calc(100vh - 64px - 64px - 62.5px)"})})),Ie=e("SourceContentType",function(e){return e[e.POPULAR=0]="POPULAR",e[e.LATEST=1]="LATEST",e[e.SEARCH=2]="SEARCH",e}(Ie||{})),Pe=u(u(u({},0,"manga.error.label.no_mangas_found"),1,"manga.error.label.no_mangas_found"),2,"manga.error.label.no_matches"),Ae=function(e,n,r,a,o,l){var c;switch(n){case 0:c=I.useGetSourcePopularMangas(e,o);break;case 1:c=I.useGetSourceLatestMangas(e,o);break;case 2:c=I.useSourceSearch(e,null!=r?r:"",a.map((function(e){var t=e.position,n=e.state,r=e.group;return void 0!==r?{position:r,groupChange:u({position:t},e.type,n)}:u({position:t},e.type,n)})),o);break;default:throw new Error('Unknown ContentType "'.concat(n,'"'))}var s=c[1],d=s.findLastIndex((function(e){var t;return!(null===(t=e.data)||void 0===t||!t.fetchSourceManga)})),f=s[d],p=s.slice(-1)[0].isLoading,g=!p,m=h.useMemo((function(){var e=[];return s.forEach((function(n,r){var a,o,i,u,c=null!==(a=null===(o=n.data)||void 0===o?void 0:o.fetchSourceManga.mangas)&&void 0!==a?a:[],d=(i=[].concat(t(e),t(c)),u=[],i.forEach((function(e){u.some((function(t){return t.id===e.id}))||u.push(e)})),u),f=c.filter((function(e){return!!d.find((function(t){return t.id===e.id}))})).filter((function(e){return!l||!e.inLibrary})),m=!p&&s.length===r+1;g=m&&!f.length&&!!c.length,e=[].concat(t(e),t(f))})),e}),[s,l]);return-1===d?[c[0],i(i({},c[1][c[1].length-1]),{},{filteredOutAllItemsOfFetchedPage:g})]:[c[0],i(i({},s[s.length-1]),{},{data:i(i({},f.data),{},{fetchSourceManga:i(i({},f.data.fetchSourceManga),{},{hasNextPage:!(s.length>d+1)&&f.data.fetchSourceManga.hasNextPage,mangas:m})}),filteredOutAllItemsOfFetchedPage:g})]}}}}))}();
