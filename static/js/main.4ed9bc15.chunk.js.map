{"version":3,"sources":["util/localStorage.tsx","util/client.tsx","components/context/NavbarContext.tsx","components/context/DarkTheme.tsx","components/util/CustomExtensionOutlinedIcon.tsx","components/navbar/navigation/DesktopSideBar.tsx","components/navbar/navigation/MobileBottomBar.tsx","components/navbar/DefaultNavBar.tsx","util/useLocalStorage.tsx","components/util/ListItemLink.tsx","screens/Settings.tsx","components/util/LoadingPlaceholder.tsx","screens/settings/About.tsx","screens/settings/Categories.tsx","components/util/Toast.tsx","screens/settings/Backup.tsx","components/util/EmptyView.tsx","components/util/TabPanel.tsx","components/util/ThreeStateCheckbox.tsx","components/context/LibraryOptionsContext.tsx","components/library/LibraryOptions.tsx","components/util/SpinnerImage.tsx","components/MangaCard.tsx","components/MangaGrid.tsx","components/library/LibraryMangaGrid.tsx","components/util/AppbarSearch.tsx","components/library/UpdateChecker.tsx","screens/Library.tsx","components/sourceConfiguration/TwoStatePreference.tsx","components/sourceConfiguration/ListPreference.tsx","components/sourceConfiguration/EditTextPreference.tsx","util/cloneObject.tsx","components/sourceConfiguration/MultiSelectListPreference.tsx","screens/SourceConfigure.tsx","components/navbar/action/CategorySelect.tsx","components/atoms/LoadingIconButton.tsx","components/MangaDetails.tsx","components/chapter/ChapterOptions.tsx","components/chapter/ChapterCard.tsx","components/chapter/util.tsx","components/chapter/ResumeFAB.tsx","components/library/useSubscription.ts","components/chapter/ChapterList.tsx","screens/Manga.tsx","components/source/SourceMangaGrid.tsx","components/source/filters/SelectFilter.tsx","components/source/filters/CheckBoxFilter.tsx","components/source/filters/HeaderFilter.tsx","components/source/filters/SeparatorFilter.tsx","components/source/filters/SortFilter.tsx","components/source/filters/TextFilter.tsx","components/source/filters/TriStateFilter.tsx","components/source/filters/GroupFilter.tsx","components/source/SourceOptions.tsx","components/source/GridLayouts.tsx","screens/SourceMangas.tsx","components/reader/Page.tsx","components/reader/pager/HorizontalPager.tsx","components/reader/PageNumber.tsx","components/reader/pager/PagedPager.tsx","components/reader/DoublePage.tsx","components/reader/pager/DoublePagedPager.tsx","components/reader/pager/VerticalPager.tsx","components/navbar/ReaderNavBar.tsx","screens/Reader.tsx","screens/Updates.tsx","screens/DownloadQueue.tsx","util/language.tsx","components/navbar/action/LangSelect.tsx","components/SourceCard.tsx","screens/Sources.tsx","components/ExtensionCard.tsx","screens/Extensions.tsx","screens/Browse.tsx","components/navbar/NavBarContextProvider.tsx","components/library/LibraryOptionsProvider.tsx","screens/SearchAll.tsx","App.tsx","index.tsx"],"names":["inferredPort","getItem","key","defaultValue","item","window","localStorage","JSON","parse","setItem","stringify","value","location","hostname","port","protocol","baseURL","storage","client","axios","create","interceptors","request","use","config","data","FormData","Object","assign","headers","fetcher","path","a","get","res","status","Error","statusText","NavBarContext","React","createContext","title","setTitle","action","setAction","override","setOverride","DarkTheme","darkTheme","setDarkTheme","icon","createSvgIcon","d","SideNavBarContainer","styled","theme","height","width","spacing","backgroundColor","palette","mode","grey","position","top","left","paddingTop","display","flexDirection","DesktopSideBar","navBarItems","useLocation","useTheme","iconFor","IconComponent","SelectedIconComponent","pathname","sx","color","fontSize","map","to","style","textDecoration","ListItem","disableRipple","button","ListItemIcon","minWidth","Tooltip","placement","BottomNavContainer","bottom","justifyContent","alignItems","zIndex","Link","RRDLink","flex","MobileBottomBar","padding","Box","navbarItems","CollectionsBookmarkIcon","CollectionsOutlinedBookmarkIcon","show","NewReleasesIcon","NewReleasesOutlinedIcon","ExtensionIcon","ExtensionOutlinedIcon","ExploreIcon","ExploreOutlinedIcon","GetAppIcon","GetAppOutlinedIcon","SettingsIcon","DefaultNavBar","useContext","history","useHistory","isMobileWidth","useMediaQuery","breakpoints","down","isMainRoute","some","navbar","filter","it","flexGrow","AppBar","Toolbar","IconButton","edge","marginRight","onClick","length","push","goBack","size","Typography","variant","useLocalStorage","initialState","Function","useState","storedValue","setStoredValue","useCallback","prevValue","valueToStore","ListItemLink","props","directLink","component","href","Settings","NavbarContext","useEffect","serverAddress","setServerAddress","showNsfw","setShowNsfw","useCache","setUseCache","dialogOpen","setDialogOpen","dialogValue","setDialogValue","dialogOpenItemWidth","setDialogOpenItemWidth","ItemWidth","setItemWidth","DialogItemWidth","setDialogItemWidth","handleDialogCancel","handleDialogCancelItemWidth","List","ListItemText","primary","ListItemSecondaryAction","Switch","checked","onChange","ListItemButton","secondary","Dialog","open","onClose","DialogContent","DialogContentText","TextField","autoFocus","margin","id","label","type","fullWidth","placeholder","e","target","DialogActions","Button","DialogTitle","parseInt","Slider","step","min","max","event","newValue","LoadingPlaceholder","children","shouldRender","componentProps","condition","undefined","createElement","CircularProgress","thickness","About","about","setAbout","then","response","name","buildType","version","revision","Date","buildTime","toUTCString","github","discord","Categories","categories","setCategories","categoryToEdit","setCategoryToEdit","dialogName","setDialogName","dialogDefault","setDialogDefault","updateTriggerHolder","setUpdateTriggerHolder","triggerUpdate","shift","onDragEnd","result","destination","list","from","formData","append","patch","finally","Array","splice","removed","categoryReorder","source","index","droppableId","provided","ref","innerRef","draggableId","toString","snapshot","ContainerProps","draggableProps","dragHandleProps","isDragging","draggableStyle","background","default","handleEditDialogOpen","category","delete","deleteCategory","Fab","right","FormControlLabel","control","Checkbox","post","Transition","Slide","direction","Toast","message","severity","setOpen","handleClose","Snackbar","autoHideDuration","TransitionComponent","elevation","makeToast","Math","floor","random","container","document","body","appendChild","ReactDOM","render","setTimeout","querySelector","unmountComponentAtNode","removeChild","removeToast","Backup","defaults","submitBackup","file","toLowerCase","endsWith","catch","dropHandler","preventDefault","fromEvent","files","dragOverHandler","addEventListener","input","getElementById","evt","removeEventListener","click","ERROR_FACES","getRandomErrorFace","randIndex","EmptyView","messageExtra","transform","textAlign","gutterBottom","TabPanel","currentIndex","role","hidden","defaultProps","CheckState","checkedToState","SELECTED","INTERMEDIATE","UNSELECTED","stateTransition","state","ThreeStateCheckbox","localChecked","setLocalChecked","CancelBox","indeterminate","indeterminateIcon","stateToChecked","currentTarget","className","DefaultLibraryOptions","showDownloadBadge","showUnreadBadge","gridLayout","SourcegridLayout","downloaded","sortDesc","sorts","unread","LibraryOptionsContext","options","setOption","setOptions","active","activeSort","useLibraryOptionsContext","filtersTab","currentTab","Stack","change","sortsTab","disablePadding","sortDes","dispalyTab","setContextOptions","prev","setGridContextOptions","Radio","Options","setCurrentTab","Tabs","newTab","indicatorColor","textColor","Tab","LibraryOptions","filtersOpen","setFiltersOpen","Drawer","anchor","PaperProps","maxWidth","marginLeft","SpinnerImage","src","alt","onImageLoad","imgRef","spinnerStyle","imgStyle","imageSrc","setImagsrc","img","Image","onload","onerror","BottomGradient","BottomGradientDoubledDown","MangaTitle","textShadow","BadgeContainer","borderRadius","overflow","paddingInline","truncateText","str","maxLength","trimmedString","substr","MangaCard","forwardRef","manga","thumbnailUrl","downloadCount","unreadCount","inLibrary","dimensions","colomns","round","Grid","xs","sm","md","lg","Card","aspectRatio","CardActionArea","objectFit","placeItems","CardContent","transition","Avatar","imageRendering","MangaGrid","mapped","mangas","isLoading","hasNextPage","lastPageNum","setLastPageNum","horisontal","noFaces","lastManga","useRef","scrollHandler","current","rect","getBoundingClientRect","y","innerHeight","movementTimer","setDimensions","gridRef","TestDimensions","offsetWidth","useLayoutEffect","clearInterval","idx","overflowX","flexWrap","LibraryMangaGrid","useQueryParam","StringParam","query","filteredManga","downloadedFilter","unreadFilter","includes","queryFilter","filterManga","DoneManga","sort","b","c","toReadSort","toSortAlph","toSortID","sortManga","ele","showFilteredOutMessage","AppbarSearch","autoOpen","setQuery","searchOpen","setSearchOpen","inputRef","openSearch","focus","handleSearchShortcut","code","ctrlKey","Input","onBlur","endAdornment","Progress","progress","baseWebsocketUrl","replace","UpdateChecker","loading","setLoading","setProgress","wsc","WebSocket","onmessage","statusMap","COMPLETE","RUNNING","PENDING","running","currentProgress","Number","isNaN","close","disabled","Library","useSWR","tabsData","tabsError","error","tabs","NumberParam","tabSearchParam","setTabSearchParam","activeTab","find","t","order","isPaused","mangaData","mangaError","scrollableTabs","innerWidth","handleTabChange","centered","scrollButtons","allowScrollButtonsMobile","tab","getTwoStateType","TwoSatePreference","summary","currentValue","updateValue","internalCurrentValue","setInternalCurrentValue","CheckBoxPreference","SwitchPreferenceCompat","ListDialog","valueProp","setValue","radioGroupRef","maxHeight","TransitionProps","onEntering","dividers","RadioGroup","option","ListPreference","entryValues","entries","findEntryOf","indexOf","findEntryValueOf","EditTextPreference","dialogTitle","dialogMessage","cloneObject","obj","selectedValuesProp","selectedValues","values","setSelectedValues","FormGroup","selectedValue","hasEntry","selectedValuesClone","handleChange","MultiSelectListPreference","SourceConfigure","sourcePreferences","setSourcePreferences","sourceId","useParams","convertToString","defaultValueType","getPrefComponent","CategorySelect","mangaId","categoryInfos","setCategoryInfos","tmpCategoryInfos","selected","forEach","categoryId","categoryInfo","LoadingIconButton","iLoading","rest","sLoading","getValueOrUnknown","val","MangaDetails","onRefresh","refreshing","setInLibrary","categoryDialogOpen","setCategoryDialogOpen","classes","makeStyles","root","up","alignSelf","overflowY","leftRight","leftSide","rightSide","fontWeight","buttons","paddingLeft","paddingRight","description","marginTop","marginBottom","textJustify","genre","border","useStyles","handleButtonClick","author","artist","displayName","realUrl","g","SortTab","ChapterOptions","optionsDispatch","tabNum","setTabNum","filterOptions","filterType","filterValue","minHeight","bookmarked","py","sortBy","reverse","showChapterNumber","ChapterCard","chapter","triggerChaptersUpdate","downloadStatusString","dateStr","uploadDate","toLocaleDateString","anchorEl","setAnchorEl","sendChange","readChapterColor","cursor","read","text","dark","chapterNumber","scanlator","stopPropagation","Menu","keepMounted","Boolean","MenuItem","defaultChapterOptions","chapterOptionsReducer","actions","ResumeFab","lastPageRead","PlayArrow","useSubscription","callback","setState","CustomVirtuoso","Virtuoso","listStyle","ChapterList","chaptersData","noChaptersFound","chapters","useMemo","firstUnreadChapter","setFirstUnreadChapter","filteredChapters","setFilteredChapters","reducer","defaultState","useReducer","newState","useReducerLocalStorage","queue","downloadStatusStringFor","rtn","q","chapterIndex","toFixed","filtered","chp","isChapterRead","chapterDownload","downloadFilter","chapterBookmarked","bookmarkdFilter","Sorted","fetchedAt","filterAndSortChapters","findFirstUnreadChapter","px","mt","totalCount","itemContent","useWindowScroll","overscan","Manga","autofetchedRef","mutateManga","mutate","mutateChapters","fetchingOnline","setFetchingOnline","fetchOnline","Promise","all","revalidate","age","chaptersAge","SourceMangaGrid","SelectFilter","updateFilterValue","update","group","setval","rett","FormControl","InputLabel","Select","vall","upd","autoWidth","noSelect","displayname","hasSelect","CheckBoxFilter","HeaderFilter","SeperatorFilter","SortFilter","ret","ExpandLess","ExpandMore","Collapse","in","ascending","tmp","TextFilter","typingTimer","Search","setsearch","clearTimeout","el","doneTyping","TriStateFilter","check","GroupFilter","sourceFilter","checkif","displayValues","SourceOptions","resetFilterValue","setTriggerUpdate","setSearch","FilterOptions","setFilterOptions","SourceGridLayout","ml","MenuListProps","SourceMangas","isConfigurable","setIsConfigurable","setMangas","setHasNextPage","fetched","setFetched","setquery","reset","setReset","setUpdate","Data","SetData","Init","setInit","Noreset","setNoreset","makeFilters","rep","delayDebounceFn","sourceType","popular","mangaList","Page","setCurPage","settings","handleVerticalScroll","handleHorizontalScroll","readerType","handleResize","pointerEvents","imageStyle","HorizontalPager","pages","curPage","prevChapter","nextChapter","selfRef","pagesRef","nextPage","scrollIntoView","inline","page","loadNextonEnding","prevPage","mouseXPos","dragScreen","scrollBy","pageX","dragControl","removeDragControl","clickControl","clientX","handleLoadNextonEnding","scrollX","scrollWidth","userSelect","PageNumber","pageCount","showPageNumber","staticNav","PagedReader","goLeft","goRight","keyboardControl","DoublePage","image1src","image2src","DoublePagedPager","pagesDisplayed","pageLoaded","fill","nextCurPage","i","imgElem","pagesToGoBack","retryDisplay","setInterval","setPagesToDisplay","onLoad","VerticalReader","slice","scrollY","offsetHeight","Root","flexShrink","Navigation","ChapterNavigation","gridTemplateColumns","gridTemplateAreas","gridColumnGap","textTransform","OpenDrawerButton","defaultReaderSettings","continuesPageGap","ReaderNavBar","setSettings","drawerOpen","setDrawerOpen","hideOpenButton","setHideOpenButton","prevScrollPos","setPrevScrollPos","settingsCollapseOpen","setSettingsCollapseOpen","setSettingValue","handleScroll","currentScrollPos","pageYOffset","abs","rootEl","mainContainer","timeout","appear","mountOnEnter","unmountOnExit","mr","ContainerComponent","disableFocusRipple","p","gridArea","startIcon","chapterCount","endIcon","Zoom","Fade","initialChapter","Reader","setManga","setChapter","settingsClone","defualtSettings","shouldUpdateSettings","keys","keyOf","formDataRead","n","ReaderComponent","VerticalPager","PagedPager","getReaderComponent","isTheSameDay","first","second","getDate","getMonth","getFullYear","groupByDate","updates","groups","globalIdx","date","today","yesterday","setDate","getDateString","epoch","setUTCSeconds","epochToDate","initialQueue","Updates","updateEntries","setUpdateEntries","setWsClient","setQueueState","fetchedHasNextPage","lastEntry","dateGroup","my","downloadChapter","DownloadQueue","queueState","toggleQueueStatus","deleteChapterQueue","callDeleteServer","ISOLanguages","nativeName","langCodeToName","whereToCut","proccessedCode","toLocaleLowerCase","substring","langSortCmp","aLang","bLang","LangSelect","firstList","shownLangs","setShownLangs","allLangs","forcedLangs","mShownLangs","setMShownLangs","lang","clone","MobileWidthButtons","WiderWidthButtons","SourceCard","iconUrl","supportsLatest","isNsfw","redirectTo","sourceToLangList","sources","groupByLang","Sources","setSources","forcedLang","hasLang","shownLangsCopy","Fragment","ExtensionCard","extension","versionName","installed","hasUpdate","obsolete","pkgName","notifyInstall","installedState","setInstalledState","langPress","toUpperCase","uninstall","reload","MangaExtensions","isMobile","extensionsRaw","setExtensionsRaw","toasts","setToasts","makeToaster","submitExternalExtension","changeHandler","ext","nsfwFilter","combinedShownLangs","flatRenderItems","extensions","sortedExtenions","langExt","concat","groupExtensions","flat","paddingBottom","apkName","Browse","NavBarProvider","Provider","LibraryOptionsContextProvider","opts","SearchAll","FetchedSources","setFetchedSources","ResetUI","setResetUI","limit","PQueue","concurrency","elem","add","tmp2","doIT","af","bf","al","bl","App","darkThemeContext","createTheme","components","MuiCssBaseline","styleOverrides","StyledEngineProvider","injectFirst","ThemeProvider","ReactRouterRoute","Route","CssBaseline","Container","disableGutters","mb","exact","match","params","StrictMode"],"mappings":"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","file":"static/js/main.4ed9bc15.chunk.js","sourcesContent":["/*\n * Copyright (C) Contributors to the Suwayomi project\n *\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at https://mozilla.org/MPL/2.0/. */\n\nfunction getItem<T>(key: string, defaultValue: T) : T {\n    try {\n        const item = window.localStorage.getItem(key);\n\n        if (item !== null) {\n            return JSON.parse(item);\n        }\n\n        window.localStorage.setItem(key, JSON.stringify(defaultValue));\n\n        /* eslint-disable no-empty */\n    } finally { }\n    return defaultValue;\n}\n\nfunction setItem<T>(key: string, value: T): void {\n    try {\n        window.localStorage.setItem(key, JSON.stringify(value));\n\n        // eslint-disable-next-line no-empty\n    } finally { }\n}\n\nexport default { getItem, setItem };\n","/*\n * Copyright (C) Contributors to the Suwayomi project\n *\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at https://mozilla.org/MPL/2.0/. */\n\nimport axios from 'axios';\nimport storage from './localStorage';\n\nconst { hostname, port, protocol } = window.location;\n\n// if port is 3000 it's probably running from webpack devlopment server\nlet inferredPort;\nif (port === '3000') { inferredPort = '4567'; } else { inferredPort = port; }\n\nconst baseURL = storage.getItem('serverBaseURL', `${protocol}//${hostname}:${inferredPort}`);\n\nconst client = axios.create({\n    // baseURL must not have traling slash\n    baseURL,\n});\n\nclient.interceptors.request.use((config) => {\n    if (config.data instanceof FormData) {\n        Object.assign(config.headers, { 'Content-Type': 'multipart/form-data' });\n    }\n    return config;\n});\n\nexport default client;\n\nexport async function fetcher<T = any>(path: string) {\n    const res = await client.get(path);\n    if (res.status !== 200) {\n        throw new Error(res.statusText);\n    }\n    if (res.headers['content-type'] !== 'application/json') {\n        throw new Error('Response is not json');\n    }\n    return res.data as T;\n}\n","/*\n * Copyright (C) Contributors to the Suwayomi project\n *\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at https://mozilla.org/MPL/2.0/. */\n\nimport React from 'react';\n\ntype ContextType = {\n    // AppBar title\n    title: string\n    setTitle: React.Dispatch<React.SetStateAction<string>>\n\n    // AppBar action buttons\n    action: any\n    setAction: React.Dispatch<React.SetStateAction<any>>\n\n    // Allow default navbar to be overrided\n    override: INavbarOverride\n    setOverride: React.Dispatch<React.SetStateAction<INavbarOverride>>\n};\n\nconst NavBarContext = React.createContext<ContextType>({\n    title: 'Tachidesk',\n    setTitle: ():void => {},\n    action: <div />,\n    setAction: ():void => {},\n    override: { status: false, value: <div /> },\n    setOverride: ():void => {},\n});\n\nexport default NavBarContext;\n","/*\n * Copyright (C) Contributors to the Suwayomi project\n *\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at https://mozilla.org/MPL/2.0/. */\n\nimport React from 'react';\n\ntype ContextType = {\n    darkTheme: boolean\n    setDarkTheme: React.Dispatch<React.SetStateAction<boolean>>\n};\n\nconst DarkTheme = React.createContext<ContextType>({\n    darkTheme: true,\n    setDarkTheme: ():void => {},\n});\n\nexport default DarkTheme;\n","import React from 'react';\nimport createSvgIcon from '@mui/material/utils/createSvgIcon';\n\nconst d = 'M 11 1 C 9.3550302 1 8 2.3550302 8 4 L 4 4 C 2.9069372 4 2 4.9069372 2 6 L 2 12 L 4 12 C 4.5650302 12 5 12.43497 5 13 C 5 13.56503 4.5650302 14 4 14 L 2 14 L 2 20 C 2 21.093063 2.9069372 22 4 22 L 10 22 L 10 20 C 10 19.43497 10.43497 19 11 19 C 11.56503 19 12 19.43497 12 20 L 12 22 L 18 22 C 19.093063 22 20 21.093063 20 20 L 20 16 C 21.64497 16 23 14.64497 23 13 C 23 11.35503 21.64497 10 20 10 L 20 6 C 20 4.9069372 19.093063 4 18 4 L 14 4 C 14 2.3550302 12.64497 1 11 1 z M 11 3 C 11.56503 3 12 3.4349698 12 4 L 12 6 L 18 6 L 18 12 L 20 12 C 20.56503 12 21 12.43497 21 13 C 21 13.56503 20.56503 14 20 14 L 18 14 L 18 20 L 14 20 C 14 18.35503 12.64497 17 11 17 C 9.3550302 17 8 18.35503 8 20 L 4 20 L 4 16 C 5.6449698 16 7 14.64497 7 13 C 7 11.35503 5.6449698 10 4 10 L 4 6 L 10 6 L 10 4 C 10 3.4349698 10.43497 3 11 3 z';\n\nconst icon = createSvgIcon(<path d={d} />, 'CustomExtensionOutlined');\n\nexport default icon;\n","/*\n * Copyright (C) Contributors to the Suwayomi project\n *\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at https://mozilla.org/MPL/2.0/. */\n\nimport React from 'react';\nimport { ListItem, ListItemIcon, Tooltip } from '@mui/material';\nimport { Link, useLocation } from 'react-router-dom';\nimport { styled } from '@mui/system';\nimport { useTheme } from '@mui/material/styles';\n\nconst SideNavBarContainer = styled('div')(({ theme }) => ({\n    height: '100vh',\n    width: theme.spacing(8),\n    backgroundColor: theme.palette.mode === 'light' ? theme.palette.grey[100] : theme.palette.grey[900],\n    position: 'fixed',\n    top: 0,\n    left: 0,\n    paddingTop: theme.spacing(8),\n    display: 'flex',\n    flexDirection: 'column',\n}));\n\ninterface IProps {\n    navBarItems: Array<NavbarItem>\n}\n\nexport default function DesktopSideBar({ navBarItems }: IProps) {\n    const location = useLocation();\n    const theme = useTheme();\n\n    const iconFor = (path: string, IconComponent: any, SelectedIconComponent: any) => {\n        if (location.pathname === path) return <SelectedIconComponent sx={{ color: 'primary.main' }} fontSize=\"large\" />;\n        return <IconComponent sx={{ color: (theme.palette.mode === 'dark') ? 'grey.A400' : 'grey.600' }} fontSize=\"large\" />;\n    };\n\n    return (\n        <SideNavBarContainer>\n            {\n                // eslint-disable-next-line react/destructuring-assignment\n                navBarItems.map(({\n                    path, title, IconComponent, SelectedIconComponent,\n                }: NavbarItem) => (\n                    <Link to={path} style={{ color: 'inherit', textDecoration: 'none' }} key={path}>\n                        <ListItem disableRipple button key={title}>\n                            <ListItemIcon sx={{ minWidth: '0' }}>\n                                <Tooltip placement=\"right\" title={title}>\n                                    {iconFor(path, IconComponent, SelectedIconComponent)}\n                                </Tooltip>\n                            </ListItemIcon>\n                        </ListItem>\n                    </Link>\n                ))\n            }\n        </SideNavBarContainer>\n    );\n}\n","/*\n * Copyright (C) Contributors to the Suwayomi project\n *\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at https://mozilla.org/MPL/2.0/. */\n\nimport React from 'react';\nimport { ListItem } from '@mui/material';\nimport { styled, Box } from '@mui/system';\nimport { Link as RRDLink, useLocation } from 'react-router-dom';\nimport { useTheme } from '@mui/material/styles';\n\nconst BottomNavContainer = styled('div')(({ theme }) => ({\n    bottom: 0,\n    left: 0,\n    height: theme.spacing(7),\n    width: '100vw',\n    backgroundColor: theme.palette.mode === 'light' ? theme.palette.grey[100] : theme.palette.grey[900],\n    position: 'fixed',\n    display: 'flex',\n    flexDirection: 'row',\n    justifyContent: 'space-evenly',\n    alignItems: 'center',\n    // For Some reason the theme is throwing and error when accessing the Zindex object,\n    // This is the zIndex of the appBar in the default theme\n    zIndex: 1100,\n}));\n\nconst Link = styled(RRDLink)({\n    textDecoration: 'none',\n    flex: 1,\n});\n\ninterface IProps {\n    navBarItems: Array<NavbarItem>\n}\n\nexport default function MobileBottomBar({ navBarItems }: IProps) {\n    const location = useLocation();\n    const theme = useTheme();\n\n    const iconFor = (path: string, IconComponent: any, SelectedIconComponent: any) => {\n        if (location.pathname === path) return <SelectedIconComponent sx={{ color: 'primary.main' }} fontSize=\"medium\" />;\n        return <IconComponent sx={{ color: (theme.palette.mode === 'dark') ? 'grey.A400' : 'grey.600' }} fontSize=\"medium\" />;\n    };\n\n    return (\n        <BottomNavContainer>\n            {\n                navBarItems.map((\n                    {\n                        path, title, IconComponent, SelectedIconComponent,\n                    }: NavbarItem,\n                ) => (\n                    <Link to={path} key={path}>\n                        <ListItem disableRipple button sx={{ justifyContent: 'center', padding: '8px' }} key={title}>\n                            <Box\n                                display=\"flex\"\n                                flexDirection=\"column\"\n                                alignItems=\"center\"\n                            >\n                                {iconFor(path, IconComponent, SelectedIconComponent)}\n                                <Box sx={{\n                                    fontSize: '0.65rem',\n                                    // eslint-disable-next-line no-nested-ternary\n                                    color: location.pathname === path\n                                        ? 'primary.main'\n                                        : ((theme.palette.mode === 'dark')\n                                            ? 'grey.A400'\n                                            : 'grey.600'),\n                                }}\n                                >\n                                    {title}\n                                </Box>\n                            </Box>\n                        </ListItem>\n                    </Link>\n                ))\n            }\n        </BottomNavContainer>\n    );\n}\n","/*\n * Copyright (C) Contributors to the Suwayomi project\n *\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at https://mozilla.org/MPL/2.0/. */\n\nimport React, { useContext } from 'react';\nimport AppBar from '@mui/material/AppBar';\nimport Toolbar from '@mui/material/Toolbar';\nimport Typography from '@mui/material/Typography';\nimport IconButton from '@mui/material/IconButton';\nimport { useMediaQuery } from '@mui/material';\nimport { useTheme } from '@mui/material/styles';\nimport CollectionsBookmarkIcon from '@mui/icons-material/CollectionsBookmark';\nimport CollectionsOutlinedBookmarkIcon from '@mui/icons-material/CollectionsBookmarkOutlined';\nimport NewReleasesIcon from '@mui/icons-material/NewReleases';\nimport NewReleasesOutlinedIcon from '@mui/icons-material/NewReleasesOutlined';\nimport ExploreIcon from '@mui/icons-material/Explore';\nimport ExploreOutlinedIcon from '@mui/icons-material/ExploreOutlined';\nimport ExtensionIcon from '@mui/icons-material/Extension';\nimport GetAppIcon from '@mui/icons-material/GetApp';\nimport GetAppOutlinedIcon from '@mui/icons-material/GetAppOutlined';\nimport SettingsIcon from '@mui/icons-material/Settings';\nimport ArrowBack from '@mui/icons-material/ArrowBack';\nimport { useHistory } from 'react-router-dom';\nimport NavBarContext from 'components/context/NavbarContext';\nimport DarkTheme from 'components/context/DarkTheme';\nimport ExtensionOutlinedIcon from 'components/util/CustomExtensionOutlinedIcon';\nimport { Box } from '@mui/system';\nimport DesktopSideBar from './navigation/DesktopSideBar';\nimport MobileBottomBar from './navigation/MobileBottomBar';\n\nconst navbarItems: Array<NavbarItem> = [\n    {\n        path: '/library',\n        title: 'Library',\n        SelectedIconComponent: CollectionsBookmarkIcon,\n        IconComponent: CollectionsOutlinedBookmarkIcon,\n        show: 'both',\n    }, {\n        path: '/updates',\n        title: 'Updates',\n        SelectedIconComponent: NewReleasesIcon,\n        IconComponent: NewReleasesOutlinedIcon,\n        show: 'both',\n    }, {\n        path: '/extensions',\n        title: 'Extensions',\n        SelectedIconComponent: ExtensionIcon,\n        IconComponent: ExtensionOutlinedIcon,\n        show: 'desktop',\n    }, {\n        path: '/sources',\n        title: 'Sources',\n        SelectedIconComponent: ExploreIcon,\n        IconComponent: ExploreOutlinedIcon,\n        show: 'desktop',\n    }, {\n        path: '/browse',\n        title: 'Browse',\n        SelectedIconComponent: ExploreIcon,\n        IconComponent: ExploreOutlinedIcon,\n        show: 'mobile',\n    }, {\n        path: '/downloads',\n        title: 'Downloads',\n        SelectedIconComponent: GetAppIcon,\n        IconComponent: GetAppOutlinedIcon,\n        show: 'both',\n    }, {\n        path: '/settings',\n        title: 'Settings',\n        SelectedIconComponent: SettingsIcon,\n        IconComponent: SettingsIcon,\n        show: 'both',\n    },\n];\n\nexport default function DefaultNavBar() {\n    const { title, action, override } = useContext(NavBarContext);\n    const { darkTheme } = useContext(DarkTheme);\n\n    const theme = useTheme();\n    const history = useHistory();\n\n    const isMobileWidth = useMediaQuery(theme.breakpoints.down('sm'));\n    const isMainRoute = navbarItems.some(({ path }) => path === history.location.pathname);\n\n    // Allow default navbar to be overrided\n    if (override.status) return override.value;\n\n    let navbar = <></>;\n    if (isMobileWidth) {\n        if (isMainRoute) {\n            navbar = <MobileBottomBar navBarItems={navbarItems.filter((it) => it.show !== 'desktop')} />;\n        }\n    } else {\n        navbar = <DesktopSideBar navBarItems={navbarItems.filter((it) => it.show !== 'mobile')} />;\n    }\n\n    return (\n        <Box sx={{ flexGrow: 1 }}>\n            <AppBar position=\"fixed\" color={darkTheme ? 'default' : 'primary'}>\n                <Toolbar>\n                    {\n                        !navbarItems.some(({ path }) => path === history.location.pathname)\n                            && (\n                                <IconButton\n                                    edge=\"start\"\n                                    sx={{ marginRight: theme.spacing(2) }}\n                                    color=\"inherit\"\n                                    aria-label=\"menu\"\n                                    disableRipple\n                                    // when page is opened in new tab backbutton will\n                                    // take you to the library\n                                    onClick={() => (history.length === 1 ? history.push('/library') : history.goBack())}\n                                    size=\"large\"\n                                >\n                                    <ArrowBack />\n                                </IconButton>\n                            )\n                    }\n                    <Typography variant={isMobileWidth ? 'h6' : 'h5'} sx={{ flexGrow: 1 }}>\n                        {title}\n                    </Typography>\n                    {action}\n                </Toolbar>\n            </AppBar>\n            {navbar}\n        </Box>\n    );\n}\n","/*\n * Copyright (C) Contributors to the Suwayomi project\n *\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at https://mozilla.org/MPL/2.0/. */\n\nimport React, {\n    useState,\n    Dispatch,\n    SetStateAction,\n    useReducer,\n    Reducer,\n    useCallback,\n} from 'react';\nimport storage from './localStorage';\n\n// eslint-disable-next-line max-len\nexport default function useLocalStorage<T>(\n    key: string,\n    defaultValue: T | (() => T),\n): [T, Dispatch<SetStateAction<T>>] {\n    const initialState = defaultValue instanceof Function ? defaultValue() : defaultValue;\n    const [storedValue, setStoredValue] = useState<T>(\n        storage.getItem(key, initialState),\n    );\n\n    const setValue = useCallback<React.Dispatch<React.SetStateAction<T>>>(\n        ((value) => {\n            setStoredValue((prevValue) => {\n                // Allow value to be a function so we have same API as useState\n                const valueToStore = value instanceof Function ? value(prevValue) : value;\n                storage.setItem(key, valueToStore);\n                return valueToStore;\n            });\n        }), [key],\n    );\n\n    return [storedValue, setValue];\n}\n\nexport function useReducerLocalStorage<S, A>(\n    reducer: Reducer<S, A>,\n    key: string,\n    defaultState: S | (() => S),\n) {\n    const [storedValue, setValue] = useLocalStorage(key, defaultState);\n    return useReducer((state: S, action: A): S => {\n        const newState = reducer(state, action);\n        setValue(newState);\n        return newState;\n    }, storedValue);\n}\n","/*\n * Copyright (C) Contributors to the Suwayomi project\n *\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at https://mozilla.org/MPL/2.0/. */\n\nimport React from 'react';\nimport ListItem, { ListItemProps } from '@mui/material/ListItem';\nimport { Link } from 'react-router-dom';\n\nexport default function ListItemLink(props: ListItemProps<Link, { directLink?: boolean }>) {\n    const { directLink, to } = props;\n    if (directLink) {\n        // eslint-disable-next-line react/jsx-props-no-spreading\n        return <ListItem button component=\"a\" href={to} {...props} />;\n    }\n\n    // eslint-disable-next-line react/jsx-props-no-spreading\n    return <ListItem button component={Link} {...props} />;\n}\n","/*\n * Copyright (C) Contributors to the Suwayomi project\n *\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at https://mozilla.org/MPL/2.0/. */\n\nimport React, { useContext, useEffect, useState } from 'react';\nimport List from '@mui/material/List';\nimport ListAltIcon from '@mui/icons-material/ListAlt';\nimport BackupIcon from '@mui/icons-material/Backup';\nimport Brightness6Icon from '@mui/icons-material/Brightness6';\nimport DnsIcon from '@mui/icons-material/Dns';\nimport EditIcon from '@mui/icons-material/Edit';\nimport InfoIcon from '@mui/icons-material/Info';\nimport CachedIcon from '@mui/icons-material/Cached';\nimport ListItem from '@mui/material/ListItem';\nimport ListItemIcon from '@mui/material/ListItemIcon';\nimport ListItemText from '@mui/material/ListItemText';\nimport ListItemSecondaryAction from '@mui/material/ListItemSecondaryAction';\nimport Switch from '@mui/material/Switch';\nimport Button from '@mui/material/Button';\nimport IconButton from '@mui/material/IconButton';\nimport Dialog from '@mui/material/Dialog';\nimport DialogActions from '@mui/material/DialogActions';\nimport DialogContent from '@mui/material/DialogContent';\nimport DialogContentText from '@mui/material/DialogContentText';\nimport TextField from '@mui/material/TextField';\nimport FavoriteIcon from '@mui/icons-material/Favorite';\nimport Slider from '@mui/material/Slider';\nimport { DialogTitle, ListItemButton } from '@mui/material';\nimport ViewModuleIcon from '@mui/icons-material/ViewModule';\nimport NavbarContext from '../components/context/NavbarContext';\nimport DarkTheme from '../components/context/DarkTheme';\nimport useLocalStorage from '../util/useLocalStorage';\nimport ListItemLink from '../components/util/ListItemLink';\n\nexport default function Settings() {\n    const { setTitle, setAction } = useContext(NavbarContext);\n    useEffect(() => { setTitle('Settings'); setAction(<></>); }, []);\n\n    const { darkTheme, setDarkTheme } = useContext(DarkTheme);\n    const [serverAddress, setServerAddress] = useLocalStorage<String>('serverBaseURL', '');\n    const [showNsfw, setShowNsfw] = useLocalStorage<boolean>('showNsfw', true);\n    const [useCache, setUseCache] = useLocalStorage<boolean>('useCache', true);\n    const [dialogOpen, setDialogOpen] = useState(false);\n    const [dialogValue, setDialogValue] = useState(serverAddress);\n\n    const [dialogOpenItemWidth, setDialogOpenItemWidth] = useState(false);\n    const [ItemWidth, setItemWidth] = useLocalStorage<number>('ItemWidth', 300);\n    const [DialogItemWidth, setDialogItemWidth] = useState(ItemWidth);\n\n    const handleDialogOpen = () => {\n        setDialogValue(serverAddress);\n        setDialogOpen(true);\n    };\n\n    const handleDialogCancel = () => {\n        setDialogOpen(false);\n    };\n\n    const handleDialogSubmit = () => {\n        setDialogOpen(false);\n        setServerAddress(dialogValue);\n    };\n\n    const handleDialogOpenItemWidth = () => {\n        setDialogItemWidth(ItemWidth);\n        setDialogOpenItemWidth(true);\n    };\n\n    const handleDialogCancelItemWidth = () => {\n        setDialogOpenItemWidth(false);\n    };\n\n    const handleDialogSubmitItemWidth = () => {\n        setDialogOpenItemWidth(false);\n        setItemWidth(DialogItemWidth);\n    };\n\n    const handleDialogResetItemWidth = () => {\n        setDialogOpenItemWidth(false);\n        setItemWidth(300);\n    };\n\n    const handleChange = (event: Event, newValue: number | number[]) => {\n        setDialogItemWidth(newValue as number);\n    };\n\n    return (\n        <>\n            <List sx={{ padding: 0 }}>\n                <ListItemLink to=\"/settings/categories\">\n                    <ListItemIcon>\n                        <ListAltIcon />\n                    </ListItemIcon>\n                    <ListItemText primary=\"Categories\" />\n                </ListItemLink>\n                <ListItemLink to=\"/settings/backup\">\n                    <ListItemIcon>\n                        <BackupIcon />\n                    </ListItemIcon>\n                    <ListItemText primary=\"Backup\" />\n                </ListItemLink>\n                <ListItem>\n                    <ListItemIcon>\n                        <Brightness6Icon />\n                    </ListItemIcon>\n                    <ListItemText primary=\"Dark Theme\" />\n                    <ListItemSecondaryAction>\n                        <Switch\n                            edge=\"end\"\n                            checked={darkTheme}\n                            onChange={() => setDarkTheme(!darkTheme)}\n                        />\n                    </ListItemSecondaryAction>\n                </ListItem>\n                <ListItemButton>\n                    <ListItemIcon>\n                        <ViewModuleIcon />\n                    </ListItemIcon>\n                    <ListItemText\n                        primary=\"Manga Item width\"\n                        secondary={`px:${ItemWidth}`}\n                        onClick={() => {\n                            handleDialogOpenItemWidth();\n                        }}\n                    />\n                </ListItemButton>\n                <ListItem>\n                    <ListItemIcon>\n                        <FavoriteIcon />\n                    </ListItemIcon>\n                    <ListItemText\n                        primary=\"Show NSFW\"\n                        secondary=\"Hide NSFW extensions and sources\"\n                    />\n                    <ListItemSecondaryAction>\n                        <Switch\n                            edge=\"end\"\n                            checked={showNsfw}\n                            onChange={() => setShowNsfw(!showNsfw)}\n                        />\n                    </ListItemSecondaryAction>\n                </ListItem>\n                <ListItem>\n                    <ListItemIcon>\n                        <CachedIcon />\n                    </ListItemIcon>\n                    <ListItemText\n                        primary=\"Use image cache\"\n                        secondary=\"Disabling image cache makes images load faster if you have a slow disk,\n                         but uses it much more internet traffic in turn\"\n                    />\n                    <ListItemSecondaryAction>\n                        <Switch\n                            edge=\"end\"\n                            checked={useCache}\n                            onChange={() => setUseCache(!useCache)}\n                        />\n                    </ListItemSecondaryAction>\n                </ListItem>\n                <ListItem>\n                    <ListItemIcon>\n                        <DnsIcon />\n                    </ListItemIcon>\n                    <ListItemText primary=\"Server Address\" secondary={serverAddress} />\n                    <ListItemSecondaryAction>\n                        <IconButton\n                            onClick={() => {\n                                handleDialogOpen();\n                            }}\n                            size=\"large\"\n                        >\n                            <EditIcon />\n                        </IconButton>\n                    </ListItemSecondaryAction>\n                </ListItem>\n                <ListItemLink to=\"/settings/about\">\n                    <ListItemIcon>\n                        <InfoIcon />\n                    </ListItemIcon>\n                    <ListItemText primary=\"About\" />\n                </ListItemLink>\n            </List>\n\n            <Dialog open={dialogOpen} onClose={handleDialogCancel}>\n                <DialogContent>\n                    <DialogContentText>\n                        Enter Server Address\n                    </DialogContentText>\n                    <TextField\n                        autoFocus\n                        margin=\"dense\"\n                        id=\"name\"\n                        label=\"Server Address\"\n                        type=\"text\"\n                        fullWidth\n                        value={dialogValue}\n                        placeholder=\"http://127.0.0.1:4567\"\n                        onChange={(e) => setDialogValue(e.target.value)}\n                    />\n                </DialogContent>\n                <DialogActions>\n                    <Button onClick={handleDialogCancel} color=\"primary\">\n                        Cancel\n                    </Button>\n                    <Button onClick={handleDialogSubmit} color=\"primary\">\n                        Set\n                    </Button>\n                </DialogActions>\n            </Dialog>\n\n            <Dialog open={dialogOpenItemWidth} onClose={handleDialogCancelItemWidth}>\n                <DialogTitle>\n                    Manga Item width\n                </DialogTitle>\n                <DialogContent\n                    sx={{\n                        width: '98%',\n                        margin: 'auto',\n                    }}\n                >\n                    <TextField\n                        sx={{\n                            width: '100%',\n                            margin: 'auto',\n                        }}\n                        autoFocus\n                        value={DialogItemWidth}\n                        type=\"number\"\n                        onChange={(e) => setDialogItemWidth(parseInt(e.target.value, 10))}\n                    />\n                    <Slider\n                        aria-label=\"Manga Item width\"\n                        defaultValue={300}\n                        value={DialogItemWidth}\n                        step={10}\n                        min={100}\n                        max={1000}\n                        onChange={handleChange}\n                    />\n                </DialogContent>\n                <DialogActions>\n                    <Button onClick={handleDialogResetItemWidth} color=\"primary\">\n                        Reset to Default\n                    </Button>\n                    <Button onClick={handleDialogCancelItemWidth} color=\"primary\">\n                        Cancel\n                    </Button>\n                    <Button onClick={handleDialogSubmitItemWidth} color=\"primary\">\n                        OK\n                    </Button>\n                </DialogActions>\n            </Dialog>\n        </>\n    );\n}\n","/* eslint-disable react/jsx-props-no-spreading */\n/* eslint-disable react/require-default-props */\n/*\n * Copyright (C) Contributors to the Suwayomi project\n *\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at https://mozilla.org/MPL/2.0/. */\n\nimport React from 'react';\nimport CircularProgress from '@mui/material/CircularProgress';\nimport { Box } from '@mui/system';\n\ninterface IProps {\n    shouldRender?: boolean | (() => boolean)\n    children?: React.ReactNode\n    component?: string | React.FunctionComponent<any> | React.ComponentClass<any, any>\n    componentProps?: any\n}\n\nexport default function LoadingPlaceholder(props: IProps) {\n    const {\n        children, shouldRender, component, componentProps,\n    } = props;\n\n    let condition = true;\n    if (shouldRender !== undefined) {\n        condition = shouldRender instanceof Function ? shouldRender() : shouldRender;\n    }\n\n    if (condition) {\n        if (component) {\n            return React.createElement(component, componentProps);\n        }\n\n        if (children) {\n            return (\n                <>\n                    {children}\n                </>\n            );\n        }\n    }\n\n    return (\n        <Box sx={{\n            margin: '10px auto',\n            display: 'flex',\n            justifyContent: 'center',\n        }}\n        >\n            <CircularProgress thickness={5} />\n        </Box>\n    );\n}\n","import React, { useContext, useEffect, useState } from 'react';\nimport List from '@mui/material/List';\nimport ListItem from '@mui/material/ListItem';\nimport ListItemText from '@mui/material/ListItemText';\nimport client from 'util/client';\nimport ListItemLink from 'components/util/ListItemLink';\nimport NavbarContext from 'components/context/NavbarContext';\nimport LoadingPlaceholder from 'components/util/LoadingPlaceholder';\n\nexport default function About() {\n    const { setTitle, setAction } = useContext(NavbarContext);\n\n    const [about, setAbout] = useState<IAbout>();\n\n    useEffect(() => { setTitle('About'); setAction(<></>); }, []);\n\n    useEffect(() => {\n        client.get('/api/v1/settings/about')\n            .then((response) => response.data)\n            .then((data:IAbout) => {\n                setAbout(data);\n            });\n    }, []);\n\n    if (about === undefined) {\n        return <LoadingPlaceholder />;\n    }\n\n    const version = () => {\n        if (about.buildType === 'Stable') return `${about.version}`;\n        return `${about.version}-${about.revision}`;\n    };\n\n    const buildTime = () => new Date(about.buildTime * 1000).toUTCString();\n\n    return (\n        <List>\n            <ListItem>\n                <ListItemText primary=\"Server\" secondary={`${about.name} ${about.buildType}`} />\n            </ListItem>\n            <ListItem>\n                <ListItemText primary=\"Server version\" secondary={version()} />\n            </ListItem>\n            <ListItem>\n                <ListItemText primary=\"Build time\" secondary={buildTime()} />\n            </ListItem>\n            <ListItemLink to={about.github}>\n                <ListItemText primary=\"Github\" secondary={about.github} />\n            </ListItemLink>\n            <ListItemLink to={about.discord}>\n                <ListItemText primary=\"Discord\" secondary={about.discord} />\n            </ListItemLink>\n        </List>\n    );\n}\n","/* eslint-disable @typescript-eslint/no-shadow */\n/* eslint-disable react/destructuring-assignment */\n/* eslint-disable react/jsx-props-no-spreading */\n/*\n * Copyright (C) Contributors to the Suwayomi project\n *\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at https://mozilla.org/MPL/2.0/. */\n\nimport React, { useState, useContext, useEffect } from 'react';\nimport {\n    List,\n    ListItem,\n    ListItemText,\n    ListItemIcon,\n    IconButton,\n} from '@mui/material';\nimport {\n    DragDropContext, Droppable, Draggable, DropResult, DraggingStyle, NotDraggingStyle,\n} from 'react-beautiful-dnd';\nimport DragHandleIcon from '@mui/icons-material/DragHandle';\nimport EditIcon from '@mui/icons-material/Edit';\nimport { useTheme, Palette } from '@mui/material/styles';\nimport Fab from '@mui/material/Fab';\nimport AddIcon from '@mui/icons-material/Add';\nimport DeleteIcon from '@mui/icons-material/Delete';\nimport Button from '@mui/material/Button';\nimport TextField from '@mui/material/TextField';\nimport Dialog from '@mui/material/Dialog';\nimport DialogActions from '@mui/material/DialogActions';\nimport DialogContent from '@mui/material/DialogContent';\nimport DialogTitle from '@mui/material/DialogTitle';\nimport Checkbox from '@mui/material/Checkbox';\nimport FormControlLabel from '@mui/material/FormControlLabel';\nimport NavbarContext from 'components/context/NavbarContext';\nimport client from 'util/client';\n\nconst getItemStyle = (isDragging: boolean,\n    draggableStyle: DraggingStyle | NotDraggingStyle | undefined, palette: Palette) => ({\n    // styles we need to apply on draggables\n    ...draggableStyle,\n\n    ...(isDragging && {\n        background: palette.mode === 'dark' ? '#424242' : 'rgb(235,235,235)',\n    }),\n});\n\nexport default function Categories() {\n    const { setTitle, setAction } = useContext(NavbarContext);\n    useEffect(() => { setTitle('Categories'); setAction(<></>); }, []);\n\n    const [categories, setCategories] = useState<ICategory[]>([]);\n    const [categoryToEdit, setCategoryToEdit] = useState<number>(-1); // -1 means new category\n    const [dialogOpen, setDialogOpen] = useState<boolean>(false);\n    const [dialogName, setDialogName] = useState<string>('');\n    const [dialogDefault, setDialogDefault] = useState<boolean>(false);\n    const theme = useTheme();\n\n    const [updateTriggerHolder, setUpdateTriggerHolder] = useState<number>(0); // just a hack\n    const triggerUpdate = () => setUpdateTriggerHolder(updateTriggerHolder + 1); // just a hack\n\n    useEffect(() => {\n        if (!dialogOpen) {\n            client.get('/api/v1/category/')\n                .then((response) => response.data)\n                .then((data) => { if (data.length > 0 && data[0].name === 'Default') data.shift(); return data; })\n                .then((data) => setCategories(data));\n        }\n    }, [updateTriggerHolder]);\n\n    const categoryReorder = (list: ICategory[], from: number, to: number) => {\n        const formData = new FormData();\n        formData.append('from', `${from + 1}`);\n        formData.append('to', `${to + 1}`);\n        client.patch('/api/v1/category/reorder', formData)\n            .finally(() => triggerUpdate());\n\n        // also move it in local state to avoid jarring moving behviour...\n        const result = Array.from(list);\n        const [removed] = result.splice(from, 1);\n        result.splice(to, 0, removed);\n        return result;\n    };\n\n    const onDragEnd = (result: DropResult) => {\n        // dropped outside the list?\n        if (!result.destination) {\n            return;\n        }\n\n        setCategories(categoryReorder(\n            categories,\n            result.source.index,\n            result.destination.index,\n        ));\n    };\n\n    const resetDialog = () => {\n        setDialogName('');\n        setDialogDefault(false);\n        setCategoryToEdit(-1);\n    };\n\n    const handleDialogOpen = () => {\n        resetDialog();\n        setDialogOpen(true);\n    };\n\n    const handleEditDialogOpen = (index:number) => {\n        setDialogName(categories[index].name);\n        setDialogDefault(categories[index].default);\n        setCategoryToEdit(index);\n        setDialogOpen(true);\n    };\n\n    const handleDialogCancel = () => {\n        setDialogOpen(false);\n    };\n\n    const handleDialogSubmit = () => {\n        setDialogOpen(false);\n\n        const formData = new FormData();\n        formData.append('name', dialogName);\n        formData.append('default', dialogDefault.toString());\n\n        if (categoryToEdit === -1) {\n            client.post('/api/v1/category/', formData)\n                .finally(() => triggerUpdate());\n        } else {\n            const category = categories[categoryToEdit];\n            client.patch(`/api/v1/category/${category.id}`, formData)\n                .finally(() => triggerUpdate());\n        }\n    };\n\n    const deleteCategory = (index:number) => {\n        const category = categories[index];\n        client.delete(`/api/v1/category/${category.id}`)\n            .finally(() => triggerUpdate());\n    };\n\n    return (\n        <>\n            <DragDropContext onDragEnd={onDragEnd}>\n                <Droppable droppableId=\"droppable\">\n                    {(provided) => (\n                        <List ref={provided.innerRef}>\n                            {categories.map((item, index) => (\n                                <Draggable\n                                    key={item.id}\n                                    draggableId={item.id.toString()}\n                                    index={index}\n                                >\n                                    {(provided, snapshot) => (\n                                        <ListItem\n                                            ContainerProps={{ ref: provided.innerRef } as any}\n                                            {...provided.draggableProps}\n                                            {...provided.dragHandleProps}\n                                            style={getItemStyle(\n                                                snapshot.isDragging,\n                                                provided.draggableProps.style,\n                                                theme.palette,\n                                            )}\n                                            ref={provided.innerRef}\n                                        >\n                                            <ListItemIcon>\n                                                <DragHandleIcon />\n                                            </ListItemIcon>\n                                            <ListItemText\n                                                primary={item.name}\n                                            />\n                                            <IconButton\n                                                onClick={() => {\n                                                    handleEditDialogOpen(index);\n                                                }}\n                                                size=\"large\"\n                                            >\n                                                <EditIcon />\n                                            </IconButton>\n                                            <IconButton\n                                                onClick={() => {\n                                                    deleteCategory(index);\n                                                }}\n                                                size=\"large\"\n                                            >\n                                                <DeleteIcon />\n                                            </IconButton>\n                                        </ListItem>\n                                    )}\n                                </Draggable>\n                            ))}\n                            {provided.placeholder}\n                        </List>\n                    )}\n                </Droppable>\n            </DragDropContext>\n            <Fab\n                color=\"primary\"\n                aria-label=\"add\"\n                style={{\n                    position: 'absolute',\n                    bottom: theme.spacing(2),\n                    right: theme.spacing(2),\n                }}\n                onClick={handleDialogOpen}\n            >\n                <AddIcon />\n            </Fab>\n            <Dialog open={dialogOpen} onClose={handleDialogCancel}>\n                <DialogTitle id=\"form-dialog-title\">\n                    {categoryToEdit === -1 ? 'New Catalog' : 'Edit Catalog'}\n                </DialogTitle>\n                <DialogContent>\n                    <TextField\n                        autoFocus\n                        margin=\"dense\"\n                        id=\"name\"\n                        label=\"Category Name\"\n                        type=\"text\"\n                        fullWidth\n                        value={dialogName}\n                        onChange={(e) => setDialogName(e.target.value)}\n                    />\n                    <FormControlLabel\n                        control={(\n                            <Checkbox\n                                checked={dialogDefault}\n                                onChange={(e) => setDialogDefault(e.target.checked)}\n                                color=\"default\"\n                            />\n                        )}\n                        label=\"Default category when adding new manga to library\"\n                    />\n                </DialogContent>\n                <DialogActions>\n                    <Button onClick={handleDialogCancel} color=\"primary\">\n                        Cancel\n                    </Button>\n                    <Button onClick={handleDialogSubmit} color=\"primary\">\n                        Submit\n                    </Button>\n                </DialogActions>\n            </Dialog>\n        </>\n    );\n}\n","/*\n * Copyright (C) Contributors to the Suwayomi project\n *\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at https://mozilla.org/MPL/2.0/. */\n\nimport ReactDOM from 'react-dom';\nimport React from 'react';\nimport Slide, { SlideProps } from '@mui/material/Slide';\nimport Snackbar from '@mui/material/Snackbar';\nimport MuiAlert, { AlertColor as Severity } from '@mui/material/Alert';\n\nfunction removeToast(id: string) {\n    const container = document.querySelector(`#${id}`)!!;\n    ReactDOM.unmountComponentAtNode(container);\n    document.body.removeChild(container);\n}\n\nfunction Transition(props: SlideProps) {\n    // eslint-disable-next-line react/jsx-props-no-spreading\n    return <Slide {...props} direction=\"up\" />;\n}\n\ninterface IToastProps{\n    message: string\n    severity: Severity\n}\n\nexport function Toast(props: IToastProps) {\n    const { message, severity } = props;\n    const [open, setOpen] = React.useState(true);\n\n    const handleClose = () => {\n        setOpen(false);\n    };\n\n    return (\n        <Snackbar\n            open={open}\n            onClose={handleClose}\n            autoHideDuration={3000}\n            TransitionComponent={Transition}\n            message=\"I love snacks\"\n        >\n            <MuiAlert elevation={6} variant=\"filled\" onClose={handleClose} severity={severity}>\n                {message}\n            </MuiAlert>\n        </Snackbar>\n    );\n}\n\nexport default function makeToast(message: string, severity: Severity) {\n    const id = Math.floor(Math.random() * 1000);\n    const container = document.createElement('div');\n    container.id = `alert-${id}`;\n\n    document.body.appendChild(container);\n\n    ReactDOM.render(<Toast message={message} severity={severity} />, container);\n\n    setTimeout(() => removeToast(container.id), 3500);\n}\n\nexport function makeToaster(\n    [toasts, setToasts] : [React.ReactElement[],\n        (arg0: React.ReactElement[]) => void],\n): [React.ReactElement[], ((message: string, severity: Severity) => void)] {\n    return [toasts, (message: string, severity: Severity) => {\n        setToasts([<Toast\n            key={Math.floor(Math.random() * 1000) + 1}\n            message={message}\n            severity={severity}\n        />]);\n    }];\n}\n","/*\n * Copyright (C) Contributors to the Suwayomi project\n *\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at https://mozilla.org/MPL/2.0/. */\n\nimport React, { useContext, useEffect } from 'react';\nimport List from '@mui/material/List';\nimport ListItem from '@mui/material/ListItem';\nimport ListItemText from '@mui/material/ListItemText';\nimport { fromEvent } from 'file-selector';\nimport makeToast from 'components/util/Toast';\nimport ListItemLink from '../../components/util/ListItemLink';\nimport NavbarContext from '../../components/context/NavbarContext';\nimport client from '../../util/client';\n\nexport default function Backup() {\n    const { setTitle, setAction } = useContext(NavbarContext);\n    useEffect(() => { setTitle('Backup'); setAction(<></>); }, []);\n\n    const { baseURL } = client.defaults;\n\n    const submitBackup = (file: File) => {\n        if (file.name.toLowerCase().endsWith('proto.gz')) {\n            const formData = new FormData();\n            formData.append('backup.proto.gz', file);\n\n            makeToast('Restoring backup....', 'info');\n            client.post('/api/v1/backup/import/file',\n                formData, { headers: { 'Content-Type': 'multipart/form-data' } })\n                .then(() => makeToast('Backup restore finished!', 'success'))\n                .catch(() => makeToast('Backup restore failed!', 'error'));\n        } else if (file.name.toLowerCase().endsWith('json')) {\n            makeToast('legacy backups are not supported!', 'error');\n        } else {\n            makeToast('invalid file type!', 'error');\n        }\n    };\n\n    const dropHandler = async (e: Event) => {\n        e.preventDefault();\n        const files = await fromEvent(e);\n\n        submitBackup(files[0] as File);\n    };\n\n    const dragOverHandler = (e: Event) => {\n        e.preventDefault();\n    };\n\n    useEffect(() => {\n        document.addEventListener('drop', dropHandler);\n        document.addEventListener('dragover', dragOverHandler);\n\n        const input = document.getElementById('backup-file');\n        input?.addEventListener('change', async (evt) => {\n            const files = await fromEvent(evt);\n            submitBackup(files[0] as File);\n        });\n\n        return () => {\n            document.removeEventListener('drop', dropHandler);\n            document.removeEventListener('dragover', dragOverHandler);\n        };\n    }, []);\n\n    return (\n        <>\n            <List sx={{ padding: 0 }}>\n                <ListItemLink to={`${baseURL}/api/v1/backup/export/file`} directLink>\n                    <ListItemText\n                        primary=\"Create Backup\"\n                        secondary=\"Backup library as a Tachiyomi backup\"\n                    />\n                </ListItemLink>\n                <ListItem button onClick={() => document.getElementById('backup-file')?.click()}>\n                    <ListItemText\n                        primary=\"Restore Backup\"\n                        secondary=\"You can also drag and drop the backup file here to restore\"\n                    />\n                </ListItem>\n            </List>\n            <input\n                type=\"file\"\n                id=\"backup-file\"\n                style={{ display: 'none' }}\n            />\n        </>\n\n    );\n}\n","/*\n * Copyright (C) Contributors to the Suwayomi project\n *\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at https://mozilla.org/MPL/2.0/. */\n// adopted from: https://github.com/tachiyomiorg/tachiyomi/blob/master/app/src/main/java/eu/kanade/tachiyomi/widget/EmptyView.kt\n\nimport React from 'react';\nimport Typography from '@mui/material/Typography';\nimport { useTheme } from '@mui/material/styles';\nimport { useMediaQuery } from '@mui/material';\nimport { Box } from '@mui/system';\n\nconst ERROR_FACES = [\n    '(o;)',\n    '(_)',\n    '_',\n    '(_)',\n    '()',\n    '(',\n];\n\nfunction getRandomErrorFace() {\n    const randIndex = Math.floor(Math.random() * ERROR_FACES.length);\n    return ERROR_FACES[randIndex];\n}\n\ninterface IProps {\n    message: string\n    messageExtra?: JSX.Element\n}\n\nexport default function EmptyView({ message, messageExtra }: IProps) {\n    const theme = useTheme();\n    const isMobileWidth = useMediaQuery(theme.breakpoints.down('sm'));\n\n    return (\n        <Box sx={{\n            position: 'absolute',\n            left: `calc(50% + ${isMobileWidth ? '0px' : theme.spacing(8 / 2)})`,\n            top: '50%',\n            transform: 'translate(-50%, -50%)',\n            textAlign: 'center',\n        }}\n        >\n            <Typography variant=\"h3\" gutterBottom>\n                {getRandomErrorFace()}\n            </Typography>\n            <Typography variant=\"h5\">\n                {message}\n            </Typography>\n            {messageExtra}\n        </Box>\n    );\n}\n\nEmptyView.defaultProps = {\n    messageExtra: undefined,\n};\n","/*\n * Copyright (C) Contributors to the Suwayomi project\n *\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at https://mozilla.org/MPL/2.0/. */\n\nimport React from 'react';\n\ninterface IProps {\n    children: React.ReactNode;\n    index: any;\n    currentIndex: any;\n}\n\nexport default function TabPanel(props: IProps) {\n    const {\n        children, index, currentIndex,\n    } = props;\n\n    return (\n        <div\n            role=\"tabpanel\"\n            hidden={index !== currentIndex}\n            id={`simple-tabpanel-${index}`}\n        >\n            {currentIndex === index && children}\n        </div>\n    );\n}\n","/*\n * Copyright (C) Contributors to the Suwayomi project\n *\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at https://mozilla.org/MPL/2.0/.\n */\n\nimport { Checkbox, createSvgIcon } from '@mui/material';\nimport React, {\n    useEffect, useState,\n} from 'react';\n\nexport interface IThreeStateCheckboxProps {\n    name: string\n    checked: boolean | undefined | null\n    onChange: (change: boolean | undefined | null, name: string) => void\n}\n\nenum CheckState {\n    SELECTED, INTERMEDIATE, UNSELECTED,\n}\n\nfunction checkedToState(checked: boolean | undefined | null): CheckState {\n    switch (checked) {\n        case true:\n            return CheckState.SELECTED;\n        case false:\n            return CheckState.INTERMEDIATE;\n        default:\n            return CheckState.UNSELECTED;\n    }\n}\nfunction stateToChecked(state: CheckState): boolean | undefined {\n    switch (state) {\n        case CheckState.SELECTED:\n            return true;\n        case CheckState.INTERMEDIATE:\n            return false;\n        default:\n        case CheckState.UNSELECTED:\n            return undefined;\n    }\n}\n\nfunction stateTransition(state: CheckState): CheckState {\n    switch (state) {\n        case CheckState.SELECTED:\n            return CheckState.INTERMEDIATE;\n        case CheckState.INTERMEDIATE:\n            return CheckState.UNSELECTED;\n        case CheckState.UNSELECTED:\n        default:\n            return CheckState.SELECTED;\n    }\n}\n\nconst ThreeStateCheckbox = (props: IThreeStateCheckboxProps) => {\n    const {\n        name, checked, onChange,\n    } = props;\n    const [localChecked, setLocalChecked] = useState(checkedToState(checked));\n    useEffect(() => setLocalChecked(checkedToState(checked)), [checked]);\n    const handleChange = (e: React.ChangeEvent<HTMLInputElement>) => {\n        setLocalChecked(stateTransition(localChecked));\n        if (onChange) {\n            onChange(stateToChecked(stateTransition(localChecked)), e.currentTarget.name);\n        }\n    };\n    const CancelBox = createSvgIcon(\n        <>\n            <path\n                d=\"M 19 6.41 L 13.41 12 L 19 17.59 L 17.59 19 L 12 13.41 L 6.41 19 V 19 H 6.41 L 5 17.59 L 11 12 L 5 6.41 L 6.41 5 L 12 10.59 L 17.59 5 L 19 6.41 M 5 5 m 0 -2 H 5 c -1.1 0 -2 0.9 -2 2 v 14 c 0 1.1 0.9 2 2 2 h 14 c 1.1 0 2 -0.9 2 -2 V 5 c 0 -1.1 -0.9 -2 -2 -2 z \"\n            />\n        </>,\n        'CancelBox',\n    );\n\n    return (\n        <Checkbox\n            name={name}\n            checked={localChecked === CheckState.SELECTED}\n            indeterminate={localChecked === CheckState.INTERMEDIATE}\n            indeterminateIcon={<CancelBox />}\n            onChange={handleChange}\n            className={`${localChecked}`}\n        />\n    );\n};\nexport default ThreeStateCheckbox;\n","/*\n * Copyright (C) Contributors to the Suwayomi project\n *\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at https://mozilla.org/MPL/2.0/. */\n\nimport React, { useContext } from 'react';\n\ntype ContextType = {\n    options: LibraryOptions;\n\n    setOption: <Name extends keyof LibraryOptions>(\n        name: Name,\n        value: React.SetStateAction<LibraryOptions[Name]>\n    ) => void;\n\n    setOptions: React.Dispatch<React.SetStateAction<LibraryOptions>>;\n\n    active: boolean\n    activeSort: boolean\n};\n\nexport const DefaultLibraryOptions: LibraryOptions = {\n    showDownloadBadge: false,\n    showUnreadBadge: false,\n    gridLayout: 0,\n    SourcegridLayout: 0,\n\n    downloaded: undefined,\n    sortDesc: undefined,\n    sorts: undefined,\n    unread: undefined,\n};\n\nconst LibraryOptionsContext = React.createContext<ContextType>({\n    options: DefaultLibraryOptions,\n    setOption: () => {},\n    setOptions: () => {},\n    active: false,\n    activeSort: false,\n});\n\nexport default LibraryOptionsContext;\n\nexport function useLibraryOptionsContext() {\n    return useContext(LibraryOptionsContext);\n}\n","/*\n * Copyright (C) Contributors to the Suwayomi project\n *\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at https://mozilla.org/MPL/2.0/.\n */\n\nimport React, { useState } from 'react';\nimport FilterListIcon from '@mui/icons-material/FilterList';\nimport {\n    Drawer,\n    FormControlLabel,\n    IconButton,\n    Tabs,\n    Tab,\n    Box,\n    Stack,\n    Checkbox,\n    ListItem,\n    ListItemButton,\n    ListItemIcon,\n    ListItemText,\n    Radio,\n} from '@mui/material';\nimport ThreeStateCheckbox from 'components/util/ThreeStateCheckbox';\nimport ArrowDownwardIcon from '@mui/icons-material/ArrowDownward';\nimport ArrowUpwardIcon from '@mui/icons-material/ArrowUpward';\nimport TabPanel from 'components/util/TabPanel';\nimport { useLibraryOptionsContext } from 'components/context/LibraryOptionsContext';\n\nfunction filtersTab(currentTab: number) {\n    const { options: { unread, downloaded }, setOption } = useLibraryOptionsContext();\n\n    return (\n        <TabPanel index={0} currentIndex={currentTab}>\n            <Stack direction=\"column\">\n                <FormControlLabel\n                    control={(\n                        <ThreeStateCheckbox\n                            name=\"Unread\"\n                            checked={unread}\n                            onChange={(change) => setOption('unread', change)}\n                        />\n                    )}\n                    label=\"Unread\"\n                />\n                <FormControlLabel\n                    control={(\n                        <ThreeStateCheckbox\n                            name=\"Downloaded\"\n                            checked={downloaded}\n                            onChange={(change) => setOption('downloaded', change)}\n                        />\n                    )}\n                    label=\"Downloaded\"\n                />\n            </Stack>\n        </TabPanel>\n    );\n}\n\nfunction sortsTab(currentTab: number) {\n    const { options: { sorts, sortDesc }, setOption } = useLibraryOptionsContext();\n\n    const handleChange = (event: React.MouseEvent<HTMLDivElement, MouseEvent>, index: string) => {\n        if (sorts === index) {\n            setOption('sortDesc', (sortDes) => !sortDes);\n        } else {\n            setOption('sortDesc', false);\n        }\n        setOption('sorts', index);\n    };\n\n    return (\n        <>\n            <TabPanel index={1} currentIndex={currentTab}>\n                <Stack direction=\"column\">\n                    {\n                        ['sortToRead', 'sortAlph', 'sortID'].map((e) => {\n                            let icon;\n                            if (sorts === e) {\n                                icon = !sortDesc ? (<ArrowUpwardIcon color=\"primary\" />)\n                                    : (<ArrowDownwardIcon color=\"primary\" />);\n                            }\n                            icon = icon === undefined && sortDesc === undefined && e === 'sortID' ? (<ArrowDownwardIcon color=\"primary\" />) : icon;\n                            return (\n                                <ListItem disablePadding>\n                                    <ListItemButton onClick={(event) => handleChange(event, e)}>\n                                        <ListItemIcon>{icon}</ListItemIcon>\n                                        <ListItemText primary={e} />\n                                    </ListItemButton>\n                                </ListItem>\n                            );\n                        })\n                    }\n                </Stack>\n            </TabPanel>\n        </>\n    );\n}\n\nfunction dispalyTab(currentTab: number) {\n    const { options, setOptions } = useLibraryOptionsContext();\n\n    function setContextOptions(\n        e: React.ChangeEvent<HTMLInputElement>,\n        checked: boolean,\n    ) {\n        setOptions((prev) => ({ ...prev, [e.target.name]: checked }));\n    }\n\n    function setGridContextOptions(\n        e: React.ChangeEvent<HTMLInputElement>,\n        checked: boolean,\n    ) {\n        if (checked) {\n            setOptions((prev) => ({ ...prev, gridLayout: parseInt(e.target.name, 10) }));\n        }\n    }\n\n    return (\n        <TabPanel index={2} currentIndex={currentTab}>\n            <Stack direction=\"column\">\n                DISPLAY MODE\n                <FormControlLabel\n                    label=\"Compact grid\"\n                    control={(\n                        <Radio\n                            name=\"0\"\n                            checked={options.gridLayout === 0 || options.gridLayout === undefined}\n                            onChange={setGridContextOptions}\n                        />\n                    )}\n                />\n                <FormControlLabel\n                    label=\"Comfortable grid\"\n                    control={(\n                        <Radio\n                            name=\"1\"\n                            checked={options.gridLayout === 1}\n                            onChange={setGridContextOptions}\n                        />\n                    )}\n                />\n                <FormControlLabel\n                    label=\"list\"\n                    control={(\n                        <Radio\n                            name=\"2\"\n                            checked={options.gridLayout === 2}\n                            onChange={setGridContextOptions}\n                        />\n                    )}\n                />\n                BADGES\n                <FormControlLabel\n                    label=\"Unread Badges\"\n                    control={(\n                        <Checkbox\n                            name=\"showUnreadBadge\"\n                            checked={options.showUnreadBadge}\n                            onChange={setContextOptions}\n                        />\n                    )}\n                />\n                <FormControlLabel\n                    label=\"Download Badges\"\n                    control={(\n                        <Checkbox\n                            name=\"showDownloadBadge\"\n                            checked={options.showDownloadBadge}\n                            onChange={setContextOptions}\n                        />\n                    )}\n                />\n            </Stack>\n        </TabPanel>\n    );\n}\n\nfunction Options() {\n    const [currentTab, setCurrentTab] = useState<number>(0);\n\n    return (\n        <Box>\n            <Tabs\n                key={currentTab}\n                value={currentTab}\n                variant=\"fullWidth\"\n                onChange={(e, newTab) => setCurrentTab(newTab)}\n                indicatorColor=\"primary\"\n                textColor=\"primary\"\n            >\n                <Tab label=\"Filter\" value={0} />\n                <Tab label=\"Sort\" value={1} />\n                <Tab label=\"Display\" value={2} />\n            </Tabs>\n            {filtersTab(currentTab)}\n            {sortsTab(currentTab)}\n            {dispalyTab(currentTab)}\n        </Box>\n    );\n}\n\nexport default function LibraryOptions() {\n    const [filtersOpen, setFiltersOpen] = React.useState(false);\n    const { active } = useLibraryOptionsContext();\n    return (\n        <>\n            <IconButton\n                onClick={() => setFiltersOpen(!filtersOpen)}\n                color={active ? 'warning' : 'default'}\n            >\n                <FilterListIcon />\n            </IconButton>\n\n            <Drawer\n                anchor=\"bottom\"\n                open={filtersOpen}\n                onClose={() => setFiltersOpen(false)}\n                PaperProps={{\n                    style: {\n                        maxWidth: 600, padding: '1em', marginLeft: 'auto', marginRight: 'auto',\n                    },\n                }}\n            >\n                <Options />\n            </Drawer>\n        </>\n    );\n}\n","/*\n * Copyright (C) Contributors to the Suwayomi project\n *\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at https://mozilla.org/MPL/2.0/. */\n\nimport React, { useEffect, useState, CSSProperties } from 'react';\nimport CircularProgress from '@mui/material/CircularProgress';\nimport Box from '@mui/system/Box';\nimport { Theme } from '@mui/system/createTheme';\nimport { SxProps } from '@mui/system/styleFunctionSx';\n\ninterface IProps {\n    src: string\n    alt: string\n\n    imgRef?: React.RefObject<HTMLImageElement>\n\n    spinnerStyle?: SxProps<Theme>\n    imgStyle?: CSSProperties\n\n    onImageLoad?: () => void\n}\n\nexport default function SpinnerImage(props: IProps) {\n    const {\n        src, alt, onImageLoad, imgRef, spinnerStyle, imgStyle,\n    } = props;\n    const [imageSrc, setImagsrc] = useState<string>('');\n\n    useEffect(() => {\n        const img = new Image();\n        img.src = src;\n\n        img.onload = () => {\n            setImagsrc(src);\n            onImageLoad?.();\n        };\n\n        img.onerror = () => {\n            // Setting to an actual image so CSS styling works consistently\n            setImagsrc('/notFound.svg');\n        };\n\n        return () => {\n            img.onload = null;\n            img.onerror = null;\n        };\n    }, [src]);\n\n    if (imageSrc.length === 0) {\n        return (\n            <Box sx={spinnerStyle}>\n                <CircularProgress thickness={5} />\n            </Box>\n        );\n    }\n\n    if (imageSrc === 'Not Found') {\n        return <Box sx={spinnerStyle} />;\n    }\n\n    return (\n        <img\n            style={imgStyle}\n            ref={imgRef}\n            src={imageSrc}\n            alt={alt}\n        />\n    );\n}\n\nSpinnerImage.defaultProps = {\n    spinnerStyle: {},\n    imgStyle: {},\n    onImageLoad: () => {},\n    imgRef: undefined,\n};\n","/*\n * Copyright (C) Contributors to the Suwayomi project\n *\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at https://mozilla.org/MPL/2.0/. */\n\nimport React from 'react';\nimport Card from '@mui/material/Card';\nimport CardActionArea from '@mui/material/CardActionArea';\nimport Typography from '@mui/material/Typography';\nimport { Link } from 'react-router-dom';\nimport { Avatar, CardContent, Grid } from '@mui/material';\nimport useLocalStorage from 'util/useLocalStorage';\nimport SpinnerImage from 'components/util/SpinnerImage';\nimport { Box, styled } from '@mui/system';\nimport { useLibraryOptionsContext } from 'components/context/LibraryOptionsContext';\n\nconst BottomGradient = styled('div')({\n    position: 'absolute',\n    bottom: 0,\n    width: '100%',\n    height: '30%',\n    background: 'linear-gradient(180deg, rgba(0,0,0,0) 0%, rgba(0,0,0,1) 100%)',\n});\n\nconst BottomGradientDoubledDown = styled('div')({\n    position: 'absolute',\n    bottom: 0,\n    width: '100%',\n    height: '20%',\n    background: 'linear-gradient(180deg, rgba(0,0,0,0) 0%, rgba(0,0,0,1) 100%)',\n});\n\nconst MangaTitle = styled(Typography)({\n    position: 'absolute',\n    bottom: 0,\n    padding: '0.5em',\n    color: 'white',\n    fontSize: '1.05rem',\n    textShadow: '0px 0px 3px #000000',\n});\n\nconst BadgeContainer = styled('div')({\n    display: 'flex',\n    position: 'absolute',\n    top: 5,\n    left: 5,\n    height: 'fit-content',\n    borderRadius: '5px',\n    overflow: 'hidden',\n    '& p': {\n        color: 'white',\n        padding: '0.1em',\n        paddingInline: '0.2em',\n        fontSize: '1.05rem',\n    },\n});\n\nconst truncateText = (str: string, maxLength: number) => {\n    const ending = '...';\n    // trim the string to the maximum length\n    const trimmedString = str.substr(0, maxLength - ending.length);\n\n    if (trimmedString.length < str.length) {\n        return trimmedString + ending;\n    }\n    return str;\n};\n\ninterface IProps {\n    manga: IMangaCard\n    gridLayout: number | undefined\n    dimensions: number\n}\nconst MangaCard = React.forwardRef<HTMLDivElement, IProps>((props: IProps, ref) => {\n    const {\n        manga: {\n            // eslint-disable-next-line @typescript-eslint/no-unused-vars\n            id, title, thumbnailUrl, downloadCount, unreadCount: unread, inLibrary,\n        },\n        gridLayout,\n        dimensions,\n    } = props;\n    const { options: { showUnreadBadge, showDownloadBadge } } = useLibraryOptionsContext();\n\n    const [serverAddress] = useLocalStorage<String>('serverBaseURL', '');\n    const [useCache] = useLocalStorage<boolean>('useCache', true);\n    const [ItemWidth] = useLocalStorage<number>('ItemWidth', 300);\n\n    if (gridLayout !== 2) {\n        const colomns = Math.round(dimensions / ItemWidth);\n        return (\n            // @ts-ignore gridsize type isnt allowed to be a decimal but it works fine\n            <Grid item xs={12 / colomns} sm={12 / colomns} md={12 / colomns} lg={12 / colomns}>\n                <Link to={`/manga/${id}/`} style={(gridLayout === 1) ? { textDecoration: 'none' } : {}}>\n                    <Box\n                        sx={{\n                            display: 'flex',\n                            flexDirection: 'column',\n                        }}\n                    >\n                        <Card\n                            sx={{\n                            // force standard aspect ratio of manga covers\n                                aspectRatio: '225/350',\n                                display: 'flex',\n                            }}\n                            ref={ref}\n                        >\n                            <CardActionArea\n                                sx={{\n                                    position: 'relative',\n                                    height: '100%',\n                                }}\n                            >\n\n                                <BadgeContainer>\n                                    {inLibrary && (\n                                        <Typography\n                                            sx={{ backgroundColor: 'primary.dark', zIndex: '1' }}\n                                        >\n                                            In library\n                                        </Typography>\n                                    )}\n                                    { showUnreadBadge && unread! > 0 && (\n                                        <Typography\n                                            sx={{ backgroundColor: 'primary.dark' }}\n                                        >\n                                            {unread}\n                                        </Typography>\n                                    )}\n                                    { showDownloadBadge && downloadCount! > 0 && (\n                                        <Typography sx={{\n                                            backgroundColor: 'success.dark',\n                                        }}\n                                        >\n                                            {downloadCount}\n                                        </Typography>\n                                    )}\n                                </BadgeContainer>\n                                <SpinnerImage\n                                    alt={title}\n                                    src={`${serverAddress}${thumbnailUrl}?useCache=${useCache}`}\n                                    imgStyle={inLibrary\n                                        ? {\n                                            height: '100%',\n                                            width: '100%',\n                                            objectFit: 'cover',\n                                            filter: 'brightness(0.4)',\n                                        }\n                                        : {\n                                            height: '100%',\n                                            width: '100%',\n                                            objectFit: 'cover',\n                                        }}\n                                    spinnerStyle={{\n                                        display: 'grid',\n                                        placeItems: 'center',\n                                    }}\n                                />\n                                {(gridLayout === 1) ? (<></>) : (\n                                    <>\n                                        <BottomGradient />\n                                        <BottomGradientDoubledDown />\n                                    </>\n                                )}\n                                {(gridLayout === 1) ? (\n                                    <></>\n                                ) : (\n                                    <MangaTitle>\n                                        {truncateText(title, 61)}\n                                    </MangaTitle>\n                                )}\n                            </CardActionArea>\n                        </Card>\n                        {(gridLayout === 1) ? (\n                            <MangaTitle\n                                sx={{\n                                    position: 'relative',\n                                }}\n                            >\n                                {truncateText(title, 61)}\n                            </MangaTitle>\n                        ) : (<></>)}\n                    </Box>\n                </Link>\n            </Grid>\n        );\n    }\n    return (\n        <Grid item xs={12} sm={12} md={12} lg={12}>\n            <Link to={`/manga/${id}/`} style={{ textDecoration: 'none', color: 'unset' }}>\n                <CardContent sx={{\n                    display: 'flex',\n                    justifyContent: 'space-between',\n                    alignItems: 'center',\n                    padding: 2,\n                    '&:hover': {\n                        backgroundColor: 'action.hover',\n                        transition: 'background-color 100ms cubic-bezier(0.4, 0, 0.2, 1) 0ms',\n                    },\n                    '&:active': {\n                        backgroundColor: 'action.selected',\n                        transition: 'background-color 100ms cubic-bezier(0.4, 0, 0.2, 1) 0ms',\n                    },\n                    position: 'relative',\n                }}\n                >\n                    <Avatar\n                        variant=\"rounded\"\n                        sx={inLibrary\n                            ? {\n                                width: 56,\n                                height: 56,\n                                flex: '0 0 auto',\n                                marginRight: 2,\n                                imageRendering: 'pixelated',\n                                filter: 'brightness(0.4)',\n                            }\n                            : {\n                                width: 56,\n                                height: 56,\n                                flex: '0 0 auto',\n                                marginRight: 2,\n                                imageRendering: 'pixelated',\n                            }}\n                        src={`${serverAddress}${thumbnailUrl}?useCache=${useCache}`}\n                    />\n                    <Box\n                        sx={{\n                            display: 'flex',\n                            flexDirection: 'row',\n                            flexGrow: 1,\n                            width: 'min-content',\n                        }}\n                    >\n                        <Typography variant=\"h5\" component=\"h2\">\n                            {truncateText(title, 61)}\n                        </Typography>\n                    </Box>\n                    <BadgeContainer sx={{ position: 'relative' }}>\n                        {inLibrary && (\n                            <Typography\n                                sx={{ backgroundColor: 'primary.dark', zIndex: '1' }}\n                            >\n                                In library\n                            </Typography>\n                        )}\n                        { showUnreadBadge && unread! > 0 && (\n                            <Typography\n                                sx={{ backgroundColor: 'primary.dark' }}\n                            >\n                                {unread}\n                            </Typography>\n                        )}\n                        { showDownloadBadge && downloadCount! > 0 && (\n                            <Typography sx={{\n                                backgroundColor: 'success.dark',\n                            }}\n                            >\n                                {downloadCount}\n                            </Typography>\n                        )}\n                    </BadgeContainer>\n                </CardContent>\n            </Link>\n        </Grid>\n    );\n});\n\nexport default MangaCard;\n","/*\n * Copyright (C) Contributors to the Suwayomi project\n *\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at https://mozilla.org/MPL/2.0/. */\n\nimport React, {\n    useEffect, useLayoutEffect, useRef, useState,\n} from 'react';\nimport Grid from '@mui/material/Grid';\nimport EmptyView from 'components/util/EmptyView';\nimport LoadingPlaceholder from 'components/util/LoadingPlaceholder';\nimport { Typography } from '@mui/material';\nimport { Box } from '@mui/system';\nimport MangaCard from './MangaCard';\n\nexport interface IMangaGridProps{\n    mangas: IMangaCard[]\n    isLoading: boolean\n    message?: string\n    messageExtra?: JSX.Element\n    hasNextPage: boolean\n    lastPageNum: number\n    setLastPageNum: (lastPageNum: number) => void\n    gridLayout?: number | undefined\n    horisontal?: boolean | undefined\n    noFaces?: boolean | undefined\n}\n\nexport default function MangaGrid(props: IMangaGridProps) {\n    const {\n        mangas, isLoading, message, messageExtra,\n        hasNextPage, lastPageNum, setLastPageNum, gridLayout, horisontal, noFaces,\n    } = props;\n    let mapped;\n    const lastManga = useRef<HTMLDivElement>(null);\n\n    const scrollHandler = () => {\n        if (lastManga.current) {\n            const rect = lastManga.current.getBoundingClientRect();\n            if (((rect.y + rect.height) / window.innerHeight < 2) && hasNextPage) {\n                setLastPageNum(lastPageNum + 1);\n            }\n        }\n    };\n    useEffect(() => {\n        window.addEventListener('scroll', scrollHandler, true);\n        return () => {\n            window.removeEventListener('scroll', scrollHandler, true);\n        };\n    }, [hasNextPage, mangas]);\n\n    const [dimensions, setDimensions] = useState(1);\n\n    const gridRef = useRef<HTMLDivElement>(null);\n\n    const TestDimensions = () => {\n        setDimensions(gridRef.current ? gridRef.current.offsetWidth : 0);\n    };\n\n    useLayoutEffect(TestDimensions, []);\n\n    let movementTimer: NodeJS.Timeout;\n\n    window.addEventListener('resize', () => {\n        clearInterval(movementTimer);\n        movementTimer = setTimeout(TestDimensions, 100);\n    });\n\n    if (mangas.length === 0) {\n        if (isLoading) {\n            mapped = (\n                <LoadingPlaceholder />\n            );\n        } else {\n            mapped = noFaces ? (\n                <Box\n                    sx={{\n                        margin: 'auto',\n                    }}\n                >\n                    <Typography variant=\"h5\">\n                        {message}\n                    </Typography>\n                    {messageExtra}\n                </Box>\n            ) : (\n                <EmptyView message={message!} messageExtra={messageExtra} />\n            );\n        }\n    } else {\n        mapped = mangas.map((it, idx) => {\n            if (idx === mangas.length - 1) {\n                return (\n                    <MangaCard\n                        key={it.id}\n                        manga={it}\n                        ref={lastManga}\n                        gridLayout={gridLayout}\n                        dimensions={dimensions}\n                    />\n                );\n            }\n            return (\n                <MangaCard\n                    key={it.id}\n                    manga={it}\n                    gridLayout={gridLayout}\n                    dimensions={dimensions}\n                />\n            );\n        });\n    }\n\n    return (\n        <div ref={gridRef}>\n            <Grid\n                container\n                spacing={1}\n                style={horisontal ? {\n                    margin: 0,\n                    width: '100%',\n                    padding: '5px',\n                    overflowX: 'scroll',\n                    display: '-webkit-inline-box',\n                    flexWrap: 'nowrap',\n                } : {\n                    margin: 0,\n                    width: '100%',\n                    padding: '5px',\n                }}\n            >\n                {mapped}\n            </Grid>\n        </div>\n    );\n}\n\nMangaGrid.defaultProps = {\n    message: '',\n    messageExtra: undefined,\n};\n","/*\n * Copyright (C) Contributors to the Suwayomi project\n *\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at https://mozilla.org/MPL/2.0/.\n */\n\nimport React from 'react';\nimport MangaGrid, { IMangaGridProps } from 'components/MangaGrid';\nimport { useLibraryOptionsContext } from 'components/context/LibraryOptionsContext';\nimport { StringParam, useQueryParam } from 'use-query-params';\n\nconst FILTERED_OUT_MESSAGE = 'There are no Manga matching this filter';\n\nfunction unreadFilter(unread: NullAndUndefined<boolean>, { unreadCount }: IMangaCard): boolean {\n    switch (unread) {\n        case true:\n            return !!unreadCount && unreadCount >= 1;\n        case false:\n            return unreadCount === 0;\n        default:\n            return true;\n    }\n}\n\nfunction downloadedFilter(downloaded: NullAndUndefined<boolean>,\n    { downloadCount }: IMangaCard): boolean {\n    switch (downloaded) {\n        case true:\n            return !!downloadCount && downloadCount >= 1;\n        case false:\n            return downloadCount === 0;\n        default:\n            return true;\n    }\n}\n\nfunction queryFilter(query: NullAndUndefined<string>, { title }: IMangaCard): boolean {\n    if (!query) return true;\n    return title.toLowerCase().includes(query.toLowerCase());\n}\n\nfunction filterManga(mangas: IMangaCard[]): IMangaCard[] {\n    const [query] = useQueryParam('query', StringParam);\n\n    const { options: { downloaded, unread } } = useLibraryOptionsContext();\n    return mangas\n        .filter((manga) => downloadedFilter(downloaded, manga)\n        && unreadFilter(unread, manga)\n        && queryFilter(query, manga));\n}\n\nfunction toReadSort(a: IMangaCard, b: IMangaCard): number {\n    if (!a.unreadCount) return -1;\n    if (!b.unreadCount) return 1;\n    return a.unreadCount > b.unreadCount ? 1 : -1;\n}\n\nfunction toSortAlph(a: IMangaCard, b: IMangaCard): number {\n    return a.title < b.title ? 1 : -1;\n}\n\nfunction toSortID(a: IMangaCard, b: IMangaCard): number {\n    return a.id > b.id ? 1 : -1;\n}\n\nfunction sortManga(mangas: IMangaCard[]): IMangaCard[] {\n    const { options: { sorts, sortDesc } } = useLibraryOptionsContext();\n    return (sorts === 'sortID' || sorts === undefined) && !sortDesc ? mangas : mangas.sort((a, b) => {\n        const c = sortDesc === true ? b : a;\n        const d = sortDesc === true ? a : b;\n        if (sorts === 'sortToRead') { return toReadSort(c, d); }\n        if (sorts === 'sortAlph') { return toSortAlph(c, d); }\n        if (sorts === 'sortID' || sorts === undefined) { return toSortID(c, d); }\n        return 1;\n    });\n}\n\nexport default function LibraryMangaGrid(props: IMangaGridProps) {\n    const {\n        mangas, isLoading, hasNextPage, lastPageNum, setLastPageNum, message,\n    } = props;\n\n    const [query] = useQueryParam('query', StringParam);\n    const { options, active } = useLibraryOptionsContext();\n    const filteredManga = filterManga(mangas);\n    const sortedManga = sortManga(filteredManga);\n    const DoneManga = sortedManga.map((ele) => {\n        // eslint-disable-next-line no-param-reassign\n        ele.inLibrary = undefined;\n        return ele;\n    });\n    const showFilteredOutMessage = (active || query)\n        && filteredManga.length === 0 && mangas.length > 0;\n\n    return (\n        <MangaGrid\n            mangas={DoneManga}\n            isLoading={isLoading}\n            hasNextPage={hasNextPage}\n            lastPageNum={lastPageNum}\n            setLastPageNum={setLastPageNum}\n            message={showFilteredOutMessage ? FILTERED_OUT_MESSAGE : message}\n            gridLayout={options.gridLayout}\n        />\n    );\n}\n","/*\n * Copyright (C) Contributors to the Suwayomi project\n *\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at https://mozilla.org/MPL/2.0/.\n */\n\nimport React, { useState, useEffect } from 'react';\nimport SearchIcon from '@mui/icons-material/Search';\nimport { IconButton, Input } from '@mui/material';\nimport CancelIcon from '@mui/icons-material/Cancel';\nimport { useQueryParam, StringParam } from 'use-query-params';\n\ninterface IProps {\n    autoOpen?: boolean\n}\n\nconst defaultProps = {\n    autoOpen: false,\n};\n\nconst AppbarSearch: React.FunctionComponent<IProps> = (props) => {\n    const { autoOpen } = props;\n    const [query, setQuery] = useQueryParam('query', StringParam);\n    const [searchOpen, setSearchOpen] = useState(!!query);\n    const inputRef = React.useRef<HTMLInputElement>();\n\n    function handleChange(e: React.ChangeEvent<HTMLInputElement>) {\n        setQuery(e.target.value === '' ? undefined : e.target.value);\n    }\n    const cancelSearch = () => {\n        setQuery(null);\n        setSearchOpen(false);\n    };\n    const handleBlur = () => { if (!query) setSearchOpen(false); };\n    const openSearch = () => {\n        setSearchOpen(true);\n        // Put Focus Action at the end of the Callstack so Input actually exists on the dom\n        setTimeout(() => {\n            if (inputRef && inputRef.current) inputRef.current.focus();\n        });\n    };\n\n    const handleSearchShortcut = (e: KeyboardEvent) => {\n        if ((e.code === 'F3') || (e.ctrlKey && e.code === 'KeyF')) {\n            e.preventDefault();\n            openSearch();\n        }\n    };\n\n    useEffect(() => {\n        if (autoOpen) {\n            openSearch();\n        }\n    }, []);\n\n    useEffect(() => {\n        window.addEventListener('keydown', handleSearchShortcut);\n\n        return () => {\n            window.removeEventListener('keydown', handleSearchShortcut);\n        };\n    }, [handleSearchShortcut]);\n\n    return (\n        <>\n            {searchOpen\n                ? (\n                    <Input\n                        value={query || ''}\n                        onChange={handleChange}\n                        onBlur={handleBlur}\n                        inputRef={inputRef}\n                        endAdornment={(\n                            <IconButton\n                                onClick={cancelSearch}\n                            >\n                                <CancelIcon />\n                            </IconButton>\n                        )}\n                    />\n                ) : (\n                    <IconButton onClick={openSearch}>\n                        <SearchIcon />\n                    </IconButton>\n                )}\n        </>\n    );\n};\n\nAppbarSearch.defaultProps = defaultProps;\n\nexport default AppbarSearch;\n","import React, { useEffect, useState } from 'react';\nimport IconButton from '@mui/material/IconButton';\nimport RefreshIcon from '@mui/icons-material/Refresh';\nimport CircularProgress from '@mui/material/CircularProgress';\nimport { Box } from '@mui/system';\nimport Typography from '@mui/material/Typography';\nimport client from 'util/client';\nimport makeToast from '../util/Toast';\n\ninterface IProgressProps {\n    progress: number\n}\n\nfunction Progress({ progress }: IProgressProps) {\n    return (\n        <Box sx={{ display: 'grid', placeItems: 'center', position: 'relative' }}>\n            <CircularProgress variant=\"determinate\" value={progress} />\n            <Box sx={{ position: 'absolute' }}>\n                <Typography fontSize=\"0.8rem\">\n                    {`${Math.round(progress)}%`}\n                </Typography>\n            </Box>\n        </Box>\n\n    );\n}\n\nconst baseWebsocketUrl = JSON.parse(window.localStorage.getItem('serverBaseURL')!).replace('http', 'ws');\n\nfunction UpdateChecker() {\n    const [loading, setLoading] = useState(false);\n    const [progress, setProgress] = useState(0);\n\n    const onClick = async () => {\n        try {\n            setLoading(true);\n            setProgress(0);\n            await client.post('/api/v1/update/fetch');\n        } catch (e) {\n            makeToast('Checking for updates failed!', 'error');\n            setLoading(false);\n        }\n    };\n\n    useEffect(() => {\n        const wsc = new WebSocket(`${baseWebsocketUrl}/api/v1/update`);\n        wsc.onmessage = (e) => {\n            const data = JSON.parse(e.data) as IUpdateStatus;\n            const { COMPLETE, RUNNING, PENDING } = data.statusMap;\n\n            setLoading(data.running);\n            const currentProgress = 100 * (COMPLETE / (COMPLETE + RUNNING + PENDING));\n\n            setProgress(Number.isNaN(currentProgress) ? 0 : currentProgress);\n        };\n\n        return () => wsc.close();\n    }, []);\n\n    return (\n        <IconButton onClick={onClick} disabled={loading}>\n            {loading ? <Progress progress={progress} /> : <RefreshIcon />}\n        </IconButton>\n    );\n}\n\nexport default UpdateChecker;\n","/*\n * Copyright (C) Contributors to the Suwayomi project\n *\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at https://mozilla.org/MPL/2.0/. */\n\nimport { Tab, Tabs } from '@mui/material';\nimport React, {\n    useContext, useEffect, useState,\n} from 'react';\nimport NavbarContext from 'components/context/NavbarContext';\nimport EmptyView from 'components/util/EmptyView';\nimport LoadingPlaceholder from 'components/util/LoadingPlaceholder';\nimport TabPanel from 'components/util/TabPanel';\nimport LibraryOptions from 'components/library/LibraryOptions';\nimport LibraryMangaGrid from 'components/library/LibraryMangaGrid';\nimport AppbarSearch from 'components/util/AppbarSearch';\nimport { useQueryParam, NumberParam } from 'use-query-params';\nimport useSWR from 'swr';\nimport UpdateChecker from '../components/library/UpdateChecker';\n\nexport default function Library() {\n    const { data: tabsData, error: tabsError } = useSWR<ICategory[]>('/api/v1/category');\n    const tabs = tabsData ?? [];\n\n    const [tabSearchParam, setTabSearchParam] = useQueryParam('tab', NumberParam);\n\n    const activeTab = tabs.find((t) => t.order === tabSearchParam) ?? tabs[0];\n    const { data: mangaData, error: mangaError } = useSWR<IManga[]>(`/api/v1/category/${activeTab?.id}`, {\n        isPaused: () => activeTab == null,\n    });\n    const mangas = mangaData ?? [];\n\n    const { setTitle, setAction } = useContext(NavbarContext);\n    useEffect(() => {\n        setTitle('Library');\n        setAction(\n            <>\n                <AppbarSearch />\n                <LibraryOptions />\n                <UpdateChecker />\n            </>,\n        );\n    }, []);\n\n    // a hack so MangaGrid doesn't stop working. I won't change it in case\n    // if I do manga pagination for library..\n    const [lastPageNum, setLastPageNum] = useState<number>(1);\n\n    const handleTabChange = (newTab: number) => {\n        setTabSearchParam(newTab === 0 ? undefined : newTab);\n    };\n\n    if (tabsError != null) {\n        return <EmptyView message=\"Could not load categories\" messageExtra={tabsError?.message ?? tabsError} />;\n    }\n\n    if (tabsData == null) {\n        return <LoadingPlaceholder />;\n    }\n\n    if (tabs.length === 0) {\n        return <EmptyView message=\"Your Library is empty\" />;\n    }\n\n    if (tabs.length === 1) {\n        return (\n            <LibraryMangaGrid\n                mangas={mangas}\n                hasNextPage={false}\n                lastPageNum={lastPageNum}\n                setLastPageNum={setLastPageNum}\n                message=\"Your Library is empty\"\n                isLoading={activeTab != null && mangaData == null && mangaError == null}\n            />\n        );\n    }\n\n    // Visual Hack: 160px is min-width for viewport width of >600\n    const scrollableTabs = window.innerWidth < tabs.length * 160;\n\n    return (\n        <>\n            <Tabs\n                key={activeTab.order}\n                value={activeTab.order}\n                onChange={(e, newTab) => handleTabChange(newTab)}\n                indicatorColor=\"primary\"\n                textColor=\"primary\"\n                centered={!scrollableTabs}\n                variant={scrollableTabs ? 'scrollable' : 'fullWidth'}\n                scrollButtons\n                allowScrollButtonsMobile\n            >\n                {tabs.map((tab) => (\n                    <Tab key={tab.id} label={tab.name} value={tab.order} />\n                ))}\n            </Tabs>\n            {tabs.map((tab) => (\n                <TabPanel key={tab.order} index={tab.order} currentIndex={activeTab.order}>\n                    {tab === activeTab && (mangaError\n                        ? (\n                            <EmptyView message=\"Could not load manga\" messageExtra={mangaError?.message ?? mangaError} />\n                        )\n                        : (\n                            <LibraryMangaGrid\n                                mangas={mangas}\n                                hasNextPage={false}\n                                lastPageNum={lastPageNum}\n                                setLastPageNum={setLastPageNum}\n                                message=\"Category is Empty\"\n                                isLoading={mangaData == null}\n                            />\n                        ))}\n                </TabPanel>\n            ))}\n        </>\n    );\n}\n","/*\n * Copyright (C) Contributors to the Suwayomi project\n *\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at https://mozilla.org/MPL/2.0/. */\n\nimport React, { useState, useEffect } from 'react';\nimport ListItem from '@mui/material/ListItem';\nimport ListItemText from '@mui/material/ListItemText';\nimport ListItemSecondaryAction from '@mui/material/ListItemSecondaryAction';\nimport Switch from '@mui/material/Switch';\nimport Checkbox from '@mui/material/Checkbox';\n\nfunction getTwoStateType(type: 'Checkbox' | 'Switch') {\n    if (type === 'Switch') { return Switch; }\n    return Checkbox;\n}\n\nfunction TwoSatePreference(props: TwoStatePreferenceProps) {\n    const {\n        title, summary, currentValue, updateValue, type,\n    } = props;\n    const [internalCurrentValue, setInternalCurrentValue] = useState<boolean>(currentValue);\n\n    useEffect(() => {\n        setInternalCurrentValue(currentValue);\n    }, [currentValue]);\n\n    return (\n        <ListItem>\n            <ListItemText primary={title} secondary={summary} />\n            <ListItemSecondaryAction>\n                {React.createElement(getTwoStateType(type),\n                    {\n                        edge: 'end',\n                        checked: internalCurrentValue,\n                        onChange: () => {\n                            updateValue(!currentValue);\n\n                            // appear smooth\n                            setInternalCurrentValue(!currentValue);\n                        },\n                    })}\n            </ListItemSecondaryAction>\n        </ListItem>\n    );\n}\n\nexport function CheckBoxPreference(props: CheckBoxPreferenceProps) {\n    // eslint-disable-next-line react/jsx-props-no-spreading\n    return <TwoSatePreference {...props} type=\"Checkbox\" />;\n}\nexport function SwitchPreferenceCompat(props: SwitchPreferenceCompatProps) {\n    // eslint-disable-next-line react/jsx-props-no-spreading\n    return <TwoSatePreference {...props} type=\"Switch\" />;\n}\n\nexport default { CheckBoxPreference, SwitchPreferenceCompat };\n","/*\n * Copyright (C) Contributors to the Suwayomi project\n *\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at https://mozilla.org/MPL/2.0/. */\n\nimport React, { useState, useEffect } from 'react';\nimport ListItem from '@mui/material/ListItem';\nimport ListItemText from '@mui/material/ListItemText';\nimport Dialog from '@mui/material/Dialog';\nimport DialogTitle from '@mui/material/DialogTitle';\nimport DialogContent from '@mui/material/DialogContent';\nimport DialogActions from '@mui/material/DialogActions';\nimport RadioGroup from '@mui/material/RadioGroup';\nimport Radio from '@mui/material/Radio';\nimport FormControlLabel from '@mui/material/FormControlLabel';\nimport Button from '@mui/material/Button';\n\ninterface IListDialogProps{\n    value: string\n    open: boolean\n    onClose: (arg0: string | null) => void\n    options: string[]\n    title: string\n}\n\nfunction ListDialog(props: IListDialogProps) {\n    const {\n        value: valueProp, open, onClose, options, title,\n    } = props;\n    const [value, setValue] = React.useState(valueProp);\n    const radioGroupRef = React.useRef<HTMLDivElement>(null);\n\n    React.useEffect(() => {\n        if (!open) {\n            setValue(valueProp);\n        }\n    }, [valueProp, open]);\n\n    const handleEntering = () => {\n        if (radioGroupRef.current != null) {\n            radioGroupRef?.current.focus();\n        }\n    };\n\n    const handleCancel = () => {\n        onClose(null);\n    };\n\n    const handleOk = () => {\n        onClose(value);\n    };\n\n    const handleChange = (event: any) => {\n        setValue(event.target.value);\n    };\n\n    return (\n        <Dialog\n            sx={{ '& .MuiDialog-paper': { width: '80%', maxHeight: 435 } }}\n            maxWidth=\"xs\"\n            TransitionProps={{ onEntering: handleEntering }}\n            open={open}\n        >\n            <DialogTitle>{title}</DialogTitle>\n            <DialogContent dividers>\n                <RadioGroup\n                    ref={radioGroupRef}\n                    value={value}\n                    onChange={handleChange}\n                >\n                    {options.map((option) => (\n                        <FormControlLabel\n                            value={option}\n                            key={option}\n                            control={<Radio />}\n                            label={option}\n                        />\n                    ))}\n                </RadioGroup>\n            </DialogContent>\n            <DialogActions>\n                <Button autoFocus onClick={handleCancel}>\n                    Cancel\n                </Button>\n                <Button onClick={handleOk}>Ok</Button>\n            </DialogActions>\n        </Dialog>\n    );\n}\n\nexport default function ListPreference(props: ListPreferenceProps) {\n    const {\n        title, summary, currentValue, updateValue, entryValues, entries,\n    } = props;\n    const [internalCurrentValue, setInternalCurrentValue] = useState<string>(currentValue);\n    const [dialogOpen, setDialogOpen] = useState<boolean>(false);\n\n    useEffect(() => {\n        setInternalCurrentValue(currentValue);\n    }, [currentValue]);\n\n    const findEntryOf = (value: string) => {\n        const idx = entryValues.indexOf(value);\n        return entries[idx];\n    };\n\n    const findEntryValueOf = (value: string) => {\n        const idx = entries.indexOf(value);\n        return entryValues[idx];\n    };\n\n    const getSummary = () => {\n        if (summary === '%s') {\n            return findEntryOf(currentValue);\n        }\n        return summary;\n    };\n\n    const handleDialogClose = (newValue: string | null) => {\n        if (newValue !== null) {\n            updateValue(findEntryValueOf(newValue));\n\n            // appear smooth\n            setInternalCurrentValue(newValue);\n        }\n\n        setDialogOpen(false);\n    };\n\n    return (\n        <>\n            <ListItem\n                button\n                onClick={() => setDialogOpen(true)}\n            >\n                <ListItemText primary={title} secondary={getSummary()} />\n            </ListItem>\n            <ListDialog\n                title={title}\n                open={dialogOpen}\n                onClose={handleDialogClose}\n                value={findEntryOf(internalCurrentValue)}\n                options={entries}\n            />\n        </>\n    );\n}\n","/*\n * Copyright (C) Contributors to the Suwayomi project\n *\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at https://mozilla.org/MPL/2.0/. */\n\nimport React, { useState } from 'react';\nimport ListItem from '@mui/material/ListItem';\nimport ListItemText from '@mui/material/ListItemText';\nimport Dialog from '@mui/material/Dialog';\nimport DialogTitle from '@mui/material/DialogTitle';\nimport DialogContent from '@mui/material/DialogContent';\nimport DialogContentText from '@mui/material/DialogContentText';\nimport DialogActions from '@mui/material/DialogActions';\nimport TextField from '@mui/material/TextField';\nimport Button from '@mui/material/Button';\n\nexport default function EditTextPreference(props: EditTextPreferenceProps) {\n    const {\n        title, summary, dialogTitle, dialogMessage, currentValue, updateValue,\n    } = props;\n\n    const [internalCurrentValue, setInternalCurrentValue] = useState<string>(currentValue);\n    const [dialogOpen, setDialogOpen] = useState<boolean>(false);\n\n    const handleDialogCancel = () => {\n        setDialogOpen(false);\n\n        // reset the dialog\n        setInternalCurrentValue(currentValue);\n    };\n\n    const handleDialogSubmit = () => {\n        setDialogOpen(false);\n\n        updateValue(internalCurrentValue);\n    };\n\n    return (\n        <>\n            <ListItem\n                button\n                onClick={() => setDialogOpen(true)}\n            >\n                <ListItemText\n                    primary={title}\n                    secondary={summary}\n                />\n            </ListItem>\n            <Dialog open={dialogOpen} onClose={handleDialogCancel}>\n                <DialogTitle>\n                    {dialogTitle}\n                </DialogTitle>\n                <DialogContent>\n                    <DialogContentText>\n                        {dialogMessage}\n                    </DialogContentText>\n                    <TextField\n                        autoFocus\n                        margin=\"dense\"\n                        id=\"name\"\n                        type=\"text\"\n                        fullWidth\n                        value={internalCurrentValue}\n                        onChange={(e) => setInternalCurrentValue(e.target.value)}\n                    />\n                </DialogContent>\n                <DialogActions>\n                    <Button onClick={handleDialogCancel} color=\"primary\">\n                        Cancel\n                    </Button>\n                    <Button onClick={handleDialogSubmit} color=\"primary\">\n                        OK\n                    </Button>\n                </DialogActions>\n            </Dialog>\n        </>\n    );\n}\n","/*\n * Copyright (C) Contributors to the Suwayomi project\n *\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at https://mozilla.org/MPL/2.0/. */\n\nexport default function cloneObject<T extends object>(obj: T) {\n    return JSON.parse(JSON.stringify(obj)) as T;\n}\n","/*\n * Copyright (C) Contributors to the Suwayomi project\n *\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at https://mozilla.org/MPL/2.0/. */\n\nimport React, { useState, useEffect } from 'react';\nimport ListItem from '@mui/material/ListItem';\nimport ListItemText from '@mui/material/ListItemText';\nimport Dialog from '@mui/material/Dialog';\nimport DialogTitle from '@mui/material/DialogTitle';\nimport DialogContent from '@mui/material/DialogContent';\nimport DialogActions from '@mui/material/DialogActions';\nimport FormGroup from '@mui/material/FormGroup';\nimport Checkbox from '@mui/material/Checkbox';\nimport FormControlLabel from '@mui/material/FormControlLabel';\nimport Button from '@mui/material/Button';\nimport cloneObject from 'util/cloneObject';\n\ninterface IListDialogProps{\n    selectedValues: string[]\n    open: boolean\n    onClose: (arg0: string[] | null) => void\n    values: string[]\n    title: string\n}\n\nfunction ListDialog(props: IListDialogProps) {\n    const {\n        selectedValues: selectedValuesProp, open, onClose, values, title,\n    } = props;\n    const [selectedValues, setSelectedValues] = React.useState(selectedValuesProp);\n\n    React.useEffect(() => {\n        if (!open) {\n            setSelectedValues(selectedValuesProp);\n        }\n    }, [selectedValuesProp, open]);\n\n    const handleCancel = () => {\n        onClose(null);\n    };\n\n    const handleOk = () => {\n        onClose(selectedValues);\n    };\n\n    const handleChange = (event: React.ChangeEvent<HTMLInputElement>, value: string) => {\n        const { checked } = event.target as HTMLInputElement;\n\n        const hasEntry = selectedValues.some((selectedValue) => value === selectedValue);\n        if (checked) {\n            if (!hasEntry) {\n                const selectedValuesClone = cloneObject(selectedValues) as string[];\n                selectedValuesClone.push(value);\n                setSelectedValues(selectedValuesClone);\n            }\n        } else if (hasEntry) { // not checked and has entry\n            const selectedValuesClone = cloneObject(selectedValues) as string[];\n            const index = selectedValuesClone.indexOf(value);\n            selectedValuesClone.splice(index, 1);\n            setSelectedValues(selectedValuesClone);\n        }\n    };\n\n    return (\n        <Dialog\n            sx={{ '& .MuiDialog-paper': { width: '80%', maxHeight: 435 } }}\n            maxWidth=\"xs\"\n            open={open}\n        >\n            <DialogTitle>{title}</DialogTitle>\n            <DialogContent dividers>\n                <FormGroup>\n                    {values.map((value) => (\n                        <FormControlLabel\n                            control={(\n                                <Checkbox\n                                    checked={selectedValues.some(\n                                        (selectedValue) => value === selectedValue,\n                                    )}\n                                    onChange={(e) => handleChange(e, value)}\n                                    color=\"default\"\n                                />\n                            )}\n                            label={value}\n                            key={value}\n                        />\n                    ))}\n                </FormGroup>\n            </DialogContent>\n            <DialogActions>\n                <Button autoFocus onClick={handleCancel}>\n                    Cancel\n                </Button>\n                <Button onClick={handleOk}>Ok</Button>\n            </DialogActions>\n        </Dialog>\n    );\n}\n\nexport default function MultiSelectListPreference(props: MultiSelectListPreferenceProps) {\n    const {\n        title, summary, currentValue, updateValue, entryValues, entries,\n    } = props;\n    const [internalCurrentValue, setInternalCurrentValue] = useState<string[]>(currentValue);\n    const [dialogOpen, setDialogOpen] = useState<boolean>(false);\n\n    useEffect(() => {\n        setInternalCurrentValue(currentValue);\n    }, [currentValue]);\n\n    const findEntriesOf = (values: string[]) => values.map((value) => {\n        const idx = entryValues.indexOf(value);\n        return entries[idx];\n    });\n\n    const findEntryValuesOf = (values: string[]) => values.map((value) => {\n        const idx = entries.indexOf(value);\n        return entryValues[idx];\n    });\n\n    const getSummary = () => summary;\n\n    const handleDialogClose = (newValue: string[] | null) => {\n        if (newValue !== null) {\n            // console.log(newValue);\n            updateValue(findEntryValuesOf(newValue));\n\n            // appear smooth\n            setInternalCurrentValue(newValue);\n        }\n\n        setDialogOpen(false);\n    };\n\n    return (\n        <>\n            <ListItem\n                button\n                onClick={() => setDialogOpen(true)}\n            >\n                <ListItemText primary={title} secondary={getSummary()} />\n            </ListItem>\n            <ListDialog\n                title={title}\n                open={dialogOpen}\n                onClose={handleDialogClose}\n                selectedValues={findEntriesOf(internalCurrentValue)}\n                values={entries}\n            />\n        </>\n    );\n}\n","/*\n * Copyright (C) Contributors to the Suwayomi project\n *\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at https://mozilla.org/MPL/2.0/. */\n\nimport React, { useContext, useEffect, useState } from 'react';\nimport NavbarContext from 'components/context/NavbarContext';\nimport { useParams } from 'react-router-dom';\nimport client from 'util/client';\nimport { SwitchPreferenceCompat, CheckBoxPreference } from 'components/sourceConfiguration/TwoStatePreference';\nimport ListPreference from 'components/sourceConfiguration/ListPreference';\nimport EditTextPreference from 'components/sourceConfiguration/EditTextPreference';\nimport MultiSelectListPreference from 'components/sourceConfiguration/MultiSelectListPreference';\nimport List from '@mui/material/List';\nimport cloneObject from 'util/cloneObject';\n\nfunction getPrefComponent(type: string) {\n    switch (type) {\n        case 'CheckBoxPreference':\n            return CheckBoxPreference;\n        case 'SwitchPreferenceCompat':\n            return SwitchPreferenceCompat;\n        case 'ListPreference':\n            return ListPreference;\n        case 'EditTextPreference':\n            return EditTextPreference;\n        case 'MultiSelectListPreference':\n            return MultiSelectListPreference;\n        default:\n            return CheckBoxPreference;\n    }\n}\n\nexport default function SourceConfigure() {\n    const [sourcePreferences, setSourcePreferences] = useState<SourcePreferences[]>([]);\n    const { setTitle, setAction } = useContext(NavbarContext);\n\n    const [updateTriggerHolder, setUpdateTriggerHolder] = useState<number>(0); // just a hack\n    const triggerUpdate = () => setUpdateTriggerHolder(updateTriggerHolder + 1); // just a hack\n\n    useEffect(() => { setTitle('Source Configuration'); setAction(<></>); }, []);\n\n    const { sourceId } = useParams<{ sourceId: string }>();\n\n    useEffect(() => {\n        client.get(`/api/v1/source/${sourceId}/preferences`)\n            .then((response) => response.data)\n            .then((data) => setSourcePreferences(data));\n    }, [updateTriggerHolder]);\n\n    const convertToString = (position: number, value: any): string => {\n        switch (sourcePreferences[position].props.defaultValueType) {\n            case 'Set<String>':\n                return JSON.stringify(value);\n            default:\n                return value.toString();\n        }\n    };\n\n    const updateValue = (position: number) => (\n        (value: any) => {\n            client.post(`/api/v1/source/${sourceId}/preferences`,\n                JSON.stringify({ position, value: convertToString(position, value) }))\n                .then(() => triggerUpdate());\n        }\n    );\n\n    return (\n        <>\n            <List sx={{ padding: 0 }}>\n                {sourcePreferences.map(\n                    (it, index) => {\n                        const props = cloneObject(it.props);\n                        props.updateValue = updateValue(index);\n                        props.key = index;\n\n                        // TypeScript is dumb in detecting extra props\n                        // @ts-ignore\n                        return React.createElement(getPrefComponent(it.type), props);\n                    },\n                )}\n            </List>\n        </>\n    );\n}\n","/*\n * Copyright (C) Contributors to the Suwayomi project\n *\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at https://mozilla.org/MPL/2.0/. */\n\nimport React, { useEffect, useState } from 'react';\nimport Button from '@mui/material/Button';\nimport DialogTitle from '@mui/material/DialogTitle';\nimport DialogContent from '@mui/material/DialogContent';\nimport DialogActions from '@mui/material/DialogActions';\nimport Dialog from '@mui/material/Dialog';\nimport Checkbox from '@mui/material/Checkbox';\nimport FormControlLabel from '@mui/material/FormControlLabel';\nimport FormGroup from '@mui/material/FormGroup';\nimport client from 'util/client';\n\ninterface IProps {\n    open: boolean\n    setOpen: (value: boolean) => void\n    mangaId: number\n}\n\ninterface ICategoryInfo {\n    category: ICategory\n    selected: boolean\n}\n\nexport default function CategorySelect(props: IProps) {\n    const { open, setOpen, mangaId } = props;\n    const [categoryInfos, setCategoryInfos] = useState<ICategoryInfo[]>([]);\n\n    const [updateTriggerHolder, setUpdateTriggerHolder] = useState(0); // just a hack\n    const triggerUpdate = () => setUpdateTriggerHolder(updateTriggerHolder + 1); // just a hack\n\n    useEffect(() => {\n        let tmpCategoryInfos: ICategoryInfo[] = [];\n        client.get('/api/v1/category/')\n            .then((response) => response.data)\n            .then((data: ICategory[]) => {\n                if (data.length > 0 && data[0].name === 'Default') { data.shift(); }\n                tmpCategoryInfos = data.map((category) => ({ category, selected: false }));\n            })\n            .then(() => {\n                client.get(`/api/v1/manga/${mangaId}/category/`)\n                    .then((response) => response.data)\n                    .then((data: ICategory[]) => {\n                        data.forEach((category) => {\n                            tmpCategoryInfos[category.order - 1].selected = true;\n                        });\n                        setCategoryInfos(tmpCategoryInfos);\n                    });\n            });\n    }, [updateTriggerHolder, open]);\n\n    const handleCancel = () => {\n        setOpen(false);\n    };\n\n    const handleOk = () => {\n        setOpen(false);\n    };\n\n    const handleChange = (event: React.ChangeEvent<HTMLInputElement>, categoryId: number) => {\n        const { checked } = event.target as HTMLInputElement;\n\n        const method = checked ? client.get : client.delete;\n        method(`/api/v1/manga/${mangaId}/category/${categoryId}`)\n            .then(() => triggerUpdate());\n    };\n\n    return (\n        <Dialog\n            sx={{\n                '.MuiDialog-paper': {\n                    maxHeight: 435,\n                    width: '80%',\n                },\n            }}\n            maxWidth=\"xs\"\n            open={open}\n        >\n            <DialogTitle>Set categories</DialogTitle>\n            <DialogContent dividers>\n                <FormGroup>\n                    {categoryInfos.length === 0\n                        && (\n                            <span>\n                                No categories found!\n                                <br />\n                                You should make some from settings.\n                            </span>\n                        )}\n                    {categoryInfos.map((categoryInfo) => (\n                        <FormControlLabel\n                            control={(\n                                <Checkbox\n                                    checked={categoryInfo.selected}\n                                    onChange={(e) => handleChange(e, categoryInfo.category.id)}\n                                    color=\"default\"\n                                />\n                            )}\n                            label={categoryInfo.category.name}\n                            key={categoryInfo.category.id}\n                        />\n                    ))}\n                </FormGroup>\n\n            </DialogContent>\n            <DialogActions>\n                <Button autoFocus onClick={handleCancel} color=\"primary\">\n                    Cancel\n                </Button>\n                <Button onClick={handleOk} color=\"primary\">\n                    Ok\n                </Button>\n            </DialogActions>\n        </Dialog>\n    );\n}\n","import { CircularProgress, IconButton, IconButtonProps } from '@mui/material';\nimport React, { useState } from 'react';\n\ninterface IProps extends Omit<IconButtonProps, 'onClick'> {\n    loading?: boolean\n    onClick: (e: React.MouseEvent<HTMLButtonElement, MouseEvent>) => Promise<any>\n}\n\nconst LoadingIconButton = ({\n    onClick, children, loading: iLoading, ...rest\n}: IProps) => {\n    const [sLoading, setLoading] = useState(false);\n    const loading = sLoading || iLoading;\n\n    const handleClick = (e: React.MouseEvent<HTMLButtonElement, MouseEvent>) => {\n        setLoading(true);\n        onClick(e).finally(() => setLoading(false));\n    };\n\n    return (\n        // eslint-disable-next-line react/jsx-props-no-spreading\n        <IconButton disabled={loading} {...rest} onClick={handleClick}>\n            {loading ? (<CircularProgress size={24} />) : children}\n        </IconButton>\n    );\n};\n\nLoadingIconButton.defaultProps = {\n    loading: false,\n};\n\nexport default LoadingIconButton;\n","/*\n * Copyright (C) Contributors to the Suwayomi project\n *\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at https://mozilla.org/MPL/2.0/. */\n\nimport makeStyles from '@mui/styles/makeStyles';\nimport IconButton from '@mui/material/IconButton';\nimport { Theme } from '@mui/material/styles';\nimport FavoriteIcon from '@mui/icons-material/Favorite';\nimport FavoriteBorderIcon from '@mui/icons-material/FavoriteBorder';\nimport FilterListIcon from '@mui/icons-material/FilterList';\nimport PublicIcon from '@mui/icons-material/Public';\nimport React, { useContext, useEffect, useState } from 'react';\nimport NavbarContext from 'components/context/NavbarContext';\nimport client from 'util/client';\nimport useLocalStorage from 'util/useLocalStorage';\nimport Refresh from '@mui/icons-material/Refresh';\nimport CategorySelect from './navbar/action/CategorySelect';\nimport LoadingIconButton from './atoms/LoadingIconButton';\n\nconst useStyles = (inLibrary: string) => makeStyles((theme: Theme) => ({\n    root: {\n        width: '100%',\n        [theme.breakpoints.up('md')]: {\n            position: 'sticky',\n            top: '64px',\n            left: '0px',\n            width: '50vw',\n            height: 'calc(100vh - 64px)',\n            alignSelf: 'flex-start',\n            overflowY: 'auto',\n        },\n    },\n    top: {\n        padding: '10px',\n        // [theme.breakpoints.up('md')]: {\n        //     minWidth: '50%',\n        // },\n    },\n    leftRight: {\n        display: 'flex',\n    },\n    leftSide: {\n        '& img': {\n            borderRadius: 4,\n            maxWidth: '100%',\n            minWidth: '100%',\n            height: 'auto',\n        },\n        maxWidth: '50%',\n        // [theme.breakpoints.up('md')]: {\n        //     minWidth: '100px',\n        // },\n    },\n    rightSide: {\n        marginLeft: 15,\n        maxWidth: '100%',\n        '& span': {\n            fontWeight: '400',\n        },\n        [theme.breakpoints.up('lg')]: {\n            fontSize: '1.3em',\n        },\n    },\n    buttons: {\n        display: 'flex',\n        justifyContent: 'space-around',\n        '& button': {\n            color: inLibrary === 'In Library' ? '#2196f3' : 'inherit',\n        },\n        '& span': {\n            display: 'block',\n            fontSize: '0.85em',\n        },\n        '& a': {\n            textDecoration: 'none',\n            color: '#858585',\n            '& button': {\n                color: 'inherit',\n            },\n        },\n    },\n    bottom: {\n        paddingLeft: '10px',\n        paddingRight: '10px',\n        [theme.breakpoints.up('md')]: {\n            fontSize: '1.2em',\n            // maxWidth: '50%',\n        },\n        [theme.breakpoints.up('lg')]: {\n            fontSize: '1.3em',\n        },\n    },\n    description: {\n        '& h4': {\n            marginTop: '1em',\n            marginBottom: 0,\n        },\n        '& p': {\n            textAlign: 'justify',\n            textJustify: 'inter-word',\n        },\n    },\n    genre: {\n        display: 'flex',\n        flexWrap: 'wrap',\n        '& h5': {\n            border: '2px solid #2196f3',\n            borderRadius: '1.13em',\n            marginRight: '1em',\n            marginTop: 0,\n            marginBottom: '10px',\n            padding: '0.3em',\n            color: '#2196f3',\n        },\n    },\n}));\n\ninterface IProps{\n    manga: IManga\n    onRefresh: () => Promise<any>\n    refreshing: boolean\n}\n\nfunction getSourceName(source: ISource) {\n    if (source.displayName !== null) {\n        return source.displayName;\n    }\n    return source.id;\n}\n\nfunction getValueOrUnknown(val: string) {\n    return val || 'UNKNOWN';\n}\n\nexport default function MangaDetails({ manga, onRefresh, refreshing }: IProps) {\n    const { setAction } = useContext(NavbarContext);\n\n    const [inLibrary, setInLibrary] = useState<string>(\n        manga.inLibrary ? 'In Library' : 'Add To Library',\n    );\n\n    const [categoryDialogOpen, setCategoryDialogOpen] = useState<boolean>(false);\n\n    useEffect(() => {\n        setAction(\n            <>\n                <LoadingIconButton loading={refreshing} onClick={onRefresh}>\n                    <Refresh />\n                </LoadingIconButton>\n                {inLibrary === 'In Library' && (\n                    <>\n                        <IconButton\n                            onClick={() => setCategoryDialogOpen(true)}\n                            aria-label=\"display more actions\"\n                            edge=\"end\"\n                            color=\"inherit\"\n                            size=\"large\"\n                        >\n                            <FilterListIcon />\n                        </IconButton>\n                        <CategorySelect\n                            open={categoryDialogOpen}\n                            setOpen={setCategoryDialogOpen}\n                            mangaId={manga.id}\n                        />\n                    </>\n                )}\n            </>,\n        );\n    }, [inLibrary, categoryDialogOpen, refreshing, onRefresh]);\n\n    const [serverAddress] = useLocalStorage<String>('serverBaseURL', '');\n    const [useCache] = useLocalStorage<boolean>('useCache', true);\n\n    const classes = useStyles(inLibrary)();\n\n    function addToLibrary() {\n        // setInLibrary('adding');\n        client.get(`/api/v1/manga/${manga.id}/library/`).then(() => {\n            setInLibrary('In Library');\n        });\n    }\n\n    function removeFromLibrary() {\n        // setInLibrary('removing');\n        client.delete(`/api/v1/manga/${manga.id}/library/`).then(() => {\n            setInLibrary('Add To Library');\n        });\n    }\n\n    function handleButtonClick() {\n        if (inLibrary === 'Add To Library') {\n            addToLibrary();\n        } else {\n            removeFromLibrary();\n        }\n    }\n\n    return (\n        <div className={classes.root}>\n            <div className={classes.top}>\n                <div className={classes.leftRight}>\n                    <div className={classes.leftSide}>\n                        <img src={`${serverAddress}${manga.thumbnailUrl}?useCache=${useCache}`} alt=\"Manga Thumbnail\" />\n                    </div>\n                    <div className={classes.rightSide}>\n                        <h1>\n                            {manga.title}\n                        </h1>\n                        <h3>\n                            {'Author: '}\n                            <span>{getValueOrUnknown(manga.author)}</span>\n                        </h3>\n                        <h3>\n                            {'Artist: '}\n                            <span>{getValueOrUnknown(manga.artist)}</span>\n                        </h3>\n                        <h3>\n                            {`Status: ${manga.status}`}\n                        </h3>\n                        <h3>\n                            {`Source: ${getSourceName(manga.source)}`}\n                        </h3>\n                    </div>\n                </div>\n                <div className={classes.buttons}>\n                    <div>\n                        <IconButton onClick={() => handleButtonClick()} size=\"large\">\n                            {inLibrary === 'In Library' && <FavoriteIcon />}\n                            {inLibrary !== 'In Library' && <FavoriteBorderIcon />}\n                            <span>{inLibrary}</span>\n                        </IconButton>\n                    </div>\n                    { /* eslint-disable-next-line react/jsx-no-target-blank */ }\n                    <a href={manga.realUrl} target=\"_blank\">\n                        <IconButton size=\"large\">\n                            <PublicIcon />\n                            <span>Open Site</span>\n                        </IconButton>\n                    </a>\n                </div>\n            </div>\n            <div className={classes.bottom}>\n                <div className={classes.description}>\n                    <h4>About</h4>\n                    <p>{manga.description}</p>\n                </div>\n                <div className={classes.genre}>\n                    {manga.genre.map((g) => <h5 key={g}>{g}</h5>)}\n                </div>\n            </div>\n        </div>\n    );\n}\n","/*\n * Copyright (C) Contributors to the Suwayomi project\n *\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at https://mozilla.org/MPL/2.0/. */\n\nimport React, { useState, useCallback } from 'react';\nimport FilterListIcon from '@mui/icons-material/FilterList';\nimport {\n    Drawer, FormControlLabel, IconButton, Typography, Tab, Tabs, Radio, RadioGroup, Stack,\n} from '@mui/material';\nimport ThreeStateCheckbox from 'components/util/ThreeStateCheckbox';\nimport { Box } from '@mui/system';\nimport { ArrowDownward, ArrowUpward } from '@mui/icons-material';\nimport TabPanel from 'components/util/TabPanel';\n\ninterface IProps{\n    options: ChapterListOptions\n    optionsDispatch: React.Dispatch<ChapterOptionsReducerAction>\n}\n\nconst SortTab: [ChapterSortMode, string][] = [['source', 'By Source'], ['fetchedAt', 'By Fetch date']];\n\nexport default function ChapterOptions(props: IProps) {\n    const { options, optionsDispatch } = props;\n    const [filtersOpen, setFiltersOpen] = useState(false);\n    const [tabNum, setTabNum] = useState(0);\n\n    const filterOptions = useCallback(\n        (value: NullAndUndefined<boolean>, name: string) => {\n            optionsDispatch({ type: 'filter', filterType: name.toLowerCase(), filterValue: value });\n        }, [],\n    );\n\n    return (\n        <>\n            <IconButton\n                onClick={() => setFiltersOpen(!filtersOpen)}\n                color={options.active ? 'warning' : 'default'}\n            >\n                <FilterListIcon />\n            </IconButton>\n\n            <Drawer\n                anchor=\"bottom\"\n                open={filtersOpen}\n                onClose={() => setFiltersOpen(false)}\n                PaperProps={{\n                    style: {\n                        maxWidth: 600,\n                        padding: '1em',\n                        marginLeft: 'auto',\n                        marginRight: 'auto',\n                        minHeight: '150px',\n                    },\n                }}\n            >\n                <Box>\n                    <Tabs\n                        key={tabNum}\n                        value={tabNum}\n                        variant=\"fullWidth\"\n                        onChange={(e, newTab) => setTabNum(newTab)}\n                        indicatorColor=\"primary\"\n                        textColor=\"primary\"\n                    >\n                        <Tab value={0} label=\"Filter\" />\n                        <Tab value={1} label=\"Sort\" />\n                        <Tab value={2} label=\"Display\" />\n                    </Tabs>\n                    <TabPanel index={0} currentIndex={tabNum}>\n                        <Box sx={{ display: 'flex', flexDirection: 'column', minHeight: '150px' }}>\n                            <FormControlLabel control={<ThreeStateCheckbox name=\"Unread\" checked={options.unread} onChange={filterOptions} />} label=\"Unread\" />\n                            <FormControlLabel control={<ThreeStateCheckbox name=\"Downloaded\" checked={options.downloaded} onChange={filterOptions} />} label=\"Downloaded\" />\n                            <FormControlLabel control={<ThreeStateCheckbox name=\"Bookmarked\" checked={options.bookmarked} onChange={filterOptions} />} label=\"Bookmarked\" />\n                        </Box>\n                    </TabPanel>\n                    <TabPanel index={1} currentIndex={tabNum}>\n                        <Box sx={{ display: 'flex', flexDirection: 'column', minHeight: '150px' }}>\n                            {\n                                SortTab.map((item) => (\n                                    <Stack\n                                        direction=\"row\"\n                                        alignItems=\"center\"\n                                        spacing=\"2\"\n                                        sx={{ py: 1, height: 42 }}\n                                        onClick={() => (item[0] !== options.sortBy\n                                            ? optionsDispatch({ type: 'sortBy', sortBy: item[0] })\n                                            : optionsDispatch({ type: 'sortReverse' }))}\n                                    >\n                                        <Box sx={{ height: 24, width: 24 }}>\n                                            {\n                                                options.sortBy === item[0]\n                                                && (options.reverse\n                                                    ? (<ArrowUpward color=\"primary\" />) : (<ArrowDownward color=\"primary\" />))\n                                            }\n                                        </Box>\n                                        <Typography>{item[1]}</Typography>\n                                    </Stack>\n\n                                ))\n                            }\n                        </Box>\n                    </TabPanel>\n                    <TabPanel index={2} currentIndex={tabNum}>\n                        <Stack flexDirection=\"column\" sx={{ minHeight: '150px' }}>\n                            <RadioGroup name=\"chapter-title-display\" onChange={() => optionsDispatch({ type: 'showChapterNumber' })} value={options.showChapterNumber}>\n                                <FormControlLabel label=\"By Source Title\" value=\"title\" control={<Radio checked={!options.showChapterNumber} />} />\n                                <FormControlLabel label=\"By Chapter Number\" value=\"chapterNumber\" control={<Radio checked={options.showChapterNumber} />} />\n                            </RadioGroup>\n                        </Stack>\n                    </TabPanel>\n                </Box>\n            </Drawer>\n\n        </>\n    );\n}\n","/*\n * Copyright (C) Contributors to the Suwayomi project\n *\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at https://mozilla.org/MPL/2.0/. */\n\nimport React from 'react';\nimport { useTheme } from '@mui/material/styles';\nimport { Link } from 'react-router-dom';\nimport Card from '@mui/material/Card';\nimport CardContent from '@mui/material/CardContent';\nimport IconButton from '@mui/material/IconButton';\nimport MoreVertIcon from '@mui/icons-material/MoreVert';\nimport Typography from '@mui/material/Typography';\nimport Menu from '@mui/material/Menu';\nimport MenuItem from '@mui/material/MenuItem';\nimport BookmarkIcon from '@mui/icons-material/Bookmark';\n\nimport client from 'util/client';\nimport { Box } from '@mui/system';\n\ninterface IProps{\n    chapter: IChapter\n    triggerChaptersUpdate: () => void\n    downloadStatusString: string\n    showChapterNumber: boolean\n}\n\nexport default function ChapterCard(props: IProps) {\n    const theme = useTheme();\n\n    const {\n        chapter, triggerChaptersUpdate, downloadStatusString, showChapterNumber,\n    } = props;\n\n    const dateStr = chapter.uploadDate && new Date(chapter.uploadDate).toLocaleDateString();\n\n    const [anchorEl, setAnchorEl] = React.useState<null | HTMLElement>(null);\n\n    const handleClick = (event: React.MouseEvent<HTMLButtonElement>) => {\n        // prevent parent tags from getting the event\n        event.stopPropagation();\n        event.preventDefault();\n\n        setAnchorEl(event.currentTarget);\n    };\n\n    const handleClose = () => {\n        setAnchorEl(null);\n    };\n\n    const sendChange = (key: string, value: any) => {\n        handleClose();\n\n        const formData = new FormData();\n        formData.append(key, value);\n        if (key === 'read') { formData.append('lastPageRead', '1'); }\n        client.patch(`/api/v1/manga/${chapter.mangaId}/chapter/${chapter.index}`, formData)\n            .then(() => triggerChaptersUpdate());\n    };\n\n    const downloadChapter = () => {\n        client.get(`/api/v1/download/${chapter.mangaId}/chapter/${chapter.index}`);\n        handleClose();\n    };\n\n    const deleteChapter = () => {\n        client.delete(`/api/v1/manga/${chapter.mangaId}/chapter/${chapter.index}`)\n            .then(() => triggerChaptersUpdate());\n\n        handleClose();\n    };\n\n    const readChapterColor = theme.palette.mode === 'dark' ? '#acacac' : '#b0b0b0';\n\n    return (\n        <>\n            <li>\n                <Card\n                    sx={{\n                        margin: '10px',\n                        ':hover': {\n                            backgroundColor: 'action.hover',\n                            transition: 'background-color 100ms cubic-bezier(0.4, 0, 0.2, 1) 0ms',\n                            cursor: 'pointer',\n                        },\n                        ':active': {\n                            backgroundColor: 'action.selected',\n                            transition: 'background-color 100ms cubic-bezier(0.4, 0, 0.2, 1) 0ms',\n                        },\n                    }}\n                >\n                    <Link\n                        to={`/manga/${chapter.mangaId}/chapter/${chapter.index}`}\n                        style={{\n                            textDecoration: 'none',\n                            color: chapter.read ? readChapterColor : theme.palette.text.primary,\n                        }}\n                    >\n                        <CardContent\n                            sx={{\n                                display: 'flex',\n                                justifyContent: 'space-between',\n                                alignItems: 'center',\n                                padding: 2,\n                            }}\n                        >\n                            <Box sx={{ display: 'flex' }}>\n                                <div style={{ display: 'flex', flexDirection: 'column' }}>\n                                    <Typography variant=\"h5\" component=\"h2\">\n                                        <span style={{ color: theme.palette.primary.dark }}>\n                                            {chapter.bookmarked && <BookmarkIcon />}\n                                        </span>\n                                        { showChapterNumber ? `Chapter ${chapter.chapterNumber}` : chapter.name}\n                                    </Typography>\n                                    <Typography variant=\"caption\" display=\"block\" gutterBottom>\n                                        {chapter.scanlator}\n                                        {chapter.scanlator && ' '}\n                                        {dateStr}\n                                        {downloadStatusString}\n                                    </Typography>\n                                </div>\n                            </Box>\n\n                            <IconButton aria-label=\"more\" onClick={handleClick} size=\"large\">\n                                <MoreVertIcon />\n                            </IconButton>\n                        </CardContent>\n                    </Link>\n                    <Menu\n                        anchorEl={anchorEl}\n                        keepMounted\n                        open={Boolean(anchorEl)}\n                        onClose={handleClose}\n                    >\n                        {downloadStatusString.endsWith('Downloaded')\n                             && <MenuItem onClick={deleteChapter}>Delete</MenuItem>}\n                        {downloadStatusString.length === 0\n                         && <MenuItem onClick={downloadChapter}>Download</MenuItem> }\n                        <MenuItem onClick={() => sendChange('bookmarked', !chapter.bookmarked)}>\n                            {chapter.bookmarked && 'Remove bookmark'}\n                            {!chapter.bookmarked && 'Bookmark'}\n                        </MenuItem>\n                        <MenuItem onClick={() => sendChange('read', !chapter.read)}>\n                            {`Mark as ${chapter.read ? 'unread' : 'read'}`}\n                        </MenuItem>\n                        <MenuItem onClick={() => sendChange('markPrevRead', true)}>\n                            Mark previous as Read\n                        </MenuItem>\n                    </Menu>\n                </Card>\n            </li>\n        </>\n    );\n}\n","/*\n * Copyright (C) Contributors to the Suwayomi project\n *\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at https://mozilla.org/MPL/2.0/. */\n\nexport const defaultChapterOptions: ChapterListOptions = {\n    active: false,\n    unread: undefined,\n    downloaded: undefined,\n    bookmarked: undefined,\n    reverse: false,\n    sortBy: 'source',\n    showChapterNumber: false,\n};\n\nexport function chapterOptionsReducer(state: ChapterListOptions,\n    actions: ChapterOptionsReducerAction)\n    : ChapterListOptions {\n    switch (actions.type) {\n        case 'filter':\n            // eslint-disable-next-line no-case-declarations\n            const active = state.unread !== false\n            && state.downloaded !== false\n            && state.bookmarked !== false;\n            return {\n                ...state,\n                active,\n                [actions.filterType!]: actions.filterValue,\n            };\n        case 'sortBy':\n            return { ...state, sortBy: actions.sortBy };\n        case 'sortReverse':\n            return { ...state, reverse: !state.reverse };\n        case 'showChapterNumber':\n            return { ...state, showChapterNumber: !state.showChapterNumber };\n        default:\n            throw Error('This is not a valid Action');\n    }\n}\n\nexport function unreadFilter(unread: NullAndUndefined<boolean>, { read: isChapterRead }: IChapter) {\n    switch (unread) {\n        case true:\n            return !isChapterRead;\n        case false:\n            return isChapterRead;\n        default:\n            return true;\n    }\n}\n\nexport function downloadFilter(downloaded: NullAndUndefined<boolean>,\n    { downloaded: chapterDownload }: IChapter) {\n    switch (downloaded) {\n        case true:\n            return chapterDownload;\n        case false:\n            return !chapterDownload;\n        default:\n            return true;\n    }\n}\n\nexport function bookmarkdFilter(bookmarked: NullAndUndefined<boolean>,\n    { bookmarked: chapterBookmarked }: IChapter) {\n    switch (bookmarked) {\n        case true:\n            return chapterBookmarked;\n        case false:\n            return !chapterBookmarked;\n        default:\n            return true;\n    }\n}\n\nexport function filterAndSortChapters(chapters: IChapter[], options: ChapterListOptions)\n    : IChapter[] {\n    const filtered = options.active\n        ? chapters.filter((chp) => unreadFilter(options.unread, chp)\n    && downloadFilter(options.downloaded, chp)\n    && bookmarkdFilter(options.bookmarked, chp))\n        : [...chapters];\n    const Sorted = options.sortBy === 'fetchedAt'\n        ? filtered.sort((a, b) => a.fetchedAt - b.fetchedAt)\n        : filtered;\n    if (options.reverse) {\n        Sorted.reverse();\n    }\n    return Sorted;\n}\n\nexport function findFirstUnreadChapter(chapters: IChapter[]): IChapter | undefined {\n    for (let index = chapters.length - 1; index >= 0; index--) {\n        if (!chapters[index].read) return chapters[index];\n    }\n    return undefined;\n}\n","/*\n * Copyright (C) Contributors to the Suwayomi project\n *\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at https://mozilla.org/MPL/2.0/. */\n\nimport React from 'react';\nimport { Fab } from '@mui/material';\nimport { Link } from 'react-router-dom';\nimport { PlayArrow } from '@mui/icons-material';\n\ninterface ResumeFABProps{\n    chapter: IChapter\n    mangaId: string\n}\n\nexport default function ResumeFab(props: ResumeFABProps) {\n    const { chapter: { index, lastPageRead }, mangaId } = props;\n    return (\n        <Fab\n            sx={{ position: 'fixed', bottom: '2em', right: '3em' }}\n            component={Link}\n            variant=\"extended\"\n            color=\"primary\"\n            to={`/manga/${mangaId}/chapter/${index}/page/${lastPageRead}`}\n        >\n            <PlayArrow />\n            {index === 1 ? 'Start' : 'Resume' }\n        </Fab>\n    );\n}\n","import { useEffect, useState } from 'react';\n\nconst baseWebsocketUrl = JSON.parse(window.localStorage.getItem('serverBaseURL')!).replace('http', 'ws');\n\nconst useSubscription = <T>(path: string, callback?: (newValue: T) => boolean | void) => {\n    const [state, setState] = useState<T | undefined>();\n\n    useEffect(() => {\n        const wsc = new WebSocket(`${baseWebsocketUrl}${path}`);\n\n        wsc.onmessage = (e) => {\n            const data = JSON.parse(e.data) as T;\n            if (callback) {\n                // If callback is specified, only update state if callback returns true\n                // This is so that useSubscription can be used without causing rerender\n                if (callback(data) === true) {\n                    setState(data);\n                }\n            } else {\n                setState(data);\n            }\n        };\n\n        return () => wsc.close();\n    }, [path]);\n\n    return { data: state };\n};\n\nexport default useSubscription;\n","/*\n * Copyright (C) Contributors to the Suwayomi project\n *\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at https://mozilla.org/MPL/2.0/. */\n\nimport React, {\n    useState, useEffect, useCallback, useMemo,\n} from 'react';\nimport { Box, styled } from '@mui/system';\nimport { Virtuoso } from 'react-virtuoso';\nimport Typography from '@mui/material/Typography';\nimport { CircularProgress, Stack } from '@mui/material';\nimport makeToast from 'components/util/Toast';\nimport ChapterOptions from 'components/chapter/ChapterOptions';\nimport ChapterCard from 'components/chapter/ChapterCard';\nimport { useReducerLocalStorage } from 'util/useLocalStorage';\nimport {\n    chapterOptionsReducer, defaultChapterOptions, findFirstUnreadChapter,\n    filterAndSortChapters,\n} from 'components/chapter/util';\nimport ResumeFab from 'components/chapter/ResumeFAB';\nimport useSubscription from 'components/library/useSubscription';\n\nconst CustomVirtuoso = styled(Virtuoso)(({ theme }) => ({\n    listStyle: 'none',\n    padding: 0,\n    minHeight: '200px',\n    [theme.breakpoints.up('md')]: {\n        width: '50vw',\n        // 64px for the Appbar, 48px for the ChapterCount Header\n        height: 'calc(100vh - 64px - 48px)',\n        margin: 0,\n    },\n}));\n\ninterface IProps {\n    id: string\n    chaptersData: IChapter[] | undefined\n    onRefresh: () => void;\n}\n\nexport default function ChapterList({ id, chaptersData, onRefresh }: IProps) {\n    const noChaptersFound = chaptersData?.length === 0;\n    const chapters = useMemo(() => chaptersData ?? [], [chaptersData]);\n\n    const [firstUnreadChapter, setFirstUnreadChapter] = useState<IChapter>();\n    const [filteredChapters, setFilteredChapters] = useState<IChapter[]>([]);\n    // eslint-disable-next-line max-len\n    const [options, optionsDispatch] = useReducerLocalStorage<ChapterListOptions, ChapterOptionsReducerAction>(\n        chapterOptionsReducer, `${id}filterOptions`, defaultChapterOptions,\n    );\n\n    const queue = useSubscription<IQueue>('/api/v1/downloads').data?.queue;\n\n    const downloadStatusStringFor = useCallback((chapter: IChapter) => {\n        let rtn = '';\n        if (chapter.downloaded) {\n            rtn = '  Downloaded';\n        }\n        queue?.forEach((q) => {\n            if (chapter.index === q.chapterIndex && chapter.mangaId === q.mangaId) {\n                rtn = `  Downloading (${(q.progress * 100).toFixed(2)}%)`;\n            }\n        });\n        return rtn;\n    }, [queue]);\n\n    useEffect(() => {\n        const filtered = filterAndSortChapters(chapters, options);\n        setFilteredChapters(filtered);\n        setFirstUnreadChapter(findFirstUnreadChapter(filtered));\n    }, [options, chapters]);\n\n    useEffect(() => {\n        if (noChaptersFound) {\n            makeToast('No chapters found', 'warning');\n        }\n    }, [noChaptersFound]);\n\n    if (chapters.length === 0 || noChaptersFound) {\n        return (\n            <div style={{\n                margin: '10px auto',\n                display: 'flex',\n                justifyContent: 'center',\n            }}\n            >\n                <CircularProgress thickness={5} />\n            </div>\n        );\n    }\n\n    return (\n        <>\n            <Stack direction=\"column\">\n                <Box sx={{\n                    display: 'flex', justifyContent: 'space-between', px: 1.5, mt: 1,\n                }}\n                >\n                    <Typography variant=\"h5\">\n                        {`${filteredChapters.length} Chapters`}\n                    </Typography>\n                    <ChapterOptions options={options} optionsDispatch={optionsDispatch} />\n                </Box>\n\n                <CustomVirtuoso\n                    style={{ // override Virtuoso default values and set them with class\n                        height: 'undefined',\n                        // 900 is the md breakpoint in MUI\n                        overflowY: window.innerWidth < 900 ? 'visible' : 'auto',\n                    }}\n                    totalCount={filteredChapters.length}\n                    itemContent={(index:number) => (\n                        <ChapterCard\n                            showChapterNumber={options.showChapterNumber}\n                            chapter={filteredChapters[index]}\n                            downloadStatusString={downloadStatusStringFor(filteredChapters[index])}\n                            triggerChaptersUpdate={onRefresh}\n                        />\n                    )}\n                    useWindowScroll={window.innerWidth < 900}\n                    overscan={window.innerHeight * 0.5}\n                />\n            </Stack>\n            {firstUnreadChapter && <ResumeFab chapter={firstUnreadChapter} mangaId={id} />}\n        </>\n    );\n}\n","/*\n * Copyright (C) Contributors to the Suwayomi project\n *\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at https://mozilla.org/MPL/2.0/. */\n\nimport React, {\n    useCallback, useEffect, useContext, useState, useRef,\n} from 'react';\nimport useSWR from 'swr';\nimport { Box } from '@mui/system';\nimport MangaDetails from 'components/MangaDetails';\nimport NavbarContext from 'components/context/NavbarContext';\nimport { fetcher } from 'util/client';\nimport LoadingPlaceholder from 'components/util/LoadingPlaceholder';\nimport ChapterList from 'components/chapter/ChapterList';\nimport { useParams } from 'react-router-dom';\n\nconst AUTOFETCH_AGE = 60 * 60 * 24; // 24 hours\n\nexport default function Manga() {\n    const { setTitle } = useContext(NavbarContext);\n    const { id } = useParams<{ id: string }>();\n    const autofetchedRef = useRef(false);\n\n    const { data: manga, error, mutate: mutateManga } = useSWR<IManga>(`/api/v1/manga/${id}/?onlineFetch=false`);\n    const { data: chaptersData, mutate: mutateChapters } = useSWR<IChapter[]>(`/api/v1/manga/${id}/chapters?onlineFetch=false`);\n\n    const [fetchingOnline, setFetchingOnline] = useState(false);\n    const fetchOnline = useCallback(async () => {\n        setFetchingOnline(true);\n        await Promise.all([\n            fetcher(`/api/v1/manga/${id}/?onlineFetch=true`)\n                .then((res) => mutateManga(res, { revalidate: false })),\n            fetcher(`/api/v1/manga/${id}/chapters?onlineFetch=true`)\n                .then((res) => mutateChapters(res, { revalidate: false })),\n        ]);\n        setFetchingOnline(false);\n    }, [mutateManga, mutateChapters, id]);\n\n    useEffect(() => {\n        // Automatically fetch manga from source if data is older then 24 hours\n        // Automatic fetch is done only once, to prevent issues when server does\n        // not update age for some reason (ie. error on source side)\n        if (manga == null) return;\n        if (\n            manga.inLibrary\n            && (manga.age > AUTOFETCH_AGE || manga.chaptersAge > AUTOFETCH_AGE)\n            && autofetchedRef.current === false\n        ) {\n            autofetchedRef.current = true;\n            fetchOnline();\n        }\n    }, [manga]);\n\n    useEffect(() => {\n        setTitle(manga?.title ?? 'Manga');\n    }, [manga?.title]);\n\n    return (\n        <Box sx={{ display: { md: 'flex' }, overflow: 'hidden' }}>\n            {!manga && !error && <LoadingPlaceholder />}\n            {manga && (\n                <MangaDetails\n                    refreshing={fetchingOnline}\n                    manga={manga}\n                    onRefresh={fetchOnline}\n                />\n            )}\n            <ChapterList id={id} chaptersData={chaptersData} onRefresh={() => mutateChapters()} />\n        </Box>\n    );\n}\n","/*\n * Copyright (C) Contributors to the Suwayomi project\n *\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at https://mozilla.org/MPL/2.0/.\n */\n\nimport React from 'react';\nimport MangaGrid, { IMangaGridProps } from 'components/MangaGrid';\n\nconst FILTERED_OUT_MESSAGE = 'There are no Manga matching this filter';\n\nfunction filterManga(mangas: IMangaCard[]): IMangaCard[] {\n    return mangas;\n}\n\nexport default function SourceMangaGrid(props: IMangaGridProps) {\n    const {\n        mangas, isLoading, hasNextPage, lastPageNum,\n        setLastPageNum, message, messageExtra, gridLayout,\n    } = props;\n\n    const filteredManga = filterManga(mangas);\n    const showFilteredOutMessage = filteredManga.length === 0 && mangas.length > 0;\n\n    return (\n        <MangaGrid\n            mangas={filteredManga}\n            isLoading={isLoading}\n            hasNextPage={hasNextPage}\n            lastPageNum={lastPageNum}\n            setLastPageNum={setLastPageNum}\n            message={showFilteredOutMessage ? FILTERED_OUT_MESSAGE : message}\n            messageExtra={messageExtra}\n            gridLayout={gridLayout}\n        />\n    );\n}\n","/*\n * Copyright (C) Contributors to the Suwayomi project\n *\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at https://mozilla.org/MPL/2.0/.\n */\n\nimport React from 'react';\nimport { Box } from '@mui/system';\nimport InputLabel from '@mui/material/InputLabel';\nimport FormControl from '@mui/material/FormControl';\nimport MenuItem from '@mui/material/MenuItem';\nimport Select from '@mui/material/Select';\n\ninterface Props {\n    values: any\n    name: string\n    state: number\n    selected: Selected | undefined\n    position: number\n    updateFilterValue: Function\n    group: number | undefined\n    update: any\n}\n\ninterface Selected {\n    displayname: string\n    value: string\n    _value: string\n}\n\nfunction hasSelect(\n    values: Selected[],\n    name: string,\n    state: number,\n    position: number,\n    updateFilterValue: Function,\n    update: any,\n    group?: number,\n) {\n    const [val, setval] = React.useState(state);\n    if (values) {\n        const handleChange = (event: { target: { name: any; value: any; }; }) => {\n            const vall = values.map((e) => e.displayname).indexOf(`${event.target.value}`);\n            setval(vall);\n            const upd = update.filter((e: {\n                position: number; group: number | undefined;\n            }) => !(position === e.position && group === e.group));\n            updateFilterValue([...upd, { position, state: vall.toString(), group }]);\n        };\n\n        const rett = values.map((e: Selected) => (\n            <MenuItem\n                key={`${name} ${e.displayname}`}\n                value={e.displayname}\n            >\n                {\n                    e.displayname\n                }\n            </MenuItem>\n        ));\n        return (\n            <Box key={name} sx={{ display: 'flex', flexDirection: 'column', minWidth: 120 }}>\n                <FormControl fullWidth>\n                    <InputLabel sx={{ margin: '10px 0 10px 0' }}>\n                        {name}\n                    </InputLabel>\n                    <Select\n                        name={name}\n                        value={values[val].displayname}\n                        label={name}\n                        onChange={handleChange}\n                        autoWidth\n                        sx={{ margin: '10px 0 10px 0' }}\n                    >\n                        {rett}\n                    </Select>\n                </FormControl>\n            </Box>\n        );\n    }\n    return (<></>);\n}\n\nfunction noSelect(\n    values: string[],\n    name: string,\n    state: number,\n    position: number,\n    updateFilterValue: Function,\n    update: any,\n    group?: number,\n) {\n    const [val, setval] = React.useState(state);\n\n    if (values) {\n        const handleChange = (event: { target: { name: any; value: any; }; }) => {\n            const vall = values.indexOf(`${event.target.value}`);\n            setval(vall);\n            const upd = update.filter((e: {\n                position: number; group: number | undefined;\n            }) => !(position === e.position && group === e.group));\n            updateFilterValue([...upd, { position, state: vall.toString(), group }]);\n        };\n\n        const rett = values.map((value: string) => (<MenuItem key={`${name} ${value}`} value={value}>{value}</MenuItem>));\n        return (\n            <Box key={name} sx={{ display: 'flex', flexDirection: 'column', minWidth: 120 }}>\n                <FormControl fullWidth>\n                    <InputLabel sx={{ margin: '10px 0 10px 0' }}>\n                        {name}\n                    </InputLabel>\n                    <Select\n                        name={name}\n                        value={values[val]}\n                        label={name}\n                        onChange={handleChange}\n                        autoWidth\n                        sx={{ margin: '10px 0 10px 0' }}\n                    >\n                        {rett}\n                    </Select>\n                </FormControl>\n            </Box>\n        );\n    }\n    return (<></>);\n}\n\nexport default function SelectFilter({\n    values,\n    name,\n    state,\n    selected,\n    position,\n    updateFilterValue,\n    update,\n    group,\n}: Props) {\n    if (selected === undefined) {\n        return noSelect(\n            values,\n            name,\n            state,\n            position,\n            updateFilterValue,\n            update,\n            group,\n        );\n    }\n\n    return hasSelect(\n        values,\n        name,\n        state,\n        position,\n        updateFilterValue,\n        update,\n        group,\n    );\n}\n","/*\n * Copyright (C) Contributors to the Suwayomi project\n *\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at https://mozilla.org/MPL/2.0/.\n */\nimport React from 'react';\nimport { Box } from '@mui/system';\nimport { Checkbox, FormControlLabel } from '@mui/material';\n\ninterface Props {\n    state: boolean\n    name: string\n    position: number\n    group: number | undefined\n    updateFilterValue: Function\n    update: any\n}\n\nexport default function CheckBoxFilter(props: Props) {\n    const {\n        state,\n        name,\n        position,\n        group,\n        updateFilterValue,\n        update,\n    } = props;\n    const [val, setval] = React.useState(state);\n\n    const handleChange = (event: { target: { name: any; checked: any; }; }) => {\n        setval(event.target.checked);\n        const upd = update.filter((e: {\n            position: number; group: number | undefined;\n        }) => !(position === e.position && group === e.group));\n        updateFilterValue([...upd, { position, state: event.target.checked.toString(), group }]);\n    };\n\n    if (state !== undefined) {\n        return (\n            <Box sx={{ display: 'flex', flexDirection: 'column', minWidth: 120 }}>\n                <FormControlLabel\n                    key={name}\n                    control={(\n                        <Checkbox\n                            name={name}\n                            checked={val}\n                            onChange={handleChange}\n                        />\n                    )}\n                    label={name}\n                />\n            </Box>\n        );\n    }\n    return (<></>);\n}\n","/*\n * Copyright (C) Contributors to the Suwayomi project\n *\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at https://mozilla.org/MPL/2.0/.\n */\n\nimport React from 'react';\nimport { Box } from '@mui/system';\n\ninterface Props {\n    name: string\n}\n\nexport default function HeaderFilter(props: Props) {\n    const { name } = props;\n    return (<Box key={name}>{name}</Box>);\n}\n","/*\n * Copyright (C) Contributors to the Suwayomi project\n *\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at https://mozilla.org/MPL/2.0/.\n */\nimport React from 'react';\nimport { Box } from '@mui/system';\n\ninterface Props {\n    name: string\n}\n\nexport default function SeperatorFilter(props: Props) {\n    const { name } = props;\n    return (<Box key={name}>{name}</Box>);\n}\n","/*\n * Copyright (C) Contributors to the Suwayomi project\n *\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at https://mozilla.org/MPL/2.0/.\n */\nimport React from 'react';\nimport { Box } from '@mui/system';\nimport FormControl from '@mui/material/FormControl';\nimport {\n    Collapse,\n    List,\n    ListItem,\n    ListItemButton, ListItemIcon, ListItemText,\n} from '@mui/material';\nimport ArrowDownwardIcon from '@mui/icons-material/ArrowDownward';\nimport ArrowUpwardIcon from '@mui/icons-material/ArrowUpward';\nimport { ExpandLess, ExpandMore } from '@mui/icons-material';\n\ninterface Props {\n    values: any\n    name: string\n    state: IState\n    position: number\n    group: number | undefined\n    updateFilterValue: Function\n    update: any\n}\n\nexport default function SortFilter(props: Props) {\n    const {\n        values,\n        name,\n        state,\n        position,\n        group,\n        updateFilterValue,\n        update,\n    } = props;\n    const [val, setval] = React.useState(state);\n\n    const [open, setOpen] = React.useState(false);\n\n    const handleClick = () => {\n        setOpen(!open);\n    };\n\n    if (values) {\n        const handleChange = (event:\n        React.MouseEvent<HTMLDivElement, MouseEvent>, index: number) => {\n            const tmp = val;\n            if (tmp.index === index) {\n                tmp.ascending = !tmp.ascending;\n            } else {\n                tmp.ascending = true;\n            }\n            tmp.index = index;\n            setval(tmp);\n            const upd = update.filter((e: {\n                position: number; group: number | undefined;\n            }) => !(position === e.position && group === e.group));\n            updateFilterValue([...upd, { position, state: JSON.stringify(tmp), group }]);\n        };\n\n        const ret = (\n            <FormControl fullWidth>\n                <ListItemButton onClick={handleClick}>\n                    <ListItemText primary={name} />\n                    {open ? <ExpandLess /> : <ExpandMore />}\n                </ListItemButton>\n                <Collapse in={open}>\n                    <List>\n                        {values.map((value: string, index: number) => {\n                            let icon;\n                            if (val.index === index) {\n                                icon = val.ascending ? (<ArrowUpwardIcon color=\"primary\" />)\n                                    : (<ArrowDownwardIcon color=\"primary\" />);\n                            }\n                            return (\n                                <ListItem disablePadding key={`${name} ${value}`}>\n                                    <ListItemButton\n                                        onClick={(event) => handleChange(event, index)}\n                                    >\n                                        <ListItemIcon>\n                                            {icon}\n                                        </ListItemIcon>\n                                        <ListItemText primary={value} />\n                                    </ListItemButton>\n                                </ListItem>\n                            );\n                        })}\n                    </List>\n                </Collapse>\n            </FormControl>\n        );\n        return (\n            <Box key={name} sx={{ display: 'flex', flexDirection: 'column', minWidth: 120 }}>\n                {ret}\n            </Box>\n        );\n    }\n    return (<></>);\n}\n","/*\n * Copyright (C) Contributors to the Suwayomi project\n *\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at https://mozilla.org/MPL/2.0/.\n */\nimport React from 'react';\nimport { Box } from '@mui/system';\nimport {\n    Input,\n    InputLabel,\n    FormControl,\n} from '@mui/material';\nimport SearchIcon from '@mui/icons-material/Search';\n\ninterface Props {\n    state: string\n    name: string\n    position: number\n    group: number | undefined\n    updateFilterValue: Function\n    update: any\n}\n\nexport default function TextFilter(props: Props) {\n    const {\n        state,\n        name,\n        position,\n        group,\n        updateFilterValue,\n        update,\n    } = props;\n    const [Search, setsearch] = React.useState(state || '');\n    let typingTimer: NodeJS.Timeout;\n\n    function doneTyping(e: React.ChangeEvent<HTMLInputElement>) {\n        const upd = update.filter((el: {\n            position: number; group: number | undefined;\n        }) => !(position === el.position && group === el.group));\n        updateFilterValue([...upd, { position, state: e.target.value, group }]);\n    }\n\n    function handleChange(e: React.ChangeEvent<HTMLInputElement>) {\n        setsearch(e.target.value);\n\n        clearTimeout(typingTimer);\n        typingTimer = setTimeout(() => { doneTyping(e); }, 2500);\n    }\n\n    if (state !== undefined) {\n        return (\n            <Box key={`${name}`} sx={{ display: 'flex', flexDirection: 'row', minWidth: 120 }}>\n                <>\n                    <SearchIcon\n                        sx={{\n                            margin: 'auto',\n                        }}\n                    />\n                    <FormControl fullWidth>\n                        <InputLabel sx={{ margin: '10px 0 10px 0' }}>\n                            {name}\n                        </InputLabel>\n                        <Input\n                            name={name}\n                            value={Search || ''}\n                            onChange={handleChange}\n                            sx={{ margin: '10px 0 10px 0' }}\n                        />\n                    </FormControl>\n                </>\n            </Box>\n        );\n    }\n    return (<></>);\n}\n","/*\n * Copyright (C) Contributors to the Suwayomi project\n *\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at https://mozilla.org/MPL/2.0/.\n */\nimport React from 'react';\nimport { Box } from '@mui/system';\nimport { FormControlLabel } from '@mui/material';\nimport ThreeStateCheckbox from 'components/util/ThreeStateCheckbox';\n\ninterface Props {\n    state: number\n    name: string\n    position: number\n    group: number | undefined\n    updateFilterValue: Function\n    update: any\n}\n\nexport default function TriStateFilter(props: Props) {\n    const {\n        state,\n        name,\n        position,\n        group,\n        updateFilterValue,\n        update,\n    } = props;\n    const [val, setval] = React.useState({\n        [name]: state,\n    });\n\n    const handleChange = (checked: boolean | null | undefined) => {\n        const tmp = val;\n        if (checked !== undefined) {\n            tmp[name] = checked ? 1 : 2;\n        } else {\n            delete tmp[name];\n        }\n        setval({\n            ...tmp,\n        });\n        const upd = update.filter((e: {\n            position: number; group: number | undefined;\n        }) => !(position === e.position && group === e.group));\n        updateFilterValue([...upd, {\n            position,\n            state: (tmp[name] === undefined ? 0 : tmp[name]).toString(),\n            group,\n        }]);\n    };\n\n    if (state !== undefined) {\n        let check;\n        if (val[name] !== 0) {\n            check = val[name] === 1;\n        } else {\n            check = undefined;\n        }\n        return (\n            <Box sx={{ marginLeft: 3 }}>\n                <FormControlLabel\n                    key={name}\n                    control={(\n                        <ThreeStateCheckbox name=\"Unread\" checked={check} onChange={(checked) => handleChange(checked)} />\n                    )}\n                    label={name}\n                />\n            </Box>\n        );\n    }\n    return (<></>);\n}\n","/*\n * Copyright (C) Contributors to the Suwayomi project\n *\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at https://mozilla.org/MPL/2.0/.\n */\nimport {\n    Collapse, List, ListItemButton, ListItemText,\n} from '@mui/material';\nimport React from 'react';\nimport { ExpandLess, ExpandMore } from '@mui/icons-material';\n// eslint-disable-next-line import/no-cycle\nimport { Options } from '../SourceOptions';\n\ninterface Props {\n    state: ISourceFilters[]\n    name: string\n    position: number\n    updateFilterValue: Function\n    update: any\n}\n\nexport default function GroupFilter(props: Props) {\n    const {\n        state,\n        name,\n        position,\n        updateFilterValue,\n        update,\n    } = props;\n\n    const [open, setOpen] = React.useState(false);\n\n    const handleClick = () => {\n        setOpen(!open);\n    };\n\n    return (\n        <>\n            <ListItemButton onClick={handleClick}>\n                <ListItemText primary={name} />\n                {open ? <ExpandLess /> : <ExpandMore />}\n            </ListItemButton>\n            <Collapse in={open}>\n                <List disablePadding>\n                    <Options\n                        sourceFilter={state}\n                        group={position}\n                        updateFilterValue={updateFilterValue}\n                        update={update}\n                    />\n                </List>\n            </Collapse>\n        </>\n    );\n}\n","/*\n * Copyright (C) Contributors to the Suwayomi project\n *\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at https://mozilla.org/MPL/2.0/.\n */\n\nimport React from 'react';\nimport FilterListIcon from '@mui/icons-material/FilterList';\nimport {\n    Drawer, Button, Fab,\n} from '@mui/material';\nimport { Box } from '@mui/system';\nimport SelectFilter from './filters/SelectFilter';\nimport CheckBoxFilter from './filters/CheckBoxFilter';\nimport HeaderFilter from './filters/HeaderFilter';\nimport SeperatorFilter from './filters/SeparatorFilter';\nimport SortFilter from './filters/SortFilter';\nimport TextFilter from './filters/TextFilter';\nimport TriStateFilter from './filters/TriStateFilter';\n// this can only cycle once, so should be fine\n// eslint-disable-next-line import/no-cycle\nimport GroupFilter from './filters/GroupFilter';\n\ninterface IFilters {\n    sourceFilter: ISourceFilters[]\n    updateFilterValue: Function\n    group: number | undefined\n    update: any\n}\n\ninterface IFilters1 {\n    sourceFilter: ISourceFilters[]\n    updateFilterValue: Function\n    resetFilterValue: Function\n    setTriggerUpdate: Function\n    setSearch: Function\n    update: any\n}\n\nexport function Options({\n    sourceFilter,\n    group,\n    updateFilterValue,\n    update,\n}: IFilters) {\n    return (\n        <Box key={`filters ${group}`}>\n            { sourceFilter.map((e: ISourceFilters, index) => {\n                let checkif = update.find((el: {\n                    group: number | undefined; position: number;\n                }) => el.group === group && el.position === index);\n                checkif = checkif ? checkif.state : checkif;\n                switch (e.type) {\n                    case 'CheckBox':\n                        return (\n                            <CheckBoxFilter\n                                key={`filters ${e.filter.name}`}\n                                name={e.filter.name}\n                                state={checkif === 'false' || e.filter.state as boolean}\n                                position={index}\n                                group={group}\n                                updateFilterValue={updateFilterValue}\n                                update={update}\n                            />\n                        );\n                    case 'Group':\n                        return (\n                            <GroupFilter\n                                key={`filters ${e.filter.name}`}\n                                name={e.filter.name}\n                                state={e.filter.state as ISourceFilters[]}\n                                position={index}\n                                updateFilterValue={updateFilterValue}\n                                update={update}\n                            />\n                        );\n                    case 'Header':\n                        return (\n                            <HeaderFilter\n                                key={`filters ${e.filter.name}`}\n                                name={e.filter.name}\n                            />\n                        );\n                    case 'Select':\n                        return (\n                            <SelectFilter\n                                key={`filters ${e.filter.name}`}\n                                name={e.filter.name}\n                                values={e.filter.displayValues}\n                                state={parseInt(checkif, 10) || e.filter.state as number}\n                                selected={e.filter.selected}\n                                position={index}\n                                group={group}\n                                updateFilterValue={updateFilterValue}\n                                update={update}\n                            />\n                        );\n                    case 'Separator':\n                        return (\n                            <SeperatorFilter\n                                key={`filters ${e.filter.name}`}\n                                name={e.filter.name}\n                            />\n                        );\n                    case 'Sort':\n                        return (\n                            <SortFilter\n                                key={`filters ${e.filter.name}`}\n                                name={e.filter.name}\n                                values={e.filter.values}\n                                state={checkif ? JSON.parse(checkif) : e.filter.state as IState}\n                                position={index}\n                                group={group}\n                                updateFilterValue={updateFilterValue}\n                                update={update}\n                            />\n                        );\n                    case 'Text':\n                        return (\n                            <TextFilter\n                                key={`filters ${e.filter.name}`}\n                                name={e.filter.name}\n                                state={checkif || e.filter.state as string}\n                                position={index}\n                                group={group}\n                                updateFilterValue={updateFilterValue}\n                                update={update}\n                            />\n                        );\n                    case 'TriState':\n                        return (\n                            <TriStateFilter\n                                key={`filters ${e.filter.name}`}\n                                name={e.filter.name}\n                                state={parseInt(checkif, 10) || e.filter.state as number}\n                                position={index}\n                                group={group}\n                                updateFilterValue={updateFilterValue}\n                                update={update}\n                            />\n                        );\n                    default:\n                        return (<Box key={`${e.filter.name}null`} />);\n                }\n            })}\n        </Box>\n    );\n}\n\nexport default function SourceOptions({\n    sourceFilter,\n    updateFilterValue,\n    resetFilterValue,\n    setTriggerUpdate,\n    setSearch,\n    update,\n}: IFilters1) {\n    const [FilterOptions, setFilterOptions] = React.useState(false);\n\n    function handleReset() {\n        resetFilterValue(0);\n        setFilterOptions(false);\n    }\n\n    function handleSubmit() {\n        setTriggerUpdate(0);\n        setSearch(true);\n        setFilterOptions(false);\n    }\n\n    return (\n        <>\n            <Fab\n                sx={{ position: 'fixed', bottom: '2em', right: '3em' }}\n                onClick={() => setFilterOptions(!FilterOptions)}\n                variant=\"extended\"\n                color=\"primary\"\n            >\n                <FilterListIcon />\n                Filter\n            </Fab>\n\n            <Drawer\n                anchor=\"bottom\"\n                open={FilterOptions}\n                onClose={() => setFilterOptions(false)}\n                PaperProps={{\n                    style: {\n                        maxWidth: 600, padding: '1em', marginLeft: 'auto', marginRight: 'auto',\n                    },\n                }}\n            >\n                <Box sx={{ display: 'flex' }}>\n                    <Button\n                        onClick={handleReset}\n                    >\n                        Reset\n                    </Button>\n                    <Button\n                        sx={{ marginLeft: 'auto' }}\n                        variant=\"contained\"\n                        onClick={handleSubmit}\n                    >\n                        Submit\n                    </Button>\n                </Box>\n                <Options\n                    sourceFilter={sourceFilter}\n                    updateFilterValue={updateFilterValue}\n                    group={undefined}\n                    update={update}\n                />\n            </Drawer>\n        </>\n    );\n}\n","/*\n * Copyright (C) Contributors to the Suwayomi project\n *\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at https://mozilla.org/MPL/2.0/. */\n\nimport {\n    IconButton, Menu, MenuItem, FormControlLabel, Radio,\n} from '@mui/material';\nimport React from 'react';\nimport ViewModuleIcon from '@mui/icons-material/ViewModule';\nimport { useLibraryOptionsContext } from 'components/context/LibraryOptionsContext';\n\nexport default function SourceGridLayout() {\n    const { options, setOptions } = useLibraryOptionsContext();\n\n    const [anchorEl, setAnchorEl] = React.useState(null);\n    const open = Boolean(anchorEl);\n    const handleClick = (event: any) => {\n        setAnchorEl(event.currentTarget);\n    };\n    const handleClose = () => {\n        setAnchorEl(null);\n    };\n\n    function setGridContextOptions(\n        e: React.ChangeEvent<HTMLInputElement>,\n        checked: boolean,\n    ) {\n        if (checked) {\n            setOptions((prev: any) => ({ ...prev, SourcegridLayout: parseInt(e.target.name, 10) }));\n        }\n    }\n\n    return (\n        <>\n            <IconButton\n                onClick={handleClick}\n                size=\"small\"\n                sx={{ ml: 2 }}\n                aria-controls={open ? 'account-menu' : undefined}\n                aria-haspopup=\"true\"\n                aria-expanded={open ? 'true' : undefined}\n            >\n                <ViewModuleIcon />\n            </IconButton>\n            <Menu\n                id=\"basic-menu\"\n                anchorEl={anchorEl}\n                open={open}\n                onClose={handleClose}\n                MenuListProps={{ 'aria-labelledby': 'basic-button' }}\n            >\n                <MenuItem onClick={handleClose}>\n                    <FormControlLabel\n                        label=\"Compact grid\"\n                        control={(\n                            <Radio\n                                name=\"0\"\n                                // eslint-disable-next-line max-len\n                                checked={options.SourcegridLayout === 0 || options.SourcegridLayout === undefined}\n                                onChange={setGridContextOptions}\n                            />\n                        )}\n                    />\n                </MenuItem>\n                <MenuItem onClick={handleClose}>\n                    <FormControlLabel\n                        label=\"Comfortable grid\"\n                        control={(\n                            <Radio\n                                name=\"1\"\n                                checked={options.SourcegridLayout === 1}\n                                onChange={setGridContextOptions}\n                            />\n                        )}\n                    />\n                </MenuItem>\n                <MenuItem onClick={handleClose}>\n                    <FormControlLabel\n                        label=\"List\"\n                        control={(\n                            <Radio\n                                name=\"2\"\n                                checked={options.SourcegridLayout === 2}\n                                onChange={setGridContextOptions}\n                            />\n                        )}\n                    />\n                </MenuItem>\n            </Menu>\n\n        </>\n    );\n}\n","/*\n * Copyright (C) Contributors to the Suwayomi project\n *\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at https://mozilla.org/MPL/2.0/. */\n\nimport React, { useContext, useEffect, useState } from 'react';\nimport { useParams, useHistory } from 'react-router-dom';\nimport IconButton from '@mui/material/IconButton';\nimport SourceMangaGrid from 'components/source/SourceMangaGrid';\nimport NavbarContext from 'components/context/NavbarContext';\nimport client from 'util/client';\nimport SettingsIcon from '@mui/icons-material/Settings';\nimport SourceOptions from 'components/source/SourceOptions';\nimport AppbarSearch from 'components/util/AppbarSearch';\nimport { useQueryParam, StringParam } from 'use-query-params';\nimport SourceGridLayout from 'components/source/GridLayouts';\nimport { useLibraryOptionsContext } from 'components/context/LibraryOptionsContext';\n\ninterface IPos {\n    position: number\n    state: any\n    group?: number\n}\n\nexport default function SourceMangas(props: { popular: boolean }) {\n    const { setTitle, setAction } = useContext(NavbarContext);\n    const history = useHistory();\n\n    const { sourceId } = useParams<{ sourceId: string }>();\n    const [isConfigurable, setIsConfigurable] = useState<boolean>(false);\n    const [mangas, setMangas] = useState<IMangaCard[]>([]);\n    const [hasNextPage, setHasNextPage] = useState<boolean>(false);\n    const [lastPageNum, setLastPageNum] = useState<number>(1);\n    const [fetched, setFetched] = useState<boolean>(false);\n\n    const [Search, setSearch] = useState<boolean>();\n    const [query, setquery] = useQueryParam('query', StringParam);\n    const [reset, setReset] = React.useState(2);\n    const [update, setUpdate] = useState<IPos[]>([]);\n    const [triggerUpdate, setTriggerUpdate] = useState<number>(2);\n    const [Data, SetData] = useState<ISourceFilters[]>();\n\n    const [Init, setInit] = useState<undefined | null>();\n    const [Noreset, setNoreset] = useQueryParam('R');\n\n    const { options } = useLibraryOptionsContext();\n\n    function makeFilters() {\n        client.get(`/api/v1/source/${sourceId}/filters`)\n            .then((response) => response.data)\n            .then((data: ISourceFilters[]) => {\n                SetData(data);\n            });\n    }\n\n    useEffect(() => {\n        setTitle('Source'); // title is later set after a fetch but we set it here once\n    }, []);\n\n    useEffect(() => {\n        client.get(`/api/v1/source/${sourceId}`)\n            .then((response) => response.data)\n            .then((data: ISource) => {\n                setTitle(data.displayName);\n                setIsConfigurable(data.isConfigurable);\n            });\n    }, []);\n\n    useEffect(() => {\n        if (triggerUpdate === 2) {\n            return;\n        }\n        if (triggerUpdate === 0) {\n            setTriggerUpdate(1);\n            return;\n        }\n        if (update.length > 0) {\n            const rep = update;\n            setUpdate([]);\n            client.post(`/api/v1/source/${sourceId}/filters`,\n                rep.map((e: IPos) => {\n                    const { position, state, group }: IPos = e;\n                    return group === undefined ? {\n                        position,\n                        state,\n                    } : {\n                        position: group,\n                        state: JSON.stringify({\n                            position,\n                            state,\n                        }),\n                    };\n                }))\n                .then(() => {\n                    setTriggerUpdate(0);\n                    makeFilters();\n                });\n        } else {\n            setFetched(false);\n            setMangas([]);\n            setLastPageNum(0);\n            if (Noreset === undefined && Search) { setNoreset(null); }\n        }\n    }, [triggerUpdate]);\n\n    useEffect(() => {\n        if (reset === 0) {\n            setquery(undefined);\n            setNoreset(undefined);\n            setReset(1);\n        } else if (Noreset === undefined) {\n            client.get(`/api/v1/source/${sourceId}/filters?reset=true`)\n                .then(() => {\n                    makeFilters();\n                    setSearch(false);\n                    if (reset === 1) {\n                        setTriggerUpdate(0);\n                    }\n                });\n            return;\n        }\n        makeFilters();\n    }, [reset]);\n\n    useEffect(() => {\n        setAction(\n            <>\n                <SourceGridLayout />\n                <AppbarSearch />\n                {isConfigurable && (\n                    <IconButton\n                        onClick={() => history.push(`/sources/${sourceId}/configure/`)}\n                        aria-label=\"display more actions\"\n                        edge=\"end\"\n                        color=\"inherit\"\n                        size=\"large\"\n                    >\n                        <SettingsIcon />\n                    </IconButton>\n                )}\n            </>\n            ,\n        );\n    }, [isConfigurable]);\n\n    useEffect(() => {\n        if (query) {\n            setSearch(true);\n        } else { setSearch(false); }\n        if (Noreset === undefined) { setInit(null); }\n    }, [query]);\n\n    useEffect(() => {\n        if (Search !== undefined && query !== undefined && Init === null) {\n            const delayDebounceFn = setTimeout(() => {\n                setTriggerUpdate(0);\n            }, 1000);\n            return () => clearTimeout(delayDebounceFn);\n        }\n        if (Search !== undefined) { setInit(null); }\n        return () => {};\n    }, [Search, query]);\n\n    useEffect(() => {\n        if (lastPageNum !== 0) {\n            const sourceType = props.popular ? 'popular' : 'latest';\n            client.get(`/api/v1/source/${sourceId}/${query !== undefined || Search || Noreset === null ? 'search' : sourceType}${query !== undefined || Search || Noreset === null ? `?searchTerm=${query || ''}&pageNum=${lastPageNum}` : `/${lastPageNum}`}`)\n                .then((response) => response.data)\n                .then((data: { mangaList: IManga[], hasNextPage: boolean }) => {\n                    setMangas([\n                        ...mangas,\n                        ...data.mangaList.map((it) => ({\n                            title: it.title,\n                            thumbnailUrl: it.thumbnailUrl,\n                            id: it.id,\n                            inLibrary: it.inLibrary,\n                        }))]);\n                    setHasNextPage(data.hasNextPage);\n                    setFetched(true);\n                });\n        } else { setLastPageNum(1); }\n    }, [lastPageNum]);\n\n    let message;\n    let messageExtra;\n\n    if (fetched) {\n        message = 'No manga was found!';\n        if (sourceId === '0') {\n            messageExtra = (\n                <>\n                    <span>Check out </span>\n                    <a href=\"https://github.com/Suwayomi/Tachidesk-Server/wiki/Local-Source\">Local source guide</a>\n                </>\n            );\n        }\n    }\n\n    return (\n        <>\n            <SourceMangaGrid\n                mangas={mangas}\n                hasNextPage={hasNextPage}\n                lastPageNum={lastPageNum}\n                setLastPageNum={setLastPageNum}\n                message={message}\n                messageExtra={messageExtra}\n                isLoading={!fetched}\n                gridLayout={options.SourcegridLayout}\n            />\n            {Data !== undefined && (\n                <SourceOptions\n                    sourceFilter={Data}\n                    updateFilterValue={setUpdate}\n                    resetFilterValue={setReset}\n                    setTriggerUpdate={setTriggerUpdate}\n                    setSearch={setSearch}\n                    update={update}\n                />\n            )}\n        </>\n    );\n}\n","/*\n * Copyright (C) Contributors to the Suwayomi project\n *\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at https://mozilla.org/MPL/2.0/. */\n\nimport React, { useEffect, useRef } from 'react';\nimport SpinnerImage from 'components/util/SpinnerImage';\nimport useLocalStorage from 'util/useLocalStorage';\nimport Box from '@mui/system/Box';\n\nfunction imageStyle(settings: IReaderSettings): any {\n    const [dimensions, setDimensions] = React.useState({\n        height: window.innerHeight,\n        width: window.innerWidth,\n    });\n    React.useEffect(() => {\n        function handleResize() {\n            setDimensions({\n                height: window.innerHeight,\n                width: window.innerWidth,\n            });\n        }\n        window.addEventListener('resize', handleResize);\n        return () => {\n            window.removeEventListener('resize', handleResize);\n        };\n    }, []);\n    if (settings.readerType === 'DoubleLTR'\n    || settings.readerType === 'DoubleRTL'\n    || settings.readerType === 'ContinuesHorizontalLTR'\n    || settings.readerType === 'ContinuesHorizontalRTL') {\n        return {\n            display: 'block',\n            marginLeft: '7px',\n            marginRight: '7px',\n            width: 'auto',\n            minHeight: '99vh',\n            height: 'auto',\n            maxHeight: '99vh',\n            objectFit: 'contain',\n            pointerEvents: 'none',\n        };\n    }\n\n    return {\n        display: 'block',\n        marginBottom: settings.readerType === 'ContinuesVertical' ? '15px' : 0,\n        minWidth: '50vw',\n        width: dimensions.width < dimensions.height ? '100vw' : '100%',\n        maxWidth: '100%',\n    };\n}\n\ninterface IProps {\n    src: string\n    index: number\n    onImageLoad: () => void\n    setCurPage: React.Dispatch<React.SetStateAction<number>>\n    settings: IReaderSettings\n}\n\nconst Page = React.forwardRef((props: IProps, ref: any) => {\n    const {\n        src, index, onImageLoad, setCurPage, settings,\n    } = props;\n\n    const [useCache] = useLocalStorage<boolean>('useCache', true);\n\n    const imgRef = useRef<HTMLImageElement>(null);\n\n    const handleVerticalScroll = () => {\n        if (imgRef.current) {\n            const rect = imgRef.current.getBoundingClientRect();\n            if (rect.y < 0 && rect.y + rect.height > 0) {\n                setCurPage(index);\n            }\n        }\n    };\n\n    const handleHorizontalScroll = () => {\n        if (imgRef.current) {\n            const rect = imgRef.current.getBoundingClientRect();\n            if (rect.left <= window.innerWidth / 2 && rect.right > window.innerWidth / 2) {\n                setCurPage(index);\n            }\n        }\n    };\n\n    useEffect(() => {\n        switch (settings.readerType) {\n            case 'Webtoon':\n            case 'ContinuesVertical':\n                window.addEventListener('scroll', handleVerticalScroll);\n                return () => window.removeEventListener('scroll', handleVerticalScroll);\n            case 'ContinuesHorizontalLTR':\n            case 'ContinuesHorizontalRTL':\n                window.addEventListener('scroll', handleHorizontalScroll);\n                return () => window.removeEventListener('scroll', handleHorizontalScroll);\n            default:\n                return () => {};\n        }\n    }, [handleVerticalScroll]);\n\n    const imgStyle = imageStyle(settings);\n\n    return (\n        <Box ref={ref} sx={{ margin: 'auto' }}>\n            <SpinnerImage\n                src={`${src}?useCache=${useCache}`}\n                onImageLoad={onImageLoad}\n                alt={`Page #${index}`}\n                imgRef={imgRef}\n                spinnerStyle={{\n                    ...imgStyle,\n                    height: '100vh',\n                    width: '70vw',\n                    padding: '50px calc(50% - 20px)',\n                    backgroundColor: '#525252',\n                    marginBottom: 10,\n                }}\n                imgStyle={imgStyle}\n            />\n        </Box>\n    );\n});\n\nexport default Page;\n","/*\n * Copyright (C) Contributors to the Suwayomi project\n *\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at https://mozilla.org/MPL/2.0/. */\n\nimport React, { useEffect, useRef } from 'react';\nimport { Box } from '@mui/system';\nimport Page from '../Page';\n\nexport default function HorizontalPager(props: IReaderProps) {\n    const {\n        pages, curPage, settings, setCurPage, prevChapter, nextChapter,\n    } = props;\n\n    const selfRef = useRef<HTMLDivElement>(null);\n    const pagesRef = useRef<HTMLDivElement[]>([]);\n\n    function nextPage() {\n        if (curPage < pages.length - 1) {\n            pagesRef.current[curPage + 1]?.scrollIntoView({ inline: 'center' });\n            setCurPage((page) => page + 1);\n        } else if (settings.loadNextonEnding) {\n            nextChapter();\n        }\n    }\n\n    function prevPage() {\n        if (curPage > 0) {\n            pagesRef.current[curPage - 1]?.scrollIntoView({ inline: 'center' });\n            setCurPage(curPage - 1);\n        } else if (curPage === 0) {\n            prevChapter();\n        }\n    }\n\n    function goLeft() {\n        if (settings.readerType === 'ContinuesHorizontalLTR') {\n            prevPage();\n        } else {\n            nextPage();\n        }\n    }\n\n    function goRight() {\n        if (settings.readerType === 'ContinuesHorizontalLTR') {\n            nextPage();\n        } else {\n            prevPage();\n        }\n    }\n\n    const mouseXPos = useRef<number>(0);\n\n    function dragScreen(e: MouseEvent) {\n        window.scrollBy(mouseXPos.current - e.pageX, 0);\n    }\n\n    function dragControl(e:MouseEvent) {\n        mouseXPos.current = e.pageX;\n        selfRef.current?.addEventListener('mousemove', dragScreen);\n    }\n\n    function removeDragControl() {\n        selfRef.current?.removeEventListener('mousemove', dragScreen);\n    }\n\n    function clickControl(e:MouseEvent) {\n        if (e.clientX >= window.innerWidth * 0.85) {\n            goRight();\n        } else if (e.clientX <= window.innerWidth * 0.15) {\n            goLeft();\n        }\n    }\n\n    const handleLoadNextonEnding = () => {\n        if (settings.readerType === 'ContinuesHorizontalLTR') {\n            if (window.scrollX + window.innerWidth >= document.body.scrollWidth) {\n                nextChapter();\n            }\n        } else if (settings.readerType === 'ContinuesHorizontalRTL') {\n            if (window.scrollX <= window.innerWidth) {\n                nextChapter();\n            }\n        }\n    };\n\n    useEffect(() => {\n        // scroll last read page into view after first mount\n        pagesRef.current[curPage]?.scrollIntoView({ inline: 'center' });\n    }, [pagesRef.current.length]);\n\n    useEffect(() => {\n        selfRef.current?.addEventListener('mousedown', dragControl);\n        selfRef.current?.addEventListener('mouseup', removeDragControl);\n\n        return () => {\n            selfRef.current?.removeEventListener('mousedown', dragControl);\n            selfRef.current?.removeEventListener('mouseup', removeDragControl);\n        };\n    }, [selfRef]);\n\n    useEffect(() => {\n        if (settings.loadNextonEnding) {\n            document.addEventListener('scroll', handleLoadNextonEnding);\n        }\n        selfRef.current?.addEventListener('mousedown', clickControl);\n\n        return () => {\n            document.removeEventListener('scroll', handleLoadNextonEnding);\n            selfRef.current?.removeEventListener('mousedown', clickControl);\n        };\n    }, [selfRef, curPage]);\n\n    return (\n        <Box\n            ref={selfRef}\n            sx={{\n                display: 'flex',\n                flexDirection: (settings.readerType === 'ContinuesHorizontalLTR') ? 'row' : 'row-reverse',\n                justifyContent: (settings.readerType === 'ContinuesHorizontalLTR') ? 'flex-start' : 'flex-end',\n                margin: '0 auto',\n                width: 'auto',\n                height: 'auto',\n                overflowX: 'visible',\n                userSelect: 'none',\n            }}\n        >\n            {\n                pages.map((page) => (\n                    <Page\n                        key={page.index}\n                        index={page.index}\n                        src={page.src}\n                        onImageLoad={() => {}}\n                        setCurPage={setCurPage}\n                        settings={settings}\n                        ref={(e:HTMLDivElement) => { pagesRef.current[page.index] = e; }}\n                    />\n                ))\n            }\n        </Box>\n    );\n}\n","/*\n * Copyright (C) Contributors to the Suwayomi project\n *\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at https://mozilla.org/MPL/2.0/. */\n\nimport React from 'react';\nimport { Box } from '@mui/system';\n\ninterface IProps {\n    settings: IReaderSettings\n    curPage: number\n    pageCount: number\n}\n\nexport default function PageNumber(props: IProps) {\n    const { settings, curPage, pageCount } = props;\n\n    return (\n        <Box sx={{\n            display: settings.showPageNumber ? 'block' : 'none',\n            position: 'fixed',\n            bottom: '50px',\n            right: settings.staticNav ? 'calc((100vw - 325px)/2)' : 'calc((100vw - 25px)/2)',\n            padding: '2px',\n            paddingLeft: '4px',\n            paddingRight: '4px',\n            textAlign: 'center',\n            backgroundColor: 'rgba(0, 0, 0, 0.3)',\n            borderRadius: '10px',\n        }}\n        >\n            {`${curPage + 1} / ${pageCount}`}\n        </Box>\n    );\n}\n","/*\n * Copyright (C) Contributors to the Suwayomi project\n *\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at https://mozilla.org/MPL/2.0/. */\n\nimport React, { useEffect, useRef } from 'react';\nimport { Box } from '@mui/system';\nimport Page from '../Page';\n\nexport default function PagedReader(props: IReaderProps) {\n    const {\n        pages, settings, setCurPage, curPage, nextChapter, prevChapter,\n    } = props;\n\n    const selfRef = useRef<HTMLDivElement>(null);\n\n    function nextPage() {\n        if (curPage < pages.length - 1) {\n            setCurPage(curPage + 1);\n        } else if (settings.loadNextonEnding) {\n            nextChapter();\n        }\n    }\n\n    function prevPage() {\n        if (curPage > 0) {\n            setCurPage(curPage - 1);\n        } else {\n            prevChapter();\n        }\n    }\n\n    function goLeft() {\n        if (settings.readerType === 'SingleLTR') {\n            prevPage();\n        } else if (settings.readerType === 'SingleRTL') {\n            nextPage();\n        }\n    }\n\n    function goRight() {\n        if (settings.readerType === 'SingleLTR') {\n            nextPage();\n        } else if (settings.readerType === 'SingleRTL') {\n            prevPage();\n        }\n    }\n\n    function keyboardControl(e:KeyboardEvent) {\n        switch (e.code) {\n            case 'Space':\n                e.preventDefault();\n                nextPage();\n                break;\n            case 'ArrowRight':\n                goRight();\n                break;\n            case 'ArrowLeft':\n                goLeft();\n                break;\n            default:\n                break;\n        }\n    }\n\n    function clickControl(e:MouseEvent) {\n        if (e.clientX > window.innerWidth / 2) {\n            goRight();\n        } else {\n            goLeft();\n        }\n    }\n\n    useEffect(() => {\n        document.addEventListener('keydown', keyboardControl);\n        selfRef.current?.addEventListener('click', clickControl);\n\n        return () => {\n            document.removeEventListener('keydown', keyboardControl);\n            selfRef.current?.removeEventListener('click', clickControl);\n        };\n    }, [selfRef, curPage, settings.readerType]);\n\n    return (\n        <Box\n            ref={selfRef}\n            sx={{\n                display: 'flex',\n                flexDirection: 'row',\n                justifyContent: 'center',\n                margin: '0 auto',\n                width: '100%',\n                height: '100vh',\n            }}\n        >\n            <Page\n                key={curPage}\n                index={curPage}\n                onImageLoad={() => {}}\n                src={pages[curPage].src}\n                setCurPage={setCurPage}\n                settings={settings}\n            />\n        </Box>\n    );\n}\n","/*\n * Copyright (C) Contributors to the Suwayomi project\n *\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at https://mozilla.org/MPL/2.0/. */\n\nimport React from 'react';\nimport { Box, styled } from '@mui/system';\n\nconst Image = styled('img')({\n    marginBottom: 0,\n    width: 'auto',\n    minHeight: '99vh',\n    height: 'auto',\n    maxHeight: '99vh',\n    objectFit: 'contain',\n});\n\ninterface IProps {\n    index: number\n    image1src: string\n    image2src: string\n    settings: IReaderSettings\n}\n\nconst DoublePage = React.forwardRef((props: IProps, ref: any) => {\n    const {\n        image1src, image2src, index, settings,\n    } = props;\n\n    return (\n        <Box\n            ref={ref}\n            sx={{\n                display: 'flex',\n                flexDirection: settings.readerType === 'DoubleLTR' ? 'row' : 'row-reverse',\n                justifyContent: 'center',\n                margin: '0 auto',\n                width: 'auto',\n                height: 'auto',\n                overflowX: 'scroll',\n            }}\n        >\n            <Image\n                src={image1src}\n                alt={`Page #${index}`}\n            />\n            <Image\n                src={image2src}\n                alt={`Page #${index + 1}`}\n            />\n        </Box>\n    );\n});\n\nexport default DoublePage;\n","/*\n * Copyright (C) Contributors to the Suwayomi project\n *\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at https://mozilla.org/MPL/2.0/. */\n\nimport React, { useEffect, useRef } from 'react';\nimport ReactDOM from 'react-dom';\nimport { Box } from '@mui/system';\nimport Page from '../Page';\nimport DoublePage from '../DoublePage';\n\nexport default function DoublePagedPager(props: IReaderProps) {\n    const {\n        pages, settings, setCurPage, curPage, nextChapter, prevChapter,\n    } = props;\n\n    const selfRef = useRef<HTMLDivElement>(null);\n    const pagesRef = useRef<HTMLImageElement[]>([]);\n\n    const pagesDisplayed = useRef<number>(0);\n    const pageLoaded = useRef<boolean[]>(Array(pages.length).fill(false));\n\n    function setPagesToDisplay() {\n        pagesDisplayed.current = 0;\n        if (curPage < pages.length && pagesRef.current[curPage]) {\n            if (pageLoaded.current[curPage]) {\n                pagesDisplayed.current = 1;\n                const imgElem = pagesRef.current[curPage];\n                const aspectRatio = imgElem.height / imgElem.width;\n                if (aspectRatio < 1) {\n                    return;\n                }\n            }\n        }\n        if (curPage + 1 < pages.length && pagesRef.current[curPage + 1]) {\n            if (pageLoaded.current[curPage + 1]) {\n                const imgElem = pagesRef.current[curPage + 1];\n                const aspectRatio = imgElem.height / imgElem.width;\n                if (aspectRatio < 1) {\n                    return;\n                }\n                pagesDisplayed.current = 2;\n            }\n        }\n    }\n\n    function displayPages() {\n        if (pagesDisplayed.current === 2) {\n            ReactDOM.render(\n                <DoublePage\n                    key={curPage}\n                    index={curPage}\n                    image1src={pages[curPage].src}\n                    image2src={pages[curPage + 1].src}\n                    settings={settings}\n                />,\n                document.getElementById('display'),\n            );\n        } else {\n            ReactDOM.render(\n                <Page\n                    key={curPage}\n                    index={curPage}\n                    src={(pagesDisplayed.current === 1) ? pages[curPage].src : ''}\n                    onImageLoad={() => {}}\n                    setCurPage={setCurPage}\n                    settings={settings}\n                />,\n                document.getElementById('display'),\n            );\n        }\n    }\n\n    function pagesToGoBack() {\n        for (let i = 1; i <= 2; i++) {\n            if (curPage - i > 0 && pagesRef.current[curPage - i]) {\n                if (pageLoaded.current[curPage - i]) {\n                    const imgElem = pagesRef.current[curPage - i];\n                    const aspectRatio = imgElem.height / imgElem.width;\n                    if (aspectRatio < 1) {\n                        return 1;\n                    }\n                }\n            }\n        }\n        return 2;\n    }\n\n    function nextPage() {\n        if (curPage < pages.length - 1) {\n            const nextCurPage = curPage + pagesDisplayed.current;\n            setCurPage((nextCurPage >= pages.length) ? pages.length - 1 : nextCurPage);\n        } else if (settings.loadNextonEnding) {\n            nextChapter();\n        }\n    }\n\n    function prevPage() {\n        if (curPage > 0) {\n            const nextCurPage = curPage - pagesToGoBack();\n            setCurPage((nextCurPage < 0) ? 0 : nextCurPage);\n        } else {\n            prevChapter();\n        }\n    }\n\n    function goLeft() {\n        if (settings.readerType === 'DoubleLTR') {\n            prevPage();\n        } else {\n            nextPage();\n        }\n    }\n\n    function goRight() {\n        if (settings.readerType === 'DoubleLTR') {\n            nextPage();\n        } else {\n            prevPage();\n        }\n    }\n\n    function keyboardControl(e:KeyboardEvent) {\n        switch (e.code) {\n            case 'Space':\n                e.preventDefault();\n                nextPage();\n                break;\n            case 'ArrowRight':\n                goRight();\n                break;\n            case 'ArrowLeft':\n                goLeft();\n                break;\n            default:\n                break;\n        }\n    }\n\n    function clickControl(e:MouseEvent) {\n        if (e.clientX > window.innerWidth / 2) {\n            goRight();\n        } else {\n            goLeft();\n        }\n    }\n\n    function handleImageLoad(index: number) {\n        return () => {\n            pageLoaded.current[index] = true;\n        };\n    }\n\n    useEffect(() => {\n        const retryDisplay = setInterval(() => {\n            const isLastPage = (curPage === pages.length - 1);\n            if ((!isLastPage && pageLoaded.current[curPage] && pageLoaded.current[curPage + 1])\n                || pageLoaded.current[curPage]) {\n                setPagesToDisplay();\n                displayPages();\n                clearInterval(retryDisplay);\n            }\n        }, 50);\n\n        document.addEventListener('keydown', keyboardControl);\n        selfRef.current?.addEventListener('click', clickControl);\n\n        return () => {\n            clearInterval(retryDisplay);\n            document.removeEventListener('keydown', keyboardControl);\n            selfRef.current?.removeEventListener('click', clickControl);\n        };\n    }, [selfRef, curPage, settings.readerType]);\n\n    return (\n        <Box ref={selfRef}>\n            <Box id=\"preload\" sx={{ display: 'none' }}>\n                {\n                    pages.map((page) => (\n                        <img\n                            ref={(e:HTMLImageElement) => { pagesRef.current[page.index] = e; }}\n                            key={`${page.index}`}\n                            src={page.src}\n                            onLoad={handleImageLoad(page.index)}\n                            alt={`${page.index}`}\n                        />\n                    ))\n                }\n            </Box>\n            <Box\n                id=\"display\"\n                sx={{\n                    display: 'flex',\n                    flexDirection: (settings.readerType === 'DoubleLTR') ? 'row' : 'row-reverse',\n                    justifyContent: 'center',\n                    margin: '0 auto',\n                    width: 'auto',\n                    height: 'auto',\n                    overflowX: 'scroll',\n                }}\n            />\n        </Box>\n    );\n}\n","/*\n * Copyright (C) Contributors to the Suwayomi project\n *\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at https://mozilla.org/MPL/2.0/. */\n\nimport React, { useEffect, useRef } from 'react';\nimport { Box } from '@mui/system';\nimport Page from '../Page';\n\nexport default function VerticalReader(props: IReaderProps) {\n    const {\n        pages, settings, setCurPage, curPage, nextChapter, prevChapter,\n    } = props;\n\n    const selfRef = useRef<HTMLDivElement>(null);\n    const pagesRef = useRef<HTMLDivElement[]>([]);\n\n    useEffect(() => {\n        pagesRef.current = pagesRef.current.slice(0, pages.length);\n    }, [pages.length]);\n\n    function nextPage() {\n        if (curPage < pages.length - 1) {\n            pagesRef.current[curPage + 1]?.scrollIntoView();\n            setCurPage((page) => page + 1);\n        } else if (settings.loadNextonEnding) {\n            nextChapter();\n        }\n    }\n\n    function prevPage() {\n        if (curPage > 0) {\n            const rect = pagesRef.current[curPage].getBoundingClientRect();\n            if (rect.y < 0 && rect.y + rect.height > 0) {\n                pagesRef.current[curPage]?.scrollIntoView();\n            } else {\n                pagesRef.current[curPage - 1]?.scrollIntoView();\n                setCurPage(curPage - 1);\n            }\n        } else if (curPage === 0) {\n            prevChapter();\n        }\n    }\n\n    function keyboardControl(e:KeyboardEvent) {\n        switch (e.code) {\n            case 'Space':\n                e.preventDefault();\n                nextPage();\n                break;\n            case 'ArrowRight':\n                nextPage();\n                break;\n            case 'ArrowLeft':\n                prevPage();\n                break;\n            default:\n                break;\n        }\n    }\n\n    function clickControl(e:MouseEvent) {\n        if (e.clientX > window.innerWidth / 2) {\n            nextPage();\n        } else {\n            prevPage();\n        }\n    }\n\n    const handleLoadNextonEnding = () => {\n        if ((window.innerHeight + window.scrollY) >= document.body.offsetHeight) {\n            nextChapter();\n        }\n    };\n\n    useEffect(() => {\n        if (settings.loadNextonEnding) { document.addEventListener('scroll', handleLoadNextonEnding); }\n        document.addEventListener('keydown', keyboardControl, false);\n        selfRef.current?.addEventListener('click', clickControl);\n\n        return () => {\n            document.removeEventListener('scroll', handleLoadNextonEnding);\n            document.removeEventListener('keydown', keyboardControl);\n            selfRef.current?.removeEventListener('click', clickControl);\n        };\n    }, [selfRef, curPage]);\n\n    useEffect(() => {\n        // scroll last read page into view after first mount\n        pagesRef.current[curPage].scrollIntoView();\n    }, [pagesRef.current.length]);\n\n    return (\n        <Box\n            ref={selfRef}\n            sx={{\n                display: 'flex',\n                flexDirection: 'column',\n                justifyContent: 'center',\n                margin: '0 auto',\n                width: '100%',\n            }}\n        >\n            {\n                pages.map((page) => (\n                    <Page\n                        key={page.index}\n                        index={page.index}\n                        src={page.src}\n                        onImageLoad={() => {}}\n                        setCurPage={setCurPage}\n                        settings={settings}\n                        ref={(e:HTMLDivElement) => { pagesRef.current[page.index] = e; }}\n                    />\n                ))\n            }\n        </Box>\n    );\n}\n","/*\n * Copyright (C) Contributors to the Suwayomi project\n *\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at https://mozilla.org/MPL/2.0/. */\n\nimport IconButton from '@mui/material/IconButton';\nimport CloseIcon from '@mui/icons-material/Close';\nimport KeyboardArrowLeftIcon from '@mui/icons-material/KeyboardArrowLeft';\nimport KeyboardArrowRightIcon from '@mui/icons-material/KeyboardArrowRight';\nimport KeyboardArrowDownIcon from '@mui/icons-material/KeyboardArrowDown';\nimport KeyboardArrowUpIcon from '@mui/icons-material/KeyboardArrowUp';\nimport React, { useEffect, useState } from 'react';\nimport Typography from '@mui/material/Typography';\nimport { useHistory, Link } from 'react-router-dom';\nimport Slide from '@mui/material/Slide';\nimport Fade from '@mui/material/Fade';\nimport Zoom from '@mui/material/Zoom';\nimport { Switch } from '@mui/material';\nimport List from '@mui/material/List';\nimport ListItem from '@mui/material/ListItem';\nimport MenuItem from '@mui/material/MenuItem';\nimport Select from '@mui/material/Select';\nimport ListItemText from '@mui/material/ListItemText';\nimport ListItemSecondaryAction from '@mui/material/ListItemSecondaryAction';\nimport Collapse from '@mui/material/Collapse';\nimport Button from '@mui/material/Button';\nimport { styled } from '@mui/system';\n\nconst Root = styled('div')(({ theme }) => ({\n    top: 0,\n    left: 0,\n    width: '300px',\n    minWidth: '300px',\n    height: '100vh',\n    overflowY: 'auto',\n    backgroundColor: theme.palette.background.default,\n\n    '& header': {\n        backgroundColor:\n        theme.palette.mode === 'dark' ? theme.palette.grey[800] : theme.palette.grey[100],\n        display: 'flex',\n        alignItems: 'center',\n        minHeight: '64px',\n        paddingLeft: '24px',\n        paddingRight: '24px',\n\n        transition: 'left 2s ease',\n\n        '& button': {\n            flexGrow: 0,\n            flexShrink: 0,\n        },\n\n        '& button:nth-child(1)': {\n            marginRight: '16px',\n        },\n\n        '& h1': {\n            fontSize: '1.25rem',\n            flexGrow: 1,\n        },\n    },\n    '& hr': {\n        margin: '0 16px',\n        height: '1px',\n        border: '0',\n        backgroundColor: theme.palette.mode === 'dark' ? theme.palette.grey[800] : theme.palette.grey[100],\n    },\n}));\n\nconst Navigation = styled('div')({\n    margin: '0 16px',\n    '& > span:nth-child(1)': {\n        textAlign: 'center',\n        display: 'block',\n        marginTop: '16px',\n    },\n});\n\nconst ChapterNavigation = styled('div')({\n    display: 'grid',\n    gridTemplateColumns: '1fr 1fr',\n    gridTemplateAreas: '\"prev next\"',\n    gridColumnGap: '5px',\n    margin: '10px 0',\n\n    '& a': {\n        flexGrow: 1,\n        textDecoration: 'none',\n\n        '& button': {\n            width: '100%',\n            padding: '5px 8px',\n            textTransform: 'none',\n        },\n    },\n});\n\nconst OpenDrawerButton = styled(IconButton)(({ theme }) => ({\n    position: 'fixed',\n    top: 0 + 20,\n    left: 10 + 20,\n    height: '40px',\n    width: '40px',\n    borderRadius: 5,\n    backgroundColor: theme.palette.mode === 'dark' ? 'black' : 'white',\n    '&:hover': {\n        backgroundColor: theme.palette.mode === 'dark' ? theme.palette.grey[900] : theme.palette.grey[100],\n    },\n}));\n\nexport const defaultReaderSettings = () => ({\n    staticNav: false,\n    showPageNumber: true,\n    continuesPageGap: false,\n    loadNextonEnding: false,\n    readerType: 'ContinuesVertical',\n} as IReaderSettings);\n\ninterface IProps {\n    settings: IReaderSettings\n    setSettings: React.Dispatch<React.SetStateAction<IReaderSettings>>\n    manga: IManga | IMangaCard\n    chapter: IChapter\n    curPage: number\n}\n\nexport default function ReaderNavBar(props: IProps) {\n    const history = useHistory();\n\n    const {\n        settings, setSettings, manga, chapter, curPage,\n    } = props;\n\n    const [drawerOpen, setDrawerOpen] = useState(false || settings.staticNav);\n    const [hideOpenButton, setHideOpenButton] = useState(false);\n    const [prevScrollPos, setPrevScrollPos] = useState(0);\n    const [settingsCollapseOpen, setSettingsCollapseOpen] = useState(true);\n\n    const setSettingValue = (key: string, value: any) => setSettings({ ...settings, [key]: value });\n\n    const handleScroll = () => {\n        const currentScrollPos = window.pageYOffset;\n\n        if (Math.abs(currentScrollPos - prevScrollPos) > 20) {\n            setHideOpenButton(currentScrollPos > prevScrollPos);\n            setPrevScrollPos(currentScrollPos);\n        }\n    };\n\n    useEffect(() => {\n        window.addEventListener('scroll', handleScroll);\n\n        const rootEl:HTMLDivElement = document.querySelector('#root')!;\n        const mainContainer:HTMLDivElement = document.querySelector('#appMainContainer')!;\n\n        // main container and root div need to change styles...\n        rootEl.style.display = 'flex';\n        mainContainer.style.display = 'none';\n\n        return () => {\n            rootEl.style.display = 'block';\n            mainContainer.style.display = 'block';\n            window.removeEventListener('scroll', handleScroll);\n        };\n    }, [handleScroll]);// handleScroll changes on every render\n\n    return (\n        <>\n            <Slide\n                direction=\"right\"\n                in={drawerOpen}\n                timeout={200}\n                appear={false}\n                mountOnEnter\n                unmountOnExit\n            >\n                <Root sx={{\n                    position: settings.staticNav ? 'sticky' : 'fixed',\n                }}\n                >\n                    <header>\n                        {!settings.staticNav\n                        && (\n                            <IconButton\n                                edge=\"start\"\n                                color=\"inherit\"\n                                aria-label=\"menu\"\n                                disableRipple\n                                onClick={() => setDrawerOpen(false)}\n                                size=\"large\"\n                            >\n                                <KeyboardArrowLeftIcon />\n                            </IconButton>\n                        )}\n                        <Typography variant=\"h1\">\n                            {chapter.name}\n                        </Typography>\n                        <IconButton\n                            edge=\"start\"\n                            color=\"inherit\"\n                            aria-label=\"menu\"\n                            disableRipple\n                            onClick={() => history.push('..')}\n                            size=\"large\"\n                            sx={{ mr: -1 }}\n                        >\n                            <CloseIcon />\n                        </IconButton>\n                    </header>\n                    <ListItem\n                        ContainerComponent=\"div\"\n                        sx={{\n                            '& span': {\n                                fontWeight: 'bold',\n                            },\n                        }}\n                    >\n                        <ListItemText primary=\"Reader Settings\" />\n                        <ListItemSecondaryAction>\n                            <IconButton\n                                edge=\"start\"\n                                color=\"inherit\"\n                                aria-label=\"menu\"\n                                disableRipple\n                                disableFocusRipple\n                                onClick={() => setSettingsCollapseOpen(!settingsCollapseOpen)}\n                                size=\"large\"\n                            >\n                                {settingsCollapseOpen && <KeyboardArrowUpIcon />}\n                                {!settingsCollapseOpen && <KeyboardArrowDownIcon />}\n                            </IconButton>\n                        </ListItemSecondaryAction>\n                    </ListItem>\n                    <Collapse in={settingsCollapseOpen} timeout=\"auto\" unmountOnExit>\n                        <List>\n                            <ListItem>\n                                <ListItemText primary=\"Static Navigation\" />\n                                <ListItemSecondaryAction>\n                                    <Switch\n                                        edge=\"end\"\n                                        checked={settings.staticNav}\n                                        onChange={(e) => setSettingValue('staticNav', e.target.checked)}\n                                    />\n                                </ListItemSecondaryAction>\n                            </ListItem>\n                            <ListItem>\n                                <ListItemText primary=\"Show page number\" />\n                                <ListItemSecondaryAction>\n                                    <Switch\n                                        edge=\"end\"\n                                        checked={settings.showPageNumber}\n                                        onChange={(e) => setSettingValue('showPageNumber', e.target.checked)}\n                                    />\n                                </ListItemSecondaryAction>\n                            </ListItem>\n                            <ListItem>\n                                <ListItemText primary=\"Load next chapter at ending\" />\n                                <ListItemSecondaryAction>\n                                    <Switch\n                                        edge=\"end\"\n                                        checked={settings.loadNextonEnding}\n                                        onChange={(e) => setSettingValue('loadNextonEnding', e.target.checked)}\n                                    />\n                                </ListItemSecondaryAction>\n                            </ListItem>\n                            <ListItem>\n                                <ListItemText primary=\"Reader Type\" />\n                                <Select\n                                    variant=\"standard\"\n                                    value={settings.readerType}\n                                    onChange={(e) => setSettingValue('readerType', e.target.value)}\n                                    sx={{ p: 0 }}\n                                >\n                                    <MenuItem value=\"SingleLTR\">\n                                        Single Page (LTR)\n                                    </MenuItem>\n                                    <MenuItem value=\"SingleRTL\">\n                                        Single Page (RTL)\n                                    </MenuItem>\n                                    {/* <MenuItem value=\"SingleVertical\">\n                                       Vertical(WIP)\n                                    </MenuItem> */}\n                                    <MenuItem value=\"DoubleLTR\">\n                                        Double Page (LTR)\n                                    </MenuItem>\n                                    <MenuItem value=\"DoubleRTL\">\n                                        Double Page (RTL)\n                                    </MenuItem>\n                                    <MenuItem value=\"Webtoon\">\n                                        Webtoon\n                                    </MenuItem>\n                                    <MenuItem value=\"ContinuesVertical\">\n                                        Continues Vertical\n                                    </MenuItem>\n                                    <MenuItem value=\"ContinuesHorizontalLTR\">\n                                        Horizontal (LTR)\n                                    </MenuItem>\n                                    <MenuItem value=\"ContinuesHorizontalRTL\">\n                                        Horizontal (RTL)\n                                    </MenuItem>\n                                </Select>\n                            </ListItem>\n                        </List>\n                    </Collapse>\n                    <hr />\n                    <Navigation>\n                        <span>\n                            {`Currently on page ${curPage + 1} of ${chapter.pageCount}`}\n                        </span>\n                        <ChapterNavigation>\n                            {chapter.index > 1\n                        && (\n                            <Link\n                                replace\n                                to={`/manga/${manga.id}/chapter/${chapter.index - 1}`}\n                            >\n                                <Button\n                                    variant=\"outlined\"\n                                    sx={{ gridArea: 'prev' }}\n                                    startIcon={<KeyboardArrowLeftIcon />}\n                                >\n                                    Prev. Chapter\n                                </Button>\n                            </Link>\n                        )}\n                            {chapter.index < chapter.chapterCount\n                        && (\n                            <Link\n                                replace\n                                style={{ gridArea: 'next' }}\n                                to={`/manga/${manga.id}/chapter/${chapter.index + 1}`}\n                            >\n                                <Button\n                                    variant=\"outlined\"\n                                    endIcon={<KeyboardArrowRightIcon />}\n                                >\n                                    Next Chapter\n                                </Button>\n                            </Link>\n                        )}\n                        </ChapterNavigation>\n                    </Navigation>\n                </Root>\n            </Slide>\n            <Zoom in={!drawerOpen}>\n                <Fade in={!hideOpenButton}>\n                    <OpenDrawerButton\n                        edge=\"start\"\n                        color=\"inherit\"\n                        aria-label=\"menu\"\n                        disableRipple\n                        disableFocusRipple\n                        onClick={() => setDrawerOpen(true)}\n                        size=\"large\"\n                    >\n                        <KeyboardArrowRightIcon />\n                    </OpenDrawerButton>\n                </Fade>\n            </Zoom>\n        </>\n    );\n}\n","/*\n * Copyright (C) Contributors to the Suwayomi project\n *\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at https://mozilla.org/MPL/2.0/. */\n\nimport CircularProgress from '@mui/material/CircularProgress';\nimport React, { useContext, useEffect, useState } from 'react';\nimport { useHistory, useParams } from 'react-router-dom';\nimport HorizontalPager from 'components/reader/pager/HorizontalPager';\nimport PageNumber from 'components/reader/PageNumber';\nimport PagedPager from 'components/reader/pager/PagedPager';\nimport DoublePagedPager from 'components/reader/pager/DoublePagedPager';\nimport VerticalPager from 'components/reader/pager/VerticalPager';\nimport ReaderNavBar, { defaultReaderSettings } from 'components/navbar/ReaderNavBar';\nimport NavbarContext from 'components/context/NavbarContext';\nimport client from 'util/client';\nimport useLocalStorage from 'util/useLocalStorage';\nimport cloneObject from 'util/cloneObject';\nimport { Box } from '@mui/system';\n\nconst getReaderComponent = (readerType: ReaderType) => {\n    switch (readerType) {\n        case 'ContinuesVertical':\n        case 'Webtoon':\n            return VerticalPager;\n            break;\n        case 'SingleVertical':\n        case 'SingleRTL':\n        case 'SingleLTR':\n            return PagedPager;\n            break;\n        case 'DoubleVertical':\n        case 'DoubleRTL':\n        case 'DoubleLTR':\n            return DoublePagedPager;\n            break;\n        case 'ContinuesHorizontalLTR':\n        case 'ContinuesHorizontalRTL':\n            return HorizontalPager;\n        default:\n            return VerticalPager;\n            break;\n    }\n};\n\nconst range = (n:number) => Array.from({ length: n }, (value, key) => key);\nconst initialChapter = () => ({\n    pageCount: -1,\n    index: -1,\n    chapterCount: 0,\n    name: 'Loading...',\n});\n\nexport default function Reader() {\n    const [settings, setSettings] = useLocalStorage<IReaderSettings>('readerSettings', defaultReaderSettings);\n\n    const history = useHistory();\n\n    const [serverAddress] = useLocalStorage<String>('serverBaseURL', '');\n\n    const { chapterIndex, mangaId } = useParams<{ chapterIndex: string, mangaId: string }>();\n    const [manga, setManga] = useState<IMangaCard | IManga>({ id: +mangaId, title: '', thumbnailUrl: '' });\n    const [chapter, setChapter] = useState<IChapter | IPartialChpter>(initialChapter());\n    const [curPage, setCurPage] = useState<number>(0);\n    const { setOverride, setTitle } = useContext(NavbarContext);\n\n    useEffect(() => {\n        // make sure settings has all the keys\n        const settingsClone = cloneObject(settings) as any;\n        const defualtSettings = defaultReaderSettings();\n        let shouldUpdateSettings = false;\n        Object.keys(defualtSettings).forEach((key) => {\n            const keyOf = key as keyof IReaderSettings;\n            if (settings[keyOf] === undefined) {\n                settingsClone[keyOf] = defualtSettings[keyOf];\n                shouldUpdateSettings = true;\n            }\n        });\n        if (shouldUpdateSettings) { setSettings(settingsClone); }\n\n        // set the custom navbar\n        setOverride(\n            {\n                status: true,\n                value: (\n                    <ReaderNavBar\n                        settings={settings}\n                        setSettings={setSettings}\n                        manga={manga}\n                        chapter={chapter as IChapter}\n                        curPage={curPage}\n                    />\n                ),\n            },\n        );\n\n        // clean up for when we leave the reader\n        return () => setOverride({ status: false, value: <div /> });\n    }, [manga, chapter, settings, curPage, chapterIndex]);\n\n    useEffect(() => {\n        setTitle('Reader');\n        client.get(`/api/v1/manga/${mangaId}/`)\n            .then((response) => response.data)\n            .then((data: IManga) => {\n                setManga(data);\n                setTitle(data.title);\n            });\n    }, [chapterIndex]);\n\n    useEffect(() => {\n        setChapter(initialChapter);\n        client.get(`/api/v1/manga/${mangaId}/chapter/${chapterIndex}`)\n            .then((response) => response.data)\n            .then((data:IChapter) => {\n                setChapter(data);\n\n                if (data.lastPageRead === data.pageCount - 1) {\n                    // last page, also probably read = true, we will load the first page.\n                    setCurPage(0);\n                } else setCurPage(data.lastPageRead);\n            });\n    }, [chapterIndex]);\n\n    useEffect(() => {\n        if (curPage !== -1) {\n            const formData = new FormData();\n            formData.append('lastPageRead', curPage.toString());\n            client.patch(`/api/v1/manga/${manga.id}/chapter/${chapter.index}`, formData);\n        }\n\n        if (curPage === chapter.pageCount - 1) {\n            const formDataRead = new FormData();\n            formDataRead.append('read', 'true');\n            client.patch(`/api/v1/manga/${manga.id}/chapter/${chapter.index}`, formDataRead);\n        }\n    }, [curPage]);\n\n    // return spinner while chpater data is loading\n    if (chapter.pageCount === -1) {\n        return (\n            <Box sx={{\n                height: '100vh', width: '100vw', display: 'grid', placeItems: 'center',\n            }}\n            >\n                <CircularProgress thickness={5} />\n            </Box>\n        );\n    }\n\n    const nextChapter = () => {\n        if (chapter.index < chapter.chapterCount) {\n            const formData = new FormData();\n            formData.append('lastPageRead', `${chapter.pageCount - 1}`);\n            formData.append('read', 'true');\n            client.patch(`/api/v1/manga/${manga.id}/chapter/${chapter.index}`, formData);\n\n            history.replace(`/manga/${manga.id}/chapter/${chapter.index + 1}`);\n        }\n    };\n\n    const prevChapter = () => {\n        if (chapter.index > 1) {\n            history.replace(`/manga/${manga.id}/chapter/${chapter.index - 1}`);\n        }\n    };\n\n    const pages = range(chapter.pageCount).map((index) => ({\n        index,\n        src: `${serverAddress}/api/v1/manga/${mangaId}/chapter/${chapterIndex}/page/${index}`,\n    }));\n\n    const ReaderComponent = getReaderComponent(settings.readerType);\n\n    return (\n        <Box sx={{ width: settings.staticNav ? 'calc(100vw - 300px)' : '100vw' }}>\n            <PageNumber\n                settings={settings}\n                curPage={curPage}\n                pageCount={chapter.pageCount}\n            />\n            <ReaderComponent\n                pages={pages}\n                pageCount={chapter.pageCount}\n                setCurPage={setCurPage}\n                curPage={curPage}\n                settings={settings}\n                manga={manga}\n                chapter={chapter}\n                nextChapter={nextChapter}\n                prevChapter={prevChapter}\n            />\n        </Box>\n    );\n}\n","/*\n * Copyright (C) Contributors to the Suwayomi project\n *\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at https://mozilla.org/MPL/2.0/. */\n\nimport React, {\n    useContext, useEffect, useState, useRef,\n} from 'react';\nimport { useHistory } from 'react-router-dom';\nimport Card from '@mui/material/Card';\nimport CardContent from '@mui/material/CardContent';\nimport IconButton from '@mui/material/IconButton';\nimport DownloadIcon from '@mui/icons-material/Download';\nimport Avatar from '@mui/material/Avatar';\nimport Typography from '@mui/material/Typography';\nimport NavbarContext from 'components/context/NavbarContext';\nimport client from 'util/client';\nimport useLocalStorage from 'util/useLocalStorage';\nimport EmptyView from 'components/util/EmptyView';\nimport LoadingPlaceholder from 'components/util/LoadingPlaceholder';\nimport { Box } from '@mui/system';\n\nfunction epochToDate(epoch: number) {\n    const date = new Date(0); // The 0 there is the key, which sets the date to the epoch\n    date.setUTCSeconds(epoch);\n    return date;\n}\n\nfunction isTheSameDay(first:Date, second:Date) {\n    return first.getDate() === second.getDate()\n    && first.getMonth() === second.getMonth()\n    && first.getFullYear() === second.getFullYear();\n}\n\nfunction getDateString(date: Date) {\n    const today = new Date();\n    if (isTheSameDay(today, date)) return 'TODAY';\n    // calculate yesterday\n    const yesterday = new Date();\n    yesterday.setDate(today.getDate() - 1);\n    if (isTheSameDay(yesterday, date)) return 'YESTERDAY';\n    return date.toLocaleDateString();\n}\n\nfunction groupByDate(updates: IMangaChapter[]):\n[string, { item: IMangaChapter, globalIdx: number }[] ][] {\n    if (updates.length === 0) return [];\n\n    const groups = {};\n    updates.forEach((item, globalIdx) => {\n        const key = getDateString(epochToDate(item.chapter.fetchedAt));\n        // @ts-ignore\n        if (groups[key] === undefined) groups[key] = [];\n        // @ts-ignore\n        groups[key].push({ item, globalIdx });\n    });\n\n    // @ts-ignore\n    return Object.keys(groups).map((key) => [key, groups[key]]);\n}\n\nconst baseWebsocketUrl = JSON.parse(window.localStorage.getItem('serverBaseURL')!).replace('http', 'ws');\nconst initialQueue = {\n    status: 'Stopped',\n    queue: [],\n} as IQueue;\n\nexport default function Updates() {\n    const history = useHistory();\n\n    const { setTitle, setAction } = useContext(NavbarContext);\n    const [updateEntries, setUpdateEntries] = useState<IMangaChapter[]>([]);\n    const [hasNextPage, setHasNextPage] = useState(true);\n    const [fetched, setFetched] = useState(false);\n    const [lastPageNum, setLastPageNum] = useState(0);\n\n    const [serverAddress] = useLocalStorage<String>('serverBaseURL', '');\n    const [useCache] = useLocalStorage<boolean>('useCache', true);\n\n    const [, setWsClient] = useState<WebSocket>();\n    const [{ queue }, setQueueState] = useState<IQueue>(initialQueue);\n\n    useEffect(() => {\n        const wsc = new WebSocket(`${baseWebsocketUrl}/api/v1/downloads`);\n        wsc.onmessage = (e) => {\n            const data = JSON.parse(e.data) as IQueue;\n            setQueueState(data);\n        };\n\n        setWsClient(wsc);\n\n        return () => wsc.close();\n    }, []);\n\n    useEffect(() => {\n        setTitle('Updates');\n\n        setAction(<></>);\n    }, []);\n\n    useEffect(() => {\n        if (hasNextPage) {\n            client.get(`/api/v1/update/recentChapters/${lastPageNum}`)\n                .then((response) => response.data)\n                .then(({ hasNextPage: fetchedHasNextPage, page }: PaginatedList<IMangaChapter>) => {\n                    setUpdateEntries([\n                        ...updateEntries,\n                        ...page,\n                    ]);\n                    setHasNextPage(fetchedHasNextPage);\n                    setFetched(true);\n                });\n        }\n    }, [lastPageNum]);\n\n    const lastEntry = useRef<HTMLDivElement>(null);\n\n    const scrollHandler = () => {\n        if (lastEntry.current) {\n            const rect = lastEntry.current.getBoundingClientRect();\n            if (((rect.y + rect.height) / window.innerHeight < 2) && hasNextPage) {\n                setLastPageNum(lastPageNum + 1);\n            }\n        }\n    };\n    useEffect(() => {\n        window.addEventListener('scroll', scrollHandler, true);\n        return () => {\n            window.removeEventListener('scroll', scrollHandler, true);\n        };\n    }, [hasNextPage, updateEntries]);\n\n    if (!fetched) { return <LoadingPlaceholder />; }\n    if (fetched && updateEntries.length === 0) { return <EmptyView message=\"You don't have any updates yet.\" />; }\n\n    const downloadStatusStringFor = (chapter: IChapter) => {\n        let rtn = '';\n        if (chapter.downloaded) {\n            rtn = '  Downloaded';\n        }\n        queue.forEach((q) => {\n            if (chapter.index === q.chapterIndex && chapter.mangaId === q.mangaId) {\n                rtn = `  Downloading (${(q.progress * 100).toFixed(2)}%)`;\n            }\n        });\n        return rtn;\n    };\n\n    const downloadChapter = (chapter: IChapter) => {\n        client.get(`/api/v1/download/${chapter.mangaId}/chapter/${chapter.index}`);\n    };\n\n    return (\n        <>\n            {groupByDate(updateEntries).map((dateGroup) => (\n                <div key={dateGroup[0]}>\n                    <Typography\n                        variant=\"h5\"\n                        sx={{\n                            ml: 3,\n                            my: 2,\n                            fontWeight: 700,\n                        }}\n                    >\n                        {dateGroup[0]}\n                    </Typography>\n                    {dateGroup[1].map(({ item: { chapter, manga }, globalIdx }) => (\n                        <Card\n                            ref={globalIdx === updateEntries.length - 1 ? lastEntry : undefined}\n                            key={globalIdx}\n                            sx={{\n                                margin: '10px',\n                                '&:hover': {\n                                    backgroundColor: 'action.hover',\n                                    transition: 'background-color 100ms cubic-bezier(0.4, 0, 0.2, 1) 0ms',\n                                },\n                                '&:active': {\n                                    backgroundColor: 'action.selected',\n                                    transition: 'background-color 100ms cubic-bezier(0.4, 0, 0.2, 1) 0ms',\n                                },\n                            }}\n                            onClick={() => history.push(`/manga/${chapter.mangaId}/chapter/${chapter.index}`)}\n                        >\n                            <CardContent sx={{\n                                display: 'flex',\n                                justifyContent: 'space-between',\n                                alignItems: 'center',\n                                padding: 2,\n                            }}\n                            >\n                                <Box sx={{ display: 'flex' }}>\n                                    <Avatar\n                                        variant=\"rounded\"\n                                        sx={{\n                                            width: 56,\n                                            height: 56,\n                                            flex: '0 0 auto',\n                                            marginRight: 2,\n                                            imageRendering: 'pixelated',\n                                        }}\n                                        src={`${serverAddress}${manga.thumbnailUrl}?useCache=${useCache}`}\n                                    />\n                                    <Box sx={{ display: 'flex', flexDirection: 'column' }}>\n                                        <Typography variant=\"h5\" component=\"h2\">\n                                            {manga.title}\n                                        </Typography>\n                                        <Typography variant=\"caption\" display=\"block\" gutterBottom>\n                                            {chapter.name}\n                                            {downloadStatusStringFor(chapter)}\n                                        </Typography>\n                                    </Box>\n                                </Box>\n                                {downloadStatusStringFor(chapter) === ''\n                                        && (\n                                            <IconButton\n                                                onClick={(e) => {\n                                                    downloadChapter(chapter);\n                                                    // prevent parent tags from getting the event\n                                                    e.stopPropagation();\n                                                }}\n                                                size=\"large\"\n                                            >\n                                                <DownloadIcon />\n                                            </IconButton>\n                                        )}\n                            </CardContent>\n                        </Card>\n                    ))}\n                </div>\n            ))}\n        </>\n    );\n}\n","/* eslint-disable @typescript-eslint/no-shadow */\n/* eslint-disable react/destructuring-assignment */\n/* eslint-disable react/jsx-props-no-spreading */\n/*\n * Copyright (C) Contributors to the Suwayomi project\n *\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at https://mozilla.org/MPL/2.0/. */\n\nimport NavbarContext from 'components/context/NavbarContext';\nimport React, { useContext, useEffect, useState } from 'react';\nimport PlayArrowIcon from '@mui/icons-material/PlayArrow';\nimport PauseIcon from '@mui/icons-material/Pause';\nimport IconButton from '@mui/material/IconButton';\nimport DeleteIcon from '@mui/icons-material/Delete';\nimport client from 'util/client';\nimport {\n    DragDropContext, Draggable, DraggingStyle, Droppable, DropResult, NotDraggingStyle,\n} from 'react-beautiful-dnd';\nimport { useTheme, Palette } from '@mui/material/styles';\nimport List from '@mui/material/List';\nimport DragHandleIcon from '@mui/icons-material/DragHandle';\nimport ListItem from '@mui/material/ListItem';\nimport { ListItemIcon } from '@mui/material';\nimport EmptyView from 'components/util/EmptyView';\n\nimport { Box } from '@mui/system';\nimport Typography from '@mui/material/Typography';\nimport { useHistory } from 'react-router-dom';\n\nconst baseWebsocketUrl = JSON.parse(window.localStorage.getItem('serverBaseURL')!).replace('http', 'ws');\n\nconst getItemStyle = (isDragging: boolean,\n    draggableStyle: DraggingStyle | NotDraggingStyle | undefined, palette: Palette) => ({\n    // styles we need to apply on draggables\n    ...draggableStyle,\n\n    ...(isDragging && {\n        background: palette.mode === 'dark' ? '#424242' : 'rgb(235,235,235)',\n    }),\n});\n\nconst initialQueue = {\n    status: 'Stopped',\n    queue: [],\n} as IQueue;\n\nexport default function DownloadQueue() {\n    const [, setWsClient] = useState<WebSocket>();\n    const [queueState, setQueueState] = useState<IQueue>(initialQueue);\n    const { queue, status } = queueState;\n\n    const history = useHistory();\n\n    const theme = useTheme();\n\n    const { setTitle, setAction } = useContext(NavbarContext);\n\n    const toggleQueueStatus = () => {\n        if (status === 'Stopped') {\n            client.get('/api/v1/downloads/start');\n        } else {\n            client.get('/api/v1/downloads/stop');\n        }\n    };\n\n    useEffect(() => {\n        setTitle('Download Queue');\n\n        setAction(() => {\n            if (status === 'Stopped') {\n                return (\n                    <IconButton onClick={toggleQueueStatus} size=\"large\">\n                        <PlayArrowIcon />\n                    </IconButton>\n                );\n            }\n            return (\n                <IconButton onClick={toggleQueueStatus} size=\"large\">\n                    <PauseIcon />\n                </IconButton>\n            );\n        });\n    }, [status]);\n\n    useEffect(() => {\n        const wsc = new WebSocket(`${baseWebsocketUrl}/api/v1/downloads`);\n        wsc.onmessage = (e) => {\n            setQueueState(JSON.parse(e.data));\n        };\n\n        setWsClient(wsc);\n    }, []);\n\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    const onDragEnd = (result: DropResult) => {\n    };\n\n    if (queue.length === 0) {\n        return <EmptyView message=\"No downloads\" />;\n    }\n\n    const callDeleteServer = (chapter: IChapter) => {\n        // remove from download queue\n        client.delete(`/api/v1/download/${chapter.mangaId}/chapter/${chapter.index}`);\n\n        // delete partial download, should be handle server side?\n        // bug: The folder and the last image downloaded are not deleted\n        client.delete(`/api/v1/manga/${chapter.mangaId}/chapter/${chapter.index}`);\n    };\n\n    const deleteChapterQueue = (chapter: IChapter) => {\n        // required to stop before deleting otherwise the download kept going. Server issue?\n        client.get('/api/v1/downloads/stop')\n            .then(() => callDeleteServer(chapter));\n    };\n\n    return (\n        <>\n            <DragDropContext onDragEnd={onDragEnd}>\n                <Droppable droppableId=\"droppable\">\n                    {(provided) => (\n                        <List ref={provided.innerRef}>\n                            {queue.map((item, index) => (\n                                <Draggable\n                                    key={`${item.mangaId}-${item.chapterIndex}`}\n                                    draggableId={`${item.mangaId}-${item.chapterIndex}`}\n                                    index={index}\n                                >\n                                    {(provided, snapshot) => (\n                                        <ListItem\n                                            ContainerProps={{ ref: provided.innerRef } as any}\n                                            sx={{\n                                                display: 'flex',\n                                                justifyContent: 'flex-start',\n                                                alignItems: 'flex-start',\n                                                padding: 2,\n                                                margin: '10px',\n                                                '&:hover': {\n                                                    backgroundColor: 'action.hover',\n                                                    transition: 'background-color 100ms cubic-bezier(0.4, 0, 0.2, 1) 0ms',\n                                                },\n                                                '&:active': {\n                                                    backgroundColor: 'action.selected',\n                                                    transition: 'background-color 100ms cubic-bezier(0.4, 0, 0.2, 1) 0ms',\n                                                },\n                                            }}\n                                            onClick={() => history.push(`/manga/${item.chapter.mangaId}`)}\n                                            {...provided.draggableProps}\n                                            {...provided.dragHandleProps}\n                                            style={getItemStyle(\n                                                snapshot.isDragging,\n                                                provided.draggableProps.style,\n                                                theme.palette,\n                                            )}\n                                            ref={provided.innerRef}\n                                        >\n                                            <ListItemIcon sx={{ margin: 'auto 0' }}>\n                                                <DragHandleIcon />\n                                            </ListItemIcon>\n                                            <Box sx={{ display: 'flex' }}>\n                                                <Box sx={{ display: 'flex', flexDirection: 'column' }}>\n                                                    <Typography variant=\"h5\" component=\"h2\">\n                                                        {item.manga.title}\n                                                    </Typography>\n                                                    <Typography variant=\"caption\" display=\"block\" gutterBottom>\n                                                        {`${item.chapter.name} `\n                                                        + `(${(item.progress * 100).toFixed(2)}%)`\n                                                        + ` => state: ${item.state}`}\n                                                    </Typography>\n                                                </Box>\n                                            </Box>\n                                            <IconButton\n                                                sx={{ marginLeft: 'auto' }}\n                                                onClick={(e) => {\n                                                    // deleteCategory(index);\n                                                    // prevent parent tags from getting the event\n                                                    e.stopPropagation();\n\n                                                    // delete chapter from download queue\n                                                    deleteChapterQueue(item.chapter);\n                                                }}\n                                                size=\"large\"\n                                            >\n                                                <DeleteIcon />\n                                            </IconButton>\n                                        </ListItem>\n                                    )}\n                                </Draggable>\n\n                            ))}\n                            {provided.placeholder}\n                        </List>\n                    )}\n                </Droppable>\n            </DragDropContext>\n        </>\n    );\n}\n","/*\n * Copyright (C) Contributors to the Suwayomi project\n *\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at https://mozilla.org/MPL/2.0/. */\n\nexport const ISOLanguages = [\n    { code: 'all', name: 'All', nativeName: 'All' },\n    { code: 'installed', name: 'Installed', nativeName: 'Installed' },\n    { code: 'updates pending', name: 'Updates pending', nativeName: 'Updates pending' },\n\n    { code: 'other', name: 'other langs?', nativeName: 'Other' },\n\n    { code: 'localsourcelang', name: 'Local source', nativeName: 'Local source' },\n\n    // full list: https://github.com/meikidd/iso-639-1/blob/master/src/data.js\n    { code: 'en', name: 'English', nativeName: 'English' },\n    { code: 'ca', name: 'Catalan; Valencian', nativeName: 'Catal' },\n    { code: 'de', name: 'German', nativeName: 'Deutsch' },\n    { code: 'es', name: 'Spanish; Castilian', nativeName: 'Espaol' },\n    { code: 'es-419', name: 'Spanish; Castilian', nativeName: 'Espaol (Latinoamrica)' },\n    { code: 'fr', name: 'French', nativeName: 'Franais' },\n    { code: 'id', name: 'Indonesian', nativeName: 'Indonesia' },\n    { code: 'it', name: 'Italian', nativeName: 'Italiano' },\n    { code: 'pt', name: 'Portuguese', nativeName: 'Portugus' },\n    { code: 'pt-pt', name: 'Portuguese', nativeName: 'Portugus (Portugal)' },\n    { code: 'pt-br', name: 'Portuguese; Brasil', nativeName: 'Portugus (Brasil)' },\n    { code: 'vi', name: 'Vietnamese', nativeName: 'Ting Vit' },\n    { code: 'tr', name: 'Turkish', nativeName: 'Trke' },\n    { code: 'ru', name: 'Russian', nativeName: '' },\n    { code: 'ar', name: 'Arabic', nativeName: '' },\n    { code: 'hi', name: 'Hindi', nativeName: '' },\n    { code: 'th', name: 'Thai', nativeName: '' },\n    { code: 'zh', name: 'Chinese', nativeName: '' },\n    { code: 'zh-hans', name: 'Chinese', nativeName: ' (HANS)' },\n    { code: 'zh-hant', name: 'Chinese', nativeName: ' (HANT)' },\n    { code: 'zh-rhk', name: 'Chinese', nativeName: ' (RHK)' },\n    { code: 'zh-rtw', name: 'Chinese', nativeName: ' (RTW)' },\n\n    { code: 'ja', name: 'Japanese', nativeName: '' },\n    { code: 'ko', name: 'Korean', nativeName: '' },\n    { code: 'zu', name: 'Zulu', nativeName: 'isiZulu' },\n    { code: 'xh', name: 'Xhosa', nativeName: 'isiXhosa' },\n    { code: 'uk', name: 'Ukrainian', nativeName: '' },\n    { code: 'ro', name: 'Romanian', nativeName: 'Romn' },\n    { code: 'bg', name: 'Bulgarian', nativeName: '' },\n    { code: 'cs', name: 'Czech', nativeName: 'etina' },\n    { code: 'pl', name: 'Polish', nativeName: 'polski' },\n    { code: 'no', name: 'Norwegian', nativeName: 'Norsk' },\n    { code: 'nl', name: 'Dutch', nativeName: 'Nederlands' },\n    { code: 'my', name: 'Burmese', nativeName: '' },\n    { code: 'ms', name: 'Malay', nativeName: 'Malaysia' },\n    { code: 'mn', name: 'Mongolian', nativeName: '' },\n    { code: 'ml', name: 'Malayalam', nativeName: '' },\n    { code: 'ku', name: 'Kurdish', nativeName: 'Kurd' },\n    { code: 'hu', name: 'Hungarian', nativeName: 'Magyar' },\n    { code: 'hr', name: 'Croatian', nativeName: 'Hrvatski' },\n    { code: 'he', name: 'Hebrew', nativeName: '' },\n    { code: 'fil', name: 'Filipino', nativeName: 'Filipino' },\n    { code: 'fi', name: 'Finnish', nativeName: 'suomi' },\n    { code: 'fa', name: 'Persian', nativeName: '' },\n    { code: 'eu', name: 'Basque', nativeName: 'euskara' },\n    { code: 'el', name: 'Greek', nativeName: '' },\n    { code: 'da', name: 'Danish', nativeName: 'dansk' },\n    { code: 'bn', name: 'Bengali', nativeName: '' },\n    { code: 'lt', name: 'Lithuanian', nativeName: 'lietuvi kalba' },\n    { code: 'sh', name: 'Serbo-Croatian', nativeName: 'srpskohrvatski' },\n\n    { code: 'af', name: 'Afrikaans', nativeName: 'Afrikaans' },\n    { code: 'am', name: 'Amharic', nativeName: '' },\n    { code: 'az', name: 'Azerbaijani', nativeName: 'Azrbaycan' },\n    { code: 'be', name: 'Belarusian', nativeName: '' },\n    { code: 'bs', name: 'Bosnian', nativeName: 'bosanski' },\n    { code: 'sv', name: 'Swedish', nativeName: 'svenska' },\n    { code: 'sv', name: 'Swedish', nativeName: 'svenska' },\n\n];\n\nexport function langCodeToName(code: string): string {\n    const whereToCut = code.indexOf('-') !== -1 ? code.indexOf('-') : code.length;\n\n    const proccessedCode = code.toLocaleLowerCase().substring(0, whereToCut);\n    let result = `language with code: ${code}`;\n\n    for (let i = 0; i < ISOLanguages.length; i++) {\n        if (ISOLanguages[i].code === proccessedCode\n            || ISOLanguages[i].code === code.toLocaleLowerCase()) {\n            result = ISOLanguages[i].nativeName;\n        }\n    }\n\n    return result;\n}\n\nfunction defaultNativeLang() {\n    return 'en'; // TODO: infer from the browser\n}\n\nexport function extensionDefaultLangs() {\n    return [\n        defaultNativeLang(),\n        'all',\n    ];\n}\n\nexport function sourceDefualtLangs() {\n    return [\n        defaultNativeLang(),\n        'localsourcelang',\n    ];\n}\n\nexport function sourceForcedDefaultLangs(): string[] {\n    return [\n        'localsourcelang',\n    ];\n}\n\nexport const langSortCmp = (a: string, b: string) => {\n    // puts english first for convience\n    const aLang = langCodeToName(a);\n    const bLang = langCodeToName(b);\n\n    if (a === 'en') return -1;\n    if (b === 'en') return 1;\n    if (a === 'localSourceLang') return 1;\n    if (b === 'localSourceLang') return -1;\n\n    return aLang > bLang ? 1 : -1;\n};\n","/*\n * Copyright (C) Contributors to the Suwayomi project\n *\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at https://mozilla.org/MPL/2.0/. */\n\nimport React, { useState } from 'react';\nimport Button from '@mui/material/Button';\nimport DialogTitle from '@mui/material/DialogTitle';\nimport DialogContent from '@mui/material/DialogContent';\nimport DialogActions from '@mui/material/DialogActions';\nimport Dialog from '@mui/material/Dialog';\nimport Switch from '@mui/material/Switch';\nimport IconButton from '@mui/material/IconButton';\nimport FilterListIcon from '@mui/icons-material/FilterList';\nimport { List, ListItemSecondaryAction, ListItemText } from '@mui/material';\nimport ListItem from '@mui/material/ListItem';\nimport { langCodeToName } from 'util/language';\nimport cloneObject from 'util/cloneObject';\n\nfunction removeAll(firstList: any[], secondList: any[]) {\n    secondList.forEach((item) => {\n        const index = firstList.indexOf(item);\n        if (index !== -1) {\n            firstList.splice(index, 1);\n        }\n    });\n\n    return firstList;\n}\n\ninterface IProps {\n    shownLangs: string[]\n    setShownLangs: (arg0: string[]) => void\n    allLangs: string[]\n    forcedLangs?: string[]\n}\n\nexport default function LangSelect(props: IProps) {\n    const {\n        shownLangs, setShownLangs, allLangs, forcedLangs,\n    } = props;\n    // hold a copy and only sate state on parent when OK pressed, improves performance\n    const [mShownLangs, setMShownLangs] = useState(\n        removeAll(cloneObject(shownLangs), forcedLangs!),\n    );\n    const [open, setOpen] = useState<boolean>(false);\n\n    const handleCancel = () => {\n        setOpen(false);\n    };\n\n    const handleOk = () => {\n        setOpen(false);\n        setShownLangs(mShownLangs);\n    };\n\n    const handleChange = (event: React.ChangeEvent<HTMLInputElement>, lang: string) => {\n        const { checked } = event.target as HTMLInputElement;\n\n        if (checked) {\n            setMShownLangs([...mShownLangs, lang]);\n        } else {\n            const clone = cloneObject(mShownLangs);\n            clone.splice(clone.indexOf(lang), 1);\n            setMShownLangs(clone);\n        }\n    };\n\n    return (\n        <>\n            <IconButton\n                onClick={() => setOpen(true)}\n                aria-label=\"display more actions\"\n                edge=\"end\"\n                color=\"inherit\"\n                size=\"large\"\n            >\n                <FilterListIcon />\n            </IconButton>\n            <Dialog\n                sx={{\n                    '.MuiDialog-paper': {\n                        maxHeight: 435,\n                        width: '80%',\n                    },\n                }}\n                maxWidth=\"xs\"\n                open={open}\n            >\n                <DialogTitle>Enabled Languages</DialogTitle>\n                <DialogContent dividers sx={{ padding: 0 }}>\n                    <List>\n                        {allLangs.map((lang) => (\n                            <ListItem key={lang}>\n                                <ListItemText primary={langCodeToName(lang)} />\n\n                                <ListItemSecondaryAction>\n                                    <Switch\n                                        checked={mShownLangs.indexOf(lang) !== -1}\n                                        onChange={(e) => handleChange(e, lang)}\n                                    />\n                                </ListItemSecondaryAction>\n\n                            </ListItem>\n                        ))}\n                    </List>\n\n                </DialogContent>\n                <DialogActions>\n                    <Button autoFocus onClick={handleCancel} color=\"primary\">\n                        Cancel\n                    </Button>\n                    <Button onClick={handleOk} color=\"primary\">\n                        Ok\n                    </Button>\n                </DialogActions>\n            </Dialog>\n        </>\n    );\n}\n\nLangSelect.defaultProps = {\n    forcedLangs: [] as string[],\n};\n","/*\n * Copyright (C) Contributors to the Suwayomi project\n *\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at https://mozilla.org/MPL/2.0/. */\n\nimport React from 'react';\nimport Card from '@mui/material/Card';\nimport CardContent from '@mui/material/CardContent';\nimport { useHistory } from 'react-router-dom';\nimport Button from '@mui/material/Button';\nimport Avatar from '@mui/material/Avatar';\nimport Typography from '@mui/material/Typography';\nimport useLocalStorage from 'util/useLocalStorage';\nimport { langCodeToName } from 'util/language';\nimport { Box, styled } from '@mui/system';\n\nconst MobileWidthButtons = styled('div')(({ theme }) => ({\n    display: 'flex',\n    [theme.breakpoints.up('sm')]: {\n        display: 'none',\n    },\n}));\n\nconst WiderWidthButtons = styled('div')(({ theme }) => ({\n    display: 'flex',\n    [theme.breakpoints.down('sm')]: {\n        display: 'none',\n    },\n\n    '& .MuiButton-root': {\n        marginLeft: '20px',\n    },\n}));\n\ninterface IProps {\n    source: ISource\n}\n\nexport default function SourceCard(props: IProps) {\n    const {\n        source: {\n            id, name, lang, iconUrl, supportsLatest, isNsfw,\n        },\n    } = props;\n\n    const history = useHistory();\n\n    const [serverAddress] = useLocalStorage<String>('serverBaseURL', '');\n    const [useCache] = useLocalStorage<boolean>('useCache', true);\n\n    const redirectTo = (e: any, to: string) => {\n        history.push(to);\n\n        // prevent parent tags from getting the event\n        e.stopPropagation();\n    };\n\n    return (\n        <Card\n            sx={{\n                margin: '10px',\n                '&:hover': {\n                    backgroundColor: 'action.hover',\n                    transition: 'background-color 100ms cubic-bezier(0.4, 0, 0.2, 1) 0ms',\n                },\n                '&:active': {\n                    backgroundColor: 'action.selected',\n                    transition: 'background-color 100ms cubic-bezier(0.4, 0, 0.2, 1) 0ms',\n                },\n            }}\n            onClick={(e) => redirectTo(e, `/sources/${id}/popular/`)}\n        >\n            <CardContent sx={{\n                display: 'flex',\n                justifyContent: 'space-between',\n                alignItems: 'center',\n                padding: 2,\n            }}\n            >\n\n                <Box sx={{ display: 'flex' }}>\n                    <Avatar\n                        variant=\"rounded\"\n                        alt={name}\n                        sx={{\n                            width: 56,\n                            height: 56,\n                            flex: '0 0 auto',\n                            mr: 2,\n                        }}\n                        src={`${serverAddress}${iconUrl}?useCache=${useCache}`}\n                    />\n                    <Box sx={{ display: 'flex', flexDirection: 'column', justifyContent: 'center' }}>\n                        <Typography variant=\"h5\" component=\"h2\">\n                            {name}\n                        </Typography>\n                        {id !== '0' && (\n                            <Typography variant=\"caption\" display=\"block\" gutterBottom>\n                                {langCodeToName(lang)}\n                                {isNsfw && (\n                                    <Typography variant=\"caption\" display=\"inline\" gutterBottom color=\"red\">\n                                        {' 18+'}\n                                    </Typography>\n                                )}\n                            </Typography>\n                        )}\n                    </Box>\n                </Box>\n                <>\n                    <MobileWidthButtons>\n                        {supportsLatest && (\n                            <Button\n                                variant=\"outlined\"\n                                onClick={(e) => redirectTo(e, `/sources/${id}/latest/`)}\n                            >\n                                Latest\n                            </Button>\n                        )}\n                    </MobileWidthButtons>\n                    <WiderWidthButtons>\n                        {supportsLatest && (\n                            <Button\n                                variant=\"outlined\"\n                                onClick={(e) => redirectTo(e, `/sources/${id}/latest/`)}\n                            >\n                                Latest\n                            </Button>\n                        )}\n                        <Button\n                            variant=\"outlined\"\n                            onClick={(e: any) => redirectTo(e, `/sources/${id}/popular/`)}\n                        >\n                            Browse\n                        </Button>\n                    </WiderWidthButtons>\n                </>\n            </CardContent>\n        </Card>\n    );\n}\n","/*\n * Copyright (C) Contributors to the Suwayomi project\n *\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at https://mozilla.org/MPL/2.0/. */\n\nimport React, { useContext, useEffect, useState } from 'react';\nimport LangSelect from 'components/navbar/action/LangSelect';\nimport SourceCard from 'components/SourceCard';\nimport NavbarContext from 'components/context/NavbarContext';\nimport client from 'util/client';\nimport {\n    sourceDefualtLangs, sourceForcedDefaultLangs, langCodeToName, langSortCmp,\n} from 'util/language';\nimport useLocalStorage from 'util/useLocalStorage';\nimport LoadingPlaceholder from 'components/util/LoadingPlaceholder';\nimport { IconButton } from '@mui/material';\nimport TravelExploreIcon from '@mui/icons-material/TravelExplore';\nimport { useHistory } from 'react-router-dom';\n\nfunction sourceToLangList(sources: ISource[]) {\n    const result: string[] = [];\n\n    sources.forEach((source) => {\n        if (result.indexOf(source.lang) === -1) { result.push(source.lang); }\n    });\n\n    result.sort(langSortCmp);\n    return result;\n}\n\nfunction groupByLang(sources: ISource[]) {\n    const result = {} as any;\n    sources.forEach((source) => {\n        if (result[source.lang] === undefined) { result[source.lang] = [] as ISource[]; }\n        result[source.lang].push(source);\n    });\n\n    return result;\n}\n\nexport default function Sources() {\n    const { setTitle, setAction } = useContext(NavbarContext);\n\n    const [shownLangs, setShownLangs] = useLocalStorage<string[]>('shownSourceLangs', sourceDefualtLangs());\n    const [showNsfw] = useLocalStorage<boolean>('showNsfw', true);\n\n    const [sources, setSources] = useState<ISource[]>([]);\n    const [fetched, setFetched] = useState<boolean>(false);\n\n    const history = useHistory();\n\n    useEffect(() => {\n        // make sure all of forcedDefaultLangs() exists in shownLangs\n        sourceForcedDefaultLangs().forEach((forcedLang) => {\n            let hasLang = false;\n            shownLangs.forEach((lang) => {\n                if (lang === forcedLang) hasLang = true;\n            });\n            if (!hasLang) {\n                setShownLangs((shownLangsCopy) => {\n                    shownLangsCopy.push(forcedLang);\n                    return shownLangsCopy;\n                });\n            }\n        });\n    }, []);\n\n    useEffect(() => {\n        setTitle('Sources');\n        setAction(\n            <>\n                <IconButton\n                    onClick={() => history.push('/sources/all/search/')}\n                    size=\"large\"\n                >\n                    <TravelExploreIcon />\n                </IconButton>\n                <LangSelect\n                    shownLangs={shownLangs}\n                    setShownLangs={setShownLangs}\n                    allLangs={sourceToLangList(sources)}\n                    forcedLangs={sourceForcedDefaultLangs()}\n                />\n            </>,\n        );\n    }, [shownLangs, sources]);\n\n    useEffect(() => {\n        client.get('/api/v1/source/list')\n            .then((response) => response.data)\n            .then((data) => { setSources(data); setFetched(true); });\n    }, []);\n\n    if (sources.length === 0) {\n        if (fetched) return (<h3>No sources found. Install Some Extensions first.</h3>);\n        return <LoadingPlaceholder />;\n    }\n    return (\n        <>\n            {/* eslint-disable-next-line max-len */}\n            {Object.entries(groupByLang(sources)).sort((a, b) => langSortCmp(a[0], b[0])).map(([lang, list]) => (\n                shownLangs.indexOf(lang) !== -1 && (\n                    <React.Fragment key={lang}>\n                        <h1 key={lang} style={{ marginLeft: 25 }}>{langCodeToName(lang)}</h1>\n                        {(list as ISource[])\n                            .filter((source) => showNsfw || !source.isNsfw)\n                            .map((source) => (\n                                <SourceCard\n                                    key={source.id}\n                                    source={source}\n                                />\n                            ))}\n                    </React.Fragment>\n                )\n            ))}\n        </>\n    );\n}\n","/*\n * Copyright (C) Contributors to the Suwayomi project\n *\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at https://mozilla.org/MPL/2.0/. */\n\nimport React, { useState } from 'react';\nimport Card from '@mui/material/Card';\nimport CardContent from '@mui/material/CardContent';\nimport Button from '@mui/material/Button';\nimport Avatar from '@mui/material/Avatar';\nimport Typography from '@mui/material/Typography';\nimport client from 'util/client';\nimport useLocalStorage from 'util/useLocalStorage';\nimport { Box } from '@mui/system';\n\ninterface IProps {\n    extension: IExtension\n    notifyInstall: () => void\n}\n\nexport default function ExtensionCard(props: IProps) {\n    const {\n        extension: {\n            name, lang, versionName, installed, hasUpdate, obsolete, pkgName, iconUrl, isNsfw,\n        },\n        notifyInstall,\n    } = props;\n    const [installedState, setInstalledState] = useState<string>(\n        () => {\n            if (obsolete) { return 'obsolete'; }\n            if (hasUpdate) { return 'update'; }\n            return (installed ? 'uninstall' : 'install');\n        },\n    );\n\n    const [serverAddress] = useLocalStorage<String>('serverBaseURL', '');\n    const [useCache] = useLocalStorage<boolean>('useCache', true);\n\n    const langPress = lang === 'all' ? 'All' : lang.toUpperCase();\n\n    function install() {\n        setInstalledState('installing');\n        client.get(`/api/v1/extension/install/${pkgName}`)\n            .then(() => {\n                setInstalledState('uninstall');\n                notifyInstall();\n            });\n    }\n\n    function update() {\n        setInstalledState('updating');\n        client.get(`/api/v1/extension/update/${pkgName}`)\n            .then(() => {\n                setInstalledState('uninstall');\n                notifyInstall();\n            });\n    }\n\n    function uninstall() {\n        setInstalledState('uninstalling');\n        client.get(`/api/v1/extension/uninstall/${pkgName}`)\n            .then(() => {\n                // setInstalledState('install');\n                notifyInstall();\n            });\n    }\n\n    function handleButtonClick() {\n        switch (installedState) {\n            case 'install':\n                install();\n                break;\n            case 'update':\n                update();\n                break;\n            case 'obsolete':\n                uninstall();\n                setTimeout(() => window.location.reload(), 3000);\n                break;\n            case 'uninstall':\n                uninstall();\n                break;\n            default:\n                break;\n        }\n    }\n\n    return (\n        <Card sx={{ margin: '10px' }}>\n            <CardContent sx={{\n                display: 'flex',\n                justifyContent: 'space-between',\n                alignItems: 'center',\n                p: 2,\n            }}\n            >\n                <Box sx={{ display: 'flex' }}>\n                    <Avatar\n                        variant=\"rounded\"\n                        sx={{\n                            width: 56,\n                            height: 56,\n                            flex: '0 0 auto',\n                            mr: 2,\n                        }}\n                        alt={name}\n                        src={`${serverAddress}${iconUrl}?useCache=${useCache}`}\n                    />\n                    <Box sx={{ display: 'flex', flexDirection: 'column' }}>\n                        <Typography variant=\"h5\" component=\"h2\">\n                            {name}\n                        </Typography>\n                        <Typography variant=\"caption\" display=\"block\" gutterBottom>\n                            {langPress}\n                            {' '}\n                            {versionName}\n                            {isNsfw && (\n                                <Typography variant=\"caption\" display=\"inline\" gutterBottom color=\"red\">\n                                    {' 18+'}\n                                </Typography>\n                            )}\n                        </Typography>\n                    </Box>\n                </Box>\n\n                <Button\n                    variant=\"outlined\"\n                    sx={{ color: installedState === 'obsolete' ? 'red' : 'inherit' }}\n                    onClick={() => handleButtonClick()}\n                >\n                    {installedState}\n\n                </Button>\n            </CardContent>\n        </Card>\n    );\n}\n","/*\n * Copyright (C) Contributors to the Suwayomi project\n *\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at https://mozilla.org/MPL/2.0/. */\n\nimport React, { useContext, useEffect, useState } from 'react';\nimport { fromEvent } from 'file-selector';\nimport IconButton from '@mui/material/IconButton';\nimport AddIcon from '@mui/icons-material/Add';\nimport ExtensionCard from 'components/ExtensionCard';\nimport NavbarContext from 'components/context/NavbarContext';\nimport client from 'util/client';\nimport useLocalStorage from 'util/useLocalStorage';\nimport LangSelect from 'components/navbar/action/LangSelect';\nimport { extensionDefaultLangs, langCodeToName, langSortCmp } from 'util/language';\nimport { makeToaster } from 'components/util/Toast';\nimport LoadingPlaceholder from 'components/util/LoadingPlaceholder';\nimport AppbarSearch from 'components/util/AppbarSearch';\nimport { useQueryParam, StringParam } from 'use-query-params';\nimport { Virtuoso } from 'react-virtuoso';\nimport { Typography, useMediaQuery, useTheme } from '@mui/material';\n\nconst LANGUAGE = 0;\nconst EXTENSIONS = 1;\n\nconst allLangs: string[] = [];\n\ninterface GroupedExtension {\n    [key: string]: IExtension[]\n}\n\nfunction groupExtensions(extensions: IExtension[]) {\n    allLangs.length = 0; // empty the array\n    const sortedExtenions: GroupedExtension = { installed: [], 'updates pending': [], all: [] };\n    extensions.forEach((extension) => {\n        if (sortedExtenions[extension.lang] === undefined) {\n            sortedExtenions[extension.lang] = [];\n            if (extension.lang !== 'all') { allLangs.push(extension.lang); }\n        }\n        if (extension.installed) {\n            if (extension.hasUpdate) {\n                sortedExtenions['updates pending'].push(extension);\n            } else {\n                sortedExtenions.installed.push(extension);\n            }\n        } else {\n            sortedExtenions[extension.lang].push(extension);\n        }\n    });\n\n    allLangs.sort(langSortCmp);\n    const result: [string, IExtension[]][] = [\n        ['updates pending', sortedExtenions['updates pending']],\n        ['installed', sortedExtenions.installed],\n        ['all', sortedExtenions.all],\n    ];\n\n    const langExt: [string, IExtension[]][] = allLangs.map((lang) => [lang, sortedExtenions[lang]]);\n\n    return result.concat(langExt);\n}\n\nexport default function MangaExtensions() {\n    const { setTitle, setAction } = useContext(NavbarContext);\n    const [shownLangs, setShownLangs] = useLocalStorage<string[]>('shownExtensionLangs', extensionDefaultLangs());\n    const [showNsfw] = useLocalStorage<boolean>('showNsfw', true);\n    const theme = useTheme();\n    const isMobile = useMediaQuery(theme.breakpoints.down('sm'));\n    const [query] = useQueryParam('query', StringParam);\n\n    useEffect(() => {\n        setTitle('Extensions');\n        setAction(\n            <>\n                <AppbarSearch />\n                <IconButton\n                    onClick={\n                        () => document.getElementById('external-extension-file')?.click()\n                    }\n                    size=\"large\"\n                >\n                    <AddIcon />\n                </IconButton>\n                <LangSelect\n                    shownLangs={shownLangs}\n                    setShownLangs={setShownLangs}\n                    allLangs={allLangs}\n                />\n            </>,\n        );\n    }, [shownLangs]);\n\n    const [extensionsRaw, setExtensionsRaw] = useState<IExtension[]>([]);\n\n    const [updateTriggerHolder, setUpdateTriggerHolder] = useState(0); // just a hack\n    const triggerUpdate = () => setUpdateTriggerHolder(updateTriggerHolder + 1); // just a hack\n\n    useEffect(() => {\n        client.get('/api/v1/extension/list')\n            .then((response) => response.data)\n            .then((data) => setExtensionsRaw(data));\n    }, [updateTriggerHolder]);\n\n    const [toasts, makeToast] = makeToaster(useState<React.ReactElement[]>([]));\n\n    const submitExternalExtension = (file: File) => {\n        if (file.name.toLowerCase().endsWith('apk')) {\n            const formData = new FormData();\n            formData.append('file', file);\n\n            // empty the input\n            // @ts-ignore\n            document.getElementById('external-extension-file').value = null;\n\n            makeToast('Installing Extension File....', 'info');\n            client.post('/api/v1/extension/install',\n                formData, { headers: { 'Content-Type': 'multipart/form-data' } })\n                .then(() => {\n                    makeToast('Installed extension successfully!', 'success');\n                    triggerUpdate();\n                })\n                .catch(() => makeToast('Extension installion failed!', 'error'));\n        } else {\n            makeToast('invalid file type!', 'error');\n        }\n    };\n\n    const dropHandler = async (e: Event) => {\n        e.preventDefault();\n        const files = await fromEvent(e);\n\n        submitExternalExtension(files[0] as File);\n    };\n\n    const dragOverHandler = (e: Event) => {\n        e.preventDefault();\n    };\n\n    useEffect(() => {\n        document.addEventListener('drop', dropHandler);\n        document.addEventListener('dragover', dragOverHandler);\n\n        const changeHandler = async (evt: Event) => {\n            const files = await fromEvent(evt);\n            submitExternalExtension(files[0] as File);\n        };\n        const input = document.getElementById('external-extension-file');\n        input?.addEventListener('change', changeHandler);\n\n        return () => {\n            document.removeEventListener('drop', dropHandler);\n            document.removeEventListener('dragover', dragOverHandler);\n            input?.removeEventListener('change', changeHandler);\n        };\n    }, [extensionsRaw]); // useEffect only after <input> renders\n\n    if (extensionsRaw.length === 0) {\n        return <LoadingPlaceholder />;\n    }\n\n    const filtered = extensionsRaw.filter((ext) => {\n        const nsfwFilter = showNsfw || !ext.isNsfw;\n        if (!query) return nsfwFilter;\n        return nsfwFilter && ext.name.toLowerCase().includes(query.toLowerCase());\n    });\n\n    const combinedShownLangs = ['installed', 'updates pending', 'all', ...shownLangs];\n\n    const groupedExtensions: [string, IExtension[]][] = groupExtensions(filtered)\n        .filter((group) => group[EXTENSIONS].length > 0)\n        .filter((group) => combinedShownLangs.includes(group[LANGUAGE]));\n\n    const flatRenderItems: (IExtension | string)[] = groupedExtensions.flat(2);\n\n    return (\n        <>\n            {toasts}\n            <input\n                type=\"file\"\n                id=\"external-extension-file\"\n                style={{ display: 'none' }}\n            />\n            <Virtuoso\n                style={{\n                    height: isMobile ? 'calc(100vh - 64px - 64px)' : 'calc(100vh - 64px)',\n                }}\n                totalCount={flatRenderItems.length}\n                itemContent={(index) => {\n                    if (typeof (flatRenderItems[index]) === 'string') {\n                        const item = flatRenderItems[index] as string;\n                        return (\n                            <Typography\n                                key={item}\n                                variant=\"h2\"\n                                style={{\n                                    paddingLeft: 25,\n                                    paddingBottom: '0.83em',\n                                    paddingTop: '0.83em',\n                                    backgroundColor: 'rgb(18, 18, 18)',\n                                    fontSize: '2em',\n                                    fontWeight: 'bold',\n                                }}\n                            >\n                                {langCodeToName(item)}\n                            </Typography>\n                        );\n                    }\n                    const item = flatRenderItems[index] as IExtension;\n\n                    return (\n                        <ExtensionCard\n                            key={item.apkName}\n                            extension={item}\n                            notifyInstall={() => {\n                                triggerUpdate();\n                            }}\n                        />\n                    );\n                }}\n            />\n        </>\n    );\n}\n","/*\n * Copyright (C) Contributors to the Suwayomi project\n *\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at https://mozilla.org/MPL/2.0/. */\n\nimport React, { useState } from 'react';\nimport Tabs from '@mui/material/Tabs';\nimport Tab from '@mui/material/Tab';\nimport TabPanel from 'components/util/TabPanel';\nimport Sources from 'screens/Sources';\nimport Extensions from 'screens/Extensions';\n\nexport default function Browse() {\n    const [tabNum, setTabNum] = useState<number>(0);\n\n    return (\n        <>\n            <Tabs\n                value={tabNum}\n                onChange={(e, newTab) => setTabNum(newTab)}\n                indicatorColor=\"primary\"\n                textColor=\"primary\"\n                centered\n                variant=\"fullWidth\"\n                scrollButtons\n                allowScrollButtonsMobile\n            >\n                <Tab sx={{ textTransform: 'none' }} label=\"Sources\" />\n                <Tab sx={{ textTransform: 'none' }} label=\"Extensions\" />\n            </Tabs>\n            <TabPanel index={0} currentIndex={tabNum}>\n                <Sources />\n            </TabPanel>\n            <TabPanel index={1} currentIndex={tabNum}>\n                <Extensions />\n            </TabPanel>\n        </>\n    );\n}\n","/*\n * Copyright (C) Contributors to the Suwayomi project\n *\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at https://mozilla.org/MPL/2.0/. */\n\nimport React, { useState } from 'react';\nimport NavBarContext from 'components/context/NavbarContext';\n\ninterface IProps{\n    children: React.ReactNode\n}\n\nexport default function NavBarProvider({ children }:IProps) {\n    const [title, setTitle] = useState<string>('Tachidesk');\n    const [action, setAction] = useState<any>(<div />);\n    const [override, setOverride] = useState<INavbarOverride>({\n        status: false,\n        value: <div />,\n    });\n\n    const value = {\n        title,\n        setTitle,\n        action,\n        setAction,\n        override,\n        setOverride,\n    };\n    return (\n        <NavBarContext.Provider value={value}>\n            {children}\n        </NavBarContext.Provider>\n    );\n}\n","/*\n * Copyright (C) Contributors to the Suwayomi project\n *\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at https://mozilla.org/MPL/2.0/. */\n\nimport React from 'react';\nimport LibraryOptionsContext, { DefaultLibraryOptions } from 'components/context/LibraryOptionsContext';\nimport useLocalStorage from 'util/useLocalStorage';\n\ninterface IProps {\n    children: React.ReactNode;\n}\n\nexport default function LibraryOptionsContextProvider({ children }: IProps) {\n    const [options, setOptions] = useLocalStorage<LibraryOptions>('libraryOptions', DefaultLibraryOptions);\n\n    function setOption<Name extends keyof LibraryOptions>(\n        option: Name,\n        value: React.SetStateAction<LibraryOptions[Name]>,\n    ) {\n        setOptions((opts) => ({\n            ...opts,\n            [option]: typeof value === 'function' ? value(opts[option]) : value,\n        }));\n    }\n\n    // TODO remove these fields when we have a better way to handle them\n    // eslint-disable-next-line eqeqeq\n    const active = !(options.unread == undefined) || !(options.downloaded == undefined);\n    // eslint-disable-next-line eqeqeq\n    const activeSort = (options.sortDesc != undefined) || (options.sorts != undefined);\n\n    return (\n        <LibraryOptionsContext.Provider\n            value={{\n                options,\n                setOption,\n                setOptions,\n                active,\n                activeSort,\n            }}\n        >\n            {children}\n        </LibraryOptionsContext.Provider>\n    );\n}\n","/*\n* Copyright (C) Contributors to the Suwayomi project\n*\n* This Source Code Form is subject to the terms of the Mozilla Public\n* License, v. 2.0. If a copy of the MPL was not distributed with this\n* file, You can obtain one at https://mozilla.org/MPL/2.0/.\n*/\n\nimport { Card } from '@mui/material';\nimport { useHistory } from 'react-router-dom';\nimport NavbarContext from 'components/context/NavbarContext';\nimport MangaGrid from 'components/MangaGrid';\nimport LangSelect from 'components/navbar/action/LangSelect';\nimport AppbarSearch from 'components/util/AppbarSearch';\nimport React, { useContext, useEffect, useState } from 'react';\nimport { useQueryParam, StringParam } from 'use-query-params';\nimport client from 'util/client';\nimport {\n    langCodeToName, langSortCmp, sourceDefualtLangs, sourceForcedDefaultLangs,\n} from 'util/language';\nimport useLocalStorage from 'util/useLocalStorage';\nimport PQueue from 'p-queue/dist/index';\n\nfunction sourceToLangList(sources: ISource[]) {\n    const result: string[] = [];\n\n    sources.forEach((source) => {\n        if (result.indexOf(source.lang) === -1) { result.push(source.lang); }\n    });\n\n    result.sort(langSortCmp);\n    return result;\n}\n\nexport default function SearchAll() {\n    const [query] = useQueryParam('query', StringParam);\n    const { setTitle, setAction } = useContext(NavbarContext);\n    const [triggerUpdate, setTriggerUpdate] = useState<number>(2);\n    const [mangas, setMangas] = useState<any>({});\n\n    const [shownLangs, setShownLangs] = useLocalStorage<string[]>('shownSourceLangs', sourceDefualtLangs());\n    const [showNsfw] = useLocalStorage<boolean>('showNsfw', true);\n\n    const [sources, setSources] = useState<ISource[]>([]);\n    const [fetched, setFetched] = useState<any>({});\n    const [FetchedSources, setFetchedSources] = useState<any>({});\n\n    const [lastPageNum, setLastPageNum] = useState<number>(1);\n\n    const [ResetUI, setResetUI] = useState<number>(0);\n\n    const limit = new PQueue({ concurrency: 5 });\n\n    useEffect(() => {\n        setTitle('Global Search');\n        setAction(\n            <>\n                <AppbarSearch />\n            </>\n            ,\n        );\n    }, []);\n\n    useEffect(() => {\n        client.get('/api/v1/source/list')\n            .then((response) => response.data)\n            .then((data) => {\n                setSources(data.sort((a: { displayName: string; }, b: { displayName: string; }) => {\n                    if (a.displayName < b.displayName) { return -1; }\n                    if (a.displayName > b.displayName) { return 1; }\n                    return 0;\n                })); setFetchedSources(true);\n            });\n    }, []);\n\n    async function doIT(elem: any[]) {\n        elem.map((ele) => limit.add(async () => {\n            const response = await client.get(`/api/v1/source/${ele.id}/search?searchTerm=${query || ''}&pageNum=1`);\n            const data = await response.data;\n            const tmp = mangas;\n            tmp[ele.id] = data.mangaList;\n            setMangas(tmp);\n            const tmp2 = fetched;\n            tmp2[ele.id] = true;\n            setFetched(tmp2);\n            setResetUI(1);\n        }));\n    }\n\n    useEffect(() => {\n        if (triggerUpdate === 2) {\n            return;\n        }\n        if (triggerUpdate === 0) {\n            setTriggerUpdate(1);\n            return;\n        }\n        setFetched({});\n        setMangas({});\n        // eslint-disable-next-line max-len\n        doIT(sources.filter(({ lang }) => shownLangs.indexOf(lang) !== -1).filter((source) => showNsfw || !source.isNsfw));\n    }, [triggerUpdate]);\n\n    useEffect(() => {\n        if (ResetUI === 1) {\n            setResetUI(0);\n        }\n    }, [ResetUI]);\n\n    useEffect(() => {\n        if (query && FetchedSources) {\n            const delayDebounceFn = setTimeout(() => {\n                setTriggerUpdate(0);\n            }, 1000);\n            return () => clearTimeout(delayDebounceFn);\n        }\n        return () => {};\n    }, [query, shownLangs, sources]);\n\n    useEffect(() => {\n        // make sure all of forcedDefaultLangs() exists in shownLangs\n        sourceForcedDefaultLangs().forEach((forcedLang) => {\n            let hasLang = false;\n            shownLangs.forEach((lang) => {\n                if (lang === forcedLang) hasLang = true;\n            });\n            if (!hasLang) {\n                setShownLangs((shownLangsCopy) => {\n                    shownLangsCopy.push(forcedLang);\n                    return shownLangsCopy;\n                });\n            }\n        });\n    }, []);\n\n    useEffect(() => {\n        setTitle('Sources');\n        setAction(\n            <>\n                <AppbarSearch\n                    autoOpen\n                />\n                <LangSelect\n                    shownLangs={shownLangs}\n                    setShownLangs={setShownLangs}\n                    allLangs={sourceToLangList(sources)}\n                    forcedLangs={sourceForcedDefaultLangs()}\n                />\n            </>,\n        );\n    }, [shownLangs, sources]);\n\n    const history = useHistory();\n\n    const redirectTo = (e: any, to: string) => {\n        history.push(to);\n\n        // prevent parent tags from getting the event\n        e.stopPropagation();\n    };\n    if (query) {\n        return (\n            <>\n                {/* eslint-disable-next-line max-len */}\n                {sources.filter(({ lang }) => shownLangs.indexOf(lang) !== -1).filter((source) => showNsfw || !source.isNsfw).sort((a, b) => {\n                    const af = fetched[a.id];\n                    const bf = fetched[b.id];\n                    if (af && !bf) { return -1; }\n                    if (!af && bf) { return 1; }\n                    if (!af && !bf) { return 0; }\n\n                    const al = mangas[a.id].length === 0;\n                    const bl = mangas[b.id].length === 0;\n                    if (al && !bl) { return 1; }\n                    if (bl && !al) { return -1; }\n                    return 0;\n                }).map(({ lang, id, displayName }) => (\n                    (\n                        <>\n                            <Card\n                                sx={{\n                                    margin: '10px',\n                                    '&:hover': {\n                                        backgroundColor: 'action.hover',\n                                        transition: 'background-color 100ms cubic-bezier(0.4, 0, 0.2, 1) 0ms',\n                                    },\n                                    '&:active': {\n                                        backgroundColor: 'action.selected',\n                                        transition: 'background-color 100ms cubic-bezier(0.4, 0, 0.2, 1) 0ms',\n                                    },\n                                }}\n                                onClick={(e) => redirectTo(e, `/sources/${id}/popular/?R&query=${query}`)}\n                            >\n                                <h1\n                                    key={lang}\n                                    style={{ margin: '25px 0px 0px 25px' }}\n                                >\n                                    {displayName}\n                                </h1>\n                                <p\n                                    style={{ margin: '0px 0px 25px 25px' }}\n                                >\n                                    {langCodeToName(lang)}\n                                </p>\n                            </Card>\n                            <MangaGrid\n                                mangas={mangas[id] || []}\n                                isLoading={!fetched[id]}\n                                hasNextPage={false}\n                                lastPageNum={lastPageNum}\n                                setLastPageNum={setLastPageNum}\n                                horisontal\n                                noFaces\n                                message={fetched[id] ? 'No manga was found!' : undefined}\n                            />\n                        </>\n                    )\n                ))}\n\n            </>\n        );\n    }\n    return (<></>);\n}\n","/*\n * Copyright (C) Contributors to the Suwayomi project\n *\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at https://mozilla.org/MPL/2.0/. */\n\nimport React from 'react';\nimport {\n    BrowserRouter as Router,\n    Switch,\n    Route,\n    Redirect,\n} from 'react-router-dom';\nimport { QueryParamProvider } from 'use-query-params';\nimport { Container } from '@mui/material';\nimport CssBaseline from '@mui/material/CssBaseline';\nimport {\n    createTheme,\n    ThemeProvider,\n    Theme,\n    StyledEngineProvider,\n} from '@mui/material/styles';\nimport { SWRConfig } from 'swr';\nimport { fetcher } from 'util/client';\nimport DefaultNavBar from 'components/navbar/DefaultNavBar';\nimport DarkTheme from 'components/context/DarkTheme';\nimport useLocalStorage from 'util/useLocalStorage';\nimport Settings from 'screens/Settings';\nimport About from 'screens/settings/About';\nimport Categories from 'screens/settings/Categories';\nimport Backup from 'screens/settings/Backup';\nimport Library from 'screens/Library';\nimport SourceConfigure from 'screens/SourceConfigure';\nimport Manga from 'screens/Manga';\nimport SourceMangas from 'screens/SourceMangas';\nimport Reader from 'screens/Reader';\nimport Updates from 'screens/Updates';\nimport DownloadQueue from 'screens/DownloadQueue';\nimport Browse from 'screens/Browse';\nimport Sources from 'screens/Sources';\nimport Extensions from 'screens/Extensions';\nimport NavBarContextProvider from 'components/navbar/NavBarContextProvider';\nimport LibraryOptionsContextProvider from 'components/library/LibraryOptionsProvider';\nimport SearchAll from 'screens/SearchAll';\n\ndeclare module '@mui/styles/defaultTheme' {\n    // eslint-disable-next-line @typescript-eslint/no-empty-interface\n    interface DefaultTheme extends Theme {}\n}\n\nexport default function App() {\n    const [darkTheme, setDarkTheme] = useLocalStorage<boolean>(\n        'darkTheme',\n        true,\n    );\n\n    const darkThemeContext = {\n        darkTheme,\n        setDarkTheme,\n    };\n\n    const theme = React.useMemo(\n        () => createTheme({\n            palette: {\n                mode: darkTheme ? 'dark' : 'light',\n            },\n            components: {\n                MuiCssBaseline: {\n                    styleOverrides: `\n                        *::-webkit-scrollbar {\n                            width: 10px;\n                            background: ${darkTheme ? '#222' : '#e1e1e1'};   \n                        }\n                        \n                        *::-webkit-scrollbar-thumb {\n                            background: ${darkTheme ? '#111' : '#aaa'};\n                            border-radius: 5px;\n                        }\n                    `,\n                },\n            },\n        }),\n        [darkTheme],\n    );\n\n    return (\n        <SWRConfig value={{ fetcher }}>\n            <Router>\n                <StyledEngineProvider injectFirst>\n                    <ThemeProvider theme={theme}>\n                        <QueryParamProvider ReactRouterRoute={Route}>\n                            <LibraryOptionsContextProvider>\n                                <NavBarContextProvider>\n                                    <CssBaseline />\n                                    <DefaultNavBar />\n                                    <Container\n                                        id=\"appMainContainer\"\n                                        maxWidth={false}\n                                        disableGutters\n                                        sx={{\n                                            mt: 8,\n                                            ml: { sm: 8 },\n                                            mb: { xs: 8, sm: 0 },\n                                            width: 'auto',\n                                            overflow: 'auto',\n                                        }}\n                                    >\n                                        <Switch>\n                                            {/* General Routes */}\n                                            <Route\n                                                exact\n                                                path=\"/\"\n                                                render={() => (\n                                                    <Redirect to=\"/library\" />\n                                                )}\n                                            />\n                                            <Route path=\"/settings/about\">\n                                                <About />\n                                            </Route>\n                                            <Route path=\"/settings/categories\">\n                                                <Categories />\n                                            </Route>\n                                            <Route path=\"/settings/backup\">\n                                                <Backup />\n                                            </Route>\n                                            <Route path=\"/settings\">\n                                                <DarkTheme.Provider\n                                                    value={darkThemeContext}\n                                                >\n                                                    <Settings />\n                                                </DarkTheme.Provider>\n                                            </Route>\n\n                                            {/* Manga Routes */}\n\n                                            <Route path=\"/sources/:sourceId/popular/\">\n                                                <SourceMangas popular />\n                                            </Route>\n                                            <Route path=\"/sources/:sourceId/latest/\">\n                                                <SourceMangas popular={false} />\n                                            </Route>\n                                            <Route path=\"/sources/:sourceId/configure/\">\n                                                <SourceConfigure />\n                                            </Route>\n                                            <Route path=\"/sources/all/search/\">\n                                                <SearchAll />\n                                            </Route>\n                                            <Route path=\"/downloads\">\n                                                <DownloadQueue />\n                                            </Route>\n                                            <Route path=\"/manga/:mangaId/chapter/:chapterNum\">\n                                                <></>\n                                            </Route>\n                                            <Route path=\"/manga/:id\">\n                                                <Manga />\n                                            </Route>\n                                            <Route path=\"/library\">\n                                                <Library />\n                                            </Route>\n                                            <Route path=\"/updates\">\n                                                <Updates />\n                                            </Route>\n                                            <Route path=\"/sources\">\n                                                <Sources />\n                                            </Route>\n                                            <Route path=\"/extensions\">\n                                                <Extensions />\n                                            </Route>\n                                            <Route path=\"/browse\">\n                                                <Browse />\n                                            </Route>\n                                        </Switch>\n                                    </Container>\n                                    <Switch>\n                                        <Route\n                                            path=\"/manga/:mangaId/chapter/:chapterIndex\"\n                                            // passing a key re-mounts the reader\n                                            // when changing chapters\n                                            render={(props: any) => (\n                                                <Reader\n                                                    key={\n                                                        props.match.params\n                                                            .chapterIndex\n                                                    }\n                                                />\n                                            )}\n                                        />\n                                    </Switch>\n                                </NavBarContextProvider>\n                            </LibraryOptionsContextProvider>\n                        </QueryParamProvider>\n                    </ThemeProvider>\n                </StyledEngineProvider>\n            </Router>\n        </SWRConfig>\n    );\n}\n","/*\n * Copyright (C) Contributors to the Suwayomi project\n *\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at https://mozilla.org/MPL/2.0/. */\n\nimport React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\nimport './index.css';\n// roboto font\nimport '@fontsource/roboto';\n\nReactDOM.render(\n    <React.StrictMode>\n        <App />\n    </React.StrictMode>,\n    document.getElementById('root'),\n);\n"],"sourceRoot":""}