(this.webpackJsonpproject=this.webpackJsonpproject||[]).push([[0],{233:function(e){e.exports=JSON.parse('{"screens":{"Library":{"Library":"Library","could-not-load-categories":"Could not load categories","your-library-is-empty":"Your Library is empty","category-is-empty":"Category is Empty","could-not-load-manga":"Could not load manga"}}}')},311:function(e,t,n){},313:function(e,t,n){"use strict";n.r(t);var a,r=n(1),c=n.n(r),i=n(31),o=n.n(i),s=n(443),l=n(399),u=n(3),d=n(376),j=n(444);!function(e){e[e.Compact=0]="Compact",e[e.Comfortable=1]="Comfortable",e[e.List=2]="List"}(a||(a={}));var b={showDownloadBadge:!1,showUnreadBadge:!1,gridLayout:a.Compact,SourcegridLayout:a.Compact,downloaded:void 0,sortDesc:void 0,sorts:void 0,unread:void 0},h=c.a.createContext({options:b,setOptions:function(){}}),f=h;function p(){return Object(r.useContext)(h)}var O={getItem:function(e,t){try{var n=window.localStorage.getItem(e);if(null!==n)return JSON.parse(n);window.localStorage.setItem(e,JSON.stringify(t))}finally{}return t},setItem:function(e,t){try{window.localStorage.setItem(e,JSON.stringify(t))}finally{}}};function x(e,t){var n=t instanceof Function?t():t,a=Object(r.useState)(O.getItem(e,n)),c=Object(u.a)(a,2),i=c[0],o=c[1];return[i,Object(r.useCallback)((function(t){o((function(n){var a=t instanceof Function?t(n):t;return O.setItem(e,a),a}))}),[e])]}var m=n(0),g=function(e){var t=e.children,n=x("libraryOptions",b),a=Object(u.a)(n,2),r=a[0],c=a[1];return Object(m.jsx)(f.Provider,{value:{options:r,setOptions:c},children:t})},v=c.a.createContext({defaultBackTo:void 0,setDefaultBackTo:function(){},title:"Tachidesk",setTitle:function(){},action:Object(m.jsx)("div",{}),setAction:function(){},override:{status:!1,value:Object(m.jsx)("div",{})},setOverride:function(){}}),y=v,w=function(){return Object(r.useContext)(v)};function C(e){var t=e.children,n=Object(r.useState)(),a=Object(u.a)(n,2),c=a[0],i=a[1],o=Object(r.useState)("Tachidesk"),s=Object(u.a)(o,2),l=s[0],d=s[1],j=Object(r.useState)(Object(m.jsx)("div",{})),b=Object(u.a)(j,2),h=b[0],f=b[1],p=Object(r.useState)({status:!1,value:Object(m.jsx)("div",{})}),O=Object(u.a)(p,2),x={defaultBackTo:c,setDefaultBackTo:i,title:l,setTitle:function(e){document.title="".concat(e," - Tachidesk"),d(e)},action:h,setAction:f,override:O[0],setOverride:O[1]};return Object(m.jsx)(y.Provider,{value:x,children:t})}var k,S=n(23),L=n(28),N=n(43),E=n(235),T=function(e){var t=Object(E.a)({palette:{mode:e?"dark":"light"}});return Object(E.a)({palette:{custom:{main:e?t.palette.common.black:t.palette.common.white,light:e?t.palette.grey[900]:t.palette.grey[100]}},components:{MuiCssBaseline:{styleOverrides:"\n                *::-webkit-scrollbar {\n                    width: 10px;\n                    background: ".concat(e?"#222":"#e1e1e1",";   \n                }\n                \n                *::-webkit-scrollbar-thumb {\n                    background: ").concat(e?"#111":"#aaa",";\n                    border-radius: 5px;\n                }\n            ")}}},t)},R=n(29),I=n(16),F=n.n(I),D=n(12),P=n(24),B=n(191),z=n.n(B),A=window.location,M=A.hostname,W=A.port,V=A.protocol;k="3000"===W?"4567":W;var H=O.getItem("serverBaseURL","".concat(V,"//").concat(M,":").concat(k)),U=z.a.create({baseURL:H});U.interceptors.request.use((function(e){return e.data instanceof FormData&&Object.assign(e.headers,{"Content-Type":"multipart/form-data"}),e}));var _=U;function J(e){return Y.apply(this,arguments)}function Y(){return(Y=Object(P.a)(F.a.mark((function e(t){var n;return F.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,U.get(t);case 2:if(200===(n=e.sent).status){e.next=5;break}throw new Error(n.statusText);case 5:if("application/json"===n.headers["content-type"]){e.next=7;break}throw new Error("Response is not json");case 7:return e.abrupt("return",n.data);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var X=function(e,t){var n=Object(N.b)(e,t);return Object(D.a)(Object(D.a)({},n),{},{loading:null==n.data&&null==n.error})},q=c.a.createContext({darkTheme:!0,setDarkTheme:function(){}}),K=function(e){var t=e.children,n=x("darkTheme",!0),a=Object(u.a)(n,2),c=a[0],i=a[1],o=Object(r.useMemo)((function(){return{darkTheme:c,setDarkTheme:i}}),[c]),s=Object(r.useMemo)((function(){return T(c)}),[c]);return Object(m.jsx)(N.a,{value:{fetcher:J},children:Object(m.jsx)(S.a,{children:Object(m.jsx)(d.a,{injectFirst:!0,children:Object(m.jsx)(j.a,{theme:s,children:Object(m.jsx)(q.Provider,{value:o,children:Object(m.jsx)(R.b,{ReactRouterRoute:L.b,children:Object(m.jsx)(g,{children:Object(m.jsx)(C,{children:t})})})})})})})})},G=n(417),Z=n(419),Q=n(110),$=n(420),ee=n(382),te=n(25),ne=n(196),ae=n.n(ne),re=n(197),ce=n.n(re),ie=n(198),oe=n.n(ie),se=n(199),le=n.n(se),ue=n(158),de=n.n(ue),je=n(159),be=n.n(je),he=n(200),fe=n.n(he),pe=n(201),Oe=n.n(pe),xe=n(202),me=n.n(xe),ge=n(103),ve=n.n(ge),ye=n(203),we=n.n(ye),Ce=n(22),ke=Object(Ce.a)(Object(m.jsx)("path",{d:"M 11 1 C 9.3550302 1 8 2.3550302 8 4 L 4 4 C 2.9069372 4 2 4.9069372 2 6 L 2 12 L 4 12 C 4.5650302 12 5 12.43497 5 13 C 5 13.56503 4.5650302 14 4 14 L 2 14 L 2 20 C 2 21.093063 2.9069372 22 4 22 L 10 22 L 10 20 C 10 19.43497 10.43497 19 11 19 C 11.56503 19 12 19.43497 12 20 L 12 22 L 18 22 C 19.093063 22 20 21.093063 20 20 L 20 16 C 21.64497 16 23 14.64497 23 13 C 23 11.35503 21.64497 10 20 10 L 20 6 C 20 4.9069372 19.093063 4 18 4 L 14 4 C 14 2.3550302 12.64497 1 11 1 z M 11 3 C 11.56503 3 12 3.4349698 12 4 L 12 6 L 18 6 L 18 12 L 20 12 C 20.56503 12 21 12.43497 21 13 C 21 13.56503 20.56503 14 20 14 L 18 14 L 18 20 L 14 20 C 14 18.35503 12.64497 17 11 17 C 9.3550302 17 8 18.35503 8 20 L 4 20 L 4 16 C 5.6449698 16 7 14.64497 7 13 C 7 11.35503 5.6449698 10 4 10 L 4 6 L 10 6 L 10 4 C 10 3.4349698 10.43497 3 11 3 z"}),"CustomExtensionOutlined"),Se=n(445),Le="__BACK__",Ne=function(){var e,t,n=Object(L.h)(),a=w().defaultBackTo,r=null!==(e=null===(t=n.state)||void 0===t?void 0:t.backLink)&&void 0!==e?e:a;return{url:r===Le?void 0:r,back:r===Le}},Ee=n(415),Te=n(379),Re=n(400),Ie=n(378),Fe=Object(Ie.a)("div")((function(e){var t=e.theme;return{height:"100vh",width:t.spacing(8),backgroundColor:t.palette.custom,position:"fixed",top:0,left:0,paddingTop:t.spacing(8),display:"flex",flexDirection:"column"}}));function De(e){var t=e.navBarItems,n=Object(L.h)(),a=Object(te.a)(),r=function(e,t,r){return n.pathname===e?Object(m.jsx)(r,{sx:{color:"primary.main"},fontSize:"large"}):Object(m.jsx)(t,{sx:{color:"dark"===a.palette.mode?"grey.A400":"grey.600"},fontSize:"large"})};return Object(m.jsx)(Fe,{children:t.map((function(e){var t=e.path,n=e.title,a=e.IconComponent,c=e.SelectedIconComponent;return Object(m.jsx)(S.b,{to:t,style:{color:"inherit",textDecoration:"none"},children:Object(m.jsx)(Ee.a,{disableRipple:!0,button:!0,children:Object(m.jsx)(Te.a,{sx:{minWidth:"0"},children:Object(m.jsx)(Re.a,{placement:"right",title:n,children:r(t,a,c)})})},n)},t)}))})}var Pe=Object(Ie.a)("div")((function(e){var t=e.theme;return{bottom:0,left:0,height:t.spacing(7),width:"100vw",backgroundColor:t.palette.custom.light,position:"fixed",display:"flex",flexDirection:"row",justifyContent:"space-evenly",alignItems:"center",zIndex:1100}})),Be=Object(Ie.a)(S.b)({textDecoration:"none",flex:1});function ze(e){var t=e.navBarItems,n=Object(L.h)(),a=Object(te.a)(),r=function(e,t,r){return n.pathname===e?Object(m.jsx)(r,{sx:{color:"primary.main"},fontSize:"medium"}):Object(m.jsx)(t,{sx:{color:"dark"===a.palette.mode?"grey.A400":"grey.600"},fontSize:"medium"})};return Object(m.jsx)(Pe,{children:t.map((function(e){var t=e.path,c=e.title,i=e.IconComponent,o=e.SelectedIconComponent;return Object(m.jsx)(Be,{to:t,children:Object(m.jsx)(Ee.a,{disableRipple:!0,button:!0,sx:{justifyContent:"center",padding:"8px"},children:Object(m.jsxs)(Se.a,{display:"flex",flexDirection:"column",alignItems:"center",children:[r(t,i,o),Object(m.jsx)(Se.a,{sx:{fontSize:"0.65rem",color:n.pathname===t?"primary.main":"dark"===a.palette.mode?"grey.A400":"grey.600"},children:c})]})},c)},t)}))})}var Ae=n(136),Me=[{path:"/library",title:Object(Ae.a)("DefaultNavBar.navbarItems.Library"),SelectedIconComponent:ae.a,IconComponent:ce.a,show:"both"},{path:"/updates",title:"Updates",SelectedIconComponent:oe.a,IconComponent:le.a,show:"both"},{path:"/extensions",title:"Extensions",SelectedIconComponent:fe.a,IconComponent:ke,show:"desktop"},{path:"/sources",title:"Sources",SelectedIconComponent:de.a,IconComponent:be.a,show:"desktop"},{path:"/browse",title:"Browse",SelectedIconComponent:de.a,IconComponent:be.a,show:"mobile"},{path:"/downloads",title:"Downloads",SelectedIconComponent:Oe.a,IconComponent:me.a,show:"both"},{path:"/settings",title:"Settings",SelectedIconComponent:ve.a,IconComponent:ve.a,show:"both"}];function We(){var e=Object(r.useContext)(y),t=e.title,n=e.action,a=e.override,c=Ne(),i=Object(te.a)(),o=Object(L.g)(),s=Object(ee.a)(i.breakpoints.down("sm")),l=Me.some((function(e){return e.path===o.location.pathname}));if(a.status)return a.value;var u=Object(m.jsx)(m.Fragment,{});s?l&&(u=Object(m.jsx)(ze,{navBarItems:Me.filter((function(e){return"desktop"!==e.show}))})):u=Object(m.jsx)(De,{navBarItems:Me.filter((function(e){return"mobile"!==e.show}))});return Object(m.jsxs)(Se.a,{sx:{flexGrow:1},children:[Object(m.jsx)(G.a,{position:"fixed",color:"default",children:Object(m.jsxs)(Z.a,{children:[!l&&Object(m.jsx)($.a,{component:c.url?S.b:"button",to:c.url,edge:"start",sx:{marginRight:i.spacing(2)},color:"inherit","aria-label":"menu",disableRipple:!0,size:"large",onClick:function(){null==c.url&&o.goBack()},children:Object(m.jsx)(we.a,{})}),Object(m.jsx)(Q.a,{variant:s?"h6":"h5",sx:{flexGrow:1},noWrap:!0,textOverflow:"ellipsis",children:t}),n,Object(m.jsx)("div",{id:"navbarToolbar"})]})}),u]})}var Ve=function(e){var t=e.children,n=document.getElementById("navbarToolbar");return n?Object(i.createPortal)(t,n):null},He=n(402),Ue=n(432);function _e(e){var t=e.children,n=e.index,a=e.currentIndex;return Object(m.jsx)("div",{role:"tabpanel",hidden:n!==a,id:"simple-tabpanel-".concat(n),children:a===n&&t})}var Je=n(15),Ye=n(426),Xe=n(385),qe=n(422),Ke=n(425),Ge=n(421),Ze=n(424),Qe=n(69),$e=n.n(Qe),et=n(423),tt=n(386),nt=n(416),at=[{code:"all",name:"All",nativeName:"All"},{code:"installed",name:"Installed",nativeName:"Installed"},{code:"updates pending",name:"Updates pending",nativeName:"Updates pending"},{code:"other",name:"other langs?",nativeName:"Other"},{code:"localsourcelang",name:"Local source",nativeName:"Local source"},{code:"en",name:"English",nativeName:"English"},{code:"ca",name:"Catalan; Valencian",nativeName:"Catal\xe0"},{code:"de",name:"German",nativeName:"Deutsch"},{code:"es",name:"Spanish; Castilian",nativeName:"Espa\xf1ol"},{code:"es-419",name:"Spanish; Castilian",nativeName:"Espa\xf1ol (Latinoam\xe9rica)"},{code:"fr",name:"French",nativeName:"Fran\xe7ais"},{code:"id",name:"Indonesian",nativeName:"Indonesia"},{code:"it",name:"Italian",nativeName:"Italiano"},{code:"pt",name:"Portuguese",nativeName:"Portugu\xeas"},{code:"pt-pt",name:"Portuguese",nativeName:"Portugu\xeas (Portugal)"},{code:"pt-br",name:"Portuguese; Brasil",nativeName:"Portugu\xeas (Brasil)"},{code:"vi",name:"Vietnamese",nativeName:"Ti\u1ebfng Vi\u1ec7t"},{code:"tr",name:"Turkish",nativeName:"T\xfcrk\xe7e"},{code:"ru",name:"Russian",nativeName:"\u0440\u0443\u0441\u0441\u043a\u0438\u0439"},{code:"ar",name:"Arabic",nativeName:"\u0627\u0644\u0639\u0631\u0628\u064a\u0629"},{code:"hi",name:"Hindi",nativeName:"\u0939\u093f\u0928\u094d\u0926\u0940"},{code:"th",name:"Thai",nativeName:"\u0e44\u0e17\u0e22"},{code:"zh",name:"Chinese",nativeName:"\u4e2d\u6587"},{code:"zh-hans",name:"Chinese",nativeName:"\u4e2d\u6587 (HANS)"},{code:"zh-hant",name:"Chinese",nativeName:"\u4e2d\u6587 (HANT)"},{code:"zh-rhk",name:"Chinese",nativeName:"\u4e2d\u6587 (RHK)"},{code:"zh-rtw",name:"Chinese",nativeName:"\u4e2d\u6587 (RTW)"},{code:"ja",name:"Japanese",nativeName:"\u65e5\u672c\u8a9e"},{code:"ko",name:"Korean",nativeName:"\ud55c\uad6d\uc5b4"},{code:"zu",name:"Zulu",nativeName:"isiZulu"},{code:"xh",name:"Xhosa",nativeName:"isiXhosa"},{code:"uk",name:"Ukrainian",nativeName:"\u0423\u043a\u0440\u0430\u0457\u043d\u0441\u044c\u043a\u0430"},{code:"ro",name:"Romanian",nativeName:"Rom\xe2n\u0103"},{code:"bg",name:"Bulgarian",nativeName:"\u0431\u044a\u043b\u0433\u0430\u0440\u0441\u043a\u0438"},{code:"cs",name:"Czech",nativeName:"\u010de\u0161tina"},{code:"pl",name:"Polish",nativeName:"polski"},{code:"no",name:"Norwegian",nativeName:"Norsk"},{code:"nl",name:"Dutch",nativeName:"Nederlands"},{code:"my",name:"Burmese",nativeName:"\u1017\u1019\u102c\u1005\u102c"},{code:"ms",name:"Malay",nativeName:"Malaysia"},{code:"mn",name:"Mongolian",nativeName:"\u041c\u043e\u043d\u0433\u043e\u043b"},{code:"ml",name:"Malayalam",nativeName:"\u0d2e\u0d32\u0d2f\u0d3e\u0d33\u0d02"},{code:"ku",name:"Kurdish",nativeName:"Kurd\xee"},{code:"hu",name:"Hungarian",nativeName:"Magyar"},{code:"hr",name:"Croatian",nativeName:"Hrvatski"},{code:"he",name:"Hebrew",nativeName:"\u05e2\u05d1\u05e8\u05d9\u05ea"},{code:"fil",name:"Filipino",nativeName:"Filipino"},{code:"fi",name:"Finnish",nativeName:"suomi"},{code:"fa",name:"Persian",nativeName:"\u0641\u0627\u0631\u0633\u06cc"},{code:"eu",name:"Basque",nativeName:"euskara"},{code:"el",name:"Greek",nativeName:"\u0395\u03bb\u03bb\u03b7\u03bd\u03b9\u03ba\u03ac"},{code:"da",name:"Danish",nativeName:"dansk"},{code:"bn",name:"Bengali",nativeName:"\u09ac\u09be\u0982\u09b2\u09be"},{code:"lt",name:"Lithuanian",nativeName:"lietuvi\u0173 kalba"},{code:"sh",name:"Serbo-Croatian",nativeName:"srpskohrvatski"},{code:"af",name:"Afrikaans",nativeName:"Afrikaans"},{code:"am",name:"Amharic",nativeName:"\u12a0\u121b\u122d\u129b"},{code:"az",name:"Azerbaijani",nativeName:"Az\u0259rbaycan"},{code:"be",name:"Belarusian",nativeName:"\u0431\u0435\u043b\u0430\u0440\u0443\u0441\u043a\u0430\u044f"},{code:"bs",name:"Bosnian",nativeName:"bosanski"},{code:"sv",name:"Swedish",nativeName:"svenska"},{code:"sv",name:"Swedish",nativeName:"svenska"}];function rt(e){for(var t=-1!==e.indexOf("-")?e.indexOf("-"):e.length,n=e.toLocaleLowerCase().substring(0,t),a="language with code: ".concat(e),r=0;r<at.length;r++)at[r].code!==n&&at[r].code!==e.toLocaleLowerCase()||(a=at[r].nativeName);return a}var ct=function(e,t){var n=rt(e),a=rt(t);return"en"===e?-1:"en"===t||"localSourceLang"===e?1:"localSourceLang"===t?-1:n>a?1:-1};function it(e){return JSON.parse(JSON.stringify(e))}function ot(e){var t,n=e.shownLangs,a=e.setShownLangs,c=e.allLangs,i=e.forcedLangs,o=Object(r.useState)((t=it(n),i.forEach((function(e){var n=t.indexOf(e);-1!==n&&t.splice(n,1)})),t)),s=Object(u.a)(o,2),l=s[0],d=s[1],j=Object(r.useState)(!1),b=Object(u.a)(j,2),h=b[0],f=b[1];return Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)($.a,{onClick:function(){return f(!0)},"aria-label":"display more actions",edge:"end",color:"inherit",size:"large",children:Object(m.jsx)($e.a,{})}),Object(m.jsxs)(Ge.a,{sx:{".MuiDialog-paper":{maxHeight:435,width:"80%"}},maxWidth:"xs",open:h,children:[Object(m.jsx)(Xe.a,{children:"Enabled Languages"}),Object(m.jsx)(qe.a,{dividers:!0,sx:{padding:0},children:Object(m.jsx)(et.a,{children:c.map((function(e){return Object(m.jsxs)(Ee.a,{children:[Object(m.jsx)(tt.a,{primary:rt(e)}),Object(m.jsx)(nt.a,{children:Object(m.jsx)(Ze.a,{checked:-1!==l.indexOf(e),onChange:function(t){return function(e,t){if(e.target.checked)d([].concat(Object(Je.a)(l),[t]));else{var n=it(l);n.splice(n.indexOf(t),1),d(n)}}(t,e)}})})]},e)}))})}),Object(m.jsxs)(Ke.a,{children:[Object(m.jsx)(Ye.a,{autoFocus:!0,onClick:function(){f(!1)},color:"primary",children:"Cancel"}),Object(m.jsx)(Ye.a,{onClick:function(){f(!1),a(l)},color:"primary",children:"Ok"})]})]})]})}ot.defaultProps={forcedLangs:[]};var st=n(4),lt=n(428),ut=n(412),dt=n(427),jt=n(429),bt=Object(Ie.a)("div")((function(e){var t=e.theme;return Object(st.a)({display:"flex"},t.breakpoints.up("sm"),{display:"none"})})),ht=Object(Ie.a)("div")((function(e){var t,n=e.theme;return t={display:"flex"},Object(st.a)(t,n.breakpoints.down("sm"),{display:"none"}),Object(st.a)(t,"& .MuiButton-root",{marginLeft:"20px"}),t})),ft=function(e){var t=e.source,n=t.id,a=t.name,r=t.lang,c=t.iconUrl,i=t.supportsLatest,o=t.isNsfw,s=Object(L.g)(),l=x("serverBaseURL",""),d=Object(u.a)(l,1)[0],j=x("useCache",!0),b=Object(u.a)(j,1)[0];return Object(m.jsx)(dt.a,{sx:{margin:"10px"},children:Object(m.jsx)(lt.a,{component:S.b,to:"/sources/".concat(n,"/popular/"),children:Object(m.jsxs)(jt.a,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:2},children:[Object(m.jsxs)(Se.a,{sx:{display:"flex"},children:[Object(m.jsx)(ut.a,{variant:"rounded",alt:a,sx:{width:56,height:56,flex:"0 0 auto",mr:2},src:"".concat(d).concat(c,"?useCache=").concat(b)}),Object(m.jsxs)(Se.a,{sx:{display:"flex",flexDirection:"column",justifyContent:"center"},children:[Object(m.jsx)(Q.a,{variant:"h5",component:"h2",children:a}),"0"!==n&&Object(m.jsxs)(Q.a,{variant:"caption",display:"block",gutterBottom:!0,children:[rt(r),o&&Object(m.jsx)(Q.a,{variant:"caption",display:"inline",gutterBottom:!0,color:"red",children:" 18+"})]})]})]}),Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)(bt,{children:i&&Object(m.jsx)(Ye.a,{variant:"outlined",onClick:function(e){return function(e,t){s.push(t),e.stopPropagation()}(e,"/sources/".concat(n,"/latest/"))},children:"Latest"})}),Object(m.jsxs)(ht,{children:[i&&Object(m.jsx)(Ye.a,{component:S.b,to:"/sources/".concat(n,"/latest/"),variant:"outlined",children:"Latest"}),Object(m.jsx)(Ye.a,{component:S.b,to:"/sources/".concat(n,"/popular/"),variant:"outlined",children:"Browse"})]})]})]})})})},pt=n(430);function Ot(e){var t=e.children,n=e.shouldRender,a=e.component,r=e.componentProps,i=!0;if(void 0!==n&&(i=n instanceof Function?n():n),i){if(a)return c.a.createElement(a,r);if(t)return Object(m.jsx)(m.Fragment,{children:t})}return Object(m.jsx)(Se.a,{sx:{margin:"10px auto",display:"flex",justifyContent:"center"},children:Object(m.jsx)(pt.a,{thickness:5})})}var xt=n(204),mt=n.n(xt);function gt(e){var t=[];return e.forEach((function(e){-1===t.indexOf(e.lang)&&t.push(e.lang)})),t.sort(ct),t}function vt(e){var t={};return e.forEach((function(e){void 0===t[e.lang]&&(t[e.lang]=[]),t[e.lang].push(e)})),t}function yt(){var e=Object(r.useContext)(y),t=e.setTitle,n=e.setAction,a=x("shownSourceLangs",["en","localsourcelang"]),i=Object(u.a)(a,2),o=i[0],s=i[1],l=x("showNsfw",!0),d=Object(u.a)(l,1)[0],j=X("/api/v1/source/list"),b=j.data,h=j.loading,f=Object(L.g)();return Object(r.useEffect)((function(){["localsourcelang"].forEach((function(e){var t=!1;o.forEach((function(n){n===e&&(t=!0)})),t||s((function(t){return t.push(e),t}))}))}),[]),Object(r.useEffect)((function(){t("Sources"),n(Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)($.a,{onClick:function(){return f.push("/sources/all/search/")},size:"large",children:Object(m.jsx)(mt.a,{})}),Object(m.jsx)(ot,{shownLangs:o,setShownLangs:s,allLangs:gt(null!==b&&void 0!==b?b:[]),forcedLangs:["localsourcelang"]})]}))}),[o,b]),h?Object(m.jsx)(Ot,{}):0===(null===b||void 0===b?void 0:b.length)?Object(m.jsx)("h3",{children:"No sources found. Install Some Extensions first."}):Object(m.jsx)(m.Fragment,{children:Object.entries(vt(null!==b&&void 0!==b?b:[])).sort((function(e,t){return ct(e[0],t[0])})).map((function(e){var t=Object(u.a)(e,2),n=t[0],a=t[1];return-1!==o.indexOf(n)&&Object(m.jsxs)(c.a.Fragment,{children:[Object(m.jsx)("h1",{style:{marginLeft:25},children:rt(n)},n),a.filter((function(e){return d||!e.isNsfw})).map((function(e){return Object(m.jsx)(ft,{source:e},e.id)}))]},n)}))})}var wt=n(105),Ct=n(125),kt=n.n(Ct);function St(e){var t=e.extension,n=t.name,a=t.lang,c=t.versionName,i=t.installed,o=t.hasUpdate,s=t.obsolete,l=t.pkgName,d=t.iconUrl,j=t.isNsfw,b=e.notifyInstall,h=Object(r.useState)((function(){return s?"obsolete":o?"update":i?"uninstall":"install"})),f=Object(u.a)(h,2),p=f[0],O=f[1],g=x("serverBaseURL",""),v=Object(u.a)(g,1)[0],y=x("useCache",!0),w=Object(u.a)(y,1)[0],C="all"===a?"All":a.toUpperCase();function k(){O("uninstalling"),_.get("/api/v1/extension/uninstall/".concat(l)).then((function(){b()}))}function S(){switch(p){case"install":O("installing"),_.get("/api/v1/extension/install/".concat(l)).then((function(){O("uninstall"),b()}));break;case"update":O("updating"),_.get("/api/v1/extension/update/".concat(l)).then((function(){O("uninstall"),b()}));break;case"obsolete":k(),setTimeout((function(){return window.location.reload()}),3e3);break;case"uninstall":k()}}return Object(m.jsx)(dt.a,{sx:{margin:"10px"},children:Object(m.jsxs)(jt.a,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",p:2},children:[Object(m.jsxs)(Se.a,{sx:{display:"flex"},children:[Object(m.jsx)(ut.a,{variant:"rounded",sx:{width:56,height:56,flex:"0 0 auto",mr:2},alt:n,src:"".concat(v).concat(d,"?useCache=").concat(w)}),Object(m.jsxs)(Se.a,{sx:{display:"flex",flexDirection:"column"},children:[Object(m.jsx)(Q.a,{variant:"h5",component:"h2",children:n}),Object(m.jsxs)(Q.a,{variant:"caption",display:"block",gutterBottom:!0,children:[C," ",c,j&&Object(m.jsx)(Q.a,{variant:"caption",display:"inline",gutterBottom:!0,color:"red",children:" 18+"})]})]})]}),Object(m.jsx)(Ye.a,{variant:"outlined",sx:{color:"obsolete"===p?"red":"inherit"},onClick:function(){return S()},children:p})]})})}var Lt=n(387),Nt=n(407),Et=n(403);function Tt(e){return Object(m.jsx)(Lt.a,Object(D.a)(Object(D.a)({},e),{},{direction:"up"}))}function Rt(e){var t=e.message,n=e.severity,a=c.a.useState(!0),r=Object(u.a)(a,2),i=r[0],o=r[1],s=function(){o(!1)};return Object(m.jsx)(Nt.a,{open:i,onClose:s,autoHideDuration:3e3,TransitionComponent:Tt,message:"I love snacks",children:Object(m.jsx)(Et.a,{elevation:6,variant:"filled",onClose:s,severity:n,children:t})})}function It(e,t){var n=Math.floor(1e3*Math.random()),a=document.createElement("div");a.id="alert-".concat(n),document.body.appendChild(a),o.a.render(Object(m.jsx)(Rt,{message:e,severity:t}),a),setTimeout((function(){return function(e){var t=document.querySelector("#".concat(e));o.a.unmountComponentAtNode(t),document.body.removeChild(t)}(a.id)}),3500)}var Ft=n(124),Dt=n.n(Ft),Pt=n(431),Bt=n(205),zt=n.n(Bt),At=function(e){var t=e.autoOpen,n=Object(R.d)("query",R.c),a=Object(u.a)(n,2),i=a[0],o=a[1],s=Object(r.useState)(!!i),l=Object(u.a)(s,2),d=l[0],j=l[1],b=c.a.useRef();var h=function(){j(!0),setTimeout((function(){b&&b.current&&b.current.focus()}))},f=function(e){("F3"===e.code||e.ctrlKey&&"KeyF"===e.code)&&(e.preventDefault(),h())};return Object(r.useEffect)((function(){t&&h()}),[]),Object(r.useEffect)((function(){return window.addEventListener("keydown",f),function(){window.removeEventListener("keydown",f)}}),[f]),Object(m.jsx)(m.Fragment,{children:d?Object(m.jsx)(Pt.a,{value:i||"",onChange:function(e){o(""===e.target.value?void 0:e.target.value)},onBlur:function(){i||j(!1)},inputRef:b,endAdornment:Object(m.jsx)($.a,{onClick:function(){o(null),j(!1)},children:Object(m.jsx)(zt.a,{})})}):Object(m.jsx)($.a,{onClick:h,children:Object(m.jsx)(Dt.a,{})})})};At.defaultProps={autoOpen:!1};var Mt=At,Wt=n(138),Vt=[];function Ht(){var e=Object(r.useRef)(null),t=Object(r.useContext)(y),n=t.setTitle,a=t.setAction,c=x("shownExtensionLangs",["en","all"]),i=Object(u.a)(c,2),o=i[0],s=i[1],l=x("showNsfw",!0),d=Object(u.a)(l,1)[0],j=Object(te.a)(),b=Object(ee.a)(j.breakpoints.down("sm")),h=Object(R.d)("query",R.c),f=Object(u.a)(h,1)[0];Object(r.useEffect)((function(){n("Extensions"),a(Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)(Mt,{}),Object(m.jsx)($.a,{onClick:function(){var t;return null===(t=e.current)||void 0===t?void 0:t.click()},size:"large",children:Object(m.jsx)(kt.a,{})}),Object(m.jsx)(ot,{shownLangs:o,setShownLangs:s,allLangs:Vt})]}))}),[o]);var p=X("/api/v1/extension/list"),O=p.data,g=p.mutate,v=p.loading,w=Object(r.useMemo)((function(){return(null!==O&&void 0!==O?O:[]).filter((function(e){var t=d||!e.isNsfw;return f?t&&e.name.toLowerCase().includes(f.toLowerCase()):t}))}),[O,d,f]),C=Object(r.useMemo)((function(){return function(e){Vt.length=0;var t={installed:[],"updates pending":[],all:[]};e.forEach((function(e){void 0===t[e.lang]&&(t[e.lang]=[],"all"!==e.lang&&Vt.push(e.lang)),e.installed?e.hasUpdate?t["updates pending"].push(e):t.installed.push(e):t[e.lang].push(e)})),Vt.sort(ct);var n=[["updates pending",t["updates pending"]],["installed",t.installed],["all",t.all]],a=Vt.map((function(e){return[e,t[e]]}));return n.concat(a)}(w).filter((function(e){return e[1].length>0})).filter((function(e){return["installed","updates pending","all"].concat(Object(Je.a)(o)).includes(e[0])}))}),[o,w]).flat(2),k=function(e){var t=Object(u.a)(e,2),n=t[0],a=t[1];return[n,function(e,t){a([Object(m.jsx)(Rt,{message:e,severity:t},Math.floor(1e3*Math.random())+1)])}]}(Object(r.useState)([])),S=Object(u.a)(k,2),L=S[0],N=S[1],E=function(t){if(t.name.toLowerCase().endsWith("apk")){var n=new FormData;n.append("file",t),e.current&&(e.current.value=""),N("Installing Extension File....","info"),_.post("/api/v1/extension/install",n,{headers:{"Content-Type":"multipart/form-data"}}).then((function(){N("Installed extension successfully!","success"),g()})).catch((function(){return N("Extension installion failed!","error")}))}else N("invalid file type!","error")};return Object(r.useEffect)((function(){var e=function(){var e=Object(P.a)(F.a.mark((function e(t){var n;return F.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.next=3,Object(wt.a)(t);case 3:n=e.sent,E(n[0]);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),t=function(e){e.preventDefault()};return document.addEventListener("drop",e),document.addEventListener("dragover",t),function(){document.removeEventListener("drop",e),document.removeEventListener("dragover",t)}}),[]),v?Object(m.jsx)(Ot,{}):Object(m.jsxs)(m.Fragment,{children:[L,Object(m.jsx)("input",{type:"file",style:{display:"none"},ref:e,onChange:function(e){var t,n=null===(t=e.target.files)||void 0===t?void 0:t[0];n&&E(n)}}),Object(m.jsx)(Wt.a,{style:{height:b?"calc(100vh - 64px - 64px)":"calc(100vh - 64px)"},totalCount:C.length,itemContent:function(e){if("string"===typeof C[e]){var t=C[e];return Object(m.jsx)(Q.a,{variant:"h2",style:{paddingLeft:25,paddingBottom:"0.83em",paddingTop:"0.83em",fontSize:"2em",fontWeight:"bold"},children:rt(t)},t)}var n=C[e];return Object(m.jsx)(St,{extension:n,notifyInstall:function(){g()}},n.apkName)}})]})}function Ut(){var e=Object(r.useState)(0),t=Object(u.a)(e,2),n=t[0],a=t[1];return Object(m.jsxs)(m.Fragment,{children:[Object(m.jsxs)(He.a,{value:n,onChange:function(e,t){return a(t)},indicatorColor:"primary",textColor:"primary",centered:!0,variant:"fullWidth",scrollButtons:!0,allowScrollButtonsMobile:!0,children:[Object(m.jsx)(Ue.a,{sx:{textTransform:"none"},label:"Sources"}),Object(m.jsx)(Ue.a,{sx:{textTransform:"none"},label:"Extensions"})]}),Object(m.jsx)(_e,{index:0,currentIndex:n,children:Object(m.jsx)(yt,{})}),Object(m.jsx)(_e,{index:1,currentIndex:n,children:Object(m.jsx)(Ht,{})})]})}var _t=n(71),Jt=n.n(_t),Yt=n(126),Xt=n.n(Yt),qt=n(208),Kt=n.n(qt),Gt=n(207),Zt=n.n(Gt),Qt=n(388),$t=["(\uff65o\uff65;)","\u03a3(\u0ca0_\u0ca0)","\u0ca5_\u0ca5","(\u02d8\uff65_\uff65\u02d8)","(\uff1b\uffe3\u0414\uffe3)","(\uff65\u0414\uff65\u3002"];function en(e){var t=e.message,n=e.messageExtra,a=Object(te.a)(),c=Object(ee.a)(a.breakpoints.down("sm")),i=Object(r.useMemo)((function(){return function(){var e=Math.floor(Math.random()*$t.length);return $t[e]}()}),[]);return Object(m.jsxs)(Se.a,{sx:{position:"absolute",left:"calc(50% + ".concat(c?"0px":a.spacing(4),")"),top:"50%",transform:"translate(-50%, -50%)",textAlign:"center"},children:[Object(m.jsx)(Q.a,{variant:"h3",gutterBottom:!0,children:i}),Object(m.jsx)(Q.a,{variant:"h5",children:t}),n]})}en.defaultProps={messageExtra:void 0};var tn=n(74),nn=JSON.parse(window.localStorage.getItem("serverBaseURL")).replace("http","ws"),an=function(e,t){var n=Object(r.useState)(),a=Object(u.a)(n,2),c=a[0],i=a[1];return Object(r.useEffect)((function(){var n=new WebSocket("".concat(nn).concat(e));return n.onmessage=function(e){var n=JSON.parse(e.data);t?!0===t(n)&&i(n):i(n)},function(){return n.close()}}),[e]),{data:c}},rn=function(e){var t=e.download;return Object(m.jsxs)(Se.a,{sx:{position:"relative",display:"inline-flex",width:"50px",justifyContent:"center"},children:[0!==t.progress&&Object(m.jsx)(pt.a,{variant:"determinate",value:100*t.progress}),Object(m.jsx)(Se.a,{sx:{top:0,left:0,bottom:0,right:0,position:"absolute",display:"flex",alignItems:"center",justifyContent:"center"},children:Object(m.jsxs)(Q.a,{variant:"caption",component:"div",color:"text.secondary",children:[0!==t.progress&&"".concat(Math.round(100*t.progress),"%"),0===t.progress&&t.state]})})]})},cn={status:"Stopped",queue:[]},on=function(){var e=an("/api/v1/downloads").data,t=null!==e&&void 0!==e?e:cn,n=t.queue,a=t.status,c=Object(r.useContext)(y),i=c.setTitle,o=c.setAction;Object(r.useEffect)((function(){i("Download Queue"),o(null)}),[]);if(0===n.length)return Object(m.jsx)(en,{message:"No downloads"});return Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)(Ve,{children:Object(m.jsx)($.a,{onClick:function(){"Stopped"===a?_.get("/api/v1/downloads/start"):_.get("/api/v1/downloads/stop")},size:"large",children:"Stopped"===a?Object(m.jsx)(Zt.a,{}):Object(m.jsx)(Kt.a,{})})}),Object(m.jsx)(tn.a,{onDragEnd:function(e){},children:Object(m.jsx)(tn.c,{droppableId:"droppable",children:function(e){return Object(m.jsxs)(Se.a,{ref:e.innerRef,sx:{pt:1},children:[n.map((function(e,t){return Object(m.jsx)(tn.b,{draggableId:"".concat(e.mangaId,"-").concat(e.chapterIndex),index:t,children:function(t,n){return Object(m.jsx)(Se.a,Object(D.a)(Object(D.a)(Object(D.a)({},t.draggableProps),t.dragHandleProps),{},{ref:t.innerRef,sx:{p:1,pb:2},children:Object(m.jsx)(dt.a,{sx:{backgroundColor:n.isDragging?"custom.light":void 0},children:Object(m.jsxs)(lt.a,{component:S.b,to:{pathname:"/manga/".concat(e.chapter.mangaId),state:{backLink:Le}},sx:{display:"flex",alignItems:"center",p:1},children:[Object(m.jsx)($.a,{sx:{pointerEvents:"none"},children:Object(m.jsx)(Xt.a,{})}),Object(m.jsxs)(Qt.a,{sx:{flex:1,ml:1},direction:"column",children:[Object(m.jsx)(Q.a,{variant:"h6",children:e.manga.title}),Object(m.jsx)(Q.a,{variant:"caption",display:"block",gutterBottom:!0,children:e.chapter.name})]}),Object(m.jsx)(rn,{download:e}),Object(m.jsx)($.a,{onClick:function(t){var n;t.preventDefault(),t.stopPropagation(),n=e.chapter,_.get("/api/v1/downloads/stop").then((function(){return Promise.all([_.delete("/api/v1/download/".concat(n.mangaId,"/chapter/").concat(n.index)),_.delete("/api/v1/manga/".concat(n.mangaId,"/chapter/").concat(n.index))])}))},size:"large",children:Object(m.jsx)(Jt.a,{})})]})})}))}},"".concat(e.mangaId,"-").concat(e.chapterIndex))})),e.placeholder]})}})})]})},sn=n(390),ln=n(391),un=n(54),dn=n(433),jn=n(408),bn=["label","sx"],hn=function(e){var t=e.label,n=e.sx,a=Object(un.a)(e,bn);return Object(m.jsx)(dn.a,{control:Object(m.jsx)(jn.a,Object(D.a)({},a)),label:t,sx:n})},fn=n(404),pn=["label","sx"],On=function(e){var t=e.label,n=e.sx,a=Object(un.a)(e,pn);return Object(m.jsx)(dn.a,{control:Object(m.jsx)(fn.a,Object(D.a)({},a)),label:t,sx:n})},xn=n(210),mn=n.n(xn),gn=n(211),vn=n.n(gn),yn=["sortDescending"],wn=function(e){var t=e.sortDescending,n=Object(un.a)(e,yn);return Object(m.jsx)(On,Object(D.a)({checkedIcon:t?Object(m.jsx)(mn.a,{color:"primary"}):Object(m.jsx)(vn.a,{color:"primary"})},n))},Cn=n(389),kn=["checked","onChange"];var Sn=function(e){var t=e.checked,n=e.onChange,a=Object(un.a)(e,kn),c=Object(r.useCallback)((function(){if(n){var e=!0!==(a=t)&&(!1!==a||void 0);n(e)}var a}),[n]);return Object(m.jsx)(jn.a,Object(D.a)({indeterminateIcon:Object(m.jsx)(Cn.a,{}),checked:!0===t,indeterminate:!1===t,onChange:c},a))},Ln=["label","sx"],Nn=function(e){var t=e.label,n=e.sx,a=Object(un.a)(e,Ln);return Object(m.jsx)(dn.a,{control:Object(m.jsx)(Sn,Object(D.a)({},a)),label:t,sx:n})},En=n(434),Tn=function(e){var t=e.open,n=e.onClose,a=e.children,r=e.minHeight;return Object(m.jsx)(En.a,{anchor:"bottom",open:t,onClose:n,PaperProps:{style:{maxWidth:600,marginLeft:"auto",marginRight:"auto",minHeight:r}},children:Object(m.jsx)(Se.a,{children:a})})};Tn.defaultProps={minHeight:void 0};var Rn=Tn,In=function(e){var t=e.open,n=e.onClose,a=e.tabs,c=e.tabTitle,i=e.tabContent,o=e.minHeight,s=Object(r.useState)(0),l=Object(u.a)(s,2),d=l[0],j=l[1];return Object(m.jsxs)(Rn,{open:t,onClose:n,minHeight:o,children:[Object(m.jsx)(He.a,{value:d,variant:"fullWidth",onChange:function(e,t){return j(t)},indicatorColor:"primary",textColor:"primary",children:a.map((function(e,t){return Object(m.jsx)(Ue.a,{value:t,label:c(e)},e)}))}),a.map((function(e,t){return Object(m.jsx)(_e,{index:t,currentIndex:d,children:Object(m.jsx)(Qt.a,{sx:{px:3,py:1,minHeight:o},children:i(e)})},e)}))]})};In.defaultProps={minHeight:void 0};var Fn=In,Dn={filter:"Filter",sort:"Sort",display:"Display"},Pn=[["sortToRead","By Unread chapters"],["sortAlph","Alphabetically"],["sortID","By ID"]],Bn=function(e){var t=e.open,n=e.onClose,r=p(),c=r.options,i=r.setOptions,o=function(e,t){i((function(n){return Object(D.a)(Object(D.a)({},n),{},Object(st.a)({},e,t))}))};return Object(m.jsx)(Fn,{open:t,onClose:n,tabs:["filter","sort","display"],tabTitle:function(e){return Dn[e]},tabContent:function(e){if("filter"===e)return Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)(Nn,{label:"Unread",checked:c.unread,onChange:function(e){return o("unread",e)}}),Object(m.jsx)(Nn,{label:"Downloaded",checked:c.downloaded,onChange:function(e){return o("downloaded",e)}})]});if("sort"===e)return Pn.map((function(e){var t=Object(u.a)(e,2),n=t[0],a=t[1];return Object(m.jsx)(wn,{label:a,checked:c.sorts===n,sortDescending:c.sortDesc,onClick:function(){return n!==c.sorts?o("sorts",n):o("sortDesc",!c.sortDesc)}},n)}));if("display"===e){var t=c.gridLayout,n=c.showDownloadBadge,r=c.showUnreadBadge;return Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)(sn.a,{children:"Display mode"}),Object(m.jsxs)(ln.a,{onChange:function(e){return o("gridLayout",Number(e.target.value))},value:t,children:[Object(m.jsx)(On,{label:"Compact grid",value:a.Compact,checked:null==t||t===a.Compact}),Object(m.jsx)(On,{label:"Comfortable grid",value:a.Comfortable,checked:t===a.Comfortable}),Object(m.jsx)(On,{label:"List",value:a.List,checked:t===a.List})]}),Object(m.jsx)(sn.a,{sx:{mt:2},children:"Badges"}),Object(m.jsx)(hn,{label:"Unread Badges",checked:!0===r,onChange:function(){return o("showUnreadBadge",!r)}}),Object(m.jsx)(hn,{label:"Download Badges",checked:!0===n,onChange:function(){return o("showDownloadBadge",!n)}})]})}return null}})},zn=function(){var e=Object(r.useState)(!1),t=Object(u.a)(e,2),n=t[0],a=t[1],c=p().options,i=null!=c.downloaded||null!=c.unread;return Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)($.a,{onClick:function(){return a(!n)},color:i?"warning":"default",children:Object(m.jsx)($e.a,{})}),Object(m.jsx)(Bn,{open:n,onClose:function(){return a(!1)}})]})},An=n(413);function Mn(e){var t=e.src,n=e.alt,a=e.onImageLoad,c=e.imgRef,i=e.spinnerStyle,o=e.imgStyle,s=Object(r.useState)(""),l=Object(u.a)(s,2),d=l[0],j=l[1];return Object(r.useEffect)((function(){var e=new Image;return e.src=t,e.onload=function(){j(t),null===a||void 0===a||a()},e.onerror=function(){j("/notFound.svg")},function(){e.onload=null,e.onerror=null}}),[t]),0===d.length?Object(m.jsx)(Se.a,{sx:i,children:Object(m.jsx)(pt.a,{thickness:5})}):"Not Found"===d?Object(m.jsx)(Se.a,{sx:i}):Object(m.jsx)("img",{style:o,ref:c,src:d,alt:n})}Mn.defaultProps={spinnerStyle:{},imgStyle:{},onImageLoad:function(){},imgRef:void 0};var Wn=Object(Ie.a)("div")({position:"absolute",bottom:0,width:"100%",height:"30%",background:"linear-gradient(180deg, rgba(0,0,0,0) 0%, rgba(0,0,0,1) 100%)"}),Vn=Object(Ie.a)("div")({position:"absolute",bottom:0,width:"100%",height:"20%",background:"linear-gradient(180deg, rgba(0,0,0,0) 0%, rgba(0,0,0,1) 100%)"}),Hn=Object(Ie.a)(Q.a)({position:"absolute",bottom:0,padding:"0.5em",fontSize:"1.05rem"}),Un=Object(Ie.a)("div")({display:"flex",height:"fit-content",borderRadius:"5px",overflow:"hidden","& p":{color:"white",padding:"0.1em",paddingInline:"0.2em",fontSize:"1.05rem"}}),_n=function(e,t){var n=e.substr(0,t-"...".length);return n.length<e.length?n+"...":e},Jn=c.a.forwardRef((function(e,t){var n=e.manga,r=n.id,c=n.title,i=n.thumbnailUrl,o=n.downloadCount,s=n.unreadCount,l=n.inLibrary,d=e.gridLayout,j=e.dimensions,b=e.inLibraryIndicator,h=p().options,f=h.showUnreadBadge,O=h.showDownloadBadge,g=x("serverBaseURL",""),v=Object(u.a)(g,1)[0],y=x("useCache",!0),w=Object(u.a)(y,1)[0],C=x("ItemWidth",300),k=Object(u.a)(C,1)[0],L={pathname:"/manga/".concat(r,"/"),state:{backLink:Le}};if(d!==a.List){var N=Math.ceil(j/k);return Object(m.jsx)(An.a,{item:!0,columns:N,xs:1,children:Object(m.jsx)(S.b,{to:L,style:d===a.Comfortable?{textDecoration:"none"}:{},children:Object(m.jsxs)(Se.a,{sx:{display:"flex",flexDirection:"column"},children:[Object(m.jsx)(dt.a,{sx:{aspectRatio:"225/350",display:"flex"},ref:t,children:Object(m.jsxs)(lt.a,{sx:{position:"relative",height:"100%"},children:[Object(m.jsxs)(Un,{sx:{position:"absolute",top:5,left:5},children:[b&&l&&Object(m.jsx)(Q.a,{sx:{backgroundColor:"primary.dark",zIndex:"1"},children:"In library"}),f&&s>0&&Object(m.jsx)(Q.a,{sx:{backgroundColor:"primary.dark"},children:s}),O&&o>0&&Object(m.jsx)(Q.a,{sx:{backgroundColor:"success.dark"},children:o})]}),Object(m.jsx)(Mn,{alt:c,src:"".concat(v).concat(i,"?useCache=").concat(w),imgStyle:b&&l?{height:"100%",width:"100%",objectFit:"cover",filter:"brightness(0.4)"}:{height:"100%",width:"100%",objectFit:"cover"},spinnerStyle:{display:"grid",placeItems:"center"}}),d===a.Comfortable?Object(m.jsx)(m.Fragment,{}):Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)(Wn,{}),Object(m.jsx)(Vn,{})]}),d===a.Comfortable?Object(m.jsx)(m.Fragment,{}):Object(m.jsx)(Hn,{sx:{color:"white",textShadow:"0px 0px 3px #000000"},title:c,children:_n(c,61)})]})}),d===a.Comfortable?Object(m.jsx)(Hn,{sx:{position:"relative",color:"text.primary"},title:c,children:_n(c,61)}):Object(m.jsx)(m.Fragment,{})]})})})}return Object(m.jsx)(An.a,{item:!0,xs:12,children:Object(m.jsx)(dt.a,{children:Object(m.jsx)(lt.a,{component:S.b,to:L,children:Object(m.jsxs)(jt.a,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:2,position:"relative"},children:[Object(m.jsx)(ut.a,{variant:"rounded",sx:b&&l?{width:56,height:56,flex:"0 0 auto",marginRight:2,imageRendering:"pixelated",filter:"brightness(0.4)"}:{width:56,height:56,flex:"0 0 auto",marginRight:2,imageRendering:"pixelated"},src:"".concat(v).concat(i,"?useCache=").concat(w)}),Object(m.jsx)(Se.a,{sx:{display:"flex",flexDirection:"row",flexGrow:1,width:"min-content"},children:Object(m.jsx)(Q.a,{variant:"h5",component:"h2",title:c,children:_n(c,61)})}),Object(m.jsxs)(Un,{children:[b&&l&&Object(m.jsx)(Q.a,{sx:{backgroundColor:"primary.dark"},children:"In library"}),f&&s>0&&Object(m.jsx)(Q.a,{sx:{backgroundColor:"primary.dark"},children:s}),O&&o>0&&Object(m.jsx)(Q.a,{sx:{backgroundColor:"success.dark"},children:o})]})]})})})})})),Yn=function(e){var t,n=e.mangas,a=e.isLoading,c=e.message,i=e.messageExtra,o=e.hasNextPage,s=e.lastPageNum,l=e.setLastPageNum,d=e.gridLayout,j=e.horizontal,b=e.noFaces,h=e.inLibraryIndicator,f=Object(r.useRef)(null),p=function(){if(f.current){var e=f.current.getBoundingClientRect();(e.y+e.height)/window.innerHeight<2&&o&&l(s+1)}};Object(r.useEffect)((function(){return window.addEventListener("scroll",p,!0),function(){window.removeEventListener("scroll",p,!0)}}),[o,n]);var O,x=Object(r.useState)(1),g=Object(u.a)(x,2),v=g[0],y=g[1],w=Object(r.useRef)(null),C=function(){y(w.current?w.current.offsetWidth:0)};return Object(r.useLayoutEffect)(C,[]),window.addEventListener("resize",(function(){clearInterval(O),O=setTimeout(C,100)})),t=0===n.length?a?Object(m.jsx)(Ot,{}):b?Object(m.jsxs)(Se.a,{sx:{margin:"auto"},children:[Object(m.jsx)(Q.a,{variant:"h5",children:c}),i]}):Object(m.jsx)(en,{message:c,messageExtra:i}):n.map((function(e,t){return Object(m.jsx)(Jn,{manga:e,ref:t===n.length-1?f:void 0,gridLayout:d,dimensions:v,inLibraryIndicator:h},e.id)})),Object(m.jsx)("div",{ref:w,children:Object(m.jsx)(An.a,{container:!0,spacing:1,style:j?{margin:0,width:"100%",padding:"5px",overflowX:"scroll",display:"-webkit-inline-box",flexWrap:"nowrap"}:{margin:0,width:"100%",padding:"5px"},children:t})})};Yn.defaultProps={message:"",messageExtra:void 0};var Xn=Yn,qn=function(e,t){var n,a;return(null!==(n=e.unreadCount)&&void 0!==n?n:0)-(null!==(a=t.unreadCount)&&void 0!==a?a:0)},Kn=function(e,t){return e.title.localeCompare(t.title)},Gn=function(e,t){return e.id-t.id},Zn=function(e){var t=e.mangas,n=e.isLoading,a=e.message,c=e.lastLibraryUpdate,i=Object(R.d)("query",R.c),o=Object(u.a)(i,1)[0],s=p().options,l=s.unread,d=s.downloaded,j=Object(r.useState)([]),b=Object(u.a)(j,2),h=b[0],f=b[1],O=Object(r.useState)([]),x=Object(u.a)(O,2),g=x[0],v=x[1],y=Object(r.useState)([]),w=Object(u.a)(y,2),C=w[0],k=w[1],S=(null!==t&&void 0!==t?t:[]).length/10,L=Object(te.a)(),N=Object(ee.a)(L.breakpoints.up("sm"))?4:1,E=Object(r.useState)(N),T=Object(u.a)(E,2),I=T[0],F=T[1];Object(r.useEffect)((function(){k(function(e,t,n,a){return e.filter((function(e){return t?function(e,t){var n=t.title;return!e||n.toLowerCase().includes(e.toLowerCase())}(t,e):function(e,t){var n=t.downloadCount;switch(e){case!0:return!!n&&n>=1;case!1:return 0===n;default:return!0}}(a,e)&&function(e,t){var n=t.unreadCount;switch(e){case!0:return!!n&&n>=1;case!1:return 0===n;default:return!0}}(n,e)}))}(t,o,l,d)),F(N),window.scrollTo(0,0)}),[t,o,l,d]),Object(r.useEffect)((function(){v(function(e,t,n){var a=Object(Je.a)(e);switch(t){case"sortAlph":a.sort(Kn);break;case"sortID":a.sort(Gn);break;case"sortToRead":a.sort(qn)}return!0===n&&a.reverse(),a}(C,s.sorts,s.sortDesc))}),[C,c,s.sorts,s.sortDesc]),Object(r.useEffect)((function(){f((null!==g&&void 0!==g?g:[]).slice(0,10*I))}),[I,g]);var D=(null!=l||null!=d||o)&&0===C.length&&t.length>0;return Object(m.jsx)(Xn,{mangas:h,isLoading:n,hasNextPage:I<S,lastPageNum:I,setLastPageNum:F,message:D?"There are no Manga matching this filter":a,gridLayout:s.gridLayout})},Qn=n(104),$n=n.n(Qn);function ea(e){var t=e.progress;return Object(m.jsxs)(Se.a,{sx:{display:"grid",placeItems:"center",position:"relative"},children:[Object(m.jsx)(pt.a,{variant:"determinate",value:t}),Object(m.jsx)(Se.a,{sx:{position:"absolute"},children:Object(m.jsx)(Q.a,{fontSize:"0.8rem",children:"".concat(Math.round(t),"%")})})]})}var ta=JSON.parse(window.localStorage.getItem("serverBaseURL")).replace("http","ws");var na=function(e){var t=e.handleFinishedUpdate,n=Object(r.useState)(!1),a=Object(u.a)(n,2),c=a[0],i=a[1],o=Object(r.useState)(0),s=Object(u.a)(o,2),l=s[0],d=s[1],j=function(){var e=Object(P.a)(F.a.mark((function e(){return F.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,i(!0),d(0),e.next=5,_.post("/api/v1/update/fetch");case 5:e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),It("Checking for updates failed!","error"),i(!1);case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}();return Object(r.useEffect)((function(){var e=new WebSocket("".concat(ta,"/api/v1/update")),n=!1;return e.onmessage=function(e){var a=JSON.parse(e.data),r=a.running,c=a.statusMap,o=c.COMPLETE,s=void 0===o?[]:o,l=c.RUNNING,u=void 0===l?[]:l,j=c.PENDING,b=void 0===j?[]:j,h=s.length/(s.length+u.length+b.length)*100,f=100===h;!n&&!r&&f||(n=r,i(r),d(Number.isNaN(h)?0:h),f&&t(Date.now()))},function(){return e.close()}}),[]),Object(m.jsx)($.a,{onClick:j,disabled:c,children:c?Object(m.jsx)(ea,{progress:l}):Object(m.jsx)($n.a,{})})},aa=n(137);function ra(){var e,t=Object(aa.b)().t,n=Object(r.useState)(Date.now()),a=Object(u.a)(n,2),c=a[0],i=a[1],o=X("/api/v1/category"),s=o.data,l=o.error,d=o.loading,j=null!==s&&void 0!==s?s:[],b=Object(R.d)("tab",R.a),h=Object(u.a)(b,2),f=h[0],p=h[1],O=null!==(e=j.find((function(e){return e.order===f})))&&void 0!==e?e:j[0],x=X("/api/v1/category/".concat(null===O||void 0===O?void 0:O.id),{isPaused:function(){return null==O}}),g=x.data,v=x.error,w=x.loading,C=null!==g&&void 0!==g?g:[],k=Object(r.useContext)(y),S=k.setTitle,L=k.setAction;Object(r.useEffect)((function(){return S(t("screens.Library.Library")),L(Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)(Mt,{}),Object(m.jsx)(zn,{}),Object(m.jsx)(na,{handleFinishedUpdate:i})]})),function(){S(""),L(Object(m.jsx)(m.Fragment,{}))}}),[]);var N;if(null!=l)return Object(m.jsx)(en,{message:t("screens.Library.could-not-load-categories"),messageExtra:null!==(N=null===l||void 0===l?void 0:l.message)&&void 0!==N?N:l});if(d)return Object(m.jsx)(Ot,{});if(0===j.length)return Object(m.jsx)(en,{message:t("screens.Library.your-library-is-empty")});if(1===j.length)return Object(m.jsx)(Zn,{mangas:C,lastLibraryUpdate:c,message:t("screens.Library.your-library-is-empty"),isLoading:null!=O&&w});var E=window.innerWidth<160*j.length;return Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)(He.a,{value:O.order,onChange:function(e,t){return function(e){p(0===e?void 0:e)}(t)},indicatorColor:"primary",textColor:"primary",centered:!E,variant:E?"scrollable":"fullWidth",scrollButtons:!0,allowScrollButtonsMobile:!0,children:j.map((function(e){return Object(m.jsx)(Ue.a,{label:e.name,value:e.order},e.id)}))},O.order),j.map((function(e){var n;return Object(m.jsx)(_e,{index:e.order,currentIndex:O.order,children:e===O&&(v?Object(m.jsx)(en,{message:t("screens.Library.could-not-load-manga"),messageExtra:null!==(n=null===v||void 0===v?void 0:v.message)&&void 0!==n?n:v}):Object(m.jsx)(Zn,{mangas:C,lastLibraryUpdate:c,message:t("screens.Library.category-is-empty"),isLoading:w}))},e.order)}))]})}var ca=n(393),ia=n(215),oa=n.n(ia),sa=n(129),la=n.n(sa),ua=n(128),da=n.n(ua),ja=n(218),ba=n.n(ja),ha=n(131),fa=n.n(ha),pa=n(219),Oa=n.n(pa),xa=n(88),ma=n.n(xa),ga=n(216),va=n.n(ga),ya=n(130),wa=n.n(ya),Ca=n(237),ka=n(435),Sa=function(e,t){return Date.now()-e.getTime()<=t},La=function(e){var t=e instanceof Date?e:new Date(e),n=new Date,a=function(e){var t=new Date(e.getFullYear(),e.getMonth(),e.getDate());return e.getTime()-t.getTime()}(n),r=new Date(n.getTime()-a-864e5),c=n.getTime()-r.getTime(),i=Sa(t,a),o=Sa(t,c),s=i||o?t.toLocaleTimeString(void 0,{hour:"2-digit",minute:"2-digit"}):"";return i?"Today at ".concat(s):o?"Yesterday at ".concat(s):t.toLocaleDateString(void 0,{year:"numeric",month:"2-digit",day:"2-digit"})},Na=function(e){var t=Object(te.a)(),n=e.chapter,a=e.triggerChaptersUpdate,r=e.downloadChapter,i=e.showChapterNumber,o=e.onSelect,s=e.selected,l=null!==s,d=c.a.useState(null),j=Object(u.a)(d,2),b=j[0],h=j[1],f=function(){h(null)},p=function(e,t){f();var r=new FormData;r.append(e,t),"read"===e&&r.append("lastPageRead","1"),_.patch("/api/v1/manga/".concat(n.mangaId,"/chapter/").concat(n.index),r).then((function(){return a()}))},O=n.downloaded,x=!n.downloaded&&void 0===r;return Object(m.jsx)("li",{children:Object(m.jsxs)(dt.a,{sx:{position:"relative",margin:1},children:[Object(m.jsx)(lt.a,{component:S.b,to:{pathname:"/manga/".concat(n.mangaId,"/chapter/").concat(n.index),state:{backLink:Le}},style:{color:t.palette.text[n.read?"disabled":"primary"]},onClick:function(e){l&&(e.preventDefault(),e.stopPropagation(),o(!s))},children:Object(m.jsxs)(jt.a,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:2,"&:last-child":{pb:2}},children:[Object(m.jsxs)(Qt.a,{direction:"column",flex:1,children:[Object(m.jsxs)(Q.a,{variant:"h5",component:"h2",children:[n.bookmarked&&Object(m.jsx)(oa.a,{color:"primary",sx:{mr:.5,position:"relative",top:"0.15em"}}),i?"Chapter ".concat(n.chapterNumber):n.name]}),Object(m.jsx)(Q.a,{variant:"caption",children:n.scanlator}),Object(m.jsxs)(Q.a,{variant:"caption",children:[La(n.uploadDate),O&&" \u2022 Downloaded"]})]}),r&&Object(m.jsx)(rn,{download:r}),null===s?Object(m.jsx)($.a,{"aria-label":"more",onClick:function(e){e.stopPropagation(),e.preventDefault(),h(e.currentTarget)},size:"large",children:Object(m.jsx)(va.a,{})}):Object(m.jsx)(jn.a,{checked:s})]})}),Object(m.jsxs)(Ca.a,{anchorEl:b,keepMounted:!0,open:Boolean(b),onClose:f,children:[Object(m.jsxs)(ka.a,{onClick:function(){o(!0),f()},children:[Object(m.jsx)(Te.a,{children:Object(m.jsx)(ba.a,{fontSize:"small"})}),Object(m.jsx)(tt.a,{children:"Select"})]}),O&&Object(m.jsxs)(ka.a,{onClick:function(){_.delete("/api/v1/manga/".concat(n.mangaId,"/chapter/").concat(n.index)).then((function(){return a()})),f()},children:[Object(m.jsx)(Te.a,{children:Object(m.jsx)(Jt.a,{fontSize:"small"})}),Object(m.jsx)(tt.a,{children:"Delete"})]}),x&&Object(m.jsxs)(ka.a,{onClick:function(){_.get("/api/v1/download/".concat(n.mangaId,"/chapter/").concat(n.index)),f()},children:[Object(m.jsx)(Te.a,{children:Object(m.jsx)(ma.a,{fontSize:"small"})}),Object(m.jsx)(tt.a,{children:"Download"})]}),Object(m.jsxs)(ka.a,{onClick:function(){return p("bookmarked",!n.bookmarked)},children:[Object(m.jsxs)(Te.a,{children:[n.bookmarked&&Object(m.jsx)(da.a,{fontSize:"small"}),!n.bookmarked&&Object(m.jsx)(la.a,{fontSize:"small"})]}),Object(m.jsxs)(tt.a,{children:[n.bookmarked&&"Remove bookmark",!n.bookmarked&&"Add bookmark"]})]}),Object(m.jsxs)(ka.a,{onClick:function(){return p("read",!n.read)},children:[Object(m.jsxs)(Te.a,{children:[n.read&&Object(m.jsx)(wa.a,{fontSize:"small"}),!n.read&&Object(m.jsx)(fa.a,{fontSize:"small"})]}),Object(m.jsxs)(tt.a,{children:[n.read&&"Mark as unread",!n.read&&"Mark as read"]})]}),Object(m.jsxs)(ka.a,{onClick:function(){return p("markPrevRead",!0)},children:[Object(m.jsx)(Te.a,{children:Object(m.jsx)(Oa.a,{fontSize:"small"})}),Object(m.jsx)(tt.a,{children:"Mark previous as Read"})]})]})]})})},Ea=n(436),Ta=n(392);function Ra(e){var t=e.chapter,n=t.index,a=t.lastPageRead,r=e.mangaId;return Object(m.jsxs)(Ea.a,{sx:{position:"fixed",bottom:"2em",right:"3em"},component:S.b,variant:"extended",color:"primary",to:{pathname:"/manga/".concat(r,"/chapter/").concat(n,"/page/").concat(a),state:{backLink:Le}},children:[Object(m.jsx)(Ta.a,{}),1===n?"Start":"Resume"]})}var Ia={active:!1,unread:void 0,downloaded:void 0,bookmarked:void 0,reverse:!1,sortBy:"source",showChapterNumber:!1};function Fa(e,t){switch(t.type){case"filter":var n=!1!==e.unread&&!1!==e.downloaded&&!1!==e.bookmarked;return Object(D.a)(Object(D.a)({},e),{},Object(st.a)({active:n},t.filterType,t.filterValue));case"sortBy":return Object(D.a)(Object(D.a)({},e),{},{sortBy:t.sortBy});case"sortReverse":return Object(D.a)(Object(D.a)({},e),{},{reverse:!e.reverse});case"showChapterNumber":return Object(D.a)(Object(D.a)({},e),{},{showChapterNumber:!e.showChapterNumber});default:throw Error("This is not a valid Action")}}var Da=function(e){return function(e,t,n){var a=x(t,n),c=Object(u.a)(a,2),i=c[0],o=c[1];return Object(r.useReducer)((function(t,n){var a=e(t,n);return o(a),a}),i)}(Fa,"".concat(e,"filterOptions"),Ia)},Pa=[["source","By Source"],["fetchedAt","By Fetch date"]],Ba=function(e,t){return"string"===typeof t?"".concat(t).concat(1===e?"":"s"):t[1===e?"one":"many"]},za=function(e,t){return(1===e?t.one:t.many).replaceAll("%count%",e.toString())},Aa={filter:"Filter",sort:"Sort",display:"Display"},Ma=function(e){var t=e.open,n=e.onClose,a=e.options,r=e.optionsDispatch;return Object(m.jsx)(Fn,{open:t,onClose:n,minHeight:150,tabs:["filter","sort","display"],tabTitle:function(e){return Aa[e]},tabContent:function(e){return"filter"===e?Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)(Nn,{label:"Unread",checked:a.unread,onChange:function(e){return r({type:"filter",filterType:"unread",filterValue:e})}}),Object(m.jsx)(Nn,{label:"Downloaded",checked:a.downloaded,onChange:function(e){return r({type:"filter",filterType:"downloaded",filterValue:e})}}),Object(m.jsx)(Nn,{label:"Bookmarked",checked:a.bookmarked,onChange:function(e){return r({type:"filter",filterType:"bookmarked",filterValue:e})}})]}):"sort"===e?Pa.map((function(e){var t=Object(u.a)(e,2),n=t[0],c=t[1];return Object(m.jsx)(wn,{label:c,checked:a.sortBy===n,sortDescending:a.reverse,onClick:function(){return n!==a.sortBy?r({type:"sortBy",sortBy:n}):r({type:"sortReverse"})}},n)})):"display"===e?Object(m.jsxs)(ln.a,{onChange:function(){return r({type:"showChapterNumber"})},value:a.showChapterNumber,children:[Object(m.jsx)(On,{label:"Source Title",value:!1}),Object(m.jsx)(On,{label:"Chapter Number",value:!0})]}):null}})},Wa=function(e){var t=e.options,n=e.optionsDispatch,a=r.useState(!1),c=Object(u.a)(a,2),i=c[0],o=c[1],s=function(e){var t=e.unread,n=e.downloaded,a=e.bookmarked;return null!=t||null!=n||null!=a}(t);return Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)($.a,{onClick:function(){return o(!0)},children:Object(m.jsx)($e.a,{color:s?"warning":void 0})}),Object(m.jsx)(Ma,{open:i,onClose:function(){return o(!1)},options:t,optionsDispatch:n})]})},Va=n(132),Ha=n.n(Va),Ua={download:ma.a,delete:Jt.a,bookmark:la.a,unbookmark:da.a,mark_as_read:fa.a,mark_as_unread:wa.a},_a=function(e){var t=e.action,n=e.matchingChapters,a=e.onClick,r=e.title,c=n.length,i=Ua[t];return Object(m.jsxs)(ka.a,{onClick:function(){return a(t,n)},disabled:0===c,children:[Object(m.jsx)(Te.a,{children:Object(m.jsx)(i,{fontSize:"small"})}),Object(m.jsxs)(tt.a,{children:[r,c>0?" (".concat(c,")"):""]})]})},Ja=function(e){var t=e.selectedChapters,n=e.onAction,a=t.length,c=Object(r.useRef)(),i=Object(r.useState)(!1),o=Object(u.a)(i,2),s=o[0],l=o[1],d=function(){return l(!1)},j=function(e,t){n(e,t),d()};return Object(m.jsxs)(Se.a,{sx:{position:"fixed",bottom:"2em",right:"3em",pt:1},ref:c,children:[Object(m.jsxs)(Ea.a,{variant:"extended",color:"primary",id:"selectionMenuButton",onClick:function(){return l(!0)},children:["".concat(a," ").concat(Ba(a,"chapter")),Object(m.jsx)(Ha.a,{sx:{ml:1}})]}),Object(m.jsxs)(Ca.a,{id:"selectionMenu",anchorEl:c.current,open:s,onClose:d,anchorOrigin:{horizontal:"right",vertical:"top"},transformOrigin:{horizontal:"right",vertical:"bottom"},MenuListProps:{"aria-labelledby":"selectionMenuButton"},children:[Object(m.jsx)(_a,{action:"download",matchingChapters:t.filter((function(e){var t=e.chapter,n=e.downloadChapter;return!t.downloaded&&void 0===n})),onClick:j,title:"Download selected"}),Object(m.jsx)(_a,{action:"delete",matchingChapters:t.filter((function(e){return e.chapter.downloaded})),onClick:j,title:"Delete selected"}),Object(m.jsx)(_a,{action:"bookmark",matchingChapters:t.filter((function(e){return!e.chapter.bookmarked})),onClick:j,title:"Bookmark selected"}),Object(m.jsx)(_a,{action:"unbookmark",matchingChapters:t.filter((function(e){return e.chapter.bookmarked})),onClick:j,title:"Remove bookmarks from selected"}),Object(m.jsx)(_a,{action:"mark_as_read",matchingChapters:t.filter((function(e){return!e.chapter.read})),onClick:j,title:"Mark selected as read"}),Object(m.jsx)(_a,{action:"mark_as_unread",matchingChapters:t.filter((function(e){return e.chapter.read})),onClick:j,title:"Mark selected as unread"})]})]})},Ya=Object(Ie.a)(Wt.a)((function(e){var t=e.theme;return Object(st.a)({listStyle:"none",padding:0,minHeight:"200px"},t.breakpoints.up("md"),{width:"50vw",height:"calc(100vh - 64px - 48px)",margin:0})})),Xa={download:{success:{one:"Download added",many:"%count% downloads added"},error:{one:"Error adding download",many:"Error adding downloads"}},delete:{success:{one:"Chapter deleted",many:"%count% chapters deleted"},error:{one:"Error deleting chapter",many:"Error deleting chapters"}},bookmark:{success:{one:"Chapter bookmarked",many:"%count% chapters bookmarked"},error:{one:"Error bookmarking chapter",many:"Error bookmarking chapters"}},unbookmark:{success:{one:"Chapter bookmark removed",many:"%count% chapter bookmarks removed"},error:{one:"Error removing bookmark",many:"Error removing bookmarks"}},mark_as_read:{success:{one:"Chapter marked as read",many:"%count% chapters marked as read"},error:{one:"Error marking chapter as read",many:"Error marking chapters as read"}},mark_as_unread:{success:{one:"Chapter marked as unread",many:"%count% chapters marked as unread"},error:{one:"Error marking chapter as unread",many:"Error marking chapters as unread"}}},qa=function(e){var t,n=e.mangaId,a=Object(r.useState)(null),c=Object(u.a)(a,2),i=c[0],o=c[1],s=Object(r.useRef)(),l=null===(t=an("/api/v1/downloads").data)||void 0===t?void 0:t.queue,d=Da(n),j=Object(u.a)(d,2),b=j[0],h=j[1],f=X("/api/v1/manga/".concat(n,"/chapters?onlineFetch=false")),p=f.data,O=f.mutate,x=f.loading,g=Object(r.useMemo)((function(){return null!==p&&void 0!==p?p:[]}),[p]);Object(r.useEffect)((function(){if(s.current&&l){var e=s.current;l.filter((function(t){var n=e.find((function(e){return t.chapterIndex===e.chapterIndex&&t.mangaId===e.mangaId}));return!n||t.state!==n.state})).length>0&&O()}s.current=l}),[l]);var v=Object(r.useMemo)((function(){return function(e,t){var n=t.active?e.filter((function(e){return function(e,t){var n=t.read;switch(e){case!0:return!n;case!1:return n;default:return!0}}(t.unread,e)&&function(e,t){var n=t.downloaded;switch(e){case!0:return n;case!1:return!n;default:return!0}}(t.downloaded,e)&&function(e,t){var n=t.bookmarked;switch(e){case!0:return n;case!1:return!n;default:return!0}}(t.bookmarked,e)})):Object(Je.a)(e),a="fetchedAt"===t.sortBy?n.sort((function(e,t){return e.fetchedAt-t.fetchedAt})):n;return t.reverse&&a.reverse(),a}(g,b)}),[g,b]),y=Object(r.useMemo)((function(){return v.slice().reverse().find((function(e){return!1===e.read}))}),[v]);if(x)return Object(m.jsx)("div",{style:{margin:"10px auto",display:"flex",justifyContent:"center"},children:Object(m.jsx)(pt.a,{thickness:5})});var w=0===g.length,C=!w&&0===v.length,k=v.map((function(e){var t,n=null===l||void 0===l?void 0:l.find((function(t){return t.chapterIndex===e.index&&t.mangaId===e.mangaId})),a=null!==(t=null===i||void 0===i?void 0:i.includes(e.id))&&void 0!==t?t:null;return{chapter:e,downloadChapter:n,selected:a}})),S=null===i?null:k.filter((function(e){var t=e.chapter;return i.includes(t.id)}));return Object(m.jsxs)(m.Fragment,{children:[Object(m.jsxs)(Qt.a,{direction:"column",sx:{position:"relative"},children:[Object(m.jsxs)(Qt.a,{direction:"row",alignItems:"center",justifyContent:"space-between",sx:{m:1,mb:0,mr:2,minHeight:40},children:[Object(m.jsx)(Q.a,{variant:"h5",children:"".concat(v.length," Chapter").concat(1===v.length?"":"s")}),null===i?Object(m.jsx)(Wa,{options:b,optionsDispatch:h}):Object(m.jsxs)(Qt.a,{direction:"row",children:[Object(m.jsx)(Ye.a,{size:"small",onClick:function(){null!==i&&o(v.map((function(e){return e.id})))},children:"Select all"}),Object(m.jsx)(Ye.a,{size:"small",onClick:function(){null!==i&&o(null)},children:"Clear"})]})]}),w&&Object(m.jsx)(en,{message:"No chapters found"}),C&&Object(m.jsx)(en,{message:"No chapters matching filter"}),Object(m.jsx)(Ya,{style:{height:"undefined",overflowY:window.innerWidth<900?"visible":"auto"},totalCount:v.length,itemContent:function(e){return Object(m.jsx)(Na,Object(D.a)(Object(D.a)({},k[e]),{},{showChapterNumber:b.showChapterNumber,triggerChaptersUpdate:function(){return O()},onSelect:function(){return function(e){var t=v[e];if(t)if(null===i)o([t.id]);else if(i.includes(t.id)){var n=i.filter((function(e){return e!==t.id}));o(n.length>0?n:null)}else o([].concat(Object(Je.a)(i),[t.id]))}(e)}}))},useWindowScroll:window.innerWidth<900,overscan:.5*window.innerHeight})]}),null!==S?Object(m.jsx)(Ja,{selectedChapters:S,onAction:function(e,t){if(0!==t.length){var n,a=t.map((function(e){return e.chapter.id}));if("download"===e)n=_.post("/api/v1/download/batch",{chapterIds:a});else{var r={};"delete"===e?r.delete=!0:"bookmark"===e?r.isBookmarked=!0:"unbookmark"===e?r.isBookmarked=!1:"mark_as_read"===e?r.isRead=!0:"mark_as_unread"===e&&(r.isRead=!1),n=_.post("/api/v1/chapter/batch",{chapterIds:a,change:r})}n.then((function(){return It(za(a.length,Xa[e].success),"success")})).then((function(){return O()})).catch((function(){return It(za(a.length,Xa[e].error),"error")}))}}}):y&&Object(m.jsx)(Ra,{chapter:y,mangaId:n})]})},Ka=n(133),Ga=n.n(Ka),Za=n(220),Qa=n.n(Za),$a=n(221),er=n.n($a),tr=n(401);function nr(e){return e||"UNKNOWN"}var ar=function(e){var t,n,a=e.manga,r=x("serverBaseURL",""),c=Object(u.a)(r,1)[0],i=x("useCache",!0),o=Object(u.a)(i,1)[0],s=(t=a.inLibrary,Object(tr.a)((function(e){var n;return{root:Object(st.a)({width:"100%"},e.breakpoints.up("md"),{position:"sticky",top:"64px",left:"0px",width:"50vw",height:"calc(100vh - 64px)",alignSelf:"flex-start",overflowY:"auto"}),top:{padding:"10px"},leftRight:{display:"flex"},leftSide:{"& img":{borderRadius:4,maxWidth:"100%",minWidth:"100%",height:"auto"},maxWidth:"50%"},rightSide:Object(st.a)({marginLeft:15,maxWidth:"100%","& span":{fontWeight:"400"}},e.breakpoints.up("lg"),{fontSize:"1.3em"}),buttons:{display:"flex",justifyContent:"space-around","& button":{color:t?"#2196f3":"inherit"},"& a":{textDecoration:"none",color:"#858585","& button":{color:"inherit"}}},bottom:(n={paddingLeft:"10px",paddingRight:"10px"},Object(st.a)(n,e.breakpoints.up("md"),{fontSize:"1.2em"}),Object(st.a)(n,e.breakpoints.up("lg"),{fontSize:"1.3em"}),n),description:{"& h4":{marginTop:"1em",marginBottom:0},"& p":{textAlign:"justify",textJustify:"inter-word"}},genre:{display:"flex",flexWrap:"wrap","& h5":{border:"2px solid #2196f3",borderRadius:"1.13em",marginRight:"1em",marginTop:0,marginBottom:"10px",padding:"0.3em",color:"#2196f3"}}}})))();return Object(m.jsxs)("div",{className:s.root,children:[Object(m.jsxs)("div",{className:s.top,children:[Object(m.jsxs)("div",{className:s.leftRight,children:[Object(m.jsx)("div",{className:s.leftSide,children:Object(m.jsx)("img",{src:"".concat(c).concat(a.thumbnailUrl,"?useCache=").concat(o),alt:"Manga Thumbnail"})}),Object(m.jsxs)("div",{className:s.rightSide,children:[Object(m.jsx)("h1",{children:a.title}),Object(m.jsxs)("h3",{children:["Author: ",Object(m.jsx)("span",{children:nr(a.author)})]}),Object(m.jsxs)("h3",{children:["Artist: ",Object(m.jsx)("span",{children:nr(a.artist)})]}),Object(m.jsx)("h3",{children:"Status: ".concat(a.status)}),Object(m.jsx)("h3",{children:"Source: ".concat((n=a.source,null!==n.displayName?n.displayName:n.id))})]})]}),Object(m.jsxs)("div",{className:s.buttons,children:[Object(m.jsx)("div",{children:Object(m.jsxs)($.a,{onClick:a.inLibrary?function(){Object(N.c)("/api/v1/manga/".concat(a.id,"/?onlineFetch=false"),Object(D.a)(Object(D.a)({},a),{},{inLibrary:!1}),{revalidate:!1}),_.delete("/api/v1/manga/".concat(a.id,"/library/")).then((function(){return Object(N.c)("/api/v1/manga/".concat(a.id,"/?onlineFetch=false"))}))}:function(){Object(N.c)("/api/v1/manga/".concat(a.id,"/?onlineFetch=false"),Object(D.a)(Object(D.a)({},a),{},{inLibrary:!0}),{revalidate:!1}),_.get("/api/v1/manga/".concat(a.id,"/library/")).then((function(){return Object(N.c)("/api/v1/manga/".concat(a.id,"/?onlineFetch=false"))}))},size:"large",children:[a.inLibrary?Object(m.jsx)(Ga.a,{sx:{mr:1}}):Object(m.jsx)(Qa.a,{sx:{mr:1}}),Object(m.jsx)(Q.a,{sx:{fontSize:{xs:"0.75em",sm:"0.85em"}},children:a.inLibrary?"In Library":"Add To Library"})]})}),Object(m.jsx)("a",{href:a.realUrl,target:"_blank",rel:"noreferrer",children:Object(m.jsxs)($.a,{size:"large",children:[Object(m.jsx)(er.a,{sx:{mr:1}}),Object(m.jsx)(Q.a,{sx:{fontSize:{xs:"0.75em",sm:"0.85em"}},children:"Open Site"})]})})]})]}),Object(m.jsxs)("div",{className:s.bottom,children:[Object(m.jsxs)("div",{className:s.description,children:[Object(m.jsx)("h4",{children:"About"}),Object(m.jsx)("p",{children:a.description})]}),Object(m.jsx)("div",{className:s.genre,children:a.genre.map((function(e){return Object(m.jsx)("h5",{children:e},e)}))})]})]})},rr=n(160),cr=n.n(rr),ir=n(327);function or(e){var t,n=e.open,a=e.setOpen,c=e.mangaId,i=X("/api/v1/manga/".concat(c,"/category")),o=i.data,s=i.mutate,l=X("/api/v1/category").data,u=Object(r.useMemo)((function(){var e=Object(Je.a)(null!==l&&void 0!==l?l:[]);return e.length>0&&"Default"===e[0].name&&e.shift(),e}),[l]),d=null!==(t=null===o||void 0===o?void 0:o.map((function(e){return e.id})))&&void 0!==t?t:[];return Object(m.jsxs)(Ge.a,{sx:{".MuiDialog-paper":{maxHeight:435,width:"80%"}},maxWidth:"xs",open:n,children:[Object(m.jsx)(Xe.a,{children:"Set categories"}),Object(m.jsx)(qe.a,{dividers:!0,children:Object(m.jsxs)(ir.a,{children:[0===u.length&&Object(m.jsxs)("span",{children:["No categories found!",Object(m.jsx)("br",{}),"You should make some from settings."]}),u.map((function(e){return Object(m.jsx)(dn.a,{control:Object(m.jsx)(jn.a,{checked:d.includes(e.id),onChange:function(t){return n=t,a=e.id,void(n.target.checked?_.get:_.delete)("/api/v1/manga/".concat(c,"/category/").concat(a)).then((function(){return s()}));var n,a},color:"default"}),label:e.name},e.id)}))]})}),Object(m.jsxs)(Ke.a,{children:[Object(m.jsx)(Ye.a,{autoFocus:!0,onClick:function(){a(!1)},color:"primary",children:"Cancel"}),Object(m.jsx)(Ye.a,{onClick:function(){a(!1)},color:"primary",children:"Ok"})]})]})}var sr=function(e){var t=e.manga,n=e.onRefresh,a=e.refreshing,i=Object(te.a)(),o=Object(ee.a)(i.breakpoints.up("sm")),s=c.a.useState(null),l=Object(u.a)(s,2),d=l[0],j=l[1],b=Boolean(d),h=function(){j(null)},f=Object(r.useState)(!1),p=Object(u.a)(f,2),O=p[0],x=p[1];return Object(m.jsxs)(m.Fragment,{children:[o&&Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)(Re.a,{title:"Reload data from source",children:Object(m.jsx)($.a,{onClick:function(){n()},disabled:a,children:Object(m.jsx)($n.a,{})})}),t.inLibrary&&Object(m.jsx)(Re.a,{title:"Edit manga categories",children:Object(m.jsx)($.a,{onClick:function(){x(!0)},children:Object(m.jsx)(cr.a,{})})})]}),!o&&Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)($.a,{id:"chaptersMenuButton","aria-controls":b?"chaptersMenu":void 0,"aria-haspopup":"true","aria-expanded":b?"true":void 0,onClick:function(e){return j(e.currentTarget)},children:Object(m.jsx)(Ha.a,{})}),Object(m.jsxs)(Ca.a,{id:"chaptersMenu",anchorEl:d,open:b,onClose:h,MenuListProps:{"aria-labelledby":"chaptersMenuButton"},children:[Object(m.jsxs)(ka.a,{onClick:function(){n(),h()},disabled:a,children:[Object(m.jsx)(Te.a,{children:Object(m.jsx)($n.a,{fontSize:"small"})}),Object(m.jsx)(tt.a,{children:"Reload data from source"})]}),t.inLibrary&&Object(m.jsxs)(ka.a,{onClick:function(){x(!0),h()},children:[Object(m.jsx)(Te.a,{children:Object(m.jsx)(cr.a,{fontSize:"small"})}),Object(m.jsx)(tt.a,{children:"Edit manga categories"})]})]})]}),Object(m.jsx)(or,{open:O,setOpen:x,mangaId:t.id})]})},lr=function(){var e,t,n=Object(r.useContext)(y).setTitle,a=Object(L.i)().id,c=Object(r.useRef)(!1),i=X("/api/v1/manga/".concat(a,"/?onlineFetch=false")),o=i.data,s=i.error,l=i.loading,d=i.isValidating,j=i.mutate,b=function(e){var t=Object(r.useState)(!1),n=Object(u.a)(t,2),a=n[0],c=n[1];return[Object(r.useCallback)(Object(P.a)(F.a.mark((function t(){return F.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return c(!0),t.next=3,Promise.all([J("/api/v1/manga/".concat(e,"/?onlineFetch=true")).then((function(t){return Object(N.c)("/api/v1/manga/".concat(e,"/?onlineFetch=false"),t,{revalidate:!1})})),J("/api/v1/manga/".concat(e,"/chapters?onlineFetch=true")).then((function(t){return Object(N.c)("/api/v1/manga/".concat(e,"/chapters?onlineFetch=false"),t,{revalidate:!1})}))]).finally((function(){return c(!1)}));case 3:case"end":return t.stop()}}),t)}))),[e]),{loading:a}]}(a),h=Object(u.a)(b,2),f=h[0],p=h[1].loading;return function(e){var t=w().setDefaultBackTo;Object(r.useEffect)((function(){return t(e),function(){return t(void 0)}}),[e])}(!1===(null===o||void 0===o?void 0:o.inLibrary)&&null!=o.sourceId?"/sources/".concat(o.sourceId,"/popular"):"/library"),Object(r.useEffect)((function(){null!=o&&o.inLibrary&&(o.age>86400||o.chaptersAge>86400)&&!1===c.current&&(c.current=!0,f())}),[o]),Object(r.useEffect)((function(){var e;n(null!==(e=null===o||void 0===o?void 0:o.title)&&void 0!==e?e:"Manga")}),[null===o||void 0===o?void 0:o.title]),s&&!o?Object(m.jsx)(en,{message:"Could not load manga",messageExtra:null!==(t=s.message)&&void 0!==t?t:s}):Object(m.jsxs)(Se.a,{sx:{display:{md:"flex"},overflow:"hidden"},children:[Object(m.jsx)(Ve,{children:Object(m.jsxs)(Qt.a,{direction:"row",alignItems:"center",children:[s&&!d&&!p&&Object(m.jsx)(Re.a,{title:Object(m.jsxs)(m.Fragment,{children:["Could not fetch manga data",Object(m.jsx)("br",{}),null!==(e=s.message)&&void 0!==e?e:s]}),children:Object(m.jsx)($.a,{onClick:function(){return j()},children:Object(m.jsx)(ca.a,{color:"error"})})}),o&&(p||d)&&Object(m.jsx)($.a,{disabled:!0,children:Object(m.jsx)(pt.a,{size:16})}),o&&Object(m.jsx)(sr,{manga:o,onRefresh:f,refreshing:p})]})}),l&&Object(m.jsx)(Ot,{}),o&&Object(m.jsx)(ar,{manga:o}),Object(m.jsx)(qa,{mangaId:a})]})};var ur=c.a.forwardRef((function(e,t){var n=e.src,a=e.index,i=e.onImageLoad,o=e.settings,s=x("useCache",!0),l=Object(u.a)(s,1)[0],d=Object(r.useRef)(null),j=function(e){var t=c.a.useState({height:window.innerHeight,width:window.innerWidth}),n=Object(u.a)(t,2),a=n[0],r=n[1];return c.a.useEffect((function(){function e(){r({height:window.innerHeight,width:window.innerWidth})}return window.addEventListener("resize",e),function(){window.removeEventListener("resize",e)}}),[]),"DoubleLTR"===e.readerType||"DoubleRTL"===e.readerType||"ContinuesHorizontalLTR"===e.readerType||"ContinuesHorizontalRTL"===e.readerType?{display:"block",marginLeft:"7px",marginRight:"7px",width:"auto",minHeight:"99vh",height:"auto",maxHeight:"99vh",objectFit:"contain",pointerEvents:"none"}:{display:"block",marginBottom:"ContinuesVertical"===e.readerType?"15px":0,minWidth:"50vw",width:a.width<a.height?"100vw":"100%",maxWidth:"100%"}}(o);return Object(m.jsx)(Se.a,{ref:t,sx:{margin:"auto"},children:Object(m.jsx)(Mn,{src:"".concat(n,"?useCache=").concat(l),onImageLoad:i,alt:"Page #".concat(a),imgRef:d,spinnerStyle:Object(D.a)(Object(D.a)({},j),{},{height:"100vh",width:"70vw",padding:"50px calc(50% - 20px)",backgroundColor:"#525252",marginBottom:10}),imgStyle:j})})}));function dr(e){var t=e.pages,n=e.curPage,a=e.initialPage,c=e.settings,i=e.setCurPage,o=e.prevChapter,s=e.nextChapter,l=Object(r.useRef)(a),u=Object(r.useRef)(null),d=Object(r.useRef)([]);function j(){var e;n<t.length-1?(null===(e=d.current[n+1])||void 0===e||e.scrollIntoView({inline:"center"}),i((function(e){return e+1}))):c.loadNextOnEnding&&s()}function b(){var e;n>0?(null===(e=d.current[n-1])||void 0===e||e.scrollIntoView({inline:"center"}),i(n-1)):0===n&&o()}var h=Object(r.useRef)(0);function f(e){window.scrollBy(h.current-e.pageX,0)}function p(e){var t;h.current=e.pageX,null===(t=u.current)||void 0===t||t.addEventListener("mousemove",f)}function O(){var e;null===(e=u.current)||void 0===e||e.removeEventListener("mousemove",f)}function x(e){e.clientX>=.85*window.innerWidth?"ContinuesHorizontalLTR"===c.readerType?j():b():e.clientX<=.15*window.innerWidth&&("ContinuesHorizontalLTR"===c.readerType?b():j())}var g=function(){"ContinuesHorizontalLTR"===c.readerType?window.scrollX+window.innerWidth>=document.body.scrollWidth&&s():"ContinuesHorizontalRTL"===c.readerType&&window.scrollX<=window.innerWidth&&s()};return Object(r.useEffect)((function(){setTimeout((function(){var e;null===(e=d.current[a])||void 0===e||e.scrollIntoView({inline:"center"})}),0)}),[a]),Object(r.useEffect)((function(){var e,t;return null===(e=u.current)||void 0===e||e.addEventListener("mousedown",p),null===(t=u.current)||void 0===t||t.addEventListener("mouseup",O),function(){var e,t;null===(e=u.current)||void 0===e||e.removeEventListener("mousedown",p),null===(t=u.current)||void 0===t||t.removeEventListener("mouseup",O)}}),[u]),Object(r.useEffect)((function(){var e;return c.loadNextOnEnding&&document.addEventListener("scroll",g),null===(e=u.current)||void 0===e||e.addEventListener("mousedown",x),function(){var e;document.removeEventListener("scroll",g),null===(e=u.current)||void 0===e||e.removeEventListener("mousedown",x)}}),[u,n]),Object(r.useEffect)((function(){var e=function(){if(u.current){var e=function(e){for(var t=0;t<e.children.length;t++){var n=e.children.item(t);if(n){var a=n.getBoundingClientRect(),r=a.left,c=a.right;if(r<=window.innerWidth/2&&c>window.innerWidth/2)return t}}return-1}(u.current);e!==l.current&&(l.current=e,i(e)),("ContinuesHorizontalLTR"===c.readerType?window.innerWidth+window.scrollX>=document.body.scrollWidth-5:window.scrollX<=0)&&(l.current=t.length-1,i(l.current))}};return window.addEventListener("scroll",e),function(){return window.removeEventListener("scroll",e)}}),[c.readerType]),Object(m.jsx)(Se.a,{ref:u,sx:{display:"flex",flexDirection:"ContinuesHorizontalLTR"===c.readerType?"row":"row-reverse",justifyContent:"ContinuesHorizontalLTR"===c.readerType?"flex-start":"flex-end",margin:"0 auto",width:"auto",height:"auto",overflowX:"visible",userSelect:"none"},children:t.map((function(e){return Object(m.jsx)(ur,{index:e.index,src:e.src,onImageLoad:function(){},settings:c,ref:function(t){d.current[e.index]=t}},e.index)}))})}function jr(e){var t=e.settings,n=e.curPage,a=e.pageCount;return Object(m.jsx)(Se.a,{sx:{display:t.showPageNumber?"block":"none",position:"fixed",bottom:"50px",right:t.staticNav?"calc((100vw - 325px)/2)":"calc((100vw - 25px)/2)",padding:"2px",paddingLeft:"4px",paddingRight:"4px",textAlign:"center",backgroundColor:"rgba(0, 0, 0, 0.3)",borderRadius:"10px"},children:"".concat(n+1," / ").concat(a)})}function br(e){var t=e.pages,n=e.settings,a=e.setCurPage,c=e.initialPage,i=e.curPage,o=e.nextChapter,s=e.prevChapter,l=Object(r.useRef)(null),u=function(e){a(e),window.scroll({top:0})};function d(){i<t.length-1?u(i+1):n.loadNextOnEnding&&o()}function j(){i>0?u(i-1):s()}function b(){"SingleLTR"===n.readerType?j():"SingleRTL"===n.readerType&&d()}function h(){"SingleLTR"===n.readerType?d():"SingleRTL"===n.readerType&&j()}function f(e){switch(e.code){case"Space":e.preventDefault(),d();break;case"ArrowRight":h();break;case"ArrowLeft":b()}}function p(e){e.clientX>window.innerWidth/2?h():b()}return Object(r.useEffect)((function(){var e;return document.addEventListener("keydown",f),null===(e=l.current)||void 0===e||e.addEventListener("click",p),function(){var e;document.removeEventListener("keydown",f),null===(e=l.current)||void 0===e||e.removeEventListener("click",p)}}),[l,i,n.readerType]),Object(r.useEffect)((function(){setTimeout((function(){u(c)}),0)}),[c]),Object(m.jsx)(Se.a,{ref:l,sx:{display:"flex",flexDirection:"row",justifyContent:"center",margin:"0 auto",width:"100%",height:"100vh"},children:Object(m.jsx)(ur,{index:i,onImageLoad:function(){},src:t[i].src,settings:n},i)})}var hr=Object(Ie.a)("img")({marginBottom:0,width:"auto",minHeight:"99vh",height:"auto",maxHeight:"99vh",objectFit:"contain"}),fr=c.a.forwardRef((function(e,t){var n=e.image1src,a=e.image2src,r=e.index,c=e.settings;return Object(m.jsxs)(Se.a,{ref:t,sx:{display:"flex",flexDirection:"DoubleLTR"===c.readerType?"row":"row-reverse",justifyContent:"center",margin:"0 auto",width:"auto",height:"auto",overflowX:"scroll"},children:[Object(m.jsx)(hr,{src:n,alt:"Page #".concat(r)}),Object(m.jsx)(hr,{src:a,alt:"Page #".concat(r+1)})]})}));function pr(e){var t=e.pages,n=e.settings,a=e.setCurPage,c=e.initialPage,i=e.curPage,s=e.nextChapter,l=e.prevChapter,u=Object(r.useRef)(null),d=Object(r.useRef)([]),j=Object(r.useRef)(0),b=Object(r.useRef)(Array(t.length).fill(!1)),h=Object(r.useRef)(Array(t.length).fill(!1));function f(){if(i<t.length-1){var e=i+j.current;a(e>=t.length?t.length-1:e)}else n.loadNextOnEnding&&s()}function p(){if(i>0){var e=i-function(){var e,t,n=i===h.current.length-1;return e=i-1,(t=h.current)[e]||e===t.length-1||t[e+1]&&(e-(t.lastIndexOf(!0,e-1)+1))%2===0||n?1:2}();a(e<0?0:e)}else l()}function O(){"DoubleLTR"===n.readerType?p():f()}function x(){"DoubleLTR"===n.readerType?f():p()}function g(e){switch(e.code){case"Space":e.preventDefault(),f();break;case"ArrowRight":x();break;case"ArrowLeft":O()}}function v(e){e.clientX>window.innerWidth/2?x():O()}return Object(r.useEffect)((function(){var e,a=setInterval((function(){(!(i===t.length-1)&&b.current[i]&&b.current[i+1]||b.current[i])&&(!function(){if(j.current=0,!(i<t.length&&d.current[i]&&b.current[i]&&(j.current=1,h.current[i]))&&i+1<t.length&&d.current[i+1]&&b.current[i+1]){if(h.current[i+1])return;j.current=2}}(),2===j.current?o.a.render(Object(m.jsx)(fr,{index:i,image1src:t[i].src,image2src:t[i+1].src,settings:n},i),document.getElementById("display")):o.a.render(Object(m.jsx)(ur,{index:i,src:1===j.current?t[i].src:"",onImageLoad:function(){},settings:n},i),document.getElementById("display")),clearInterval(a))}),50);return document.addEventListener("keydown",g),null===(e=u.current)||void 0===e||e.addEventListener("click",v),function(){var e;clearInterval(a),document.removeEventListener("keydown",g),null===(e=u.current)||void 0===e||e.removeEventListener("click",v)}}),[u,i,n.readerType]),Object(r.useEffect)((function(){a(c)}),[c]),Object(m.jsxs)(Se.a,{ref:u,children:[Object(m.jsx)(Se.a,{id:"preload",sx:{display:"none"},children:t.map((function(e){return Object(m.jsx)("img",{ref:function(t){d.current[e.index]=t},src:e.src,onLoad:(t=e.index,function(){b.current[t]=!0;var e=d.current[t];h.current[t]=function(e){return e.height/e.width<1}(e)}),alt:"".concat(e.index)},"".concat(e.index));var t}))}),Object(m.jsx)(Se.a,{id:"display",sx:{display:"flex",flexDirection:"DoubleLTR"===n.readerType?"row":"row-reverse",justifyContent:"center",margin:"0 auto",width:"auto",height:"auto",overflowX:"scroll"}})]})}var Or=function(){return window.innerHeight+window.scrollY>=document.body.offsetHeight-5};function xr(e){var t=e.pages,n=e.settings,a=e.setCurPage,c=e.initialPage,i=e.nextChapter,o=e.prevChapter,s=Object(r.useRef)(c),l=Object(r.useRef)(null),u=Object(r.useRef)([]);Object(r.useEffect)((function(){var e=function(){if(l.current)if(Or())s.current=t.length-1,a(s.current),n.loadNextOnEnding&&i();else{var e=function(e){for(var t=0;t<e.children.length;t++){var n=e.children.item(t);if(n){var a=n.getBoundingClientRect(),r=a.top,c=a.bottom;if(r<=window.innerHeight&&c>1)return t}}return-1}(l.current);e!==s.current&&(s.current=e,a(e))}};return window.addEventListener("scroll",e),function(){window.removeEventListener("scroll",e)}}),[n.loadNextOnEnding]);var d=Object(r.useCallback)((function(e){"down"===e&&Or()?i():"up"===e&&window.scrollY<=0?o():window.scroll({top:window.scrollY+.95*window.innerHeight*("up"===e?-1:1),behavior:"smooth"})}),[i,o]);return Object(r.useEffect)((function(){var e=function(e){switch(e.code){case"Space":case"ArrowRight":e.preventDefault(),d("down");break;case"ArrowLeft":e.preventDefault(),d("up")}};return document.addEventListener("keydown",e,!1),function(){document.removeEventListener("keydown",e)}}),[]),Object(r.useEffect)((function(){setTimeout((function(){var e;null===(e=u.current[c])||void 0===e||e.scrollIntoView()}),0)}),[c]),Object(m.jsx)(Se.a,{ref:l,sx:{display:"flex",flexDirection:"column",justifyContent:"center",margin:"0 auto",width:"100%"},onClick:function(e){return d(e.clientX>window.innerWidth/2?"down":"up")},children:t.map((function(e){return Object(m.jsx)(ur,{index:e.index,src:e.src,onImageLoad:function(){},settings:n,ref:function(t){u.current[e.index]=t}},e.index)}))})}var mr=n(222),gr=n.n(mr),vr=n(161),yr=n.n(vr),wr=n(162),Cr=n.n(wr),kr=n(224),Sr=n.n(kr),Lr=n(223),Nr=n.n(Lr),Er=n(383),Tr=n(395),Rr=n(394),Ir=n(439),Fr=n(405),Dr=n(438);function Pr(e){var t=e.staticNav,n=e.loadNextOnEnding,a=e.readerType,r=e.showPageNumber,c=e.setSettingValue;return Object(m.jsx)(m.Fragment,{children:Object(m.jsxs)(et.a,{children:[Object(m.jsxs)(Ee.a,{children:[Object(m.jsx)(tt.a,{primary:"Static Navigation"}),Object(m.jsx)(nt.a,{children:Object(m.jsx)(Ze.a,{edge:"end",checked:t,onChange:function(e){return c("staticNav",e.target.checked)}})})]}),Object(m.jsxs)(Ee.a,{children:[Object(m.jsx)(tt.a,{primary:"Show page number"}),Object(m.jsx)(nt.a,{children:Object(m.jsx)(Ze.a,{edge:"end",checked:r,onChange:function(e){return c("showPageNumber",e.target.checked)}})})]}),Object(m.jsxs)(Ee.a,{children:[Object(m.jsx)(tt.a,{primary:"Load next chapter at ending"}),Object(m.jsx)(nt.a,{children:Object(m.jsx)(Ze.a,{edge:"end",checked:n,onChange:function(e){return c("loadNextOnEnding",e.target.checked)}})})]}),Object(m.jsxs)(Ee.a,{children:[Object(m.jsx)(tt.a,{primary:"Reader Type"}),Object(m.jsxs)(Fr.a,{variant:"standard",value:a,onChange:function(e){return c("readerType",e.target.value)},sx:{p:0},children:[Object(m.jsx)(ka.a,{value:"SingleLTR",children:"Single Page (LTR)"}),Object(m.jsx)(ka.a,{value:"SingleRTL",children:"Single Page (RTL)"}),Object(m.jsx)(ka.a,{value:"DoubleLTR",children:"Double Page (LTR)"}),Object(m.jsx)(ka.a,{value:"DoubleRTL",children:"Double Page (RTL)"}),Object(m.jsx)(ka.a,{value:"Webtoon",children:"Webtoon"}),Object(m.jsx)(ka.a,{value:"ContinuesVertical",children:"Continues Vertical"}),Object(m.jsx)(ka.a,{value:"ContinuesHorizontalLTR",children:"Horizontal (LTR)"}),Object(m.jsx)(ka.a,{value:"ContinuesHorizontalRTL",children:"Horizontal (RTL)"})]})]})]})})}var Br=Object(Ie.a)("div")((function(e){var t=e.theme;return{top:0,left:0,width:"300px",minWidth:"300px",height:"100vh",overflowY:"auto",backgroundColor:t.palette.background.default,"& header":{backgroundColor:t.palette.action.hover,display:"flex",alignItems:"center",minHeight:"64px",paddingLeft:"24px",paddingRight:"24px",transition:"left 2s ease","& button":{flexGrow:0,flexShrink:0},"& button:nth-child(1)":{marginRight:"16px"},"& h1":{fontSize:"1.25rem",flexGrow:1}}}})),zr=Object(Ie.a)("div")({margin:"0 16px","& > span:nth-child(1)":{textAlign:"center",display:"block",marginTop:"16px"}}),Ar=Object(Ie.a)("div")({display:"flex",flexWrap:"wrap",alignContent:"center",alignItems:"center",justifyContent:"center"}),Mr=Object(Ie.a)("div")({display:"grid",gridTemplateRows:"auto auto auto",gridTemplateColumns:"0fr 1fr 0fr",gridTemplateAreas:'"pre current next"',gridColumnGap:"5px",margin:"10px 0","& a":{textDecoration:"none",color:"inherit",display:"flex",flexWrap:"wrap",alignContent:"center"}}),Wr={PaperProps:{style:{maxHeight:150}}},Vr=Object(Ie.a)($.a)((function(e){var t=e.theme;return{position:"fixed",top:20,left:30,height:"40px",width:"40px",borderRadius:5,backgroundColor:t.palette.custom.main,"&:hover":{backgroundColor:t.palette.custom.light}}}));function Hr(e){var t,n=Object(L.g)(),a=Ne(),c=null!==(t=Object(L.h)().state)&&void 0!==t?t:{},i=c.prevDrawerOpen,o=c.prevSettingsCollapseOpen,s=e.settings,l=e.setSettingValue,d=e.manga,j=e.chapter,b=e.curPage,h=e.scrollToPage,f=Object(r.useState)(s.staticNav||i),p=Object(u.a)(f,2),O=p[0],x=p[1],g=Object(r.useState)(!0),v=Object(u.a)(g,2),y=v[0],w=v[1],C=Object(r.useState)(s.staticNav||i),k=Object(u.a)(C,2),S=k[0],N=k[1],E=Object(r.useState)(0),T=Object(u.a)(E,2),R=T[0],I=T[1],F=Object(r.useState)(null===o||void 0===o||o),D=Object(u.a)(F,2),P=D[0],B=D[1],z=function(e){x(e),N(e)},A=function(){var e=window.pageYOffset;Math.abs(e-R)>20&&(N(e>R),I(e))};Object(r.useEffect)((function(){y&&z(s.staticNav)}),[s.staticNav]),Object(r.useEffect)((function(){window.addEventListener("scroll",A);var e=document.querySelector("#root"),t=document.querySelector("#appMainContainer");return e.style.display="flex",t.style.display="none",function(){e.style.display="block",t.style.display="block",window.removeEventListener("scroll",A)}}),[A]);return Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)(Lt.a,{direction:"right",in:O,timeout:200,appear:!1,mountOnEnter:!0,unmountOnExit:!0,children:Object(m.jsxs)(Br,{sx:{position:"fixed"},children:[Object(m.jsxs)("header",{children:[!s.staticNav&&Object(m.jsx)($.a,{edge:"start",color:"inherit","aria-label":"menu",disableRipple:!0,onClick:function(){return z(!1)},size:"large",children:Object(m.jsx)(yr.a,{})}),Object(m.jsx)(Q.a,{variant:"h1",textOverflow:"ellipsis",overflow:"hidden",sx:{py:1},children:j.name}),Object(m.jsx)($.a,{edge:"start",color:"inherit","aria-label":"menu",disableRipple:!0,onClick:function(){a.back?n.goBack():a.url?n.push(a.url):n.push("/manga/".concat(d.id))},size:"large",sx:{mr:-1},children:Object(m.jsx)(gr.a,{})})]}),Object(m.jsxs)(Ee.a,{ContainerComponent:"div",sx:{"& span":{fontWeight:"bold"}},children:[Object(m.jsx)(tt.a,{primary:"Reader Settings"}),Object(m.jsx)(nt.a,{children:Object(m.jsxs)($.a,{edge:"start",color:"inherit","aria-label":"menu",disableRipple:!0,disableFocusRipple:!0,onClick:function(){return B(!P)},size:"large",children:[P&&Object(m.jsx)(Nr.a,{}),!P&&Object(m.jsx)(Sr.a,{})]})})]}),Object(m.jsx)(Dr.a,{in:P,timeout:"auto",unmountOnExit:!0,children:Object(m.jsx)(Pr,{setSettingValue:function(e,t){w("staticNav"!==e),l(e,t)},staticNav:s.staticNav,showPageNumber:s.showPageNumber,loadNextOnEnding:s.loadNextOnEnding,readerType:s.readerType})}),Object(m.jsx)(Rr.a,{sx:{my:1,mx:2}}),Object(m.jsxs)(zr,{children:[Object(m.jsxs)(Ar,{children:[Object(m.jsx)("span",{children:"Currently on page"}),Object(m.jsx)(Ir.a,{size:"small",sx:{margin:"0 5px"},disabled:-1===j.pageCount,children:Object(m.jsx)(Fr.a,{MenuProps:Wr,value:j.pageCount>-1?b:"",displayEmpty:!0,onChange:function(e){var t=e.target.value;h(Number(t))},children:Array(Math.max(0,j.pageCount)).fill(1).map((function(e,t){return Object(m.jsx)(ka.a,{value:t,children:t+1},"Page#".concat(t))}))})}),Object(m.jsx)("span",{children:"of ".concat(j.pageCount)})]}),Object(m.jsxs)(Mr,{children:[Object(m.jsx)($.a,{title:"Previous Chapter",sx:{gridArea:"pre"},disabled:j.index<=1,onClick:function(){n.replace({pathname:"/manga/".concat(d.id,"/chapter/").concat(j.index-1),state:{prevDrawerOpen:O,prevSettingsCollapseOpen:P}})},children:Object(m.jsx)(yr.a,{})}),Object(m.jsx)(Ir.a,{sx:{gridArea:"current"},size:"small",disabled:j.index<1,children:Object(m.jsx)(Fr.a,{MenuProps:Wr,value:j.index>=1?j.index:"",displayEmpty:!0,onChange:function(e){var t=e.target.value;n.replace({pathname:"/manga/".concat(d.id,"/chapter/").concat(t),state:{prevDrawerOpen:O,prevSettingsCollapseOpen:P}})},children:Array(Math.max(0,j.chapterCount)).fill(1).map((function(e,t){return Object(m.jsx)(ka.a,{value:t+1,children:"Chapter ".concat(t+1)},"Chapter#".concat(t+1))}))})}),Object(m.jsx)($.a,{title:"Next Chapter",sx:{gridArea:"next"},disabled:j.index<1||j.index>=j.chapterCount,onClick:function(){n.replace({pathname:"/manga/".concat(d.id,"/chapter/").concat(j.index+1),state:{prevDrawerOpen:O,prevSettingsCollapseOpen:P}})},children:Object(m.jsx)(Cr.a,{})})]})]})]})}),Object(m.jsx)(Tr.a,{in:!O,children:Object(m.jsx)(Er.a,{in:!S,children:Object(m.jsx)(Vr,{edge:"start","aria-label":"menu",disableRipple:!0,disableFocusRipple:!0,onClick:function(){return z(!0)},size:"large",children:Object(m.jsx)(Cr.a,{})})})})]})}var Ur="webUI_",_r=[{keys:[{oldKey:"loadNextonEnding",newKey:"loadNextOnEnding"}]}],Jr=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Ur;return"".concat(t).concat(e)},Yr=function(e,t,n){return Object.prototype.hasOwnProperty.call(null!==e&&void 0!==e?e:{},Jr(t,n))},Xr=function(e){return Number.isNaN(+e)?"true"===e||"false"===e?"true"===e:"undefined"!==e?e:void 0:+e},qr=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Ur,n={};return Object.entries(e).forEach((function(e){var a=Object(u.a)(e,2),r=a[0],c=a[1];r.startsWith(t)&&(n[r]=c)})),n},Kr=function(e){if(e){var t=[[0,e]];return _r.forEach((function(e,n){var a=n+1,r=function(e,t){var n=Object(D.a)({},e);return t.keys?(t.keys.forEach((function(t){var a=t.oldKey,r=t.newKey;Yr(e,a)&&(Yr(e,r)||(n[Jr(r)]=e[Jr(a)]))})),n):n}(function(e,t){var n=Object(D.a)({},e);if(!t.appKeyPrefix)return n;var a=t.appKeyPrefix,r=a.oldPrefix,c=a.newPrefix,i=qr(e,r),o=qr(e,c),s=Object.keys(i).filter((function(e){return!Object.keys(o).includes(e)}));return s.length&&s.forEach((function(e){var t=e.replace(r,c);n[t]=i[e]})),n}(t[a-1][1],e),e);t.push([a,r])})),t.length>1?t.pop()[1]:Object(D.a)({},e)}},Gr=function(e,t,n){var a=e.meta,r={};return t.forEach((function(e){var t=Object(u.a)(e,2),c=t[0],i=t[1];r[c]=function(e,t,n){var a=e.meta,r=arguments.length>3&&void 0!==arguments[3]&&!arguments[3]?a:Kr(a);return void 0!==r&&Yr(r,t)?Xr(r[Jr(t)]):n}({meta:a},c,i,n)})),r},Zr=function(e,t){return e?{meta:Object(D.a)({},t)}:Object(D.a)({},t)},Qr=function(){var e=Object(P.a)(F.a.mark((function e(t,n,a,r){var c,i,o,s,l,u,d,j,b,h=arguments;return F.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=h.length>4&&void 0!==h[4]?h[4]:t,i=!(h.length>5&&void 0!==h[5])||h[5],s="".concat(o="/api/v1").concat(t,"/meta"),l="".concat(o).concat(c),u=Jr(a),d="".concat(r),(j=new FormData).append("key",u),j.append("value",d),b=Object(D.a)(Object(D.a)({},n.meta),{},Object(st.a)({},u,d)),e.next=13,_.patch(s,j);case 13:return e.next=15,Object(N.c)(l,Object(D.a)(Object(D.a)({},n),Zr(i,b)),{revalidate:!1});case 15:case"end":return e.stop()}}),e)})));return function(t,n,a,r){return e.apply(this,arguments)}}(),$r=function(){var e=Object(P.a)(F.a.mark((function e(t,n,a,r,c){return F.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Promise.all(a.map((function(e){var a=Object(u.a)(e,2),i=a[0],o=a[1];return Qr(t,n,i,o,r,c)}))));case 1:case"end":return e.stop()}}),e)})));return function(t,n,a,r,c){return e.apply(this,arguments)}}(),ec=function(){var e=Object(P.a)(F.a.mark((function e(t,n){return F.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",$r("",{meta:t},n,"/meta",!1));case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),tc=function(){var e=Object(P.a)(F.a.mark((function e(t,n){return F.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",$r("/manga/".concat(t.id),t,n));case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),nc=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return{staticNav:!!e&&void 0,showPageNumber:!e||void 0,continuesPageGap:!!e&&void 0,loadNextOnEnding:!!e&&void 0,readerType:e?void 0:"ContinuesVertical"}},ac=function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return Object(D.a)({},Gr({meta:e},Object.entries(null!==t&&void 0!==t?t:nc()),n))},rc=function(e,t,n){return function(e,t,n){return Object(D.a)({},ac(e,t,n))}(e.meta,t,n)},cc=function(){var e=X("/api/v1/meta"),t=e.data,n=e.loading;return{metadata:t,settings:ac(t),loading:n}},ic=function(){var e=Object(P.a)(F.a.mark((function e(t,n,a){var r,c,i,o,s,l;return F.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(c=null!==(r=t.meta)&&void 0!==r?r:t,i=rc({meta:c},nc(!0),!1),o=rc({meta:c},a),s=Object.entries(i).filter((function(e){return void 0===e[1]})),l=[],s.forEach((function(e){var t=e[0];l.push([t,o[t]])})),s.length){e.next=8;break}return e.abrupt("return");case 8:if("manga"!==n){e.next=12;break}return e.next=11,tc(t,l);case 11:return e.abrupt("return");case 12:return e.next=14,ec(c,l);case 14:case"end":return e.stop()}}),e)})));return function(t,n,a){return e.apply(this,arguments)}}(),oc=function(){return{pageCount:-1,index:-1,chapterCount:0,lastPageRead:0,name:"Loading..."}};function sc(){var e=Object(L.g)(),t=x("serverBaseURL",""),n=Object(u.a)(t,1)[0],a=Object(L.i)(),c=a.chapterIndex,i=a.mangaId,o=Object(r.useState)({id:+i,title:"",thumbnailUrl:""}),s=Object(u.a)(o,2),l=s[0],d=s[1],j=Object(r.useState)({pageCount:-1,index:-1,chapterCount:0,lastPageRead:0,name:"Loading..."}),b=Object(u.a)(j,2),h=b[0],f=b[1],p=Object(r.useState)(0),O=Object(u.a)(p,2),g=O[0],v=O[1],w=Object(r.useState)(void 0),C=Object(u.a)(w,2),k=C[0],S=C[1],N=Object(r.useContext)(y),E=N.setOverride,T=N.setTitle,R=cc(),I=R.settings,F=R.loading,P=Object(r.useState)(rc(l,I)),B=Object(u.a)(P,2),z=B[0],A=B[1],M=Object(r.useState)(!0),W=Object(u.a)(M,2),V=W[0],H=W[1],U=function(e,t){A(Object(D.a)(Object(D.a)({},z),{},Object(st.a)({},e,t))),tc(l,[[e,t]]).catch((function(){return It("Failed to save the reader settings to the server","warning")}))};Object(r.useEffect)((function(){(null===l||void 0===l?void 0:l.title)&&"Loading..."!==(null===h||void 0===h?void 0:h.name)?T("".concat(l.title,": ").concat(h.name)):T("Reader - Manga ".concat(i," Chapter ").concat(c))}),[l,h]),Object(r.useEffect)((function(){F||V||(ic(l,"manga",I).catch((function(){})),A(rc(l,I)))}),[F,V]),Object(r.useEffect)((function(){return E({status:!0,value:Object(m.jsx)(Hr,{settings:z,setSettingValue:U,manga:l,chapter:h,curPage:g,scrollToPage:S})}),function(){return E({status:!1,value:Object(m.jsx)("div",{})})}}),[l,h,z,g,c]),Object(r.useEffect)((function(){H(!0),_.get("/api/v1/manga/".concat(i,"/")).then((function(e){return e.data})).then((function(e){d(e),H(!1)}))}),[i]),Object(r.useEffect)((function(){f(oc),_.get("/api/v1/manga/".concat(i,"/chapter/").concat(c)).then((function(e){return e.data})).then((function(e){f(e),e.lastPageRead===e.pageCount-1?v(0):v(e.lastPageRead)}))}),[c]),Object(r.useEffect)((function(){if(-1!==g){var e=new FormData;e.append("lastPageRead",g.toString()),_.patch("/api/v1/manga/".concat(l.id,"/chapter/").concat(h.index),e)}if(g===h.pageCount-1){var t=new FormData;t.append("read","true"),_.patch("/api/v1/manga/".concat(l.id,"/chapter/").concat(h.index),t)}}),[g]);var J=Object(r.useCallback)((function(){if(h.index<h.chapterCount){var t=new FormData;t.append("lastPageRead","".concat(h.pageCount-1)),t.append("read","true"),_.patch("/api/v1/manga/".concat(l.id,"/chapter/").concat(h.index),t),e.replace({pathname:"/manga/".concat(l.id,"/chapter/").concat(h.index+1),state:e.location.state})}}),[h.index,h.chapterCount,h.pageCount,l.id]),Y=Object(r.useCallback)((function(){h.index>1&&e.replace({pathname:"/manga/".concat(l.id,"/chapter/").concat(h.index-1),state:e.location.state})}),[h.index,l.id]);if(-1===h.pageCount)return Object(m.jsx)(Se.a,{sx:{height:"100vh",width:"100vw",display:"grid",placeItems:"center"},children:Object(m.jsx)(pt.a,{thickness:5})});var X,q=(X=h.pageCount,Array.from({length:X},(function(e,t){return t}))).map((function(e){return{index:e,src:"".concat(n,"/api/v1/manga/").concat(i,"/chapter/").concat(c,"/page/").concat(e)}})),K=function(e){switch(e){case"ContinuesVertical":case"Webtoon":return xr;case"SingleVertical":case"SingleRTL":case"SingleLTR":return br;case"DoubleVertical":case"DoubleRTL":case"DoubleLTR":return pr;case"ContinuesHorizontalLTR":case"ContinuesHorizontalRTL":return dr;default:return xr}}(z.readerType),G=null!==k&&void 0!==k?k:h.lastPageRead===h.pageCount-1?0:h.lastPageRead;return Object(m.jsxs)(Se.a,{sx:{width:z.staticNav?"calc(100vw - 300px)":"100vw",marginLeft:z.staticNav?"300px":"unset"},children:[Object(m.jsx)(jr,{settings:z,curPage:g,pageCount:h.pageCount}),Object(m.jsx)(K,{pages:q,pageCount:h.pageCount,setCurPage:v,initialPage:G,curPage:g,settings:z,manga:l,chapter:h,nextChapter:J,prevChapter:Y})]})}var lc=n(234);function uc(e){var t=[];return e.forEach((function(e){-1===t.indexOf(e.lang)&&t.push(e.lang)})),t.sort(ct),t}var dc=function(){var e=Object(R.d)("query",R.c),t=Object(u.a)(e,1)[0],n=Object(r.useContext)(y),a=n.setTitle,c=n.setAction,i=Object(r.useState)(2),o=Object(u.a)(i,2),s=o[0],l=o[1],d=Object(r.useState)({}),j=Object(u.a)(d,2),b=j[0],h=j[1],f=x("shownSourceLangs",["en","localsourcelang"]),p=Object(u.a)(f,2),O=p[0],g=p[1],v=x("showNsfw",!0),w=Object(u.a)(v,1)[0],C=Object(r.useState)([]),k=Object(u.a)(C,2),L=k[0],N=k[1],E=Object(r.useState)({}),T=Object(u.a)(E,2),I=T[0],D=T[1],B=Object(r.useState)({}),z=Object(u.a)(B,2),A=z[0],M=z[1],W=Object(r.useState)(1),V=Object(u.a)(W,2),H=V[0],U=V[1],J=Object(r.useState)(0),Y=Object(u.a)(J,2),X=Y[0],q=Y[1],K=new lc.a({concurrency:5});function G(){return(G=Object(P.a)(F.a.mark((function e(n){return F.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n.map((function(e){return K.add(Object(P.a)(F.a.mark((function n(){var a,r,c,i;return F.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,_.get("/api/v1/source/".concat(e.id,"/search?searchTerm=").concat(t||"","&pageNum=1"));case 2:return a=n.sent,n.next=5,a.data;case 5:r=n.sent,(c=b)[e.id]=r.mangaList,h(c),(i=I)[e.id]=!0,D(i),q(1);case 13:case"end":return n.stop()}}),n)}))))}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(r.useEffect)((function(){a("Global Search"),c(Object(m.jsx)(m.Fragment,{children:Object(m.jsx)(Mt,{})}))}),[]),Object(r.useEffect)((function(){_.get("/api/v1/source/list").then((function(e){return e.data})).then((function(e){N(e.sort((function(e,t){return e.displayName<t.displayName?-1:e.displayName>t.displayName?1:0}))),M(!0)}))}),[]),Object(r.useEffect)((function(){2!==s&&(0!==s?(D({}),h({}),function(e){G.apply(this,arguments)}(L.filter((function(e){var t=e.lang;return-1!==O.indexOf(t)})).filter((function(e){return w||!e.isNsfw})))):l(1))}),[s]),Object(r.useEffect)((function(){1===X&&q(0)}),[X]),Object(r.useEffect)((function(){if(t&&A){var e=setTimeout((function(){l(0)}),1e3);return function(){return clearTimeout(e)}}return function(){}}),[t,O,L]),Object(r.useEffect)((function(){["localsourcelang"].forEach((function(e){var t=!1;O.forEach((function(n){n===e&&(t=!0)})),t||g((function(t){return t.push(e),t}))}))}),[]),Object(r.useEffect)((function(){a("Sources"),c(Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)(Mt,{autoOpen:!0}),Object(m.jsx)(ot,{shownLangs:O,setShownLangs:g,allLangs:uc(L),forcedLangs:["localsourcelang"]})]}))}),[O,L]),t?Object(m.jsx)(m.Fragment,{children:L.filter((function(e){var t=e.lang;return-1!==O.indexOf(t)})).filter((function(e){return w||!e.isNsfw})).sort((function(e,t){var n=I[e.id],a=I[t.id];if(n&&!a)return-1;if(!n&&a)return 1;if(!n&&!a)return 0;var r=0===b[e.id].length,c=0===b[t.id].length;return r&&!c?1:c&&!r?-1:0})).map((function(e){var n=e.lang,a=e.id,r=e.displayName;return Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)(dt.a,{sx:{margin:"10px"},children:Object(m.jsxs)(lt.a,{component:S.b,to:"/sources/".concat(a,"/popular/?R&query=").concat(t),sx:{p:3},children:[Object(m.jsx)(Q.a,{variant:"h5",children:r}),Object(m.jsx)(Q.a,{variant:"caption",children:rt(n)})]})}),Object(m.jsx)(Xn,{mangas:b[a]||[],isLoading:!I[a],hasNextPage:!1,lastPageNum:H,setLastPageNum:U,horizontal:!0,noFaces:!0,message:I[a]?"No manga was found!":void 0,inLibraryIndicator:!0})]})}))}):Object(m.jsx)(m.Fragment,{})},jc=n(227),bc=n.n(jc),hc=n(226),fc=n.n(hc),pc=n(228),Oc=n.n(pc),xc=n(229),mc=n.n(xc),gc=n(231),vc=n.n(gc),yc=n(135),wc=n.n(yc),Cc=n(232),kc=n.n(Cc),Sc=n(230),Lc=n.n(Sc),Nc=n(440),Ec=n(410),Tc=n(409),Rc=n(396),Ic=n(134),Fc=n.n(Ic);function Dc(e){var t=e.directLink,n=e.to;return t?Object(m.jsx)(Ee.a,Object(D.a)({button:!0,component:"a",href:n},e)):Object(m.jsx)(Ee.a,Object(D.a)({button:!0,component:S.b},e))}function Pc(){var e=Object(r.useContext)(y),t=e.setTitle,n=e.setAction;Object(r.useEffect)((function(){t("Settings"),n(Object(m.jsx)(m.Fragment,{}))}),[]);var a=Object(r.useContext)(q),c=a.darkTheme,i=a.setDarkTheme,o=x("serverBaseURL",""),s=Object(u.a)(o,2),l=s[0],d=s[1],j=x("showNsfw",!0),b=Object(u.a)(j,2),h=b[0],f=b[1],p=x("useCache",!0),O=Object(u.a)(p,2),g=O[0],v=O[1],w=Object(r.useState)(!1),C=Object(u.a)(w,2),k=C[0],S=C[1],L=Object(r.useState)(l),N=Object(u.a)(L,2),E=N[0],T=N[1],R=Object(r.useState)(!1),I=Object(u.a)(R,2),F=I[0],D=I[1],P=x("ItemWidth",300),B=Object(u.a)(P,2),z=B[0],A=B[1],M=Object(r.useState)(z),W=Object(u.a)(M,2),V=W[0],H=W[1],U=function(){S(!1)},_=function(){D(!1)};return Object(m.jsxs)(m.Fragment,{children:[Object(m.jsxs)(et.a,{sx:{padding:0},children:[Object(m.jsxs)(Dc,{to:"/settings/categories",children:[Object(m.jsx)(Te.a,{children:Object(m.jsx)(fc.a,{})}),Object(m.jsx)(tt.a,{primary:"Categories"})]}),Object(m.jsxs)(Dc,{to:"/settings/defaultReaderSettings",children:[Object(m.jsx)(Te.a,{children:Object(m.jsx)(bc.a,{})}),Object(m.jsx)(tt.a,{primary:"Default Reader Settings"})]}),Object(m.jsxs)(Dc,{to:"/settings/backup",children:[Object(m.jsx)(Te.a,{children:Object(m.jsx)(Oc.a,{})}),Object(m.jsx)(tt.a,{primary:"Backup"})]}),Object(m.jsxs)(Ee.a,{children:[Object(m.jsx)(Te.a,{children:Object(m.jsx)(mc.a,{})}),Object(m.jsx)(tt.a,{primary:"Dark Theme"}),Object(m.jsx)(nt.a,{children:Object(m.jsx)(Ze.a,{edge:"end",checked:c,onChange:function(){return i(!c)}})})]}),Object(m.jsxs)(Rc.a,{children:[Object(m.jsx)(Te.a,{children:Object(m.jsx)(Fc.a,{})}),Object(m.jsx)(tt.a,{primary:"Manga Item width",secondary:"px:".concat(z),onClick:function(){H(z),D(!0)}})]}),Object(m.jsxs)(Ee.a,{children:[Object(m.jsx)(Te.a,{children:Object(m.jsx)(Ga.a,{})}),Object(m.jsx)(tt.a,{primary:"Show NSFW",secondary:"Hide NSFW extensions and sources"}),Object(m.jsx)(nt.a,{children:Object(m.jsx)(Ze.a,{edge:"end",checked:h,onChange:function(){return f(!h)}})})]}),Object(m.jsxs)(Ee.a,{children:[Object(m.jsx)(Te.a,{children:Object(m.jsx)(Lc.a,{})}),Object(m.jsx)(tt.a,{primary:"Use image cache",secondary:"Disabling image cache makes images load faster if you have a slow disk, but uses it much more internet traffic in turn"}),Object(m.jsx)(nt.a,{children:Object(m.jsx)(Ze.a,{edge:"end",checked:g,onChange:function(){return v(!g)}})})]}),Object(m.jsxs)(Ee.a,{children:[Object(m.jsx)(Te.a,{children:Object(m.jsx)(vc.a,{})}),Object(m.jsx)(tt.a,{primary:"Server Address",secondary:l}),Object(m.jsx)(nt.a,{children:Object(m.jsx)($.a,{onClick:function(){T(l),S(!0)},size:"large",children:Object(m.jsx)(wc.a,{})})})]}),Object(m.jsxs)(Dc,{to:"/settings/about",children:[Object(m.jsx)(Te.a,{children:Object(m.jsx)(kc.a,{})}),Object(m.jsx)(tt.a,{primary:"About"})]})]}),Object(m.jsxs)(Ge.a,{open:k,onClose:U,children:[Object(m.jsxs)(qe.a,{children:[Object(m.jsx)(Nc.a,{children:"Enter Server Address"}),Object(m.jsx)(Ec.a,{autoFocus:!0,margin:"dense",id:"name",label:"Server Address",type:"text",fullWidth:!0,value:E,placeholder:"http://127.0.0.1:4567",onChange:function(e){return T(e.target.value)}})]}),Object(m.jsxs)(Ke.a,{children:[Object(m.jsx)(Ye.a,{onClick:U,color:"primary",children:"Cancel"}),Object(m.jsx)(Ye.a,{onClick:function(){S(!1),d(E)},color:"primary",children:"Set"})]})]}),Object(m.jsxs)(Ge.a,{open:F,onClose:_,children:[Object(m.jsx)(Xe.a,{children:"Manga Item width"}),Object(m.jsxs)(qe.a,{sx:{width:"98%",margin:"auto"},children:[Object(m.jsx)(Ec.a,{sx:{width:"100%",margin:"auto"},autoFocus:!0,value:V,type:"number",onChange:function(e){return H(parseInt(e.target.value,10))}}),Object(m.jsx)(Tc.a,{"aria-label":"Manga Item width",defaultValue:300,value:V,step:10,min:100,max:1e3,onChange:function(e,t){H(t)}})]}),Object(m.jsxs)(Ke.a,{children:[Object(m.jsx)(Ye.a,{onClick:function(){D(!1),A(300)},color:"primary",children:"Reset to Default"}),Object(m.jsx)(Ye.a,{onClick:_,color:"primary",children:"Cancel"}),Object(m.jsx)(Ye.a,{onClick:function(){D(!1),A(V)},color:"primary",children:"OK"})]})]})]})}function Bc(){var e=Object(r.useContext)(y),t=e.setTitle,n=e.setAction;Object(r.useEffect)((function(){t("About"),n(Object(m.jsx)(m.Fragment,{}))}),[]);var a=X("/api/v1/settings/about").data;if(void 0===a)return Object(m.jsx)(Ot,{});return Object(m.jsxs)(et.a,{children:[Object(m.jsx)(Ee.a,{children:Object(m.jsx)(tt.a,{primary:"Server",secondary:"".concat(a.name," ").concat(a.buildType)})}),Object(m.jsx)(Ee.a,{children:Object(m.jsx)(tt.a,{primary:"Server version",secondary:"Stable"===a.buildType?"".concat(a.version):"".concat(a.version,"-").concat(a.revision)})}),Object(m.jsx)(Ee.a,{children:Object(m.jsx)(tt.a,{primary:"Build time",secondary:new Date(1e3*a.buildTime).toUTCString()})}),Object(m.jsx)(Dc,{to:a.github,children:Object(m.jsx)(tt.a,{primary:"Github",secondary:a.github})}),Object(m.jsx)(Dc,{to:a.discord,children:Object(m.jsx)(tt.a,{primary:"Discord",secondary:a.discord})})]})}function zc(){var e=Object(r.useContext)(y),t=e.setTitle,n=e.setAction;Object(r.useEffect)((function(){t("Backup"),n(Object(m.jsx)(m.Fragment,{}))}),[]);var a=_.defaults.baseURL,c=function(e){if(e.name.toLowerCase().endsWith("proto.gz")){var t=new FormData;t.append("backup.proto.gz",e),It("Restoring backup....","info"),_.post("/api/v1/backup/import/file",t,{headers:{"Content-Type":"multipart/form-data"}}).then((function(){return It("Backup restore finished!","success")})).catch((function(){return It("Backup restore failed!","error")}))}else e.name.toLowerCase().endsWith("json")?It("legacy backups are not supported!","error"):It("invalid file type!","error")},i=function(){var e=Object(P.a)(F.a.mark((function e(t){var n;return F.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.next=3,Object(wt.a)(t);case 3:n=e.sent,c(n[0]);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),o=function(e){e.preventDefault()};return Object(r.useEffect)((function(){document.addEventListener("drop",i),document.addEventListener("dragover",o);var e=document.getElementById("backup-file");return null===e||void 0===e||e.addEventListener("change",function(){var e=Object(P.a)(F.a.mark((function e(t){var n;return F.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(wt.a)(t);case 2:n=e.sent,c(n[0]);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),function(){document.removeEventListener("drop",i),document.removeEventListener("dragover",o)}}),[]),Object(m.jsxs)(m.Fragment,{children:[Object(m.jsxs)(et.a,{sx:{padding:0},children:[Object(m.jsx)(Dc,{to:"".concat(a,"/api/v1/backup/export/file"),directLink:!0,children:Object(m.jsx)(tt.a,{primary:"Create Backup",secondary:"Backup library as a Tachiyomi backup"})}),Object(m.jsx)(Ee.a,{button:!0,onClick:function(){var e;return null===(e=document.getElementById("backup-file"))||void 0===e?void 0:e.click()},children:Object(m.jsx)(tt.a,{primary:"Restore Backup",secondary:"You can also drag and drop the backup file here to restore"})})]}),Object(m.jsx)("input",{type:"file",id:"backup-file",style:{display:"none"}})]})}function Ac(){var e=Object(r.useContext)(y),t=e.setTitle,n=e.setAction;Object(r.useEffect)((function(){t("Categories"),n(Object(m.jsx)(m.Fragment,{}))}),[]);var a=X("/api/v1/category/"),c=a.data,i=a.mutate,o=Object(r.useMemo)((function(){var e=Object(Je.a)(null!==c&&void 0!==c?c:[]);return e.length>0&&"Default"===e[0].name&&e.shift(),e}),[c]),s=Object(r.useState)(-1),l=Object(u.a)(s,2),d=l[0],j=l[1],b=Object(r.useState)(!1),h=Object(u.a)(b,2),f=h[0],p=h[1],O=Object(r.useState)(""),x=Object(u.a)(O,2),g=x[0],v=x[1],w=Object(r.useState)(!1),C=Object(u.a)(w,2),k=C[0],S=C[1],L=Object(te.a)(),N=function(){p(!1)};return Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)(tn.a,{onDragEnd:function(e){e.destination&&function(e,t,n){var a=Object(Je.a)(e),r=a.splice(t,1),c=Object(u.a)(r,1)[0];a.splice(n,0,c),i(a,{revalidate:!1});var o=new FormData;o.append("from","".concat(t+1)),o.append("to","".concat(n+1)),_.patch("/api/v1/category/reorder",o).finally((function(){return i()}))}(o,e.source.index,e.destination.index)},children:Object(m.jsx)(tn.c,{droppableId:"droppable",children:function(e){return Object(m.jsxs)(et.a,{ref:e.innerRef,children:[o.map((function(e,t){return Object(m.jsx)(tn.b,{draggableId:e.id.toString(),index:t,children:function(n,a){return Object(m.jsxs)(Ee.a,Object(D.a)(Object(D.a)(Object(D.a)({ContainerProps:{ref:n.innerRef}},n.draggableProps),n.dragHandleProps),{},{style:(r=a.isDragging,c=n.draggableProps.style,s=L.palette,Object(D.a)(Object(D.a)({},c),r&&{background:"dark"===s.mode?"#424242":"rgb(235,235,235)"})),ref:n.innerRef,children:[Object(m.jsx)(Te.a,{children:Object(m.jsx)(Xt.a,{})}),Object(m.jsx)(tt.a,{primary:e.name}),Object(m.jsx)($.a,{onClick:function(){!function(e){v(o[e].name),S(o[e].default),j(e),p(!0)}(t)},size:"large",children:Object(m.jsx)(wc.a,{})}),Object(m.jsx)($.a,{onClick:function(){!function(e){var t=o[e];_.delete("/api/v1/category/".concat(t.id)).finally((function(){return i()}))}(t)},size:"large",children:Object(m.jsx)(Jt.a,{})})]}));var r,c,s}},e.id)})),e.placeholder]})}})}),Object(m.jsx)(Ea.a,{color:"primary","aria-label":"add",style:{position:"absolute",bottom:L.spacing(2),right:L.spacing(2)},onClick:function(){v(""),S(!1),j(-1),p(!0)},children:Object(m.jsx)(kt.a,{})}),Object(m.jsxs)(Ge.a,{open:f,onClose:N,children:[Object(m.jsx)(Xe.a,{id:"form-dialog-title",children:-1===d?"New Catalog":"Edit Catalog"}),Object(m.jsxs)(qe.a,{children:[Object(m.jsx)(Ec.a,{autoFocus:!0,margin:"dense",id:"name",label:"Category Name",type:"text",fullWidth:!0,value:g,onChange:function(e){return v(e.target.value)}}),Object(m.jsx)(dn.a,{control:Object(m.jsx)(jn.a,{checked:k,onChange:function(e){return S(e.target.checked)},color:"default"}),label:"Default category when adding new manga to library"})]}),Object(m.jsxs)(Ke.a,{children:[Object(m.jsx)(Ye.a,{onClick:N,color:"primary",children:"Cancel"}),Object(m.jsx)(Ye.a,{onClick:function(){p(!1);var e=new FormData;if(e.append("name",g),e.append("default",k.toString()),-1===d)_.post("/api/v1/category/",e).finally((function(){return i()}));else{var t=o[d];_.patch("/api/v1/category/".concat(t.id),e).finally((function(){return i()}))}},color:"primary",children:"Submit"})]})]})]})}function Mc(){var e=Object(r.useContext)(y),t=e.setTitle,n=e.setAction;Object(r.useEffect)((function(){t("Default Reader Settings"),n(Object(m.jsx)(m.Fragment,{}))}),[]);var a=cc(),c=a.metadata,i=a.settings;return a.loading?Object(m.jsx)(Se.a,{sx:{height:"100vh",width:"100vw",display:"grid",placeItems:"center"},children:Object(m.jsx)(pt.a,{thickness:5})}):(ic({meta:c},"server",nc()).catch((function(){})),Object(m.jsx)(Pr,{setSettingValue:function(e,t){ec(null!==c&&void 0!==c?c:{},[[e,t]]).catch((function(){return It("Failed to save the default reader settings to the server","warning")}))},staticNav:i.staticNav,showPageNumber:i.showPageNumber,loadNextOnEnding:i.loadNextOnEnding,readerType:i.readerType}))}function Wc(e){return"Switch"===e?Ze.a:jn.a}function Vc(e){var t=e.title,n=e.summary,a=e.currentValue,i=e.updateValue,o=e.type,s=Object(r.useState)(a),l=Object(u.a)(s,2),d=l[0],j=l[1];return Object(r.useEffect)((function(){j(a)}),[a]),Object(m.jsxs)(Ee.a,{children:[Object(m.jsx)(tt.a,{primary:t,secondary:n}),Object(m.jsx)(nt.a,{children:c.a.createElement(Wc(o),{edge:"end",checked:d,onChange:function(){i(!a),j(!a)}})})]})}function Hc(e){return Object(m.jsx)(Vc,Object(D.a)(Object(D.a)({},e),{},{type:"Checkbox"}))}function Uc(e){return Object(m.jsx)(Vc,Object(D.a)(Object(D.a)({},e),{},{type:"Switch"}))}function _c(e){var t=e.value,n=e.open,a=e.onClose,r=e.options,i=e.title,o=c.a.useState(t),s=Object(u.a)(o,2),l=s[0],d=s[1],j=c.a.useRef(null);c.a.useEffect((function(){n||d(t)}),[t,n]);return Object(m.jsxs)(Ge.a,{sx:{"& .MuiDialog-paper":{width:"80%",maxHeight:435}},maxWidth:"xs",TransitionProps:{onEntering:function(){null!=j.current&&(null===j||void 0===j||j.current.focus())}},open:n,children:[Object(m.jsx)(Xe.a,{children:i}),Object(m.jsx)(qe.a,{dividers:!0,children:Object(m.jsx)(ln.a,{ref:j,value:l,onChange:function(e){d(e.target.value)},children:r.map((function(e){return Object(m.jsx)(dn.a,{value:e,control:Object(m.jsx)(fn.a,{}),label:e},e)}))})}),Object(m.jsxs)(Ke.a,{children:[Object(m.jsx)(Ye.a,{autoFocus:!0,onClick:function(){a(null)},children:"Cancel"}),Object(m.jsx)(Ye.a,{onClick:function(){a(l)},children:"Ok"})]})]})}function Jc(e){var t=e.title,n=e.summary,a=e.currentValue,c=e.updateValue,i=e.entryValues,o=e.entries,s=Object(r.useState)(a),l=Object(u.a)(s,2),d=l[0],j=l[1],b=Object(r.useState)(!1),h=Object(u.a)(b,2),f=h[0],p=h[1];Object(r.useEffect)((function(){j(a)}),[a]);var O=function(e){var t=i.indexOf(e);return o[t]};return Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)(Ee.a,{button:!0,onClick:function(){return p(!0)},children:Object(m.jsx)(tt.a,{primary:t,secondary:"%s"===n?O(a):n})}),Object(m.jsx)(_c,{title:t,open:f,onClose:function(e){null!==e&&(c(function(e){var t=o.indexOf(e);return i[t]}(e)),j(e)),p(!1)},value:O(d),options:o})]})}function Yc(e){var t=e.title,n=e.summary,a=e.dialogTitle,c=e.dialogMessage,i=e.currentValue,o=e.updateValue,s=Object(r.useState)(i),l=Object(u.a)(s,2),d=l[0],j=l[1],b=Object(r.useState)(!1),h=Object(u.a)(b,2),f=h[0],p=h[1],O=function(){p(!1),j(i)};return Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)(Ee.a,{button:!0,onClick:function(){return p(!0)},children:Object(m.jsx)(tt.a,{primary:t,secondary:n})}),Object(m.jsxs)(Ge.a,{open:f,onClose:O,children:[Object(m.jsx)(Xe.a,{children:a}),Object(m.jsxs)(qe.a,{children:[Object(m.jsx)(Nc.a,{children:c}),Object(m.jsx)(Ec.a,{autoFocus:!0,margin:"dense",id:"name",type:"text",fullWidth:!0,value:d,onChange:function(e){return j(e.target.value)}})]}),Object(m.jsxs)(Ke.a,{children:[Object(m.jsx)(Ye.a,{onClick:O,color:"primary",children:"Cancel"}),Object(m.jsx)(Ye.a,{onClick:function(){p(!1),o(d)},color:"primary",children:"OK"})]})]})]})}function Xc(e){var t=e.selectedValues,n=e.open,a=e.onClose,r=e.values,i=e.title,o=c.a.useState(t),s=Object(u.a)(o,2),l=s[0],d=s[1];c.a.useEffect((function(){n||d(t)}),[t,n]);return Object(m.jsxs)(Ge.a,{sx:{"& .MuiDialog-paper":{width:"80%",maxHeight:435}},maxWidth:"xs",open:n,children:[Object(m.jsx)(Xe.a,{children:i}),Object(m.jsx)(qe.a,{dividers:!0,children:Object(m.jsx)(ir.a,{children:r.map((function(e){return Object(m.jsx)(dn.a,{control:Object(m.jsx)(jn.a,{checked:l.some((function(t){return e===t})),onChange:function(t){return function(e,t){var n=e.target.checked,a=l.some((function(e){return t===e}));if(n){if(!a){var r=it(l);r.push(t),d(r)}}else if(a){var c=it(l),i=c.indexOf(t);c.splice(i,1),d(c)}}(t,e)},color:"default"}),label:e},e)}))})}),Object(m.jsxs)(Ke.a,{children:[Object(m.jsx)(Ye.a,{autoFocus:!0,onClick:function(){a(null)},children:"Cancel"}),Object(m.jsx)(Ye.a,{onClick:function(){a(l)},children:"Ok"})]})]})}function qc(e){var t=e.title,n=e.summary,a=e.currentValue,c=e.updateValue,i=e.entryValues,o=e.entries,s=Object(r.useState)(a),l=Object(u.a)(s,2),d=l[0],j=l[1],b=Object(r.useState)(!1),h=Object(u.a)(b,2),f=h[0],p=h[1];Object(r.useEffect)((function(){j(a)}),[a]);var O;return Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)(Ee.a,{button:!0,onClick:function(){return p(!0)},children:Object(m.jsx)(tt.a,{primary:t,secondary:n})}),Object(m.jsx)(Xc,{title:t,open:f,onClose:function(e){null!==e&&(c(e.map((function(e){var t=o.indexOf(e);return i[t]}))),j(e)),p(!1)},selectedValues:(O=d,O.map((function(e){var t=i.indexOf(e);return o[t]}))),values:o})]})}function Kc(){var e=Object(r.useContext)(y),t=e.setTitle,n=e.setAction;Object(r.useEffect)((function(){t("Source Configuration"),n(Object(m.jsx)(m.Fragment,{}))}),[]);var a=Object(L.i)().sourceId,i=X("/api/v1/source/".concat(a,"/preferences")),o=i.data,s=void 0===o?[]:o,l=i.mutate,u=function(e,t){switch(s[e].props.defaultValueType){case"Set<String>":return JSON.stringify(t);default:return t.toString()}};return Object(m.jsx)(m.Fragment,{children:Object(m.jsx)(et.a,{sx:{padding:0},children:s.map((function(e,t){var n,r=it(e.props);return r.updateValue=(n=t,function(e){_.post("/api/v1/source/".concat(a,"/preferences"),JSON.stringify({position:n,value:u(n,e)})).then((function(){return l()}))}),r.key=t,c.a.createElement(function(e){switch(e){case"CheckBoxPreference":return Hc;case"SwitchPreferenceCompat":return Uc;case"ListPreference":return Jc;case"EditTextPreference":return Yc;case"MultiSelectListPreference":return qc;default:return Hc}}(e.type),r)}))})})}function Gc(e){var t=e.mangas,n=e.isLoading,a=e.hasNextPage,r=e.lastPageNum,c=e.setLastPageNum,i=e.message,o=e.messageExtra,s=e.gridLayout,l=t,u=0===l.length&&t.length>0;return Object(m.jsx)(Xn,{mangas:l,isLoading:n,hasNextPage:a,lastPageNum:r,setLastPageNum:c,message:u?"There are no Manga matching this filter":i,messageExtra:o,gridLayout:s,inLibraryIndicator:!0})}var Zc=function(e){var t=e.state,n=e.name,a=e.position,r=e.group,i=e.updateFilterValue,o=e.update,s=c.a.useState(t),l=Object(u.a)(s,2),d=l[0],j=l[1];return void 0!==t?Object(m.jsx)(hn,{label:n,checked:d,onChange:function(e){j(e.target.checked);var t=o.filter((function(e){return!(a===e.position&&r===e.group)}));i([].concat(Object(Je.a)(t),[{position:a,state:e.target.checked.toString(),group:r}]))}}):null},Qc=function(e){var t=e.name;return Object(m.jsx)(Q.a,{sx:{mt:2},variant:"subtitle2",children:t},t)},$c=n(441);var ei=function(e){var t=e.values,n=e.name,a=e.state,r=e.selected,i=e.position,o=e.updateFilterValue,s=e.update,l=e.group;return void 0===r?function(e,t,n,a,r,i,o){var s=c.a.useState(n),l=Object(u.a)(s,2),d=l[0],j=l[1];if(e){var b=e.map((function(e){return Object(m.jsx)(ka.a,{value:e,children:e},"".concat(t," ").concat(e))}));return Object(m.jsxs)(Ir.a,{sx:{my:1},variant:"standard",children:[Object(m.jsx)($c.a,{children:t}),Object(m.jsx)(Fr.a,{name:t,value:e[d],label:t,onChange:function(t){var n=e.indexOf("".concat(t.target.value));j(n);var c=i.filter((function(e){return!(a===e.position&&o===e.group)}));r([].concat(Object(Je.a)(c),[{position:a,state:n.toString(),group:o}]))},children:b})]})}return null}(t,n,a,i,o,s,l):function(e,t,n,a,r,i,o){var s=c.a.useState(n),l=Object(u.a)(s,2),d=l[0],j=l[1];if(e){var b=e.map((function(e){return Object(m.jsx)(ka.a,{value:e.displayname,children:e.displayname},"".concat(t," ").concat(e.displayname))}));return Object(m.jsxs)(Ir.a,{sx:{my:1},variant:"standard",children:[Object(m.jsx)($c.a,{children:t}),Object(m.jsx)(Fr.a,{name:t,value:e[d].displayname,label:t,onChange:function(t){var n=e.map((function(e){return e.displayname})).indexOf("".concat(t.target.value));j(n);var c=i.filter((function(e){return!(a===e.position&&o===e.group)}));r([].concat(Object(Je.a)(c),[{position:a,state:n.toString(),group:o}]))},children:b})]})}return null}(t,n,a,i,o,s,l)},ti=n(397),ni=n(398),ai=function(e){var t=e.values,n=e.name,a=e.state,r=e.position,i=e.group,o=e.updateFilterValue,s=e.update,l=c.a.useState(a),d=Object(u.a)(l,2),j=d[0],b=d[1],h=c.a.useState(!1),f=Object(u.a)(h,2),p=f[0],O=f[1];if(t){return Object(m.jsxs)(Se.a,{sx:{mx:-2},children:[Object(m.jsxs)(Rc.a,{onClick:function(){O(!p)},children:[Object(m.jsx)(tt.a,{primary:n}),p?Object(m.jsx)(ti.a,{}):Object(m.jsx)(ni.a,{})]}),Object(m.jsx)(Dr.a,{in:p,children:Object(m.jsx)(Qt.a,{sx:{mx:4},children:t.map((function(e,t){return Object(m.jsx)(wn,{label:e,checked:j.index===t,sortDescending:!j.ascending,onClick:function(){return function(e){var t=j;t.index===e?t.ascending=!t.ascending:t.ascending=!0,t.index=e,b(t);var n=s.filter((function(e){return!(r===e.position&&i===e.group)}));o([].concat(Object(Je.a)(n),[{position:r,state:JSON.stringify(t),group:i}]))}(t)}},"".concat(n," ").concat(e))}))})})]})}return null},ri=n(442),ci=function(e){var t,n=e.state,a=e.name,r=e.position,i=e.group,o=e.updateFilterValue,s=e.update,l=c.a.useState(n||""),d=Object(u.a)(l,2),j=d[0],b=d[1];return void 0!==n?Object(m.jsxs)(Ir.a,{sx:{my:1},variant:"standard",children:[Object(m.jsx)($c.a,{children:a}),Object(m.jsx)(Pt.a,{name:a,value:j||"",onChange:function(e){b(e.target.value),clearTimeout(t),t=setTimeout((function(){!function(e){var t=s.filter((function(e){return!(r===e.position&&i===e.group)}));o([].concat(Object(Je.a)(t),[{position:r,state:e.target.value,group:i}]))}(e)}),2500)},endAdornment:Object(m.jsx)(ri.a,{position:"end",children:Object(m.jsx)(Dt.a,{})})})]}):Object(m.jsx)(m.Fragment,{})},ii=function(e){var t=e.state,n=e.name,a=e.position,r=e.group,i=e.updateFilterValue,o=e.update,s=c.a.useState(Number(t)),l=Object(u.a)(s,2),d=l[0],j=l[1];return void 0!==t?Object(m.jsx)(Nn,{label:n,checked:[void 0,!0,!1][d],onChange:function(e){return function(e){var t=void 0===e?0:e?1:2;j(t);var n=o.filter((function(e){return!(a===e.position&&r===e.group)}));i([].concat(Object(Je.a)(n),[{position:a,state:t.toString(),group:r}]))}(e)}}):Object(m.jsx)(m.Fragment,{})},oi=function(e){var t=e.state,n=e.name,a=e.position,r=e.updateFilterValue,i=e.update,o=c.a.useState(!1),s=Object(u.a)(o,2),l=s[0],d=s[1];return Object(m.jsxs)(Se.a,{sx:{mx:-2},children:[Object(m.jsxs)(Rc.a,{onClick:function(){return d(!l)},children:[Object(m.jsx)(tt.a,{primary:n}),l?Object(m.jsx)(ti.a,{}):Object(m.jsx)(ni.a,{})]}),Object(m.jsx)(Dr.a,{in:l,children:Object(m.jsx)(Qt.a,{sx:{mx:4},children:Object(m.jsx)(li,{sourceFilter:t,group:a,updateFilterValue:r,update:i})})})]})},si=function(e){var t=e.name;return Object(m.jsx)(Rr.a,{sx:{my:1},textAlign:"center",children:t},t)};function li(e){var t=e.sourceFilter,n=e.group,a=e.updateFilterValue,r=e.update;return Object(m.jsx)(Qt.a,{children:t.map((function(e,t){var c=r.find((function(e){return e.group===n&&e.position===t}));switch(c=c?c.state:c,e.type){case"CheckBox":return Object(m.jsx)(Zc,{name:e.filter.name,state:"false"===c||e.filter.state,position:t,group:n,updateFilterValue:a,update:r},"filters ".concat(e.filter.name));case"Group":return Object(m.jsx)(oi,{name:e.filter.name,state:e.filter.state,position:t,updateFilterValue:a,update:r},"filters ".concat(e.filter.name));case"Header":return Object(m.jsx)(Qc,{name:e.filter.name},"filters ".concat(e.filter.name));case"Select":return Object(m.jsx)(ei,{name:e.filter.name,values:e.filter.displayValues,state:parseInt(c,10)||e.filter.state,selected:e.filter.selected,position:t,group:n,updateFilterValue:a,update:r},"filters ".concat(e.filter.name));case"Separator":return Object(m.jsx)(si,{name:e.filter.name},"filters ".concat(e.filter.name));case"Sort":return Object(m.jsx)(ai,{name:e.filter.name,values:e.filter.values,state:c?JSON.parse(c):e.filter.state,position:t,group:n,updateFilterValue:a,update:r},"filters ".concat(e.filter.name));case"Text":return Object(m.jsx)(ci,{name:e.filter.name,state:c||e.filter.state,position:t,group:n,updateFilterValue:a,update:r},"filters ".concat(e.filter.name));case"TriState":return Object(m.jsx)(ii,{name:e.filter.name,state:parseInt(c,10)||e.filter.state,position:t,group:n,updateFilterValue:a,update:r},"filters ".concat(e.filter.name));default:return Object(m.jsx)(Se.a,{},"".concat(e.filter.name,"null"))}}))},"filters ".concat(n))}function ui(e){var t=e.sourceFilter,n=e.updateFilterValue,a=e.resetFilterValue,r=e.setTriggerUpdate,i=e.setSearch,o=e.update,s=c.a.useState(!1),l=Object(u.a)(s,2),d=l[0],j=l[1];return Object(m.jsxs)(m.Fragment,{children:[Object(m.jsxs)(Ea.a,{sx:{position:"fixed",bottom:"2em",right:"3em"},onClick:function(){return j(!d)},variant:"extended",color:"primary",children:[Object(m.jsx)($e.a,{}),"Filter"]}),Object(m.jsxs)(Rn,{open:d,onClose:function(){return j(!1)},children:[Object(m.jsxs)(Se.a,{sx:{display:"flex",p:2,pb:0},children:[Object(m.jsx)(Ye.a,{onClick:function(){a(0),j(!1)},children:"Reset"}),Object(m.jsx)(Ye.a,{sx:{marginLeft:"auto"},variant:"contained",onClick:function(){r(0),i(!0),j(!1)},children:"Submit"})]}),Object(m.jsx)(Se.a,{sx:{pb:2,mx:2},children:Object(m.jsx)(li,{sourceFilter:t,updateFilterValue:n,group:void 0,update:o})})]})]})}function di(){var e=p(),t=e.options.SourcegridLayout,n=e.setOptions,r=c.a.useState(null),i=Object(u.a)(r,2),o=i[0],s=i[1],l=Boolean(o),d=function(){s(null)};function j(e,t){t&&n((function(t){return Object(D.a)(Object(D.a)({},t),{},{SourcegridLayout:parseInt(e.target.name,10)})}))}return Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)($.a,{onClick:function(e){s(e.currentTarget)},size:"small",sx:{ml:2},"aria-controls":l?"account-menu":void 0,"aria-haspopup":"true","aria-expanded":l?"true":void 0,children:Object(m.jsx)(Fc.a,{})}),Object(m.jsxs)(Ca.a,{id:"basic-menu",anchorEl:o,open:l,onClose:d,MenuListProps:{"aria-labelledby":"basic-button"},children:[Object(m.jsx)(ka.a,{onClick:d,children:Object(m.jsx)(dn.a,{label:"Compact grid",value:a.Compact,control:Object(m.jsx)(fn.a,{name:a.Compact.toString(),checked:t===a.Compact||void 0===t,onChange:j})})}),Object(m.jsx)(ka.a,{onClick:d,children:Object(m.jsx)(dn.a,{label:"Comfortable grid",control:Object(m.jsx)(fn.a,{name:a.Comfortable.toString(),checked:t===a.Comfortable,onChange:j})})}),Object(m.jsx)(ka.a,{onClick:d,children:Object(m.jsx)(dn.a,{label:"List",control:Object(m.jsx)(fn.a,{name:a.List.toString(),checked:t===a.List,onChange:j})})})]})]})}function ji(e){var t,n,a=Object(r.useContext)(y),i=a.setTitle,o=a.setAction,s=Object(L.g)(),l=Object(L.i)().sourceId,d=Object(r.useState)(!1),j=Object(u.a)(d,2),b=j[0],h=j[1],f=Object(r.useState)([]),O=Object(u.a)(f,2),x=O[0],g=O[1],v=Object(r.useState)(!1),w=Object(u.a)(v,2),C=w[0],k=w[1],S=Object(r.useState)(1),N=Object(u.a)(S,2),E=N[0],T=N[1],I=Object(r.useState)(!1),F=Object(u.a)(I,2),D=F[0],P=F[1],B=Object(r.useState)(),z=Object(u.a)(B,2),A=z[0],M=z[1],W=Object(R.d)("query",R.c),V=Object(u.a)(W,2),H=V[0],U=V[1],J=c.a.useState(2),Y=Object(u.a)(J,2),X=Y[0],q=Y[1],K=Object(r.useState)([]),G=Object(u.a)(K,2),Z=G[0],Q=G[1],ee=Object(r.useState)(2),te=Object(u.a)(ee,2),ne=te[0],ae=te[1],re=Object(r.useState)(),ce=Object(u.a)(re,2),ie=ce[0],oe=ce[1],se=Object(r.useState)(),le=Object(u.a)(se,2),ue=le[0],de=le[1],je=Object(R.d)("R"),be=Object(u.a)(je,2),he=be[0],fe=be[1],pe=p().options;function Oe(){_.get("/api/v1/source/".concat(l,"/filters")).then((function(e){return e.data})).then((function(e){oe(e)}))}return Object(r.useEffect)((function(){i("Source")}),[]),Object(r.useEffect)((function(){_.get("/api/v1/source/".concat(l)).then((function(e){return e.data})).then((function(e){i(e.displayName),h(e.isConfigurable)}))}),[]),Object(r.useEffect)((function(){if(2!==ne)if(0!==ne)if(Z.length>0){var e=Z;Q([]),_.post("/api/v1/source/".concat(l,"/filters"),e.map((function(e){var t=e.position,n=e.state,a=e.group;return void 0===a?{position:t,state:n}:{position:a,state:JSON.stringify({position:t,state:n})}}))).then((function(){ae(0),Oe()}))}else P(!1),g([]),T(0),void 0===he&&A&&fe(null);else ae(1)}),[ne]),Object(r.useEffect)((function(){if(0===X)U(void 0),fe(void 0),q(1);else if(void 0===he)return void _.get("/api/v1/source/".concat(l,"/filters?reset=true")).then((function(){Oe(),M(!1),1===X&&ae(0)}));Oe()}),[X]),Object(r.useEffect)((function(){return o(Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)(di,{}),Object(m.jsx)(Mt,{}),b&&Object(m.jsx)($.a,{onClick:function(){return s.push("/sources/".concat(l,"/configure/"))},"aria-label":"display more actions",edge:"end",color:"inherit",size:"large",children:Object(m.jsx)(ve.a,{})})]})),function(){o(Object(m.jsx)(m.Fragment,{}))}}),[b]),Object(r.useEffect)((function(){M(!!H),void 0===he&&de(null)}),[H]),Object(r.useEffect)((function(){if(void 0!==A&&void 0!==H&&null===ue){var e=setTimeout((function(){ae(0)}),1e3);return function(){return clearTimeout(e)}}return void 0!==A&&de(null),function(){}}),[A,H]),Object(r.useEffect)((function(){if(0!==E){var t=e.popular?"popular":"latest";_.get("/api/v1/source/".concat(l,"/").concat(void 0!==H||A||null===he?"search":t).concat(void 0!==H||A||null===he?"?searchTerm=".concat(H||"","&pageNum=").concat(E):"/".concat(E))).then((function(e){return e.data})).then((function(e){g([].concat(Object(Je.a)(x),Object(Je.a)(e.mangaList.map((function(e){return{title:e.title,thumbnailUrl:e.thumbnailUrl,id:e.id,inLibrary:e.inLibrary}}))))),k(e.hasNextPage),P(!0)}))}else T(1)}),[E]),D&&(t="No manga was found!","0"===l&&(n=Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)("span",{children:"Check out "}),Object(m.jsx)("a",{href:"https://github.com/Suwayomi/Tachidesk-Server/wiki/Local-Source",children:"Local source guide"})]}))),Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)(Gc,{mangas:x,hasNextPage:C,lastPageNum:E,setLastPageNum:T,message:t,messageExtra:n,isLoading:!D,gridLayout:pe.SourcegridLayout}),void 0!==ie&&Object(m.jsx)(ui,{sourceFilter:ie,updateFilterValue:Q,resetFilterValue:q,setTriggerUpdate:ae,setSearch:M,update:Z})]})}function bi(e,t){return e.getDate()===t.getDate()&&e.getMonth()===t.getMonth()&&e.getFullYear()===t.getFullYear()}function hi(e){if(0===e.length)return[];var t={};return e.forEach((function(e,n){var a=function(e){var t=new Date;if(bi(t,e))return"TODAY";var n=new Date;return n.setDate(t.getDate()-1),bi(n,e)?"YESTERDAY":e.toLocaleDateString()}(function(e){var t=new Date(0);return t.setUTCSeconds(e),t}(e.chapter.fetchedAt));void 0===t[a]&&(t[a]=[]),t[a].push({item:e,globalIdx:n})})),Object.keys(t).map((function(e){return[e,t[e]]}))}var fi,pi=JSON.parse(window.localStorage.getItem("serverBaseURL")).replace("http","ws"),Oi={status:"Stopped",queue:[]},xi=function(){var e=Object(L.g)(),t=Object(r.useContext)(y),n=t.setTitle,a=t.setAction,c=Object(r.useState)([]),i=Object(u.a)(c,2),o=i[0],s=i[1],l=Object(r.useState)(!0),d=Object(u.a)(l,2),j=d[0],b=d[1],h=Object(r.useState)(!1),f=Object(u.a)(h,2),p=f[0],O=f[1],g=Object(r.useState)(0),v=Object(u.a)(g,2),w=v[0],C=v[1],k=x("serverBaseURL",""),N=Object(u.a)(k,1)[0],E=x("useCache",!0),T=Object(u.a)(E,1)[0],R=Object(r.useState)(),I=Object(u.a)(R,2)[1],F=Object(r.useState)(Oi),D=Object(u.a)(F,2),P=D[0].queue,B=D[1];Object(r.useEffect)((function(){var e=new WebSocket("".concat(pi,"/api/v1/downloads"));return e.onmessage=function(e){var t=JSON.parse(e.data);B(t)},I(e),function(){return e.close()}}),[]),Object(r.useEffect)((function(){n("Updates"),a(Object(m.jsx)(m.Fragment,{}))}),[]),Object(r.useEffect)((function(){j&&_.get("/api/v1/update/recentChapters/".concat(w)).then((function(e){return e.data})).then((function(e){var t=e.hasNextPage,n=e.page;s([].concat(Object(Je.a)(o),Object(Je.a)(n))),b(t),O(!0)}))}),[w]);var z=Object(r.useRef)(null),A=function(){if(z.current){var e=z.current.getBoundingClientRect();(e.y+e.height)/window.innerHeight<2&&j&&C(w+1)}};if(Object(r.useEffect)((function(){return window.addEventListener("scroll",A,!0),function(){window.removeEventListener("scroll",A,!0)}}),[j,o]),!p)return Object(m.jsx)(Ot,{});if(p&&0===o.length)return Object(m.jsx)(en,{message:"You don't have any updates yet."});return Object(m.jsx)(m.Fragment,{children:hi(o).map((function(t){return Object(m.jsxs)("div",{children:[Object(m.jsx)(Q.a,{variant:"h5",sx:{ml:3,my:2,fontWeight:700},children:t[0]}),t[1].map((function(t){var n=t.item,a=n.chapter,r=n.manga,c=t.globalIdx,i=function(e){var t=e.index,n=e.mangaId;return P.find((function(e){return t===e.chapterIndex&&n===e.mangaId}))}(a);return Object(m.jsx)(dt.a,{ref:c===o.length-1?z:void 0,sx:{margin:"10px"},children:Object(m.jsx)(lt.a,{component:S.b,to:{pathname:"/manga/".concat(a.mangaId,"/chapter/").concat(a.index),state:e.location.state},children:Object(m.jsxs)(jt.a,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:2},children:[Object(m.jsxs)(Se.a,{sx:{display:"flex"},children:[Object(m.jsx)(ut.a,{variant:"rounded",sx:{width:56,height:56,flex:"0 0 auto",marginRight:2,imageRendering:"pixelated"},src:"".concat(N).concat(r.thumbnailUrl,"?useCache=").concat(T)}),Object(m.jsxs)(Se.a,{sx:{display:"flex",flexDirection:"column"},children:[Object(m.jsx)(Q.a,{variant:"h5",component:"h2",children:r.title}),Object(m.jsx)(Q.a,{variant:"caption",display:"block",gutterBottom:!0,children:a.name})]})]}),i&&Object(m.jsx)(rn,{download:i}),null==i&&!a.downloaded&&Object(m.jsx)($.a,{onClick:function(e){e.stopPropagation(),e.preventDefault(),function(e){_.get("/api/v1/download/".concat(e.mangaId,"/chapter/").concat(e.index))}(a)},size:"large",children:Object(m.jsx)(ma.a,{})})]})})},c)}))]},t[0])}))})},mi=n(233),gi={en:(fi=mi,{translation:fi})},vi=n(236),yi=(Object(Ae.b)(aa.a).use(vi.a).init({resources:gi,fallbackLng:"en",interpolation:{escapeValue:!1},returnNull:!1,debug:!1}),function(){return Object(m.jsxs)(K,{children:[Object(m.jsx)(l.a,{}),Object(m.jsx)(We,{}),Object(m.jsx)(s.a,{id:"appMainContainer",maxWidth:!1,disableGutters:!0,sx:{mt:8,ml:{sm:8},mb:{xs:8,sm:0},width:"auto",overflow:"auto"},children:Object(m.jsxs)(L.d,{children:[Object(m.jsx)(L.b,{exact:!0,path:"/",render:function(){return Object(m.jsx)(L.a,{to:"/library"})}}),Object(m.jsx)(L.b,{path:"/settings/about",children:Object(m.jsx)(Bc,{})}),Object(m.jsx)(L.b,{path:"/settings/categories",children:Object(m.jsx)(Ac,{})}),Object(m.jsx)(L.b,{path:"/settings/defaultReaderSettings",children:Object(m.jsx)(Mc,{})}),Object(m.jsx)(L.b,{path:"/settings/backup",children:Object(m.jsx)(zc,{})}),Object(m.jsx)(L.b,{path:"/settings",children:Object(m.jsx)(Pc,{})}),Object(m.jsx)(L.b,{path:"/sources/:sourceId/popular/",children:Object(m.jsx)(ji,{popular:!0})}),Object(m.jsx)(L.b,{path:"/sources/:sourceId/latest/",children:Object(m.jsx)(ji,{popular:!1})}),Object(m.jsx)(L.b,{path:"/sources/:sourceId/configure/",children:Object(m.jsx)(Kc,{})}),Object(m.jsx)(L.b,{path:"/sources/all/search/",children:Object(m.jsx)(dc,{})}),Object(m.jsx)(L.b,{path:"/downloads",children:Object(m.jsx)(on,{})}),Object(m.jsx)(L.b,{path:"/manga/:mangaId/chapter/:chapterNum",children:Object(m.jsx)(m.Fragment,{})}),Object(m.jsx)(L.b,{path:"/manga/:id",children:Object(m.jsx)(lr,{})}),Object(m.jsx)(L.b,{path:"/library",children:Object(m.jsx)(ra,{})}),Object(m.jsx)(L.b,{path:"/updates",children:Object(m.jsx)(xi,{})}),Object(m.jsx)(L.b,{path:"/sources",children:Object(m.jsx)(yt,{})}),Object(m.jsx)(L.b,{path:"/extensions",children:Object(m.jsx)(Ht,{})}),Object(m.jsx)(L.b,{path:"/browse",children:Object(m.jsx)(Ut,{})})]})}),Object(m.jsx)(L.d,{children:Object(m.jsx)(L.b,{path:"/manga/:mangaId/chapter/:chapterIndex",render:function(e){return Object(m.jsx)(sc,{},e.match.params.chapterIndex)}})})]})});n(311),n(312);o.a.render(Object(m.jsx)(c.a.StrictMode,{children:Object(m.jsx)(yi,{})}),document.getElementById("root"))}},[[313,1,2]]]);
//# sourceMappingURL=main.c3bc3edc.chunk.js.map